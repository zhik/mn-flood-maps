(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function Ui(){}function h9(e){return e()}function iI(){return Object.create(null)}function Om(e){e.forEach(h9)}function p9(e){return typeof e=="function"}function sd(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let S0;function rI(e,t){return S0||(S0=document.createElement("a")),S0.href=t,e===S0.href}function Fz(e){return Object.keys(e).length===0}function Bz(e,...t){if(e==null)return Ui;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function iv(e,t,i){e.$$.on_destroy.push(Bz(t,i))}function Uz(e){return e&&p9(e.destroy)?e.destroy:Ui}function no(e,t){e.appendChild(t)}function kn(e,t,i){e.insertBefore(t,i||null)}function nn(e){e.parentNode.removeChild(e)}function Vz(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function Cs(e){return document.createElement(e)}function U_(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function EA(e){return document.createTextNode(e)}function Zy(){return EA(" ")}function xA(){return EA("")}function jz(e,t,i,r){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function vt(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function zz(e){return Array.from(e.childNodes)}function Hz(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}class Gz{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,r=null){this.e||(this.is_svg?this.e=U_(i.nodeName):this.e=Cs(i.nodeName),this.t=i,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)kn(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(nn)}}let AA;function _y(e){AA=e}const wf=[],nI=[],Lg=[],sI=[],qz=Promise.resolve();let V_=!1;function Wz(){V_||(V_=!0,qz.then(f9))}function j_(e){Lg.push(e)}const Zw=new Set;let T0=0;function f9(){const e=AA;do{for(;T0<wf.length;){const t=wf[T0];T0++,_y(t),Yz(t.$$)}for(_y(null),wf.length=0,T0=0;nI.length;)nI.pop()();for(let t=0;t<Lg.length;t+=1){const i=Lg[t];Zw.has(i)||(Zw.add(i),i())}Lg.length=0}while(wf.length);for(;sI.length;)sI.pop()();V_=!1,Zw.clear(),_y(e)}function Yz(e){if(e.fragment!==null){e.update(),Om(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j_)}}const Og=new Set;let gc;function y9(){gc={r:0,c:[],p:gc}}function m9(){gc.r||Om(gc.c),gc=gc.p}function Ts(e,t){e&&e.i&&(Og.delete(e),e.i(t))}function wa(e,t,i,r){if(e&&e.o){if(Og.has(e))return;Og.add(e),gc.c.push(()=>{Og.delete(e),r&&(i&&e.d(1),r())}),e.o(t)}else r&&r()}function Kz(e,t){wa(e,1,1,()=>{t.delete(e.key)})}function Zz(e,t,i,r,n,s,o,a,u,c,h,f){let y=e.length,m=s.length,g=y;const v={};for(;g--;)v[e[g].key]=g;const b=[],w=new Map,T=new Map;for(g=m;g--;){const C=f(n,s,g),k=i(C);let B=o.get(k);B?r&&B.p(C,t):(B=c(k,C),B.c()),w.set(k,b[g]=B),k in v&&T.set(k,Math.abs(g-v[k]))}const A=new Set,R=new Set;function M(C){Ts(C,1),C.m(a,h),o.set(C.key,C),h=C.first,m--}for(;y&&m;){const C=b[m-1],k=e[y-1],B=C.key,H=k.key;C===k?(h=C.first,y--,m--):w.has(H)?!o.has(B)||A.has(B)?M(C):R.has(H)?y--:T.get(B)>T.get(H)?(R.add(B),M(C)):(A.add(H),y--):(u(k,o),y--)}for(;y--;){const C=e[y];w.has(C.key)||u(C,o)}for(;m;)M(b[m-1]);return b}function Jy(e){e&&e.c()}function zh(e,t,i,r){const{fragment:n,on_mount:s,on_destroy:o,after_update:a}=e.$$;n&&n.m(t,i),r||j_(()=>{const u=s.map(h9).filter(p9);o?o.push(...u):Om(u),e.$$.on_mount=[]}),a.forEach(j_)}function Hh(e,t){const i=e.$$;i.fragment!==null&&(Om(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Jz(e,t){e.$$.dirty[0]===-1&&(wf.push(e),Wz(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function yp(e,t,i,r,n,s,o,a=[-1]){const u=AA;_y(e);const c=e.$$={fragment:null,ctx:null,props:s,update:Ui,not_equal:n,bound:iI(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:iI(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);let h=!1;if(c.ctx=i?i(e,t.props||{},(f,y,...m)=>{const g=m.length?m[0]:y;return c.ctx&&n(c.ctx[f],c.ctx[f]=g)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](g),h&&Jz(e,f)),y}):[],c.update(),h=!0,Om(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const f=zz(t.target);c.fragment&&c.fragment.l(f),f.forEach(nn)}else c.fragment&&c.fragment.c();t.intro&&Ts(e.$$.fragment),zh(e,t.target,t.anchor,t.customElement),f9()}_y(u)}class mp{$destroy(){Hh(this,1),this.$destroy=Ui}$on(t,i){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(i),()=>{const n=r.indexOf(i);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!Fz(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function l(e,t,i,r){var n,s=arguments.length,o=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o}const Xz="modulepreload",Qz=function(e,t){return new URL(e,t).href},oI={},V=function(t,i,r){return!i||i.length===0?t():Promise.all(i.map(n=>{if(n=Qz(n,r),n in oI)return;oI[n]=!0;const s=n.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":Xz,s||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),s)return new Promise((u,c)=>{a.addEventListener("load",u),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};function eH(e){return e&&e.release&&typeof e.release=="function"}function tH(e){return e&&e.acquire&&typeof e.acquire=="function"}class Is{constructor(t,i,r,n=1,s=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let o=0;o<s;o++)this._pool[o]=new this.ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let i;if(Is.test.disabled)i=new this.ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this.ctor}i=this._pool.pop()}return this.acquireFunction?this.acquireFunction(i,...t):tH(i)&&i.acquire(...t),i}release(t){t&&!Is.test.disabled&&(this.releaseFunction?this.releaseFunction(t):eH(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}Is.test={disabled:!1};function iH(e){e.length=0}class er{constructor(t=50,i=50){this._pool=new Is(Array,void 0,iH,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return Jw.acquire()}static release(t){return Jw.release(t)}static prune(){Jw.prune()}}const Jw=new er(100);function uSe(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function cSe(e,t){for(const i of e)if(i!=null&&t(i))return i}function z_(e){return e!=null&&typeof e[Symbol.iterator]=="function"}const rH=null;function E(e){return e!=null}function O(e){return e==null}function to(e,t){return E(e)?t(e):rH}function dSe(e){return e}function nH(e,t){if(O(e))throw new Error(t);return e}function Rb(e,t){return E(e)?e:typeof t=="function"?t():t}function hSe(e,t){return E(e)?e:t}function En(e){return E(e)&&e.destroy(),null}function pSe(e){return E(e)&&e.dispose(),null}function Zr(e){return E(e)&&e.remove(),null}function H_(e){return E(e)&&e.abort(),null}function fSe(e){return E(e)&&e.release(),null}function sH(e,t,i){return E(e)&&E(t)?E(i)?i(e,t):e.equals(t):e===t}function oH(e){return null}function ySe(e,t){const i=new Array;for(const r of e)i.push(_f(r,null,t));return i}function mSe(e,t){for(const i of e)to(i,t)}function _f(e,t,i){return E(e)?i(e):t}function gSe(e){return e.filter(t=>E(t))}function g9(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function vSe(e){return e}function Pb(e){return gp(()=>e.forEach(t=>E(t)&&t.remove()))}function gp(e){return{remove:()=>{e&&(e(),e=void 0)}}}class ms{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*ms._m:t}getInt(){return this._seed=(ms._a*this._seed+ms._c)%ms._m,this._seed}getFloat(){return this.getInt()/(ms._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/ms._m*r}}ms._m=2147483647,ms._a=48271,ms._c=0;function aH(e,t){return t?e.filter((i,r,n)=>n.findIndex(t.bind(null,i))===r):e.filter((i,r,n)=>n.indexOf(i)===r)}function MA(e,t,i){if(O(e)&&O(t))return!0;if(O(e)||O(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function bSe(e,t){let i=e.length!==t.length;e.length=t.length;for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function wSe(e,t,i){let r,n;return i?(r=t.filter(s=>!e.some(o=>i(o,s))),n=e.filter(s=>!t.some(o=>i(o,s)))):(r=t.filter(s=>!e.includes(s)),n=e.filter(s=>!t.includes(s))),{added:r,removed:n}}function _Se(e){return e&&typeof e.length=="number"}const lH=!!Array.prototype.fill;function uH(e,t){if(lH)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function SSe(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class v9{constructor(){this.last=0}}const b9=new v9;function w9(e,t,i,r){r=r||b9;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(e[o]===t)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(e[o]===t)return r.last=o,o;return-1}function _9(e,t,i,r){const n=i==null?e.length:i,s=w9(e,t,n,r);if(s!==-1)return e[s]=e[n-1],i==null&&e.pop(),t}const Vn=new Set;function cH(e,t,i=e.length,r=t.length,n,s){if(r===0||i===0)return i;Vn.clear();for(let a=0;a<r;++a)Vn.add(t[a]);n=n||b9;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(Vn.has(e[a])&&(s&&s.push(e[a]),Vn.delete(e[a]),e[a]=e[i-1],--i,--a,Vn.size===0||i===0))return Vn.clear(),i;for(let a=0;a<o;++a)if(Vn.has(e[a])&&(s&&s.push(e[a]),Vn.delete(e[a]),e[a]=e[i-1],--i,--a,Vn.size===0||i===0))return Vn.clear(),i;return Vn.clear(),i}new ms;function dH(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}let Ol;function F(e){return typeof Ol[e]=="function"?Ol[e]=Ol[e](globalThis):Ol[e]}var r9,n9,s9,o9;Ol=((r9=globalThis.dojoConfig)==null?void 0:r9.has)||((n9=globalThis.esriConfig)==null?void 0:n9.has)?{...(s9=globalThis.dojoConfig)==null?void 0:s9.has,...(o9=globalThis.esriConfig)==null?void 0:o9.has}:{},F.add=(e,t,i,r)=>((r||Ol[e]===void 0)&&(Ol[e]=t),i&&F(e)),F.cache=Ol,F.add("esri-deprecation-warnings",!0),(()=>{var t;F.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(F.add("host-browser",e),F.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),F.add("dom",e),F("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,s=parseFloat(n);if(F.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),F.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),F.add("khtml",n.includes("Konqueror")?s:void 0),F.add("edge",parseFloat(r.split("Edge/")[1])||void 0),F.add("opr",parseFloat(r.split("OPR/")[1])||void 0),F.add("webkit",!F("wp")&&!F("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),F.add("chrome",!F("edge")&&!F("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),F.add("android",!F("wp")&&parseFloat(r.split("Android ")[1])||void 0),F.add("safari",!n.includes("Safari")||F("wp")||F("chrome")||F("android")||F("edge")||F("opr")?void 0:parseFloat(n.split("Version/")[1])),F.add("mac",n.includes("Macintosh")),!F("wp")&&r.match(/(iPhone|iPod|iPad)/)){const o=RegExp.$1.replace(/P/,"p"),a=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",u=parseFloat(a.replace(/_/,".").replace(/_/g,""));F.add(o,u),F.add("ios",u)}F.add("trident",parseFloat(n.split("Trident/")[1])||void 0),F("webkit")||(!r.includes("Gecko")||F("wp")||F("khtml")||F("trident")||F("edge")||F.add("mozilla",s),F("mozilla")&&F.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&F.add("esri-mobile",t),i&&F.add("esri-iPhone",i),F.add("esri-geolocation",!!navigator.geolocation)}F.add("esri-canvas-svg-support",!F("trident")),F.add("esri-wasm","WebAssembly"in globalThis),F.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),F.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),F.add("esri-atomics","Atomics"in globalThis),F.add("esri-workers","Worker"in globalThis),F.add("web-feat:cache","caches"in globalThis),F.add("esri-workers-arraybuffer-transfer",!F("safari")||Number(F("safari"))>=12),F.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),F.add("featurelayer-simplify-payload-size-factors",[1,1,4]),F.add("featurelayer-snapshot-enabled",!0),F.add("featurelayer-snapshot-point-min-threshold",8e4),F.add("featurelayer-snapshot-point-max-threshold",4e5),F.add("featurelayer-snapshot-point-coverage",.1),F.add("featurelayer-advanced-symbols",!1),F.add("featurelayer-pbf",!0),F.add("featurelayer-pbf-statistics",!1),F.add("feature-layers-workers",!0),F.add("feature-polyline-generalization-factor",1),F.add("mapview-transitions-duration",200),F.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),F.add("mapserver-pbf-enabled",!1),F.add("mapimagelayer-popup-identify-max-tolerance",20),F.add("heatmap-allow-raster-fallback",!0),F.add("heatmap-force-raster",!1),F("host-webworker")||F("host-browser")&&(F.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),F.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{F.add("esri-image-decode",!0,!0,!0)}).catch(()=>{F.add("esri-image-decode",!1,!0,!0)})}return!1}),F.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function TSe(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function hH(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const r=Math.max(0,i-t),n=new e.constructor(r);for(let s=0;s<r;s++)n[s]=e[t+s];return n}function ESe(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function pH(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function fH(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function yH(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function mH(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function gH(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function vH(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function bH(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function wH(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function _H(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function S9(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&S9(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function $(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=A9(e);if(E(t))return t;if(T9(e))return e.clone();if(E9(e))return e.map($);if(x9(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=$(e[r]);return i}function G_(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=A9(e);if(E(t))return t;if(E9(e)){let i=!0;const r=e.map(n=>{const s=G_(n);return n!=null&&s==null&&(i=!1),s});return i?r:null}if(T9(e))return e.clone();if(!x9(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const n=e[r],s=G_(n);if(n!=null&&s==null)return null;i[r]=s}return i}return null}function T9(e){return typeof e.clone=="function"}function E9(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function x9(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function aI(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function A9(e){if(pH(e)||fH(e)||yH(e)||mH(e)||gH(e)||vH(e)||bH(e)||wH(e)||_H(e))return hH(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((i,r)=>{t.set(r,$(i))}),t}if(e instanceof Set){const t=new Set;return e.forEach(i=>{t.add($(i))}),t}return null}function CA(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function SH(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&MA(e,t):e instanceof Set?t instanceof Set&&EH(e,t):e instanceof Map?t instanceof Map&&xH(e,t):!!aI(e)&&aI(t)&&TH(e,t))}function TH(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function EH(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function xH(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const n=t.get(i);if(n!==r||n===void 0&&!t.has(i))return!1}return!0}function Vi(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function AH(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function kg(e,t,i){return i?rv(e,t,{policy:i,path:""}):rv(e,t,null)}function rv(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let s=null,o="merge";if(i&&(s=i.path?`${i.path}.${n}`:n,o=i.policy(s)),o==="replace")return r[n]=t[n],r;if(r[n]===void 0)return r[n]=$(t[n]),r;let a=r[n],u=t[n];if(a===u)return r;if(Array.isArray(u)||Array.isArray(r))a=a?Array.isArray(a)?r[n]=a.concat():r[n]=[a]:r[n]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(c=>{a.includes(c)||a.push(c)}));else if(u&&typeof u=="object")if(i){const c=i.path;i.path=s,r[n]=rv(a,u,i),i.path=c}else r[n]=rv(a,u,null);else r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=u);return r},e||{}):e}function M9(e){return Array.isArray(e)?e:e.split(".")}function lI(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function MH(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...lI(i));return t}return lI(e)}function C9(e,t,i,r){const n=MH(t);if(n.length!==1){const s=n.map(o=>r(e,o,i));return Pb(s)}return r(e,n[0],i)}function I9(e){let t=!1;return()=>{t||(t=!0,e())}}function N9(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const r=Vi(t);return AH(r,i)?r.get(i):t[i]}function R9(e,t,i){if(e==null)return e;const r=N9(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:R9(r,t,i+1)}function km(e,t,i=0){return typeof t!="string"||t.includes(".")?R9(e,M9(t),i):N9(t,e)}function nv(e,t){return km(e,t)}function uI(e,t){return km(t,e)!==void 0}var io;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(io||(io={}));class cI{constructor(t){this.autoDestroy=!1,this.properties=t}}function Fm(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const r=Object.create(t.properties),n=t.autoDestroy;for(const s in r)r[s]=$(r[s]);t=new cI(r),t.autoDestroy=n,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new cI({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function CH(e){return Fm(e).properties}function $b(e,t){const i=CH(e);let r=i[t];return r||(r=i[t]={}),r}function IH(e,t){return kg(e,t,RH)}const NH=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function RH(e){return NH.test(e)?"replace":"merge"}function P9(e,t,i=!1){return D9(e,t,i)}function vp(e,t){if(t!=null)return t[e]||$9(e.split("."),!1,t)}function Cr(e,t,i){const r=e.split("."),n=r.pop(),s=$9(r,!0,i);s&&n&&(s[n]=t)}function $9(e,t,i){let r=i;for(const n of e){if(r==null)return;if(!(n in r)){if(!t)return;r[n]={}}r=r[n]}return r}function D9(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let s=r[n],o=t[n];return s===o?r:s===void 0?(r[n]=$(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.concat():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{s.includes(a)||s.push(a)}):r[n]=o.concat())):o&&typeof o=="object"?r[n]=D9(s,o,i):r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=o),r)},e||{}):e}var a9;const De={apiKey:void 0,applicationUrl:(a9=globalThis.location)==null?void 0:a9.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(P9(De,globalThis.esriConfig,!0),delete De.has),!De.assetsPath){const e="4.24.7";De.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}De.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(De,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),De.request.corsEnabledServers=[],De.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const PH=/\{([^\}]+)\}/g;function dI(e){return e==null?"":e}function yo(e,t){return e.replace(PH,typeof t=="object"?(i,r)=>dI(vp(r,t)):(i,r)=>dI(t(r)))}function IA(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function NA(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function xSe(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const hI={info:0,warn:1,error:2,none:3};class W{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,W._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=W.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=W._loggers;return W._loggers=t,i},set throttlingDisabled(t){W._throttlingDisabled=t}}}static getLogger(t){let i=W._loggers[t];return i||(i=new W({module:t})),i}_log(t,i,...r){if(!!this._matchLevel(t)){if(i!=="always"&&!W._throttlingDisabled){const n=this._argsToKey(r),s=this._loggedMessages[t].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=W._tickCounter)return;this._loggedMessages[t].set(n,W._tickCounter),W._scheduleTickCounterIncrement()}for(const n of De.log.interceptors)if(n(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;E(r);){const n=r[t];if(E(n))return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=De.log.level?De.log.level:"warn";return hI[this._parentWithMember("level",i)]<=hI[t]}_argsToKey(...t){const i=(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]";return NA(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){W._tickCounterScheduled||(W._tickCounterScheduled=!0,Promise.resolve().then(()=>{W._tickCounter++,W._tickCounterScheduled=!1}))}}W._loggers={},W._tickCounter=0,W._tickCounterScheduled=!1,W._throttlingDisabled=!1;var Fe;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(Fe||(Fe={}));const q_=Fe.USER+1;function kl(e){switch(e){case"defaults":return Fe.DEFAULTS;case"service":return Fe.SERVICE;case"portal-item":return Fe.PORTAL_ITEM;case"web-scene":return Fe.WEB_SCENE;case"web-map":return Fe.WEB_MAP;case"user":return Fe.USER}}function sv(e){switch(e){case Fe.DEFAULTS:return"defaults";case Fe.SERVICE:return"service";case Fe.PORTAL_ITEM:return"portal-item";case Fe.WEB_SCENE:return"web-scene";case Fe.WEB_MAP:return"web-map";case Fe.USER:return"user"}return void 0}function $H(e){return sv(e)}var Je;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Je||(Je={}));let ov,Sf=[];const DH=W.getLogger("esri.core.Accessor");function Me(e){ov!==void 0&&ov.onObservableAccessed(e)}let Fg=!1,Bg=!1;function _a(e,t,i){if(Fg)return RA(e,t,i);L9(e);const r=t.call(i);return O9(),r}function LH(e,t){return _a(void 0,e,t)}function RA(e,t,i){const r=Fg;Fg=!0,L9(e);let n=null;try{n=t.call(i)}catch(s){Bg&&DH.error(s)}return O9(),Fg=r,n}function L9(e){ov=e,Sf.push(e)}function O9(){const e=Sf.pop();ov=Sf.length>0?Sf[Sf.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function k9(e,t){if(t.flags&Je.DepTrackingInitialized)return;const i=Bg;Bg=!1,t.flags&Je.AutoTracked?RA(t,t.metadata.get,e):F9(e,t),Bg=i}const OH=[];function F9(e,t){t.flags&Je.ExplicitlyTracking||(t.flags|=Je.ExplicitlyTracking,RA(t,()=>{const i=t.metadata.dependsOn||OH;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=M9(r);for(let s=0,o=e;s<n.length&&o!=null&&typeof o=="object";++s)o=pI(o,n[s],s!==n.length-1)}else pI(e,r,!1)}),t.flags&=~Je.ExplicitlyTracking)}function pI(e,t,i){var s;const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const o=parseInt(r,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.getItemAt(o)}const n=(s=Vi(e))==null?void 0:s.properties.get(r);return n&&(Me(n),k9(e,n)),i?e[r]:void 0}class B9{constructor(t,i){this._observers=t,this._observer=i}remove(){dH(this._observers,this._observer)}}class fI{constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=Je.Dirty|(r.nonNullable?Je.NonNullable:0)|(r.hasOwnProperty("value")?Je.HasDefaultValue:0)|(r.get===void 0?Je.DepTrackingInitialized:0)|(r.dependsOn===void 0?Je.AutoTracked:0)}destroy(){if(this.flags&Je.Dirty&&this._observers){const t=this._observers.slice();for(const i of t)i.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Me(this);const t=this.properties.store,i=this.propertyName,r=this.flags,n=t.get(i);if(r&Je.Computing||~r&Je.Dirty&&t.has(i))return n;this.flags|=Je.Computing;const s=this.properties.host;let o;r&Je.AutoTracked?o=_a(this,this.metadata.get,s):(F9(s,this),o=this.metadata.get.call(s)),t.set(i,o,Fe.COMPUTED);const a=t.get(i);return a===n?this.flags&=~Je.Dirty:LH(this.commit,this),this.flags&=~Je.Computing,a}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Je.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let r=0;r<t.length;++r)i.push(t[r].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new B9(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Je.Overriden&&(this.flags|=Je.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~Je.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class PA{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new PA;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,$(r))}),i}get(t){return this._values.get(t)}originOf(){return Fe.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function E0(e,t,i){return e!==void 0}function yI(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&Je.NonNullable)||(r.lifecycle,io.INITIALIZING,!1))}function kH(e){return e&&typeof e.destroy=="function"}W.getLogger("esri.core.accessorSupport.Properties");class FH{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=io.INITIALIZING,this.store=new PA,this._origin=Fe.USER;const i=this.host.constructor.__accessorMetadata__,r=i.properties;for(const n in r){const s=new fI(this,n,r[n]);this.properties.set(n,s)}this.metadatas=r,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=io.CONSTRUCTING}constructed(){this.lifecycle=io.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const r=this.internalGet(t);r&&kH(r)&&(r.destroy(),~i.flags&Je.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==io.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();Me(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.flags&Je.HasDefaultValue)return"defaults"}return sv(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(E0(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);E0(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const n=this.properties.get(i);if(!E0(n))return"";const s=new Set,o=_a({onObservableAccessed:u=>s.add(u),onTrackingEnd:()=>{}},()=>{var u;return(u=n.metadata.get)==null?void 0:u.call(t)});let a=`${r}${t.declaredClass.split(".").pop()}.${i}: ${o}
`;if(s.size===0)return a;r+="  ";for(const u of s){if(!(u instanceof fI))continue;const c=u.properties.host,h=u.propertyName,f=Vi(c);a+=f?f.getDependsInfo(c,h,r):`${r}${h}: undefined
`}return a}setAtOrigin(t,i,r){const n=this.properties.get(t);if(E0(n))return this._setAtOrigin(n,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&Je.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&Je.Overriden&&(i.flags&=~Je.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!yI(r,t,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:a}=s;if(Xw.release(s),!o)return;i=a}r.flags|=Je.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!yI(r,t,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:u}=o;if(Xw.release(o),!a)return;i=u}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=kl(t)}getDefaultOrigin(){return sv(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==io.INITIALIZING?this._origin:Fe.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const n=this.store,s=t.propertyName;n.has(s,r)&&CA(i,n.get(s))&&~t.flags&Je.Overriden&&r===n.originOf(s)||(t.invalidate(),n.set(s,i,r),t.commit(),k9(this.host,t))}_cast(t,i){const r=Xw.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}}class BH{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const Xw=new Is(BH);function UH(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const n=vp(r,t),s=n==null?"":n;if(s===void 0)throw new Error(`could not find key "${r}" in template`);return s.toString()})}class Db{constructor(t,i,r){this.name=t,this.details=r,this.message=void 0,this instanceof Db&&(this.message=i&&UH(i,r)||"")}toString(){return"["+this.name+"]: "+this.message}}class P extends Db{constructor(t,i,r){if(super(t,i,r),!(this instanceof P))return new P(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return $(i)}catch{return"[object]"}}))}}catch(t){throw W.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new P(t.name,t.message,t.details)}}P.prototype.type="error";function av(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))av(e,r,t[r]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(n.length-1,1)[0];return void av(nv(e,n),s,i)}const r=e.__accessor__;r!=null&&VH(t,r),e[t]=i}}function VH(e,t){if(F("esri-unknown-property-errors")&&!jH(e,t))throw new P("set:unknown-property",zH(e,t))}function jH(e,t){return t.metadatas[e]!=null}function zH(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}W.getLogger("esri.core.accessorSupport.set");class U9 extends Is{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=oH(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const x0=[];function lv(e){x0.push(e),x0.length===1&&queueMicrotask(()=>{const t=x0.slice();x0.length=0;for(const i of t)i()})}const HH=29;class Sy{constructor(t,i=HH){this.name=t,this._counter=0,this._items=new Array(i)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,i)=>t-i)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,i)=>t+i,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var W_;(function(e){const t=(s,o,a,u)=>{let c=o,h=o;const f=a>>>1,y=s[c-1];for(;h<=f;){h=c<<1,h<a&&u(s[h-1],s[h])<0&&++h;const m=s[h-1];if(u(m,y)<=0)break;s[c-1]=m,c=h}s[c-1]=y},i=(s,o)=>s<o?-1:s>o?1:0;function r(s,o,a,u){o===void 0&&(o=0),a===void 0&&(a=s.length),u===void 0&&(u=i);for(let h=a>>>1;h>o;h--)t(s,h,a,u);const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,u)}}function*n(s,o,a,u){o===void 0&&(o=0),a===void 0&&(a=s.length),u===void 0&&(u=i);for(let h=a>>>1;h>o;h--)t(s,h,a,u),yield;const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,u),yield}}e.sort=r,e.iterableSort=n})(W_||(W_={}));const mI=W_,GH=1.5,qH=1.1;class Hl{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new v9,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>gI(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];t(n)&&i.push(n)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,gI(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=w9(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const i=_9(this.data,t,this.length,this._hint);return i!==void 0&&(this.length=this.length-1),this._shrink(),i}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=cH(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){t>=this.length||i>=this.length||t===i||([this.data[t],this.data[i]]=[this.data[i],this.data[t]])}sort(t){mI.sort(this.data,0,this.length,t)}iterableSort(t){return mI.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}filterInPlace(t,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,n=this.data;for(let s=0;s<r;++s)t.call(i,n[s],s,n)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=t.call(i,this.data[n],n,this.data);return r}reduce(t,i){let r=i;for(let n=0;n<this.length;++n)r=t(r,this.data[n],n,this.data);return r}has(t){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===t)return!0;return!1}}function gI(e){e.data.length>GH*e.length&&(e.data.length=Math.floor(e.length*qH))}function WH(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const Bm=WH(globalThis),vI=new Set;function YH(e,t,i=!1){i&&vI.has(t)||(i&&vI.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function Y_(e,t,i={}){if(F("esri-deprecation-warnings")){const{moduleName:r}=i;V9(e,`Property: ${(r?r+"::":"")+t}`,i)}}function V9(e,t,i={}){if(F("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let a=t;r&&(a+=`
	\u{1F6E0}\uFE0F Replacement: ${r}`),n&&(a+=`
	\u2699\uFE0F Version: ${n}`),s&&(a+=`
	\u{1F517} See ${s} for more details.`),YH(e,a,o)}}function Lb(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function Ob(e,t,i){if(!Lb(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const n of r)e.addEventListener(n,i);return{remove(){for(const n of r)e.removeEventListener(n,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function j9(e,t,i){if(!Lb(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=Ob(e,t,n=>{r.remove(),i.call(e,n)});return{remove(){r.remove()}}}const KH={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function ro({key:e}){return KH[e]||e}function Mt(e="Aborted"){return new P("AbortError",e)}function Ct(e,t="Aborted"){if(Pn(e))throw Mt(t)}function kb(e){return E(e)?"aborted"in e?e:e.signal:e}function Pn(e){const t=kb(e);return E(t)&&t.aborted}function Gl(e){if(lr(e))throw e}function K_(e){if(!lr(e))throw e}function $n(e,t){const i=kb(e);if(!O(i)){if(!i.aborted)return j9(i,"abort",()=>t());t()}}function $A(e,t){const i=kb(e);if(!O(i))return Ct(i),j9(i,"abort",()=>t(Mt()))}function ZH(e,t){const i=kb(t);return O(i)?e:new Promise((r,n)=>{let s=$n(t,()=>n(Mt()));const o=()=>s=Zr(s);e.then(o,o),e.then(r,n)})}function lr(e){return e&&e.name==="AbortError"}async function Z_(e){try{return await e}catch(t){if(!lr(t))throw t}}function Sa(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}async function di(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(o=>e[o]),n=await di(r),s={};return i.map((o,a)=>s[o]=n[a]),s}const t=e;return new Promise(i=>{const r=[];let n=t.length;n===0&&i(r),t.forEach(s=>{const o={promise:s||Promise.resolve(s)};r.push(o),o.promise.then(a=>{o.value=a}).catch(a=>{o.error=a}).then(()=>{--n,n===0&&i(r)})})})}async function JH(e){return(await di(e)).filter(t=>!!t.value).map(t=>t.value)}function Fb(e,t,i){const r=new AbortController;return $n(i,()=>r.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);$n(r,()=>{o&&(clearTimeout(o),s(Mt()))})})}function Aa(e){return e&&typeof e.then=="function"}function J_(e){return Aa(e)?e:Promise.resolve(e)}function DA(e,t=-1){let i,r,n,s,o=null;const a=(...u)=>{if(i){r=u,s&&s.reject(Mt()),s=Sa();const y=s.promise;if(o){const m=o;o=null,m.abort()}return y}if(n=s||Sa(),s=null,t>0){const y=new AbortController;i=J_(e(...u,y.signal));const m=i;Fb(t).then(()=>{i===m&&(s?y.abort():o=y)})}else i=1,i=J_(e(...u));const c=()=>{const y=r;r=n=i=o=null,y!=null&&a(...y)},h=i,f=n;return h.then(c,c),h.then(f.resolve,f.reject),f.promise};return a}function XH(){let e,t;const i=new Promise((n,s)=>{e=n,t=s}),r=n=>{e(n)};return r.resolve=n=>e(n),r.reject=n=>t(n),r.timeout=(n,s)=>Bm.setTimeout(()=>r.reject(s),n),r.promise=i,r}function LA(e,t){let i,r=new AbortController;const n=e(r.signal);let s={promise:n,finished:!1,abort:()=>{r&&(r.abort(),r=null)}};const o=()=>{s&&(s.finished=!0,s=null),E(i)&&(i.remove(),i=null),r=null};return n.then(o,o),i=$n(t,()=>{E(s)&&s.abort()}),s}async function bI(e){await Promise.resolve(),Ct(e)}function ASe(e){return e}class QH{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class eG{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let X_=0;const qp={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Q_=["prepare","preRender","render","postRender","update","finish"],eS=[],Uc=new Hl;class tG{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const uv={frameTasks:Uc,willDispatch:!1,clearFrameTasks:iG,dispatch:G9,executeFrameTasks:rG};function bp(e){const t=new eG(e);return eS.push(t),uv.willDispatch||(uv.willDispatch=!0,lv(G9)),t}function Gh(e){const t=new QH(e);return Uc.push(t),cv==null&&(X_=performance.now(),cv=requestAnimationFrame(z9)),new tG(t)}let cv=null;function iG(e=!1){Uc.forAll(t=>{t.removed=!0}),e&&H9()}function z9(){const e=performance.now();cv=null,cv=Uc.length>0?requestAnimationFrame(z9):null,uv.executeFrameTasks(e)}function rG(e){const t=e-X_;X_=e;const i=1e3/60,r=Math.max(0,t-i);for(let n=0;n<Q_.length;n++){const s=performance.now(),o=Q_[n];Uc.forAll(a=>{var u;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(qp.time=e,qp.deltaTime=a.ticks===0?0:t,qp.elapsedFrameTime=performance.now()-e,qp.frameDuration=i-r,(u=a.phases[o])==null||u.call(a,qp)))}),sG[n].record(performance.now()-s)}H9(),oG.record(performance.now()-e)}const A0=new Hl;function H9(){Uc.forAll(e=>{e.removed&&A0.push(e)}),Uc.removeUnorderedMany(A0.data,A0.length),A0.clear()}function G9(){for(;eS.length;){const e=eS.shift();e.isActive&&e.callback()}uv.willDispatch=!1}function nG(e=1,t){const i=XH(),r=()=>{Pn(t)?i.reject(Mt()):e===0?i():(--e,lv(()=>r()))};return r(),i.promise}const sG=Q_.map(e=>new Sy(e)),oG=new Sy("total");function aG(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let lG=0;function Ty(){return++lG}class Bb{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let r=0;r<i.length;++r)t.push(i[r].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let Ah=!1;const dv=[];function q9(e,t){let i=new Bb(s),r=null,n=!1;function s(){if(!i||n)return;if(Ah)return void K9(s);const a=r;i.clear(),Ah=!0,n=!0,r=_a(i,e),n=!1,Ah=!1,t(r,a),Z9()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=_a(i,e),n=!1,{remove:o}}function W9(e,t){let i=new Bb(n),r=null;function n(){t(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=_a(i,e),r):null}return o(),{remove:s}}function Y9(e){let t=new Bb(r),i=!1;function r(){t&&!i&&(Ah?K9(r):(t.clear(),Ah=!0,i=!0,_a(t,e),i=!1,Ah=!1,Z9()))}function n(){t&&(t.destroy(),t=null)}return i=!0,_a(t,e),i=!1,{remove:n}}function K9(e){dv.includes(e)||dv.unshift(e)}function Z9(){for(;dv.length;)dv.pop()()}var Ey;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Ey||(Ey={}));class Xy{constructor(){this.uid=Ty(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,n,s){return this.pool.acquire(Ey.Untracked,t,i,r,n,s,CA)}static acquireTracked(t,i,r,n){return this.pool.acquire(Ey.Tracked,t,i,r,null,null,n)}notify(t,i){this.type===Ey.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,n,s,o,a){this.uid=Ty(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Ty(),this.removed=!0}}Xy.pool=new U9(Xy);const Ug=new er,fa=new Set;let hv;function pv(e){fa.delete(e),fa.add(e),hv||(hv=bp(dG))}function uG(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function cG(e){for(const t of fa.values())t.target===e&&(t.removed=!0)}function dG(){let e=10;for(;hv&&e--;){hv=null;const t=hG(),i=Ug.acquire();for(const r of t){const n=r.uid;uG(r),n===r.uid&&r.removed&&i.push(r)}for(const r of fa)r.removed&&(i.push(r),fa.delete(r));for(const r of i)Xy.pool.release(r);Ug.release(i),Ug.release(t),tS.forEach(r=>r())}}function hG(){const e=Ug.acquire();e.length=fa.size;let t=0;for(const i of fa)e[t]=i,++t;return fa.clear(),e}const tS=new Set;function pG(e){return tS.add(e),{remove(){tS.delete(e)}}}function fG(e,t,i){let r=C9(e,t,i,(n,s,o)=>{let a,u,c=W9(()=>km(n,s),(h,f)=>{n.__accessor__.destroyed||a&&a.uid!==u?r.remove():(a||(a=Xy.acquireUntracked(h,o,f,n,s),u=a.uid),pv(a))});return{remove:I9(()=>{c.remove(),a&&(a.uid!==u||a.removed||(a.removed=!0,pv(a)),a=null),r=c=null})}});return r}function yG(e,t,i){const r=C9(e,t,i,(n,s,o)=>{let a=!1;return q9(()=>km(n,s),(u,c)=>{n.__accessor__.destroyed?r.remove():a||(a=!0,CA(c,u)||o.call(n,u,c,s,n),a=!1)})});return r}function mG(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?yG(e,t,i):fG(e,t,i)}function gG(e,t,i){let r,n,s=W9(e,(o,a)=>{r&&r.uid!==n?s.remove():(r||(r=Xy.acquireTracked(o,t,a,i),n=r.uid),pv(r))});return{remove:I9(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,pv(r)),r=null),s=null})}}function vG(e,t,i){let r=!1;return q9(e,(n,s)=>{r||(r=!0,i(s,n)||t(n,s),r=!1)})}function bG(e,t,i=!1,r=SH){return i?vG(e,t,r):gG(e,t,r)}function wI(e){return aG(fa,t=>t.oldValue===e)}function Ub(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function J9(e,t,i){const r=e.get(t);if(r!==void 0)return r;const n=i();return e.set(t,n),n}const Mh=W.getLogger("esri.core.Accessor");function wG(e){return e==null?e:new Date(e)}function _G(e){return e==null?e:!!e}function Um(e){return e==null?e:e.toString()}function xn(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function OA(e){return e==null?e:Math.round(parseFloat(e))}function X9(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function fv(e,t){return t!=null&&e&&!(t instanceof e)}function Q9(e){return e&&"isCollection"in e}function _I(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function SG(e,t){if(!t||!t.constructor||!Q9(t.constructor))return iS(e,t)?t:new e(t);const i=_I(e.prototype.itemType),r=_I(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(iS(e,t),t):new e(t):t}function iS(e,t){return!!X9(t)&&(Mh.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Vb(e)+"'"),!0)}function kA(e,t){return t==null?t:Q9(e)?SG(e,t):fv(e,t)?iS(e,t)?t:new e(t):t}function Vb(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const TG=new WeakMap;function EG(e){switch(e){case Number:return xn;case st:return OA;case Boolean:return _G;case String:return Um;case Date:return wG;default:return J9(TG,e,()=>kA.bind(null,e))}}function it(e,t){const i=EG(e);return arguments.length===1?i:i(t)}function Qy(e,t,i){return arguments.length===1?Qy.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function xG(e,t){return arguments.length===1?Qy(it.bind(null,e)):Qy(it.bind(null,e),t)}function e6(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>e6(e,t-1,r)):e(i)}function yv(e,t,i){if(arguments.length===2)return yv.bind(null,e,t);if(!i)return i;let r=t,n=i=e6(e,t,i);for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function AG(e,t,i){return arguments.length===2?yv(it.bind(null,e),t):yv(it.bind(null,e),t,i)}function t6(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function rS(e,t){if(arguments.length===2)return rS(e).call(null,t);const i=new Set,r=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,u)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(i.has(a)||n.some(f=>c==="string"&&f===String||c==="number"&&f===Number))||c==="object"&&n.some(f=>!fv(a,f))?a:(h&&r.length?(s||(s=r.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Mh.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(f=>Vb(f)).join(", ")),Mh.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Mh.error("Accessor#set",`'${a}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function mo(e,t){if(arguments.length===2)return mo(e).call(null,t);const i={},r=[],n=[];for(const u in e.typeMap){const c=e.typeMap[u];i[u]=it(c),r.push(Vb(c)),n.push(u)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?u=>u[e.key]:e.key;return u=>{if(e.base&&!fv(e.base,u)||u==null)return u;const c=a(u)||e.defaultKeyValue,h=i[c];if(!h)return Mh.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!fv(e.typeMap[c],u))return u;if(typeof e.key=="string"&&!X9(u)){const f={};for(const y in u)y!==e.key&&(f[y]=u[y]);return h(f)}return h(u)}}class st{}const MSe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function MG(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function i6(e){switch(e.type){case"native":return it(e.value);case"array":return Qy(i6(e.value));case"one-of":return CG(e);default:return null}}function CG(e){let t=null;return(i,r)=>sS(i,e)?i:(t==null&&(t=nS(e)),Mh.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function nS(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case st:return"integer";case Date:return"date";default:return Vb(e.value)}case"array":return`array of ${nS(e.value)}`;case"one-of":{const t=e.values.map(i=>nS(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function sS(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case st:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!sS(i,t.value));case"one-of":return t.values.some(i=>sS(e,i))}}function d(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),n=$b(t,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in e&&W.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=r.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const u=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[u],n.get=function(){let f=nv(this,u);if(typeof f=="function"){h||(h=u.split(".").slice(0,-1).join("."));const y=nv(this,h);y&&(f=f.bind(y))}return f},n.readOnly||(n.set=c?function(f){f!==void 0?this._override(i,f):this._clearOverride(i)}:function(f){av(this,u,f)})}const o=e.type,a=e.types;n.cast||(o?n.cast=IG(o):a&&(Array.isArray(a)?n.cast=Qy(mo(a[0])):n.cast=mo(a))),e.range&&(n.cast=NG(n.cast,e.range)),IH(n,e)}}function r6(e,t,i){const r=$b(e,i);r.json||(r.json={});let n=r.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function IG(e){let t=0,i=e;if(MG(e))return i6(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(t6(r))return t===0?rS(r):yv(rS(r),t);if(t===1)return xG(r);if(t>1)return AG(r,t);const n=e;return n.from?n.from:it(n)}function NG(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function RG(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const n=t[r];i[r].forEach(s=>{t[s]=n}),delete t[r]}}}class ur extends Db{constructor(t,i,r){if(super(t,i,r),!(this instanceof ur))return new ur(t,i,r)}}ur.prototype.type="warning";function n6(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const oS=W.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function SI(e,t,i){var r,n;e&&(!i&&!t.read||((r=t.read)==null?void 0:r.reader)||((n=t.read)==null?void 0:n.enabled)===!1||DG(e)&&Cr("read.reader",wp(e),t))}function wp(e){var i,r,n;const t=(i=e.ndimArray)!=null?i:0;if(t>1)return $G(e);if(t===1)return TI(e);if("type"in e&&o6(e.type)){const s=(n=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:n.Type,o=TI(typeof s=="function"?{type:s}:{types:s});return(a,u,c)=>{const h=o(a,u,c);return h&&new e.type(h)}}return FA(e)}function FA(e){return"type"in e?PG(e.type):LG(e.types)}function PG(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void oS.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,r),s}:e.fromJSON}function s6(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(n=>s6(e,n,i,r-1)):e(t,void 0,i)}function $G(e){var n;const t=FA(e),i=s6.bind(null,t),r=(n=e.ndimArray)!=null?n:0;return(s,o,a)=>{if(s==null)return s;s=i(s,a,r);let u=r,c=s;for(;u>0&&Array.isArray(c);)u--,c=c[0];if(c!==void 0)for(let h=0;h<u;h++)s=[s];return s}}function TI(e){const t=FA(e);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const u=t(a,void 0,n);u!==void 0&&o.push(u)}return o}const s=t(i,void 0,n);return s!==void 0?[s]:void 0}}function o6(e){if(!n6(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?BA(t.Type):a6(t.Type))}function DG(e){return"types"in e?a6(e.types):BA(e.type)}function BA(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||o6(e))}function a6(e){for(const t in e.typeMap)if(!BA(e.typeMap[t]))return!1;return!0}function LG(e){var r;let t=null;const i=(r=e.errorContext)!=null?r:"type";return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void oS.error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=OG(e));const u=e.key;if(typeof u!="string")return;const c=n[u],h=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const y=`Type '${c||"unknown"}' is not supported`;return o&&o.messages&&n&&o.messages.push(new ur(`${i}:unsupported`,y,{definition:n,context:o})),void oS.error(y)}const f=new h;return f.read(n,o),f}}function OG(e){var i,r;const t={};for(const n in e.typeMap){const s=e.typeMap[n],o=Fm(s.prototype);if(typeof e.key=="function")continue;const a=o.properties[e.key];if(!a)continue;((i=a.json)==null?void 0:i.type)&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(t[a.json.type[0]]=s);const u=(r=a.json)==null?void 0:r.write;if(!u||!u.writer){t[n]=s;continue}const c=u.target,h=typeof c=="string"?c:e.key,f={};u.writer(n,f,h),f[h]&&(t[f[h]]=s)}return t}function kG(e){if(e.json||(e.json={}),xI(e.json),AI(e.json),EI(e.json),e.json.origins)for(const t in e.json.origins)xI(e.json.origins[t]),AI(e.json.origins[t]),EI(e.json.origins[t]);return!0}function EI(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function xI(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function AI(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const FG=W.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function MI(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(i===1||"type"in e&&n6(e.type))?t.write.writer=VG:i>1?t.write.writer=jG(i):t.types?Array.isArray(t.types)?t.write.writer=UG(t.types[0]):t.write.writer=BG(t.types):t.write.writer=em}function BG(e){return(t,i,r,n)=>t?l6(t,e,n)?em(t,i,r,n):void 0:em(t,i,r,n)}function l6(e,t,i){var r,n;for(const s in t.typeMap)if(e instanceof t.typeMap[s])return!0;if(i!=null&&i.messages){const s=(r=t.errorContext)!=null?r:"type",o=`Values of type '${(n=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?n:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new P(`${s}:unsupported`,o,{definition:e,context:i})),FG.error(o)}return!1}function UG(e){return(t,i,r,n)=>!t||!Array.isArray(t)?em(t,i,r,n):em(t.filter(s=>l6(s,e,n)),i,r,n)}function em(e,t,i,r){Cr(i,mv(e,r),t)}function mv(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?gv(e):e}function gv(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function VG(e,t,i,r){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>mv(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[mv(e,r)],Cr(i,n,t)}function u6(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>u6(r,t,i-1)):mv(e,t)}function jG(e){return(t,i,r,n)=>{let s;if(t===null)s=null;else{s=u6(t,n,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let u=0;u<o;u++)s=[s]}Cr(r,s,i)}}function aS(e,t){return UA(e,"read",t)}function c6(e,t){return UA(e,"write",t)}function UA(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const n=e.json.origins[i.origin];n&&(t==="any"||t in n)&&(r=n)}return r}function zG(e){const t=HG(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],n=r.types?GG(r):t;SI(n,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),MI(n,r)}SI(t,e.json,!0),MI(t,e.json)}function HG(e){return e.json.types?lS(e.json):e.type?d6(e):lS(e)}function GG(e){return e.type?d6(e):lS(e)}function d6(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!t6(i);)i=i[0],t++;return{type:i,ndimArray:t}}function lS(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function qG(e){kG(e)&&(RG(e),zG(e))}const Qw=new Set,e2=new Set;function S(e){return t=>{t.prototype.declaredClass=e,YG(t);const i=[],r=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!Qw.has(n.initialize)&&(Qw.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!e2.has(n.destroy)&&(e2.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);Qw.clear(),e2.clear();class s extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let u=i.length-1;u>=0;u--)i[u].call(this)}}),r.length){let u=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!u){u=!0;for(let c=0;c<r.length;c++)r[c].call(this)}}})}this.postscript(...a)}}}return s.__accessorMetadata__=Fm(t.prototype),s.prototype.declaredClass=e,s}}function WG(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;Me(i);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function YG(e){const t=e.prototype,i=Fm(t).properties,r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];qG(s),r[n]={enumerable:!0,configurable:!0,get:WG(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===io.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,o)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,r)}var h6;function KG(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Tf=Symbol("Accessor-Handles");class ce{constructor(...t){if(this[h6]=null,this.constructor===ce)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new FH(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...u){super(...u),this.inherited=null,n&&n.apply(this,u)}}Fm(o.prototype);for(const a in t){const u=t[a];o.prototype[a]=typeof u=="function"?function(...c){const h=this.inherited;let f;this.inherited=function(...y){if(s.prototype[a])return s.prototype[a].apply(this,y)};try{f=u.apply(this,c)}catch(y){throw this.inherited=h,y}return this.inherited=h,f}:t[a]}for(const a in i){const u=KG(i[a]);d(u)(o.prototype,a)}return S(r)(o)}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(to(this[Tf],t=>{t.forEach(i=>i.remove())}),this[Tf]=null,cG(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===io.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return nv(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return av(this,t,i),this}watch(t,i,r){return mG(this,t,i,r)}own(t){let i=this[Tf];if(O(i)&&(i=this[Tf]=new Set),z_(t))for(const r of t)i.add(r);else i.add(t)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,i){return this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}h6=Tf;class Ch{constructor(){this._emitter=new Ch.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(n=null){this.target=n,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(n,s){const o=this._listenersMap&&this._listenersMap.get(n);if(!o)return!1;const a=this.target||this;return[...o].forEach(u=>{u.call(a,s)}),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(u=>this.on(u,s));return Pb(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(n)||[],u=a.indexOf(s);u>=0&&a.splice(u,1)}}}once(n,s){const o=this.on(n,a=>{o.remove(),s.call(null,a)});return o}hasEventListener(n){const s=this._listenersMap&&this._listenersMap.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=l([S("esri.core.Evented")],n),n};let i=class extends ce{constructor(){super(...arguments),this._emitter=new Ch.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=l([S("esri.core.Evented")],i),e.EventedAccessor=i})(Ch||(Ch={}));const Ma=Ch;var Ke;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Ke||(Ke={}));function VA(e){return(t,i)=>{t[i]=e}}class p6{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new B9(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const r=t[i];r.onInvalidated(),r.onCommitted()}}}var aa;class ZG{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const ln=new Is(ZG,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),JG=()=>{};function t2(e){return e?e instanceof nc?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function i2(e){if(e&&e.length)return e[0]}function XG(e,t,i,r){const n=Math.min(e.length-i,t.length-r);let s=0;for(;s<n&&e[i+s]===t[r+s];)s++;return s}function f6(e,t,i,r){t&&t.forEach((n,s,o)=>{e.push(n),f6(e,i.call(r,n,s,o),i,r)})}const $a=new Set,Da=new Set,La=new Set,r2=new Map;let QG=0,nc=aa=class extends Ma.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new p6,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:QG++})}static isCollection(e){return e!=null&&e instanceof aa}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof aa?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Me(this._observable),this._items}set items(e){this._emitBeforeChanges(Ke.ADD)||(this._splice(0,this.length,t2(e)),this._emitAfterChanges(Ke.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=JG,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(Me(this._observable),this._emitBeforeChanges(Ke.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(Ke.ADD),this}addMany(e,t=this._items.length){if(Me(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Ke.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,t2(e)),this._emitAfterChanges(Ke.ADD),this}at(e){if(Me(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Me(this._observable),!this.length||this._emitBeforeChanges(Ke.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Ke.REMOVE),e}clone(){return Me(this._observable),this._createNewInstance({items:this._items.map($)})}concat(...e){Me(this._observable);const t=e.map(t2);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Me(this._observable),!this.length||this._emitBeforeChanges(Ke.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)e.call(t,i[n],n,i);this._emitAfterChanges(Ke.REMOVE)}every(e,t){return Me(this._observable),this._items.every(e,t)}filter(e,t){let i;return Me(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return Me(this._observable),this._items.find(e,t)}findIndex(e,t){return Me(this._observable),this._items.findIndex(e,t)}flatten(e,t){Me(this._observable);const i=[];return f6(i,this,e,t),new aa(i)}forEach(e,t){return Me(this._observable),this._items.forEach(e,t)}getItemAt(e){return Me(this._observable),this._items[e]}getNextIndex(e){Me(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Me(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Me(this._observable),this._items.indexOf(e,t)}join(e=","){return Me(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Me(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Me(this._observable);const i=this._items.map(e,t);return new aa({items:i})}reorder(e,t=this.length-1){Me(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Ke.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Ke.MOVE)}return e}}pop(){if(Me(this._observable),!this.length||this._emitBeforeChanges(Ke.REMOVE))return;const e=i2(this._splice(this.length-1,1));return this._emitAfterChanges(Ke.REMOVE),e}push(...e){return Me(this._observable),this._emitBeforeChanges(Ke.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Ke.ADD)),this.length}reduce(e,t){Me(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Me(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Me(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Me(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Ke.REMOVE))return;const t=i2(this._splice(e,1));return this._emitAfterChanges(Ke.REMOVE),t}removeMany(e){if(Me(this._observable),!e||!e.length||this._emitBeforeChanges(Ke.REMOVE))return[];const t=e instanceof aa?e.toArray():e,i=this._items,r=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],a=i.indexOf(o);if(a>-1){const u=1+XG(t,i,s+1,a+1),c=this._splice(a,u);c&&c.length>0&&r.push.apply(r,c),s+=u-1}}return this._emitAfterChanges(Ke.REMOVE),r}reverse(){if(Me(this._observable),this._emitBeforeChanges(Ke.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Ke.MOVE),this}shift(){if(Me(this._observable),!this.length||this._emitBeforeChanges(Ke.REMOVE))return;const e=i2(this._splice(0,1));return this._emitAfterChanges(Ke.REMOVE),e}slice(e=0,t=this.length){return Me(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Me(this._observable),this._items.some(e,t)}sort(e){if(Me(this._observable),!this.length||this._emitBeforeChanges(Ke.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Ke.MOVE),this}splice(e,t,...i){Me(this._observable);const r=(t?Ke.REMOVE:0)|(i.length?Ke.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(e,t,i)||[];return this._emitAfterChanges(r),n}toArray(){return Me(this._observable),this._items.slice()}toJSON(){return Me(this._observable),this.toArray()}toLocaleString(){return Me(this._observable),this._items.toLocaleString()}toString(){return Me(this._observable),this._items.toString()}unshift(...e){return Me(this._observable),!e.length||this._emitBeforeChanges(Ke.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Ke.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=bp(()=>this._dispatchChange())),t){if(o=r.splice(e,t),this.hasEventListener("before-remove")){const a=ln.acquire();a.target=this,a.cancellable=!0;for(let u=0,c=o.length;u<c;u++)s=o[u],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(u,1),r.splice(e,0,s),e+=1,u-=1,c-=1);ln.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=ln.acquire();a.target=this,a.cancellable=!1;const u=o.length;for(let c=0;c<u;c++)a.reset(o[c]),this.emit("after-remove",a);ln.release(a)}}if(i&&i.length){if(n){const h=[];for(const f of i){const y=n.ensureType(f);y==null&&f!=null||h.push(y)}i=h}const a=this.hasEventListener("before-add"),u=this.hasEventListener("after-add"),c=e===this.length;if(a||u){const h=ln.acquire();h.target=this,h.cancellable=!0;const f=ln.acquire();f.target=this,f.cancellable=!1;for(const y of i)a?(h.reset(y),this.emit("before-add",h),h.defaultPrevented||(c?r.push(y):r.splice(e++,0,y),this._set("length",r.length),u&&(f.reset(y),this.emit("after-add",f)))):(c?r.push(y):r.splice(e++,0,y),this._set("length",r.length),f.reset(y),this.emit("after-add",f));ln.release(f),ln.release(h)}else{if(c)for(const h of i)r.push(h);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||o&&o.length)&&this._notifyChangeEvent(i,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=ln.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,ln.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=ln.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),ln.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;$a.clear(),Da.clear(),La.clear();for(const{added:u,removed:c}of i){if(u)if(La.size===0&&Da.size===0)for(const h of u)$a.add(h);else for(const h of u)Da.has(h)?(La.add(h),Da.delete(h)):La.has(h)||$a.add(h);if(c)if(La.size===0&&$a.size===0)for(const h of c)Da.add(h);else for(const h of c)$a.has(h)?$a.delete(h):(La.delete(h),Da.add(h))}const r=er.acquire();$a.forEach(u=>{r.push(u)});const n=er.acquire();Da.forEach(u=>{n.push(u)});const s=this._items,o=t.items,a=er.acquire();if(La.forEach(u=>{o.indexOf(u)!==s.indexOf(u)&&a.push(u)}),t.listeners&&(r.length||n.length||a.length)){const u={target:this,added:r,removed:n,moved:a},c=t.listeners.length;for(let h=0;h<c;h++){const f=t.listeners[h];f.removed||f.callback.call(this,u)}}er.release(r),er.release(n),er.release(a)}$a.clear(),Da.clear(),La.clear()}};nc.ofType=e=>{if(!e)return aa;if(r2.has(e))return r2.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const n=e.typeMap[r].prototype.declaredClass;t?t+=` | ${n}`:t=n}let i=class extends aa{};return l([VA({Type:e,ensureType:typeof e=="function"?it(e):mo(e)})],i.prototype,"itemType",void 0),i=l([S(`esri.core.Collection<${t}>`)],i),r2.set(e,i),i},l([d()],nc.prototype,"length",void 0),l([d()],nc.prototype,"items",null),nc=aa=l([S("esri.core.Collection")],nc);const me=nc;function Vc(e,t,i=me){return t||(t=new i),t===e||(t.removeAll(),eq(e)?t.addMany(e):e&&t.add(e)),t}function y6(e){return e}function eq(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}class jA{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new jA;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,$(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i,r;return(r=(i=this._values.get(t))==null?void 0:i.origin)!=null?r:Fe.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===Fe.DEFAULTS){const n=this._values.get(t);if(n&&n.origin!=null&&n.origin>r)return}this._values.set(t,new tq(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===Fe.DEFAULTS?t:Fe.USER}}class tq{constructor(t,i){this.value=t,this.origin=i}}function m6(e,t,i){t.keys().forEach(n=>{i.set(n,t.get(n),Fe.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(n=>{e.internalGet(n)&&i.set(n,e.internalGet(n),Fe.DEFAULTS)})}function iq(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&uI(r,i))return!0}else for(const n of r)if(n===t||n.includes(".")&&n.indexOf(t)===0&&uI(n,i))return!0;return!1}function rq(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function nq(e,t,i,r,n){let s=aS(t[i],n);rq(s)&&(e[i]=!0);for(const o of Object.getOwnPropertyNames(t))s=aS(t[o],n),iq(s,i,r)&&(e[o]=!0)}function sq(e,t,i,r){const n=i.metadatas,s=UA(n[t],"any",r),o=s&&s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,r):o;a!==void 0&&i.set(t,a)}const g6={origin:"service"};function v6(e,t,i=g6){if(!t||typeof t!="object")return;const r=Vi(e),n=r.metadatas,s={};for(const o of Object.getOwnPropertyNames(t))nq(s,n,o,t,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=aS(n[o],i).read,u=a&&a.source;let c;c=u&&typeof u=="string"?km(t,u):t[o],a&&a.reader&&(c=a.reader.call(e,c,t,i)),c!==void 0&&r.set(o,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||sq(e,o,r,i)}r.setDefaultOrigin("user")}function oq(e,t,i,r=g6){var s;const n={...r,messages:[]};i(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(o):e.loadWarnings.push(o)})}const aq=W.getLogger("esri.core.accessorSupport.write");function lq(e,t,i,r,n){var o,a;const s={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,r,s,i,n),s}function b6(e,t,i,r,n,s){if(!r||!r.write)return!1;const o=e.get(i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(e,o,i,s);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1)return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new P("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return a&&s&&s.messages?s.messages.push(a):a&&!s&&aq.error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===Fe.DEFAULTS)&&uq(e,i,s,r,o)||!n.ignoreOrigin&&s&&s.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<kl(s.origin))}function uq(e,t,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,i);return MA(o,n)}return!1}return s===n}function cq(e,t,i,r){const n=Vi(e),s=n.metadatas,o=c6(s[t],r);return!!o&&b6(e,n,t,o,i,r)}function w6(e,t,i){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return kg(t,e.toJSON(i));const r=Vi(e),n=r.metadatas;for(const a in n){const u=c6(n[a],i);if(!b6(e,r,a,u,void 0,i))continue;const c=e.get(a),h=lq(e,u,u.write&&typeof u.write.target=="string"?u.write.target:a,c,i);Object.keys(h).length>0&&(t=kg(t,h),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&Promise.all(i.resources.pendingOperations).then(()=>kg(t,h)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:a,oldOrigin:$H(r.store.originOf(a)),newOrigin:i.origin}))}return t}const Vm=e=>{let t=class extends e{constructor(...i){super(...i);const r=Vi(this),n=r.store,s=new jA;r.store=s,m6(r,n,s)}read(i,r){v6(this,i,r)}write(i={},r){return w6(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return dq.call(this,i,r)}};return t=l([S("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function dq(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let j=class extends Vm(ce){};j=l([S("esri.core.JSONSupport")],j);var xl;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(xl||(xl={}));class hq{constructor(t){this.instance=t,this._resolver=Sa(),this._status=xl.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=xl.RESOLVED,this._cleanUp()},()=>{this._status=xl.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===xl.RESOLVED}isRejected(){return this._status===xl.REJECTED}isFulfilled(){return this._status!==xl.PENDING}abort(){this._resolver.reject(Mt())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=Sa(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},n=>{this.isFulfilled()||this._allPromise!==r||lr(n)||this._resolver.reject(n)}),t.resolve()}}const jb=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new hq(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((n,s)=>{this._promiseProps.when(n,s)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=l([S("esri.core.Promise")],t),t};let vv=class extends jb(ce){};vv=l([S("esri.core.Promise")],vv);const pq="not-loaded",fq="loading",yq="failed",CI="loaded",_6=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,u)=>{const c=$A(s,u);this.destroyed&&u(new P("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,u).finally(()=>{c&&c.remove()})});if(this.loadStatus===pq){this._set("loadStatus",fq);const a=this._loadController=new AbortController;n({signal:a.signal}),$n(a.signal,()=>{this._promiseProps.abort()})}return r(),o}})),this.when(()=>{this._set("loadStatus",CI),this._loadController=null},r=>{this._set("loadStatus",yq),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===CI}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new P("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return l([d({readOnly:!0})],t.prototype,"loaded",null),l([d({readOnly:!0})],t.prototype,"loadError",void 0),l([d({clonable:!1})],t.prototype,"loadStatus",void 0),l([d({type:[ur],readOnly:!0})],t.prototype,"loadWarnings",null),t=l([S("esri.core.Loadable")],t),t};let Ef=class extends _6(vv){};Ef=l([S("esri.core.Loadable")],Ef),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=_6,e.isLoadable=t}(Ef||(Ef={}));const go=Ef;function mq(e,t,i){return di(e.map((r,n)=>t.apply(i,[r,n])))}async function gq(e,t,i){return(await di(e.map((r,n)=>t.apply(i,[r,n])))).map(r=>r.value)}async function zb(e){if(O(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function CSe(e){try{return{ok:!0,value:await e}}catch(t){return Gl(t),{ok:!1,error:t}}}async function S6(e,t){return await e.load(),vq(e,t)}async function vq(e,t){const i=[],r=(...s)=>{for(const o of s)O(o)||(Array.isArray(o)?r(...o):me.isCollection(o)?o.forEach(a=>r(a)):go.isLoadable(o)&&i.push(o))};t(r);let n=null;if(await gq(i,async s=>{(await zb(bq(s)?s.loadAll():s.load())).ok!==!1||n||(n=s)}),n)throw n.loadError;return e}function bq(e){return"loadAll"in e&&typeof e.loadAll=="function"}const wq=W.getLogger("esri.core.urlUtils"),_p=De.request,II="esri/config: esriConfig.request.proxyUrl is not set.",T6=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,E6=/^\s*http:/i,_q=/^\s*https:/i,Sq=/^\s*file:/i,Tq=/:\d+$/,Eq=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,xq=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Aq=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class Ih{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(xq);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Aq),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const M0={},Mq=new Ih(De.applicationUrl);let Fi=Mq;const Cq=Iq();let zA=Cq;const HA=()=>Fi,x6=()=>zA;function Iq(){const e=Fi.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Fi.scheme}://${Fi.host}${Fi.port!=null?`:${Fi.port}`:""}`}${t}`}function ut(e){const t={path:null,query:null},i=new Ih(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=A6(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function A6(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function NI(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function jc(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=t&&t[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>NI(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):NI(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function Nq(e=!1){let t,i=_p.proxyUrl;if(typeof e=="string"){t=Oq(e);const r=Hb(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw wq.warn(II),new P("urlutils:proxy-not-set",II);return t&&uS()&&(i=KA(i)),ut(i)}function ISe(e){const t=Hb(e);let i,r;if(t){const n=GA(t.proxyUrl);i=n.path,r=n.query?A6(n.query):null}if(i){const n=ut(e);e=i+"?"+n.path;const s=jc({...r,...n.query});s&&(e=`${e}?${s}`)}return e}const Wp={path:"",query:""};function GA(e){const t=e.indexOf("?");return t!==-1?(Wp.path=e.slice(0,t),Wp.query=e.slice(t+1)):(Wp.path=e,Wp.query=null),Wp}function M6(e){return e=(e=bv(e=Vq(e=GA(e).path),!0)).toLowerCase()}function Rq(e){const t={proxyUrl:e.proxyUrl,urlPrefix:M6(e.urlPrefix)},i=_p.proxyRules,r=t.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;n=s;break}o.indexOf(r)===0&&(n=s+1)}return i.splice(n,0,t),n}function Hb(e){const t=_p.proxyRules,i=M6(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function C6(e,t){return e=RI(e),t=RI(t),bv(e)===bv(t)}function RI(e){const t=(e=Jr(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function I6(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=_p.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function tm(e,t,i=!1){const r=dS(e),n=dS(t);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function qA(e){if(typeof e=="string"){if(!nr(e))return!0;e=dS(e)}if(tm(e,Fi))return!0;const t=_p.trustedServers||[];for(let i=0;i<t.length;i++){const r=Pq(t[i]);for(let n=0;n<r.length;n++)if(tm(e,r[n]))return!0}return!1}function Pq(e){return M0[e]||(YA(e)||Dn(e)?M0[e]=[new Ih(ws(e))]:M0[e]=[new Ih(`http://${e}`),new Ih(`https://${e}`)]),M0[e]}function ws(e,t=zA,i){return Dn(e)?i&&i.preserveProtocolRelative?e:Fi.scheme==="http"&&Fi.authority===Nn(e).slice(2)?`http:${e}`:`https:${e}`:YA(e)?e:vo(e[0]==="/"?Uq(t):t,e)}function WA(e,t=zA,i){if(!nr(e))return e;const r=Jr(e),n=r.toLowerCase(),s=Jr(t).toLowerCase().replace(/\/+$/,""),o=i?Jr(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(f,y,m)=>(m=f.indexOf(y,m))===-1?f.length:m;let u=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,u+1)===s.slice(0,u)+"/"&&(c=u+1,u!==n.length);)u=a(n,"/",u+1);if(c===-1||o&&c<o.length)return e;e=r.slice(c);const h=s.slice(c-1).replace(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function Jr(e){return e=Hq(e=zq(e=jq(e=ws(e=e.trim()))))}function vo(...e){const t=e.filter(E);if(!t||!t.length)return;const i=[];if(nr(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),Fq(t[0])&&(i[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function Nn(e,t=!1){if(Gb(e)||od(e))return null;let i=e.indexOf("://");if(i===-1&&Dn(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=bv(e,!0)),e}function nr(e){return Dn(e)||YA(e)}function Gb(e){return e!=null&&e.slice(0,5)==="blob:"}function od(e){return e.slice(0,5)==="data:"}function NSe(e){const t=N6(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let n=0;n<i.length;n++)r[n]=i.charCodeAt(n);return r.buffer}function RSe(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const $q=/^data:(.*?)(;base64)?,(.*)$/;function N6(e){const t=e.match($q);if(!t)return null;const[,i,r,n]=t;return{mediaType:i,isBase64:!!r,data:n}}function R6(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function PSe(e,t){Dq(e,t)||Lq(e,t)}function Dq(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function Lq(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function Dn(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function YA(e){return T6.test(e)}function Oq(e){return _q.test(e)||Fi.scheme==="https"&&Dn(e)}function kq(e){return E6.test(e)||Fi.scheme==="http"&&Dn(e)}function Fq(e){return Sq.test(e)}function KA(e){return Dn(e)?`https:${e}`:e.replace(E6,"https:")}function Bq(){return Fi.scheme==="http"}function uS(){return Fi.scheme==="https"}function bv(e,t=!1){return Dn(e)?e.slice(2):(e=e.replace(T6,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Uq(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function P6(e){let t=0;if(nr(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function $Se(e,t){if(!e)return"";const i=ut(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const n=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(n,"")}function Vq(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function qb(e){return e.replace(/\/+$/,"")}function jq(e){if(/^https?:\/\//i.test(e)){const t=GA(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function zq(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Hq(e){const t=_p.httpsDomains;if(!kq(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),Tq.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return Bq()&&r===Fi.authority&&!Eq.test(e)||(uS()&&r===Fi.authority||t&&t.some(n=>r===n||r.endsWith(`.${n}`))||uS()&&!Hb(e))&&(e=KA(e)),e}function cS(e,t,i){if(!(t&&i&&e&&nr(e)))return e;const r=e.indexOf("//"),n=e.indexOf("/",r+2),s=e.indexOf(":",r+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(o)}`}function dS(e){return typeof e=="string"?new Ih(ws(e)):(e.scheme||(e.scheme=Fi.scheme),e)}function DSe(e){return qq.test(e)}function $6(e,t){const i=ut(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function D6(e,t,i){const r=ut(e),n=r.query||{};return n[t]=String(i),`${r.path}?${jc(n)}`}function ya(e,t){const i=ut(e),r=i.query||{};for(const s in t)r[s]=t[s];const n=jc(r);return n?`${i.path}?${n}`:i.path}function LSe(e){if(O(e))return null;const t=e.match(Gq);return t?t[1]:null}const Gq=/.*?\.([^\/]*)$/,qq=/(^data:image\/svg|\.svg$)/i;function te(e,t,i){let r,n;return t===void 0?(n=e,r=[void 0]):typeof t!="string"?(n=e,r=[void 0],i=t):(n=t,r=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const u of r){const c=r6(s,u,n);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=a[o]}}}var zc;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(zc||(zc={}));let p;const _={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(p=2e3;p<=2045;p++)_[p]=0;for(p=2056;p<=2065;p++)_[p]=0;for(p=2067;p<=2135;p++)_[p]=0;for(p=2137;p<=2154;p++)_[p]=0;for(p=2161;p<=2170;p++)_[p]=0;for(p=2172;p<=2193;p++)_[p]=0;for(p=2195;p<=2198;p++)_[p]=0;for(p=2200;p<=2203;p++)_[p]=0;for(p=2205;p<=2217;p++)_[p]=0;for(p=2222;p<=2224;p++)_[p]=1;for(p=2225;p<=2250;p++)_[p]=2;for(p=2251;p<=2253;p++)_[p]=1;for(p=2257;p<=2264;p++)_[p]=2;for(p=2274;p<=2279;p++)_[p]=2;for(p=2280;p<=2282;p++)_[p]=1;for(p=2283;p<=2289;p++)_[p]=2;for(p=2290;p<=2292;p++)_[p]=0;for(p=2308;p<=2313;p++)_[p]=0;for(p=2315;p<=2491;p++)_[p]=0;for(p=2494;p<=2866;p++)_[p]=0;for(p=2867;p<=2869;p++)_[p]=1;for(p=2870;p<=2888;p++)_[p]=2;for(p=2891;p<=2895;p++)_[p]=2;for(p=2896;p<=2898;p++)_[p]=1;for(p=2902;p<=2908;p++)_[p]=2;for(p=2915;p<=2920;p++)_[p]=2;for(p=2921;p<=2923;p++)_[p]=1;for(p=2924;p<=2930;p++)_[p]=2;for(p=2931;p<=2962;p++)_[p]=0;for(p=2964;p<=2968;p++)_[p]=2;for(p=2969;p<=2973;p++)_[p]=0;for(p=2975;p<=2991;p++)_[p]=0;for(p=2995;p<=3051;p++)_[p]=0;for(p=3054;p<=3079;p++)_[p]=0;for(p=3081;p<=3088;p++)_[p]=0;for(p=3092;p<=3101;p++)_[p]=0;for(p=3106;p<=3138;p++)_[p]=0;for(p=3146;p<=3151;p++)_[p]=0;for(p=3153;p<=3166;p++)_[p]=0;for(p=3168;p<=3172;p++)_[p]=0;for(p=3174;p<=3203;p++)_[p]=0;for(p=3294;p<=3358;p++)_[p]=0;for(p=3367;p<=3403;p++)_[p]=0;for(p=3408;p<=3416;p++)_[p]=0;for(p=3417;p<=3438;p++)_[p]=2;for(p=3441;p<=3446;p++)_[p]=2;for(p=3447;p<=3450;p++)_[p]=0;for(p=3451;p<=3459;p++)_[p]=2;for(p=3460;p<=3478;p++)_[p]=0;for(p=3554;p<=3559;p++)_[p]=0;for(p=3560;p<=3570;p++)_[p]=2;for(p=3571;p<=3581;p++)_[p]=0;for(p=3594;p<=3597;p++)_[p]=0;for(p=3601;p<=3604;p++)_[p]=0;for(p=3637;p<=3639;p++)_[p]=0;for(p=3665;p<=3667;p++)_[p]=0;for(p=3693;p<=3695;p++)_[p]=0;for(p=3701;p<=3727;p++)_[p]=0;for(p=3728;p<=3739;p++)_[p]=2;for(p=3740;p<=3751;p++)_[p]=0;for(p=3753;p<=3760;p++)_[p]=2;for(p=3761;p<=3773;p++)_[p]=0;for(p=3775;p<=3777;p++)_[p]=0;for(p=3779;p<=3781;p++)_[p]=0;for(p=3783;p<=3785;p++)_[p]=0;for(p=3788;p<=3791;p++)_[p]=0;for(p=3797;p<=3802;p++)_[p]=0;for(p=3814;p<=3816;p++)_[p]=0;for(p=3825;p<=3829;p++)_[p]=0;for(p=3832;p<=3841;p++)_[p]=0;for(p=3844;p<=3852;p++)_[p]=0;for(p=3873;p<=3885;p++)_[p]=0;for(p=3890;p<=3893;p++)_[p]=0;for(p=3907;p<=3912;p++)_[p]=0;for(p=3942;p<=3950;p++)_[p]=0;for(p=3968;p<=3970;p++)_[p]=0;for(p=3973;p<=3976;p++)_[p]=0;for(p=3986;p<=3989;p++)_[p]=0;for(p=3994;p<=3997;p++)_[p]=0;for(p=4048;p<=4051;p++)_[p]=0;for(p=4056;p<=4063;p++)_[p]=0;for(p=4093;p<=4096;p++)_[p]=0;for(p=4390;p<=4398;p++)_[p]=0;for(p=4399;p<=4413;p++)_[p]=2;for(p=4418;p<=4433;p++)_[p]=2;for(p=4455;p<=4457;p++)_[p]=2;for(p=4484;p<=4489;p++)_[p]=0;for(p=4491;p<=4554;p++)_[p]=0;for(p=4568;p<=4589;p++)_[p]=0;for(p=4652;p<=4656;p++)_[p]=0;for(p=4766;p<=4800;p++)_[p]=0;for(p=5014;p<=5016;p++)_[p]=0;for(p=5069;p<=5072;p++)_[p]=0;for(p=5105;p<=5130;p++)_[p]=0;for(p=5173;p<=5188;p++)_[p]=0;for(p=5253;p<=5259;p++)_[p]=0;for(p=5269;p<=5275;p++)_[p]=0;for(p=5292;p<=5311;p++)_[p]=0;for(p=5329;p<=5331;p++)_[p]=0;for(p=5343;p<=5349;p++)_[p]=0;for(p=5355;p<=5357;p++)_[p]=0;for(p=5387;p<=5389;p++)_[p]=0;for(p=5459;p<=5463;p++)_[p]=0;for(p=5479;p<=5482;p++)_[p]=0;for(p=5518;p<=5520;p++)_[p]=0;for(p=5530;p<=5539;p++)_[p]=0;for(p=5550;p<=5552;p++)_[p]=0;for(p=5562;p<=5583;p++)_[p]=0;for(p=5623;p<=5625;p++)_[p]=2;for(p=5631;p<=5639;p++)_[p]=0;for(p=5649;p<=5653;p++)_[p]=0;for(p=5663;p<=5680;p++)_[p]=0;for(p=5682;p<=5685;p++)_[p]=0;for(p=5875;p<=5877;p++)_[p]=0;for(p=5896;p<=5899;p++)_[p]=0;for(p=5921;p<=5940;p++)_[p]=0;for(p=6050;p<=6125;p++)_[p]=0;for(p=6244;p<=6275;p++)_[p]=0;for(p=6328;p<=6348;p++)_[p]=0;for(p=6350;p<=6356;p++)_[p]=0;for(p=6366;p<=6372;p++)_[p]=0;for(p=6381;p<=6387;p++)_[p]=0;for(p=6393;p<=6404;p++)_[p]=0;for(p=6480;p<=6483;p++)_[p]=0;for(p=6511;p<=6514;p++)_[p]=0;for(p=6579;p<=6581;p++)_[p]=0;for(p=6619;p<=6624;p++)_[p]=0;for(p=6625;p<=6627;p++)_[p]=2;for(p=6628;p<=6632;p++)_[p]=0;for(p=6634;p<=6637;p++)_[p]=0;for(p=6669;p<=6692;p++)_[p]=0;for(p=6707;p<=6709;p++)_[p]=0;for(p=6720;p<=6723;p++)_[p]=0;for(p=6732;p<=6738;p++)_[p]=0;for(p=6931;p<=6933;p++)_[p]=0;for(p=6956;p<=6959;p++)_[p]=0;for(p=7005;p<=7007;p++)_[p]=0;for(p=7057;p<=7070;p++)_[p]=2;for(p=7074;p<=7082;p++)_[p]=0;for(p=7109;p<=7118;p++)_[p]=0;for(p=7119;p<=7127;p++)_[p]=1;for(p=7374;p<=7376;p++)_[p]=0;for(p=7528;p<=7586;p++)_[p]=0;for(p=7587;p<=7645;p++)_[p]=2;for(p=7692;p<=7696;p++)_[p]=0;for(p=7755;p<=7787;p++)_[p]=0;for(p=7791;p<=7795;p++)_[p]=0;for(p=7799;p<=7801;p++)_[p]=0;for(p=7803;p<=7805;p++)_[p]=0;for(p=7825;p<=7831;p++)_[p]=0;for(p=7845;p<=7859;p++)_[p]=0;for(p=8013;p<=8032;p++)_[p]=0;for(p=8065;p<=8068;p++)_[p]=1;for(p=8518;p<=8529;p++)_[p]=2;for(p=8533;p<=8536;p++)_[p]=2;for(p=8538;p<=8540;p++)_[p]=2;for(p=8677;p<=8679;p++)_[p]=0;for(p=8836;p<=8840;p++)_[p]=0;for(p=8857;p<=8859;p++)_[p]=0;for(p=8908;p<=8910;p++)_[p]=0;for(p=9154;p<=9159;p++)_[p]=0;for(p=9205;p<=9218;p++)_[p]=0;for(p=9271;p<=9273;p++)_[p]=0;for(p=9295;p<=9297;p++)_[p]=0;for(p=9356;p<=9360;p++)_[p]=0;for(p=9404;p<=9407;p++)_[p]=0;for(p=9476;p<=9482;p++)_[p]=0;for(p=9487;p<=9494;p++)_[p]=0;for(p=9697;p<=9699;p++)_[p]=0;for(p=20002;p<=20032;p++)_[p]=0;for(p=20062;p<=20092;p++)_[p]=0;for(p=20135;p<=20138;p++)_[p]=0;for(p=20248;p<=20258;p++)_[p]=0;for(p=20348;p<=20358;p++)_[p]=0;for(p=20436;p<=20440;p++)_[p]=0;for(p=20822;p<=20824;p++)_[p]=0;for(p=20904;p<=20932;p++)_[p]=0;for(p=20934;p<=20936;p++)_[p]=0;for(p=21004;p<=21032;p++)_[p]=0;for(p=21035;p<=21037;p++)_[p]=0;for(p=21095;p<=21097;p++)_[p]=0;for(p=21148;p<=21150;p++)_[p]=0;for(p=21207;p<=21264;p++)_[p]=0;for(p=21307;p<=21364;p++)_[p]=0;for(p=21413;p<=21423;p++)_[p]=0;for(p=21453;p<=21463;p++)_[p]=0;for(p=21473;p<=21483;p++)_[p]=0;for(p=21780;p<=21782;p++)_[p]=0;for(p=21891;p<=21894;p++)_[p]=0;for(p=21896;p<=21899;p++)_[p]=0;for(p=22171;p<=22177;p++)_[p]=0;for(p=22181;p<=22187;p++)_[p]=0;for(p=22191;p<=22197;p++)_[p]=0;for(p=22234;p<=22236;p++)_[p]=0;for(p=22521;p<=22525;p++)_[p]=0;for(p=22991;p<=22994;p++)_[p]=0;for(p=23028;p<=23038;p++)_[p]=0;for(p=23830;p<=23853;p++)_[p]=0;for(p=23866;p<=23872;p++)_[p]=0;for(p=23877;p<=23884;p++)_[p]=0;for(p=23886;p<=23894;p++)_[p]=0;for(p=23946;p<=23948;p++)_[p]=0;for(p=24311;p<=24313;p++)_[p]=0;for(p=24342;p<=24347;p++)_[p]=0;for(p=24370;p<=24374;p++)_[p]=10;for(p=24375;p<=24381;p++)_[p]=0;for(p=24718;p<=24721;p++)_[p]=0;for(p=24817;p<=24821;p++)_[p]=0;for(p=24877;p<=24882;p++)_[p]=0;for(p=24891;p<=24893;p++)_[p]=0;for(p=25391;p<=25395;p++)_[p]=0;for(p=25828;p<=25838;p++)_[p]=0;for(p=26191;p<=26195;p++)_[p]=0;for(p=26391;p<=26393;p++)_[p]=0;for(p=26701;p<=26722;p++)_[p]=0;for(p=26729;p<=26799;p++)_[p]=2;for(p=26801;p<=26803;p++)_[p]=2;for(p=26811;p<=26813;p++)_[p]=2;for(p=26847;p<=26870;p++)_[p]=2;for(p=26891;p<=26899;p++)_[p]=0;for(p=26901;p<=26923;p++)_[p]=0;for(p=26929;p<=26946;p++)_[p]=0;for(p=26948;p<=26998;p++)_[p]=0;for(p=27037;p<=27040;p++)_[p]=0;for(p=27205;p<=27232;p++)_[p]=0;for(p=27258;p<=27260;p++)_[p]=0;for(p=27391;p<=27398;p++)_[p]=0;for(p=27561;p<=27564;p++)_[p]=0;for(p=27571;p<=27574;p++)_[p]=0;for(p=27581;p<=27584;p++)_[p]=0;for(p=27591;p<=27594;p++)_[p]=0;for(p=28191;p<=28193;p++)_[p]=0;for(p=28348;p<=28358;p++)_[p]=0;for(p=28402;p<=28432;p++)_[p]=0;for(p=28462;p<=28492;p++)_[p]=0;for(p=29118;p<=29122;p++)_[p]=0;for(p=29168;p<=29172;p++)_[p]=0;for(p=29177;p<=29185;p++)_[p]=0;for(p=29187;p<=29195;p++)_[p]=0;for(p=29900;p<=29903;p++)_[p]=0;for(p=30161;p<=30179;p++)_[p]=0;for(p=30491;p<=30494;p++)_[p]=0;for(p=30729;p<=30732;p++)_[p]=0;for(p=31251;p<=31259;p++)_[p]=0;for(p=31265;p<=31268;p++)_[p]=0;for(p=31275;p<=31279;p++)_[p]=0;for(p=31281;p<=31297;p++)_[p]=0;for(p=31461;p<=31469;p++)_[p]=0;for(p=31491;p<=31495;p++)_[p]=0;for(p=31917;p<=31922;p++)_[p]=0;for(p=31965;p<=32e3;p++)_[p]=0;for(p=32001;p<=32003;p++)_[p]=2;for(p=32005;p<=32031;p++)_[p]=2;for(p=32033;p<=32060;p++)_[p]=2;for(p=32064;p<=32067;p++)_[p]=2;for(p=32074;p<=32077;p++)_[p]=2;for(p=32081;p<=32086;p++)_[p]=0;for(p=32107;p<=32130;p++)_[p]=0;for(p=32133;p<=32158;p++)_[p]=0;for(p=32164;p<=32167;p++)_[p]=2;for(p=32180;p<=32199;p++)_[p]=0;for(p=32201;p<=32260;p++)_[p]=0;for(p=32301;p<=32360;p++)_[p]=0;for(p=32601;p<=32662;p++)_[p]=0;for(p=32664;p<=32667;p++)_[p]=2;for(p=32701;p<=32761;p++)_[p]=0;for(p=53001;p<=53004;p++)_[p]=0;for(p=53008;p<=53019;p++)_[p]=0;for(p=53021;p<=53032;p++)_[p]=0;for(p=53034;p<=53037;p++)_[p]=0;for(p=53042;p<=53046;p++)_[p]=0;for(p=53074;p<=53080;p++)_[p]=0;for(p=54001;p<=54004;p++)_[p]=0;for(p=54008;p<=54019;p++)_[p]=0;for(p=54021;p<=54032;p++)_[p]=0;for(p=54034;p<=54037;p++)_[p]=0;for(p=54042;p<=54046;p++)_[p]=0;for(p=54048;p<=54053;p++)_[p]=0;for(p=54074;p<=54080;p++)_[p]=0;for(p=54098;p<=54101;p++)_[p]=0;for(p=102001;p<=102040;p++)_[p]=0;for(p=102042;p<=102063;p++)_[p]=0;for(p=102065;p<=102067;p++)_[p]=0;for(p=102070;p<=102117;p++)_[p]=0;for(p=102122;p<=102216;p++)_[p]=0;for(p=102221;p<=102377;p++)_[p]=0;for(p=102382;p<=102388;p++)_[p]=0;for(p=102389;p<=102398;p++)_[p]=2;for(p=102399;p<=102444;p++)_[p]=0;for(p=102445;p<=102447;p++)_[p]=2;for(p=102448;p<=102458;p++)_[p]=0;for(p=102459;p<=102468;p++)_[p]=2;for(p=102469;p<=102499;p++)_[p]=0;for(p=102500;p<=102519;p++)_[p]=1;for(p=102520;p<=102524;p++)_[p]=0;for(p=102525;p<=102529;p++)_[p]=2;for(p=102530;p<=102588;p++)_[p]=0;for(p=102590;p<=102598;p++)_[p]=0;for(p=102601;p<=102603;p++)_[p]=0;for(p=102605;p<=102628;p++)_[p]=0;for(p=102629;p<=102646;p++)_[p]=2;for(p=102648;p<=102700;p++)_[p]=2;for(p=102701;p<=102703;p++)_[p]=0;for(p=102707;p<=102730;p++)_[p]=2;for(p=102733;p<=102758;p++)_[p]=2;for(p=102767;p<=102900;p++)_[p]=0;for(p=102901;p<=102933;p++)_[p]=2;for(p=102934;p<=102950;p++)_[p]=13;for(p=102951;p<=102955;p++)_[p]=0;for(p=102961;p<=102963;p++)_[p]=0;for(p=102965;p<=102969;p++)_[p]=0;for(p=102971;p<=102973;p++)_[p]=0;for(p=102975;p<=102989;p++)_[p]=0;for(p=102990;p<=102992;p++)_[p]=1;for(p=102997;p<=103002;p++)_[p]=0;for(p=103003;p<=103008;p++)_[p]=2;for(p=103009;p<=103011;p++)_[p]=0;for(p=103012;p<=103014;p++)_[p]=2;for(p=103019;p<=103021;p++)_[p]=0;for(p=103022;p<=103024;p++)_[p]=2;for(p=103029;p<=103031;p++)_[p]=0;for(p=103032;p<=103034;p++)_[p]=2;for(p=103065;p<=103068;p++)_[p]=0;for(p=103074;p<=103076;p++)_[p]=0;for(p=103077;p<=103079;p++)_[p]=1;for(p=103080;p<=103082;p++)_[p]=0;for(p=103083;p<=103085;p++)_[p]=2;for(p=103090;p<=103093;p++)_[p]=0;for(p=103097;p<=103099;p++)_[p]=0;for(p=103100;p<=103102;p++)_[p]=2;for(p=103107;p<=103109;p++)_[p]=0;for(p=103110;p<=103112;p++)_[p]=2;for(p=103113;p<=103116;p++)_[p]=0;for(p=103117;p<=103120;p++)_[p]=2;for(p=103153;p<=103157;p++)_[p]=0;for(p=103158;p<=103162;p++)_[p]=2;for(p=103163;p<=103165;p++)_[p]=0;for(p=103166;p<=103168;p++)_[p]=1;for(p=103169;p<=103171;p++)_[p]=2;for(p=103186;p<=103188;p++)_[p]=0;for(p=103189;p<=103191;p++)_[p]=2;for(p=103192;p<=103195;p++)_[p]=0;for(p=103196;p<=103199;p++)_[p]=2;for(p=103200;p<=103224;p++)_[p]=0;for(p=103225;p<=103227;p++)_[p]=1;for(p=103232;p<=103237;p++)_[p]=0;for(p=103238;p<=103243;p++)_[p]=2;for(p=103244;p<=103246;p++)_[p]=0;for(p=103247;p<=103249;p++)_[p]=2;for(p=103254;p<=103256;p++)_[p]=0;for(p=103257;p<=103259;p++)_[p]=2;for(p=103264;p<=103266;p++)_[p]=0;for(p=103267;p<=103269;p++)_[p]=2;for(p=103300;p<=103375;p++)_[p]=0;for(p=103381;p<=103383;p++)_[p]=0;for(p=103384;p<=103386;p++)_[p]=1;for(p=103387;p<=103389;p++)_[p]=0;for(p=103390;p<=103392;p++)_[p]=2;for(p=103397;p<=103399;p++)_[p]=0;for(p=103400;p<=103471;p++)_[p]=2;for(p=103476;p<=103478;p++)_[p]=0;for(p=103479;p<=103481;p++)_[p]=2;for(p=103486;p<=103488;p++)_[p]=0;for(p=103489;p<=103491;p++)_[p]=2;for(p=103492;p<=103495;p++)_[p]=0;for(p=103496;p<=103499;p++)_[p]=2;for(p=103528;p<=103543;p++)_[p]=0;for(p=103544;p<=103548;p++)_[p]=2;for(p=103549;p<=103551;p++)_[p]=0;for(p=103552;p<=103554;p++)_[p]=1;for(p=103555;p<=103557;p++)_[p]=2;for(p=103558;p<=103560;p++)_[p]=0;for(p=103571;p<=103573;p++)_[p]=0;for(p=103574;p<=103576;p++)_[p]=2;for(p=103577;p<=103580;p++)_[p]=0;for(p=103581;p<=103583;p++)_[p]=2;for(p=103595;p<=103694;p++)_[p]=0;for(p=103696;p<=103699;p++)_[p]=0;for(p=103700;p<=103793;p++)_[p]=2;for(p=103794;p<=103887;p++)_[p]=0;for(p=103900;p<=103971;p++)_[p]=2;const Wq={102113:!0,102100:!0,3857:!0,3785:!0},Yq={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},PI='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',C0=[-20037508342788905e-9,20037508342788905e-9],I0=[-20037508342787e-6,20037508342787e-6],L6={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:C0,origin:I0,dx:1e-5},102100:{wkTemplate:PI,valid:C0,origin:I0,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:C0,origin:I0,dx:1e-5},3857:{wkTemplate:PI,valid:C0,origin:I0,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function hr(e,t){return!O(e)&&!O(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||Hc(e)&&Hc(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function Es(e){return ji(e)&&e.wkid&&L6[e.wkid]||null}function O6(e){return!!ji(e)&&(e.wkid?_[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function Kq(e){return!(Wb(e)||Yb(e))}function im(e){return ji(e)&&e.wkid===4326}function OSe(e){return ji(e)&&e.wkid===zc.CGCS2000}function Hc(e){return ji(e)&&e.wkid!=null&&Wq[e.wkid]===!0}function Zq(e){return ji(e)&&e.wkid===32662}function ZA(e){return e===zc.GCSMARS2000||e===zc.GCSMARS2000_SPHERE}function Wb(e){return ji(e)&&e.wkid!=null&&ZA(e.wkid)}function JA(e){return e===zc.GCSMOON2000}function Yb(e){return ji(e)&&e.wkid!=null&&JA(e.wkid)}function Jq(e){return ji(e)&&e.wkid!=null&&Yq[e.wkid]===!0}function ji(e){return E(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const Xq={wkid:4326,wkt:yo(L6[4326].wkTemplate,{Central_Meridian:"0.0"})},Qq={wkid:102100,latestWkid:3857},eW={wkid:32662};var Os;let Qe=Os=class extends j{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Os.WebMercator;if(e.wkid===4326)return Os.WGS84}const t=new Os;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return im(this)}get isWebMercator(){return Hc(this)}get isGeographic(){return O6(this)}get isWrappable(){return Jq(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Os.WGS84)return Os.WGS84;if(this===Os.WebMercator)return Os.WebMercator;const e=new Os;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=$(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||r?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===t&&n.referenceServiceName===i:n.id===t}return hr(this,e)}toJSON(e){return this.write(void 0,e)}};Qe.GCS_NAD_1927=null,Qe.WGS84=null,Qe.WebMercator=null,Qe.PlateCarree=null,l([d({readOnly:!0})],Qe.prototype,"isWGS84",null),l([d({readOnly:!0})],Qe.prototype,"isWebMercator",null),l([d({readOnly:!0})],Qe.prototype,"isGeographic",null),l([d({readOnly:!0})],Qe.prototype,"isWrappable",null),l([d({type:st,json:{write:!0}})],Qe.prototype,"latestWkid",void 0),l([d({type:st,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Qe.prototype,"wkid",void 0),l([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Qe.prototype,"wkt",void 0),l([te("wkt"),te("web-scene","wkt")],Qe.prototype,"writeWkt",null),l([d({type:st,json:{write:!0}})],Qe.prototype,"vcsWkid",void 0),l([d({type:st,json:{write:!0}})],Qe.prototype,"latestVcsWkid",void 0),l([d()],Qe.prototype,"imageCoordinateSystem",void 0),Qe=Os=l([S("esri.geometry.SpatialReference")],Qe),Qe.prototype.toJSON.isDefaultToJSON=!0,Qe.GCS_NAD_1927=new Qe({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Qe.WGS84=new Qe(Xq),Qe.WebMercator=new Qe(Qq),Qe.PlateCarree=new Qe(eW),Object.freeze&&(Object.freeze(Qe.GCS_NAD_1927),Object.freeze(Qe.WGS84),Object.freeze(Qe.WebMercator));const we=Qe,k6="20220708",F6="7fd01dbc0e83d753fcf101c8ff2a8d215430252d",B6="4.24",tW={async request(e,t){var a;const{default:i}=await V(()=>Promise.resolve().then(()=>vW),void 0,import.meta.url),r=e.options,n=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=n==="native"||n==="native-request-init"?"native-request-init":["blob","json","text"].includes(n)&&((a=I6(e.url))==null?void 0:a.after)?n:"array-buffer";const s=await i(e.url,r),o={data:s.data,ssl:s.ssl};switch(s.requestOptions.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let xt;function kSe(e){xt=e}function FSe(e){const t=xt&&xt.findCredential(e);return t&&t.token?D6(e,"token",t.token):e}F("host-webworker")||(F("edge")||F("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const iW=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function U6(e){const t=Nn(e,!0);return t&&t.endsWith(".arcgis.com")&&!iW.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function rW(e,t,i=!1,r){return new Promise((n,s)=>{if(Pn(r))return void s($I());let o=()=>{c(),s(new Error(`Unable to load ${t}`))},a=()=>{const h=e;c(),n(h)},u=()=>{if(!e)return;const h=e;c(),h.src="",s($I())};const c=()=>{F("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,E(r)&&r.removeEventListener("abort",u),u=null,i&&URL.revokeObjectURL(t)};E(r)&&r.addEventListener("abort",u),F("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function $I(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function nW(e){De.request.crossOriginNoCorsDomains||(De.request.crossOriginNoCorsDomains={});const t=De.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[Nn(i)]=0:(t[Nn("http://"+i)]=0,t[Nn("https://"+i)]=0)}function sW(e){const t=De.request.crossOriginNoCorsDomains;if(t){let i=Nn(e);if(i)return i=i.toLowerCase(),!tm(i,HA())&&t[i]<Date.now()-36e5}return!1}async function oW(e){var r;const t=De.request.crossOriginNoCorsDomains;t&&(t[Nn(e).toLowerCase()]=Date.now());const i=ut(e);e=i.path,((r=i.query)==null?void 0:r.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function ze(e,t){var c;const i=od(e),r=Gb(e);r||i||(e=Jr(e));const n={url:e,requestOptions:{...t}};let s=I6(e);if(s){const h=await fW(s,n);if(h!=null)return{data:h,getHeader:XA,requestOptions:n.requestOptions,url:n.url};s.after||s.error||(s=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"){if(F("host-webworker")||F("host-node"))throw _s("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(i)throw _s("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),n);if(t.method==="head"){if(t.body)throw _s("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw _s("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await dW(),wv)return wv.execute(e,t);const o=new AbortController;$n(t,()=>o.abort());const a={controller:o,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:s,params:n,redoRequest:!1,useIdentity:ps.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},u=await mW(a);return(c=s==null?void 0:s.after)==null||c.call(s,u),u}let wv;const ps=De.request,V6="FormData"in globalThis,aW=[499,498,403,401],lW=["COM_0056","COM_0057","SB_0008"],uW=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],XA=()=>null,hS=Symbol();function cW(e){const t=Nn(e);t&&!ze._corsServers.includes(t)&&ze._corsServers.push(t)}function DI(e){const t=Nn(e);return!t||t.endsWith(".arcgis.com")||ze._corsServers.includes(t)||qA(t)}function _s(e,t,i,r){let n="Error";const s={url:i.url,requestOptions:i.requestOptions,getHeader:XA,ssl:!1};if(t instanceof P)return t.details?(t.details=$(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=s,t;if(t){const o=r&&(c=>r.headers.get(c)),a=r&&r.status,u=t.message;u&&(n=u),o&&(s.getHeader=o),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=hS in t?t[hS]:t}return lr(t)?Mt():new P(e,n,s)}async function dW(){F("host-webworker")?wv||(wv=await V(()=>import("./request.7b954705.js"),[],import.meta.url)):ze._abortableFetch||(ze._abortableFetch=globalThis.fetch.bind(globalThis))}async function pS(){xt||await V(()=>import("./IdentityManager.3dfb2707.js"),[],import.meta.url)}async function hW(e){var a;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,n=i.body;let s=null,o=null;if(V6&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:i.cacheBust&&!ze._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:ps.priority,redirect:"follow",signal:r},(s||o)&&(e.fetchOptions.body=s||o),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((a=i.query)==null?void 0:a.token)||(s==null?void 0:s.get("token"))),!e.hasToken&&De.apiKey&&U6(t)&&(i.query||(i.query={}),i.query.token=De.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!j6(t)&&!Pn(r)){let u;i.authMode==="immediate"?(await pS(),u=await xt.getCredential(t,{signal:r}),e.credential=u):i.authMode==="no-prompt"?(await pS(),u=await xt.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=u):xt&&(u=xt.findCredential(t)),u&&(e.credentialToken=u.token,e.useSSL=!!u.ssl)}}function j6(e){return uW.some(t=>t.test(e))}async function pW(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions,n=Gb(t)||od(t),s=i.responseType||"json",o=n?0:i.timeout!=null?i.timeout:ps.timeout;let a=!1;if(!n){e.useSSL&&(t=KA(t)),i.cacheBust&&r.cache==="default"&&(t=D6(t,"request.preventCache",Date.now()));let y={...i.query};e.credentialToken&&(y.token=e.credentialToken);let m=jc(y);F("esri-url-encodes-apostrophe")&&(m=m.replace(/'/g,"%27"));const g=t.length+1+m.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||g>ps.maxUrlLength;const b=i.useProxy||!!Hb(t);if(b){const w=Nq(t);v=w.path,!a&&v.length+1+g>ps.maxUrlLength&&(a=!0),w.query&&(y={...w.query,...y})}if(r.method==="HEAD"&&(a||b)){if(a)throw g>ps.maxUrlLength?_s("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):_s("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(b)throw _s("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=ya(t,y):(r.body=jc(y),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=ya(t,y),b&&(e.useProxy=!0,t=`${v}?${t}`),y.token&&V6&&r.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)&&r.body.set("token",y.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!tm(t,HA())){if(qA(t))e.withCredentials=!0;else if(xt){const w=xt.findServerInfo(t);w&&w.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",sW(t)&&await oW(a?ya(t,y):t))}let u,c,h=0,f=!1;o>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(i.responseType==="native-request-init")c=r,c.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||yW(i.headers)||!n&&!e.useProxy&&ps.proxyUrl&&!DI(t)){if(u=await ze._abortableFetch(t,r),e.useProxy||cW(t),i.responseType==="native")c=u;else if(r.method!=="HEAD")if(u.ok){switch(s){case"array-buffer":c=await u.arrayBuffer();break;case"blob":case"image":c=await u.blob();break;default:c=await u.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(c)switch(s){case"json":c=JSON.parse(c);break;case"xml":c=LI(c,"application/xml");break;case"document":c=LI(c,"text/html")}else c=null;if(c){if(s==="array-buffer"||s==="blob"){const y=u.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(y)&&c[s==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(c).json();m.error&&(c=m)}catch{}}s==="image"&&c instanceof Blob&&(c=await OI(URL.createObjectURL(c),e,!0))}}else c=await u.text()}else c=await OI(t,e)}catch(y){if(y.name==="AbortError")throw f?new Error("Timeout exceeded"):Mt("Request canceled");if(!(!u&&y instanceof TypeError&&ps.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||DI(t))throw y;e.redoRequest=!0,Rq({proxyUrl:ps.proxyUrl,urlPrefix:Nn(t)})}finally{h&&clearTimeout(h)}return[u,c]}async function fW(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(n){i=_s("request:interceptor",n,t)}if((r instanceof Error||r instanceof P)&&(i=_s("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function yW(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function LI(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function mW(e){var s;let t,i;await hW(e);try{do[t,i]=await pW(e);while(!await gW(e,t,i))}catch(o){const a=_s("request:server",o,e.params,t);throw a.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(a),a}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((s=i.user)==null?void 0:s.username)&&!qA(r)){const o=Nn(r,!0);o&&ps.trustedServers.push(o)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&nW(i.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&xt){const o=xt.findServerInfo(n.server);let a=o&&o.owningSystemUrl;if(a){a=a.replace(/\/?$/,"/sharing");const u=xt.findCredential(a,n.userId);u&&xt._getIdenticalSvcIdx(a,u)===-1&&u.resources.unshift(a)}}return{data:i,getHeader:t?o=>t.headers.get(o):XA,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function gW(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s,o,a;if(!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[hS]=i,n;i!=null&&i.error&&(n=i.error),n&&(s=Number(n.code),o=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a&&a.toUpperCase());const u=r.authMode;if(s===403&&(o===4||n.message&&n.message.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(u!=="no-prompt"||s===498)&&aW.includes(s)&&!j6(e.params.url)&&(s!==403||!lW.includes(a)&&(o==null||o===2&&e.credentialToken))){await pS();try{const c=await xt.getCredential(e.params.url,{error:_s("request:server",n,e.params),prompt:u!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=c,e.credentialToken=c.token,e.useSSL=e.useSSL||c.ssl,!1}catch(c){if(u==="no-prompt")return e.credential=null,e.credentialToken=null,!1;n=c}}if(n)throw n;return!0}function OI(e,t,i=!1){const r=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=ps.priority,n.src=e,rW(n,e,i,r)}ze._abortableFetch=null,ze._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const vW=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));function Z(e,t,i){let r,n;return t===void 0||Array.isArray(t)?(n=e,i=t,r=[void 0]):(n=t,r=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;r.forEach(u=>{const c=r6(s,u,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],i&&(c.read.source=(c.read.source||[]).concat(i))})}}let ks=class extends j{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=we.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof we)return e;if(e!=null){const i=new we;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};l([d()],ks.prototype,"type",void 0),l([d({readOnly:!0})],ks.prototype,"cache",null),l([d({readOnly:!0})],ks.prototype,"extent",null),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ks.prototype,"hasM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ks.prototype,"hasZ",void 0),l([d({type:we,json:{write:!0}})],ks.prototype,"spatialReference",void 0),l([Z("spatialReference")],ks.prototype,"readSpatialReference",null),ks=l([S("esri.geometry.Geometry")],ks);const Ir=ks,bW=Object.prototype.toString;function wW(e){const t="__accessorMetadata__"in e?it(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return _W.apply(this,i)}}function _W(e,t,i,r){$b(e,t).cast=r}function SW(e){return(t,i)=>{$b(t,e).cast=t[i]}}function je(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&bW.call(e[0])==="[object Function]"?wW(e[0]):e.length===1&&typeof e[0]=="string"?SW(e[0]):void 0}function TW(e,t,i,r){var n;return e.x=e.x+t,e.y=e.y+i,r!=null&&(e.z=((n=e.z)!=null?n:0)+r),e}function EW(e,t){const i=e.x-t.x,r=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+n*n)}class QA{constructor(t,i,r,n){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const ct=new QA(6378137,1/298.257223563,3e5,.006694379990137799),ma=new QA(3396190,1/169.8944472236118,23e4),tu=new QA(1737400,0,0),xW=57.29577951308232,AW=.017453292519943;function kI(e){return e*xW}function FI(e){return e*AW}function BSe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/ct.radius))}function fS(e){return e.wkid!=null||e.wkt!=null}const n2=[0,0];function _v(e,t,i,r,n){const s=e,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,n2,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,n2,r),[o.xmax,o.ymax]=t(s.xmax,s.ymax,n2,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,u=[];let c;for(let h=0;h<a.length;h++){const f=a[h];c=[],u.push(c);for(let y=0;y<f.length;y++)c.push(t(f[y][0],f[y][1],[0,0],r)),f[y].length>2&&c[y].push(f[y][2]),f[y].length>3&&c[y].push(f[y][3])}"paths"in o?o.paths=u:o.rings=u}else if("points"in s&&"points"in o){const a=s.points,u=[];for(let c=0;c<a.length;c++)u[c]=t(a[c][0],a[c][1],[0,0],r),a[c].length>2&&u[c].push(a[c][2]),a[c].length>3&&u[c].push(a[c][3]);o.points=u}return n}function Vg(e,t){const i=e&&(fS(e)?e:e.spatialReference),r=t&&(fS(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!hr(r,i)||Hc(r)&&im(i)||Hc(i)&&im(r))}function Kb(e,t){if(O(e))return null;const i=e.spatialReference,r=t&&(fS(t)?t:t.spatialReference);return Vg(i,r)?hr(i,r)?$(e):Hc(r)?_v(e,dh,we.WebMercator,!1,$(e)):im(r)?_v(e,xy,we.WGS84,!1,$(e)):null:null}function dh(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=FI(t);return i[0]=FI(e)*ct.radius,i[1]=ct.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function xy(e,t,i=[0,0],r=!1){const n=kI(e/ct.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=kI(Math.PI/2-2*Math.atan(Math.exp(-t/ct.radius))),i}function ga(e,t=!1,i=$(e)){return _v(e,dh,we.WebMercator,t,i)}function xf(e,t=!1,i=$(e)){return _v(e,xy,we.WGS84,t,i)}var jg;const Yp=[0,0];function BI(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const N0=W.getLogger("esri.geometry.Point");let Gi=jg=class extends Ir{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,r,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],i=s[2],r=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new we(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)N0.warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)N0.warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n&&n.isWebMercator){const a=dh(s.longitude,s.latitude,Yp);e=a[0],t=a[1]}}}else BI(i)?(n=i,i=null):BI(r)&&(n=r,r=null);const o={x:e,y:t};return o.x==null&&o.y!=null?N0.warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&N0.warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return xy(t,i,Yp)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;t&&(t.isWebMercator?this._set("y",dh(i,e,Yp)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return xy(e,t,Yp)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;i&&(i.isWebMercator?this._set("x",dh(e,t,Yp)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new jg;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return jg.copy(e,this),this}equals(e){if(O(e))return!1;const{x:t,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:u,y:c,spatialReference:h}=e;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[u,c]=dh(u,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[u,c]=xy(u,c),h=s}return t===u&&i===c&&r===o&&n===a&&s.wkid===h.wkid}offset(e,t,i){return TW(this,e,t,i)}normalize(){if(!this.spatialReference)return this;const e=Es(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,n=2*r;let s;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n),this._set("x",t),this}distance(e){return EW(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};l([d({readOnly:!0})],Gi.prototype,"cache",null),l([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Gi.prototype,"hasM",null),l([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Gi.prototype,"hasZ",null),l([d({type:Number})],Gi.prototype,"latitude",null),l([d({type:Number})],Gi.prototype,"longitude",null),l([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),je(e=>isNaN(e)?e:xn(e))],Gi.prototype,"x",void 0),l([te("x")],Gi.prototype,"writeX",null),l([Z("x")],Gi.prototype,"readX",null),l([d({type:Number,json:{write:!0}})],Gi.prototype,"y",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Gi.prototype,"z",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Gi.prototype,"m",void 0),Gi=jg=l([S("esri.geometry.Point")],Gi),Gi.prototype.toJSON.isDefaultToJSON=!0;const he=Gi,s2=[0,0];function Zb(e,t){return!!E(t)&&Zi(e,t.x,t.y,t.z)}function USe(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!qh(e,i))return!1;return!0}function MW(e,t){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Zi(e,i,r,n)&&Zi(e,i,o,n)&&Zi(e,s,o,n)&&Zi(e,s,r,n)&&Zi(e,i,r,a)&&Zi(e,i,o,a)&&Zi(e,s,o,a)&&Zi(e,s,r,a):Zi(e,i,r)&&Zi(e,i,o)&&Zi(e,s,o)&&Zi(e,s,r)}function qh(e,t){return Zi(e,t[0],t[1])}function CW(e,t){return Zi(e,t[0],t[1],t[2])}function Zi(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function z6(e,t){return s2[1]=t.y,s2[0]=t.x,IW(e,s2)}function IW(e,t){return H6(e.rings,t)}function H6(e,t){if(!e)return!1;if(NW(e))return UI(!1,e,t);let i=!1;for(let r=0,n=e.length;r<n;r++)i=UI(i,e[r],t);return i}function NW(e){return!Array.isArray(e[0][0])}function UI(e,t,i){const[r,n]=i;let s=e,o=0;for(let a=0,u=t.length;a<u;a++){o++,o===u&&(o=0);const[c,h]=t[a],[f,y]=t[o];(h<n&&y>=n||y<n&&h>=n)&&c+(n-h)/(y-h)*(f-c)<r&&(s=!s)}return s}function RW(e,t){return Zb(e,t)}function PW(e,t){const i=e.hasZ&&t.hasZ;let r,n,s;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function $W(e,t){const{points:i,hasZ:r}=t,n=r?CW:qh;for(const s of i)if(n(e,s))return!0;return!1}const Gc=[0,0],qc=[0,0],Wc=[0,0],Yc=[0,0],DW=[Gc,qc,Wc,Yc],G6=[[Wc,Gc],[Gc,qc],[qc,Yc],[Yc,Wc]];function LW(e,t){return OW(e,t.rings)}function OW(e,t){Gc[0]=e.xmin,Gc[1]=e.ymax,qc[0]=e.xmax,qc[1]=e.ymax,Wc[0]=e.xmin,Wc[1]=e.ymin,Yc[0]=e.xmax,Yc[1]=e.ymin;for(const i of DW)if(H6(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(qh(e,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(qh(e,s)||q6(r,s,G6))return!0;r=s}}return!1}function kW(e,t){Gc[0]=e.xmin,Gc[1]=e.ymax,qc[0]=e.xmax,qc[1]=e.ymax,Wc[0]=e.xmin,Wc[1]=e.ymin,Yc[0]=e.xmax,Yc[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(qh(e,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(qh(e,o)||q6(n,o,G6))return!0;n=o}}return!1}const oi=[0,0];function FW(e){for(let t=0;t<e.length;t++){const i=e[t];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=t+1;a<e.length;a++)for(let u=0;u<e[a].length-1;u++){const c=e[a][u],h=e[a][u+1];if(yS(s,o,c,h,oi)&&!(oi[0]===s[0]&&oi[1]===s[1]||oi[0]===c[0]&&oi[1]===c[1]||oi[0]===o[0]&&oi[1]===o[1]||oi[0]===h[0]&&oi[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],a=i[n+1];for(let u=n+2;u<s;u++){const c=i[u],h=i[u+1];if(yS(o,a,c,h,oi)&&!(oi[0]===o[0]&&oi[1]===o[1]||oi[0]===c[0]&&oi[1]===c[1]||oi[0]===a[0]&&oi[1]===a[1]||oi[0]===h[0]&&oi[1]===h[1]))return!0}}}return!1}function q6(e,t,i){for(let r=0;r<i.length;r++)if(yS(e,t,i[r][0],i[r][1]))return!0;return!1}function yS(e,t,i,r,n){const[s,o]=e,[a,u]=t,[c,h]=i,[f,y]=r,m=f-c,g=s-c,v=a-s,b=y-h,w=o-h,T=u-o,A=b*v-m*T;if(A===0)return!1;const R=(m*w-b*g)/A,M=(v*w-T*g)/A;return R>=0&&R<=1&&M>=0&&M<=1&&(n&&(n[0]=s+R*(a-s),n[1]=o+R*(u-o)),!0)}function BW(e){switch(e){case"esriGeometryEnvelope":case"extent":return PW;case"esriGeometryMultipoint":case"multipoint":return $W;case"esriGeometryPoint":case"point":return RW;case"esriGeometryPolygon":case"polygon":return LW;case"esriGeometryPolyline":case"polyline":return kW}}var hn;function UW(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Oa(e,t,i){return t==null?i:i==null?t:e(t,i)}let Zt=hn=class extends Ir{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,n){return UW(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?we.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:n==null?we.WGS84:n}}static fromBounds(e,t){return new hn({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new hn({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new he({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new hn;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Vg(t,i)&&(e=t.isWebMercator?ga(e):xf(e,!0)),e.type==="point"?Zb(this,e):e.type==="extent"&&MW(this,e)}equals(e){if(this===e)return!0;if(O(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Vg(t,i)&&(e=t.isWebMercator?ga(e):xf(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(O(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Vg(t,i)&&(e=t.isWebMercator?ga(e):xf(e,!0)),BW(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Oa(Math.min,this.zmin,e.zmin),this.zmax=Oa(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Oa(Math.min,this.mmin,e.mmin),this.mmax=Oa(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:O(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Oa(Math.max,this.zmin,e.zmin),this.zmax=Oa(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Oa(Math.max,this.mmin,e.mmin),this.mmax=Oa(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=Es(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?xf(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new we(yo(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;if(!(i=i||Es(r)))return this;const n=this._getParts(i).map(a=>a.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return n;let s=!0,o=!0;return n.forEach(a=>{a.hasZ||(s=!1),a.hasM||(o=!1)}),{rings:n.map(a=>{const u=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(s){const c=(a.zmax-a.zmin)/2;for(let h=0;h<u.length;h++)u[h].push(c)}if(o){const c=(a.mmax-a.mmin)/2;for(let h=0;h<u.length;h++)u[h].push(c)}return u}),hasZ:s,hasM:o,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,u=this.xmin,c=this.xmax;let h;e=e||Es(o);const[f,y]=e.valid;h=this._normalizeX(this.xmin,e);const m=h.x,g=h.frameId;h=this._normalizeX(this.xmax,e);const v=h.x,b=h.frameId,w=m===v&&a>0;if(a>2*y){const T=new hn(u<c?m:v,n,y,s,o),A=new hn(f,n,u<c?v:m,s,o),R=new hn(0,n,y,s,o),M=new hn(f,n,0,s,o),C=[],k=[];T.contains(R)&&C.push(g),T.contains(M)&&k.push(g),A.contains(R)&&C.push(b),A.contains(M)&&k.push(b);for(let B=g+1;B<b;B++)C.push(B),k.push(B);t.push({extent:T,frameIds:[g]},{extent:A,frameIds:[b]},{extent:R,frameIds:C},{extent:M,frameIds:k})}else m>v||w?t.push({extent:new hn(m,n,y,s,o),frameIds:[g]},{extent:new hn(f,n,v,s,o),frameIds:[b]}):t.push({extent:new hn(m,n,v,s,o),frameIds:[g]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}_normalizeX(e,t){const[i,r]=t.valid,n=2*r;let s,o=0;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n,o=s):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n,o=-s),{x:e,frameId:o}}};l([d({readOnly:!0})],Zt.prototype,"cache",null),l([d({readOnly:!0})],Zt.prototype,"center",null),l([d({readOnly:!0})],Zt.prototype,"extent",null),l([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Zt.prototype,"hasM",null),l([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Zt.prototype,"hasZ",null),l([d({readOnly:!0})],Zt.prototype,"height",null),l([d({readOnly:!0})],Zt.prototype,"width",null),l([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Zt.prototype,"xmin",void 0),l([d({type:Number,json:{write:!0}})],Zt.prototype,"ymin",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Zt.prototype,"mmin",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Zt.prototype,"zmin",void 0),l([d({type:Number,json:{write:!0}})],Zt.prototype,"xmax",void 0),l([d({type:Number,json:{write:!0}})],Zt.prototype,"ymax",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Zt.prototype,"mmax",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Zt.prototype,"zmax",void 0),Zt=hn=l([S("esri.geometry.Extent")],Zt),Zt.prototype.toJSON.isDefaultToJSON=!0;const Ue=Zt;let Ay;var l9,u9,c9;const o2=(c9=(l9=globalThis.esriConfig)==null?void 0:l9.locale)!=null?c9:(u9=globalThis.dojoConfig)==null?void 0:u9.locale;function W6(){var e,t;return(t=o2!=null?o2:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function Xr(){return Ay===void 0&&(Ay=W6()),Ay}const My=[];function Y6(e){return My.push(e),{remove(){My.splice(My.indexOf(e),1)}}}const mS=[];function e3(e){return mS.push(e),{remove(){My.splice(mS.indexOf(e),1)}}}function VW(){const e=W6();Ay!==e&&(Ay=e,[...mS].forEach(t=>{t.call(null,e)}),[...My].forEach(t=>{t.call(null,e)}))}var d9;(d9=globalThis.addEventListener)==null||d9.call(globalThis,"languagechange",VW);class xe{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=i,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&Cr(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const i=this.apiToJSON[t];return this.options.useNumericKeys?+i:i}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}}function Ai(){return function(e,t){return new xe(e,{ignoreUnknown:!0,...t})}}var gS;const jW=new xe({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let pn=gS=class extends ce{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new gS({categories:this.categories?$(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,r;if(this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o)),this.extent){const o=Kb(this.extent,we.WGS84);E(o)&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>jW.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};l([d()],pn.prototype,"categories",void 0),l([d()],pn.prototype,"disableExtraQuery",void 0),l([d({type:Ue})],pn.prototype,"extent",void 0),l([d()],pn.prototype,"filter",void 0),l([d()],pn.prototype,"num",void 0),l([d()],pn.prototype,"query",void 0),l([d()],pn.prototype,"sortField",void 0),l([d()],pn.prototype,"sortOrder",null),l([d()],pn.prototype,"start",void 0),pn=gS=l([S("esri.portal.PortalQueryParams")],pn);const ua=pn;let xu=class extends ce{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};l([d()],xu.prototype,"nextQueryParams",void 0),l([d()],xu.prototype,"queryParams",void 0),l([d()],xu.prototype,"results",void 0),l([d()],xu.prototype,"total",void 0),xu=l([S("esri.portal.PortalQueryResult")],xu);const zW=xu;let Bo=class extends j{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new P("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};l([d({type:Date})],Bo.prototype,"created",void 0),l([d()],Bo.prototype,"id",void 0),l([d()],Bo.prototype,"portal",void 0),l([d()],Bo.prototype,"title",void 0),l([d({readOnly:!0})],Bo.prototype,"url",null),l([d()],Bo.prototype,"username",void 0),Bo=l([S("esri.portal.PortalFolder")],Bo);const HW=Bo;let Jt=class extends j{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new P("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=it(ua,e);return parseFloat(this.portal.currentVersion)>5?(i=i||new ua,this.portal._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new ua,i.query="group:"+this.id+(i.query?" "+i.query:""),this.portal.queryItems(i,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(i=>{const r=i.contentCategorySetsGroupQuery;if(r){const n=new ua;return n.disableExtraQuery=!0,n.num=1,n.query=r,this.portal.queryGroups(n,t)}throw new P("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const r=i.results[0],n=new ua;return n.num=1,n.query=`typekeywords:"${e}"`,r.queryItems(n,t)}throw new P("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(r=>{const n=r&&r.categorySchema;return n&&n.length?n:[]}):[])}};l([d()],Jt.prototype,"access",void 0),l([d({type:Date})],Jt.prototype,"created",void 0),l([d()],Jt.prototype,"description",void 0),l([d()],Jt.prototype,"id",void 0),l([d()],Jt.prototype,"isInvitationOnly",void 0),l([d({type:Date})],Jt.prototype,"modified",void 0),l([d()],Jt.prototype,"owner",void 0),l([d()],Jt.prototype,"portal",void 0),l([d()],Jt.prototype,"snippet",void 0),l([d()],Jt.prototype,"sortField",void 0),l([d()],Jt.prototype,"sortOrder",void 0),l([d()],Jt.prototype,"tags",void 0),l([d()],Jt.prototype,"thumbnail",void 0),l([d({readOnly:!0})],Jt.prototype,"thumbnailUrl",null),l([d()],Jt.prototype,"title",void 0),l([d({readOnly:!0})],Jt.prototype,"url",null),Jt=l([S("esri.portal.PortalGroup")],Jt);const vS=Jt,GW=Object.freeze(Object.defineProperty({__proto__:null,default:vS},Symbol.toStringTag,{value:"Module"}));var bS;let at=bS=class extends j{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal._request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal._request(t,r).then(()=>{e.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const n=HW.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=vS.fromJSON(i);return r.portal=this.portal,r}):[],t})}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),V(()=>Promise.resolve().then(()=>K6),void 0,import.meta.url).then(({default:r})=>{t=r;const n={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:n})}).then(r=>{let n;return r&&r.items?(n=r.items.map(s=>{const o=t.fromJSON(s);return o.portal=this.portal,o}),Promise.all(n.map(s=>s.load())).catch(s=>s).then(()=>({items:n,nextStart:r.nextStart,total:r.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new vS({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new P("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new P("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new bS;return t.sourceJSON=e,t.read(e),t}};l([d()],at.prototype,"access",void 0),l([d({type:Date})],at.prototype,"created",void 0),l([d()],at.prototype,"culture",void 0),l([d()],at.prototype,"description",void 0),l([d()],at.prototype,"email",void 0),l([d()],at.prototype,"favGroupId",void 0),l([d()],at.prototype,"fullName",void 0),l([d({type:Date})],at.prototype,"modified",void 0),l([d()],at.prototype,"orgId",void 0),l([d()],at.prototype,"portal",void 0),l([d()],at.prototype,"preferredView",void 0),l([d()],at.prototype,"privileges",void 0),l([d()],at.prototype,"region",void 0),l([d()],at.prototype,"role",void 0),l([d()],at.prototype,"roleId",void 0),l([d()],at.prototype,"sourceJSON",void 0),l([d()],at.prototype,"thumbnail",void 0),l([d({readOnly:!0})],at.prototype,"thumbnailUrl",null),l([d()],at.prototype,"units",void 0),l([d({readOnly:!0})],at.prototype,"userContentUrl",null),l([d({readOnly:!0})],at.prototype,"url",null),l([d()],at.prototype,"username",void 0),l([d()],at.prototype,"userType",void 0),at=bS=l([S("esri.portal.PortalUser")],at);const t3=at,qW=Object.freeze(Object.defineProperty({__proto__:null,default:t3},Symbol.toStringTag,{value:"Module"}));var Ur;let a2;const VI={PortalGroup:()=>V(()=>Promise.resolve().then(()=>GW),void 0,import.meta.url),PortalItem:()=>V(()=>Promise.resolve().then(()=>K6),void 0,import.meta.url),PortalUser:()=>V(()=>Promise.resolve().then(()=>qW),void 0,import.meta.url)};let J=Ur=class extends Vm(go){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=De.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)De.request.trustedServers.includes(t)||De.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=t3.fromJSON(e),t.portal=this),t}load(e){const t=V(()=>Promise.resolve().then(()=>uY),void 0,import.meta.url).then(({default:i})=>{Ct(e),a2=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(xt){const r=xt;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==Ur.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await V(()=>import("./ElevationLayer.9b0f6aa7.js"),[],import.meta.url)).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new ua;return i.query=e||(De.apiKey&&U6(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const n=r.results[0];return i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc",n.queryItems(i,t)}return null}).then(r=>{let n;return n=r&&r.total?r.results.filter(s=>s.type==="Web Map").map(s=>new a2({portalItem:s})):[],n})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Pn(e)?Promise.reject(Mt()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new ua;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const n of t)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(n=>n.results)}return Pn(e)?Promise.reject(Mt()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Xr();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Xr();return this._request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return Ur._default&&!Ur._default.destroyed||(Ur._default=new Ur),Ur._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new P("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Ur({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new P("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new P("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Xr().toLowerCase()},...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this._request(r,n)}_queryPortal(e,t,i,r){const n=it(ua,t),s=o=>this._request(this.restUrl+e,{...n.toRequestOptions(this),...r}).then(a=>{const u=n.clone();return u.start=a.nextStart,new zW({nextQueryParams:u,queryParams:n,total:a.total,results:Ur._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(u=>typeof u.when=="function"?u.when():a)).then(()=>a,u=>(Gl(u),a)));return i&&VI[i]?VI[i]().then(({default:o})=>(Ct(r),s(o))):s()}_signIn(){if(this.authMode===Ur.AUTH_MODE_ANONYMOUS)return Promise.reject(new P("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return xt?xt.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(r=>{const n=Ur._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():r)).then(()=>n,()=>n)})}_readBasemap(e){if(e){const t=a2.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===Ur.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:u}=t,c={authMode:r,body:n,cacheBust:s,method:o,query:i,responseType:a,timeout:0,signal:u};return ze(this._normalizeSSL(e),c).then(h=>h.data)}static _resultsToTypedArray(e,t,i,r){let n;if(i){const s=E(r)?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};J.AUTH_MODE_ANONYMOUS="anonymous",J.AUTH_MODE_AUTO="auto",J.AUTH_MODE_IMMEDIATE="immediate",l([d()],J.prototype,"access",void 0),l([d()],J.prototype,"allSSL",void 0),l([d()],J.prototype,"authMode",void 0),l([d()],J.prototype,"authorizedCrossOriginDomains",void 0),l([Z("authorizedCrossOriginDomains")],J.prototype,"readAuthorizedCrossOriginDomains",null),l([d()],J.prototype,"basemapGalleryGroupQuery",void 0),l([d()],J.prototype,"bingKey",void 0),l([d()],J.prototype,"canListApps",void 0),l([d()],J.prototype,"canListData",void 0),l([d()],J.prototype,"canListPreProvisionedItems",void 0),l([d()],J.prototype,"canProvisionDirectPurchase",void 0),l([d()],J.prototype,"canSearchPublic",void 0),l([d()],J.prototype,"canShareBingPublic",void 0),l([d()],J.prototype,"canSharePublic",void 0),l([d()],J.prototype,"canSignInArcGIS",void 0),l([d()],J.prototype,"canSignInIDP",void 0),l([d()],J.prototype,"colorSetsGroupQuery",void 0),l([d()],J.prototype,"commentsEnabled",void 0),l([d({type:Date})],J.prototype,"created",void 0),l([d()],J.prototype,"credential",void 0),l([d()],J.prototype,"culture",void 0),l([d()],J.prototype,"currentVersion",void 0),l([d()],J.prototype,"customBaseUrl",void 0),l([d()],J.prototype,"defaultBasemap",void 0),l([Z("defaultBasemap")],J.prototype,"readDefaultBasemap",null),l([d()],J.prototype,"defaultDevBasemap",void 0),l([Z("defaultDevBasemap")],J.prototype,"readDefaultDevBasemap",null),l([d({type:Ue})],J.prototype,"defaultExtent",void 0),l([d()],J.prototype,"defaultVectorBasemap",void 0),l([Z("defaultVectorBasemap")],J.prototype,"readDefaultVectorBasemap",null),l([d()],J.prototype,"description",void 0),l([d()],J.prototype,"devBasemapGalleryGroupQuery",void 0),l([d()],J.prototype,"eueiEnabled",void 0),l([d({readOnly:!0})],J.prototype,"extraQuery",null),l([d()],J.prototype,"featuredGroups",void 0),l([d()],J.prototype,"featuredItemsGroupQuery",void 0),l([d()],J.prototype,"galleryTemplatesGroupQuery",void 0),l([d()],J.prototype,"livingAtlasGroupQuery",void 0),l([d()],J.prototype,"hasCategorySchema",void 0),l([d()],J.prototype,"helpBase",void 0),l([d()],J.prototype,"helperServices",void 0),l([d()],J.prototype,"helpMap",void 0),l([d()],J.prototype,"homePageFeaturedContent",void 0),l([d()],J.prototype,"homePageFeaturedContentCount",void 0),l([d()],J.prototype,"httpPort",void 0),l([d()],J.prototype,"httpsPort",void 0),l([d()],J.prototype,"id",void 0),l([d()],J.prototype,"ipCntryCode",void 0),l([d({readOnly:!0})],J.prototype,"isOrganization",null),l([d()],J.prototype,"isPortal",void 0),l([d()],J.prototype,"isReadOnly",void 0),l([d()],J.prototype,"layerTemplatesGroupQuery",void 0),l([d()],J.prototype,"maxTokenExpirationMinutes",void 0),l([d({type:Date})],J.prototype,"modified",void 0),l([d()],J.prototype,"name",void 0),l([d()],J.prototype,"portalHostname",void 0),l([d()],J.prototype,"portalMode",void 0),l([d()],J.prototype,"portalProperties",void 0),l([d()],J.prototype,"region",void 0),l([d({readOnly:!0})],J.prototype,"restUrl",null),l([d()],J.prototype,"rotatorPanels",void 0),l([d()],J.prototype,"showHomePageDescription",void 0),l([d()],J.prototype,"sourceJSON",void 0),l([d()],J.prototype,"staticImagesUrl",void 0),l([d({json:{name:"2DStylesGroupQuery"}})],J.prototype,"stylesGroupQuery2d",void 0),l([d({json:{name:"stylesGroupQuery"}})],J.prototype,"stylesGroupQuery3d",void 0),l([d()],J.prototype,"supportsHostedServices",void 0),l([d()],J.prototype,"symbolSetsGroupQuery",void 0),l([d()],J.prototype,"templatesGroupQuery",void 0),l([d()],J.prototype,"thumbnail",void 0),l([d({readOnly:!0})],J.prototype,"thumbnailUrl",null),l([d()],J.prototype,"units",void 0),l([d()],J.prototype,"url",void 0),l([d()],J.prototype,"urlKey",void 0),l([Z("urlKey")],J.prototype,"readUrlKey",null),l([d()],J.prototype,"user",void 0),l([Z("user")],J.prototype,"readUser",null),l([d()],J.prototype,"useStandardizedQuery",void 0),l([d()],J.prototype,"useVectorBasemaps",void 0),l([d()],J.prototype,"vectorBasemapGalleryGroupQuery",void 0),J=Ur=l([S("esri.portal.Portal")],J);const ri=J,WW=W.getLogger("esri.assets");function He(e){if(!De.assetsPath)throw WW.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new P("assets:path-not-set","config.assetsPath is not set");return vo(De.assetsPath,e)}const YW=W.getLogger("esri.portal.PortalItemResource");let Za=class extends ce{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){E(e)&&nr(e)?YW.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(O(i))throw new P("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:g9(t,"signal")})}async update(e,t){return(await V(()=>import("./resourceUtils.f25dae7b.js"),[],import.meta.url)).addOrUpdateResource(this,"update",e,t)}hasPath(){return E(this.path)}_normalizePath(e,t){return O(e)?e:(e=e.replace(/^\/+/,""),E(t)&&nr(e)&&(e=WA(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};l([d()],Za.prototype,"portalItem",void 0),l([d({type:String,value:null})],Za.prototype,"path",null),l([je("path")],Za.prototype,"_castPath",null),l([d({type:String,readOnly:!0})],Za.prototype,"url",null),l([d({type:String,readOnly:!0})],Za.prototype,"itemRelativeUrl",null),Za=l([S("esri.portal.PortalItemResource")],Za);const KW=Za;let Af=class extends ce{constructor(e){super(e),this.created=null,this.rating=null}};l([d()],Af.prototype,"created",void 0),l([d()],Af.prototype,"rating",void 0),Af=l([S("esri.portal.PortalRating")],Af);const l2=Af;var Ad;let Ne=Ad=class extends Vm(go){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return kA(Ad,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(i="Instant App"),i}readExtent(e){return e&&e.length?new Ue(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,a=!1,u=!1,c=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),u=t.includes("Markup"),c=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":u?"markup":c?"spatiotemporal":s?"featureshosted":h?"utilitynetwork":"features"):n=e==="map service"||e==="wms"||e==="wmts"?s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):n=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":"maps",n?He(i+n+r+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const e=this.get("portal.restUrl");return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=ri.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:E(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof l2&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new l2({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:$(this.applicationProxies),avgRating:this.avgRating,categories:$(this.categories),created:$(this.created),culture:this.culture,description:this.description,extent:$(this.extent),groupCategories:$(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:$(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:$(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:$(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:$(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new Ad({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then(t=>t.rating!=null?(t.created=new Date(t.created),new l2(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Ad)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new P("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")od(t)?r.query={data:t}:r.query={url:ws(t)},E(i)&&(r.query.filename=i);else{const n=new FormData;E(i)?n.append("file",t,i):n.append("file",t),r.body=n}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new P("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await V(()=>import("./resourceUtils.f25dae7b.js"),[],import.meta.url)).fetchResources(this,e,t)}async addResource(e,t,i){const r=await V(()=>import("./resourceUtils.f25dae7b.js"),[],import.meta.url);return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await V(()=>import("./resourceUtils.f25dae7b.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new P("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await V(()=>import("./resourceUtils.f25dae7b.js"),[],import.meta.url)).removeAllResources(this,e)}resourceFromPath(e){return new KW({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:$(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:$(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:$(this.typeKeywords),url:this.url};return S9(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Ad({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};l([d({type:["private","shared","org","public"]})],Ne.prototype,"access",void 0),l([d()],Ne.prototype,"accessInformation",void 0),l([d({type:String})],Ne.prototype,"apiKey",void 0),l([d({json:{read:{source:"appProxies"}}})],Ne.prototype,"applicationProxies",void 0),l([d()],Ne.prototype,"avgRating",void 0),l([d()],Ne.prototype,"categories",void 0),l([d({type:Date})],Ne.prototype,"created",void 0),l([d()],Ne.prototype,"culture",void 0),l([d()],Ne.prototype,"description",void 0),l([d({readOnly:!0})],Ne.prototype,"displayName",null),l([d({type:Ue})],Ne.prototype,"extent",void 0),l([Z("extent")],Ne.prototype,"readExtent",null),l([d()],Ne.prototype,"groupCategories",void 0),l([d({readOnly:!0})],Ne.prototype,"iconUrl",null),l([d()],Ne.prototype,"id",void 0),l([d({readOnly:!0})],Ne.prototype,"isLayer",null),l([d()],Ne.prototype,"itemControl",void 0),l([d({readOnly:!0})],Ne.prototype,"itemUrl",null),l([d()],Ne.prototype,"licenseInfo",void 0),l([d({type:Date})],Ne.prototype,"modified",void 0),l([d()],Ne.prototype,"name",void 0),l([d()],Ne.prototype,"numComments",void 0),l([d()],Ne.prototype,"numRatings",void 0),l([d()],Ne.prototype,"numViews",void 0),l([d()],Ne.prototype,"owner",void 0),l([d()],Ne.prototype,"ownerFolder",void 0),l([d({type:ri})],Ne.prototype,"portal",void 0),l([d()],Ne.prototype,"screenshots",void 0),l([d()],Ne.prototype,"size",void 0),l([d()],Ne.prototype,"snippet",void 0),l([d()],Ne.prototype,"sourceJSON",void 0),l([d({type:String})],Ne.prototype,"spatialReference",void 0),l([d()],Ne.prototype,"tags",void 0),l([d()],Ne.prototype,"thumbnail",void 0),l([d({readOnly:!0})],Ne.prototype,"thumbnailUrl",null),l([d()],Ne.prototype,"title",void 0),l([d()],Ne.prototype,"type",void 0),l([d()],Ne.prototype,"typeKeywords",void 0),l([d({type:String,json:{read(e,t){var r;if(t.type!=="KML")return e;const i=(r=this.portal)==null?void 0:r.restUrl;return e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null),e}}})],Ne.prototype,"url",void 0),l([d({readOnly:!0})],Ne.prototype,"userItemUrl",null),Ne=Ad=l([S("esri.portal.PortalItem")],Ne);const Sv=Ne,K6=Object.freeze(Object.defineProperty({__proto__:null,default:Sv},Symbol.toStringTag,{value:"Module"})),jI=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,ZW={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function zI(e){var t;return(t=ZW[e])!=null?t:!1}const Mf=[],Nh=new Map;function HI(e){for(const t of Nh.keys())Z6(e.pattern,t)&&Nh.delete(t)}function JW(e){return Mf.includes(e)||(HI(e),Mf.unshift(e)),{remove(){const t=Mf.indexOf(e);t>-1&&(Mf.splice(t,1),HI(e))}}}async function i3(e){const t=Xr();Nh.has(e)||Nh.set(e,QW(e,t));const i=Nh.get(e);return await eY.add(i),i}function XW(e){if(!jI.test(e))return null;const[,t,i]=jI.exec(e),r=t+(i?"-"+i.toUpperCase():"");return zI(r)?r:zI(t)?t:null}async function QW(e,t){const i=[];for(const r of Mf)if(Z6(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(n){i.push(n)}throw i.length?new P("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new P("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function Z6(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}e3(()=>{Nh.clear()});const eY=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Sa())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function tY(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await i3("esri/t9n/basemaps");return i[e]||i[t]}const wS={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return He("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return He("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return He("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return He("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return He("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return He("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return He("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return He("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return He("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return He("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return He("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return He("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return He("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return He("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return He("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return He("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};function r3(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function VSe(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}const iY=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),rY=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function nY(e){return e.layerContainerType==="basemap"?iY:e.layerContainerType==="operational-layers"?rY:null}function sY(e,t){if(t.restrictedWebMapWriting){const i=nY(t);return!E(i)||i.has(e.type)&&!r3(e)}return!0}function oY(e,t){if(r3(e)){const i=vp("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&u2(e,r)}else e.type==="stream"?u2(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&u2(e,t)}function u2(e,t){"maxScale"in e&&(t.maxScale=gv(e.maxScale)),"minScale"in e&&(t.minScale=gv(e.minScale))}function aY(e,t){if(oY(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=gv(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(r3(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function GI(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new P("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(sY(e,i)){const r={};return e.write(r,i)?r:null}return E(t)&&aY(e,t=$(t)),t}var zg;let lY=0;const c2=W.getLogger("esri.Basemap");let fn=zg=class extends Vm(go){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+lY++,this.baseLayers=new me,this.referenceLayers=new me;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&c2.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{c2.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Vc(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=GI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);E(s)&&r.push(s)}),this.referenceLayers.forEach(n=>{const s=GI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);E(s)&&(s.isReference=!0,r.push(s))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",Vc(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return S6(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new zg({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=$(i);return r.url&&Dn(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&Dn(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;Ct(e);const r=[];if(t){const n=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const s=t.data.id;r.push(tY(s).then(o=>{o&&this.read({title:o},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||r&&r.portal||null,s=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:o}=await V(()=>import("./layersCreator.059d13f6.js"),["layersCreator.059d13f6.js","lazyLayerLoader.c07309e4.js","portalLayers.ee510417.js","layersLoader.540e258b.js","portalItemUtils.a754404a.js"],import.meta.url),a=[];if(Ct(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const u={context:{origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},c=o(this.baseLayers,e.baseMapLayers.filter(f=>!f.isReference),u);a.push(c);const h=o(this.referenceLayers,e.baseMapLayers.filter(f=>f.isReference),u);a.push(h)}await di(a)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),n=ut(e.itemUrl);return this._set("resourceInfo",{data:r.baseMap,context:{origin:"web-map",portal:e.portal||ri.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ri.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=wS[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),V9(c2,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return zg.fromJSON(t)}return null}};l([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:me}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],fn.prototype,"baseLayers",null),l([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],fn.prototype,"id",void 0),l([d({type:Sv})],fn.prototype,"portalItem",void 0),l([d()],fn.prototype,"referenceLayers",null),l([d({readOnly:!0})],fn.prototype,"resourceInfo",void 0),l([d({type:we})],fn.prototype,"spatialReference",void 0),l([d()],fn.prototype,"thumbnailUrl",void 0),l([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],fn.prototype,"title",void 0),l([te("title")],fn.prototype,"writeTitle",null),fn=zg=l([S("esri.Basemap")],fn);const Tv=fn,uY=Object.freeze(Object.defineProperty({__proto__:null,default:Tv},Symbol.toStringTag,{value:"Module"})),Ev={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function J6(e){return Ev[e]||Ev[e.toLowerCase()]}function n3(e){var t;return(t=Ev[e])!=null?t:Ev[e.toLowerCase()]}function cY(e){return[...n3(e)]}function d2(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function X6(e,t,i,r=1){const n=(e%360+360)%360/360,s=i<=.5?i*(t+1):i+t-i*t,o=2*i-s;return[Math.round(255*d2(o,s,n+1/3)),Math.round(255*d2(o,s,n)),Math.round(255*d2(o,s,n-1/3)),r]}function dY(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let u;return s&&(u=o&r,o>>=i,a[3]=n*u/255),u=o&r,o>>=i,a[2]=n*u,u=o&r,o>>=i,a[1]=n*u,u=o&r,o>>=i,a[0]=n*u,a}function Eo(){return[0,0,0]}function hY(e){return[e[0],e[1],e[2]]}function Sp(e,t,i){return[e,t,i]}function pY(e){const t=Eo(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function fY(e,t){return new Float64Array(e,t,3)}function Q6(){return Eo()}function eL(){return Sp(1,1,1)}function tL(){return Sp(1,0,0)}function iL(){return Sp(0,1,0)}function rL(){return Sp(0,0,1)}const yY=Q6(),nL=eL(),mY=tL(),gY=iL(),vY=rL();Object.freeze(Object.defineProperty({__proto__:null,create:Eo,clone:hY,fromValues:Sp,fromArray:pY,createView:fY,zeros:Q6,ones:eL,unitX:tL,unitY:iL,unitZ:rL,ZEROS:yY,ONES:nL,UNIT_X:mY,UNIT_Y:gY,UNIT_Z:vY},Symbol.toStringTag,{value:"Module"}));const Te=1e-6,Fl=Math.random,bY=Math.PI/180,wY=180/Math.PI;function s3(e){return e*bY}function _Y(e){return e*wY}function SY(e,t){return Math.abs(e-t)<=Te*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:Te,RANDOM:Fl,toRadian:s3,toDegree:_Y,equals:SY},Symbol.toStringTag,{value:"Module"}));function o3(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function _S(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function sL(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function TY(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function oL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function aL(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function lL(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function EY(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function xY(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function AY(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function MY(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function CY(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function IY(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function NY(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function uL(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function RY(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function cL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}function dL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function hL(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function PY(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function $Y(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function SS(e,t){const i=t[0],r=t[1],n=t[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function pL(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function DY(e,t,i){const r=t[0],n=t[1],s=t[2],o=i[0],a=i[1],u=i[2];return e[0]=n*u-s*a,e[1]=s*o-r*u,e[2]=r*a-n*o,e}function LY(e,t,i,r){const n=t[0],s=t[1],o=t[2];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e[2]=o+r*(i[2]-o),e}function OY(e,t,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,u=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+i[0]*u+r[0]*c+n[0]*h,e[1]=t[1]*a+i[1]*u+r[1]*c+n[1]*h,e[2]=t[2]*a+i[2]*u+r[2]*c+n[2]*h,e}function kY(e,t,i,r,n,s){const o=1-s,a=o*o,u=s*s,c=a*o,h=3*s*a,f=3*u*o,y=u*s;return e[0]=t[0]*c+i[0]*h+r[0]*f+n[0]*y,e[1]=t[1]*c+i[1]*h+r[1]*f+n[1]*y,e[2]=t[2]*c+i[2]*h+r[2]*f+n[2]*y,e}function FY(e,t){t=t||1;const i=2*Fl()*Math.PI,r=2*Fl()-1,n=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=r*t,e}function BY(e,t,i){const r=t[0],n=t[1],s=t[2];return e[0]=i[0]*r+i[4]*n+i[8]*s+i[12],e[1]=i[1]*r+i[5]*n+i[9]*s+i[13],e[2]=i[2]*r+i[6]*n+i[10]*s+i[14],e}function UY(e,t,i){const r=t[0],n=t[1],s=t[2];return e[0]=r*i[0]+n*i[3]+s*i[6],e[1]=r*i[1]+n*i[4]+s*i[7],e[2]=r*i[2]+n*i[5]+s*i[8],e}function VY(e,t,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=t[0],u=t[1],c=t[2];let h=n*c-s*u,f=s*a-r*c,y=r*u-n*a,m=n*y-s*f,g=s*h-r*y,v=r*f-n*h;const b=2*o;return h*=b,f*=b,y*=b,m*=2,g*=2,v*=2,e[0]=a+h+m,e[1]=u+f+g,e[2]=c+y+v,e}function jY(e,t,i,r){const n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function zY(e,t,i,r){const n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function HY(e,t,i,r){const n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function GY(e,t){_S(R0,e),_S(P0,t),SS(R0,R0),SS(P0,P0);const i=pL(R0,P0);return i>1?0:i<-1?Math.PI:Math.acos(i)}const R0=Eo(),P0=Eo();function qY(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function WY(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function YY(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],s=t[0],o=t[1],a=t[2];return Math.abs(i-s)<=Te*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=Te*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=Te*Math.max(1,Math.abs(n),Math.abs(a))}function KY(e,t,i){const r=i[0]-t[0],n=i[1]-t[1],s=i[2]-t[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const ZY=oL,JY=aL,XY=lL,QY=cL,eK=dL,tK=o3,iK=hL;Object.freeze(Object.defineProperty({__proto__:null,length:o3,copy:_S,set:sL,add:TY,subtract:oL,multiply:aL,divide:lL,ceil:EY,floor:xY,abs:AY,sign:MY,min:CY,max:IY,round:NY,scale:uL,scaleAndAdd:RY,distance:cL,squaredDistance:dL,squaredLength:hL,negate:PY,inverse:$Y,normalize:SS,dot:pL,cross:DY,lerp:LY,hermite:OY,bezier:kY,random:FY,transformMat4:BY,transformMat3:UY,transformQuat:VY,rotateX:jY,rotateY:zY,rotateZ:HY,angle:GY,str:qY,exactEquals:WY,equals:YY,direction:KY,sub:ZY,mul:JY,div:XY,dist:QY,sqrDist:eK,len:tK,sqrLen:iK},Symbol.toStringTag,{value:"Module"}));function rK(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function nK(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function sK(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function fL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function yL(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function mL(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function oK(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function aK(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function lK(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function uK(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function cK(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function dK(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function hK(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function gL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function vL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return i*i+r*r+n*n+s*s}function bL(e){const t=e[0],i=e[1],r=e[2],n=e[3];return Math.sqrt(t*t+i*i+r*r+n*n)}function wL(e){const t=e[0],i=e[1],r=e[2],n=e[3];return t*t+i*i+r*r+n*n}function pK(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function fK(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function yK(e,t){const i=t[0],r=t[1],n=t[2],s=t[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=i*o,e[1]=r*o,e[2]=n*o,e[3]=s*o),e}function mK(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function _L(e,t,i,r){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e[2]=o+r*(i[2]-o),e[3]=a+r*(i[3]-a),e}function gK(e,t){let i,r,n,s,o,a;t=t||1;do i=2*Fl()-1,r=2*Fl()-1,o=i*i+r*r;while(o>=1);do n=2*Fl()-1,s=2*Fl()-1,a=n*n+s*s;while(a>=1);const u=Math.sqrt((1-o)/a);return e[0]=t*i,e[1]=t*r,e[2]=t*n*u,e[3]=t*s*u,e}function vK(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,e[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,e[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,e[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,e}function bK(e,t,i){const r=t[0],n=t[1],s=t[2],o=i[0],a=i[1],u=i[2],c=i[3],h=c*r+a*s-u*n,f=c*n+u*r-o*s,y=c*s+o*n-a*r,m=-o*r-a*n-u*s;return e[0]=h*c+m*-o+f*-u-y*-a,e[1]=f*c+m*-a+y*-o-h*-u,e[2]=y*c+m*-u+h*-a-f*-o,e[3]=t[3],e}function wK(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function _K(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function SK(e,t){const i=e[0],r=e[1],n=e[2],s=e[3],o=t[0],a=t[1],u=t[2],c=t[3];return Math.abs(i-o)<=Te*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=Te*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-u)<=Te*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(s-c)<=Te*Math.max(1,Math.abs(s),Math.abs(c))}const TK=fL,EK=yL,xK=mL,AK=gL,MK=vL,CK=bL,IK=wL;Object.freeze(Object.defineProperty({__proto__:null,copy:rK,set:nK,add:sK,subtract:fL,multiply:yL,divide:mL,ceil:oK,floor:aK,min:lK,max:uK,round:cK,scale:dK,scaleAndAdd:hK,distance:gL,squaredDistance:vL,length:bL,squaredLength:wL,negate:pK,inverse:fK,normalize:yK,dot:mK,lerp:_L,random:gK,transformMat4:vK,transformQuat:bK,str:wK,exactEquals:_K,equals:SK,sub:TK,mul:EK,div:xK,dist:AK,sqrDist:MK,len:CK,sqrLen:IK},Symbol.toStringTag,{value:"Module"}));const qI=new Float32Array(1);function jSe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Nr(e,t,i){return Math.min(Math.max(e,t),i)}function zSe(e){return(e&e-1)==0}function HSe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function GSe(e,t,i){return e+(t-e)*i}function NK(e){return e*Math.PI/180}function SL(e){return 180*e/Math.PI}function qSe(e){return Math.acos(Nr(e,-1,1))}function TL(e){return Math.asin(Nr(e,-1,1))}function h2(e,t,i=1e-6){return isNaN(e)||isNaN(t)?!1:(e>t?e-t:t-e)<=i}function WSe(e){return EL(Math.max(-WI,Math.min(e,WI)))}function EL(e){return qI[0]=e,qI[0]}function YSe(e,t){const i=o3(e),r=TL(e[2]/i),n=Math.atan2(e[1]/i,e[0]/i);return sL(t,i,r,n),t}function KSe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(h2(t,1)&&h2(i,1)&&h2(r,1))}const WI=EL(34028234663852886e22);function $0(e){return Nr(OA(e),0,255)}function D0(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class Ft{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,r,n=new Ft){return n.r=Math.round(t.r+(i.r-t.r)*r),n.g=Math.round(t.g+(i.g-t.g)*r),n.b=Math.round(t.b+(i.b-t.b)*r),n.a=t.a+(i.a-t.a)*r,n._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),s=r[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(u=>2.56*parseFloat(u));return n.length===4&&(a[3]=parseFloat(n[3])),Ft.fromArray(a,i)}return Ft.fromArray(n.map(a=>parseFloat(a)),i)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return Ft.fromArray(X6(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(t,i=new Ft){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,n=(1<<r)-1;let s=Number("0x"+t.substr(1));return isNaN(s)?null:(["b","g","r"].forEach(o=>{const a=s&n;s>>=r,i[o]=r===4?17*a:a}),i.a=1,i)}static fromArray(t,i=new Ft){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=J6(t)?n3(t):null;return r&&Ft.fromArray(r,i)||Ft.fromRgb(t,i)||Ft.fromHex(t,i)}static fromJSON(t){return t&&new Ft([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return E(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return E(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var i,r,n,s;return typeof t=="string"?Ft.fromString(t,this):Array.isArray(t)?Ft.fromArray(t,this):(this._set((i=t.r)!=null?i:0,(r=t.g)!=null?r:0,(n=t.b)!=null?n:0,(s=t.a)!=null?s:1),t instanceof Ft||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Ft.AlphaMode.ALWAYS){const i=$0(this.r),r=$0(this.g),n=$0(this.b);return t===Ft.AlphaMode.ALWAYS||this.a!==1?[i,r,n,$0(255*this.a)]:[i,r,n]}clone(){return new Ft(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return E(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(D0(this.r,0,255)),this.g=Math.round(D0(this.g,0,255)),this.b=Math.round(D0(this.b,0,255)),this.a=D0(this.a,0,1),this}_set(t,i,r,n){this.r=t,this.g=i,this.b=r,this.a=n}}Ft.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Ft||(Ft={}));const se=Ft;function ZSe(e){}function RK(e){return()=>e}function ye(e,t={}){var n;const i=e instanceof xe?e:new xe(e,t),r={type:(n=t==null?void 0:t.ignoreUnknown)==null||n?i.apiValues:String,json:{type:i.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),d(r)}var TS;let Hg=TS=class extends j{constructor(e){super(e),this.type="none"}clone(){return new TS({type:this.type})}};l([ye({none:"none",stayAbove:"stay-above"})],Hg.prototype,"type",void 0),Hg=TS=l([S("esri.ground.NavigationConstraint")],Hg);function Jb(e){const t=OA(100*(1-e));return Math.max(0,Math.min(t,100))}function rm(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var ES;const YI=W.getLogger("esri.Ground");let Uo=ES=class extends Vm(go){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new me;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&YI.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{YI.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Vc(e,this._get("layers")))}writeLayers(e,t,i,r){const n=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};RK(s)().write(o,r)&&n.push(o)}else r&&r.messages&&r.messages.push(new P("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return S6(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await V(()=>import("./ElevationQuery.28c68a31.js"),[],import.meta.url);Ct(t);const r=new i,n=this.layers.filter(KI).toArray();return r.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await V(()=>import("./ElevationQuery.28c68a31.js"),[],import.meta.url);Ct(t);const r=new i,n=this.layers.filter(KI).toArray();return r.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:$(this.surfaceColor),navigationConstraint:$(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new ES({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",n=t&&t.portal||null,s=t&&t.url||null;return V(()=>import("./layersCreator.059d13f6.js"),["layersCreator.059d13f6.js","lazyLayerLoader.c07309e4.js","portalLayers.ee510417.js","layersLoader.540e258b.js","portalItemUtils.a754404a.js"],import.meta.url).then(({populateOperationalLayers:o})=>{Ct(i);const a=[];if(e.layers&&Array.isArray(e.layers)){const u={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,u))}return di(a)}).then(()=>{})}};function PK(e){return e&&"createElevationSampler"in e}function KI(e){return e.type==="elevation"||PK(e)}l([d({json:{read:!1}})],Uo.prototype,"layers",null),l([te("layers")],Uo.prototype,"writeLayers",null),l([d({readOnly:!0})],Uo.prototype,"resourceInfo",void 0),l([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:st,read:{reader:rm,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Jb(e)},target:"transparency"}}})],Uo.prototype,"opacity",void 0),l([d({type:se,json:{type:[st],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Uo.prototype,"surfaceColor",void 0),l([d({type:Hg,json:{write:!0}})],Uo.prototype,"navigationConstraint",void 0),Uo=ES=l([S("esri.Ground")],Uo);const xv=Uo;let Gg=class extends ce{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!me.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||me.isCollection(e)?e.forEach(r=>this._isHandle(r)&&i.push(r)):i.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(i=>i.forEach(e));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||me.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let i=0;i<t.length;i++)t[i].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};l([d({readOnly:!0})],Gg.prototype,"size",null),Gg=l([S("esri.core.Handles")],Gg);const Mi=Gg;function Y(e,t,i={}){return a3(e,t,i,xL)}function Ln(e,t,i={}){return a3(e,t,i,AL)}function a3(e,t,i={},r){let n=null;const s=i.once?(o,a)=>{r(o)&&(Zr(n),t(o,a))}:(o,a)=>{r(o)&&t(o,a)};if(n=bG(e,s,i.sync,i.equals),i.initial){const o=e();s(o,o)}return n}function iu(e,t,i,r={}){let n=null,s=null,o=null;function a(){var h;n&&s&&(s.remove(),(h=r.onListenerRemove)==null||h.call(r,n),n=null,s=null)}function u(h){r.once&&r.once&&Zr(o),i(h)}const c=Y(e,(h,f)=>{var y;a(),Lb(h)&&(n=h,s=Ob(h,t,u),(y=r.onListenerAdd)==null||y.call(r,h))},{sync:r.sync,initial:!0});return o=gp(()=>{c.remove(),a()}),o}function nm(e,t){return $K(e,AL,t)}function $K(e,t,i){if(Pn(i))return Promise.reject(Mt());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let n=null;function s(){n=Zr(n)}return new Promise((o,a)=>{n=Pb([$n(i,()=>{s(),a(Mt())}),a3(e,u=>{s(),o(u)},{sync:!1,once:!0},t!=null?t:xL)])})}function xL(e){return!0}function AL(e){return!!e}const Wh={sync:!0},We={initial:!0},Al={sync:!0,initial:!0};let Rh=class extends ce{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new Mi,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,Y)}addWhen(e,t,i={}){return this._installWatch(e,t,i,Ln)}addOnCollectionChange(e,t,{initial:i=!1,final:r=!1}={}){const n=++this.handleId;return this.handles.add([iu(e,"after-changes",this._createSyncUpdatingCallback(),Wh),iu(e,"change",t,{onListenerAdd:i?s=>t({added:s.toArray(),removed:[]}):void 0,onListenerRemove:r?s=>t({added:[],removed:s.toArray()}):void 0})],n),{remove:()=>this.handles.remove(n)}}addPromise(e){if(O(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(L0)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const n=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,n);const s=r(e,t,i);return this.handles.add(s,n),{remove:()=>this.handles.remove(n)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=Y(e,i,{sync:!0,equals:()=>!1});return this.handles.add(r,t),r}_createSyncUpdatingCallback(){return()=>{this.handles.remove(L0),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(bp(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(L0))}),L0)}}};l([d({readOnly:!0})],Rh.prototype,"updating",void 0),Rh=l([S("esri.core.support.WatchUpdatingTracking")],Rh);const L0=-42;var ZI;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(ZI||(ZI={}));const uu=e=>{let t=class extends e{destroy(){var i,r;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(r=this._get("updatingHandles"))==null||r.destroy())}get handles(){return this._get("handles")||new Mi}get updatingHandles(){return this._get("updatingHandles")||new Rh}};return l([d({readOnly:!0})],t.prototype,"handles",null),l([d({readOnly:!0})],t.prototype,"updatingHandles",null),t=l([S("esri.core.HandleOwner")],t),t};let sm=class extends uu(ce){};sm=l([S("esri.core.HandleOwner")],sm);let Md=class extends uu(me){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(Y9(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=E(this.getCollections)?this.getCollections():null;if(O(e))return void this.removeAll();let t=0;for(const i of e)E(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new me(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of t)if(r){if(i(r)){const n=this.indexOf(r,e);n>=0?n!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(r);if(Array.isArray(n))for(const s of n)e=this._processCollection(e,s);else e=this._processCollection(e,n)}}return e}};l([d()],Md.prototype,"getCollections",void 0),l([d()],Md.prototype,"getChildrenFunction",void 0),l([d()],Md.prototype,"itemFilterFunction",void 0),Md=l([S("esri.core.CollectionFlattener")],Md);const Yh=Md;function DK(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&((t=e==null?void 0:e.capabilities)==null?void 0:t.operations)&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const JI=W.getLogger("esri.support.basemapUtils");function LK(){return{}}function OK(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function kK(e,t){let i;if(typeof e=="string"){if(!(e in wS)){const r=Object.entries(wS).filter(([n,s])=>De.apiKey&&!s.classic||!De.apiKey&&s.classic&&!s.deprecated).map(([n])=>`"${n}"`).join(", ");return JI.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=Tv.fromId(e),t&&(t[e]=i))}else i=it(Tv,e);return i!=null&&i.destroyed&&(JI.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function FK(e){return new Yh({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}})}const BK=W.getLogger("esri.support.groundUtils"),XI={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function UK(e){let t=null;if(typeof e=="string")if(e in XI){const i=XI[e];t=new xv({resourceInfo:{data:{layers:[i]}}})}else BK.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=it(xv,e);return t}function Kh(e,t,i=!1){let{hasM:r,hasZ:n}=e;Array.isArray(t)?t.length!==4||r||n?t.length===3&&i&&!r?(n=!0,r=!1):t.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=r}var xS;function QI(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function VK(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Ja=xS=class extends Ir{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):VK(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Ue,i=this.hasZ,r=this.hasM,n=i?3:2,s=e[0],o=QI(Math.min),a=QI(Math.max);let u,c,h,f,[y,m]=s,[g,v]=s;for(let b=0,w=e.length;b<w;b++){const T=e[b],[A,R]=T;if(y=o(y,A),m=o(m,R),g=a(g,A),v=a(v,R),i&&T.length>2){const M=T[2];u=o(u,M),h=a(h,M)}if(r&&T.length>n){const M=T[n];c=o(c,M),f=a(f,M)}}return t.xmin=y,t.ymin=m,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,i?(t.zmin=u,t.zmax=h):(t.zmin=null,t.zmax=null),r?(t.mmin=c,t.mmax=f):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=$(this.points)}addPoint(e){return Kh(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:$(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new xS(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new he(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new he(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Kh(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};l([d({readOnly:!0})],Ja.prototype,"cache",null),l([d()],Ja.prototype,"extent",null),l([d({type:[[Number]],json:{write:{isRequired:!0}}})],Ja.prototype,"points",void 0),l([te("points")],Ja.prototype,"writePoints",null),Ja=xS=l([S("esri.geometry.Multipoint")],Ja),Ja.prototype.toJSON.isDefaultToJSON=!0;const Tp=Ja;function jK(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function zK(e,t,i){const r=e[0]+i*(t[0]-e[0]),n=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,n,e[2]+i*(t[2]-e[2])]:[r,n]}function HK(e,t,i,r){const[n,s]=t,[o,a]=i[r],[u,c]=i[r+1],h=u-o,f=c-a,y=h*h+f*f,m=(n-o)*h+(s-a)*f,g=Math.min(1,Math.max(0,m/y));return e[0]=o+h*g,e[1]=a+f*g,e}function GK(e,t){return zK(e,t,.5)}function l3(e,t,i){const r=e.length;let n=0,s=0,o=0;for(let a=0;a<r;a++){const u=e[a],c=e[(a+1)%r];let h=2;n+=u[0]*c[1]-c[0]*u[1],u.length>2&&c.length>2&&i&&(s+=u[0]*c[2]-c[0]*u[2],h=3),u.length>h&&c.length>h&&t&&(o+=u[0]*c[h]-c[0]*u[h])}return n<=0&&s<=0&&o<=0}function JSe(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!l3(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function XSe(e){if("rings"in e)for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]])}function QSe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function qK(e){return e?WK(e.rings,e.hasZ):null}function WK(e,t){if(!e||!e.length)return null;const i=[],r=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=YK(e[s],t,n);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=e[0]&&e[0].length?KK(e[0],t):null;if(!s)return null;i[0]=s[0],i[1]=s[1],t&&s.length>2&&(i[2]=s[2])}return i}function YK(e,t,i){let r=0,n=0,s=0,o=0,a=0;const u=e.length?e[0][0]:0,c=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let y=0;y<e.length;y++){const m=e[y],g=e[(y+1)%e.length],[v,b,w]=m,T=v-u,A=b-c,R=t?w-h:void 0,[M,C,k]=g,B=M-u,H=C-c,Q=t?k-h:void 0,ee=T*H-B*A;if(o+=ee,r+=(T+B)*ee,n+=(A+H)*ee,t&&m.length>2&&g.length>2){const le=T*Q-B*R;s+=(R+Q)*le,a+=le}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),b<i[2]&&(i[2]=b),b>i[3]&&(i[3]=b),t&&(w<i[4]&&(i[4]=w),w>i[5]&&(i[5]=w))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[r/(6*o)+u,n/(6*o)+c,o];return t&&(i[4]===i[5]||a===0?(f[3]=(i[4]+i[5])/2,f[4]=0):(f[3]=s/(6*a)+h,f[4]=a)),f}function KK(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let u=0,c=e.length;u<c-1;u++){const h=e[u],f=e[u+1];if(h&&f){i[0]=h[0],i[1]=h[1],r[0]=f[0],r[1]=f[1],t&&h.length>2&&f.length>2&&(i[2]=h[2],r[2]=f[2]);const y=jK(i,r);if(y){n+=y;const m=GK(h,f);s+=y*m[0],o+=y*m[1],t&&m.length>2&&(a+=y*m[2])}}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.length?e[0]:null}function ML(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function CL(e){return e.points!==void 0}function IL(e){return e.x!==void 0&&e.y!==void 0}function NL(e){return e.paths!==void 0}function RL(e){return e.rings!==void 0}function PL(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}const Bl=PL(Math.min),Ul=PL(Math.max);function eTe(e,t){return NL(t)?Zh(e,t.paths,!1,!1):RL(t)?Zh(e,t.rings,!1,!1):CL(t)?u3(e,t.points,!1,!1,!1,!1):ML(t)?$L(e,t):(IL(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function tTe(e,t){return NL(t)?Zh(e,t.paths,!0,!1):RL(t)?Zh(e,t.rings,!0,!1):CL(t)?u3(e,t.points,!0,!1,!0,!1):ML(t)?$L(e,t,!0,!1,!0,!1):(IL(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Zh(e,t,i,r){const n=i?3:2;if(!t.length||!t[0].length)return null;let s,o,a,u,[c,h]=t[0][0],[f,y]=t[0][0];for(let m=0;m<t.length;m++){const g=t[m];for(let v=0;v<g.length;v++){const b=g[v],[w,T]=b;if(c=Bl(c,w),h=Bl(h,T),f=Ul(f,w),y=Ul(y,T),i&&b.length>2){const A=b[2];s=Bl(s,A),o=Ul(o,A)}if(r&&b.length>n){const A=b[n];a=Bl(s,A),u=Ul(o,A)}}}return i?r?(e[0]=c,e[1]=h,e[2]=s,e[3]=a,e[4]=f,e[5]=y,e[6]=o,e[7]=u,e.length=8,e):(e[0]=c,e[1]=h,e[2]=s,e[3]=f,e[4]=y,e[5]=o,e.length=6,e):r?(e[0]=c,e[1]=h,e[2]=a,e[3]=f,e[4]=y,e[5]=u,e.length=6,e):(e[0]=c,e[1]=h,e[2]=f,e[3]=y,e.length=4,e)}function $L(e,t,i,r,n,s){const o=t.xmin,a=t.xmax,u=t.ymin,c=t.ymax;let h=t.zmin,f=t.zmax,y=t.mmin,m=t.mmax;return n?(h=h||0,f=f||0,s?(y=y||0,m=m||0,e[0]=o,e[1]=u,e[2]=h,e[3]=y,e[4]=a,e[5]=c,e[6]=f,e[7]=m,e):(e[0]=o,e[1]=u,e[2]=h,e[3]=a,e[4]=c,e[5]=f,e)):s?(y=y||0,m=m||0,e[0]=o,e[1]=u,e[2]=y,e[3]=a,e[4]=c,e[5]=m,e):(e[0]=o,e[1]=u,e[2]=a,e[3]=c,e)}function u3(e,t,i,r,n,s){const o=i?3:2,a=r&&s,u=i&&n;if(!t.length||!t[0].length)return null;let c,h,f,y,[m,g]=t[0],[v,b]=t[0];for(let w=0;w<t.length;w++){const T=t[w],[A,R]=T;if(m=Bl(m,A),g=Bl(g,R),v=Ul(v,A),b=Ul(b,R),u&&T.length>2){const M=T[2];c=Bl(c,M),h=Ul(h,M)}if(a&&T.length>o){const M=T[o];f=Bl(c,M),y=Ul(h,M)}}return n?(c=c||0,h=h||0,s?(f=f||0,y=y||0,e[0]=m,e[1]=g,e[2]=c,e[3]=f,e[4]=v,e[5]=b,e[6]=h,e[7]=y,e):(e[0]=m,e[1]=g,e[2]=c,e[3]=v,e[4]=b,e[5]=h,e)):s?(f=f||0,y=y||0,e[0]=m,e[1]=g,e[2]=f,e[3]=v,e[4]=b,e[5]=y,e):(e[0]=m,e[1]=g,e[2]=v,e[3]=b,e)}function ZK(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function JK(e){return e.points!==void 0}function XK(e){return e.x!==void 0&&e.y!==void 0}function QK(e){return e.paths!==void 0}function eZ(e){return e.rings!==void 0}const c3=[];function DL(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function LL(e,t,i,r,n,s){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:n,zmax:s}}function OL(e,t,i,r,n,s){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:n,mmax:s}}function kL(e,t,i,r,n,s,o,a){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function d3(e,t=!1,i=!1){return t?i?kL(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):LL(e[0],e[1],e[2],e[3],e[4],e[5]):i?OL(e[0],e[1],e[2],e[3],e[4],e[5]):DL(e[0],e[1],e[2],e[3])}function iTe(e){return e?ZK(e)?e:XK(e)?iZ(e):eZ(e)?FL(e):QK(e)?BL(e):JK(e)?tZ(e):null:null}function tZ(e){const{hasZ:t,hasM:i,points:r}=e;return d3(u3(c3,r,t,i),t,i)}function iZ(e){const{x:t,y:i,z:r,m:n}=e,s=n!=null;return r!=null?s?kL(t,i,r,n,t,i,r,n):LL(t,i,r,t,i,r):s?OL(t,i,n,t,i,n):DL(t,i,t,i)}function FL(e){const{hasZ:t,hasM:i,rings:r}=e,n=Zh(c3,r,t,i);return n?d3(n,t,i):null}function BL(e){const{hasZ:t,hasM:i,paths:r}=e,n=Zh(c3,r,t,i);return n?d3(n,t,i):null}var qg;function eN(e){return!Array.isArray(e[0])}let Fs=qg=class extends Ir{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,n=!1;for(const o of t)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const u=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(u)}if(n&&o.hasM){const u=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(u)}return a}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new qg(s)}normalizeCtorArgs(e,t){let i,r,n=null,s=null;return e&&!Array.isArray(e)?(n=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||we.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(i===void 0&&r===void 0?(i=s.length>2,r=s.length>3):i===void 0?i=r?s.length>3:s.length>2:r===void 0&&(r=i?s.length>3:s.length>2)),{rings:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=qK(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new he;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=FL(this);if(!t)return null;const i=new Ue(t);return i.spatialReference=e,i}get isSelfIntersecting(){return FW(this.rings)}writeRings(e,t){t.rings=$(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(eN(e)){const r=[];for(let n=0,s=e.length;n<s;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new qg;return e.spatialReference=this.spatialReference,e.rings=$(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(O(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(E(t)!==E(i)||E(t)&&E(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([n,s,o,a],[u,c,h,f])=>n===u&&s===c&&(o==null&&h==null||o===h)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!MA(s,o,r))return!1}return!0}contains(e){if(!e)return!1;const t=Kb(e,this.spatialReference);return z6(this,E(t)?t:e)}isClockwise(e){let t;return t=eN(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,l3(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new he(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new he(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new he(i[0],i[1],i[2],i[3],this.spatialReference):new he(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Kh(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new he(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new he(n,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Kh(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([d({readOnly:!0})],Fs.prototype,"cache",null),l([d({readOnly:!0})],Fs.prototype,"centroid",null),l([d({readOnly:!0})],Fs.prototype,"extent",null),l([d({readOnly:!0})],Fs.prototype,"isSelfIntersecting",null),l([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Fs.prototype,"rings",void 0),l([te("rings")],Fs.prototype,"writeRings",null),Fs=qg=l([S("esri.geometry.Polygon")],Fs),Fs.prototype.toJSON.isDefaultToJSON=!0;const Rr=Fs;var AS;function rZ(e){return!Array.isArray(e[0])}let Xa=AS=class extends Ir{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,n=null,s=null;return e&&!Array.isArray(e)?(n=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||we.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(i===void 0&&r===void 0?(i=s.length>2,r=!1):i===void 0?i=!r&&s.length>3:r===void 0&&(r=!i&&s.length>3)),{paths:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=BL(this);if(!t)return null;const i=new Ue(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=$(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(rZ(e)){const r=[];for(let n=0,s=e.length;n<s;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new AS;return e.spatialReference=this.spatialReference,e.paths=$(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new he(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new he(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new he(i[0],i[1],i[2],i[3],this.spatialReference):new he(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Kh(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new he(n,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new he(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Kh(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([d({readOnly:!0})],Xa.prototype,"cache",null),l([d({readOnly:!0})],Xa.prototype,"extent",null),l([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Xa.prototype,"paths",void 0),l([te("paths")],Xa.prototype,"writePaths",null),Xa=AS=l([S("esri.geometry.Polyline")],Xa),Xa.prototype.toJSON.isDefaultToJSON=!0;const ir=Xa,h3=Ai()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),tN=Ai()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function UL(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function p3(e){return e.points!==void 0}function f3(e){return e.x!==void 0&&e.y!==void 0}function y3(e){return e.paths!==void 0}function Dc(e){return e.rings!==void 0}function cr(e){return O(e)?null:e instanceof Ir?e:f3(e)?he.fromJSON(e):y3(e)?ir.fromJSON(e):Dc(e)?Rr.fromJSON(e):p3(e)?Tp.fromJSON(e):UL(e)?Ue.fromJSON(e):null}function Ep(e){return e?f3(e)?"esriGeometryPoint":y3(e)?"esriGeometryPolyline":Dc(e)?"esriGeometryPolygon":UL(e)?"esriGeometryEnvelope":p3(e)?"esriGeometryMultipoint":null:null}const nZ={esriGeometryPoint:he,esriGeometryPolyline:ir,esriGeometryPolygon:Rr,esriGeometryEnvelope:Ue,esriGeometryMultipoint:Tp};function VL(e){return e&&nZ[e]||null}const ad={base:Ir,key:"type",typeMap:{extent:Ue,multipoint:Tp,point:he,polyline:ir,polygon:Rr}};mo(ad);let sZ=0;const Xb=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+sZ++})}};return t=l([S("esri.core.Identifiable")],t),t};let iN=class extends Xb(class{}){};iN=l([S("esri.core.Identifiable")],iN);const oZ=W.getLogger("esri.layers.support.fromPortalItem");async function aZ(e){const t="portalItem"in e?e:{portalItem:e},i=await V(()=>import("./portalLayers.ee510417.js"),["portalLayers.ee510417.js","lazyLayerLoader.c07309e4.js","layersLoader.540e258b.js","portalItemUtils.a754404a.js"],import.meta.url);try{return await i.fromItem(t)}catch(r){const n=t&&t.portalItem,s=n&&n.id||"unset",o=n&&n.portal&&n.portal.url||De.portalUrl;throw oZ.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}let lZ=0,Xt=class extends Ma.EventedMixin(Xb(go)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ue(-180,-90,180,90,we.WGS84),this.id=Date.now().toString(16)+"-layer-"+lZ++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=we.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await V(()=>import("./arcgisLayers.2720651a.js"),["arcgisLayers.2720651a.js","lazyLayerLoader.c07309e4.js"],import.meta.url)).fromUrl(t)}static fromPortalItem(e){return aZ(e)}initialize(){this.when().catch(e=>{var t,i;lr(e)||W.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?ut(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ze(e,{query:{f:"json"},responseType:"json"})).data;throw new P("layer:no-attribution-data","Layer does not have attribution data")}};l([d({type:String})],Xt.prototype,"attributionDataUrl",void 0),l([d({type:Ue})],Xt.prototype,"fullExtent",void 0),l([d({readOnly:!0})],Xt.prototype,"hasAttributionData",null),l([d({type:String,clonable:!1})],Xt.prototype,"id",void 0),l([d({type:Boolean,nonNullable:!0})],Xt.prototype,"legendEnabled",void 0),l([d({type:["show","hide","hide-children"]})],Xt.prototype,"listMode",void 0),l([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Xt.prototype,"opacity",void 0),l([d({clonable:!1})],Xt.prototype,"parent",void 0),l([d({readOnly:!0})],Xt.prototype,"parsedUrl",null),l([d({type:Boolean})],Xt.prototype,"popupEnabled",void 0),l([d({type:Boolean})],Xt.prototype,"attributionVisible",void 0),l([d({type:we})],Xt.prototype,"spatialReference",void 0),l([d({type:String})],Xt.prototype,"title",void 0),l([d({readOnly:!0,json:{read:!1}})],Xt.prototype,"type",void 0),l([d()],Xt.prototype,"url",void 0),l([d({type:Boolean,nonNullable:!0})],Xt.prototype,"visible",void 0),Xt=l([S("esri.layers.Layer")],Xt);const Jh=Xt;function MS(e,t,i){let r,n;if(e)for(let s=0,o=e.length;s<o;s++){if(r=e.getItemAt(s),r[t]===i)return r;if((r==null?void 0:r.type)==="group"&&(n=MS(r.layers,t,i),n))return n}}const rN=W.getLogger("esri.support.LayersMixin"),uZ=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new me;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||rN.error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.layers.on("before-add",o=>r(o.item)),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Vc(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof Jh){const s=i;s.parent===this?this.reorder(s,r):n.add(s,r)}else Aa(i)?i.then(s=>{this.destroyed||this.add(s,r)}):rN.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;r=n.getNextIndex(r),i.slice().forEach(s=>{s.parent!==this?(n.add(s,r),r+=1):this.reorder(s,r)})}findLayerById(i){return MS(this.layers,"id",i)}findLayerByUid(i){return MS(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return l([d()],t.prototype,"layers",null),t=l([S("esri.support.LayersMixin")],t),t},jL="esri.support.TablesMixin",cZ=W.getLogger(jL);function CS(e,t,i){if(e)for(let r=0,n=e.length;r<n;r++){const s=e.getItemAt(r);if(s[t]===i)return s;if((s==null?void 0:s.type)==="group"){const o=CS(s.tables,t,i);if(o)return o}}}const dZ=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new me,this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&cZ.error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Vc(i,this._get("tables")))}findTableById(i){return CS(this.tables,"id",i)}findTableByUid(i){return CS(this.tables,"uid",i)}};return l([d()],t.prototype,"tables",null),t=l([S(jL)],t),t};let Bs=class extends dZ(uZ(Ma.EventedMixin(ce))){constructor(e){super(e),this.allLayers=new Yh({getCollections:()=>{var t,i,r;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=FK(this),this.basemap=null,this.editableLayers=new Yh({getCollections:()=>[this.allLayers],itemFilterFunction:DK}),this.ground=new xv,this._basemapCache=LK()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),OK(this._basemapCache),this._basemapCache=null}castBasemap(e){return kK(e,this._basemapCache)}castGround(e){const t=UK(e);return O(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};l([d({readOnly:!0,dependsOn:[]})],Bs.prototype,"allLayers",void 0),l([d({readOnly:!0})],Bs.prototype,"allTables",void 0),l([d({type:Tv})],Bs.prototype,"basemap",void 0),l([je("basemap")],Bs.prototype,"castBasemap",null),l([d({readOnly:!0})],Bs.prototype,"editableLayers",void 0),l([d({type:xv,nonNullable:!0})],Bs.prototype,"ground",void 0),l([je("ground")],Bs.prototype,"castGround",null),Bs=l([S("esri.Map")],Bs);const zL=Bs;var Xh;function hZ(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>r)return Xh.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return Xh.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Xh||(Xh={}));let p2;function Ta(){return p2||(p2=(async()=>{const e=await V(()=>import("./arcadeUtils.ae06eee0.js").then(t=>t.t),[],import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),p2}const rTe=(e,t,i)=>jm.create(e,t,i,null,["$feature"]),nTe=(e,t,i)=>jm.create(e,t,i,null,["$feature","$view"]),pZ=(e,t,i,r)=>jm.create(e,t,i,r,["$feature","$view"]);class jm{constructor(t,i,r,n,s,o,a,u){this.script=t,this.evaluate=s;const c=Array.isArray(a)?a:a.fields;this.fields=c,this._syntaxTree=n,this._arcade=i,this._arcadeDictionary=r,this._arcadeFeature=o,this._spatialReference=u,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,n,s,o){const{arcade:a,Feature:u,Dictionary:c}=await Ta(),h=we.fromJSON(i),f=a.parseScript(t,o),y=s.reduce((M,C)=>({...M,[C]:null}),{});let m=null;E(n)&&(m=new c(n),m.immutable=!0,y.$config=null);const g=a.scriptUsesGeometryEngine(f)&&a.enableGeometrySupport(),v=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),b=a.scriptIsAsync(f)&&a.enableAsyncSupport(),w={vars:y,spatialReference:h,useAsync:!!b},T=new c;T.immutable=!1,T.setField("scale",0);const A=a.compileScript(f,w),R=M=>("$view"in M&&M.$view&&(T.setField("scale",M.$view.scale),M.$view=T),m&&(M.$config=m),A({vars:M,spatialReference:h}));return await Promise.all([g,v,b]),new jm(t,a,c,f,R,new u,r,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const fZ=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],yZ=["field","normalizationField"];function Av(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(nN(fZ,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)nN(yZ,r,t)}}function nN(e,t,i){if(e)for(const r of e){const n=vp(r,t),s=n&&typeof n!="function"&&i.get(n);s&&Cr(r,s.name,t)}}function m3(e,t){if(e!=null&&(t==null?void 0:t.fields.length))if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const f2=new Set;function HL(e,t){return e&&t?(f2.clear(),om(f2,e,t),Array.from(f2).sort()):[]}function om(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of i)Rn(e,t,n);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const n of i)e.add(n)}}function Rn(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function sTe(e,t){return O(t)||O(e)?[]:t.includes("*")?e.fields.map(i=>i.name):t}async function dr(e,t,i){var s;if(!i)return;const{arcadeUtils:r}=await Ta(),n=r.extractFieldNames(i,(s=t==null?void 0:t.fields)==null?void 0:s.map(o=>o.name));for(const o of n)Rn(e,t,o)}async function GL(e,t,i){if(i&&i!=="1=1"){const r=(await V(()=>import("./WhereClause.36ec5599.js"),[],import.meta.url)).WhereClause.create(i,t);if(!r.isStandardized)throw new P("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});om(e,t,r.fieldNames)}}function mZ({displayField:e,fields:t}){return e||(t&&t.length?y2(t,"name-or-title")||y2(t,"unique-identifier")||y2(t,"type-or-category")||gZ(t):null)}function gZ(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function y2(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function oTe(e,t){if(!t)return;const i=vp("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function vZ(e,t,i){i.outStatistic.onStatisticValueExpression?dr(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}async function aTe(e,t,i){var n,s;if(!t||!i||!("fields"in i))return;const r=[];if((n=i.popupTemplate)!=null&&n.expressionInfos&&r.push(...i.popupTemplate.expressionInfos.map(o=>dr(e,t.fieldsIndex,o.expression))),Array.isArray((s=i.popupTemplate)==null?void 0:s.content)){const o=i.popupTemplate.content;for(const a of o)a.type==="expression"&&a.expressionInfo&&r.push(dr(e,t.fieldsIndex,a.expressionInfo.expression))}i.fields&&r.push(...i.fields.map(o=>vZ(e,t.fieldsIndex,o))),await Promise.all(r)}async function lTe(e,t,i){t&&(t.timeInfo&&E(i)&&i.timeExtent&&om(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&om(e,t.fieldsIndex,[t.floorInfo.floorField]),E(i)&&E(i.where)&&await GL(e,t.fieldsIndex,i.where))}async function uTe(e,t,i){t&&i&&await Promise.all(i.map(r=>bZ(e,t,r)))}async function bZ(e,t,i){t&&i&&(i.valueExpression?await dr(e,t.fieldsIndex,i.valueExpression):i.field&&Rn(e,t.fieldsIndex,i.field))}function cTe(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?HL(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function dTe(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(n=>wZ(e,r,n)))}async function wZ(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await dr(e,t,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Rn(e,t,o.slice(1,-1))})}await GL(e,t,n)}function _Z(e){const t=e.defaultValue;return t!==void 0&&YL(e,t)?t:e.nullable?null:void 0}function qL(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function SZ(e){return e===null||qL(e)}const g3="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function TZ(e){return e===null||g3(e)}function WL(e){return e!=null&&typeof e=="string"}function EZ(e){return e===null||WL(e)}function xZ(){return!0}function YL(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?TZ:g3;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?SZ:qL;break;case"string":case"esriFieldTypeString":i=e.nullable?EZ:WL;break;default:i=xZ}return arguments.length===1?i:i(t)}const AZ=["integer","small-integer","single","double"],MZ=new Set([...AZ,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function v3(e){return e!=null&&MZ.has(e.type)}function hTe(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var Mv,Cv;function pTe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function fTe(e,t){return e.nullable&&t===null?null:v3(e)&&!CZ(e.type,Number(t))?Mv.OUT_OF_RANGE:YL(e,t)?e.domain?hZ(e.domain,t):null:Cv.INVALID_TYPE}function CZ(e,t){const i=typeof e=="string"?KL(e):e;return!!i&&(i.isInteger?g3(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}function KL(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return IZ;case"esriFieldTypeInteger":case"integer":return NZ;case"esriFieldTypeSingle":case"single":return RZ;case"esriFieldTypeDouble":case"double":return PZ}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Mv||(Mv={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Cv||(Cv={}));const IZ={min:-32768,max:32767,isInteger:!0},NZ={min:-2147483648,max:2147483647,isInteger:!0},RZ={min:-34e37,max:12e37,isInteger:!1},PZ={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function yTe(e,t,i){switch(e){case Xh.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Xh.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Cv.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Mv.OUT_OF_RANGE:{const{min:r,max:n}=KL(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${n}`}}}function $Z(e,t){return!DZ(e,t,null)}function DZ(e,t,i){if(!t||!t.attributes||!e){if(E(i))for(const s of e)i.add(s);return!0}const r=t.attributes;let n=!1;for(const s of e)if(!(s in r)){if(n=!0,!E(i))break;i.add(s)}return n}function ZL(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let Wg=class extends j{constructor(e){super(e),this.type=null}};l([d({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],Wg.prototype,"type",void 0),Wg=l([S("esri.popup.content.Content")],Wg);const ld=Wg;var IS;let Au=IS=class extends ld{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new IS({description:this.description,displayType:this.displayType,title:this.title})}};l([d({type:String,json:{write:!0}})],Au.prototype,"description",void 0),l([d({type:["auto","preview","list"],json:{write:!0}})],Au.prototype,"displayType",void 0),l([d({type:String,json:{write:!0}})],Au.prototype,"title",void 0),l([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Au.prototype,"type",void 0),Au=IS=l([S("esri.popup.content.AttachmentsContent")],Au);const am=Au;var NS;let Mu=NS=class extends ld{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new NS({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?$(this.outFields):null})}};l([d()],Mu.prototype,"creator",void 0),l([d()],Mu.prototype,"destroyer",void 0),l([d()],Mu.prototype,"outFields",void 0),l([d({type:["custom"],readOnly:!0})],Mu.prototype,"type",void 0),Mu=NS=l([S("esri.popup.content.CustomContent")],Mu);const LZ=Mu;var RS;let Cd=RS=class extends j{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new RS({title:this.title,expression:this.expression})}};l([d({type:String,json:{write:!0}})],Cd.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],Cd.prototype,"expression",void 0),l([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Cd.prototype,"returnType",void 0),Cd=RS=l([S("esri.popup.ElementExpressionInfo")],Cd);const JL=Cd;var PS;let Cf=PS=class extends ld{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new PS({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};l([d({type:JL,json:{write:!0}})],Cf.prototype,"expressionInfo",void 0),l([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Cf.prototype,"type",void 0),Cf=PS=l([S("esri.popup.content.ExpressionContent")],Cf);const b3=Cf,lm=Ai()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});lm.toJSON.bind(lm);lm.fromJSON.bind(lm);const Ds={year:"numeric",month:"numeric",day:"numeric"},Kp={year:"numeric",month:"long",day:"numeric"},Zp={year:"numeric",month:"short",day:"numeric"},Jp={year:"numeric",month:"long",weekday:"long",day:"numeric"},yn={hour:"numeric",minute:"numeric"},jn={...yn,second:"numeric"},w3={"short-date":Ds,"short-date-short-time":{...Ds,...yn},"short-date-short-time-24":{...Ds,...yn,hour12:!1},"short-date-long-time":{...Ds,...jn},"short-date-long-time-24":{...Ds,...jn,hour12:!1},"short-date-le":Ds,"short-date-le-short-time":{...Ds,...yn},"short-date-le-short-time-24":{...Ds,...yn,hour12:!1},"short-date-le-long-time":{...Ds,...jn},"short-date-le-long-time-24":{...Ds,...jn,hour12:!1},"long-month-day-year":Kp,"long-month-day-year-short-time":{...Kp,...yn},"long-month-day-year-short-time-24":{...Kp,...yn,hour12:!1},"long-month-day-year-long-time":{...Kp,...jn},"long-month-day-year-long-time-24":{...Kp,...jn,hour12:!1},"day-short-month-year":Zp,"day-short-month-year-short-time":{...Zp,...yn},"day-short-month-year-short-time-24":{...Zp,...yn,hour12:!1},"day-short-month-year-long-time":{...Zp,...jn},"day-short-month-year-long-time-24":{...Zp,...jn,hour12:!1},"long-date":Jp,"long-date-short-time":{...Jp,...yn},"long-date-short-time-24":{...Jp,...yn,hour12:!1},"long-date-long-time":{...Jp,...jn},"long-date-long-time-24":{...Jp,...jn,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":yn,"long-time":jn},um=Ai()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});um.apiValues;um.toJSON.bind(um);um.fromJSON.bind(um);const OZ={ar:"ar-u-nu-latn-ca-gregory"};let Yg=new WeakMap,XL=w3["short-date-short-time"];function kZ(e){const t=e||XL;if(!Yg.has(t)){const i=Xr(),r=OZ[Xr()]||i;Yg.set(t,new Intl.DateTimeFormat(r,t))}return Yg.get(t)}function _3(e){return w3[e]||null}function bo(e,t){return kZ(t).format(e)}e3(()=>{Yg=new WeakMap,XL=w3["short-date-short-time"]});const FZ={ar:"ar-u-nu-latn"};let Kg=new WeakMap,QL={};function BZ(e){const t=e||QL;if(!Kg.has(t)){const i=Xr(),r=FZ[Xr()]||i;Kg.set(t,new Intl.NumberFormat(r,e))}return Kg.get(t)}function eO(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function ru(e,t){return e===-0&&(e=0),BZ(t).format(e)}e3(()=>{Kg=new WeakMap,QL={}});var $S;let Cu=$S=class extends j{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new $S({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?bo(e,{..._3(this.dateFormat),...this.dateTimeFormatOptions}):ru(e,eO(this))}formatRasterPixelValue(e){let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map(n=>this.format(Number(n))).join(i):e}};l([ye(lm)],Cu.prototype,"dateFormat",void 0),l([d({type:Object,json:{read:!1}})],Cu.prototype,"dateTimeFormatOptions",void 0),l([d({type:Boolean,json:{write:!0}})],Cu.prototype,"digitSeparator",void 0),l([d({type:st,json:{write:!0}})],Cu.prototype,"places",void 0),Cu=$S=l([S("esri.popup.support.FieldInfoFormat")],Cu);const hh=Cu;var DS;let Kn=DS=class extends j{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new DS({fieldName:this.fieldName,format:this.format?$(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};l([d({type:String,json:{write:!0}})],Kn.prototype,"fieldName",void 0),l([d({type:hh,json:{write:!0}})],Kn.prototype,"format",void 0),l([d({type:Boolean,json:{write:!0,default:!1}})],Kn.prototype,"isEditable",void 0),l([d({type:String,json:{write:!0}})],Kn.prototype,"label",void 0),l([ye(new xe({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Kn.prototype,"stringFieldOption",void 0),l([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Kn.prototype,"statisticType",void 0),l([d({type:String,json:{write:!0}})],Kn.prototype,"tooltip",void 0),l([d({type:Boolean,json:{write:!0}})],Kn.prototype,"visible",void 0),Kn=DS=l([S("esri.popup.FieldInfo")],Kn);const zm=Kn;var LS;let Vo=LS=class extends ld{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new LS($({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};l([d({type:Object,json:{write:!0}})],Vo.prototype,"attributes",void 0),l([d({type:String,json:{write:!0}})],Vo.prototype,"description",void 0),l([d({type:[zm]})],Vo.prototype,"fieldInfos",void 0),l([te("fieldInfos")],Vo.prototype,"writeFieldInfos",null),l([d({type:String,json:{write:!0}})],Vo.prototype,"title",void 0),l([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Vo.prototype,"type",void 0),Vo=LS=l([S("esri.popup.content.FieldsContent")],Vo);const Qh=Vo;let Iu=class extends j{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};l([d({type:String,json:{write:!0}})],Iu.prototype,"altText",void 0),l([d({type:String,json:{write:!0}})],Iu.prototype,"caption",void 0),l([d({type:String,json:{write:!0}})],Iu.prototype,"title",void 0),l([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Iu.prototype,"type",void 0),Iu=l([S("esri.popup.content.mixins.MediaInfo")],Iu);const S3=Iu;var OS;let Id=OS=class extends ce{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new OS({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};l([d()],Id.prototype,"fieldName",void 0),l([d()],Id.prototype,"tooltip",void 0),l([d()],Id.prototype,"value",void 0),Id=OS=l([S("esri.popup.content.support.ChartMediaInfoValueSeries")],Id);const tO=Id;var kS;let Nu=kS=class extends j{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new kS({fields:$(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};l([d({type:[String],json:{write:!0}})],Nu.prototype,"fields",void 0),l([d({type:String,json:{write:!0}})],Nu.prototype,"normalizeField",void 0),l([d({type:[tO],json:{read:!1}})],Nu.prototype,"series",void 0),l([d({type:String,json:{write:!0}})],Nu.prototype,"tooltipField",void 0),Nu=kS=l([S("esri.popup.content.support.ChartMediaInfoValue")],Nu);const UZ=Nu;let If=class extends S3{constructor(e){super(e),this.type=null,this.value=null}};l([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],If.prototype,"type",void 0),l([d({type:UZ,json:{write:!0}})],If.prototype,"value",void 0),If=l([S("esri.popup.content.mixins.ChartMediaInfo")],If);const Qb=If,ew=Ai()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var FS;let Zg=FS=class extends Qb{constructor(e){super(e),this.type="bar-chart"}clone(){return new FS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:ew.write}})],Zg.prototype,"type",void 0),Zg=FS=l([S("esri.popup.content.BarChartMediaInfo")],Zg);const iO=Zg;var BS;let Jg=BS=class extends Qb{constructor(e){super(e),this.type="column-chart"}clone(){return new BS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:ew.write}})],Jg.prototype,"type",void 0),Jg=BS=l([S("esri.popup.content.ColumnChartMediaInfo")],Jg);const rO=Jg;var US;let Nf=US=class extends j{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new US({linkURL:this.linkURL,sourceURL:this.sourceURL})}};l([d({type:String,json:{write:!0}})],Nf.prototype,"linkURL",void 0),l([d({type:String,json:{write:!0}})],Nf.prototype,"sourceURL",void 0),Nf=US=l([S("esri.popup.content.support.ImageMediaInfoValue")],Nf);const VZ=Nf;var VS;let Nd=VS=class extends S3{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new VS({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};l([d({type:Number,json:{write:!0}})],Nd.prototype,"refreshInterval",void 0),l([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Nd.prototype,"type",void 0),l([d({type:VZ,json:{write:!0}})],Nd.prototype,"value",void 0),Nd=VS=l([S("esri.popup.content.ImageMediaInfo")],Nd);const nO=Nd;var jS;let Xg=jS=class extends Qb{constructor(e){super(e),this.type="line-chart"}clone(){return new jS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:ew.write}})],Xg.prototype,"type",void 0),Xg=jS=l([S("esri.popup.content.LineChartMediaInfo")],Xg);const sO=Xg;var zS;let Qg=zS=class extends Qb{constructor(e){super(e),this.type="pie-chart"}clone(){return new zS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:ew.write}})],Qg.prototype,"type",void 0),Qg=zS=l([S("esri.popup.content.PieChartMediaInfo")],Qg);const oO=Qg,aO={base:S3,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":iO,"column-chart":rO,"line-chart":sO,"pie-chart":oO,image:nO}};var HS;let Zn=HS=class extends ld{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?nO.fromJSON(t):t.type==="barchart"?iO.fromJSON(t):t.type==="columnchart"?rO.fromJSON(t):t.type==="linechart"?sO.fromJSON(t):t.type==="piechart"?oO.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new HS($({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};l([d()],Zn.prototype,"activeMediaInfoIndex",void 0),l([d({type:Object,json:{write:!0}})],Zn.prototype,"attributes",void 0),l([d({type:String,json:{write:!0}})],Zn.prototype,"description",void 0),l([d({types:[aO]})],Zn.prototype,"mediaInfos",void 0),l([Z("mediaInfos")],Zn.prototype,"readMediaInfos",null),l([te("mediaInfos")],Zn.prototype,"writeMediaInfos",null),l([d({type:String,json:{write:!0}})],Zn.prototype,"title",void 0),l([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Zn.prototype,"type",void 0),Zn=HS=l([S("esri.popup.content.MediaContent")],Zn);const cm=Zn;var GS;let Rf=GS=class extends ld{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new GS({text:this.text})}};l([d({type:String,json:{write:!0}})],Rf.prototype,"text",void 0),l([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Rf.prototype,"type",void 0),Rf=GS=l([S("esri.popup.content.TextContent")],Rf);const ep=Rf,jZ={base:null,key:"type",typeMap:{attachment:am,media:cm,text:ep,expression:b3,field:Qh}};var qS;let Ru=qS=class extends j{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new qS({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([d({type:String,json:{write:!0}})],Ru.prototype,"name",void 0),l([d({type:String,json:{write:!0}})],Ru.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],Ru.prototype,"expression",void 0),l([d({type:["string","number"],json:{write:!0}})],Ru.prototype,"returnType",void 0),Ru=qS=l([S("esri.popup.ExpressionInfo")],Ru);const lO=Ru;var WS;let Pf=WS=class extends j{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new WS({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};l([d({type:Boolean,json:{write:!0}})],Pf.prototype,"returnTopmostRaster",void 0),l([d({type:Boolean,json:{write:!0}})],Pf.prototype,"showNoDataRecords",void 0),Pf=WS=l([S("esri.popup.LayerOptions")],Pf);const zZ=Pf;var YS;let $f=YS=class extends j{constructor(e){super(e),this.field=null,this.order=null}clone(){return new YS({field:this.field,order:this.order})}};l([d({type:String,json:{write:!0}})],$f.prototype,"field",void 0),l([d({type:["asc","desc"],json:{write:!0}})],$f.prototype,"order",void 0),$f=YS=l([S("esri.popup.support.RelatedRecordsInfoFieldOrder")],$f);const uO=$f;var KS;let Df=KS=class extends j{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new KS({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?$(this.orderByFields):null})}};l([d({type:Boolean,json:{write:!0}})],Df.prototype,"showRelatedRecords",void 0),l([d({type:[uO],json:{write:!0}})],Df.prototype,"orderByFields",void 0),Df=KS=l([S("esri.popup.RelatedRecordsInfo")],Df);const HZ=Df;var ZS;let Jn=ZS=class extends Xb(ce){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new ZS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};l([d()],Jn.prototype,"active",void 0),l([d()],Jn.prototype,"className",void 0),l([d()],Jn.prototype,"disabled",void 0),l([d()],Jn.prototype,"id",void 0),l([d()],Jn.prototype,"indicator",void 0),l([d()],Jn.prototype,"title",void 0),l([d()],Jn.prototype,"type",void 0),l([d()],Jn.prototype,"visible",void 0),Jn=ZS=l([S("esri.support.actions.ActionBase")],Jn);const tw=Jn;var JS;let e1=JS=class extends tw{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new JS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};l([d()],e1.prototype,"image",void 0),e1=JS=l([S("esri.support.Action.ActionButton")],e1);const xp=e1;var XS;let Lf=XS=class extends tw{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new XS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};l([d()],Lf.prototype,"image",void 0),l([d()],Lf.prototype,"value",void 0),Lf=XS=l([S("esri.support.Action.ActionToggle")],Lf);const cO=Lf;var QS;const GZ=me.ofType({key:"type",defaultKeyValue:"button",base:tw,typeMap:{button:xp,toggle:cO}}),qZ={base:ld,key:"type",typeMap:{media:cm,custom:LZ,text:ep,attachments:am,fields:Qh,expression:b3}},dO="esri.PopupTemplate",WZ=W.getLogger(dO),YZ=["attachments","fields","media","text","expression"];let jt=QS=class extends j{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>mo(qZ,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Aa(e)?e:(WZ.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,i,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(n=>YZ.includes(n.type)).map(n=>n&&n.toJSON(r)),t.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(t):n.type==="media"?this._writeMediaContent(n,t):n.type==="text"&&this._writeTextContent(n,t)})):t.description=e}writeFieldInfos(e,t,i,r){const{content:n}=this,s=Array.isArray(n)?n:null;if(e){const o=s?s.filter(u=>u.type==="fields"):[],a=o.length&&o.every(u=>{var c;return(c=u.fieldInfos)==null?void 0:c.length});t.fieldInfos=e.filter(Boolean).map(u=>{const c=u.toJSON(r);return a&&(c.visible=!1),c})}if(s)for(const o of s)o.type==="fields"&&this._writeFieldsContent(o,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?$(e.toArray()):[];return new QS({actions:t,content:Array.isArray(this.content)?$(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?$(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?$(this.fieldInfos):null,layerOptions:this.layerOptions?$(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?$(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?$(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),om(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=$(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const n=t.fieldInfos.find(s=>s.fieldName.toLowerCase()===r.fieldName.toLowerCase());n?n.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=$(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:i}){const r={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!t||r.mediaInfos||(n.mediaInfos=t,r.mediaInfos=!0),cm.fromJSON(n)):n.type==="text"?(n.text||!e||r.description||(n.text=e,r.description=!0),ep.fromJSON(n)):n.type==="attachments"?am.fromJSON(n):n.type==="fields"?Qh.fromJSON(n):n.type==="expression"?b3.fromJSON(n):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i}){const r=[];return e?r.push(new ep({text:e})):r.push(new Qh),Array.isArray(t)&&t.length&&r.push(cm.fromJSON({mediaInfos:t})),i&&r.push(am.fromJSON({displayType:"auto"})),r.length?r:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((r,n)=>[...r,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,n=r||{},{fields:s=[],normalizeField:o,tooltipField:a,sourceURL:u,linkURL:c}=n,h=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(u),...this._extractFieldNames(c),...s];return o&&h.push(o),a&&h.push(a),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>dr(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.includes("relationships/")&&!t.includes("expression/")):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,n=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const r=/\{(\w+):.+\}/,n=i.filter(s=>!(s.indexOf("{relationships/")===0||s.indexOf("{expression/")===0)).map(s=>s.replace(r,"{$1}"));return n?n.map(s=>s.slice(1,-1)):[]}};l([d({type:GZ})],jt.prototype,"actions",void 0),l([d()],jt.prototype,"content",void 0),l([je("content")],jt.prototype,"castContent",null),l([Z("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],jt.prototype,"readContent",null),l([te("content",{popupElements:{type:me.ofType(jZ)},showAttachments:{type:Boolean},mediaInfos:{type:me.ofType(aO)},description:{type:String}})],jt.prototype,"writeContent",null),l([d({type:[lO],json:{write:!0}})],jt.prototype,"expressionInfos",void 0),l([d({type:[zm]})],jt.prototype,"fieldInfos",void 0),l([te("fieldInfos")],jt.prototype,"writeFieldInfos",null),l([d({type:zZ})],jt.prototype,"layerOptions",void 0),l([te("layerOptions")],jt.prototype,"writeLayerOptions",null),l([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],jt.prototype,"lastEditInfoEnabled",void 0),l([d()],jt.prototype,"outFields",void 0),l([d()],jt.prototype,"overwriteActions",void 0),l([d()],jt.prototype,"returnGeometry",void 0),l([d({json:{type:String}})],jt.prototype,"title",void 0),l([te("title")],jt.prototype,"writeTitle",null),l([d({type:HZ,json:{write:!0}})],jt.prototype,"relatedRecordsInfo",void 0),jt=QS=l([S(dO)],jt);const cu=jt,sN=new xe({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let KZ=0,Rd=class extends j{constructor(e){super(e),this.id="sym"+KZ++,this.type=null,this.color=new se([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};l([d({type:sN.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:sN.write}}})],Rd.prototype,"type",void 0),l([d({type:se,json:{write:{allowNull:!0}}})],Rd.prototype,"color",void 0),l([Z("color")],Rd.prototype,"readColor",null),Rd=l([S("esri.symbols.Symbol")],Rd);const $r=Rd;var eT;let Qa=eT=class extends $r{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(n=>{const s=n.valueExpressionInfo;return dr(e,t,s.expression)});await Promise.all(r)}}}clone(){return new eT({data:$(this.data)})}hash(){return NA(JSON.stringify(this.data)).toString()}};l([d({json:{write:!1}})],Qa.prototype,"color",void 0),l([d({json:{write:!0}})],Qa.prototype,"data",void 0),l([Z("data",["symbol"])],Qa.prototype,"readData",null),l([te("data",{})],Qa.prototype,"writeData",null),l([ye({CIMSymbolReference:"cim"},{readOnly:!0})],Qa.prototype,"type",void 0),Qa=eT=l([S("esri.symbols.CIMSymbol")],Qa);const Hm=Qa;let Pd=class extends j{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};l([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Pd.prototype,"enabled",void 0),l([te("enabled")],Pd.prototype,"writeEnabled",null),l([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Pd.prototype,"type",void 0),Pd=l([S("esri.symbols.Symbol3DLayer")],Pd);const xo=Pd,ZZ=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,JZ="screenUtils.toPt: input not recognized!",hO=96;function pO(e){return e?e/72*hO:0}function wo(e){return e?72*e/hO:0}function qe(e){if(typeof e=="string"){const t=e.match(ZZ);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=r==="px"?wo(i):i;return n?-s:s}return console.warn(JZ),null}return e}function Ar(e=0,t=0){return{x:e,y:t}}function mTe(e=0,t=0){return[e,t]}function XZ(e,t){const i=t.transparency!=null?rm(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new se([r[0]||0,r[1]||0,r[2]||0,i]):null}function QZ(e,t){t.color=e.toJSON().slice(0,3);const i=Jb(e.a);i!==0&&(t.transparency=i)}const du={type:se,json:{type:[st],default:null,read:{source:["color","transparency"],reader:XZ},write:{target:{color:{type:[st]},transparency:{type:st}},writer:QZ}}},_o={type:Number,cast:qe,json:{write:!0}};let Pu=class extends j{constructor(e){super(e),this.color=new se([0,0,0,1]),this.extensionLength=0,this.size=wo(1)}clone(){}cloneProperties(){return{color:$(this.color),size:this.size,extensionLength:this.extensionLength}}};l([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Pu.prototype,"type",void 0),l([d(du)],Pu.prototype,"color",void 0),l([d({..._o,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Pu.prototype,"extensionLength",void 0),l([d(_o)],Pu.prototype,"size",void 0),Pu=l([S("esri.symbols.edges.Edges3D")],Pu);const T3=Pu;var tT;let t1=tT=class extends T3{constructor(e){super(e),this.type="sketch"}clone(){return new tT(this.cloneProperties())}};l([ye({sketch:"sketch"},{readOnly:!0})],t1.prototype,"type",void 0),t1=tT=l([S("esri.symbols.edges.SketchEdges3D")],t1);const eJ=t1;var iT;let i1=iT=class extends T3{constructor(e){super(e),this.type="solid"}clone(){return new iT(this.cloneProperties())}};l([ye({solid:"solid"},{readOnly:!0})],i1.prototype,"type",void 0),i1=iT=l([S("esri.symbols.support.SolidEdges3D")],i1);const tJ=i1,fO={types:{key:"type",base:T3,typeMap:{solid:tJ,sketch:eJ}},json:{write:!0}};var rT;let Qr=rT=class extends j{constructor(e){super(e),this.color=null}clone(){const e={color:E(this.color)?this.color.clone():null};return new rT(e)}};l([d(du)],Qr.prototype,"color",void 0),Qr=rT=l([S("esri.symbols.support.Symbol3DMaterial")],Qr);var nT;let el=nT=class extends xo{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new nT({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:E(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};l([ye({Extrude:"extrude"},{readOnly:!0})],el.prototype,"type",void 0),l([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],el.prototype,"size",void 0),l([d({type:Qr,json:{write:!0}})],el.prototype,"material",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],el.prototype,"castShadows",void 0),l([d(fO)],el.prototype,"edges",void 0),el=nT=l([S("esri.symbols.ExtrudeSymbol3DLayer")],el);const yO=el;let Of=class extends $r{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};l([ye({esriSLS:"simple-line"},{readOnly:!0})],Of.prototype,"type",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],Of.prototype,"width",void 0),Of=l([S("esri.symbols.LineSymbol")],Of);const iJ=Of,rJ=["begin","end","begin-end"],mO=["arrow","circle","square","diamond","cross","x"];var sT;let Us=sT=class extends j{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new sT({color:$(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};l([d({type:["begin","end","begin-end"],json:{write:!0}})],Us.prototype,"placement",void 0),l([ye({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],Us.prototype,"type",void 0),l([d({type:mO})],Us.prototype,"style",void 0),l([te("style")],Us.prototype,"writeStyle",null),l([d({type:se,value:null,json:{write:{allowNull:!0}}})],Us.prototype,"color",null),l([Z("color")],Us.prototype,"readColor",null),l([te("color")],Us.prototype,"writeColor",null),Us=sT=l([S("esri.symbols.LineSymbolMarker")],Us);const nJ=Us;var oT;const m2=new xe({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let jo=oT=class extends iJ{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),i!=null&&(o.width=qe(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=qe(s)),o}clone(){var e;return new oT({color:$(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};l([ye({esriSLS:"simple-line"},{readOnly:!0})],jo.prototype,"type",void 0),l([d({type:m2.apiValues,json:{read:m2.read,write:m2.write}})],jo.prototype,"style",void 0),l([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],jo.prototype,"cap",void 0),l([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],jo.prototype,"join",void 0),l([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":nJ}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],jo.prototype,"marker",void 0),l([d({type:Number,json:{read:!1,write:!1}})],jo.prototype,"miterLimit",void 0),jo=oT=l([S("esri.symbols.SimpleLineSymbol")],jo);const sn=jo;let kf=class extends $r{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};l([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":sn}},json:{default:null,write:!0}})],kf.prototype,"outline",void 0),l([d({type:["simple-fill","picture-fill"],readOnly:!0})],kf.prototype,"type",void 0),kf=l([S("esri.symbols.FillSymbol")],kf);const gO=kf;let r1=class extends j{constructor(e){super(e)}clone(){}};l([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],r1.prototype,"type",void 0),r1=l([S("esri.symbols.patterns.LinePattern3D")],r1);const vO=r1,sJ=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var aT;const oJ=Ai()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Ff=aT=class extends vO{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new aT(e)}};l([d({type:["style"]})],Ff.prototype,"type",void 0),l([ye(oJ),d({type:sJ})],Ff.prototype,"style",void 0),Ff=aT=l([S("esri.symbols.patterns.LineStylePattern3D")],Ff);const E3=Ff;let n1=class extends j{constructor(e){super(e)}clone(){}};l([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],n1.prototype,"type",void 0),n1=l([S("esri.symbols.patterns.Pattern3D")],n1);const bO=n1,aJ=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var lT;let Bf=lT=class extends bO{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new lT(e)}};l([d({type:["style"]})],Bf.prototype,"type",void 0),l([d({type:aJ,json:{read:!0,write:!0}})],Bf.prototype,"style",void 0),Bf=lT=l([S("esri.symbols.patterns.StylePattern3D")],Bf);const wO=Bf,lJ={types:{key:"type",base:bO,typeMap:{style:wO}},json:{write:!0}},_O={types:{key:"type",base:vO,typeMap:{style:E3}},json:{write:!0}},Cy=new se("white");new se("black");const uJ=new se([255,255,255,0]);function cJ(e){return e.r===0&&e.g===0&&e.b===0}var uT;let Iy=uT=class extends Qr{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:E(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new uT(e)}};l([ye({multiply:"multiply",replace:"replace",tint:"tint"})],Iy.prototype,"colorMixMode",void 0),Iy=uT=l([S("esri.symbols.support.Symbol3DFillMaterial")],Iy);function nu(e=yJ){return[e[0],e[1],e[2],e[3]]}function gTe(e){return[e[0],e[1],e[2],e[3]]}function dJ(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function vTe(e,t,i,r,n=nu()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function bTe(e,t=nu()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function wTe(e,t){return new Ue({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function _Te(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function hJ(e){return O(e)||e[0]>=e[2]?0:e[2]-e[0]}function pJ(e){return e[1]>=e[3]?0:e[3]-e[1]}function STe(e){return hJ(e)*pJ(e)}function TTe(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function ETe(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function xTe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function fJ(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function ATe(e){return e?dJ(e,oN):nu(oN)}const oN=[1/0,1/0,-1/0,-1/0],yJ=[0,0,0,0];function x3(e=wJ){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function A3(e,t,i,r,n,s,o=x3()){return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function MTe(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Ue(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function CTe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function ITe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function mJ(e){return e[0]>=e[3]?0:e[3]-e[0]}function gJ(e){return e[1]>=e[4]?0:e[4]-e[1]}function vJ(e){return e[2]>=e[5]?0:e[5]-e[2]}function NTe(e,t=[0,0,0]){return t[0]=mJ(e),t[1]=gJ(e),t[2]=vJ(e),t}function RTe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function PTe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function bJ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function $Te(e){return e?bJ(e,lN):x3(lN)}function DTe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function aN(e){return e.length===6}function LTe(e,t,i){if(O(e)||O(t))return e===t;if(!aN(e)||!aN(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const lN=[1/0,1/0,1/0,-1/0,-1/0,-1/0],wJ=[0,0,0,0,0,0];x3();function OTe(e,{isPrimitive:t,width:i,depth:r,height:n}){const s=t?10:1;if(i==null&&n==null&&r==null)return[s*e[0],s*e[1],s*e[2]];const o=Sp(i,r,n);let a;for(let u=0;u<3;u++){const c=o[u];if(c!=null){a=c/e[u];break}}for(let u=0;u<3;u++)o[u]==null&&(o[u]=e[u]*a);return o}const _J=A3(-.5,-.5,-.5,.5,.5,.5),SJ=A3(-.5,-.5,0,.5,.5,1),TJ=A3(-.5,-.5,0,.5,.5,.5);function kTe(e){switch(e){case"sphere":case"cube":case"diamond":return _J;case"cylinder":case"cone":case"inverted-cone":return SJ;case"tetrahedron":return TJ;default:return}}const M3=["butt","square","round"],EJ=[...M3,"none"],SO=["miter","bevel","round"];var cT;let $u=cT=class extends j{constructor(e){super(e),this.color=new se([0,0,0,1]),this.size=wo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:E(this.color)?this.color.clone():null,size:this.size,pattern:E(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new cT(e)}};l([d(du)],$u.prototype,"color",void 0),l([d(_o)],$u.prototype,"size",void 0),l([d(_O)],$u.prototype,"pattern",void 0),l([d({type:M3,json:{default:"butt",write:{overridePolicy(){return{enabled:E(this.pattern)}}}}})],$u.prototype,"patternCap",void 0),$u=cT=l([S("esri.symbols.support.Symbol3DOutline")],$u);var s1;let zo=s1=class extends xo{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:E(this.edges)?this.edges.clone():null,enabled:this.enabled,material:E(this.material)?this.material.clone():null,pattern:E(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:E(this.outline)?this.outline.clone():null};return new s1(e)}static fromSimpleFillSymbol(e){var r,n,s,o,a,u;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new E3({style:e.outline.style}):null,i={size:(n=(r=e.outline)==null?void 0:r.width)!=null?n:0,color:((o=(s=e.outline)==null?void 0:s.color)!=null?o:Cy).clone(),pattern:t};return t&&((a=e.outline)==null?void 0:a.cap)&&(i.patternCap=e.outline.cap),new s1({material:new Iy({color:((u=e.color)!=null?u:uJ).clone()}),pattern:e.style&&e.style!=="solid"?new wO({style:e.style}):null,outline:i})}};l([ye({Fill:"fill"},{readOnly:!0})],zo.prototype,"type",void 0),l([d({type:Iy,json:{write:!0}})],zo.prototype,"material",void 0),l([d(lJ)],zo.prototype,"pattern",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],zo.prototype,"castShadows",void 0),l([d({type:$u,json:{write:!0}})],zo.prototype,"outline",void 0),l([d(fO)],zo.prototype,"edges",void 0),zo=s1=l([S("esri.symbols.FillSymbol3DLayer")],zo);const iw=zo,xJ=["none","underline","line-through"],AJ=["normal","italic","oblique"],MJ=["normal","lighter","bold","bolder"],TO={type:Number,cast:e=>{const t=xn(e);return t===0?1:Nr(t,.1,4)},nonNullable:!0},CJ=["left","right","center"],IJ=["baseline","top","middle","bottom"],EO={type:CJ,nonNullable:!0},xO={type:IJ,nonNullable:!0};var dT;let Ho=dT=class extends j{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return qe(e)}clone(){return new dT({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};l([d({type:xJ,json:{default:"none",write:!0}})],Ho.prototype,"decoration",void 0),l([d({type:String,json:{write:!0}})],Ho.prototype,"family",void 0),l([d({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],Ho.prototype,"size",void 0),l([je("size")],Ho.prototype,"castSize",null),l([d({type:AJ,json:{default:"normal",write:!0}})],Ho.prototype,"style",void 0),l([d({type:MJ,json:{default:"normal",write:!0}})],Ho.prototype,"weight",void 0),Ho=dT=l([S("esri.symbols.Font")],Ho);const rw=Ho;function Ap(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=ws(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=WA(e,t.portalItem.itemUrl);RJ.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return hT(e,t&&t.portal)}function Gm(e,t,i=dm.YES){if(!e)return e;!nr(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=ws(e);if(t){const n=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(n){const s=hT(n,t.portal);r=WA(hT(r,t.portal),s,s),r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=I3(r,t&&t.portal),nr(r)&&(r=Jr(r)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!nr(r)&&!od(r)&&i===dm.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function C3(e,t,i){return Ap(e,i)}function Kc(e,t,i,r){const n=Gm(e,r);n!==void 0&&(t[i]=n)}const NJ=/\/items\/([^\/]+)\/resources\//,RJ=/^\.\/resources\//;function PJ(e){const t=E(e)?e.match(NJ):null;return E(t)?t[1]:null}function I3(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?cS(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function hT(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=HA();return tm(r,`${r.scheme}://${i}`)?cS(e,t.portalHostname,i):cS(e,i,t.portalHostname)}var dm;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(dm||(dm={}));const FTe=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:Ap,toJSON:Gm,read:C3,write:Kc,itemIdFromResourceUrl:PJ,ensureMainOnlineDomain:I3,get MarkKeep(){return dm}},Symbol.toStringTag,{value:"Module"}));var pT;const $J=Ai()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Du=pT=class extends j{constructor(e){super(e)}readHref(e,t,i){return e?Ap(e,i):t.dataURI}writeHref(e,t,i,r){e&&(od(e)?t.dataURI=e:(t.href=Gm(e,r),nr(t.href)&&(t.href=Jr(t.href))))}clone(){return new pT({href:this.href,primitive:this.primitive})}};l([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Du.prototype,"href",void 0),l([Z("href")],Du.prototype,"readHref",null),l([te("href",{href:{type:String},dataURI:{type:String}})],Du.prototype,"writeHref",null),l([ye($J)],Du.prototype,"primitive",void 0),Du=pT=l([S("esri.symbols.support.IconSymbol3DLayerResource")],Du);var fT;let ph=fT=class extends ce{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new fT({x:this.x,y:this.y})}};l([d({type:Number})],ph.prototype,"x",void 0),l([d({type:Number})],ph.prototype,"y",void 0),ph=fT=l([S("esri.symbols.support.Symbol3DAnchorPosition2D")],ph);var yT;let Uf=yT=class extends j{constructor(e){super(e),this.color=new se([0,0,0,1]),this.size=wo(1)}clone(){const e={color:E(this.color)?this.color.clone():null,size:this.size};return new yT(e)}};l([d(du)],Uf.prototype,"color",void 0),l([d(_o)],Uf.prototype,"size",void 0),Uf=yT=l([S("esri.symbols.support.Symbol3DIconOutline")],Uf);var $d;const DJ=W.getLogger("esri.symbols.IconSymbol3DLayer");let Vs=$d=class extends xo{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new $d({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:E(this.material)?this.material.clone():null,outline:E(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Cy,i=uN(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Cy).clone()}:null;return new $d({size:e.size,resource:{primitive:OJ(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||cJ(e.color)?Cy:e.color,i=uN(e);return new $d({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new $d({resource:{href:R6({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function uN(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=cN(e.xoffset),n=cN(e.yoffset);return(r||n)&&t&&i?{x:-r/t,y:n/i}:null}function cN(e){return isFinite(e)?e:0}l([d({type:Qr,json:{write:!0}})],Vs.prototype,"material",void 0),l([d({type:Du,json:{write:!0}})],Vs.prototype,"resource",void 0),l([ye({Icon:"icon"},{readOnly:!0})],Vs.prototype,"type",void 0),l([d(_o)],Vs.prototype,"size",void 0),l([ye({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],Vs.prototype,"anchor",void 0),l([d({type:ph,json:{type:[Number],read:{reader:e=>new ph({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Vs.prototype,"anchorPosition",void 0),l([d({type:Uf,json:{write:!0}})],Vs.prototype,"outline",void 0),Vs=$d=l([S("esri.symbols.IconSymbol3DLayer")],Vs);const LJ={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function OJ(e){return LJ[e]||(DJ.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const vc=Vs;W.getLogger("esri.core.Clonable");const Dr=e=>{let t=class extends e{clone(){var u;const i=nH(Vi(this),"unable to clone instance of non-accessor class"),r=i.metadatas,n=i.store,s={},o=new Map;for(const c in r){const h=r[c],f=n==null?void 0:n.originOf(c),y=h.clonable;if(h.readOnly||y===!1||f!==Fe.USER&&f!==Fe.DEFAULTS&&f!==Fe.WEB_MAP&&f!==Fe.WEB_SCENE)continue;const m=this[c];let g=null;g=typeof y=="function"?y(m):y==="reference"?m:G_(m),m!=null&&g==null||(f===Fe.DEFAULTS?o.set(c,g):s[c]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(u=Vi(a))==null?void 0:u.store;if(c)for(const[h,f]of o)c.set(h,f,Fe.DEFAULTS)}return a}};return t=l([S("esri.core.Clonable")],t),t};let dN=class extends Dr(ce){};dN=l([S("esri.core.Clonable")],dN);let Lu=class extends Dr(j){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return E(e)&&e.placement===this.placement&&e.style===this.style&&(O(this.color)&&O(e.color)||E(this.color)&&E(e.color)&&this.color.toJSON()===e.color.toJSON())}};l([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Lu.prototype,"type",void 0),l([d({type:rJ,json:{default:"begin-end",write:!0}})],Lu.prototype,"placement",void 0),l([d({type:mO,json:{default:"arrow",write:!0}})],Lu.prototype,"style",void 0),l([d({type:se,json:{type:[st],default:null,write:!0}})],Lu.prototype,"color",void 0),Lu=l([S("esri.symbols.LineStyleMarker3D")],Lu);const mT=Lu;var o1;let js=o1=class extends xo{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=wo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:E(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:E(this.pattern)?this.pattern.clone():null,marker:E(this.marker)?this.marker.clone():null};return new o1(e)}static fromSimpleLineSymbol(e){var i,r,n;const t={enabled:!0,size:(i=e.width)!=null?i:wo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new E3({style:e.style}):null,material:new Qr({color:(e.color||Cy).clone()}),marker:e.marker?new mT({placement:e.marker.placement,style:e.marker.style,color:(n=(r=e.marker.color)==null?void 0:r.clone())!=null?n:null}):null};return new o1(t)}};l([d({type:Qr,json:{write:!0}})],js.prototype,"material",void 0),l([ye({Line:"line"},{readOnly:!0})],js.prototype,"type",void 0),l([d({type:SO,json:{write:!0,default:"miter"}})],js.prototype,"join",void 0),l([d({type:M3,json:{write:!0,default:"butt"}})],js.prototype,"cap",void 0),l([d(_o)],js.prototype,"size",void 0),l([d(_O)],js.prototype,"pattern",void 0),l([d({types:{key:"type",base:mT,typeMap:{style:mT}},json:{write:!0}})],js.prototype,"marker",void 0),js=o1=l([S("esri.symbols.LineSymbol3DLayer")],js);const qm=js;var gT;const kJ=Ai()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Vf=gT=class extends j{clone(){return new gT({href:this.href,primitive:this.primitive})}};l([d({type:String,json:{read:C3,write:Kc}})],Vf.prototype,"href",void 0),l([ye(kJ)],Vf.prototype,"primitive",void 0),Vf=gT=l([S("esri.symbols.support.ObjectSymbol3DLayerResource")],Vf);var vT;let sc=vT=class extends ce{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new vT({x:this.x,y:this.y,z:this.z})}};l([d({type:Number})],sc.prototype,"x",void 0),l([d({type:Number})],sc.prototype,"y",void 0),l([d({type:Number})],sc.prototype,"z",void 0),sc=vT=l([S("esri.symbols.support.Symbol3DAnchorPosition3D")],sc);var bT;let Ni=bT=class extends xo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new bT({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:E(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};l([d({type:Qr,json:{write:!0}})],Ni.prototype,"material",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ni.prototype,"castShadows",void 0),l([d({type:Vf,json:{write:!0}})],Ni.prototype,"resource",void 0),l([ye({Object:"object"},{readOnly:!0})],Ni.prototype,"type",void 0),l([d({type:Number,json:{write:!0}})],Ni.prototype,"width",void 0),l([d({type:Number,json:{write:!0}})],Ni.prototype,"height",void 0),l([d({type:Number,json:{write:!0}})],Ni.prototype,"depth",void 0),l([ye({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],Ni.prototype,"anchor",void 0),l([d({type:sc,json:{type:[Number],read:{reader:e=>new sc({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ni.prototype,"anchorPosition",void 0),l([d({type:Number,json:{write:!0}})],Ni.prototype,"heading",void 0),l([d({type:Number,json:{write:!0}})],Ni.prototype,"tilt",void 0),l([d({type:Number,json:{write:!0}})],Ni.prototype,"roll",void 0),l([d({readOnly:!0})],Ni.prototype,"isPrimitive",null),Ni=bT=l([S("esri.symbols.ObjectSymbol3DLayer")],Ni);const N3=Ni;var wT;let qi=wT=class extends xo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new wT({enabled:this.enabled,material:E(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};l([d({type:Qr,json:{write:!0}})],qi.prototype,"material",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qi.prototype,"castShadows",void 0),l([ye({Path:"path"},{readOnly:!0})],qi.prototype,"type",void 0),l([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],qi.prototype,"profile",void 0),l([d({type:SO,json:{write:!0,default:"miter"}})],qi.prototype,"join",void 0),l([d({type:EJ,json:{write:!0,default:"butt"}})],qi.prototype,"cap",void 0),l([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],qi.prototype,"width",void 0),l([Z("width",["width","size","height"])],qi.prototype,"readWidth",null),l([d({type:Number,json:{write:!0}})],qi.prototype,"height",void 0),l([Z("height",["height","size","width"])],qi.prototype,"readHeight",null),l([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],qi.prototype,"anchor",void 0),l([d({type:["heading","all"],json:{write:!0,default:"all"}})],qi.prototype,"profileRotation",void 0),qi=wT=l([S("esri.symbols.PathSymbol3DLayer")],qi);const R3=qi;var _T;let fh=_T=class extends j{constructor(){super(...arguments),this.color=new se([0,0,0,1]),this.size=0}clone(){const e={color:$(this.color),size:this.size};return new _T(e)}};l([d(du)],fh.prototype,"color",void 0),l([d(_o)],fh.prototype,"size",void 0),fh=_T=l([S("esri.symbols.support.Symbol3DHalo")],fh);let Ny=class extends Dr(j){constructor(e){super(e),this.color=null}};l([d(du)],Ny.prototype,"color",void 0),Ny=l([S("esri.symbols.support.Symbol3DTextBackground")],Ny);var a1;let pr=a1=class extends xo{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){E(e)&&E(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const n={...r,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return E(this._userSize)?this._userSize:E(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,E(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new a1({enabled:this.enabled,font:this.font&&$(this.font),halo:this.halo&&$(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:E(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:$(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new a1({font:E(e.font)?e.font.clone():new rw,halo:FJ(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Qr({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Ny({color:e.backgroundColor.clone()}):null})}};function FJ(e,t){return e&&t>0?new fh({color:$(e),size:t}):null}l([d({type:rw,json:{write:!0}})],pr.prototype,"font",null),l([te("font")],pr.prototype,"writeFont",null),l([d({type:fh,json:{write:!0}})],pr.prototype,"halo",void 0),l([d({...EO,json:{default:"center",write:!0}})],pr.prototype,"horizontalAlignment",void 0),l([d({...TO,json:{default:1,write:!0}})],pr.prototype,"lineHeight",void 0),l([d({type:Qr,json:{write:!0}})],pr.prototype,"material",void 0),l([d({type:Ny,json:{write:!0}})],pr.prototype,"background",void 0),l([d(_o)],pr.prototype,"size",null),l([d({type:String,json:{write:!0}})],pr.prototype,"text",void 0),l([ye({Text:"text"},{readOnly:!0})],pr.prototype,"type",void 0),l([d({...xO,json:{default:"baseline",write:!0}})],pr.prototype,"verticalAlignment",void 0),pr=a1=l([S("esri.symbols.TextSymbol3DLayer")],pr);const Mp=pr;var ST;let tl=ST=class extends xo{constructor(e){super(e),this.color=TT.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new ST({color:$(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};l([d({type:se,nonNullable:!0,json:{type:[st],write:(e,t,i)=>t[i]=e.toArray(se.AlphaMode.UNLESS_OPAQUE),default:()=>TT.clone(),defaultEquals:e=>e.toCss(!0)===TT.toCss(!0)}})],tl.prototype,"color",void 0),l([ye({Water:"water"},{readOnly:!0})],tl.prototype,"type",void 0),l([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],tl.prototype,"waterbodySize",void 0),l([d({type:Number,json:{write:!0,default:null}})],tl.prototype,"waveDirection",void 0),l([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],tl.prototype,"waveStrength",void 0),tl=ST=l([S("esri.symbols.WaterSymbol3DLayer")],tl);const TT=new se([0,119,190]),AO=tl;var ET;let Ou=ET=class extends ce{constructor(){super(...arguments),this.portal=null}clone(){return new ET({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};l([d({type:String})],Ou.prototype,"name",void 0),l([d({type:String})],Ou.prototype,"styleUrl",void 0),l([d({type:String})],Ou.prototype,"styleName",void 0),l([d({type:ri})],Ou.prototype,"portal",void 0),Ou=ET=l([S("esri.symbols.support.StyleOrigin")],Ou);const xT=Ou;var AT;let Ry=AT=class extends ce{clone(){return new AT({url:this.url})}};l([d({type:String})],Ry.prototype,"url",void 0),Ry=AT=l([S("esri.symbols.support.Thumbnail")],Ry);const MO={icon:vc,object:N3,line:qm,path:R3,fill:iw,extrude:yO,text:Mp,water:AO},BJ=me.ofType({base:xo,key:"type",typeMap:MO,errorContext:"symbol-layer"}),UJ=W.getLogger("esri.symbols.Symbol3D");let zs=class extends $r{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||me;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.initialized&&UJ.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Vc(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const r=Ap(e.styleUrl,i);return new xT({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new xT({portal:i&&i.portal||ri.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new ur("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let n=Gm(e.styleUrl,r);nr(n)&&(n=Jr(n)),t.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!C6(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new ur("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof xo||e&&MO[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};l([d({json:{read:!1,write:!1}})],zs.prototype,"color",null),l([d({type:BJ,nonNullable:!0,json:{write:!0}}),je(y6)],zs.prototype,"symbolLayers",null),l([d({type:xT})],zs.prototype,"styleOrigin",void 0),l([Z("styleOrigin")],zs.prototype,"readStyleOrigin",null),l([te("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],zs.prototype,"writeStyleOrigin",null),l([d({type:Ry,json:{read:!1}})],zs.prototype,"thumbnail",void 0),l([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],zs.prototype,"type",void 0),zs=l([S("esri.symbols.Symbol3D")],zs);const Cp=zs;let jf=class extends j{constructor(e){super(e),this.visible=!0}clone(){}};l([d({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],jf.prototype,"type",void 0),l([d({readOnly:!0})],jf.prototype,"visible",void 0),jf=l([S("esri.symbols.callouts.Callout3D")],jf);const CO=jf;var MT;let l1=MT=class extends j{constructor(){super(...arguments),this.color=new se("white")}clone(){return new MT({color:$(this.color)})}};l([d(du)],l1.prototype,"color",void 0),l1=MT=l([S("esri.symbols.callouts.LineCallout3DBorder")],l1);const IO=l1;Object.freeze(Object.defineProperty({__proto__:null,default:IO},Symbol.toStringTag,{value:"Module"}));var CT;let il=CT=class extends CO{constructor(e){super(e),this.type="line",this.color=new se([0,0,0,1]),this.size=wo(1),this.border=null}get visible(){return this.size>0&&E(this.color)&&this.color.a>0}clone(){return new CT({color:$(this.color),size:this.size,border:$(this.border)})}};l([ye({line:"line"},{readOnly:!0})],il.prototype,"type",void 0),l([d(du)],il.prototype,"color",void 0),l([d(_o)],il.prototype,"size",void 0),l([d({type:IO,json:{write:!0}})],il.prototype,"border",void 0),l([d({readOnly:!0})],il.prototype,"visible",null),il=CT=l([S("esri.symbols.callouts.LineCallout3D")],il);const VJ=il;function P3(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function NO(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!P3(e)}const RO={types:{key:"type",base:CO,typeMap:{line:VJ}},json:{write:!0}};var IT;let oc=IT=class extends j{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new IT({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};l([d(_o)],oc.prototype,"screenLength",void 0),l([d({type:Number,json:{write:!0,default:0}})],oc.prototype,"minWorldLength",void 0),l([d({type:Number,json:{write:!0}})],oc.prototype,"maxWorldLength",void 0),oc=IT=l([S("esri.symbols.support.Symbol3DVerticalOffset")],oc);var u1;const PO=me.ofType({base:null,key:"type",typeMap:{text:Mp}});let rl=u1=class extends Cp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new PO,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return NO(this)}hasVisibleVerticalOffset(){return P3(this)}clone(){return new u1({styleOrigin:$(this.styleOrigin),symbolLayers:$(this.symbolLayers),thumbnail:$(this.thumbnail),callout:$(this.callout),verticalOffset:$(this.verticalOffset)})}static fromTextSymbol(e){return new u1({symbolLayers:[Mp.fromTextSymbol(e)]})}};l([d({type:oc,json:{write:!0}})],rl.prototype,"verticalOffset",void 0),l([d(RO)],rl.prototype,"callout",void 0),l([d({json:{read:!1,write:!1}})],rl.prototype,"styleOrigin",void 0),l([d({type:PO})],rl.prototype,"symbolLayers",void 0),l([ye({LabelSymbol3D:"label-3d"},{readOnly:!0})],rl.prototype,"type",void 0),rl=u1=l([S("esri.symbols.LabelSymbol3D")],rl);const nw=rl;var c1;const $O=me.ofType({base:null,key:"type",typeMap:{line:qm,path:R3}}),jJ=me.ofType({base:null,key:"type",typeMap:{line:qm,path:R3}});let zf=c1=class extends Cp{constructor(e){super(e),this.symbolLayers=new $O,this.type="line-3d"}clone(){return new c1({styleOrigin:$(this.styleOrigin),symbolLayers:$(this.symbolLayers),thumbnail:$(this.thumbnail)})}static fromSimpleLineSymbol(e){return new c1({symbolLayers:[qm.fromSimpleLineSymbol(e)]})}};l([d({type:$O,json:{type:jJ}})],zf.prototype,"symbolLayers",void 0),l([ye({LineSymbol3D:"line-3d"},{readOnly:!0})],zf.prototype,"type",void 0),zf=c1=l([S("esri.symbols.LineSymbol3D")],zf);const sw=zf;let nl=class extends $r{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};l([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],nl.prototype,"angle",void 0),l([d({type:["simple-marker","picture-marker"],readOnly:!0})],nl.prototype,"type",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],nl.prototype,"xoffset",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],nl.prototype,"yoffset",void 0),l([d({type:Number,cast:e=>e==="auto"?e:qe(e),json:{write:!0}})],nl.prototype,"size",void 0),nl=l([S("esri.symbols.MarkerSymbol")],nl);const DO=nl;var NT;const LO=me.ofType({base:null,key:"type",typeMap:{fill:iw}});let Hf=NT=class extends Cp{constructor(e){super(e),this.symbolLayers=new LO,this.type="mesh-3d"}clone(){return new NT({styleOrigin:$(this.styleOrigin),symbolLayers:$(this.symbolLayers),thumbnail:$(this.thumbnail)})}};l([d({type:LO})],Hf.prototype,"symbolLayers",void 0),l([ye({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Hf.prototype,"type",void 0),Hf=NT=l([S("esri.symbols.MeshSymbol3D")],Hf);const $3=Hf;function zJ(e,t,i){return t.imageData?R6({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):OO(t.url,i)}function OO(e,t){return GJ(t)&&!nr(e)&&t.layer.parsedUrl?vo(t.layer.parsedUrl.path,"images",e):Ap(e,t)}function HJ(e,t,i,r){if(od(e)){const n=N6(e);t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&Kc(i.url,t,"url",r)}else Kc(e,t,"url",r)}const kO={json:{read:{source:["imageData","url"],reader:zJ},write:{writer(e,t,i,r){HJ(e,t,this.source,r)}}}},FO={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=OO(t.url,i)),r}}}};function GJ(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var RT;let mn=RT=class extends gO{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),i!=null&&(n.width=qe(i)),r!=null&&(n.height=qe(r)),n}clone(){const e=new RT({color:$(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",$(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};l([ye({esriPFS:"picture-fill"},{readOnly:!0})],mn.prototype,"type",void 0),l([d(kO)],mn.prototype,"url",void 0),l([d({type:Number,json:{write:!0}})],mn.prototype,"xscale",void 0),l([d({type:Number,json:{write:!0}})],mn.prototype,"yscale",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],mn.prototype,"width",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],mn.prototype,"height",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],mn.prototype,"xoffset",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],mn.prototype,"yoffset",void 0),l([d(FO)],mn.prototype,"source",void 0),mn=RT=l([S("esri.symbols.PictureFillSymbol")],mn);const BO=mn;var PT;let Xn=PT=class extends DO{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=qe(t)),i!=null&&(r.height=qe(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new PT({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",$(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};l([d({json:{write:!1}})],Xn.prototype,"color",void 0),l([ye({esriPMS:"picture-marker"},{readOnly:!0})],Xn.prototype,"type",void 0),l([d(kO)],Xn.prototype,"url",void 0),l([d(FO)],Xn.prototype,"source",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],Xn.prototype,"height",void 0),l([Z("height",["height","size"])],Xn.prototype,"readHeight",null),l([d({type:Number,cast:qe,json:{write:!0}})],Xn.prototype,"width",void 0),l([d({json:{write:!1}})],Xn.prototype,"size",void 0),Xn=PT=l([S("esri.symbols.PictureMarkerSymbol")],Xn);const Wm=Xn;var sl;const UO=me.ofType({base:null,key:"type",typeMap:{icon:vc,object:N3,text:Mp}});let ku=sl=class extends Cp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new UO,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return NO(this)}hasVisibleVerticalOffset(){return P3(this)}clone(){return new sl({verticalOffset:$(this.verticalOffset),callout:$(this.callout),styleOrigin:$(this.styleOrigin),symbolLayers:$(this.symbolLayers),thumbnail:$(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new sl({symbolLayers:[vc.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new sl({symbolLayers:[vc.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var i,r;return((r=(i=e.data)==null?void 0:i.symbol)==null?void 0:r.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new sl({symbolLayers:[vc.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new sl({symbolLayers:[vc.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new sl({symbolLayers:[Mp.fromTextSymbol(e)]})}};l([d({type:oc,json:{write:!0}})],ku.prototype,"verticalOffset",void 0),l([d(RO)],ku.prototype,"callout",void 0),l([d({type:UO,json:{origins:{"web-scene":{write:!0}}}})],ku.prototype,"symbolLayers",void 0),l([ye({PointSymbol3D:"point-3d"},{readOnly:!0})],ku.prototype,"type",void 0),ku=sl=l([S("esri.symbols.PointSymbol3D")],ku);const bc=ku;var Gf;const VO=me.ofType({base:null,key:"type",typeMap:{extrude:yO,fill:iw,icon:vc,line:qm,object:N3,text:Mp,water:AO}});let qf=Gf=class extends Cp{constructor(e){super(e),this.symbolLayers=new VO,this.type="polygon-3d"}clone(){return new Gf({styleOrigin:$(this.styleOrigin),symbolLayers:$(this.symbolLayers),thumbnail:$(this.thumbnail)})}static fromJSON(e){const t=new Gf;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:E(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Gf({symbolLayers:[iw.fromSimpleFillSymbol(e)]})}};l([d({type:VO,json:{write:!0}})],qf.prototype,"symbolLayers",void 0),l([ye({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],qf.prototype,"type",void 0),qf=Gf=l([S("esri.symbols.PolygonSymbol3D")],qf);const Ym=qf;var $T;const g2=new xe({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Fu=$T=class extends gO{constructor(...e){super(...e),this.color=new se([0,0,0,.25]),this.outline=new sn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new $T({color:$(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};l([d()],Fu.prototype,"color",void 0),l([d()],Fu.prototype,"outline",void 0),l([ye({esriSFS:"simple-fill"},{readOnly:!0})],Fu.prototype,"type",void 0),l([d({type:g2.apiValues,json:{read:g2.read,write:g2.write}})],Fu.prototype,"style",void 0),Fu=$T=l([S("esri.symbols.SimpleFillSymbol")],Fu);const Ca=Fu;var DT;const v2=new xe({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Hs=DT=class extends DO{constructor(...e){super(...e),this.color=new se([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new sn}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=qe(t)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new DT({angle:this.angle,color:$(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};l([d()],Hs.prototype,"color",void 0),l([te("color")],Hs.prototype,"writeColor",null),l([ye({esriSMS:"simple-marker"},{readOnly:!0})],Hs.prototype,"type",void 0),l([d()],Hs.prototype,"size",void 0),l([d({type:v2.apiValues,json:{read:v2.read,write:v2.write}})],Hs.prototype,"style",void 0),l([d({type:String,json:{write:!0}})],Hs.prototype,"path",null),l([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":sn}},json:{default:null,write:!0}})],Hs.prototype,"outline",void 0),Hs=DT=l([S("esri.symbols.SimpleMarkerSymbol")],Hs);const hu=Hs;var LT;let ht=LT=class extends $r{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new rw,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return qe(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new LT({angle:this.angle,backgroundColor:$(this.backgroundColor),borderLineColor:$(this.borderLineColor),borderLineSize:this.borderLineSize,color:$(this.color),font:this.font&&this.font.clone(),haloColor:$(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};l([d({type:se,json:{write:!0}})],ht.prototype,"backgroundColor",void 0),l([d({type:se,json:{write:!0}})],ht.prototype,"borderLineColor",void 0),l([d({type:Number,json:{write:!0}})],ht.prototype,"borderLineSize",void 0),l([d({type:rw,json:{write:!0}})],ht.prototype,"font",void 0),l([d({...EO,json:{write:!0}})],ht.prototype,"horizontalAlignment",void 0),l([d({type:Boolean,json:{write:!0}})],ht.prototype,"kerning",void 0),l([d({type:se,json:{write:!0}})],ht.prototype,"haloColor",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],ht.prototype,"haloSize",void 0),l([d({type:Boolean,json:{write:!0}})],ht.prototype,"rightToLeft",void 0),l([d({type:Boolean,json:{write:!0}})],ht.prototype,"rotated",void 0),l([d({type:String,json:{write:!0}})],ht.prototype,"text",void 0),l([ye({esriTS:"text"},{readOnly:!0})],ht.prototype,"type",void 0),l([d({...xO,json:{write:!0}})],ht.prototype,"verticalAlignment",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],ht.prototype,"xoffset",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],ht.prototype,"yoffset",void 0),l([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ht.prototype,"angle",void 0),l([d({type:Number,json:{write:!0}})],ht.prototype,"width",void 0),l([d({type:Number})],ht.prototype,"lineWidth",void 0),l([te("lineWidth")],ht.prototype,"writeLineWidth",null),l([je("lineWidth")],ht.prototype,"castLineWidth",null),l([d(TO)],ht.prototype,"lineHeight",void 0),l([te("lineHeight")],ht.prototype,"writeLineHeight",null),ht=LT=l([S("esri.symbols.TextSymbol")],ht);const ud=ht;var OT;const qJ=W.getLogger("esri.symbols.WebStyleSymbol");let Qn=OT=class extends $r{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const e=E(this.portal)?this.portal:ri.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new OT({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=E(t)?t.cache:null,r=i?this.fetchCacheKey:null;if(E(i)){const a=i.get(r);if(a)return a.clone()}const n=await WJ();Ct(t);const s=n.resolveWebStyleSymbol(this,{portal:this.portal},e,t);s.catch(a=>{qJ.error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(E(i)&&i.set(r,o.clone()),o):null}};function WJ(){return V(()=>import("./webStyleSymbolUtils.02e5e273.js"),["webStyleSymbolUtils.02e5e273.js","devEnvironmentUtils.8c6e6b72.js"],import.meta.url)}l([d({json:{write:!1}})],Qn.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],Qn.prototype,"styleName",void 0),l([d({type:ri,json:{write:!1}})],Qn.prototype,"portal",void 0),l([d({type:String,json:{read:C3,write:Kc}})],Qn.prototype,"styleUrl",void 0),l([d({type:Ry,json:{read:!1}})],Qn.prototype,"thumbnail",void 0),l([d({type:String,json:{write:!0}})],Qn.prototype,"name",void 0),l([ye({styleSymbolReference:"web-style"},{readOnly:!0})],Qn.prototype,"type",void 0),l([d()],Qn.prototype,"fetchCacheKey",null),Qn=OT=l([S("esri.symbols.WebStyleSymbol")],Qn);const cd=Qn;function ow(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function tp(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Lc={base:$r,key:"type",typeMap:{"simple-fill":Ca,"picture-fill":BO,"picture-marker":Wm,"simple-line":sn,"simple-marker":hu,text:ud,"label-3d":nw,"line-3d":sw,"mesh-3d":$3,"point-3d":bc,"polygon-3d":Ym,"web-style":cd,cim:Hm},errorContext:"symbol"},YJ={base:$r,key:"type",typeMap:{"picture-marker":Wm,"simple-marker":hu,text:ud,"web-style":cd,cim:Hm},errorContext:"symbol"},KJ=wp({types:Lc}),jO={base:$r,key:"type",typeMap:{"simple-fill":Ca,"picture-fill":BO,"picture-marker":Wm,"simple-line":sn,"simple-marker":hu,text:ud,"line-3d":sw,"mesh-3d":$3,"point-3d":bc,"polygon-3d":Ym,"web-style":cd,cim:Hm},errorContext:"symbol"},ZJ={base:$r,key:"type",typeMap:{text:ud,"label-3d":nw},errorContext:"symbol"},hN={base:$r,key:"type",typeMap:{"line-3d":sw,"mesh-3d":$3,"point-3d":bc,"polygon-3d":Ym,"web-style":cd,cim:Hm},errorContext:"symbol"},JJ={base:$r,key:"type",typeMap:{"label-3d":nw},errorContext:"symbol"},zO=mo(Lc);function XJ(e){if(!e)return null;const t={};for(const i in e){const r=cr(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function QJ(e){if(!E(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let fr=class extends Dr(j){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Ty(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&E(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:QJ(this.aggregateGeometries),geometry:E(this.geometry)?this.geometry.toJSON():null,symbol:E(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){E(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}};l([d({value:null,json:{read:XJ}})],fr.prototype,"aggregateGeometries",null),l([d({value:null})],fr.prototype,"attributes",null),l([d({value:null,types:ad,json:{read:cr}})],fr.prototype,"geometry",null),l([d({type:Boolean})],fr.prototype,"isAggregate",void 0),l([d({clonable:"reference"})],fr.prototype,"layer",void 0),l([d({type:cu})],fr.prototype,"popupTemplate",void 0),l([d({clonable:"reference"})],fr.prototype,"sourceLayer",void 0),l([d({value:null,types:Lc})],fr.prototype,"symbol",null),l([d({type:Boolean,value:!0})],fr.prototype,"visible",null),fr=l([S("esri.Graphic")],fr),function(e){e.generateUID=Ty}(fr||(fr={}));const zi=fr;class D3{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,n=0,s=!1){return(r-=n)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),s&&r===i&&(r=t),r+n}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return Nr(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,n=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(n)?r:n}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}}function L3(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}L3(new D3(0,2*Math.PI));L3(new D3(-Math.PI,Math.PI));const eX=L3(new D3(0,360));let Go=class extends Dr(j){constructor(...e){super(...e),this.position=new he([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return t!=null&&(n.heading=t),i!=null&&(n.tilt=i),r!=null&&(n.fov=r),n}return e}writePosition(e,t,i,r){const n=e.clone();n.x=xn(e.x||0),n.y=xn(e.y||0),n.z=e.hasZ?xn(e.z||0):e.z,t[i]=n.write({},r)}readPosition(e,t){const i=new he;return i.read(e,t),i.x=xn(i.x||0),i.y=xn(i.y||0),i.z=i.hasZ?xn(i.z||0):i.z,i}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};l([d({type:he,json:{write:{isRequired:!0}}})],Go.prototype,"position",void 0),l([te("position")],Go.prototype,"writePosition",null),l([Z("position")],Go.prototype,"readPosition",null),l([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),je(e=>eX.normalize(xn(e)))],Go.prototype,"heading",void 0),l([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),je(e=>Nr(xn(e),-180,180))],Go.prototype,"tilt",void 0),l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Go.prototype,"fov",void 0),Go=l([S("esri.Camera")],Go);const tX=Go;var kT;let ol=kT=class extends j{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new kT({rotation:this.rotation,scale:this.scale,targetGeometry:E(this.targetGeometry)?this.targetGeometry.clone():null,camera:E(this.camera)?this.camera.clone():null})}};function b2(){return{enabled:!this.camera}}l([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:b2}}}}})],ol.prototype,"rotation",void 0),l([je("rotation")],ol.prototype,"castRotation",null),l([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:b2}}}}})],ol.prototype,"scale",void 0),l([d({types:ad,json:{read:cr,write:!0,origins:{"web-scene":{read:cr,write:{overridePolicy:b2}}}}})],ol.prototype,"targetGeometry",void 0),l([d({type:tX,json:{write:!0}})],ol.prototype,"camera",void 0),ol=kT=l([S("esri.Viewpoint")],ol);const ao=ol;class Iv{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}var sr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(sr||(sr={}));let iX=0;function HO(){return iX++}function rX(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Nv(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function GO(e,t,i,r){if(t.type===sr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==sr.INVOKE&&t.type!==sr.RESPONSE)return void e.postMessage(t);let n;rX(i)?(n=pN(i.transferList),t.data=i.result):(n=pN(r),t.data=i),n?e.postMessage(t,n):e.postMessage(t)}function hm(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function pN(e){if(!e||!e.length)return null;if(F("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!nX(i));return t.length?t:null}function nX(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const sX={statsWorker:()=>V(()=>import("./statsWorker.9aa8af6b.js"),["statsWorker.9aa8af6b.js","quantizationUtils.ecebcefd.js","utils.9c3f7152.js","ClassBreaksDefinition.d045098a.js"],import.meta.url),geometryEngineWorker:()=>V(()=>import("./geometryEngineWorker.dfc67929.js"),["geometryEngineWorker.dfc67929.js","geometryEngineJSON.a34a7363.js","geometryEngineBase.cf4f989f.js","json.d1a0fa35.js"],import.meta.url),CSVSourceWorker:()=>V(()=>import("./CSVSourceWorker.1a91f90f.js"),["CSVSourceWorker.1a91f90f.js","json.d1a0fa35.js","FeatureStore.3a5cf673.js","PooledRBush.69392b52.js","centroid.92e04ee9.js","projectionSupport.bc7a22a7.js","QueryEngine.52f40a45.js","QueryEngineResult.6ebca542.js","quantizationUtils.ecebcefd.js","WhereClause.36ec5599.js","utils.9c3f7152.js","ClassBreaksDefinition.d045098a.js","utils.8d0f5303.js","timeSupport.3e75d01e.js"],import.meta.url),EdgeProcessingWorker:()=>V(()=>import("./EdgeProcessingWorker.f34618a9.js"),["EdgeProcessingWorker.f34618a9.js","deduplicate.c0c24c67.js","InterleavedLayout.74110d5d.js","BufferView.e4e02385.js","types.6e0a560c.js","VertexAttribute.5551e0d8.js"],import.meta.url),ElevationSamplerWorker:()=>V(()=>import("./ElevationSamplerWorker.65b15458.js"),["ElevationSamplerWorker.65b15458.js","PooledRBush.69392b52.js","georeference.1bc6a799.js","quatf64.ddec7ef6.js","mat4f64.a79dd289.js","quat.9d697a59.js","BufferView.e4e02385.js","vec33.4b4ee173.js"],import.meta.url),FeatureServiceSnappingSourceWorker:()=>V(()=>import("./FeatureServiceSnappingSourceWorker.947af7a4.js"),["FeatureServiceSnappingSourceWorker.947af7a4.js","FeatureStore.3a5cf673.js","PooledRBush.69392b52.js","centroid.92e04ee9.js","QueryEngine.52f40a45.js","QueryEngineResult.6ebca542.js","quantizationUtils.ecebcefd.js","WhereClause.36ec5599.js","utils.9c3f7152.js","ClassBreaksDefinition.d045098a.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","utils.8d0f5303.js","timeSupport.3e75d01e.js"],import.meta.url),GeoJSONSourceWorker:()=>V(()=>import("./GeoJSONSourceWorker.4cc78908.js"),["GeoJSONSourceWorker.4cc78908.js","FeatureStore.3a5cf673.js","PooledRBush.69392b52.js","centroid.92e04ee9.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","QueryEngine.52f40a45.js","QueryEngineResult.6ebca542.js","quantizationUtils.ecebcefd.js","WhereClause.36ec5599.js","utils.9c3f7152.js","ClassBreaksDefinition.d045098a.js","utils.8d0f5303.js","timeSupport.3e75d01e.js","geojson.66a4a990.js","sourceUtils.0c37d6e1.js"],import.meta.url),LercWorker:()=>V(()=>import("./LercWorker.ae9248b6.js"),[],import.meta.url),MemorySourceWorker:()=>V(()=>import("./MemorySourceWorker.d29cc1e9.js"),["MemorySourceWorker.d29cc1e9.js","objectIdUtils.773397d7.js","FeatureStore.3a5cf673.js","PooledRBush.69392b52.js","centroid.92e04ee9.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","QueryEngine.52f40a45.js","QueryEngineResult.6ebca542.js","quantizationUtils.ecebcefd.js","WhereClause.36ec5599.js","utils.9c3f7152.js","ClassBreaksDefinition.d045098a.js","utils.8d0f5303.js","timeSupport.3e75d01e.js","sourceUtils.0c37d6e1.js"],import.meta.url),PBFDecoderWorker:()=>V(()=>import("./PBFDecoderWorker.174ce94d.js"),[],import.meta.url),Pipeline:()=>V(()=>import("./Pipeline.a2aeac76.js"),["Pipeline.a2aeac76.js","QueryEngine.52f40a45.js","QueryEngineResult.6ebca542.js","quantizationUtils.ecebcefd.js","WhereClause.36ec5599.js","utils.9c3f7152.js","ClassBreaksDefinition.d045098a.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","utils.8d0f5303.js","timeSupport.3e75d01e.js","FeatureStore2D.e095c8f9.js","CircularArray.356e1ead.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","visualVariablesUtils.b5aaf02b.js","Utils.0d6a4873.js","Texture.723f1298.js","visualVariablesUtils.af8c0332.js","ogcFeatureUtils.c9aeebae.js","geojson.66a4a990.js"],import.meta.url),PointCloudWorker:()=>V(()=>import("./PointCloudWorker.8c5cb063.js"),["PointCloudWorker.8c5cb063.js","quat.9d697a59.js","quatf64.ddec7ef6.js","vec3f32.8d37ecf5.js","PointCloudUniqueValueRenderer.019c8a68.js","VertexAttribute.5551e0d8.js"],import.meta.url),RasterWorker:()=>V(()=>import("./RasterWorker.7f441df8.js"),["RasterWorker.7f441df8.js","pixelUtils.a71d38d7.js","RasterSymbolizer.018472e4.js","rasterProjectionHelper.b8e40d02.js","dataUtils.364659f1.js","utils.7a25fef9.js"],import.meta.url),SceneLayerSnappingSourceWorker:()=>V(()=>import("./SceneLayerSnappingSourceWorker.3b49630f.js"),["SceneLayerSnappingSourceWorker.3b49630f.js","lineSegment.c1a1e542.js","vectorStacks.e502980d.js","quatf64.ddec7ef6.js","mat4f64.a79dd289.js","sphere.0f805559.js","QueryEngineResult.6ebca542.js","quantizationUtils.ecebcefd.js","WhereClause.36ec5599.js","utils.9c3f7152.js","ClassBreaksDefinition.d045098a.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","utils.8d0f5303.js","Util.b521449d.js","EdgeProcessingWorker.f34618a9.js","deduplicate.c0c24c67.js","InterleavedLayout.74110d5d.js","BufferView.e4e02385.js","types.6e0a560c.js","VertexAttribute.5551e0d8.js"],import.meta.url),SceneLayerWorker:()=>V(()=>import("./SceneLayerWorker.366dabf0.js"),["SceneLayerWorker.366dabf0.js","sphere.0f805559.js","vectorStacks.e502980d.js","quatf64.ddec7ef6.js","mat4f64.a79dd289.js"],import.meta.url),WFSSourceWorker:()=>V(()=>import("./WFSSourceWorker.588a122a.js"),["WFSSourceWorker.588a122a.js","FeatureStore.3a5cf673.js","PooledRBush.69392b52.js","centroid.92e04ee9.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","QueryEngine.52f40a45.js","QueryEngineResult.6ebca542.js","quantizationUtils.ecebcefd.js","WhereClause.36ec5599.js","utils.9c3f7152.js","ClassBreaksDefinition.d045098a.js","utils.8d0f5303.js","timeSupport.3e75d01e.js","geojson.66a4a990.js","sourceUtils.0c37d6e1.js","wfsUtils.4824f9b8.js","xmlUtils.986ddba5.js"],import.meta.url),WorkerTileHandler:()=>V(()=>import("./WorkerTileHandler.d5868f10.js"),["WorkerTileHandler.d5868f10.js","BidiEngine.ec67919b.js","config.40d47db8.js","TileClipper.6695b533.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js"],import.meta.url)},{CLOSE:fN,ABORT:yN,INVOKE:mN,RESPONSE:Xp,OPEN_PORT:gN,ON:oX}=sr,aX=2;class lX{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===sr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class xr{constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new lX(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new xr(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=n),xr.clients.set(n,r),i.port2}static loadWorker(t){const i=sX[t];return i?i():Promise.resolve(null)}close(){this._post({type:fN}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const n=r&&r.signal,s=r&&r.transferList;if(!this._port)return Promise.reject(new P("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const o=HO();return new Promise((a,u)=>{if(Pn(n))return this._processWork(),void u(Mt());const c=$n(n,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),Zr(f.abortHandle),this._post({type:yN,jobId:o}),u(Mt()))}),h={resolve:a,reject:u,abortHandle:c,debugInfo:t};this._outJobs.set(o,h),this._post({type:mN,jobId:o,methodName:t,abortable:n!=null},i,s)})}on(t,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:sr.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove(){r.port1.postMessage({type:sr.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:gN,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=aX)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:n,deferred:s}=t;this.invoke(i,r,n).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Zr(t.abortHandle),t.reject(Mt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){E(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=hm(t);if(i)switch(i.type){case Xp:this._onResponseMessage(i);break;case mN:this._invokeQueue.push(i);break;case yN:this._onAbortMessage(i);break;case fN:this._onCloseMessage();break;case gN:this._onOpenPortMessage(i);break;case oX:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&xr.clients.get(this)===t&&t.destroy(),xr.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let u,c=this._client,h=c[i];try{if(!h&&i&&i.includes(".")){const f=i.split(".");for(let y=0;y<f.length-1;y++)c=c[f[y]],h=c[f[y+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);u=h.call(c,n,{client:this,signal:o?o.signal:null})}catch(f){return void this._post({type:Xp,jobId:r,error:Nv(f)})}Aa(u)?(a.set(r,{controller:o,promise:u}),u.then(f=>{a.has(r)&&(a.delete(r),this._post({type:Xp,jobId:r},f))},f=>{a.has(r)&&(a.delete(r),lr(f)||this._post({type:Xp,jobId:r,error:Nv(f||{message:`Error encountered at method ${i}`})}))})):this._post({type:Xp,jobId:r},u)}_onOpenPortMessage(t){new xr(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,s=>{i.postMessage(s)}),n=Ob(t.port,"message",s=>{hm(s).type===sr.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);this._processWork(),s.delete(i),Zr(o.abortHandle),r?o.reject(P.fromJSON(JSON.parse(r))):o.resolve(n)}_post(t,i,r){return GO(this._port,t,i,r)}}xr.kernelInfo={revision:F6,version:B6,buildDate:k6},xr.clients=new Map;const uX=W.getLogger("esri.core.workers.Connection");class cX{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Iv}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,n)=>{let s=!0;const o=a=>{Ct(i.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const u=t[a];Aa(u)?this._clientPromises[a]=u.then(c=>(this._clients[a]=new xr(c,i,()=>this._ongoingJobsQueue.pop()),o(r),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new xr(u,i,()=>this._ongoingJobsQueue.pop()),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(t,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a.invoke(t,i,r))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(Mt(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,r){let n=null;Array.isArray(r)?(uX.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r;const s=Sa();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:n,deferred:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(u=>u.jobAdded())}return s.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>Pb(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{i[n]=s.openPort(),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const qO=W.getLogger("esri.intl");function ds(e,t,i={}){const{format:r={}}=i;return yo(e,n=>dX(n,t,r))}function dX(e,t,i){let r,n;const s=e.indexOf(":");if(s===-1?r=e.trim():(r=e.slice(0,s).trim(),n=e.slice(s+1).trim()),!r)return"";const o=vp(r,t);if(o==null)return"";const a=i[n]||i[r];return a?hX(o,a):n?pX(o,n):O3(o)}function hX(e,t){switch(t.type){case"date":return bo(e,t.intlOptions);case"number":return ru(e,t.intlOptions);default:return qO.warn("missing format descriptor for key {key}"),O3(e)}}function pX(e,t){switch(t.toLowerCase()){case"dateformat":return bo(e);case"numberformat":return ru(e);default:return qO.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?bo(e):/^numberformat/i.test(t)?ru(e):O3(e)}}function O3(e){switch(typeof e){case"string":return e;case"number":return ru(e);case"boolean":return""+e;default:return e instanceof Date?bo(e):""}}async function fX(e,t,i,r){const n=t.exec(i);if(!n)throw new P("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=XW(r),u=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:u;let h;try{h=await vN(e(c))}catch(f){if(c===u)throw new P("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f});try{h=await vN(e(u))}catch(y){throw new P("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:y})}}return h}async function vN(e){if(E(bN.fetchBundleAsset))return bN.fetchBundleAsset(e);const t=await ze(e,{responseType:"text"});return JSON.parse(t.data)}class yX{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return fX(this.getAssetUrl,this.matcher,t,i)}}function mX(e){return new yX(e)}const bN={};JW(mX({pattern:"esri/",location:He}));const wN={};function gX(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function vX(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=wN.baseUrl),(i=wN.packages)==null||i.forEach(r=>{gX(t.packages,r)}),t}class bX{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}}class d1{constructor(){this._dispatcher=new bX,this._workerPostMessage({type:sr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){lv(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){lv(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=hm(t);if(i&&i.type===sr.OPEN){const{modulePath:r,jobId:n}=i;let s=await xr.loadWorker(r);s||(s=await V(()=>import(r),[],import.meta.url));const o=xr.connect(s);this._workerPostMessage({type:sr.OPENED,jobId:n,data:o})}}}const FT=W.getLogger("esri.core.workers"),{HANDSHAKE:wX}=sr,_X='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let O0,k0;const _N="Failed to create Worker. Fallback to execute module in main thread";async function SX(){if(!F("esri-workers")||(F("mozilla"),0))return SN(new d1);if(!O0&&!k0)try{const t=_X.replace('"{CONFIGURATION}"',`'${TX()}'`);O0=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){k0=t||{}}let e;if(O0)try{e=new Worker(O0,{name:"esri-worker-"+EX++})}catch{FT.warn(_N,k0),e=new d1}else FT.warn(_N,k0),e=new d1;return SN(e)}async function SN(e){return new Promise(t=>{function i(n){const s=hm(n);s&&s.type===wX&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(n){n.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),FT.warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new d1).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function TX(){let e;if(De.default!=null){const n={...De};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(De));e.assetsPath=ws(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Xr(),e.has={"esri-csp-restrictions":F("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":F("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":F("esri-2d-query-centroid-enabled"),"featurelayer-pbf":F("featurelayer-pbf"),"featurelayer-simplify-thresholds":F("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":F("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":F("featurelayer-simplify-mobile-factor"),"esri-atomics":F("esri-atomics"),"esri-shared-array-buffer":F("esri-shared-array-buffer"),"esri-tiles-debug":F("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":F("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":F("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=ws(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=ws(e.workers.workerPath):e.workers.workerPath=ws(He("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=De.workers.loaderConfig,i=vX({baseUrl:t==null?void 0:t.baseUrl,locale:Xr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]}),r={version:B6,buildDate:k6,revision:F6};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}let EX=0;const xX=W.getLogger("esri.core.workers"),{ABORT:TN,INVOKE:AX,OPEN:MX,OPENED:CX,RESPONSE:Qp}=sr;class k3{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),xX.error(r)})}static async create(t){const i=await SX();return new k3(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,n=HO();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:$A(r,()=>{this._outJobs.delete(n),this._post({type:TN,jobId:n})})};this._outJobs.set(n,a),this._post({type:MX,jobId:n,modulePath:t})})}_onMessage(t){const i=hm(t);if(i)switch(i.type){case CX:this._onOpenedMessage(i);break;case Qp:this._onResponseMessage(i);break;case TN:this._onAbortMessage(i);break;case AX:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,u=tW[i];let c;try{if(typeof u!="function")throw new TypeError(`${i} is not a function`);c=u.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:Qp,jobId:r,error:Nv(h)})}Aa(c)?(a.set(r,{controller:o,promise:c}),c.then(h=>{a.has(r)&&(a.delete(r),this._post({type:Qp,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),lr(h)||this._post({type:Qp,jobId:r,error:Nv(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:Qp,jobId:r},c)}_onOpenedMessage(t){const{jobId:i,data:r}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Zr(n.abortHandle),n.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Zr(s.abortHandle),r?s.reject(P.fromJSON(JSON.parse(r))):s.resolve(n))}_post(t,i,r){return GO(this.worker,t,i,r)}}let wc=F("esri-workers-debug")?1:F("host-browser")?navigator.hardwareConcurrency-1:0;wc||(wc=F("safari")&&F("mac")||F("trident")?7:2);let EN=0;const h1=[];function IX(){YO()}async function F0(e,t){const i=new cX;return await i.open(e,t),i}async function WO(e,t={}){if(typeof e!="string")throw new P("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(F("host-webworker")&&!F("esri-workers")&&(i="local"),i==="local"){let r=await xr.loadWorker(e);r||(r=await V(()=>import(e),[],import.meta.url)),Ct(t.signal);const n=t.client||r;return F0([xr.connect(r)],{...t,client:n})}if(await YO(),Ct(t.signal),i==="dedicated"){const r=EN++%wc;return F0([await h1[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,wc);if(r<wc){const n=new Array(r);for(let s=0;s<r;++s){const o=EN++%wc;n[s]=h1[o].open(e,t)}return F0(n,t)}}return F0(h1.map(r=>r.open(e,t)),t)}let B0=null;async function YO(){if(B0)return B0;new AbortController;const e=[];for(let t=0;t<wc;t++){const i=k3.create(t).then(r=>(h1[t]=r,r));e.push(i)}return B0=Promise.all(e),B0}function F3(e){return new we({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const KO=F3(ct),Rv=F3(ma),Pv=F3(tu),NX=new we({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${ct.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function BTe(e){return e&&(Wb(e)||e===Rv)?Rv:e&&(Yb(e)||e===Pv)?Pv:KO}function RX(e){return e&&(Wb(e)||e===Rv)?ma:e&&(Yb(e)||e===Pv)?tu:ct}function UTe(e){return ZA(e)?ma:JA(e)?tu:ct}const ZO=39.37,PX=ct.radius*Math.PI/200,JO=/UNIT\[([^\]]+)\]\]$/i,Oc=_,XO=/UNIT\[([^\]]+)\]/i,$X=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),DX=Ai()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Ls=e=>e*e,ka=e=>e*e*e,pm={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Ls(.001)},"square-centimeters":{inBaseUnits:Ls(.01)},"square-decimeters":{inBaseUnits:Ls(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Ls(1e3)},"square-inches":{inBaseUnits:Ls(.0254)},"square-feet":{inBaseUnits:Ls(.3048)},"square-yards":{inBaseUnits:Ls(.9144)},"square-miles":{inBaseUnits:Ls(1609.344)},"square-us-feet":{inBaseUnits:Ls(1200/3937)},acres:{inBaseUnits:.0015625*Ls(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*ka(.001)},"cubic-centimeters":{inBaseUnits:1e3*ka(.01)},"cubic-decimeters":{inBaseUnits:1e3*ka(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*ka(1e3)},"cubic-inches":{inBaseUnits:1e3*ka(.0254)},"cubic-feet":{inBaseUnits:1e3*ka(.3048)},"cubic-yards":{inBaseUnits:1e3*ka(.9144)},"cubic-miles":{inBaseUnits:1e3*ka(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},LX=(()=>{const e={};for(const t in pm)for(const i in pm[t].units)e[i]=t;return e})();function OX(e,t,i){return e*pm[i].units[t].inBaseUnits}function kX(e,t,i){return e/pm[i].units[t].inBaseUnits}function BT(e){const t=LX[e];if(!t)throw new Error("unknown type");return t}function xN(e,t=null){return t=t||BT(e),pm[t].baseUnit===e}function gn(e,t,i){if(t===i)return e;const r=BT(t);if(r!==BT(i))throw new Error("incompatible units");const n=xN(t,r)?e:OX(e,t,r);return xN(i,r)?n:kX(n,i,r)}function FX(e,t,i){return gn(e,t,"meters")/(i*Math.PI/180)}function QO(e){return DX.fromJSON(e.toLowerCase())||null}function ip(e){if(e&&typeof e=="object"&&!Kq(e))return 1;const t=pu(e);return t>1e5?1:t}function BX(e){return pu(e)>=(e instanceof we?RX(e).metersPerDegree:1e5)?"meters":VX(e)}function pu(e,t=ct.metersPerDegree){return Rb(UX(e,!0),t)}function UX(e,t=!1){let i,r,n=null;if(e!=null&&(typeof e=="object"?(i=e.wkid,r=e.wkt):typeof e=="number"?i=e:typeof e=="string"&&(r=e)),i){if(ZA(i))return ma.metersPerDegree;if(JA(i))return tu.metersPerDegree;n=Oc.values[Oc[i]],!n&&t&&$X.has(i)&&(n=PX)}else r&&(i8(r)?n=AN(JO.exec(r),n):t8(r)&&(n=AN(XO.exec(r),n)));return n}function AN(e,t){return e&&e[1]?e8(e[1]):t}function e8(e){return parseFloat(e.split(",")[1])}function VX(e){let t,i,r=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,i=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(i=e)),t)r=Oc.units[Oc[t]];else if(i){const n=i8(i)?JO:t8(i)?XO:null;if(n){const s=n.exec(i);s&&s[1]&&(r=zX(s[1]))}}return E(r)?QO(r):null}function t8(e){return/^GEOCCS/i.test(e)}function i8(e){return/^PROJCS/i.test(e)}const jX=1e-7;function zX(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!Oc.units.includes(i)){const r=e8(e);i=null;const n=Oc.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<jX){i=Oc.units[s];break}}return i}const r8={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},n8={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},HX=Ai()(r8),GX=Ai()(n8);Ai()({...r8,...n8});function qX(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function fu(e,t,i,r,n,s,o,a,u,c,h,f,y,m,g,v,b){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=u,e[8]=c,e[9]=h,e[10]=f,e[11]=y,e[12]=m,e[13]=g,e[14]=v,e[15]=b,e}function B3(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ia(e,t){if(e===t){const i=t[1],r=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function WX(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],v=t[13],b=t[14],w=t[15],T=i*a-r*o,A=i*u-n*o,R=i*c-s*o,M=r*u-n*a,C=r*c-s*a,k=n*c-s*u,B=h*v-f*g,H=h*b-y*g,Q=h*w-m*g,ee=f*b-y*v,le=f*w-m*v,be=y*w-m*b;let oe=T*be-A*le+R*ee+M*Q-C*H+k*B;return oe?(oe=1/oe,e[0]=(a*be-u*le+c*ee)*oe,e[1]=(n*le-r*be-s*ee)*oe,e[2]=(v*k-b*C+w*M)*oe,e[3]=(y*C-f*k-m*M)*oe,e[4]=(u*Q-o*be-c*H)*oe,e[5]=(i*be-n*Q+s*H)*oe,e[6]=(b*R-g*k-w*A)*oe,e[7]=(h*k-y*R+m*A)*oe,e[8]=(o*le-a*Q+c*B)*oe,e[9]=(r*Q-i*le-s*B)*oe,e[10]=(g*C-v*R+w*T)*oe,e[11]=(f*R-h*C-m*T)*oe,e[12]=(a*H-o*ee-u*B)*oe,e[13]=(i*ee-r*H+n*B)*oe,e[14]=(v*A-g*M-b*T)*oe,e[15]=(h*M-f*A+y*T)*oe,e):null}function YX(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],v=t[13],b=t[14],w=t[15];return e[0]=a*(y*w-m*b)-f*(u*w-c*b)+v*(u*m-c*y),e[1]=-(r*(y*w-m*b)-f*(n*w-s*b)+v*(n*m-s*y)),e[2]=r*(u*w-c*b)-a*(n*w-s*b)+v*(n*c-s*u),e[3]=-(r*(u*m-c*y)-a*(n*m-s*y)+f*(n*c-s*u)),e[4]=-(o*(y*w-m*b)-h*(u*w-c*b)+g*(u*m-c*y)),e[5]=i*(y*w-m*b)-h*(n*w-s*b)+g*(n*m-s*y),e[6]=-(i*(u*w-c*b)-o*(n*w-s*b)+g*(n*c-s*u)),e[7]=i*(u*m-c*y)-o*(n*m-s*y)+h*(n*c-s*u),e[8]=o*(f*w-m*v)-h*(a*w-c*v)+g*(a*m-c*f),e[9]=-(i*(f*w-m*v)-h*(r*w-s*v)+g*(r*m-s*f)),e[10]=i*(a*w-c*v)-o*(r*w-s*v)+g*(r*c-s*a),e[11]=-(i*(a*m-c*f)-o*(r*m-s*f)+h*(r*c-s*a)),e[12]=-(o*(f*b-y*v)-h*(a*b-u*v)+g*(a*y-u*f)),e[13]=i*(f*b-y*v)-h*(r*b-n*v)+g*(r*y-n*f),e[14]=-(i*(a*b-u*v)-o*(r*b-n*v)+g*(r*u-n*a)),e[15]=i*(a*y-u*f)-o*(r*y-n*f)+h*(r*u-n*a),e}function KX(e){const t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],h=e[9],f=e[10],y=e[11],m=e[12],g=e[13],v=e[14],b=e[15];return(t*o-i*s)*(f*b-y*v)-(t*a-r*s)*(h*b-y*g)+(t*u-n*s)*(h*v-f*g)+(i*a-r*o)*(c*b-y*m)-(i*u-n*o)*(c*v-f*m)+(r*u-n*a)*(c*g-h*m)}function s8(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=t[8],y=t[9],m=t[10],g=t[11],v=t[12],b=t[13],w=t[14],T=t[15];let A=i[0],R=i[1],M=i[2],C=i[3];return e[0]=A*r+R*a+M*f+C*v,e[1]=A*n+R*u+M*y+C*b,e[2]=A*s+R*c+M*m+C*w,e[3]=A*o+R*h+M*g+C*T,A=i[4],R=i[5],M=i[6],C=i[7],e[4]=A*r+R*a+M*f+C*v,e[5]=A*n+R*u+M*y+C*b,e[6]=A*s+R*c+M*m+C*w,e[7]=A*o+R*h+M*g+C*T,A=i[8],R=i[9],M=i[10],C=i[11],e[8]=A*r+R*a+M*f+C*v,e[9]=A*n+R*u+M*y+C*b,e[10]=A*s+R*c+M*m+C*w,e[11]=A*o+R*h+M*g+C*T,A=i[12],R=i[13],M=i[14],C=i[15],e[12]=A*r+R*a+M*f+C*v,e[13]=A*n+R*u+M*y+C*b,e[14]=A*s+R*c+M*m+C*w,e[15]=A*o+R*h+M*g+C*T,e}function ZX(e,t,i){const r=i[0],n=i[1],s=i[2];if(t===e)e[12]=t[0]*r+t[4]*n+t[8]*s+t[12],e[13]=t[1]*r+t[5]*n+t[9]*s+t[13],e[14]=t[2]*r+t[6]*n+t[10]*s+t[14],e[15]=t[3]*r+t[7]*n+t[11]*s+t[15];else{const o=t[0],a=t[1],u=t[2],c=t[3],h=t[4],f=t[5],y=t[6],m=t[7],g=t[8],v=t[9],b=t[10],w=t[11];e[0]=o,e[1]=a,e[2]=u,e[3]=c,e[4]=h,e[5]=f,e[6]=y,e[7]=m,e[8]=g,e[9]=v,e[10]=b,e[11]=w,e[12]=o*r+h*n+g*s+t[12],e[13]=a*r+f*n+v*s+t[13],e[14]=u*r+y*n+b*s+t[14],e[15]=c*r+m*n+w*s+t[15]}return e}function JX(e,t,i){const r=i[0],n=i[1],s=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function XX(e,t,i,r){let n,s,o,a,u,c,h,f,y,m,g,v,b,w,T,A,R,M,C,k,B,H,Q,ee,le=r[0],be=r[1],oe=r[2],Nt=Math.sqrt(le*le+be*be+oe*oe);return Nt<Te?null:(Nt=1/Nt,le*=Nt,be*=Nt,oe*=Nt,n=Math.sin(i),s=Math.cos(i),o=1-s,a=t[0],u=t[1],c=t[2],h=t[3],f=t[4],y=t[5],m=t[6],g=t[7],v=t[8],b=t[9],w=t[10],T=t[11],A=le*le*o+s,R=be*le*o+oe*n,M=oe*le*o-be*n,C=le*be*o-oe*n,k=be*be*o+s,B=oe*be*o+le*n,H=le*oe*o+be*n,Q=be*oe*o-le*n,ee=oe*oe*o+s,e[0]=a*A+f*R+v*M,e[1]=u*A+y*R+b*M,e[2]=c*A+m*R+w*M,e[3]=h*A+g*R+T*M,e[4]=a*C+f*k+v*B,e[5]=u*C+y*k+b*B,e[6]=c*C+m*k+w*B,e[7]=h*C+g*k+T*B,e[8]=a*H+f*Q+v*ee,e[9]=u*H+y*Q+b*ee,e[10]=c*H+m*Q+w*ee,e[11]=h*H+g*Q+T*ee,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function QX(e,t,i){const r=Math.sin(i),n=Math.cos(i),s=t[4],o=t[5],a=t[6],u=t[7],c=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+c*r,e[5]=o*n+h*r,e[6]=a*n+f*r,e[7]=u*n+y*r,e[8]=c*n-s*r,e[9]=h*n-o*r,e[10]=f*n-a*r,e[11]=y*n-u*r,e}function eQ(e,t,i){const r=Math.sin(i),n=Math.cos(i),s=t[0],o=t[1],a=t[2],u=t[3],c=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-c*r,e[1]=o*n-h*r,e[2]=a*n-f*r,e[3]=u*n-y*r,e[8]=s*r+c*n,e[9]=o*r+h*n,e[10]=a*r+f*n,e[11]=u*r+y*n,e}function tQ(e,t,i){const r=Math.sin(i),n=Math.cos(i),s=t[0],o=t[1],a=t[2],u=t[3],c=t[4],h=t[5],f=t[6],y=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+c*r,e[1]=o*n+h*r,e[2]=a*n+f*r,e[3]=u*n+y*r,e[4]=c*n-s*r,e[5]=h*n-o*r,e[6]=f*n-a*r,e[7]=y*n-u*r,e}function o8(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function iQ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function rQ(e,t,i){let r,n,s,o=i[0],a=i[1],u=i[2],c=Math.sqrt(o*o+a*a+u*u);return c<Te?null:(c=1/c,o*=c,a*=c,u*=c,r=Math.sin(t),n=Math.cos(t),s=1-n,e[0]=o*o*s+n,e[1]=a*o*s+u*r,e[2]=u*o*s-a*r,e[3]=0,e[4]=o*a*s-u*r,e[5]=a*a*s+n,e[6]=u*a*s+o*r,e[7]=0,e[8]=o*u*s+a*r,e[9]=a*u*s-o*r,e[10]=u*u*s+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function nQ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function sQ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oQ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a8(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=r+r,u=n+n,c=s+s,h=r*a,f=r*u,y=r*c,m=n*u,g=n*c,v=s*c,b=o*a,w=o*u,T=o*c;return e[0]=1-(m+v),e[1]=f+T,e[2]=y-w,e[3]=0,e[4]=f-T,e[5]=1-(h+v),e[6]=g+b,e[7]=0,e[8]=y+w,e[9]=g-b,e[10]=1-(h+m),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function aQ(e,t){const i=lQ,r=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=r*r+n*n+s*s+o*o;return f>0?(i[0]=2*(a*o+h*r+u*s-c*n)/f,i[1]=2*(u*o+h*n+c*r-a*s)/f,i[2]=2*(c*o+h*s+a*n-u*r)/f):(i[0]=2*(a*o+h*r+u*s-c*n),i[1]=2*(u*o+h*n+c*r-a*s),i[2]=2*(c*o+h*s+a*n-u*r)),a8(e,t,i),e}const lQ=Eo();function uQ(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function cQ(e,t){const i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],u=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(i*i+r*r+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(u*u+c*c+h*h),e}function dQ(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function hQ(e,t,i,r){const n=t[0],s=t[1],o=t[2],a=t[3],u=n+n,c=s+s,h=o+o,f=n*u,y=n*c,m=n*h,g=s*c,v=s*h,b=o*h,w=a*u,T=a*c,A=a*h,R=r[0],M=r[1],C=r[2];return e[0]=(1-(g+b))*R,e[1]=(y+A)*R,e[2]=(m-T)*R,e[3]=0,e[4]=(y-A)*M,e[5]=(1-(f+b))*M,e[6]=(v+w)*M,e[7]=0,e[8]=(m+T)*C,e[9]=(v-w)*C,e[10]=(1-(f+g))*C,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function pQ(e,t,i,r,n){const s=t[0],o=t[1],a=t[2],u=t[3],c=s+s,h=o+o,f=a+a,y=s*c,m=s*h,g=s*f,v=o*h,b=o*f,w=a*f,T=u*c,A=u*h,R=u*f,M=r[0],C=r[1],k=r[2],B=n[0],H=n[1],Q=n[2],ee=(1-(v+w))*M,le=(m+R)*M,be=(g-A)*M,oe=(m-R)*C,Nt=(1-(y+w))*C,Or=(b+T)*C,ft=(g+A)*k,kr=(b-T)*k,Un=(1-(y+v))*k;return e[0]=ee,e[1]=le,e[2]=be,e[3]=0,e[4]=oe,e[5]=Nt,e[6]=Or,e[7]=0,e[8]=ft,e[9]=kr,e[10]=Un,e[11]=0,e[12]=i[0]+B-(ee*B+oe*H+ft*Q),e[13]=i[1]+H-(le*B+Nt*H+kr*Q),e[14]=i[2]+Q-(be*B+Or*H+Un*Q),e[15]=1,e}function fQ(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=i+i,a=r+r,u=n+n,c=i*o,h=r*o,f=r*a,y=n*o,m=n*a,g=n*u,v=s*o,b=s*a,w=s*u;return e[0]=1-f-g,e[1]=h+w,e[2]=y-b,e[3]=0,e[4]=h-w,e[5]=1-c-g,e[6]=m+v,e[7]=0,e[8]=y+b,e[9]=m-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yQ(e,t,i,r,n,s,o){const a=1/(i-t),u=1/(n-r),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*u,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(n+r)*u,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function mQ(e,t,i,r,n){const s=1/Math.tan(t/2);let o;return e[0]=s/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(r-n),e[10]=(n+r)*o,e[14]=2*n*r*o):(e[10]=-1,e[14]=-2*r),e}function gQ(e,t,i,r){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+a),c=2/(n+s);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*u*.5,e[9]=(n-s)*c*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function vQ(e,t,i,r,n,s,o){const a=1/(t-i),u=1/(r-n),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*a,e[13]=(n+r)*u,e[14]=(o+s)*c,e[15]=1,e}function bQ(e,t,i,r){let n,s,o,a,u,c,h,f,y,m;const g=t[0],v=t[1],b=t[2],w=r[0],T=r[1],A=r[2],R=i[0],M=i[1],C=i[2];return Math.abs(g-R)<Te&&Math.abs(v-M)<Te&&Math.abs(b-C)<Te?B3(e):(h=g-R,f=v-M,y=b-C,m=1/Math.sqrt(h*h+f*f+y*y),h*=m,f*=m,y*=m,n=T*y-A*f,s=A*h-w*y,o=w*f-T*h,m=Math.sqrt(n*n+s*s+o*o),m?(m=1/m,n*=m,s*=m,o*=m):(n=0,s=0,o=0),a=f*o-y*s,u=y*n-h*o,c=h*s-f*n,m=Math.sqrt(a*a+u*u+c*c),m?(m=1/m,a*=m,u*=m,c*=m):(a=0,u=0,c=0),e[0]=n,e[1]=a,e[2]=h,e[3]=0,e[4]=s,e[5]=u,e[6]=f,e[7]=0,e[8]=o,e[9]=c,e[10]=y,e[11]=0,e[12]=-(n*g+s*v+o*b),e[13]=-(a*g+u*v+c*b),e[14]=-(h*g+f*v+y*b),e[15]=1,e)}function wQ(e,t,i,r){const n=t[0],s=t[1],o=t[2],a=r[0],u=r[1],c=r[2];let h=n-i[0],f=s-i[1],y=o-i[2],m=h*h+f*f+y*y;m>0&&(m=1/Math.sqrt(m),h*=m,f*=m,y*=m);let g=u*y-c*f,v=c*h-a*y,b=a*f-u*h;return m=g*g+v*v+b*b,m>0&&(m=1/Math.sqrt(m),g*=m,v*=m,b*=m),e[0]=g,e[1]=v,e[2]=b,e[3]=0,e[4]=f*b-y*v,e[5]=y*g-h*b,e[6]=h*v-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=y,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function _Q(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function SQ(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function TQ(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function l8(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function EQ(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function xQ(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function AQ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function MQ(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],f=e[9],y=e[10],m=e[11],g=e[12],v=e[13],b=e[14],w=e[15],T=t[0],A=t[1],R=t[2],M=t[3],C=t[4],k=t[5],B=t[6],H=t[7],Q=t[8],ee=t[9],le=t[10],be=t[11],oe=t[12],Nt=t[13],Or=t[14],ft=t[15];return Math.abs(i-T)<=Te*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(r-A)<=Te*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(n-R)<=Te*Math.max(1,Math.abs(n),Math.abs(R))&&Math.abs(s-M)<=Te*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-C)<=Te*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(a-k)<=Te*Math.max(1,Math.abs(a),Math.abs(k))&&Math.abs(u-B)<=Te*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(c-H)<=Te*Math.max(1,Math.abs(c),Math.abs(H))&&Math.abs(h-Q)<=Te*Math.max(1,Math.abs(h),Math.abs(Q))&&Math.abs(f-ee)<=Te*Math.max(1,Math.abs(f),Math.abs(ee))&&Math.abs(y-le)<=Te*Math.max(1,Math.abs(y),Math.abs(le))&&Math.abs(m-be)<=Te*Math.max(1,Math.abs(m),Math.abs(be))&&Math.abs(g-oe)<=Te*Math.max(1,Math.abs(g),Math.abs(oe))&&Math.abs(v-Nt)<=Te*Math.max(1,Math.abs(v),Math.abs(Nt))&&Math.abs(b-Or)<=Te*Math.max(1,Math.abs(b),Math.abs(Or))&&Math.abs(w-ft)<=Te*Math.max(1,Math.abs(w),Math.abs(ft))}function CQ(e){const t=Te,i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],u=e[8],c=e[9],h=e[10];return Math.abs(1-(i*i+s*s+u*u))<=t&&Math.abs(1-(r*r+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const IQ=s8,NQ=l8;Object.freeze(Object.defineProperty({__proto__:null,copy:qX,set:fu,identity:B3,transpose:Ia,invert:WX,adjoint:YX,determinant:KX,multiply:s8,translate:ZX,scale:JX,rotate:XX,rotateX:QX,rotateY:eQ,rotateZ:tQ,fromTranslation:o8,fromScaling:iQ,fromRotation:rQ,fromXRotation:nQ,fromYRotation:sQ,fromZRotation:oQ,fromRotationTranslation:a8,fromQuat2:aQ,getTranslation:uQ,getScaling:cQ,getRotation:dQ,fromRotationTranslationScale:hQ,fromRotationTranslationScaleOrigin:pQ,fromQuat:fQ,frustum:yQ,perspective:mQ,perspectiveFromFieldOfView:gQ,ortho:vQ,lookAt:bQ,targetTo:wQ,str:_Q,frob:SQ,add:TQ,subtract:l8,multiplyScalar:EQ,multiplyScalarAndAdd:xQ,exactEquals:AQ,equals:MQ,isOrthoNormal:CQ,mul:IQ,sub:NQ},Symbol.toStringTag,{value:"Module"}));let w2,D=null;function u8(){return!!D}function RQ(){return!!F("esri-wasm")}function c8(){return w2||(w2=V(()=>import("./pe-wasm.41ba155b.js"),[],import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>He(`esri/geometry/support/${t}`)})).then(e=>{h8(e)}),w2)}var UT,pt,VT;(function(e){function t(s,o,a){D.ensureCache.prepare();const u=ac(a),c=a===u,h=D.ensureFloat64(u),f=D._pe_geog_to_proj(D.getPointer(s),o,h);return f&&$l(a,o,h,c),f}function i(s,o,a,u){switch(u){case pt.PE_TRANSFORM_P_TO_G:return r(s,o,a);case pt.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function r(s,o,a){return n(s,o,a,0)}function n(s,o,a,u){D.ensureCache.prepare();const c=ac(a),h=a===c,f=D.ensureFloat64(c),y=D._pe_proj_to_geog_center(D.getPointer(s),o,f,u);return y&&$l(a,o,f,h),y}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=n})(UT||(UT={})),function(e){function t(){e.PE_BUFFER_MAX=D.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=D.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=D.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=D.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=D.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=D.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=D.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=D.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=D.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=D.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=D.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=D.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=D.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=D.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=D.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=D.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=D.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=D.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=D.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=D.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=D.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=D.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=D.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=D.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=D.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=D.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=D.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=D.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=D.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=D.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(pt||(pt={})),function(e){const t={},i={},r=m=>{if(m){const g=m.getType();switch(g){case pt.PE_TYPE_GEOGCS:m=D.castObject(m,D.PeGeogcs);break;case pt.PE_TYPE_PROJCS:m=D.castObject(m,D.PeProjcs);break;case pt.PE_TYPE_GEOGTRAN:m=D.castObject(m,D.PeGeogtran);break;default:g&pt.PE_TYPE_UNIT&&(m=D.castObject(m,D.PeUnit))}}return m};function n(){D.PeFactory.prototype.initialize(null)}function s(m){return o(pt.PE_TYPE_COORDSYS,m)}function o(m,g){let v=null,b=t[m];if(b||(b={},t[m]=b),b.hasOwnProperty(String(g)))v=b[g];else{const w=D.PeFactory.prototype.factoryByType(m,g);D.compare(w,D.NULL)||(v=w,b[g]=v)}return v=r(v),v}function a(m,g){let v=null,b=i[m];if(b||(b={},i[m]=b),b.hasOwnProperty(g))v=b[g];else{const w=D.PeFactory.prototype.fromString(m,g);D.compare(w,D.NULL)||(v=w,b[g]=v)}return v=r(v),v}function u(m){return o(pt.PE_TYPE_GEOGCS,m)}function c(m){return o(pt.PE_TYPE_GEOGTRAN,m)}function h(m){return D.PeFactory.prototype.getCode(m)}function f(m){return o(pt.PE_TYPE_PROJCS,m)}function y(m){return o(pt.PE_TYPE_UNIT,m)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=u,e.geogtran=c,e.getCode=h,e.projcs=f,e.unit=y}(VT||(VT={}));let d8=null;var $v,jT,zT,HT,Dv,GT,Lv,Ov,qT;function h8(e){function t(s,o,a){s[o]=a(s[o])}D=e,pt.init(),$v.init(),Dv.init(),Lv.init(),Ov.init(),d8=class extends D.PeGCSExtent{destroy(){D.destroy(this)}};const i=[D.PeDatum,D.PeGeogcs,D.PeGeogtran,D.PeObject,D.PeParameter,D.PePrimem,D.PeProjcs,D.PeSpheroid,D.PeUnit];for(const s of i)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(pt.PE_NAME_MAX))});for(const s of[D.PeGeogtran,D.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(pt.PE_PARM_MAX);let u=o.call(this);for(let c=0;c<a.length;c++){const h=D.getValue(u,"*");a[c]=h?D.wrapPointer(h,D.PeParameter):null,u+=Int32Array.BYTES_PER_ELEMENT}return a});t(D.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return $l(a,o,s.call(this)),a}),t(D.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=D._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const u=s.call(this);if(!D.compare(u,D.NULL)){a=[u];const c=this.getSteps();if(c>1){const h=D.getPointer(u);for(let f=1;f<c;f++)a.push(D.wrapPointer(h+o*f,D.PeGTlistExtendedGTs))}}return a}});const r=D._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const u=s.call(this);if(!D.compare(u,D.NULL)){a=[u];const c=u.getNump();if(c>1){const h=D.getPointer(u);for(let f=1;f<c;f++)a.push(D.wrapPointer(h+r*f,D.PeHorizon))}}return o.set(s,a),a};t(D.PeProjcs.prototype,"horizonGcsGenerate",n),t(D.PeProjcs.prototype,"horizonPcsGenerate",n),D.PeObject.prototype.toString=function(s=pt.PE_STR_OPTS_NONE){D.ensureCache.prepare();const o=D.getPointer(this),a=D.ensureInt8(new Array(pt.PE_BUFFER_MAX));return D.UTF8ToString(D._pe_object_to_string_ext(o,s,a))}}function No(e){if(!e)return;const t=D.getClass(e);if(!t)return;const i=D.getCache(t);if(!i)return;const r=D.getPointer(e);r&&delete i[r]}function U0(e,t){const i=[],r=new Array(t);for(let n=0;n<e;n++)i.push(D.ensureInt8(r));return i}function ac(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function $l(e,t,i,r=!1){if(r)for(let n=0;n<2*t;n++)e[n]=D.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=D.getValue(i,"double"),e[s][1]=D.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=D.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=D._pe_getPeGTlistExtendedEntrySize()}function r(n,s,o,a,u,c){let h=null;const f=new D.PeInteger(c);try{const y=D.PeGTlistExtended.prototype.getGTlist(n,s,o,a,u,f);if((c=f.val)&&(h=[y],c>1)){const m=D.getPointer(y);for(let g=1;g<c;g++)h.push(D.wrapPointer(m+t*g,D.PeGTlistExtendedEntry))}}finally{D.destroy(f)}return h}e.init=i,e.getGTlist=r})($v||($v={})),function(e){function t(i){if(i&&i.length){for(const r of i)No(r),r.getEntries().forEach(n=>{No(n);const s=n.getGeogtran();No(s),s.getParameters().forEach(No),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{No(o);const a=o.getDatum();No(a),No(a.getSpheroid()),No(o.getPrimem()),No(o.getUnit())})});D.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(jT||(jT={})),function(e){function t(i,r,n,s,o){D.ensureCache.prepare();const a=ac(n),u=n===a,c=D.ensureFloat64(a);let h=0;s&&(h=D.ensureFloat64(s));const f=D._pe_geog_to_geog(D.getPointer(i),r,c,h,o);return f&&$l(n,r,c,u),f}e.geogToGeog=t}(zT||(zT={})),function(e){const t=(c,h,f,y,m,g)=>{let v,b;switch(D.ensureCache.prepare(),c){case"dd":v=D._pe_geog_to_dd,b=pt.PE_DD_MAX;break;case"ddm":v=D._pe_geog_to_ddm,b=pt.PE_DDM_MAX;break;case"dms":v=D._pe_geog_to_dms,b=pt.PE_DMS_MAX}let w=0;h&&(w=D.getPointer(h));const T=ac(y),A=D.ensureFloat64(T),R=U0(f,b),M=v(w,f,A,m,D.ensureInt32(R));if(M)for(let C=0;C<f;C++)g[C]=D.UTF8ToString(R[C]);return M},i=(c,h,f,y,m)=>{let g;switch(D.ensureCache.prepare(),c){case"dd":g=D._pe_dd_to_geog;break;case"ddm":g=D._pe_ddm_to_geog;break;case"dms":g=D._pe_dms_to_geog}let v=0;h&&(v=D.getPointer(h));const b=y.map(R=>D.ensureString(R)),w=D.ensureInt32(b),T=D.ensureFloat64(new Array(2*f)),A=g(v,f,w,T);return A&&$l(m,f,T),A};function r(c,h,f,y,m){return t("dms",c,h,f,y,m)}function n(c,h,f,y){return i("dms",c,h,f,y)}function s(c,h,f,y,m){return t("ddm",c,h,f,y,m)}function o(c,h,f,y){return i("ddm",c,h,f,y)}function a(c,h,f,y,m){return t("dd",c,h,f,y,m)}function u(c,h,f,y){return i("dd",c,h,f,y)}e.geogToDms=r,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=u}(HT||(HT={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=D.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=D.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=D.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=D.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=D.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,s,o,a,u,c,h){D.ensureCache.prepare();let f=0;n&&(f=D.getPointer(n));const y=ac(o),m=D.ensureFloat64(y),g=U0(s,pt.PE_MGRS_MAX),v=D.ensureInt32(g),b=D._pe_geog_to_mgrs_extended(f,s,m,a,u,c,v);if(b)for(let w=0;w<s;w++)h[w]=D.UTF8ToString(g[w]);return b}function r(n,s,o,a,u){D.ensureCache.prepare();let c=0;n&&(c=D.getPointer(n));const h=o.map(g=>D.ensureString(g)),f=D.ensureInt32(h),y=D.ensureFloat64(new Array(2*s)),m=D._pe_mgrs_to_geog_extended(c,s,f,a,y);return m&&$l(u,s,y),m}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(Dv||(Dv={})),function(e){function t(r,n,s,o,a,u,c){D.ensureCache.prepare();let h=0;r&&(h=D.getPointer(r));const f=ac(s),y=D.ensureFloat64(f),m=U0(n,pt.PE_MGRS_MAX),g=D.ensureInt32(m),v=D._pe_geog_to_usng(h,n,y,o,a,u,g);if(v)for(let b=0;b<n;b++)c[b]=D.UTF8ToString(m[b]);return v}function i(r,n,s,o){D.ensureCache.prepare();let a=0;r&&(a=D.getPointer(r));const u=s.map(y=>D.ensureString(y)),c=D.ensureInt32(u),h=D.ensureFloat64(new Array(2*n)),f=D._pe_usng_to_geog(a,n,c,h);return f&&$l(o,n,h),f}e.geogToUsng=t,e.usngToGeog=i}(GT||(GT={})),function(e){function t(){e.PE_UTM_OPTS_NONE=D.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=D.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=D.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,s,o,a,u){D.ensureCache.prepare();let c=0;n&&(c=D.getPointer(n));const h=ac(o),f=D.ensureFloat64(h),y=U0(s,pt.PE_UTM_MAX),m=D.ensureInt32(y),g=D._pe_geog_to_utm(c,s,f,a,m);if(g)for(let v=0;v<s;v++)u[v]=D.UTF8ToString(y[v]);return g}function r(n,s,o,a,u){D.ensureCache.prepare();let c=0;n&&(c=D.getPointer(n));const h=o.map(g=>D.ensureString(g)),f=D.ensureInt32(h),y=D.ensureFloat64(new Array(2*s)),m=D._pe_utm_to_geog(c,s,f,a,y);return m&&$l(u,s,y),m}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(Lv||(Lv={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=D.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=D.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=D.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=D.PePCSInfo.prototype.PE_POLE_POINT}function r(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o,a;return t.has(n)&&(a=t.get(n),a[s]&&(o=a[s])),o||(o=D.PePCSInfo.prototype.generate(n,s),a||(a=[],t.set(n,a)),a[s]=o),o}e.init=i,e.generate=r}(Ov||(Ov={})),function(e){function t(){return D.PeVersion.prototype.version_string()}e.versionString=t}(qT||(qT={}));const PQ=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return D},isLoaded:u8,isSupported:RQ,load:c8,get PeCSTransformations(){return UT},get PeDefs(){return pt},get PeFactory(){return VT},get PeGCSExtent(){return d8},get PeGTlistExtended(){return $v},get PeGTlistExtendedEntry(){return jT},get PeGTTransformations(){return zT},get PeNotationDms(){return HT},get PeNotationMgrs(){return Dv},get PeNotationUsng(){return GT},get PeNotationUtm(){return Lv},get PePCSInfo(){return Ov},get PeVersion(){return qT},_init:h8},Symbol.toStringTag,{value:"Module"})),Fa=ct.radius,zn=ct.eccentricitySquared,$Q={a1:Fa*zn,a2:Fa*zn*Fa*zn,a3:Fa*zn*zn/2,a4:Fa*zn*Fa*zn*2.5,a5:Fa*zn+Fa*zn*zn/2,a6:1-zn};1/294.9786982,1/298.257222101,ct.radius,ct.flattening,tu.radius,tu.flattening,1/192.0430107526882,ma.radius,ma.flattening,1/10.2079945799458,1/43.61604095563141,ma.radius;let V0=0;class Ph{constructor(t=null){this.uid=V0++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new Ph;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=V0++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=V0++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=V0++}getInverse(){const t=new Ph;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class Vl{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof Ph?this.steps.push(i):this.steps.push(new Ph({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new Vl;let r="";for(const n of t.steps){const s=Ph.fromGE(n);i.steps.push(s),r+=s.uid.toString()+","}return i._cached_projection={},i._gtlistentry=null,i._chain=r,i}getInverse(){const t=new Vl;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cached_projection[Vl.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);const n=this._cached_projection[Vl.cacheKey(t,i)];return n===void 0?null:n}}function p8(e,t,i){if(O(t)||O(i)||i.vcsWkid||hr(t,i))return null;const r=ip(t)/ip(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>DQ(n,r);case"polyline":case"esriGeometryPolyline":return n=>OQ(n,r);case"polygon":case"esriGeometryPolygon":return n=>LQ(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>kQ(n,r);case"extent":case"esriGeometryExtent":return n=>FQ(n,r);default:return null}}function DQ(e,t){e&&e.z!=null&&(e.z*=t)}function LQ(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function OQ(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function kQ(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function FQ(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let ql=null,kv=null,_2=null,S2={};const f8=new p6;function Zc(){return!!ql&&u8()}function Jc(e){return O(_2)&&(_2=Promise.all([c8(),V(()=>import("./geometryEngineBase.cf4f989f.js"),[],import.meta.url).then(t=>t.g),V(()=>import("./hydrated.da5e0aa3.js"),[],import.meta.url)])),_2.then(([,t,{hydratedAdapter:i}])=>{Ct(e),kv=i,ql=t.default,ql._enableProjection(PQ),f8.notify()})}function Ip(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:MN(kv,e,e[0].spatialReference,t,i,r):MN(kv,[e],e.spatialReference,t,i,r)[0]}function MN(e,t,i,r,n=null,s=null){if(O(i)||O(r))return t;if(su(i,r,n))return t.map(o=>VQ(o,i,r));if(O(n)){const o=Vl.cacheKey(i,r);S2[o]!==void 0?n=S2[o]:(n=BQ(i,r,null),O(n)&&(n=new Vl),S2[o]=n)}if(O(ql))throw new U3;return E(s)?ql._project(e,t,i,r,n,s):ql._project(e,t,i,r,n)}function VTe(e,t){return O(e)?{pending:null,geometry:null}:hr(e.spatialReference,t)?{pending:null,geometry:e}:ji(e.spatialReference)&&ji(t)?su(e.spatialReference,t)||Zc()?{pending:null,geometry:UQ(e,t)}:(Me(f8),{pending:Jc(),geometry:null}):{pending:null,geometry:null}}function BQ(e,t,i=null){if(O(ql))throw new U3;if(O(e)||O(t))return null;const r=ql._getTransformation(kv,e,t,i,i==null?void 0:i.spatialReference);return r!==null?Vl.fromGE(r):null}class U3 extends P{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var I;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(I||(I={}));function UQ(e,t){try{const i=Ip(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=p8(i.type,e.spatialReference,t);return E(r)&&r(i),i}catch(i){if(!(i instanceof U3))throw i;return null}}function su(e,t,i){return!i&&(!!hr(e,t)||ji(e)&&ji(t)&&!!v8(e,t,b8))}async function jTe(e,t,i,r){if(Zc())return bI(r);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(!su(n,s,o))return Jc(r)}else if(!su(e,t,i))return Jc(r);return bI(r)}function VQ(e,t,i){return e?"x"in e?jQ(e,t,new he,i,0):"xmin"in e?GQ(e,t,new Ue,i,0):"rings"in e?y8(e,t,new Rr,i,0):"paths"in e?HQ(e,t,new ir,i,0):"points"in e?zQ(e,t,new Tp,i,0):null:null}function jQ(e,t,i,r,n){Yt[0]=e.x,Yt[1]=e.y;const s=e.z;return Yt[2]=s!==void 0?s:n,Km(Yt,t,0,Yt,r,0,1)?(i.x=Yt[0],i.y=Yt[1],i.spatialReference=r,s===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Yt[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function zQ(e,t,i,r,n){const{points:s,hasZ:o,hasM:a}=e,u=[],c=s.length,h=[];for(const f of s)h.push(f[0],f[1],o?f[2]:n);if(!Km(h,t,0,h,r,0,c))return null;for(let f=0;f<c;++f){const y=3*f,m=h[y],g=h[y+1];o&&a?u.push([m,g,h[y+2],s[f][3]]):o?u.push([m,g,h[y+2]]):a?u.push([m,g,s[f][2]]):u.push([m,g])}return i.points=u,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function HQ(e,t,i,r,n){const{paths:s,hasZ:o,hasM:a}=e,u=[];return m8(s,o,a,t,u,r,n)?(i.paths=u,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function zTe(e,t,i=t.spatialReference,r=0){return E(i)&&E(y8(e,e.spatialReference,t,i,r))}function y8(e,t,i,r,n){const{rings:s,hasZ:o,hasM:a}=e,u=[];return m8(s,o,a,t,u,r,n)?(i.rings=u,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function GQ(e,t,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:u,hasZ:c,hasM:h}=e;return CN(s,o,c?e.zmin:n,t,Yt,r)?(i.xmin=Yt[0],i.ymin=Yt[1],c&&(i.zmin=Yt[2]),CN(a,u,c?e.zmax:n,t,Yt,r)?(i.xmax=Yt[0],i.ymax=Yt[1],c&&(i.zmax=Yt[2]),h&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function HTe(e,t,i,r=0){Yt[0]=e.x,Yt[1]=e.y;const n=e.z;return Yt[2]=n!==void 0?n:r,Km(Yt,e.spatialReference,0,t,i,0,1)}function CN(e,t,i,r,n,s){return j0[0]=e,j0[1]=t,j0[2]=i,Km(j0,r,0,n,s,0,1)}function Km(e,t,i,r,n,s,o=1){const a=v8(t,n,b8);if(O(a))return!1;if(a===nt){if(e===r&&i===s)return!0;const c=i+3*o;for(let h=i,f=s;h<c;h++,f++)r[f]=e[h];return!0}const u=i+3*o;for(let c=i,h=s;c<u;c+=3,h+=3)a(e,c,r,h);return!0}function m8(e,t,i,r,n,s,o=0){const a=new Array;for(const c of e)for(const h of c)a.push(h[0],h[1],t?h[2]:o);if(!Km(a,r,0,a,s,0,a.length/3))return!1;let u=0;n.length=0;for(const c of e){const h=new Array;for(const f of c)t&&i?h.push([a[u++],a[u++],a[u++],f[3]]):t?h.push([a[u++],a[u++],a[u++]]):i?(h.push([a[u++],a[u++],f[2]]),u++):(h.push([a[u++],a[u++]]),u++);n.push(h)}return!0}function GTe(e,t,i,r){if(O(e)||O(r))return!1;const n=Fv(e,lee),s=Fv(r,uee);if(n===s&&!IN(s)&&(n!==I.UNKNOWN||hr(e,r)))return o8(i,t),!0;if(IN(s)){const o=Wf[n][I.LON_LAT],a=Wf[I.LON_LAT][s];return!O(o)&&!O(a)&&(o(t,0,Ba,0),a(Ba,0,Ua,0),g8(so*Ba[0],so*Ba[1],i),i[12]=Ua[0],i[13]=Ua[1],i[14]=Ua[2],!0)}if((s===I.WEB_MERCATOR||s===I.PLATE_CARREE)&&(n===I.WGS84||n===I.CGCS2000&&s===I.PLATE_CARREE||n===I.SPHERICAL_ECEF||n===I.WEB_MERCATOR)){const o=Wf[n][I.LON_LAT],a=Wf[I.LON_LAT][s];return!O(o)&&!O(a)&&(o(t,0,Ba,0),a(Ba,0,Ua,0),n===I.SPHERICAL_ECEF?qQ(so*Ba[0],so*Ba[1],i):B3(i),i[12]=Ua[0],i[13]=Ua[1],i[14]=Ua[2],!0)}return!1}function IN(e){return e===I.SPHERICAL_ECEF||e===I.SPHERICAL_MARS_PCPF||e===I.SPHERICAL_MOON_PCPF}function g8(e,t,i){const r=Math.sin(e),n=Math.cos(e),s=Math.sin(t),o=Math.cos(t),a=i;return a[0]=-r,a[4]=-s*n,a[8]=o*n,a[12]=0,a[1]=n,a[5]=-s*r,a[9]=o*r,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function qQ(e,t,i){return g8(e,t,i),Ia(i,i),i}function Fv(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=pu(e,1)),e.wkt===KO.wkt?t.spatialReferenceId=I.SPHERICAL_ECEF:im(e)?t.spatialReferenceId=I.WGS84:Hc(e)?t.spatialReferenceId=I.WEB_MERCATOR:Zq(e)?t.spatialReferenceId=I.PLATE_CARREE:e.wkt===NX.wkt?t.spatialReferenceId=I.WGS84_ECEF:e.wkid===zc.CGCS2000?t.spatialReferenceId=I.CGCS2000:e.wkt===Rv.wkt?t.spatialReferenceId=I.SPHERICAL_MARS_PCPF:e.wkt===Pv.wkt?t.spatialReferenceId=I.SPHERICAL_MOON_PCPF:Wb(e)?t.spatialReferenceId=I.GCSMARS2000:Yb(e)?t.spatialReferenceId=I.GCSMOON2000:t.spatialReferenceId=I.UNKNOWN)}function nt(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function $h(e,t,i,r){i[r++]=rp*(e[t++]/ct.radius),i[r++]=rp*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/ct.radius))),i[r]=e[t]}function WQ(e,t,i,r){$h(e,t,i,r),Tc(i,r,i,r)}function YQ(e,t,i,r){$h(e,t,i,r),xc(i,r,i,r)}function KQ(e,t,i,r,n){const s=.4999999*Math.PI,o=Nr(so*e[t+1],-s,s),a=Math.sin(o);i[r++]=so*e[t]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=e[t+2]}function fm(e,t,i,r){KQ(e,t,i,r,ct)}const NN=ct.radius*Math.PI/180,RN=180/(ct.radius*Math.PI);function _c(e,t,i,r){i[r]=e[t]*NN,i[r+1]=e[t+1]*NN,i[r+2]=e[t+2]}function Sc(e,t,i,r){i[r]=e[t]*RN,i[r+1]=e[t+1]*RN,i[r+2]=e[t+2]}function ZQ(e,t,i,r){$h(e,t,i,r),_c(i,r,i,r)}function JQ(e,t,i,r){Ac(e,t,i,r),_c(i,r,i,r)}function XQ(e,t,i,r){Ec(e,t,i,r),_c(i,r,i,r)}function QQ(e,t,i,r){Sc(e,t,i,r),Tc(i,r,i,r)}function eee(e,t,i,r){Sc(e,t,i,r),fm(i,r,i,r)}function tee(e,t,i,r){Sc(e,t,i,r),xc(i,r,i,r)}function V3(e,t,i,r,n){const s=n+e[t+2],o=so*e[t+1],a=so*e[t],u=Math.cos(o);i[r++]=Math.cos(a)*u*s,i[r++]=Math.sin(a)*u*s,i[r]=Math.sin(o)*s}function PN(e,t,i,r){V3(e,t,i,r,tu.radius)}function $N(e,t,i,r){V3(e,t,i,r,ma.radius)}function Tc(e,t,i,r){V3(e,t,i,r,ct.radius)}function j3(e,t,i,r,n){const s=e[t],o=e[t+1],a=e[t+2],u=Math.sqrt(s*s+o*o+a*a),c=TL(a/(u===0?1:u)),h=Math.atan2(o,s);i[r++]=rp*h,i[r++]=rp*c,i[r]=u-n}function DN(e,t,i,r){j3(e,t,i,r,tu.radius)}function LN(e,t,i,r){j3(e,t,i,r,ma.radius)}function Ec(e,t,i,r){j3(e,t,i,r,ct.radius)}function iee(e,t,i,r){Ec(e,t,i,r),fm(i,r,i,r)}function ree(e,t,i,r){Ec(e,t,i,r),xc(i,r,i,r)}function nee(e,t,i,r,n){const s=so*e[t],o=so*e[t+1],a=e[t+2],u=Math.sin(o),c=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*u*u);i[r++]=(h+a)*c*Math.cos(s),i[r++]=(h+a)*c*Math.sin(s),i[r++]=(h*(1-n.eccentricitySquared)+a)*u}function xc(e,t,i,r){nee(e,t,i,r,ct)}function Ac(e,t,i,r){const n=$Q,s=e[t],o=e[t+1],a=e[t+2];let u,c,h,f,y,m,g,v,b,w,T,A,R,M,C,k,B,H,Q,ee,le;u=Math.abs(a),c=s*s+o*o,h=Math.sqrt(c),f=c+a*a,y=Math.sqrt(f),ee=Math.atan2(o,s),m=a*a/f,g=c/f,M=n.a2/y,C=n.a3-n.a4/y,g>.3?(v=u/y*(1+g*(n.a1+M+m*C)/y),Q=Math.asin(v),w=v*v,b=Math.sqrt(1-w)):(b=h/y*(1-m*(n.a5-M-g*C)/y),Q=Math.acos(b),w=1-b*b,v=Math.sqrt(w)),T=1-ct.eccentricitySquared*w,A=ct.radius/Math.sqrt(T),R=n.a6*A,M=h-A*b,C=u-R*v,B=b*M+v*C,k=b*C-v*M,H=k/(R/T+B),Q+=H,le=B+k*H/2,a<0&&(Q=-Q),i[r++]=rp*ee,i[r++]=rp*Q,i[r]=le}function see(e,t,i,r){Ac(e,t,i,r),Tc(i,r,i,r)}function oee(e,t,i,r){Ac(e,t,i,r),fm(i,r,i,r)}const Wf={[I.WGS84]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:nt,[I.WGS84_COMPARABLE_LON_LAT]:nt,[I.SPHERICAL_ECEF]:Tc,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:fm,[I.PLATE_CARREE]:_c,[I.WGS84]:nt,[I.WGS84_ECEF]:xc},[I.CGCS2000]:{[I.CGCS2000]:nt,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:nt,[I.WGS84_COMPARABLE_LON_LAT]:nt,[I.SPHERICAL_ECEF]:Tc,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:_c,[I.WGS84]:null,[I.WGS84_ECEF]:xc},[I.GCSMARS2000]:{[I.CGCS2000]:null,[I.GCSMARS2000]:nt,[I.GCSMOON2000]:null,[I.LON_LAT]:nt,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:$N,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.GCSMOON2000]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:nt,[I.LON_LAT]:nt,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:PN,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.WEB_MERCATOR]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:$h,[I.WGS84_COMPARABLE_LON_LAT]:$h,[I.SPHERICAL_ECEF]:WQ,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:nt,[I.PLATE_CARREE]:ZQ,[I.WGS84]:$h,[I.WGS84_ECEF]:YQ},[I.WGS84_ECEF]:{[I.CGCS2000]:Ac,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:Ac,[I.WGS84_COMPARABLE_LON_LAT]:Ac,[I.SPHERICAL_ECEF]:see,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:oee,[I.PLATE_CARREE]:JQ,[I.WGS84]:Ac,[I.WGS84_ECEF]:nt},[I.SPHERICAL_ECEF]:{[I.CGCS2000]:Ec,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:Ec,[I.WGS84_COMPARABLE_LON_LAT]:Ec,[I.SPHERICAL_ECEF]:nt,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:iee,[I.PLATE_CARREE]:XQ,[I.WGS84]:Ec,[I.WGS84_ECEF]:ree},[I.SPHERICAL_MARS_PCPF]:{[I.CGCS2000]:null,[I.GCSMARS2000]:LN,[I.GCSMOON2000]:null,[I.LON_LAT]:LN,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:nt,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.SPHERICAL_MOON_PCPF]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:DN,[I.LON_LAT]:DN,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:nt,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.UNKNOWN]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:null,[I.WGS84_COMPARABLE_LON_LAT]:null,[I.SPHERICAL_ECEF]:null,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:nt,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:null,[I.WGS84]:null,[I.WGS84_ECEF]:null},[I.LON_LAT]:{[I.CGCS2000]:nt,[I.GCSMARS2000]:nt,[I.GCSMOON2000]:nt,[I.LON_LAT]:nt,[I.WGS84_COMPARABLE_LON_LAT]:nt,[I.SPHERICAL_ECEF]:Tc,[I.SPHERICAL_MARS_PCPF]:$N,[I.SPHERICAL_MOON_PCPF]:PN,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:fm,[I.PLATE_CARREE]:_c,[I.WGS84]:nt,[I.WGS84_ECEF]:xc},[I.WGS84_COMPARABLE_LON_LAT]:{[I.CGCS2000]:null,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:nt,[I.WGS84_COMPARABLE_LON_LAT]:nt,[I.SPHERICAL_ECEF]:Tc,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:null,[I.PLATE_CARREE]:_c,[I.WGS84]:nt,[I.WGS84_ECEF]:xc},[I.PLATE_CARREE]:{[I.CGCS2000]:Sc,[I.GCSMARS2000]:null,[I.GCSMOON2000]:null,[I.LON_LAT]:Sc,[I.WGS84_COMPARABLE_LON_LAT]:Sc,[I.SPHERICAL_ECEF]:QQ,[I.SPHERICAL_MARS_PCPF]:null,[I.SPHERICAL_MOON_PCPF]:null,[I.UNKNOWN]:null,[I.WEB_MERCATOR]:eee,[I.PLATE_CARREE]:nt,[I.WGS84]:Sc,[I.WGS84_ECEF]:tee}};function v8(e,t,i=z3()){return O(e)||O(t)?null:aee(e,t,i).projector}function aee(e,t,i){if(O(e)||O(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=Fv(e,i.source),n=Fv(t,i.dest);return r===I.UNKNOWN&&n===I.UNKNOWN?hr(e,t)?i.projector=nt:i.projector=null:i.projector=Wf[r][n],i}function z3(){return{source:{spatialReference:null,spatialReferenceId:I.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:I.UNKNOWN,metersPerUnit:1},projector:nt}}const lee={spatialReference:null,spatialReferenceId:I.UNKNOWN},uee={spatialReference:null,spatialReferenceId:I.UNKNOWN},b8=z3();z3();const so=NK(1),rp=SL(1),j0=Eo(),Ba=Eo(),Ua=Eo(),Yt=Eo();var WT;let Gs=WT=class extends j{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new WT({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};l([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Gs.prototype,"cols",void 0),l([d({type:st,json:{write:!0}})],Gs.prototype,"level",void 0),l([d({type:String,json:{write:!0}})],Gs.prototype,"levelValue",void 0),l([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Gs.prototype,"origin",void 0),l([d({type:Number,json:{write:!0}})],Gs.prototype,"resolution",void 0),l([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Gs.prototype,"rows",void 0),l([d({type:Number,json:{write:!0}})],Gs.prototype,"scale",void 0),Gs=WT=l([S("esri.layers.support.LOD")],Gs);const H3=Gs;var al;const ON=new xe({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Qt=al=class extends j{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:n=we.WebMercator,numLODs:s=24}=e;if(!ji(n)){const f=[];if(i)for(let y=0;y<i.length;y++){const m=i[y];f.push({level:y,scale:m,resolution:m})}else{let y=5e-4;for(let m=s-1;m>=0;m--)f.unshift({level:m,scale:y,resolution:y}),y*=2}return new al({dpi:96,lods:f,origin:new he(0,0,n),size:[r,r],spatialReference:n})}const o=Es(n),a=e.origin?new he({x:e.origin.x,y:e.origin.y,spatialReference:n}):new he(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),u=96,c=1/(pu(n)*39.37*u),h=[];if(i)for(let f=0;f<i.length;f++){const y=i[f],m=y*c;h.push({level:f,scale:y,resolution:m})}else{let f=O6(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const y=Math.ceil(s/t);h.push({level:0,scale:f,resolution:f*c});for(let m=1;m<y;m++){const g=f/2**t,v=g*c;h.push({level:m,scale:g,resolution:v}),f=g}}return new al({dpi:u,lods:h,origin:a,size:[r,r],spatialReference:n})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Es(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return he.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach(n=>{r.push(n.scale),t=n.scale>t?n.scale:t,i=n.scale<i?n.scale:i,this._levelToLOD[n.level]=n})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const n=t[r],s=t[r+1];if(n<=e)return r;if(s===e)return r+1;if(n>e&&s<e)return r+Math.log(n/e)/Math.log(n/s)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=i;else if(hr(t.spatialReference,this.spatialReference))s=t.x,o=t.y,r=i;else{const c=Kb(t,this.spatialReference);if(O(c))return null;s=c.x,o=c.y,r=i}const a=n.resolution*this.size[0],u=n.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:nu()}),r.level=e,r.row=Math.floor((this.origin.y-o)/u+.001),r.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=al.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===al.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(i=o)}if(!i)return;const r=e.level-i.level,n=i.resolution*this.size[0]/2**r,s=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=nu()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+r,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return al.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let n=0;n<r;n++){const s=this.lods[n],o=s.resolution*t;i.push(new H3({level:s.level,scale:s.scale,resolution:o}))}return new al({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};l([d({type:Number,json:{write:!0}})],Qt.prototype,"compressionQuality",void 0),l([d({type:Number,json:{write:!0}})],Qt.prototype,"dpi",void 0),l([d({type:String,json:{read:ON.read,write:ON.write,origins:{"web-scene":{read:!1,write:!1}}}})],Qt.prototype,"format",void 0),l([d({readOnly:!0})],Qt.prototype,"isWrappable",null),l([d({type:he,json:{write:!0}})],Qt.prototype,"origin",void 0),l([Z("origin")],Qt.prototype,"readOrigin",null),l([d({type:[H3],value:null,json:{write:!0}})],Qt.prototype,"lods",null),l([d({readOnly:!0})],Qt.prototype,"minScale",void 0),l([d({readOnly:!0})],Qt.prototype,"maxScale",void 0),l([d({readOnly:!0})],Qt.prototype,"scales",void 0),l([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Qt.prototype,"size",void 0),l([Z("size",["rows","cols"])],Qt.prototype,"readSize",null),l([te("size",{cols:{type:st},rows:{type:st}})],Qt.prototype,"writeSize",null),l([d({type:we,json:{write:!0}})],Qt.prototype,"spatialReference",void 0),Qt=al=l([S("esri.layers.support.TileInfo")],Qt),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Qt||(Qt={}));const ca=Qt,p1={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},T2={xsmall:544,small:768,medium:992,large:1200};function cee(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function E2(e,t){return t?p1[e].valueToClassName[t].split(" "):[]}const dee=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new Mi,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=T2}initialize(){this._breakpointsHandles.add(Y(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),We))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=En(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=cee(i);if(!r){const n=JSON.stringify(T2,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}i=r?i:T2,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=er.acquire(),r=er.acquire();let n,s=!1;for(n in p1){const o=this[n],a=p1[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,E2(n,o).forEach(u=>r.push(u)),E2(n,a).forEach(u=>i.push(u)))}s&&(this._applyClassNameChanges(i,r),er.release(i),er.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(s=>n.classList.remove(s)),i.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in p1)E2(r,this[r]).forEach(n=>i.classList.remove(n))}};return l([d()],t.prototype,"breakpoints",null),l([d()],t.prototype,"orientation",void 0),l([d()],t.prototype,"widthBreakpoint",void 0),l([d()],t.prototype,"heightBreakpoint",void 0),t=l([S("esri.views.BreakpointsOwner")],t),t};function G3(e){return typeof e=="string"?document.getElementById(e):e}function w8(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function kN(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function FN(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var hee="[object Object]";function pee(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function fee(e,t){return function(i){return e(t(i))}}var yee=Function.prototype,_8=Object.prototype,S8=yee.toString,mee=_8.hasOwnProperty,gee=S8.call(Object),vee=_8.toString,bee=fee(Object.getPrototypeOf,Object);function wee(e){return!!e&&typeof e=="object"}function _ee(e){if(!wee(e)||vee.call(e)!=hee||pee(e))return!1;var t=bee(e);if(t===null)return!0;var i=mee.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&S8.call(i)==gee}var See=_ee,lc={exports:{}},It={},ym={exports:{}},dd={};function T8(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Tee(e,t,i){}function Eee(e,t,i){}var xee=/javascript\s*\:/img;function Aee(e,t){return xee.test(t)?"":t}dd.whiteList=T8();dd.getDefaultWhiteList=T8;dd.onAttr=Tee;dd.onIgnoreAttr=Eee;dd.safeAttrValue=Aee;var Mee={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},ef=Mee;function Cee(e,t){e=ef.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,n=0,s=0,o="";function a(){if(!r){var h=ef.trim(e.slice(n,s)),f=h.indexOf(":");if(f!==-1){var y=ef.trim(h.slice(0,f)),m=ef.trim(h.slice(f+1));if(y){var g=t(n,o.length,y,m,h);g&&(o+=g+"; ")}}}n=s+1}for(;s<i;s++){var u=e[s];if(u==="/"&&e[s+1]==="*"){var c=e.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,r=!1}else u==="("?r=!0:u===")"?r=!1:u===";"?r||a():u===`
`&&a()}return ef.trim(o)}var Iee=Cee,z0=dd,Nee=Iee;function BN(e){return e==null}function Ree(e){var t={};for(var i in e)t[i]=e[i];return t}function E8(e){e=Ree(e||{}),e.whiteList=e.whiteList||z0.whiteList,e.onAttr=e.onAttr||z0.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||z0.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||z0.safeAttrValue,this.options=e}E8.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=Nee(e,function(u,c,h,f,y){var m=r[h],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(f):m instanceof RegExp&&(g=m.test(f)),g!==!0&&(g=!1),f=o(h,f),!!f){var v={position:c,sourcePosition:u,source:y,isWhite:g};if(g){var b=n(h,f,v);return BN(b)?h+":"+f:b}else{var b=s(h,f,v);if(!BN(b))return b}}});return a};var Pee=E8;(function(e,t){var i=dd,r=Pee;function n(o,a){var u=new r(a);return u.process(o)}t=e.exports=n,t.FilterCSS=r;for(var s in i)t[s]=i[s]})(ym,ym.exports);var q3={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},$ee=ym.exports.FilterCSS,Dee=ym.exports.getDefaultWhiteList,Bv=q3;function x8(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var A8=new $ee;function Lee(e,t,i){}function Oee(e,t,i){}function kee(e,t,i){}function Fee(e,t,i){}function M8(e){return e.replace(Uee,"&lt;").replace(Vee,"&gt;")}function Bee(e,t,i,r){if(i=$8(i),t==="href"||t==="src"){if(i=Bv.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(H0.lastIndex=0,H0.test(i))return""}else if(t==="style"){if(UN.lastIndex=0,UN.test(i)||(VN.lastIndex=0,VN.test(i)&&(H0.lastIndex=0,H0.test(i))))return"";r!==!1&&(r=r||A8,i=r.process(i))}return i=D8(i),i}var Uee=/</g,Vee=/>/g,jee=/"/g,zee=/&quot;/g,Hee=/&#([a-zA-Z0-9]*);?/gim,Gee=/&colon;?/gim,qee=/&newline;?/gim,H0=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,UN=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,VN=/u\s*r\s*l\s*\(.*/gi;function C8(e){return e.replace(jee,"&quot;")}function I8(e){return e.replace(zee,'"')}function N8(e){return e.replace(Hee,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function R8(e){return e.replace(Gee,":").replace(qee," ")}function P8(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return Bv.trim(t)}function $8(e){return e=I8(e),e=N8(e),e=R8(e),e=P8(e),e}function D8(e){return e=C8(e),e=M8(e),e}function Wee(){return""}function Yee(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(o){return i?!0:Bv.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,u){if(r(o))if(u.isClosing){var c="[/removed]",h=u.position+c.length;return n.push([s!==!1?s:u.position,h]),s=!1,c}else return s||(s=u.position),"[removed]";else return t(o,a,u)},remove:function(o){var a="",u=0;return Bv.forEach(n,function(c){a+=o.slice(u,c[0]),u=c[1]}),a+=o.slice(u),a}}}function Kee(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var n=e.indexOf("-->",r);if(n===-1)break;i=n+3}return t}function Zee(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}It.whiteList=x8();It.getDefaultWhiteList=x8;It.onTag=Lee;It.onIgnoreTag=Oee;It.onTagAttr=kee;It.onIgnoreTagAttr=Fee;It.safeAttrValue=Bee;It.escapeHtml=M8;It.escapeQuote=C8;It.unescapeQuote=I8;It.escapeHtmlEntities=N8;It.escapeDangerHtml5Entities=R8;It.clearNonPrintableCharacter=P8;It.friendlyAttrValue=$8;It.escapeAttrValue=D8;It.onIgnoreTagStripAll=Wee;It.StripTagBody=Yee;It.stripCommentTag=Kee;It.stripBlankChar=Zee;It.cssFilter=A8;It.getDefaultCSSWhiteList=Dee;var aw={},Ml=q3;function Jee(e){var t=Ml.spaceIndex(e);if(t===-1)var i=e.slice(1,-1);else var i=e.slice(1,t+1);return i=Ml.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Xee(e){return e.slice(0,2)==="</"}function Qee(e,t,i){var r="",n=0,s=!1,o=!1,a=0,u=e.length,c="",h="";e:for(a=0;a<u;a++){var f=e.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){r+=i(e.slice(n,a)),s=a,n=a;continue}if(f===">"){r+=i(e.slice(n,s)),h=e.slice(s,a+1),c=Jee(h),r+=t(s,r.length,c,h,Xee(h)),n=a+1,s=!1;continue}if(f==='"'||f==="'")for(var y=1,m=e.charAt(a-y);m.trim()===""||m==="=";){if(m==="="){o=f;continue e}m=e.charAt(a-++y)}}else if(f===o){o=!1;continue}}return n<e.length&&(r+=i(e.substr(n))),r}var ete=/[^a-zA-Z0-9_:\.\-]/gim;function tte(e,t){var i=0,r=[],n=!1,s=e.length;function o(f,y){if(f=Ml.trim(f),f=f.replace(ete,"").toLowerCase(),!(f.length<1)){var m=t(f,y||"");m&&r.push(m)}}for(var a=0;a<s;a++){var u=e.charAt(a),c,h;if(n===!1&&u==="="){n=e.slice(i,a),i=a+1;continue}if(n!==!1&&a===i&&(u==='"'||u==="'")&&e.charAt(a-1)==="="){if(h=e.indexOf(u,a+1),h===-1)break;c=Ml.trim(e.slice(i+1,h)),o(n,c),n=!1,a=h,i=a+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(h=ite(e,a),h===-1){c=Ml.trim(e.slice(i,a)),o(c),n=!1,i=a+1;continue}else{a=h-1;continue}else if(h=rte(e,a-1),h===-1){c=Ml.trim(e.slice(i,a)),c=jN(c),o(n,c),n=!1,i=a+1;continue}else continue}return i<e.length&&(n===!1?o(e.slice(i)):o(n,jN(Ml.trim(e.slice(i))))),Ml.trim(r.join(" "))}function ite(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function rte(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function nte(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function jN(e){return nte(e)?e.substr(1,e.length-2):e}aw.parseTag=Qee;aw.parseAttr=tte;var ste=ym.exports.FilterCSS,hs=It,L8=aw,ote=L8.parseTag,ate=L8.parseAttr,f1=q3;function G0(e){return e==null}function lte(e){var t=f1.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=f1.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=f1.trim(e.slice(0,-1))),{html:e,closing:i}}function ute(e){var t={};for(var i in e)t[i]=e[i];return t}function O8(e){e=ute(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=hs.onIgnoreTagStripAll),e.whiteList=e.whiteList||e.allowList||hs.whiteList,e.onTag=e.onTag||hs.onTag,e.onTagAttr=e.onTagAttr||hs.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||hs.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||hs.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||hs.safeAttrValue,e.escapeHtml=e.escapeHtml||hs.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new ste(e.css))}O8.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,u=i.safeAttrValue,c=i.escapeHtml,h=t.cssFilter;i.stripBlankChar&&(e=hs.stripBlankChar(e)),i.allowCommentTag||(e=hs.stripCommentTag(e));var f=!1;if(i.stripIgnoreTagBody){var f=hs.StripTagBody(i.stripIgnoreTagBody,s);s=f.onIgnoreTag}var y=ote(e,function(m,g,v,b,w){var T={sourcePosition:m,position:g,isClosing:w,isWhite:r.hasOwnProperty(v)},A=n(v,b,T);if(!G0(A))return A;if(T.isWhite){if(T.isClosing)return"</"+v+">";var R=lte(b),M=r[v],C=ate(R.html,function(B,H){var Q=f1.indexOf(M,B)!==-1,ee=o(v,B,H,Q);if(!G0(ee))return ee;if(Q)return H=u(v,B,H,h),H?B+'="'+H+'"':B;var ee=a(v,B,H,Q);return G0(ee)?void 0:ee}),b="<"+v;return C&&(b+=" "+C),R.closing&&(b+=" /"),b+=">",b}else{var A=s(v,b,T);return G0(A)?c(b):A}},c);return f&&(y=f.remove(y)),y};var cte=O8;(function(e,t){var i=It,r=aw,n=cte;function s(u,c){var h=new n(c);return h.process(u)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n;for(var o in i)t[o]=i[o];for(var o in r)t[o]=r[o];function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(lc,lc.exports);var dte=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,u){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):lc.exports.safeAttrValue(s,o,a,u)}};var n;t&&!i?n=t:t&&i?(n=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(s){s==="whiteList"?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new lc.exports.FilterXSS(n)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i!=null?i:{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),u=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||u?lc.exports.escapeAttrValue(t):!s&&!n?lc.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,n):lc.exports.safeAttrValue(t,i,r,n)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,u){var c=r.validate(u,i);return c.isValid?a.concat([u]):(n=!0,a.concat([c.sanitized]))},[]);else if(See(t)){var o=Object.keys(t);s=o.reduce(function(a,u){var c=t[u],h=r.validate(c,i);return h.isValid?a[u]=c:(n=!0,a[u]=h.sanitized),a},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const lw=new Map;function k8(){lw.clear()}function hte(e){return lw.get(e)}function pte(e,t){lw.set(e,t)}function x2(e){lw.delete(e)}var Xc,np,fte=function(e){if("WebkitTransition"in e.style)Xc="webkitTransitionEnd",np="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");Xc="transitionend",np="animationend"}},F8=function(e){Xc||fte(e)},yte=function(e,t){return t===void 0&&(t=e+"-active"),function(i){F8(i);var r=!1,n=function(s){r||(r=!0,i.removeEventListener(Xc,n),i.removeEventListener(np,n),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(Xc,n),i.addEventListener(np,n),requestAnimationFrame(function(){i.classList.add(t)})}},mte=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){F8(i);var n=!1,s=function(o){n||(n=!0,i.removeEventListener(Xc,s),i.removeEventListener(np,s),r())};i.classList.add(e),i.addEventListener(Xc,s),i.addEventListener(np,s),requestAnimationFrame(function(){i.classList.add(t)})}};const gte=W.getLogger("esri.widgets.support.widgetUtils");function B8(e){const t=er.acquire();for(let r=0;r<arguments.length;r++){const n=arguments[r],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const i=t.join(" ");return er.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{k8();for(const r of i)e.get(r.target)(r)});return(i,r,n)=>(e.has(i)&&gte.error("Already observing element",i),e.set(i,r),t.observe(i,n),gp(()=>{t.unobserve(i),e.delete(i)}))})();function jl(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function zN(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Mc(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function vte(e,t){return(e==="enter"?yte:mte)(t)}const bte=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],wte=bte.reduce((e,t)=>(e[t]=[],e),{}),_te=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],U8=new dte({whiteList:wte,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(_te.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Ste(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=i.top+i.height,s=r.top+r.height,o=i.top,a=r.top;(n>s||o<a)&&e.scrollIntoView({block:"end"})}function V8(e){return e==="Enter"||e===" "}const j8="http://www.w3.org/",uw=`${j8}2000/svg`,z8=`${j8}1999/xlink`;let Uv,HN=[],W3=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},Y3=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),H8=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Tte=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(Y3(e[r],t))return r}return-1},A2=(e,t,i,r)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(Y3(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Ete=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},YT=[],KT=!1,G8=e=>{(e.children||[]).forEach(G8),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},GN=()=>{KT=!1,YT.forEach(G8),YT.length=0},qN=e=>{YT.push(e),KT||(KT=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(GN,{timeout:16}):setTimeout(GN,16))},WN=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),qN(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),qN(e))},xte=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let a=n[o],u=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")ZT(e,u,!0);else if(a==="classes"){let c=Object.keys(u),h=c.length;for(let f=0;f<h;f++){let y=c[f];u[y]&&e.classList.add(y)}}else if(a==="styles"){let c=Object.keys(u),h=c.length;for(let f=0;f<h;f++){let y=c[f],m=u[y];m&&(H8(m),i.styleApplyer(e,y,m))}}else if(a!=="key"&&u!=null){let c=typeof u;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(u=r(a,u,e,t)),a==="oninput"&&function(){let h=u;u=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=u):i.namespace===uw?a==="href"?e.setAttributeNS(z8,a,u):e.setAttribute(a,u):c==="string"&&a!=="value"?a==="innerHTML"?e[a]=U8.sanitize(u):e.setAttribute(a,u):e[a]=u}}},Ate=(e,t,i)=>{if(t)for(let r of t)yh(r,e,void 0,i)},q8=(e,t,i)=>{Ate(e,t.children,i),t.text&&(e.textContent=t.text),xte(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},yh=(e,t,i,r)=>{let n,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),i!==void 0?t.insertBefore(n,i):t.appendChild(n);else{for(let u=0;u<=o.length;++u){let c=o.charAt(u);if(u===o.length||c==="."||c==="#"){let h=o.charAt(s-1),f=o.slice(s,u);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(r=W3(r,{namespace:uw})),r.namespace!==void 0?n=e.domNode=a.createElementNS(r.namespace,f):(n=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(n,i):n.parentNode!==t&&t.appendChild(n)),s=u+1}}q8(n,e,r)}},ZT=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},Mte=(e,t,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let u=s[a],c=i[u],h=t[u];if(u==="class")h!==c&&(ZT(e,h,!1),ZT(e,c,!0));else if(u==="classes"){let f=e.classList,y=Object.keys(c),m=y.length;for(let g=0;g<m;g++){let v=y[g],b=!!c[v];b!==!!h[v]&&(n=!0,b?f.add(v):f.remove(v))}}else if(u==="styles"){let f=Object.keys(c),y=f.length;for(let m=0;m<y;m++){let g=f[m],v=c[g];v!==h[g]&&(n=!0,v?(H8(v),r.styleApplyer(e,g,v)):r.styleApplyer(e,g,""))}}else if(c||typeof h!="string"||(c=""),u==="value"){let f=e[u];f!==c&&(e["oninput-value"]?f===e["oninput-value"]:c!==h)&&(e[u]=c,e["oninput-value"]=void 0),c!==h&&(n=!0)}else if(c!==h){let f=typeof c;f==="function"&&r.eventHandlerInterceptor||(r.namespace===uw?u==="href"?e.setAttributeNS(z8,u,c):e.setAttribute(u,c):f==="string"?u==="innerHTML"?e[u]=U8.sanitize(c):u==="role"&&c===""?e.removeAttribute(u):e.setAttribute(u,c):e[u]!==c&&(e[u]=c),n=!0)}}return n},Cte=(e,t,i,r,n)=>{if(i===r)return!1;r=r||HN;let s,o=(i=i||HN).length,a=r.length,u=0,c=0,h=!1;for(;c<a;){let f=u<o?i[u]:void 0,y=r[c];if(f!==void 0&&Y3(f,y))h=Uv(f,y,n)||h,u++;else{let m=Tte(i,y,u+1);if(m>=0){for(s=u;s<m;s++)WN(i[s]),A2(i,s,e,"removed");h=Uv(i[m],y,n)||h,u=m+1}else yh(y,t,u<o?i[u].domNode:void 0,n),Ete(y),A2(r,c,e,"added")}c++}if(o>u)for(s=u;s<o;s++)WN(i[s]),A2(i,s,e,"removed");return h};Uv=(e,t,i)=>{let r=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(o,r),t.domNode=o,n=!0,n}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=W3(i,{namespace:uw})),e.text!==t.text&&(s=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,s=Cte(t,r,e.children,t.children,i)||s,s=Mte(r,e.properties,t.properties,i)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),n};let tf=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,Uv(r,i,t)},domNode:e.domNode});const Ite={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let Dd=e=>W3(Ite,e),zl={create:(e,t)=>(t=Dd(t),yh(e,document.createElement("div"),void 0,t),tf(e,t)),append:(e,t,i)=>(i=Dd(i),yh(t,e,void 0,i),tf(t,i)),insertBefore:(e,t,i)=>(i=Dd(i),yh(t,e.parentNode,e,i),tf(t,i)),merge:(e,t,i)=>(i=Dd(i),t.domNode=e,q8(e,t,i),tf(t,i)),replace:(e,t,i)=>(i=Dd(i),yh(t,e.parentNode,e,i),e.parentNode.removeChild(e),tf(t,i))},W8,Nte=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};W8=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let Rte=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?W8(i.children,n=>n.domNode===r):void 0}),i},Pte=(e,t,i)=>{let r=function(n){i("domEvent",n);let s=t(),o=Nte(n.currentTarget,s.domNode);o.reverse();let a,u=Rte(s.getLastRender(),o);return e.scheduleRender(),u&&(a=u.properties[`on${n.type}`].apply(u.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,s,o,a)=>r},JT=e=>{let t,i,r=Dd(e),n=r.performanceLogger,s=!0,o=!1,a=[],u=[],c=(f,y,m)=>{let g,v=()=>g;r.eventHandlerInterceptor=Pte(t,v,n),g=f(y,m(),r),a.push(g),u.push(m)},h=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let y=u[f]();n("rendered",void 0),a[f].update(y),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(f,y)=>{c(zl.append,f,y)},insertBefore:(f,y)=>{c(zl.insertBefore,f,y)},merge:(f,y)=>{c(zl.merge,f,y)},replace:(f,y)=>{c(zl.replace,f,y)},detach:f=>{for(let y=0;y<u.length;y++)if(u[y]===f)return u.splice(y,1),a.splice(y,1)[0];throw new Error("renderFunction was not found")}},t},ll=class extends ce{constructor(){super(...arguments),this.items=new me,this._watchUpdatingTracking=new Rh,this._callbacks=new Map,this._projector=JT(),this._hiddenProjector=JT()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const r=()=>i.render();this._callbacks.set(i,r),this._projector.append(this.surface,r)}for(const i of t.removed){const r=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(r.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r=null;const n=()=>(r=e.render(),r);i.append(t,n),i.renderNow();const s={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const o=r.domNode.getBoundingClientRect();s.left=o.left,s.top=o.top,s.right=o.right,s.bottom=o.bottom}for(i.detach(n);t.firstChild;)t.removeChild(t.firstChild);return s}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}};l([d({readOnly:!0})],ll.prototype,"surface",void 0),l([d({readOnly:!0})],ll.prototype,"items",void 0),l([d({readOnly:!0})],ll.prototype,"needsRender",null),l([d({readOnly:!0})],ll.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],ll.prototype,"updating",void 0),ll=l([S("esri.views.overlay.ViewOverlay")],ll);const YN=ll;function K3(e,t,i,r){let n=null,s=1e3;typeof t=="number"?(s=t,r=i):(n=t!=null?t:null,s=i);let o,a=0;const u=()=>{a=0,e.apply(r,o)},c=(...h)=>{n&&n.apply(r,h),o=h,s?a||(a=setTimeout(u,s)):u()};return c.remove=()=>{a&&(clearTimeout(a),a=0)},c.forceUpdate=()=>{a&&(clearTimeout(a),u())},c.hasPendingUpdates=()=>!!a,c}function X(e,t){const i=t?{...t,source:e}:e;return d({aliasOf:i})}const $te="randomUUID"in crypto;function Dte(){if($te)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const Lte={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},Ote={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},kte=e=>({...Ote,...e}),Fte=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},Bte=(e,t)=>e.find(t),KN=(e,t,i=!1)=>{let r=e;return t.forEach((n,s)=>{const o=r!=null&&r.children?Bte(r.children,a=>a.domNode===n):void 0;i&&!o&&s!==t.length-1||(r=o)}),r},Ute=e=>{let t;const i={...Lte,...e},r=kte(i),n=r.performanceLogger;let s,o=!0,a=!1;const u=[],c=[],h=(y,m,g)=>{var w;let v;r.eventHandlerInterceptor=(T,A,R,M)=>function(C){let k;n("domEvent",C);const B=Fte(C.currentTarget,v.domNode),H=B.some(ee=>{var le;return customElements.get((le=ee==null?void 0:ee.tagName)==null?void 0:le.toLowerCase())});if(C.eventPhase===Event.CAPTURING_PHASE||!H)B.reverse(),k=KN(v.getLastRender(),B);else{const ee=C.composedPath(),le=ee.slice(ee.indexOf(C.currentTarget),ee.indexOf(v.domNode)).filter(be=>be.getRootNode()===be.ownerDocument).reverse();k=KN(v.getLastRender(),le,!0)}let Q;return k&&(Q=i.handleInterceptedEvent(t,k,this,C)),n("domEventProcessed",C),Q},(w=i.postProcessProjectionOptions)==null||w.call(i,r);const b=g();v=y(m,b,r),u.push(v),c.push(g),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,b)};let f=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let y=0;y<u.length;y++){const m=c[y]();n("rendered",void 0),u[y].update(m),n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(f=i.modifyDoRenderImplementation(f,u,c)),t={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(y,m)=>{h(zl.append,y,m)},insertBefore:(y,m)=>{h(zl.insertBefore,y,m)},merge:(y,m)=>{h(zl.merge,y,m)},replace:(y,m)=>{h(zl.replace,y,m)},detach:y=>{for(let m=0;m<c.length;m++)if(c[m]===y)return c.splice(m,1),u.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},ke={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Ld,Y8,cw,K8=!1,Vv=!1,Z3=!1,Yr=!1,ZN=null,XT=!1;const Np=typeof window<"u"?window:{};ke.cssVarShim&&Np.CSS;const xs=Np.document||{head:{}},qTe=Np.HTMLElement||class{},Ti={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},jv=ke.shadowDomShim&&ke.shadowDom?(()=>(xs.head.attachShadow+"").indexOf("[native")>-1)():!0,Vte=(()=>{let e=!1;try{xs.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),jte=e=>Promise.resolve(e),zte=ke.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,Z8=(e,t,i,r)=>{i&&i.map(([n,s,o])=>{const a=Gte(e,n),u=Hte(t,o),c=qte(n);Ti.ael(a,s,u,c),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Ti.rel(a,s,u,c))})},Hte=(e,t)=>i=>{try{ke.lazyLoad||e.$hostElement$[t](i)}catch(r){Zm(r)}},Gte=(e,t)=>t&4?xs:t&8?Np:t&16?xs.body:e,qte=e=>Vte?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,JN="http://www.w3.org/1999/xlink",Qc=(e,t="")=>()=>{},XN=new WeakMap,Wte=(e,t,i)=>{let r=Gv.get(e);zte&&i?(r=r||new CSSStyleSheet,r.replace(t)):r=t,Gv.set(e,r)},Yte=(e,t,i,r)=>{let n=J8(t,i),s=Gv.get(n);if(e=e.nodeType===11?e:xs,s)if(typeof s=="string"){e=e.head||e;let o=XN.get(e),a;o||XN.set(e,o=new Set),o.has(n)||(a=xs.createElement("style"),a.innerHTML=s,e.insertBefore(a,e.querySelector("link")),o&&o.add(n))}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},Kte=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=Qc("attachStyles",t.$tagName$),s=Yte(jv&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),r&2&&i.classList.add(s+"-s")),n()},J8=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),Zte=e=>Aie.map(t=>t(e)).find(t=>!!t),QN={},Jte="http://www.w3.org/2000/svg",Xte="http://www.w3.org/1999/xhtml",Qte=e=>e!=null,J3=e=>(e=typeof e,e==="object"||e==="function"),X8=(e,t,...i)=>{let r=null,n=null,s=null,o=!1,a=!1,u=[];const c=f=>{for(let y=0;y<f.length;y++)r=f[y],Array.isArray(r)?c(r):r!=null&&typeof r!="boolean"&&((o=typeof e!="function"&&!J3(r))&&(r=String(r)),o&&a?u[u.length-1].$text$+=r:u.push(o?zv(null,r):r),a=o)};if(c(i),t&&(ke.isDev&&e==="input"&&rie(t),ke.vdomKey&&t.key&&(n=t.key),ke.slotRelocation&&t.name&&(s=t.name),ke.vdomClass)){const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(y=>f[y]).join(" "))}if(ke.isDev&&u.some(Q8)&&xie(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),ke.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,u,tie);const h=zv(e,null);return h.$attrs$=t,u.length>0&&(h.$children$=u),ke.vdomKey&&(h.$key$=n),ke.slotRelocation&&(h.$name$=s),h},zv=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return ke.vdomAttribute&&(i.$attrs$=null),ke.vdomKey&&(i.$key$=null),ke.slotRelocation&&(i.$name$=null),i},eie={},Q8=e=>e&&e.$tag$===eie,tie={forEach:(e,t)=>e.map(eR).forEach(t),map:(e,t)=>e.map(eR).map(t).map(iie)},eR=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),iie=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),X8(e.vtag,i,...e.vchildren||[])}const t=zv(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},rie=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const r=t.indexOf("type"),n=t.indexOf("min"),s=t.indexOf("max"),o=t.indexOf("step");(i<r||i<n||i<s||i<o)&&u7('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},tR=(e,t,i,r,n,s)=>{if(i!==r){let o=sR(e,t),a=t.toLowerCase();if(t==="class"){const u=e.classList,c=iR(i),h=iR(r);u.remove(...c.filter(f=>f&&!h.includes(f))),u.add(...h.filter(f=>f&&!c.includes(f)))}else if(t==="style"){for(const u in i)(!r||r[u]==null)&&(u.includes("-")?e.style.removeProperty(u):e.style[u]="");for(const u in r)(!i||r[u]!==i[u])&&(u.includes("-")?e.style.setProperty(u,r[u]):e.style[u]=r[u])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):sR(Np,a)?t=a.slice(2):t=a[2]+t.slice(3),i&&Ti.rel(e,t,i,!1),r&&Ti.ael(e,t,r,!1);else{const u=J3(r);if((o||u&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{let h=r==null?"":r;t==="list"?o=!1:(i==null||e[t]!=h)&&(e[t]=h)}}catch{}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(c?e.removeAttributeNS(JN,t):e.removeAttribute(t)):(!o||s&4||n)&&!u&&(r=r===!0?"":r,c?e.setAttributeNS(JN,t,r):e.setAttribute(t,r))}}},nie=/\s/,iR=e=>e?e.split(nie):[],e7=(e,t,i,r)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||QN,o=t.$attrs$||QN;for(r in s)r in o||tR(n,r,s[r],void 0,i,t.$flags$);for(r in o)tR(n,r,s[r],o[r],i,t.$flags$)},Hv=(e,t,i,r)=>{let n=t.$children$[i],s=0,o,a,u;if(K8||(Z3=!0,n.$tag$==="slot"&&(Ld&&r.classList.add(Ld+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)o=n.$elm$=xs.createTextNode(n.$text$);else if(n.$flags$&1)o=n.$elm$=xs.createTextNode("");else{if(Yr||(Yr=n.$tag$==="svg"),o=n.$elm$=xs.createElementNS(Yr?Jte:Xte,n.$flags$&2?"slot-fb":n.$tag$),Yr&&n.$tag$==="foreignObject"&&(Yr=!1),e7(null,n,Yr),Qte(Ld)&&o["s-si"]!==Ld&&o.classList.add(o["s-si"]=Ld),n.$children$)for(s=0;s<n.$children$.length;++s)a=Hv(e,n,s,o),a&&o.appendChild(a);n.$tag$==="svg"?Yr=!1:o.tagName==="foreignObject"&&(Yr=!0)}return o["s-hn"]=cw,n.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=Y8,o["s-sn"]=n.$name$||"",u=e&&e.$children$&&e.$children$[i],u&&u.$tag$===n.$tag$&&e.$elm$&&mm(e.$elm$,!1)),o},mm=(e,t)=>{Ti.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==cw&&n["s-ol"]&&(r7(n).insertBefore(n,X3(n)),n["s-ol"].remove(),n["s-ol"]=void 0,Z3=!0),t&&mm(n,t)}Ti.$flags$&=-2},t7=(e,t,i,r,n,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===cw&&(o=o.shadowRoot);n<=s;++n)r[n]&&(a=Hv(null,i,n,e),a&&(r[n].$elm$=a,o.insertBefore(a,X3(t))))},i7=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,o7(r),Vv=!0,n["s-ol"]?n["s-ol"].remove():mm(n,!0),n.remove())},sie=(e,t,i,r)=>{let n=0,s=0,o=0,a=0,u=t.length-1,c=t[0],h=t[u],f=r.length-1,y=r[0],m=r[f],g,v;for(;n<=u&&s<=f;)if(c==null)c=t[++n];else if(h==null)h=t[--u];else if(y==null)y=r[++s];else if(m==null)m=r[--f];else if(q0(c,y))Od(c,y),c=t[++n],y=r[++s];else if(q0(h,m))Od(h,m),h=t[--u],m=r[--f];else if(q0(c,m))(c.$tag$==="slot"||m.$tag$==="slot")&&mm(c.$elm$.parentNode,!1),Od(c,m),e.insertBefore(c.$elm$,h.$elm$.nextSibling),c=t[++n],m=r[--f];else if(q0(h,y))(c.$tag$==="slot"||m.$tag$==="slot")&&mm(h.$elm$.parentNode,!1),Od(h,y),e.insertBefore(h.$elm$,c.$elm$),h=t[--u],y=r[++s];else{for(o=-1,a=n;a<=u;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===y.$key$){o=a;break}o>=0?(v=t[o],v.$tag$!==y.$tag$?g=Hv(t&&t[s],i,o,e):(Od(v,y),t[o]=void 0,g=v.$elm$),y=r[++s]):(g=Hv(t&&t[s],i,s,e),y=r[++s]),g&&r7(c.$elm$).insertBefore(g,X3(c.$elm$))}n>u?t7(e,r[f+1]==null?null:r[f+1].$elm$,i,r,s,f):s>f&&i7(t,n,u)},q0=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,X3=e=>e&&e["s-ol"]||e,r7=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Od=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,s=t.$tag$,o=t.$text$;let a;o===null?(Yr=s==="svg"?!0:s==="foreignObject"?!1:Yr,s==="slot"||e7(e,t,Yr),r!==null&&n!==null?sie(i,r,t,n):n!==null?(e.$text$!==null&&(i.textContent=""),t7(i,null,t,n,0,n.length-1)):r!==null&&i7(r,0,r.length-1),Yr&&s==="svg"&&(Yr=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:e.$text$!==o&&(i.data=o)},n7=e=>{let t=e.childNodes,i,r,n,s,o,a;for(r=0,n=t.length;r<n;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(o=i["s-sn"],i.hidden=!1,s=0;s<n;s++)if(a=t[s].nodeType,t[s]["s-hn"]!==i["s-hn"]||o!==""){if(a===1&&o===t[s].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&t[s].textContent.trim()!==""){i.hidden=!0;break}}n7(i)}},gs=[],s7=e=>{let t,i,r,n,s,o,a=0,u=e.childNodes,c=u.length;for(;a<c;a++){if(t=u[a],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=t["s-sn"],o=r.length-1;o>=0;o--)i=r[o],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(rR(i,n)?(s=gs.find(h=>h.$nodeToRelocate$===i),Vv=!0,i["s-sn"]=i["s-sn"]||n,s?s.$slotRefNode$=t:gs.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&gs.map(h=>{rR(h.$nodeToRelocate$,i["s-sn"])&&(s=gs.find(f=>f.$nodeToRelocate$===i),s&&!h.$slotRefNode$&&(h.$slotRefNode$=s.$slotRefNode$))})):gs.some(h=>h.$nodeToRelocate$===i)||gs.push({$nodeToRelocate$:i}));t.nodeType===1&&s7(t)}},rR=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",o7=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(o7)},oie=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||zv(null,null),s=Q8(t)?t:X8(null,null,t);cw=i.tagName,r.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},r.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=i[o])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=n.$elm$=i.shadowRoot||i,Ld=i["s-sc"],Y8=i["s-cr"],K8=jv&&(r.$flags$&1)!==0,Vv=!1,Od(n,s);{if(Ti.$flags$|=1,Z3){s7(s.$elm$);let o,a,u,c,h,f,y=0;for(;y<gs.length;y++)o=gs[y],a=o.$nodeToRelocate$,a["s-ol"]||(u=xs.createTextNode(""),u["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=u,a));for(y=0;y<gs.length;y++)if(o=gs[y],a=o.$nodeToRelocate$,o.$slotRefNode$){for(c=o.$slotRefNode$.parentNode,h=o.$slotRefNode$.nextSibling,u=a["s-ol"];u=u.previousSibling;)if(f=u["s-nr"],f&&f["s-sn"]===a["s-sn"]&&c===f.parentNode&&(f=f.nextSibling,!f||!f["s-nr"])){h=f;break}(!h&&c!==a.parentNode||a.nextSibling!==h)&&a!==h&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),c.insertBefore(a,h))}else a.nodeType===1&&(a.hidden=!0)}Vv&&n7(s.$elm$),Ti.$flags$&=-2,gs.length=0}},aie=e=>ke.lazyLoad?Rp(e).$hostElement$:e,WTe=(e,t,i)=>{const r=aie(e);return{emit:n=>(ke.isDev&&!r.isConnected&&u7(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),lie(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n}))}},lie=(e,t,i)=>{const r=Ti.ce(t,i);return e.dispatchEvent(r),r},uie=(e,t)=>{},Q3=(e,t)=>(e.$flags$|=16,uie(e,e.$ancestorComponent$),Iie(()=>cie(e,t))),cie=(e,t)=>{const i=e.$hostElement$,r=Qc("scheduleUpdate",e.$cmpMeta$.$tagName$),n=i;let s;return t?s=Dh(n,"componentWillLoad"):s=Dh(n,"componentWillUpdate"),s=nR(s,()=>Dh(n,"componentWillRender")),r(),nR(s,()=>die(e,n,t))},die=async(e,t,i)=>{const r=e.$hostElement$,n=Qc("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&Kte(e);const s=Qc("render",e.$cmpMeta$.$tagName$);hie(e,t,r),s(),n(),pie(e)},hie=(e,t,i)=>{try{ZN=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(ke.hasRenderFn||ke.reflect)&&(ke.vdomRender||ke.reflect)&&(ke.hydrateServerSide||oie(e,t))}catch(a){Zm(a,e.$hostElement$)}return ZN=null,null},pie=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=Qc("postUpdate",t),n=i;e.$ancestorComponent$,Dh(n,"componentDidRender"),e.$flags$&64?(Dh(n,"componentDidUpdate"),r()):(e.$flags$|=64,Dh(n,"componentDidLoad"),r())},YTe=e=>{if(ke.updatable){const t=Rp(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&Q3(t,!1),i}return!1},Dh=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){Zm(r)}},nR=(e,t)=>e&&e.then?e.then(t):t(),fie=(e,t)=>e!=null&&!J3(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,yie=(e,t)=>Rp(e).$instanceValues$.get(t),mie=(e,t,i,r)=>{const n=Rp(e),s=e,o=n.$instanceValues$.get(t),a=n.$flags$,u=s;i=fie(i,r.$members$[t][0]);const c=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!c){n.$instanceValues$.set(t,i);{if(r.$watchers$&&a&128){const f=r.$watchers$[t];f&&f.map(y=>{try{u[y](i,o,t)}catch(m){Zm(m,s)}})}if((a&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(i,o,t)===!1)return;Q3(n,!1)}}}},gie=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),n=e.prototype;r.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(n,s,{get(){return yie(this,s)},set(a){mie(this,s,a,t)},configurable:!0,enumerable:!0})});{const s=new Map;n.attributeChangedCallback=function(o,a,u){Ti.jmp(()=>{const c=s.get(o);if(this.hasOwnProperty(c))u=this[c],delete this[c];else if(n.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==u)return;this[c]=u===null&&typeof this[c]=="boolean"?!1:u})},e.observedAttributes=r.filter(([o,a])=>a[0]&15).map(([o,a])=>{const u=a[1]||o;return s.set(u,o),a[0]&512&&t.$attrsToReflect$.push([o,u]),u})}}return e},vie=async(e,t,i,r,n)=>{if((t.$flags$&32)===0&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),n.style)){let o=n.style;typeof o!="string"&&(o=o[t.$modeName$=Zte(e)]);const a=J8(i,t.$modeName$);if(!Gv.has(a)){const u=Qc("registerStyles",i.$tagName$);Wte(a,o,!!(i.$flags$&1)),u()}}t.$ancestorComponent$,(()=>Q3(t,!0))()},bie=e=>{},wie=e=>{if((Ti.$flags$&1)===0){const t=Rp(e),i=t.$cmpMeta$,r=Qc("connectedCallback",i.$tagName$);t.$flags$&1?(Z8(e,t,i.$listeners$),bie(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&_ie(e),i.$members$&&Object.entries(i.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const o=e[n];delete e[n],e[n]=o}}),vie(e,t,i)),r()}},_ie=e=>{const t=e["s-cr"]=xs.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Sie=e=>{if((Ti.$flags$&1)===0){const t=Rp(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},KTe=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};ke.member&&(i.$members$=t[2]),ke.hostListener&&(i.$listeners$=t[3]),ke.watchCallback&&(i.$watchers$=e.$watchers$),ke.reflect&&(i.$attrsToReflect$=[]),ke.shadowDom&&!jv&&i.$flags$&1&&(i.$flags$|=8);const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Eie(this,i)},connectedCallback(){wie(this),ke.connectedCallback&&r&&r.call(this)},disconnectedCallback(){Sie(this),ke.disconnectedCallback&&n&&n.call(this)},__attachShadow(){jv?ke.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,gie(e,i)},ZTe=e=>{const t=new URL(e,Ti.$resourcesUrl$);return t.origin!==Np.location.origin?t.href:t.pathname},Tie=e=>Ti.$resourcesUrl$=e,a7=new WeakMap,Rp=e=>a7.get(e),Eie=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return ke.isDev&&(i.$renderCount$=0),ke.method&&ke.lazyLoad&&(i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r)),ke.asyncLoading&&(i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[]),Z8(e,i,t.$listeners$),a7.set(e,i)},sR=(e,t)=>t in e,Zm=(e,t)=>(0,console.error)(e,t),l7=ke.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],xie=(...e)=>console.error(...l7,...e),u7=(...e)=>console.warn(...l7,...e),Gv=new Map,Aie=[],oR=[],c7=[],Mie=(e,t)=>i=>{e.push(i),XT||(XT=!0,t&&Ti.$flags$&4?Cie(QT):Ti.raf(QT))},aR=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){Zm(i)}e.length=0},QT=()=>{aR(oR),aR(c7),(XT=oR.length>0)&&Ti.raf(QT)},Cie=e=>jte().then(e),Iie=Mie(c7,!0),JTe={isDev:!!ke.isDev,isBrowser:!0,isServer:!1,isTesting:!!ke.isTesting};let d7;function Nie(){Tie(ws(He(d7)))}d7="components/assets";const h7=Symbol("widget"),Rie=[],Pie={},qv=new WeakMap;function p7(e,t){let i=t.children;if(i&&i.length)for(let n=0;n<i.length;++n)i[n]=p7(e,i[n]);else i=Rie;const r=t.vnodeSelector;if(eM(r)){const n=t.properties||Pie,s=n.key||r;return{vnodeSelector:"div",properties:{key:s,afterCreate:$ie,afterUpdate:Die,afterRemoved:f7,parentWidget:e,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}},children:void 0,text:void 0,domNode:null}}return t}function $ie(e,t,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=e,qv.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),r._internalHandles.add(gp(()=>f7(e)))}function Die(e,t,i,{widgetProperties:r}){var s;const n=qv.get(e);n&&(n.set(r),(s=n.afterUpdate)==null||s.call(n,n,e))}function f7(e){const t=qv.get(e);t&&(t.destroy(),qv.delete(e))}function eM(e){return typeof e=="function"&&e[h7]}const lR=new Set;function Lie(e){lR.add(e),e.finally(()=>lR.delete(e))}const y7="esri.widgets.Widget",Oie=W.getLogger(y7);let kie=0;const Fie={widgetIcon:"esri-icon-checkbox-unchecked"};function m7(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?m7(e[i],t[i]):e[i]=t[i]);return e}const Bie=Ute({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,n,s,o)=>{const a=t(r,n,s,o),u=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||u){const c=r[2].toLowerCase()+r.slice(3),h=m=>a.call(s,m);s.addEventListener(c,h,u);const f=()=>s.removeEventListener(c,h,u),y=o.afterRemoved;o.afterRemoved=m=>{y==null||y(m),f()}}return a}},handleInterceptedEvent(e,t,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const u=t.properties;(a in u||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,a in u))&&(k8(),e.scheduleRender(),u[a].call(u.bind||i,r))}});let M2=!1,zt=class extends jb(Ma.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new Mi,this._projector=Bie,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=Fie.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=DA(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const s=await di(this._messageBundleProps.map(async({bundlePath:o,propertyName:a})=>{let u=await i3(o);this.uiStrings&&Object.keys(this.uiStrings)&&(u=m7($(u),this.uiStrings)),this[a]=u}));for(const o of s)o.error&&Oie.error("widget-intl:locale-error",this.declaredClass,o.error)}await this.loadLocale()}),Nie();const i="esri-widget-uid-"+Dte(),r=this.render.bind(this);this._trackingTarget=new Bb(()=>this.scheduleRender());const n=()=>{var h;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const s=r();let{properties:o}=s;o||(s.properties=o={});let{key:a,styles:u}=o;a||(o.key=i),u||(o.styles=u={}),u.display||(u.display="");let c=0;return(h=s.children)==null||h.forEach(f=>{if(eM(f.vnodeSelector))return;let{properties:y}=f;y||(f.properties=y={}),y.key||(y.key=`${this.id}--${c++}`)}),p7(this,s)};this.render=()=>{if(M2)return n();let s=hte(this);if(s)return s;this._trackingTarget.clear(),M2=!0;try{s=_a(this._trackingTarget,n)}catch(o){throw console.error(o),o}finally{M2=!1}return pte(this,s),s},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),Lie(this._resourcesFetch)}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(K_)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(En(this._trackingTarget),En(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,x2(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return G3(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+kie++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(x2(this),this._projector.scheduleRender())}classes(...e){return B8.apply(this,e)}renderNow(){x2(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this._internalHandles.add(Y(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&Lb(i)&&this._internalHandles.add(this._delegatedEventNames.map(n=>Ob(i,n,s=>{this.emit(n,s)})),"delegated-events")},We)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(K_),this.scheduleRender()};this._internalHandles.add([Y6(e),Y(()=>this.uiStrings,e),Ln(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};zt[h7]=!0,l([d()],zt.prototype,"_readyForTrueRender",void 0),l([d({value:null})],zt.prototype,"container",null),l([je("container")],zt.prototype,"castContainer",null),l([d({aliasOf:"container"})],zt.prototype,"domNode",void 0),l([d()],zt.prototype,"iconClass",void 0),l([d()],zt.prototype,"id",null),l([d()],zt.prototype,"label",void 0),l([d()],zt.prototype,"renderable",null),l([d()],zt.prototype,"uiStrings",void 0),l([d()],zt.prototype,"viewModel",void 0),l([d()],zt.prototype,"visible",void 0),l([d()],zt.prototype,"key",void 0),l([d()],zt.prototype,"children",void 0),l([d()],zt.prototype,"afterCreate",void 0),l([d()],zt.prototype,"afterUpdate",void 0),l([d()],zt.prototype,"afterRemoved",void 0),zt=l([S(y7)],zt);const Ci=zt;function Uie(e){return 32+e.length}function Vie(){return 16}function XTe(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=Uie(r);break;case"number":t+=Vie();break;case"boolean":t+=4}}return t}function QTe(e,t){return 32+e.length*t}var gm;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(gm||(gm={}));const uR=["B","kB","MB","GB","TB"];function jie(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(gm.KILOBYTES));i=Nr(i,0,uR.length-1);const r=ru(t/gm.KILOBYTES**i,{maximumFractionDigits:2});return yo(e.units.bytes[uR[i]],{fileSize:r})}function zie(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const n=t.find(s=>s.name===i);return n?Hie({tagName:r,tags:n.tags}):null}function Hie(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(n=>n.name===t);return r&&r.value||null}var eE;const Gie={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let yr=eE=class extends j{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=zie({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return Gie[t]||null}clone(){return new eE({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};l([d({type:String})],yr.prototype,"contentType",void 0),l([d()],yr.prototype,"exifInfo",void 0),l([d({readOnly:!0})],yr.prototype,"orientationInfo",null),l([d({type:st})],yr.prototype,"id",void 0),l([d({type:String})],yr.prototype,"globalId",void 0),l([d({type:String})],yr.prototype,"keywords",void 0),l([d({type:String})],yr.prototype,"name",void 0),l([d({json:{read:!1}})],yr.prototype,"parentGlobalId",void 0),l([d({json:{read:!1}})],yr.prototype,"parentObjectId",void 0),l([d({type:st})],yr.prototype,"size",void 0),l([d({json:{read:!1}})],yr.prototype,"url",void 0),yr=eE=l([S("esri.layers.support.AttachmentInfo")],yr);const qie=yr;var tE;let ai=tE=class extends j{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new tE($({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};l([d({type:[String],json:{write:!0}})],ai.prototype,"attachmentTypes",void 0),l([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],ai.prototype,"attachmentsWhere",void 0),l([d({type:Boolean,json:{write:!0}})],ai.prototype,"cacheHint",void 0),l([d({type:[String],json:{write:!0}})],ai.prototype,"keywords",void 0),l([d({type:[Number],json:{write:!0}})],ai.prototype,"globalIds",void 0),l([d({json:{write:!0}})],ai.prototype,"name",void 0),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ai.prototype,"num",void 0),l([d({type:[Number],json:{write:!0}})],ai.prototype,"objectIds",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ai.prototype,"returnMetadata",void 0),l([d({type:[Number],json:{write:!0}})],ai.prototype,"size",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],ai.prototype,"start",void 0),l([te("start"),te("num")],ai.prototype,"writeStart",null),l([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ai.prototype,"where",void 0),ai=tE=l([S("esri.rest.support.AttachmentQuery")],ai),ai.from=it(ai);const iE=ai,Wie="esri.widgets.Feature.support.featureUtils",cR=W.getLogger(Wie),Yie=/href=(""|'')/gi,Kie=/(\{([^\{\r\n]+)\})/g,Zie=/\'/g,g7=/^\s*expression\//i,Jie=/(\n)/gi,Xie=/[\u00A0-\u9999<>\&]/gim,Qie=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,ere=/^(?:mailto:|tel:)/,v7="relationships/",rE=_3("short-date-short-time");function b7(e){if(!O(e))return e.get("sourceLayer")||e.get("layer")}async function Wv(e,t){return typeof e=="function"?e.call(null,t):e}function w7(e=""){if(e)return!ere.test(e.trim().toLowerCase())}function _7(e){return!!e&&g7.test(e)}function tre(e,t){if(!_7(t)||!e)return null;const i=t.replace(g7,"").toLowerCase();let r;return e.some(n=>n.name.toLowerCase()===i&&(r=n,!0)),r}function S7(e,t){const i=tre(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function ire(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function rre(e){return e.replace(Yie,"")}function Yv(e,t){const i=tM(t,e);return i?i.name:e}function nre(e,t){return e&&e.map(i=>Yv(i,t))}function tM(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function T7(e){return`${e}`.trim()}function Cc({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:n,fieldInfoMap:s}){return r?nE({formattedAttributes:t,template:lre(r,{...t,...n,...e},i),fieldInfoMap:s}):""}function nE({formattedAttributes:e,template:t,fieldInfoMap:i}){return T7(rre(yo(yo(t,r=>ire(r,i)),e)))}function sre(e,t,i=!1){const r=t[e];if(typeof r=="string"){const n="%27",s=(i?encodeURIComponent(r):r).replace(Zie,n);t[e]=s}}function ore(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>sre(r,i,t)),i}function are(e,t,i){const r=(t=T7(t))&&t[0]!=="{";return yo(e,ore(i,r))}function sE(e,t){return e.replace(Kie,(i,r,n)=>{const s=tM(t,n);return s?`{${s.name}}`:r})}function lre(e,t,i){const r=sE(e,i);return r&&r.replace(Qie,(n,s,o)=>are(n,s||o,t))}function ure(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function cre(e){return(e==null?void 0:e.type)==="feature"}function dR(e){return!!(e!=null&&e.layer)}function dre(e){return(e==null?void 0:e.type)==="map-image"}function hre(e,t){var c;const i=t.fieldInfos,r=t.fieldName,n=(c=E7(i,r))==null?void 0:c.clone(),s=t.preventPlacesFormatting,o=t.layer,a=tM(o,r);if(n&&(a==null?void 0:a.type)==="date"){const h=n.format||new hh;h.dateFormat=h.dateFormat||"short-date-short-time",h.dateTimeFormatOptions=!dR(o)&&cre(o)&&o.datesInUnknownTimezone||dR(o)&&dre(o.layer)&&o.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=h}const u=n&&n.format;return typeof e=="string"&&ZL(r)&&u?u.formatRasterPixelValue(e):typeof(e=ure(e,u))=="string"||e==null||u==null?Jm(e):s?ru(e,{...eO(u),minimumFractionDigits:0,maximumFractionDigits:20}):u.format(e)}function E7(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==i)&&(r=n,!0)),r}function pre({fieldName:e,graphic:t,layer:i}){if(da(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const n=i.getFeatureType(t);return n?n.name:null}function fre({fieldName:e,value:t,graphic:i,layer:r}){if(da(e)||!r||typeof r.getFieldDomain!="function")return null;const n=r.getFieldDomain(e,{feature:i});return n&&n.type==="coded-value"?n.getName(t):null}function yre(e,t){const{creatorField:i,creationDateField:r,editorField:n,editDateField:s}=e;if(!t)return;const o=t[s];if(typeof o=="number"){const u=t[n];return{type:"edit",date:bo(o,rE),user:u}}const a=t[r];if(typeof a=="number"){const u=t[i];return{type:"create",date:bo(a,rE),user:u}}return null}function mre(e,t){const i=new Map;return e&&e.forEach(r=>{const n=Yv(r.fieldName,t);r.fieldName=n,i.set(n.toLowerCase(),r)}),i}function hR(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const s=n&&n.fieldInfos;s&&t.push(...s)}}),t}function iM(e){return e.replace(Xie,t=>`&#${t.charCodeAt(0)};`)}function Jm(e){return typeof e=="string"?e.replace(Jie,'<br class="esri-text-new-line" />'):e}function x7(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:s,graphic:o}=e;if(t==null)return"";const a=fre({fieldName:i,value:t,graphic:o,layer:s});if(a)return a;const u=pre({fieldName:i,graphic:o,layer:s});if(u)return u;if(n.get(i.toLowerCase()))return hre(t,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:s});const c=s&&s.fieldsIndex;return c&&c.isDateField(i)?bo(t,rE):Jm(t)}function C2({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:s}){const o={};return s==null||s.forEach(a=>_re({attributes:o,relatedInfo:a,fieldInfoMap:n,fieldInfos:e,layer:i})),Object.keys(t).forEach(a=>{const u=t[a];o[a]=x7({fieldName:a,fieldInfos:e,fieldInfoMap:n,layer:i,value:u,graphic:r})}),o}async function gre(e,t){var h,f;const{layer:i,graphic:r,outFields:n,objectIds:s,returnGeometry:o,spatialReference:a}=e,u=s[0];if(typeof u!="number"&&typeof u!="string"){const y="Could not query required fields for the specified feature. The feature's ID is invalid.",m={layer:i,graphic:r,objectId:u,requiredFields:n};return cR.warn(y,m),null}if(!((f=(h=i.capabilities)==null?void 0:h.operations)!=null&&f.supportsQuery)){const y="The specified layer cannot be queried. The following fields will not be available.",m={layer:i,graphic:r,requiredFields:n,returnGeometry:o};return cR.warn(y,m),null}const c=i.createQuery();return c.objectIds=s,c.outFields=n!=null&&n.length?n:[i.objectIdField],c.returnGeometry=!!o,c.returnZ=!!o,c.returnM=!!o,c.outSpatialReference=a,(await i.queryFeatures(c,t)).features[0]}async function vre(e){var r;if(!((r=e.expressionInfos)!=null&&r.length))return!1;const t=await Ta(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function bre({graphic:e,popupTemplate:t,layer:i,spatialReference:r},n){if(!i||!t||(typeof i.load=="function"&&await i.load(n),!e.attributes))return;const s=e.attributes[i.objectIdField];if(s==null)return;const o=[s],a=await t.getRequiredFields(i.fieldsIndex),u=$Z(a,e),c=u?[]:a,h=t.returnGeometry||await vre(t);if(u&&!h)return;const f=await gre({layer:i,graphic:e,outFields:c,objectIds:o,returnGeometry:h,spatialReference:r},n);f&&(f.geometry&&(e.geometry=f.geometry),f.attributes&&(e.attributes={...e.attributes,...f.attributes}))}function da(e=""){return!!e&&e.includes(v7)}function wre(e){return e?`${v7}${e.layerId}/${e.fieldName}`:""}function pR({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:s}){e&&t&&i&&Object.keys(t.attributes).forEach(o=>{const a=wre({layerId:i.relation.id.toString(),fieldName:o}),u=t.attributes[o];e[a]=x7({fieldName:a,fieldInfos:r,fieldInfoMap:n,layer:s,value:u,graphic:t})})}function _re({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(s=>pR({attributes:e,graphic:s,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(s=>pR({attributes:e,graphic:s,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n})))}const fR=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},A7=({layer:e,method:t,query:i,definitionExpression:r})=>{var o,a;if(!((a=(o=e.capabilities)==null?void 0:o.query)!=null&&a.supportsCacheHint)||t==="attachments")return;const n=E(i.where)&&i.where,s=E(i.geometry)&&i.geometry;fR(r)||fR(n)||(s==null?void 0:s.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},Sre=({query:e,layer:t,method:i})=>{A7({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},Tre=({queryPayload:e,layer:t,method:i})=>{A7({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},yR={editing:!1,operations:{add:!0,update:!0,delete:!0}},M7=me.ofType(qie),Ere="graphic.layer.capabilities.operations.supportsResizeAttachments";let es=class extends ce{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...yR},this.activeAttachmentInfo=null,this.attachmentInfos=new M7,this.graphic=null,this.mode="view",this.own(Y(()=>this.graphic,()=>this._graphicChanged(),We))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...yR,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(Ere)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new P("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getFeatureId(),r=new iE({objectIds:[i],returnMetadata:!0}),n=[],s=e.queryAttachments(r).then(a=>a[i]||n).catch(()=>n);this._getAttachmentsPromise=s,this.notifyChange("state");const o=await s;return t.removeAll(),o.length&&t.addMany(o),this._getAttachmentsPromise=null,this.notifyChange("state"),o}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:n}=this;if(!e)throw new P("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!n.operations.add)throw new P("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new P("invalid-layer","addAttachment(): A valid layer is required.");const s=t.addAttachment(r,e).then(a=>this._queryAttachment(a.objectId)),o=await s;return i.add(o),o}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:n}=this;if(!e)throw new P("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!n.operations.delete)throw new P("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new P("invalid-layer","deleteAttachment(): A valid layer is required.");const s=t.deleteAttachments(r,[e.id]).then(()=>e),o=await s;return i.remove(o),o}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:r,graphic:n,abilities:s}=this;if(!e)throw new P("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new P("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!s.operations.update)throw new P("invalid-abilities","updateAttachment(): Update abilities are required.");const o=r.findIndex(c=>c===t);if(!i||typeof i.updateAttachment!="function")throw new P("invalid-layer","updateAttachment(): A valid layer is required.");const a=i.updateAttachment(n,t.id,e).then(c=>this._queryAttachment(c.objectId)),u=await a;return r.splice(o,1,u),u}async _queryAttachment(e){if(!e)throw new P("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,i=this._getFeatureId(),r=new iE({objectIds:[i],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(r).then(n=>n[i][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:i}=e,{attributes:r}=t;return r&&r[i]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=b7(e);this._attachmentLayer=t?t.type==="scene"&&E(t.associatedLayer)?t.associatedLayer:t:null}};l([d()],es.prototype,"abilities",void 0),l([je("abilities")],es.prototype,"castAbilities",null),l([d()],es.prototype,"activeAttachmentInfo",void 0),l([d({readOnly:!0,type:M7})],es.prototype,"attachmentInfos",void 0),l([d({type:zi})],es.prototype,"graphic",void 0),l([d()],es.prototype,"mode",void 0),l([d({readOnly:!0})],es.prototype,"state",null),l([d({readOnly:!0})],es.prototype,"supportsResizeAttachments",null),es=l([S("esri.widgets.Attachments.AttachmentsViewModel")],es);const rM=es;function xre(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function Are(e){const t=He("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Si(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var Mre=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},C7=function(e,t){for(var i=0,r=e.length;i<r;i++){var n=e[i];Array.isArray(n)?C7(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=Mre(n)),t.push(n))}},Cre=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var n=[];return C7(i,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function N(e,t,...i){return typeof e!="function"||eM(e)?Cre(e,t,...i):e(t,...i)}const mR={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},ne={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},I2=window.CSS;let Ri=class extends Ci{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new rM,this.visibleElements={...mR},this._supportsImageOrientation=I2&&I2.supports&&I2.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([iu(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),Y(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),We)])}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return{...mR,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new P("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new P("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new P("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return N("div",{class:this.classes(ne.base,ne.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?N("div",{key:"error-message",class:ne.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return N("div",{class:ne.loaderContainer,key:"loader"},N("div",{class:ne.loader}))}renderProgressBar(){return this.visibleElements.progressBar?N("div",{class:ne.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?N("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(ne.esriButton,ne.esriButtonTertiary,ne.esriButtonSmall,ne.esriButtonHalf,e&&ne.buttonDisabled)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?N("button",{type:"submit",disabled:i,class:this.classes(ne.esriButton,ne.esriButtonSecondary,ne.esriButtonSmall,ne.esriButtonHalf,{[ne.buttonDisabled]:i})},this.messages.add):null,s=t?N("span",{key:"file-name",class:ne.fileName},t.name):null,o=N("form",{bind:this,afterCreate:Mc,afterRemoved:zN,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},N("fieldset",{class:ne.fileFieldset},s,N("label",{class:this.classes(ne.fileLabel,ne.esriButton,ne.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,N("input",{class:ne.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,r);return N("div",{key:"add-form-container",class:ne.formNode},o)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:r,submitting:n}=this,{contentType:s,size:o,url:a}=e,{abilities:u}=i,c=n||!r,h=u.editing&&u.operations.delete&&t.deleteButton?N("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:T=>this._submitDeleteAttachment(T,e),class:this.classes(ne.esriButton,ne.esriButtonSmall,ne.esriButtonTertiary,ne.deleteButton,{[ne.buttonDisabled]:n})},this.messages.delete):null,f=u.editing&&u.operations.update&&t.updateButton?N("button",{disabled:c,key:"update-button",type:"submit",class:this.classes(ne.esriButton,ne.esriButtonSmall,ne.esriButtonThird,{[ne.buttonDisabled]:c})},this.messages.update):null,y=this.visibleElements.cancelUpdateButton?N("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(ne.esriButton,ne.esriButtonSmall,ne.esriButtonTertiary,ne.esriButtonThird,{[ne.buttonDisabled]:n})},this.messages.cancel):null,m=r?N("span",{key:"file-name",class:ne.fileName},r.name):null,g=u.editing&&u.operations.update?N("fieldset",{key:"file",class:ne.fileFieldset},m,N("label",{class:this.classes(ne.fileLabel,ne.esriButton,ne.esriButtonSecondary)},this.messages.changeFile,N("input",{class:ne.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,v=N("fieldset",{key:"size",class:ne.metadataFieldset},N("label",null,jie(this.messagesUnits,o))),b=N("fieldset",{key:"content-type",class:ne.metadataFieldset},N("label",null,s)),w=N("form",{bind:this,afterCreate:Mc,afterRemoved:zN,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},N("div",{class:ne.metadata},v,b),g,N("div",{class:ne.actions},h,y,f));return N("div",{key:"edit-form-container",class:ne.formNode},N("a",{class:ne.itemLink,href:a,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),N("div",{class:ne.itemLinkOverlay},N("span",{class:ne.itemLinkOverlayIcon},N("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},N("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),N("path",{fill:"none",d:"M0 0h32v32H0z"}))))),w)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:i}=this.viewModel,{contentType:r,name:n,url:s}=e,o=i&&xre(r),a=this._getCSSTransform(e,o),u=a?{transform:a,"image-orientation":"none"}:{},c=s.includes("?")?"&":"?",h=o?`${s}${c}w=${t}`:Are(r),f={[ne.itemMaskIcon]:!o},y={[ne.itemImageResizable]:i};return N("div",{class:this.classes(f,ne.itemMask)},N("img",{styles:u,alt:n,src:h,class:this.classes(y,ne.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i}=this,{abilities:r}=i,{name:n,url:s}=e,o=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),a=r.editing?N("span",{"aria-hidden":"true",class:this.classes(ne.itemChevronIcon,jl(this.container)?ne.iconLeft:ne.iconRight)}):null,u=[o,N("label",{class:ne.itemLabel},N("span",{class:ne.itemFilename},n||this.messages.noTitle),a)],c=r.editing?N("button",{key:"details-button",bind:this,class:ne.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},u):N("a",{key:"details-link",class:ne.itemButton,href:s,target:"_blank"},u);return N("li",{class:ne.item,key:e},c)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:n}=t,s=r&&r.length,o={[ne.containerList]:e!=="preview",[ne.containerPreview]:e==="preview"},a=n.editing&&n.operations.add&&i.addButton?N("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(ne.esriButton,ne.esriButtonTertiary,ne.addAttachmentButton),type:"button"},N("span",{"aria-hidden":"true",class:this.classes(ne.itemAddIcon,ne.iconPlus)}),this.messages.add):null,u=s?N("ul",{class:ne.items},r.toArray().map(c=>this.renderAttachmentInfo({attachmentInfo:c,displayType:e}))):N("div",{class:ne.empty},this.messages.noAttachments);return N("div",{key:"attachments-container",class:this.classes(ne.container,o)},u,a)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&t&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};l([X("viewModel.abilities")],Ri.prototype,"abilities",void 0),l([d()],Ri.prototype,"displayType",void 0),l([d({readOnly:!0})],Ri.prototype,"effectiveDisplayType",null),l([X("viewModel.graphic")],Ri.prototype,"graphic",void 0),l([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ri.prototype,"label",void 0),l([d(),Si("esri/widgets/Attachments/t9n/Attachments")],Ri.prototype,"messages",void 0),l([d(),Si("esri/core/t9n/Units")],Ri.prototype,"messagesUnits",void 0),l([d({readOnly:!0})],Ri.prototype,"selectedFile",void 0),l([d({readOnly:!0})],Ri.prototype,"submitting",void 0),l([d({readOnly:!0})],Ri.prototype,"error",void 0),l([d({type:rM})],Ri.prototype,"viewModel",void 0),l([d()],Ri.prototype,"visibleElements",void 0),l([je("visibleElements")],Ri.prototype,"castVisibleElements",null),Ri=l([S("esri.widgets.Attachments")],Ri);const Ire=Ri;let Yf=class extends rM{constructor(e){super(e),this.description=null,this.title=null}};l([d()],Yf.prototype,"description",void 0),l([d()],Yf.prototype,"title",void 0),Yf=l([S("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Yf);const nM=Yf,Nre={heading:"esri-widget__heading"};function sM(e,t){const i=Rre(e.level),r=`h${i}`;return delete e.level,N(r,{...e,class:B8(Nre.heading,e.class),role:"heading","aria-level":String(i)},t)}function Rre(e){return Nr(Math.ceil(e),1,6)}const N2={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let kd=class extends Ci{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return N("div",{class:N2.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?N(sM,{level:this.headingLevel,class:N2.title},e):null}renderDescription(){const{description:e}=this;return e?N("div",{key:"description",class:N2.description},e):null}};l([d()],kd.prototype,"description",void 0),l([d()],kd.prototype,"headingLevel",void 0),l([d()],kd.prototype,"title",void 0),kd=l([S("esri.widgets.Feature.support.FeatureElementInfo")],kd);const oM=kd,Pre={base:"esri-feature-attachments"};let qs=class extends Ci{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new Ire,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new nM}initialize(){this._featureElementInfo=new oM,this.own([Y(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),We),Y(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,We)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var t;const{attachmentsWidget:e}=this;return N("div",{class:Pre.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};l([d({readOnly:!0})],qs.prototype,"attachmentsWidget",void 0),l([X("viewModel.description")],qs.prototype,"description",void 0),l([X("attachmentsWidget.displayType")],qs.prototype,"displayType",void 0),l([X("viewModel.graphic")],qs.prototype,"graphic",void 0),l([d()],qs.prototype,"headingLevel",void 0),l([X("viewModel.title")],qs.prototype,"title",void 0),l([d({type:nM})],qs.prototype,"viewModel",void 0),qs=l([S("esri.widgets.Feature.FeatureAttachments")],qs);const $re=qs;let ul=class extends uu(ce){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(Y(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},We))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(Wv(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=Wv(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};l([d({readOnly:!0})],ul.prototype,"created",void 0),l([d()],ul.prototype,"creator",void 0),l([d()],ul.prototype,"destroyer",void 0),l([d({type:zi})],ul.prototype,"graphic",void 0),l([d({readOnly:!0})],ul.prototype,"state",null),ul=l([S("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],ul);const Kv=ul;function Tr(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:Lre(e[t])}}}function Dre(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Lre(e){return function(t,...i){Dre(t)?V8(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function Ore(e){return e.split(",").map(t=>t.trim())}function I7(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:Ore(e);i.push(...r)}}const N7="calcite-theme-";function kre(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function R7(){return kre().startsWith("dark")}function Fre(){return`${N7}${R7()?"dark":"light"}`}function Bre(e){Ure(e),e.classList.add(Fre())}function Ure(e){Array.from(e.classList).forEach(t=>{t.startsWith(N7)&&e.classList.remove(t)})}function P7(e){return e&&typeof e.render=="function"}function Vre(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const R2={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let Fd=class extends Ci{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(r=>{w7(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}renderLoading(){return N("div",{class:R2.loaderContainer,key:"loader"},N("div",{class:R2.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?N("div",{key:e,bind:e,afterCreate:this._attachToNode}):P7(e)?N("div",{key:e},!e.destroyed&&e.render()):N("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return N("div",{class:R2.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};l([X("viewModel.creator")],Fd.prototype,"creator",void 0),l([X("viewModel.graphic")],Fd.prototype,"graphic",void 0),l([d({type:Kv})],Fd.prototype,"viewModel",void 0),Fd=l([S("esri.widgets.Feature.FeatureContent")],Fd);const y1=Fd;let qo=class extends ce{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const n=r.clone();n.label=S7(n,e),i.push(n)}),i}};l([d()],qo.prototype,"attributes",void 0),l([d({type:[lO]})],qo.prototype,"expressionInfos",void 0),l([d()],qo.prototype,"description",void 0),l([d({type:[zm]})],qo.prototype,"fieldInfos",void 0),l([d({readOnly:!0})],qo.prototype,"formattedFieldInfos",null),l([d()],qo.prototype,"title",void 0),qo=l([S("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],qo);const dw=qo,jre=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function zre(e){let t=null;return jre.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function Hre(e,t){if(typeof t!="string"||!t)return t;const i=zre(t);if(!i)return t;const r=t.match(i.pattern),n=r&&r[2],s=yo(yo(i.label,{messages:e,hierPart:n}),{appName:i.appName}),o=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${o} href="$1"${a}>${s}</a>`)}const rf={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let ts=class extends Ci{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new dw,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new oM,this.own(Y(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),We))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,n=e.label||r,s=i?i[r]==null?"":i[r]:"",o=!(!e.format||!e.format.dateFormat),a=typeof s=="number"&&!o?this._forceLTR(s):Hre(this.messagesURIUtils,s),u={[rf.fieldDataDate]:o};return N("tr",{key:`fields-element-info-row-${r}-${t}`},N("th",{key:`fields-element-info-row-header-${r}-${t}`,class:rf.fieldHeader,innerHTML:n}),N("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(rf.fieldData,u),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?N("table",{class:rf.esriTable,summary:this.messages.fieldsSummary},N("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return N("div",{class:rf.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};l([X("viewModel.attributes")],ts.prototype,"attributes",void 0),l([X("viewModel.description")],ts.prototype,"description",void 0),l([X("viewModel.expressionInfos")],ts.prototype,"expressionInfos",void 0),l([X("viewModel.fieldInfos")],ts.prototype,"fieldInfos",void 0),l([X("viewModel.title")],ts.prototype,"title",void 0),l([d({type:dw})],ts.prototype,"viewModel",void 0),l([d(),Si("esri/widgets/Feature/t9n/Feature")],ts.prototype,"messages",void 0),l([d(),Si("esri/widgets/support/t9n/uriUtils")],ts.prototype,"messagesURIUtils",void 0),ts=l([S("esri.widgets.Feature.FeatureFields")],ts);const $7=ts,Gre={maximumFractionDigits:20};function qre(e){return ru(e,Gre)}var oE;let Bu=oE=class extends j{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e==null?0:e}clone(){return new oE({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};l([d({type:se,json:{type:[st],write:!0}})],Bu.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],Bu.prototype,"label",void 0),l([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Bu.prototype,"value",void 0),l([te("value")],Bu.prototype,"writeValue",null),Bu=oE=l([S("esri.renderers.visualVariables.support.ColorStop")],Bu);const Wre=Bu;function hw(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Yre(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Kre(e,t,i,r,n,s,o,a,u,c,h,f,y,m,g,v){const b=new Float32Array(16);return b[0]=e,b[1]=t,b[2]=i,b[3]=r,b[4]=n,b[5]=s,b[6]=o,b[7]=a,b[8]=u,b[9]=c,b[10]=h,b[11]=f,b[12]=y,b[13]=m,b[14]=g,b[15]=v,b}function Zre(e,t){return new Float32Array(e,t,16)}const Jre=hw();Object.freeze(Object.defineProperty({__proto__:null,create:hw,clone:Yre,fromValues:Kre,createView:Zre,IDENTITY:Jre},Symbol.toStringTag,{value:"Module"}));const Xre=(e,t)=>{const i=fu(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Ia(i,i)},Qre=(e,t)=>{const i=fu(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Ia(i,i)},ene=(e,t)=>{const i=1-t,r=fu(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Ia(r,r)},tne=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),n=fu(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Ia(n,n)},ine=(e,t)=>{const i=1-2*t,r=fu(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return Ia(r,r)},rne=(e,t)=>{const i=fu(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Ia(i,i)},nne=(e,t)=>{const i=1-t,r=fu(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Ia(r,r)};class pw{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Er(t.strength,i.strength,r),this.radius=Er(t.radius,i.radius,r),this.threshold=Er(t.threshold,i.threshold,r)}clone(){return new pw(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Py(this.radius),strength:this.strength,threshold:this.threshold}}}class fw{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Er(t.radius,i.radius,r))}clone(){return new fw(this.radius)}toJSON(){return{type:"blur",radius:Py(this.radius)}}}class vm{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Er(t.amount,i.amount,r),this._updateMatrix()}clone(){return new vm(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||hw();switch(this.type){case"brightness":this._colorMatrix=Xre(t,this.amount);break;case"contrast":this._colorMatrix=Qre(t,this.amount);break;case"grayscale":this._colorMatrix=ene(t,this.amount);break;case"invert":this._colorMatrix=ine(t,this.amount);break;case"saturate":this._colorMatrix=rne(t,this.amount);break;case"sepia":this._colorMatrix=nne(t,this.amount)}}}class yw{constructor(t,i,r,n){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Er(t.offsetX,i.offsetX,r),this.offsetY=Er(t.offsetY,i.offsetY,r),this.blurRadius=Er(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Er(t.color[0],i.color[0],r)),this.color[1]=Math.round(Er(t.color[1],i.color[1],r)),this.color[2]=Math.round(Er(t.color[2],i.color[2],r)),this.color[3]=Er(t.color[3],i.color[3],r)}clone(){return new yw(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Py(this.offsetX),yoffset:Py(this.offsetY),blurRadius:Py(this.blurRadius),color:t}}}class mw{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Er(t.angle,i.angle,r),this._updateMatrix()}clone(){return new mw(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||hw();this._colorMatrix=tne(t,this.angle)}}class gw{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Er(t.amount,i.amount,r)}clone(){return new gw(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Er(e,t,i){return e+(t-e)*i}function Py(e){return Math.round(1e3*wo(e))/1e3}function sne(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new vm(e.type,0);case"saturate":case"brightness":case"contrast":return new vm(e.type,1);case"opacity":return new gw(1);case"hue-rotate":return new mw(0);case"blur":return new fw(0);case"drop-shadow":return new yw(0,0,0,[...n3("transparent")]);case"bloom":return new pw(0,0,1)}}function one(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,n)=>r.type===i[n].type)}function ane(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let n=r.length;n<i.length;n++)r.push(sne(i[n]))}function lne(e){const t=e[0];return!!t&&"type"in t}var gR,vR,D7={exports:{}};function L7(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=bR(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new P("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:bR(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!one(t[i].effects,t[i+1].effects))throw new P("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});ane(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function bR(e){let t;if(!e)return[];try{t=D7.exports.parse(e)}catch(i){throw new P("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>une(i))}function une(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return cne(e);case"opacity":return dne(e);case"hue-rotate":return hne(e);case"blur":return pne(e);case"drop-shadow":return fne(e);case"bloom":return yne(e)}}catch(t){throw t.details.filter=e,t}throw new P("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function cne(e){let t=1;return Pp(e.parameters,1),e.parameters.length===1&&(t=fs(e.parameters[0])),new vm(e.name,t)}function dne(e){let t=1;return Pp(e.parameters,1),e.parameters.length===1&&(t=fs(e.parameters[0])),new gw(t)}function hne(e){let t=0;return Pp(e.parameters,1),e.parameters.length===1&&(t=_ne(e.parameters[0])),new mw(t)}function pne(e){let t=0;return Pp(e.parameters,1),e.parameters.length===1&&(t=uM(e.parameters[0]),Xm(t,e.parameters[0])),new fw(t)}function fne(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new P("effect:type-error","Accepts only one color",{});i=Sne(r)}else{const n=uM(r);if(Object.isFrozen(t))throw new P("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&Xm(n,r)}if(t.length<2||t.length>3)throw new P("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new yw(t[0],t[1],t[2]||0,i||O7("black"))}function yne(e){let t=1,i=0,r=0;return Pp(e.parameters,3),e.parameters[0]&&(t=fs(e.parameters[0])),e.parameters[1]&&(i=uM(e.parameters[1]),Xm(i,e.parameters[1])),e.parameters[2]&&(r=fs(e.parameters[2])),new pw(t,i,r)}function Pp(e,t){if(e.length>t)throw new P("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function vw(e){if(e.type==="color")return"<color>";if(e.unit){if(lM[e.unit])return"<length>";if(aM[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Xm(e,t){if(e<0)throw new P("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function mne(e){if(e.type!=="quantity"||e.unit!==null)throw new P("effect:type-error",`Expected <double>, Actual: ${vw(e)}`,{term:e})}function gne(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new P("effect:type-error",`Expected <double> or <percentage>, Actual: ${vw(e)}`,{term:e})}vR=function(){function e(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function t(n,s,o,a){var u=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(u,t.prototype),u.expected=s,u.found=o,u.location=a,u.name="SyntaxError",u}function i(n,s,o){return o=o||" ",n.length>s?n:(s-=n.length,n+(o+=o.repeat(s)).slice(0,s))}function r(n,s){var o,a={},u=(s=s!==void 0?s:{}).grammarSource,c={start:eI},h=eI,f="none",y=")",m=",",g="(",v="%",b="px",w="cm",T="mm",A="in",R="pt",M="pc",C="deg",k="rad",B="grad",H="turn",Q="#",ee=".",le="e",be=/^[ \t\n\r]/,oe=/^[a-z\-]/,Nt=/^[0-9a-fA-F]/,Or=/^[+\-]/,ft=/^[0-9]/,kr=Io("none"),Un=ni("none",!1),Pj=ni(")",!1),WC=ni(",",!1),$j=Io("whitespace"),YC=Gp([" ","	",`
`,"\r"],!1,!1),Dj=Io("function"),Lj=ni("(",!1),Oj=Io("identifier"),KC=Gp([["a","z"],"-"],!1,!1),kj=Io("percentage"),Fj=ni("%",!1),Bj=Io("length"),Uj=ni("px",!1),Vj=ni("cm",!1),jj=ni("mm",!1),zj=ni("in",!1),Hj=ni("pt",!1),Gj=ni("pc",!1),qj=Io("angle"),Wj=ni("deg",!1),Yj=ni("rad",!1),Kj=ni("grad",!1),Zj=ni("turn",!1),Jj=Io("number"),Xj=Io("color"),Qj=ni("#",!1),ZC=Gp([["0","9"],["a","f"],["A","F"]],!1,!1),JC=Gp(["+","-"],!1,!1),Pa=Gp([["0","9"]],!1,!1),ez=ni(".",!1),tz=ni("e",!1),iz=function(){return[]},rz=function(x,U){return{type:"function",name:x,parameters:U||[]}},nz=function(x,U){return U.length>0?kz(x,U,3):[x]},sz=function(x){return{type:"quantity",value:x.value,unit:x.unit}},oz=function(x){return{type:"color",colorType:x.type,value:x.value}},az=function(x){return x},lz=function(){return w0()},uz=function(x){return{value:x,unit:"%"}},cz=function(x){return{value:x,unit:"px"}},dz=function(x){return{value:x,unit:"cm"}},hz=function(x){return{value:x,unit:"mm"}},pz=function(x){return{value:x,unit:"in"}},fz=function(x){return{value:x,unit:"pt"}},yz=function(x){return{value:x,unit:"pc"}},mz=function(x){return{value:x,unit:"deg"}},gz=function(x){return{value:x,unit:"rad"}},vz=function(x){return{value:x,unit:"grad"}},bz=function(x){return{value:x,unit:"turn"}},wz=function(x){return{value:x,unit:null}},_z=function(){return{type:"hex",value:w0()}},Sz=function(x){return{type:"function",value:x}},Tz=function(){return{type:"named",value:w0()}},Ez=function(){return parseFloat(w0())},L=0,yt=0,b0=[{line:1,column:1}],$s=0,Ww=[],de=0;if("startRule"in s){if(!(s.startRule in c))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');h=c[s.startRule]}function w0(){return n.substring(yt,L)}function ni(x,U){return{type:"literal",text:x,ignoreCase:U}}function Gp(x,U,z){return{type:"class",parts:x,inverted:U,ignoreCase:z}}function xz(){return{type:"end"}}function Io(x){return{type:"other",description:x}}function XC(x){var U,z=b0[x];if(z)return z;for(U=x-1;!b0[U];)U--;for(z={line:(z=b0[U]).line,column:z.column};U<x;)n.charCodeAt(U)===10?(z.line++,z.column=1):z.column++,U++;return b0[x]=z,z}function QC(x,U){var z=XC(x),Pe=XC(U);return{source:u,start:{offset:x,line:z.line,column:z.column},end:{offset:U,line:Pe.line,column:Pe.column}}}function Ae(x){L<$s||(L>$s&&($s=L,Ww=[]),Ww.push(x))}function Az(x,U,z){return new t(t.buildMessage(x,U),x,U,z)}function eI(){var x;return(x=Mz())===a&&(x=Cz()),x}function Mz(){var x,U;return de++,x=L,si(),n.substr(L,4)===f?(U=f,L+=4):(U=a,de===0&&Ae(Un)),U!==a?(si(),yt=x,x=iz()):(L=x,x=a),de--,x===a&&de===0&&Ae(kr),x}function Cz(){var x,U;if(x=[],(U=Yw())!==a)for(;U!==a;)x.push(U),U=Yw();else x=a;return x}function Yw(){var x,U,z,Pe;return x=L,si(),(U=Nz())!==a?(si(),(z=Iz())===a&&(z=null),si(),n.charCodeAt(L)===41?(Pe=y,L++):(Pe=a,de===0&&Ae(Pj)),Pe!==a?(si(),yt=x,x=rz(U,z)):(L=x,x=a)):(L=x,x=a),x}function Iz(){var x,U,z,Pe,fi,bt,an,_0;if(x=L,(U=Kw())!==a){for(z=[],Pe=L,fi=si(),n.charCodeAt(L)===44?(bt=m,L++):(bt=a,de===0&&Ae(WC)),bt===a&&(bt=null),an=si(),(_0=Kw())!==a?Pe=fi=[fi,bt,an,_0]:(L=Pe,Pe=a);Pe!==a;)z.push(Pe),Pe=L,fi=si(),n.charCodeAt(L)===44?(bt=m,L++):(bt=a,de===0&&Ae(WC)),bt===a&&(bt=null),an=si(),(_0=Kw())!==a?Pe=fi=[fi,bt,an,_0]:(L=Pe,Pe=a);yt=x,x=nz(U,z)}else L=x,x=a;return x}function Kw(){var x,U;return x=L,(U=Rz())===a&&(U=Pz())===a&&(U=$z())===a&&(U=Dz()),U!==a&&(yt=x,U=sz(U)),(x=U)===a&&(x=L,(U=Lz())!==a&&(yt=x,U=oz(U)),x=U),x}function si(){var x,U;for(de++,x=[],be.test(n.charAt(L))?(U=n.charAt(L),L++):(U=a,de===0&&Ae(YC));U!==a;)x.push(U),be.test(n.charAt(L))?(U=n.charAt(L),L++):(U=a,de===0&&Ae(YC));return de--,U=a,de===0&&Ae($j),x}function Nz(){var x,U,z;return de++,x=L,(U=tI())!==a?(n.charCodeAt(L)===40?(z=g,L++):(z=a,de===0&&Ae(Lj)),z!==a?(yt=x,x=az(U)):(L=x,x=a)):(L=x,x=a),de--,x===a&&(U=a,de===0&&Ae(Dj)),x}function tI(){var x,U,z;if(de++,x=L,U=[],oe.test(n.charAt(L))?(z=n.charAt(L),L++):(z=a,de===0&&Ae(KC)),z!==a)for(;z!==a;)U.push(z),oe.test(n.charAt(L))?(z=n.charAt(L),L++):(z=a,de===0&&Ae(KC));else U=a;return U!==a&&(yt=x,U=lz()),de--,(x=U)===a&&(U=a,de===0&&Ae(Oj)),x}function Rz(){var x,U,z;return de++,x=L,si(),(U=on())!==a?(n.charCodeAt(L)===37?(z=v,L++):(z=a,de===0&&Ae(Fj)),z!==a?(yt=x,x=uz(U)):(L=x,x=a)):(L=x,x=a),de--,x===a&&de===0&&Ae(kj),x}function Pz(){var x,U,z;return de++,x=L,si(),(U=on())!==a?(n.substr(L,2)===b?(z=b,L+=2):(z=a,de===0&&Ae(Uj)),z!==a?(yt=x,x=cz(U)):(L=x,x=a)):(L=x,x=a),x===a&&(x=L,si(),(U=on())!==a?(n.substr(L,2)===w?(z=w,L+=2):(z=a,de===0&&Ae(Vj)),z!==a?(yt=x,x=dz(U)):(L=x,x=a)):(L=x,x=a),x===a&&(x=L,si(),(U=on())!==a?(n.substr(L,2)===T?(z=T,L+=2):(z=a,de===0&&Ae(jj)),z!==a?(yt=x,x=hz(U)):(L=x,x=a)):(L=x,x=a),x===a&&(x=L,si(),(U=on())!==a?(n.substr(L,2)===A?(z=A,L+=2):(z=a,de===0&&Ae(zj)),z!==a?(yt=x,x=pz(U)):(L=x,x=a)):(L=x,x=a),x===a&&(x=L,si(),(U=on())!==a?(n.substr(L,2)===R?(z=R,L+=2):(z=a,de===0&&Ae(Hj)),z!==a?(yt=x,x=fz(U)):(L=x,x=a)):(L=x,x=a),x===a&&(x=L,si(),(U=on())!==a?(n.substr(L,2)===M?(z=M,L+=2):(z=a,de===0&&Ae(Gj)),z!==a?(yt=x,x=yz(U)):(L=x,x=a)):(L=x,x=a)))))),de--,x===a&&de===0&&Ae(Bj),x}function $z(){var x,U,z;return de++,x=L,(U=on())!==a?(n.substr(L,3)===C?(z=C,L+=3):(z=a,de===0&&Ae(Wj)),z!==a?(yt=x,x=mz(U)):(L=x,x=a)):(L=x,x=a),x===a&&(x=L,(U=on())!==a?(n.substr(L,3)===k?(z=k,L+=3):(z=a,de===0&&Ae(Yj)),z!==a?(yt=x,x=gz(U)):(L=x,x=a)):(L=x,x=a),x===a&&(x=L,(U=on())!==a?(n.substr(L,4)===B?(z=B,L+=4):(z=a,de===0&&Ae(Kj)),z!==a?(yt=x,x=vz(U)):(L=x,x=a)):(L=x,x=a),x===a&&(x=L,(U=on())!==a?(n.substr(L,4)===H?(z=H,L+=4):(z=a,de===0&&Ae(Zj)),z!==a?(yt=x,x=bz(U)):(L=x,x=a)):(L=x,x=a)))),de--,x===a&&(U=a,de===0&&Ae(qj)),x}function Dz(){var x,U;return de++,x=L,si(),(U=on())!==a?(yt=x,x=wz(U)):(L=x,x=a),de--,x===a&&de===0&&Ae(Jj),x}function Lz(){var x,U,z,Pe;if(de++,x=L,n.charCodeAt(L)===35?(U=Q,L++):(U=a,de===0&&Ae(Qj)),U!==a){if(z=[],Nt.test(n.charAt(L))?(Pe=n.charAt(L),L++):(Pe=a,de===0&&Ae(ZC)),Pe!==a)for(;Pe!==a;)z.push(Pe),Nt.test(n.charAt(L))?(Pe=n.charAt(L),L++):(Pe=a,de===0&&Ae(ZC));else z=a;z!==a?(yt=x,x=_z()):(L=x,x=a)}else L=x,x=a;return x===a&&(x=L,(U=Yw())!==a&&(yt=x,U=Sz(U)),(x=U)===a&&(x=L,(U=tI())!==a&&(yt=x,U=Tz()),x=U)),de--,x===a&&(U=a,de===0&&Ae(Xj)),x}function on(){var x,U,z,Pe,fi,bt,an;for(x=L,Or.test(n.charAt(L))?(n.charAt(L),L++):de===0&&Ae(JC),U=L,z=[],ft.test(n.charAt(L))?(Pe=n.charAt(L),L++):(Pe=a,de===0&&Ae(Pa));Pe!==a;)z.push(Pe),ft.test(n.charAt(L))?(Pe=n.charAt(L),L++):(Pe=a,de===0&&Ae(Pa));if(n.charCodeAt(L)===46?(Pe=ee,L++):(Pe=a,de===0&&Ae(ez)),Pe!==a){if(fi=[],ft.test(n.charAt(L))?(bt=n.charAt(L),L++):(bt=a,de===0&&Ae(Pa)),bt!==a)for(;bt!==a;)fi.push(bt),ft.test(n.charAt(L))?(bt=n.charAt(L),L++):(bt=a,de===0&&Ae(Pa));else fi=a;fi!==a?U=z=[z,Pe,fi]:(L=U,U=a)}else L=U,U=a;if(U===a)if(U=[],ft.test(n.charAt(L))?(z=n.charAt(L),L++):(z=a,de===0&&Ae(Pa)),z!==a)for(;z!==a;)U.push(z),ft.test(n.charAt(L))?(z=n.charAt(L),L++):(z=a,de===0&&Ae(Pa));else U=a;if(U!==a){if(z=L,n.charCodeAt(L)===101?(Pe=le,L++):(Pe=a,de===0&&Ae(tz)),Pe!==a){if(Or.test(n.charAt(L))?(fi=n.charAt(L),L++):(fi=a,de===0&&Ae(JC)),fi===a&&(fi=null),bt=[],ft.test(n.charAt(L))?(an=n.charAt(L),L++):(an=a,de===0&&Ae(Pa)),an!==a)for(;an!==a;)bt.push(an),ft.test(n.charAt(L))?(an=n.charAt(L),L++):(an=a,de===0&&Ae(Pa));else bt=a;bt!==a?z=Pe=[Pe,fi,bt]:(L=z,z=a)}else L=z,z=a;z===a&&(z=null),yt=x,x=Ez()}else L=x,x=a;return x}function Oz(x,U){return x.map(function(z){return z[U]})}function kz(x,U,z){return[x].concat(Oz(U,z))}if((o=h())!==a&&L===n.length)return o;throw o!==a&&L<n.length&&Ae(xz()),Az(Ww,$s<n.length?n.charAt($s):null,$s<n.length?QC($s,$s+1):QC($s,$s))}return e(t,Error),t.prototype.format=function(n){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,c=this.location.source+":"+u.line+":"+u.column;if(a){var h=this.location.end,f=i("",u.line.toString().length),y=a[u.line-1],m=u.line===h.line?h.column:y.length+1;s+=`
 --> `+c+`
`+f+` |
`+u.line+" | "+y+`
`+f+" | "+i("",u.column-1)+i("",m-u.column,"^")}else s+=`
 at `+c}return s},t.buildMessage=function(n,s){var o={literal:function(m){return'"'+u(m.text)+'"'},class:function(m){var g=m.parts.map(function(v){return Array.isArray(v)?c(v[0])+"-"+c(v[1]):c(v)});return"["+(m.inverted?"^":"")+g+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function a(m){return m.charCodeAt(0).toString(16).toUpperCase()}function u(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function h(m){return o[m.type](m)}function f(m){var g,v,b=m.map(h);if(b.sort(),b.length>0){for(g=1,v=1;g<b.length;g++)b[g-1]!==b[g]&&(b[v]=b[g],v++);b.length=v}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function y(m){return m?'"'+u(m)+'"':"end of input"}return"Expected "+f(n)+" but "+y(s)+" found."},{SyntaxError:t,parse:r}},(gR=D7).exports&&(gR.exports=vR());const aM={deg:1,grad:.9,rad:180/Math.PI,turn:360};function vne(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&aM[e.unit]!=null))throw new P("effect:type-error",`Expected <angle>, Actual: ${vw(e)}`,{term:e})}const lM={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function bne(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&lM[e.unit]!=null))throw new P("effect:type-error",`Expected <length>, Actual: ${vw(e)}`,{term:e})}function fs(e){gne(e);const t=e.value;return Xm(t,e),e.unit==="%"?.01*t:t}function wne(e){return mne(e),Xm(e.value,e),e.value}function _ne(e){return vne(e),e.value*aM[e.unit]||0}function uM(e){return bne(e),e.value*lM[e.unit]||0}function Sne(e){switch(e.colorType){case"hex":return dY(e.value);case"named":return O7(e.value);case"function":return xne(e.value)}}function O7(e){if(!J6(e))throw new P("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return cY(e)}const Tne=/^rgba?/i,Ene=/^hsla?/i;function xne(e){if(Pp(e.parameters,4),Tne.test(e.name))return[fs(e.parameters[0]),fs(e.parameters[1]),fs(e.parameters[2]),e.parameters[3]?fs(e.parameters[3]):1];if(Ene.test(e.name))return X6(wne(e.parameters[0]),fs(e.parameters[1]),fs(e.parameters[2]),e.parameters[3]?fs(e.parameters[3]):1);throw new P("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function cM(e,t,i){var r;try{return Mne(e)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function dM(e,t,i,r){try{const n=Ane(e);Cr(i,n,t)}catch(n){r.messages&&r.messages.push(n)}}function Ane(e){const t=L7(e);return t?lne(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function Mne(e){if(!e||e.length===0)return null;if(Cne(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:wR(i.value)});return t}return wR(e)}function Cne(e){const t=e[0];return!!t&&"scale"in t}function wR(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Ro(i,"amount")];break;case"blur":r=[Ro(i,"radius","pt")];break;case"hue-rotate":r=[Ro(i,"angle","deg")];break;case"drop-shadow":r=[Ro(i,"xoffset","pt"),Ro(i,"yoffset","pt"),Ro(i,"blurRadius","pt"),Ine(i,"color")];break;case"bloom":r=[Ro(i,"strength"),Ro(i,"radius","pt"),Ro(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;L7(n),t.push(n)}return t.join(" ")}function Ro(e,t,i){if(e[t]==null)throw new P("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function Ine(e,t){if(e[t]==null)throw new P("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const P2=-3;var Cl;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Cl||(Cl={}));class eEe{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,n=0){this._storage.put(this._namespace+t,i,r,n)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class k7{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Hl,this._users=new Hl}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,n){const s=this._db.get(t);if(s&&(this._size-=s.size,this._db.delete(t),s.entry!==i&&this._notifyRemove(t,s.entry,Cl.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,Cl.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const o=1+Math.max(n,P2)-P2;this._db.set(t,{entry:i,size:r,lifetime:o,lives:o}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const n=this._db.get(t);if(n&&n.entry===i){for(this._size-=n.size;r>this._maxSize;){const s=this._notifyRemove(t,i,Cl.SOME);if(!(E(s)&&s>0))return void this._db.delete(t);r=s}n.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const u=o.lifetime;r[u]=(r[u]||0)+o.size,this._users.forAll(c=>{const h=c.namespace;if(a.startsWith(h)){const f=i[h]||0;i[h]=f+o.size}})});const n={};this._users.forAll(o=>{const a=o.namespace;if(!isNaN(o.hitRate)&&o.hitRate>0){const u=i[a]||0;i[a]=u,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(i);s.sort((o,a)=>i[a]-i[o]),s.forEach(o=>t[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(t["Priority "+(o+P2-1)]=Math.round(a/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,Cl.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,Cl.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let n;return this._removeFuncs.some(s=>{if(t.startsWith(s[0])){const o=s[1](i,r);return typeof o=="number"&&(n=o),!0}return!1}),n}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,Cl.SOME);E(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class Nne{constructor(t,i){this._storage=new k7,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}new Nne(1e3);new se([128,128,128]);const Rne=new se("white");function yd(e,t){if(!e)return null;let i=null;return tp(e)?i=Pne(e):ow(e)&&(i=e.color?new se(e.color):null),i?bm(i,t):null}function Pne(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{r.type==="object"&&r.resource.href!=null||(i=r.type==="water"?r.color:E(r.material)?r.material.color:null)}),i?new se(i):null}function bm(e,t){if(t==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new se(i)}function $ne(e,t,i){const r=e.symbolLayers;if(!r)return;const n=s=>{const o=E(s)?s:null;return bm(t=t||o||i!=null&&Rne,i)};r.forEach(s=>{if(s.type!=="object"||s.resource.href==null||t)if(s.type==="water")s.color=n(s.color);else{const o=E(s.material)?s.material.color:null,a=n(o);O(s.material)?s.material=new Qr({color:a}):s.material.color=a,i!=null&&"outline"in s&&E(s.outline)&&E(s.outline.color)&&(s.outline.color=bm(s.outline.color,i))}})}function Dne(e,t,i){(t=t||e.color)&&(e.color=bm(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=bm(e.outline.color,i))}function $2(e,t,i){e&&(t||i!=null)&&(t&&(t=new se(t)),tp(e)?$ne(e,t,i):ow(e)&&Dne(e,t,i))}async function Lne(e,t){const i=e.symbolLayers;i&&await mq(i,async r=>One(r,t))}async function One(e,t){switch(e.type){case"extrude":Fne(e,t);break;case"icon":case"line":case"text":kne(e,t);break;case"path":Une(e,t);break;case"object":await Bne(e,t)}}function kne(e,t){const i=F7(t);E(i)&&(e.size=i)}function F7(e){for(const t of e)if(typeof t=="number")return t;return null}function Fne(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function Bne(e,t){const{resourceSize:i,symbolSize:r}=await Vne(e),n=B7(t,i,r);e.width=$y(t[0],r[0],i[0],n),e.depth=$y(t[1],r[1],i[1],n),e.height=$y(t[2],r[2],i[2],n)}function Une(e,t){const i=B7(t,nL,[e.width,void 0,e.height]);e.width=$y(t[0],e.width,1,i),e.height=$y(t[2],e.height,1,i)}function B7(e,t,i){for(let r=0;r<3;r++){const n=e[r];switch(n){case"symbol-value":return i[r]!=null?i[r]/t[r]:1;case"proportional":break;default:if(n&&t[r])return n/t[r]}}return 1}async function Vne(e){const t=await V(()=>import("./symbolLayerUtils.4d3181c7.js"),[],import.meta.url),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:n,depth:s}=e,o=[r,s,n];let a=1;for(let u=0;u<3;u++)if(o[u]!=null){a=o[u]/i[u];break}for(let u=0;u<3;u++)o[u]==null&&(o[u]=i[u]*a);return{resourceSize:i,symbolSize:o}}function $y(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t!=null?t:i;default:return e}}function jne(e,t){const i=F7(t);if(!O(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function zne(e,t){if(e&&t)return tp(e)?Lne(e,t):void(ow(e)&&jne(e,t))}function Hne(e,t,i){if(e&&t!=null)if(tp(e)){const r=e.symbolLayers;r&&r.forEach(n=>{if(n&&n.type==="object")switch(i){case"tilt":n.tilt=t;break;case"roll":n.roll=t;break;default:n.heading=t}})}else ow(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}const Gne="<",qne=">",Wne=_3("short-date");function Yne(e,t,i,r){let n="";t===0?n=`${Gne} `:t===i&&(n=`${qne} `);let s=null;return s=r?bo(e,Wne):qre(e),n+s}const Kne=new se([64,64,64]);function Zne(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((n,s)=>i.includes(s)?Yne(n,s,r,t):null)}async function Jne(e,t,i){let r=!1,n=[],s=[];if(e.stops){const c=e.stops;n=c.map(h=>h.value),r=c.some(h=>!!h.label),r&&(s=c.map(h=>h.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const u=r?null:Zne(n,i);return(await Promise.all(n.map(async(c,h)=>({value:c,color:e.type==="opacity"?await Xne(c,e,t):(await V(()=>Promise.resolve().then(()=>DM),void 0,import.meta.url)).getColor(e,c),label:r?s[h]:u[h]})))).reverse()}async function Xne(e,t,i=Kne){const r=new se(i),n=(await V(()=>Promise.resolve().then(()=>DM),void 0,import.meta.url)).getOpacity(t,e);return n!=null&&(r.a=n),r}var aE;let Kf=aE=class extends j{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new aE({color:this.color,ratio:this.ratio})}};l([d({type:se,json:{type:[st],default:null,write:!0}})],Kf.prototype,"color",void 0),l([d({type:Number,json:{write:!0}})],Kf.prototype,"ratio",void 0),Kf=aE=l([S("esri.renderers.support.HeatmapColorStop")],Kf);const Dy=Kf;function Qne(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new Dy({ratio:1,color:r.color})),i++)}return t.map((r,n)=>{var o,a;let s="";return n===0?s=((o=e.legendOptions)==null?void 0:o.minLabel)||"low":n===i&&(s=((a=e.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:s,ratio:r.ratio}}).reverse()}W.getLogger("esri.renderers.support.utils");function Fr(e,t,i){J9(e,t,()=>[]).push(...i)}async function ese(e){var i,r;const t=new Map;if("visualVariables"in e&&e.visualVariables){const n=e.visualVariables.filter(s=>s.type==="color");for(const s of n){const o=s.field||s.valueExpression,a=(await Jne(s)).map(u=>u.color);Fr(t,o,a)}}if(e.type==="heatmap"){const n=Qne(e).map(s=>s.color);Fr(t,e.field,n)}else if(e.type==="pie-chart"){for(const n of e.attributes)Fr(t,n.field,[n.color]);Fr(t,null,[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,yd(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const n of e.attributes)Fr(t,n.field,[n.color]);Fr(t,null,[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of e.uniqueValueInfos)Fr(t,n.value.toString(),[yd(n.symbol,null)]);else{const n=e.uniqueValueInfos.map(c=>yd(c.symbol,null)),{field:s,field2:o,field3:a,valueExpression:u}=e;(s||u)&&Fr(t,s||u,n),o&&Fr(t,o,n),a&&Fr(t,a,n)}else if(e.type==="class-breaks"){const n=e.classBreakInfos.map(s=>yd(s.symbol,null));Fr(t,e.field||e.valueExpression,n)}else e.type==="simple"&&Fr(t,null,[yd(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&Fr(t,null,[yd(e.defaultSymbol,null)]),t.forEach((n,s)=>{const o=aH(n.filter(Boolean),(a,u)=>JSON.stringify(a)===JSON.stringify(u));t.set(s,o)}),t}var lE;let Zf=lE=class extends j{constructor(e){super(e),this.name=null,this.code=null}clone(){return new lE({name:this.name,code:this.code})}};l([d({type:String,json:{write:!0}})],Zf.prototype,"name",void 0),l([d({type:[String,Number],json:{write:!0}})],Zf.prototype,"code",void 0),Zf=lE=l([S("esri.layers.support.CodedValue")],Zf);const tse=new xe({inherited:"inherited",codedValue:"coded-value",range:"range"});let Jf=class extends j{constructor(e){super(e),this.name=null,this.type=null}};l([d({type:String,json:{write:!0}})],Jf.prototype,"name",void 0),l([ye(tse)],Jf.prototype,"type",void 0),Jf=l([S("esri.layers.support.Domain")],Jf);const bw=Jf;var uE;let Xf=uE=class extends bw{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new uE({codedValues:$(this.codedValues),name:this.name})}};l([d({type:[Zf],json:{write:!0}})],Xf.prototype,"codedValues",void 0),l([ye({codedValue:"coded-value"})],Xf.prototype,"type",void 0),Xf=uE=l([S("esri.layers.support.CodedValueDomain")],Xf);const U7=Xf;var cE;let m1=cE=class extends bw{constructor(e){super(e),this.type="inherited"}clone(){return new cE}};l([ye({inherited:"inherited"})],m1.prototype,"type",void 0),m1=cE=l([S("esri.layers.support.InheritedDomain")],m1);const V7=m1;var dE;let Bd=dE=class extends bw{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new dE({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};l([d({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],Bd.prototype,"maxValue",void 0),l([d({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],Bd.prototype,"minValue",void 0),l([ye({range:"range"})],Bd.prototype,"type",void 0),Bd=dE=l([S("esri.layers.support.RangeDomain")],Bd);const j7=Bd,z7={key:"type",base:bw,typeMap:{range:j7,"coded-value":U7,inherited:V7}};function hM(e){if(!e||!e.type)return null;switch(e.type){case"range":return j7.fromJSON(e);case"codedValue":return U7.fromJSON(e);case"inherited":return V7.fromJSON(e)}return null}const ise=new xe({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var hE;const rse=new xe({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Wi=hE=class extends j{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?i.value:null}readValueType(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?rse.fromJSON(i.fieldValueType):null}clone(){return new hE({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};l([d({type:String,json:{write:!0}})],Wi.prototype,"alias",void 0),l([d({type:[String,Number],json:{write:{allowNull:!0}}})],Wi.prototype,"defaultValue",void 0),l([d()],Wi.prototype,"description",void 0),l([Z("description")],Wi.prototype,"readDescription",null),l([d({types:z7,json:{read:{reader:hM},write:!0}})],Wi.prototype,"domain",void 0),l([d({type:Boolean,json:{write:!0}})],Wi.prototype,"editable",void 0),l([d({type:st,json:{write:!0}})],Wi.prototype,"length",void 0),l([d({type:String,json:{write:!0}})],Wi.prototype,"name",void 0),l([d({type:Boolean,json:{write:!0}})],Wi.prototype,"nullable",void 0),l([ye(ise)],Wi.prototype,"type",void 0),l([d()],Wi.prototype,"valueType",void 0),l([Z("valueType",["description"])],Wi.prototype,"readValueType",null),Wi=hE=l([S("esri.layers.support.Field")],Wi);const Qm=Wi;var pE;let Ud=pE=class extends j{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new pE({mapLayerId:e,gdbVersion:t})}};l([ye({mapLayer:"map-layer"})],Ud.prototype,"type",void 0),l([d({type:st,json:{write:!0}})],Ud.prototype,"mapLayerId",void 0),l([d({type:String,json:{write:!0}})],Ud.prototype,"gdbVersion",void 0),Ud=pE=l([S("esri.layers.support.source.MapLayerSource")],Ud);var fE;let Wo=fE=class extends j{constructor(e){super(e),this.type="query-table"}clone(){var o;const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:i,spatialReference:(o=r==null?void 0:r.clone())!=null?o:void 0,geometryType:n};return new fE(s)}};l([ye({queryTable:"query-table"})],Wo.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Wo.prototype,"workspaceId",void 0),l([d({type:String,json:{write:!0}})],Wo.prototype,"query",void 0),l([d({type:String,json:{write:!0}})],Wo.prototype,"oidFields",void 0),l([d({type:we,json:{write:!0}})],Wo.prototype,"spatialReference",void 0),l([ye(h3)],Wo.prototype,"geometryType",void 0),Wo=fE=l([S("esri.layers.support.source.QueryTableDataSource")],Wo);var yE;let Vd=yE=class extends j{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new yE({workspaceId:e,dataSourceName:t})}};l([ye({raster:"raster"})],Vd.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Vd.prototype,"dataSourceName",void 0),l([d({type:String,json:{write:!0}})],Vd.prototype,"workspaceId",void 0),Vd=yE=l([S("esri.layers.support.source.RasterDataSource")],Vd);var mE;let Uu=mE=class extends j{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new mE({workspaceId:e,gdbVersion:t,dataSourceName:i})}};l([ye({table:"table"})],Uu.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Uu.prototype,"workspaceId",void 0),l([d({type:String,json:{write:!0}})],Uu.prototype,"gdbVersion",void 0),l([d({type:String,json:{write:!0}})],Uu.prototype,"dataSourceName",void 0),Uu=mE=l([S("esri.layers.support.source.TableDataSource")],Uu);var gE,vE;const nse=Ai()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Vr=gE=class extends j{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return _R()(e,t,i)}castLeftTableSource(e){return mo(bE(),e)}readRightTableSource(e,t,i){return _R()(e,t,i)}castRightTableSource(e){return mo(bE(),e)}clone(){var o,a;const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:(o=i==null?void 0:i.clone())!=null?o:void 0,rightTableSource:(a=r==null?void 0:r.clone())!=null?a:void 0,joinType:n};return new gE(s)}};l([ye({joinTable:"join-table"})],Vr.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Vr.prototype,"leftTableKey",void 0),l([d({type:String,json:{write:!0}})],Vr.prototype,"rightTableKey",void 0),l([d({json:{write:!0}})],Vr.prototype,"leftTableSource",void 0),l([Z("leftTableSource")],Vr.prototype,"readLeftTableSource",null),l([je("leftTableSource")],Vr.prototype,"castLeftTableSource",null),l([d({json:{write:!0}})],Vr.prototype,"rightTableSource",void 0),l([Z("rightTableSource")],Vr.prototype,"readRightTableSource",null),l([je("rightTableSource")],Vr.prototype,"castRightTableSource",null),l([ye(nse)],Vr.prototype,"joinType",void 0),Vr=gE=l([S("esri.layers.support.source.JoinTableDataSource")],Vr);let D2=null;function _R(){return D2||(D2=wp({types:bE()})),D2}let L2=null;function bE(){return L2||(L2={key:"type",base:null,typeMap:{"data-layer":ys,"map-layer":Ud}}),L2}const sse={key:"type",base:null,typeMap:{"join-table":Vr,"query-table":Wo,raster:Vd,table:Uu}};let ys=vE=class extends j{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new vE({fields:e,dataSource:t})}};l([ye({dataLayer:"data-layer"})],ys.prototype,"type",void 0),l([d({type:[Qm],json:{write:!0}})],ys.prototype,"fields",void 0),l([d({types:sse,json:{write:!0}})],ys.prototype,"dataSource",void 0),ys=vE=l([S("esri.layers.support.source.DataLayerSource")],ys),ys.from=it(ys);function ww(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function e0(e){return typeof e=="string"?ut(e):$(e)}function _w(e,t,i){const r={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s)){r[n]=[];for(let o=0;o<s.length;o++)r[n][o]=_w(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i&&i[n]);r[n]=t?o:JSON.stringify(o)}else r[n]=t?s:JSON.stringify(s);else r[n]=s}return r}const W0={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new ir({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:we.WebMercator}),minus180Line:new ir({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:we.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new ir({paths:[[[180,-180],[180,180]]],spatialReference:we.WGS84}),minus180Line:new ir({paths:[[[-180,-180],[-180,180]]],spatialReference:we.WGS84})}};function Ic(e,t){return Math.ceil((e-t)/(2*t))}function H7(e,t){const i=Ly(e);for(const r of i)for(const n of r)n[0]+=t;return e}function Ly(e){return Dc(e)?e.rings:e.paths}async function ose(e,t,i,r){const n=typeof e=="string"?ut(e):e,s=t[0].spatialReference,o={...r,query:{...n.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Ep(t[0]),geometries:t}),cutter:JSON.stringify(i)}},a=await ze(n.path+"/cut",o),{cutIndexes:u,geometries:c=[]}=a.data;return{cutIndexes:u,geometries:c.map(h=>{const f=cr(h);return f.spatialReference=s,f})}}async function ase(e,t,i){const r=typeof e=="string"?ut(e):e,n=t[0].spatialReference,s=Ep(t[0]),o={...i,query:{...r.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(lse(t))}};return use((await ze(r.path+"/simplify",o)).data,s,n)}function lse(e){return{geometryType:Ep(e[0]),geometries:e.map(t=>t.toJSON())}}function use(e,t,i){const r=VL(t);return e.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}const G7=W.getLogger("esri.geometry.support.normalizeUtils");function cse(e){return e.type==="polygon"}function dse(e){return e[0].type==="polygon"}function hse(e){return e[0].type==="polyline"}function pse(e,t){if(!(e instanceof ir||e instanceof Rr)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw G7.error(n),new P(n)}const i=Ly(e),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],u=n[o][1],c=n[o+1][0],h=n[o+1][1],f=Math.sqrt((c-a)*(c-a)+(h-u)*(h-u)),y=(h-u)/f,m=(c-a)/f,g=f/t;if(g>1){for(let T=1;T<=g-1;T++){const A=T*t,R=m*A+a,M=y*A+u;s.push([R,M])}const v=(f+Math.floor(g-1)*t)/2,b=m*v+a,w=y*v+u;s.push([b,w])}s.push([c,h])}}return cse(e)?new Rr({rings:r,spatialReference:e.spatialReference}):new ir({paths:r,spatialReference:e.spatialReference})}function SR(e,t,i){if(t){const r=pse(e,1e6);e=xf(r,!0)}return i&&(e=H7(e,i)),e}function TR(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const n=Ic(r,t);e[0]=r+n*(-2*t)}else if(r<i){const n=Ic(r,i);e[0]=r+n*(-2*i)}}else{const r=e.x;if(r>t){const n=Ic(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<i){const n=Ic(r,i);e=e.clone().offset(n*(-2*i),0)}}return e}function fse(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const n=t.cutIndexes[r],s=t.geometries[r],o=Ly(s);for(let a=0;a<o.length;a++){const u=o[a];u.some(c=>{if(c[0]<180)return!0;{let h=0;for(let y=0;y<u.length;y++){const m=u[y][0];h=m>h?m:h}h=Number(h.toFixed(9));const f=-360*Ic(h,180);for(let y=0;y<u.length;y++){const m=s.getPoint(a,y);s.setPoint(a,y,m.clone().offset(f,0))}return!0}})}if(n===i){if(dse(e))for(const a of Ly(s))e[n]=e[n].addRing(a);else if(hse(e))for(const a of Ly(s))e[n]=e[n].addPath(a)}else i=n,e[n]=s}return e}async function q7(e,t,i){var R;if(!Array.isArray(e))return q7([e],t);t&&typeof t!="string"&&G7.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(R=t==null?void 0:t.url)!=null?R:De.geometryServiceUrl;let n,s,o,a,u,c,h,f,y=0;const m=[],g=[];for(const M of e)if(O(M))g.push(M);else if(n||(n=M.spatialReference,s=Es(n),o=n.isWebMercator,c=o?102100:4326,a=W0[c].maxX,u=W0[c].minX,h=W0[c].plus180Line,f=W0[c].minus180Line),s)if(M.type==="mesh")g.push(M);else if(M.type==="point")g.push(TR(M.clone(),a,u));else if(M.type==="multipoint"){const C=M.clone();C.points=C.points.map(k=>TR(k,a,u)),g.push(C)}else if(M.type==="extent"){const C=M.clone()._normalize(!1,!1,s);g.push(C.rings?new Rr(C):C)}else if(M.extent){const C=M.extent,k=Ic(C.xmin,u)*(2*a);let B=k===0?M.clone():H7(M.clone(),k);C.offset(k,0),C.intersects(h)&&C.xmax!==a?(y=C.xmax>y?C.xmax:y,B=SR(B,o),m.push(B),g.push("cut")):C.intersects(f)&&C.xmin!==u?(y=C.xmax*(2*a)>y?C.xmax*(2*a):y,B=SR(B,o,360),m.push(B),g.push("cut")):g.push(B)}else g.push(M.clone());else g.push(M);let v=Ic(y,a),b=-90;const w=v,T=new ir;for(;v>0;){const M=360*v-180;T.addPath([[M,b],[M,-1*b]]),b*=-1,v--}if(m.length>0&&w>0){const M=fse(m,await ose(r,m,T,i)),C=[],k=[];for(let Q=0;Q<g.length;Q++){const ee=g[Q];if(ee!=="cut")k.push(ee);else{const le=M.shift(),be=e[Q];E(be)&&be.type==="polygon"&&be.rings&&be.rings.length>1&&le.rings.length>=be.rings.length?(C.push(le),k.push("simplify")):k.push(o?ga(le):le)}}if(!C.length)return k;const B=await ase(r,C,i),H=[];for(let Q=0;Q<k.length;Q++){const ee=k[Q];ee!=="simplify"?H.push(ee):H.push(o?ga(B.shift()):B.shift())}return H}const A=[];for(let M=0;M<g.length;M++){const C=g[M];if(C!=="cut")A.push(C);else{const k=m.shift();A.push(o===!0?ga(k):k)}}return A}function tEe(e,t){const i=Es(t);if(i){const[r,n]=i.valid,s=n-r;if(e<r)for(;e<r;)e+=s;if(e>n)for(;e>n;)e-=s}return e}function W7(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let n=0;n<r.length;n++)t[i][n]=W7(r[n])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var Il;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Il||(Il={}));const ER=4294967296,yse=new TextDecoder("utf-8"),mse=F("safari")||F("ios")?6:F("ff")?12:32;class kc{constructor(t,i,r=0,n=t?t.byteLength:0){this._tag=0,this._dataType=Il.unknown,this._init(t,i,r,n)}_init(t,i,r,n){this._data=t,this._dataView=i,this._pos=r,this._end=n}clone(){return new kc(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*ER;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*ER;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,n){const s=this.getMessage(),o=t(s,i,r,n);return s.release(),o}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=kc.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){kc.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Il.varint:this._decodeVarint();break;case Il.fixed64:this._skip(8);break;case Il.delimited:this._skip(this._getLength());break;case Il.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i,r=this._pos,n=0;if(this._end-r>=10)do{if(i=t[r++],n|=127&i,(128&i)==0||(i=t[r++],n|=(127&i)<<7,(128&i)==0)||(i=t[r++],n|=(127&i)<<14,(128&i)==0)||(i=t[r++],n|=(127&i)<<21,(128&i)==0)||(i=t[r++],n+=268435456*(127&i),(128&i)==0)||(i=t[r++],n+=34359738368*(127&i),(128&i)==0)||(i=t[r++],n+=4398046511104*(127&i),(128&i)==0)||(i=t[r++],n+=562949953421312*(127&i),(128&i)==0)||(i=t[r++],n+=72057594037927940*(127&i),(128&i)==0)||(i=t[r++],n+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;r!==this._end&&(i=t[r],(128&i)!=0);)++r,n+=(127&i)*s,s*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=i*s}return this._pos=r,n}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==Il.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>mse){const o=t.subarray(i,r);return yse.decode(o)}let n="",s="";for(let o=i;o<r;++o){const a=t[o];128&a?s+="%"+a.toString(16):(n+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(n+=decodeURIComponent(s)),n}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}}kc.pool=new Is(kc,null,e=>{e._data=null,e._dataView=null});class or{constructor(t=[],i=[],r=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,n,s]=t,o=n-i,a=s-r;return new or([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let s=0;s<n;s++)t(this.coords[2*(s+i)],this.coords[2*(s+i)+1]);i+=n}}clone(t){return t?(t.set(this.coords),new or(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new or(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class So{constructor(t=null,i={},r,n){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new So(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function gse(e){return!(O(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class iEe extends So{}class Sw{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new Sw;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const Y7=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class rEe{constructor(t){this.options=t,this.geometryTypes=Y7,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Sw}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||hr(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=ip(this.options.sourceSpatialReference)/ip(t.spatialReference);if(i!==1)for(const r of t.features){if(!gse(r))continue;const n=r.geometry.coords;for(let s=2;s<n.length;s+=3)n[s]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new So}createSpatialReference(){return{wkid:0}}createGeometry(){return new or}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new or}}const xR=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],AR=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],MR=["upperLeft","lowerLeft"];function CR(e){return e>=xR.length?null:xR[e]}function vse(e){return e>=AR.length?null:AR[e]}function IR(e){return e>=MR.length?null:MR[e]}function NR(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function bse(e,t,i){const n=t.createPointGeometry(i);for(;e.next();)switch(e.tag()){case 3:{const s=e.getUInt32(),o=e.pos()+s;let a=0;for(;e.pos()<o;)t.addCoordinatePoint(n,e.getSInt64(),a++);break}default:e.skip()}return n}function wse(e,t,i){const s=t.createGeometry(i),o=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const a=e.getUInt32(),u=e.pos()+a;let c=0;for(;e.pos()<u;)t.addLength(s,e.getUInt32(),c++);break}case 3:{const a=e.getUInt32(),u=e.pos()+a;let c=0;for(t.allocateCoordinates(s);e.pos()<u;)t.addCoordinate(s,e.getSInt64(),c),c++,c===o&&(c=0);break}default:e.skip()}return s}function _se(e){const n=new or;let s="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)n.lengths.push(e.getUInt32());break}case 3:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)n.coords.push(e.getSInt64());break}case 1:s=Y7[e.getEnum()];break;default:e.skip()}return{queryGeometry:n,queryGeometryType:s}}function Sse(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function Tse(e){const a={type:CR(0)};for(;e.next();)switch(e.tag()){case 1:a.name=e.getString();break;case 2:a.type=CR(e.getEnum());break;case 3:a.alias=e.getString();break;case 4:a.sqlType=vse(e.getEnum());break;case 5:e.skip();break;case 6:a.defaultValue=e.getString();break;default:e.skip()}return a}function Ese(e){const r={};for(;e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.isSystemMaintained=e.getBool();break;default:e.skip()}return r}function xse(e,t,i,r){const a=t.createFeature(i);let u=0;for(;e.next();)switch(e.tag()){case 1:{const c=r[u++].name;a.attributes[c]=e.processMessage(Sse);break}case 2:a.geometry=e.processMessageWithArgs(wse,t,i);break;case 4:a.centroid=e.processMessageWithArgs(bse,t,i);break;default:e.skip()}return a}function Ase(e){const s=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:s[0]=e.getDouble();break;case 2:s[1]=e.getDouble();break;case 4:s[2]=e.getDouble();break;case 3:s[3]=e.getDouble();break;default:e.skip()}return s}function Mse(e){const s=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:s[0]=e.getDouble();break;case 2:s[1]=e.getDouble();break;case 4:s[2]=e.getDouble();break;case 3:s[3]=e.getDouble();break;default:e.skip()}return s}function Cse(e){const n={originPosition:IR(0)};for(;e.next();)switch(e.tag()){case 1:n.originPosition=IR(e.getEnum());break;case 2:n.scale=e.processMessage(Ase);break;case 3:n.translate=e.processMessage(Mse);break;default:e.skip()}return n}function Ise(e){const n={};for(;e.next();)switch(e.tag()){case 1:n.shapeAreaFieldName=e.getString();break;case 2:n.shapeLengthFieldName=e.getString();break;case 3:n.units=e.getString();break;default:e.skip()}return n}function Nse(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function Rse(e,t){const v=t.createFeatureResult();v.geometryType=NR(t,0);let b=!1;for(;e.next();)switch(e.tag()){case 1:v.objectIdFieldName=e.getString();break;case 3:v.globalIdFieldName=e.getString();break;case 4:v.geohashFieldName=e.getString();break;case 5:v.geometryProperties=e.processMessage(Ise);break;case 7:v.geometryType=NR(t,e.getEnum());break;case 8:v.spatialReference=e.processMessageWithArgs(Nse,t);break;case 10:v.hasZ=e.getBool();break;case 11:v.hasM=e.getBool();break;case 12:v.transform=e.processMessage(Cse);break;case 9:{const w=e.getBool();v.exceededTransferLimit=w;break}case 13:t.addField(v,e.processMessage(Tse));break;case 15:b||(t.prepareFeatures(v),b=!0),t.addFeature(v,e.processMessageWithArgs(xse,t,v,v.fields));break;case 2:v.uniqueIdField=e.processMessage(Ese);break;default:e.skip()}return t.finishFeatureResult(v),v}function Pse(e,t){const n={};let s=null;for(;e.next();)switch(e.tag()){case 4:s=e.processMessageWithArgs(_se);break;case 1:n.featureResult=e.processMessageWithArgs(Rse,t);break;default:e.skip()}return E(s)&&n.featureResult&&t.addQueryGeometry(n,s),n}function $se(e,t){try{const r=new kc(new Uint8Array(e),new DataView(e)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(Pse,t):r.skip();return n}catch(i){throw new P("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Dse(e,t){const i=$se(e,t),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,s=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const o=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[o])}return r&&(r.queryGeometry=n,r.queryGeometryType=s),r}function wE(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=p8(i.geometryType,t,e.outSpatialReference);if(!O(r))for(const n of i.features)r(n.geometry)}const RR="Layer does not support extent calculation.";function K7(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function Z7(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r;let s,o,a;if(E(i)&&(o=i.spatialReference,a=i.spatialReference.wkid||JSON.stringify(i.spatialReference),n.geometryType=Ep(i),n.geometry=K7(i,e.compactGeometryEnabled),n.inSR=a),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete n.outFields:r.outFields.includes("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?(n.outSR=r.outSR.wkid||JSON.stringify(r.outSR),s=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR,s=o),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&E(o)&&E(e.quantizationParameters)&&E(e.quantizationParameters.extent)&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const u=r.timeExtent,{start:c,end:h}=u;c==null&&h==null||(n.time=c===h?c:`${c==null?"null":c},${h==null?"null":h}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&E(o)&&E(s)&&o.equals(s)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function J7(e,t,i,r){const n=E(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await $p(e,t,"json",r);return wE(t,i,n.data),n}async function Lse(e,t,i,r){if(E(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const n=await X7(e,t,r),s=n;return s.data=Dse(n.data,i),s}function X7(e,t,i){return $p(e,t,"pbf",i)}function Ose(e,t,i){return E(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):$p(e,t,"json",i,{returnIdsOnly:!0})}function kse(e,t,i){return E(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):$p(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function Fse(e,t,i){return E(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):$p(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(RR);if(n.hasOwnProperty("count"))throw new Error(RR);return r})}function $p(e,t,i,r={},n={}){const s=typeof e=="string"?ut(e):e,o=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",q7(o,null,r).then(a=>{const u=a&&a[0];E(u)&&((t=t.clone()).geometry=u);const c=W7({...s.query,f:i,...n,...Z7(t,n)});return ze(vo(s.path,"query"),{...r,query:{...c,...r.query}})})}const nEe=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:K7,executeQuery:J7,executeQueryForCount:kse,executeQueryForExtent:Fse,executeQueryForIds:Ose,executeQueryPBF:Lse,executeQueryPBFBuffer:X7,queryToQueryStringParameters:Z7,runQuery:$p},Symbol.toStringTag,{value:"Module"}));var _E;const SE=new xe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let li=_E=class extends j{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var n;const i=we.fromJSON(t.spatialReference),r=[];for(let s=0;s<e.length;s++){const o=e[s],a=zi.fromJSON(o),u=o.geometry&&o.geometry.spatialReference;E(a.geometry)&&!u&&(a.geometry.spatialReference=i);const c=o.aggregateGeometries,h=a.aggregateGeometries;if(c&&E(h))for(const f in h){const y=h[f],m=(n=c[f])==null?void 0:n.spatialReference;E(y)&&!m&&(y.spatialReference=i)}r.push(a)}return r}writeGeometryType(e,t,i,r){if(e)return void SE.write(e,t,i,r);const{features:n}=this;if(n){for(const s of n)if(s&&E(s.geometry))return void SE.write(s.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=cr(e);return!i&&t.spatialReference&&(r.spatialReference=we.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&E(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new _E(this.cloneProperties())}cloneProperties(){return $({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const n=e&&e[i];r.geometry=n&&n.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,n]}=e,s=c=>Math.round((c-r)/t),o=c=>Math.round((n-c)/i),a=this.features,u=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,h=a.length;c<h;c++)u(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,a=h=>h*s+r,u=h=>n-h*o,c=this._getHydrationFunction(e,a,u);for(const{geometry:h}of t)E(h)&&c(h);return this.transform=null,this}_quantizePoints(e,t,i){let r,n;const s=[];for(let o=0,a=e.length;o<a;o++){const u=e[o];if(o>0){const c=t(u[0]),h=i(u[1]);c===r&&h===n||(s.push([c-r,h-n]),r=c,n=h)}else r=t(u[0]),n=i(u[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const n=Dc(r)?r.rings:r.paths,s=[];for(let o=0,a=n.length;o<a;o++){const u=n[o],c=this._quantizePoints(u,t,i);c&&s.push(c)}return s.length>0?(Dc(r)?r.rings=s:r.paths=s,r):null}:e==="multipoint"?r=>{const n=this._quantizePoints(r.points,t,i);return n.length>0?(r.points=n,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const n=Dc(r)?r.rings:r.paths;let s,o;for(let a=0,u=n.length;a<u;a++){const c=n[a];for(let h=0,f=c.length;h<f;h++){const y=c[h];h>0?(s+=y[0],o+=y[1]):(s=y[0],o=y[1]),y[0]=t(s),y[1]=i(o)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const n=r.points;let s,o;for(let a=0,u=n.length;a<u;a++){const c=n[a];a>0?(s+=c[0],o+=c[1]):(s=c[0],o=c[1]),c[0]=t(s),c[1]=i(o)}}:void 0}};l([d({type:String,json:{write:!0}})],li.prototype,"displayFieldName",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],li.prototype,"exceededTransferLimit",void 0),l([d({type:[zi],json:{write:!0}})],li.prototype,"features",void 0),l([Z("features")],li.prototype,"readFeatures",null),l([d({type:[Qm],json:{write:!0}})],li.prototype,"fields",void 0),l([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:SE.read}}})],li.prototype,"geometryType",void 0),l([te("geometryType")],li.prototype,"writeGeometryType",null),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],li.prototype,"hasM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],li.prototype,"hasZ",void 0),l([d({types:ad,json:{write:!0}})],li.prototype,"queryGeometry",void 0),l([Z("queryGeometry")],li.prototype,"readQueryGeometry",null),l([d({type:we,json:{write:!0}})],li.prototype,"spatialReference",void 0),l([te("spatialReference")],li.prototype,"writeSpatialReference",null),l([d({json:{write:!0}})],li.prototype,"transform",void 0),li=_E=l([S("esri.rest.support.FeatureSet")],li),li.prototype.toJSON.isDefaultToJSON=!0;const t0=li,sEe=Object.freeze(Object.defineProperty({__proto__:null,default:t0},Symbol.toStringTag,{value:"Module"})),PR={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Bse={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Use(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function Fc(e,t,i){const r=new Date(e.getTime());if(t&&i){const n=Bse[i],{getter:s,setter:o,multiplier:a}=n;if(i==="months"){const u=Use(r.getFullYear(),r.getMonth()+t);r.getDate()>u&&r.setDate(u)}r[o](r[s]()+t*a)}return r}function $R(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function Vse(e,t,i){return e===0?0:e*PR[t]/PR[i]}var is;let Wr=is=class extends j{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return DR}static get empty(){return jse}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(is.allTime)}get isEmpty(){return this.equals(is.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new is({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=E(this.start)?this.start.getTime():this.start,i=E(this.end)?this.end.getTime():this.end,r=E(e.start)?e.start.getTime():e.start,n=E(e.end)?e.end.getTime():e.end;return t===r&&i===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=to(this.start,r=>$R(r,e)),i=to(this.end,r=>Fc($R(r,e),1,e));return new is({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return is.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=_f(this.start,-1/0,a=>a.getTime()),i=_f(this.end,1/0,a=>a.getTime()),r=_f(e.start,-1/0,a=>a.getTime()),n=_f(e.end,1/0,a=>a.getTime());let s,o;if(r>=t&&r<=i?s=r:t>=r&&t<=n&&(s=t),i>=r&&i<=n?o=i:n>=t&&n<=i&&(o=n),!isNaN(s)&&!isNaN(o)){const a=new is;return a.start=s===-1/0?null:new Date(s),a.end=o===1/0?null:new Date(o),a}return is.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new is,{start:r,end:n}=this;return E(r)&&(i.start=Fc(r,e,t)),E(n)&&(i.end=Fc(n,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return DR.clone();const t=E(this.start)&&E(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=E(this.end)&&E(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new is({start:t,end:i})}};l([d({type:Date,json:{write:{allowNull:!0}}})],Wr.prototype,"end",void 0),l([Z("end")],Wr.prototype,"readEnd",null),l([te("end")],Wr.prototype,"writeEnd",null),l([d({readOnly:!0,json:{read:!1}})],Wr.prototype,"isAllTime",null),l([d({readOnly:!0,json:{read:!1}})],Wr.prototype,"isEmpty",null),l([d({type:Date,json:{write:{allowNull:!0}}})],Wr.prototype,"start",void 0),l([Z("start")],Wr.prototype,"readStart",null),l([te("start")],Wr.prototype,"writeStart",null),Wr=is=l([S("esri.TimeExtent")],Wr);const DR=new Wr,jse=new Wr({start:void 0,end:void 0}),Ao=Wr;var TE;const LR=new xe({upperLeft:"upper-left",lowerLeft:"lower-left"});let Vu=TE=class extends j{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new TE($({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};l([d({type:Ue,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Vu.prototype,"extent",void 0),l([d({type:["view","edit"],json:{write:!0}})],Vu.prototype,"mode",void 0),l([d({type:String,json:{read:LR.read,write:LR.write}})],Vu.prototype,"originPosition",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Vu.prototype,"tolerance",void 0),Vu=TE=l([S("esri.rest.support.QuantizationParameters")],Vu);const Q7=Vu;var EE;const OR=new xe({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let rs=EE=class extends j{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=$(e))}clone(){return new EE({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:$(this.statisticParameters)})}};l([d({type:Number,json:{write:!0}})],rs.prototype,"maxPointCount",void 0),l([d({type:Number,json:{write:!0}})],rs.prototype,"maxRecordCount",void 0),l([d({type:Number,json:{write:!0}})],rs.prototype,"maxVertexCount",void 0),l([d({type:String,json:{write:!0}})],rs.prototype,"onStatisticField",void 0),l([d({type:String,json:{write:!0}})],rs.prototype,"outStatisticFieldName",void 0),l([d({type:String,json:{read:{source:"statisticType",reader:OR.read},write:{target:"statisticType",writer:OR.write}}})],rs.prototype,"statisticType",void 0),l([d({type:Object})],rs.prototype,"statisticParameters",void 0),l([te("statisticParameters")],rs.prototype,"writeStatisticParameters",null),rs=EE=l([S("esri.rest.support.StatisticDefinition")],rs);const ek=rs;var Lh;const zse=new xe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Hse=new xe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ge=Lh=class extends j{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return kA(Lh,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const n=e[r];Array.isArray(n)?i[r]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?i[r]=n.getTime():i[r]=n}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Lh($({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:E(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ge.MAX_MAX_RECORD_COUNT_FACTOR=5,l([d({json:{write:!0}})],ge.prototype,"aggregateIds",void 0),l([d({type:Boolean,json:{write:!0}})],ge.prototype,"cacheHint",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"compactGeometryEnabled",void 0),l([d({json:{write:!0}})],ge.prototype,"datumTransformation",void 0),l([je("datumTransformation")],ge.prototype,"castDatumTransformation",null),l([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"defaultSpatialReferenceEnabled",void 0),l([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ge.prototype,"distance",void 0),l([d({type:ys,json:{write:!0}})],ge.prototype,"dynamicDataSource",void 0),l([d({type:String,json:{write:!0}})],ge.prototype,"formatOf3DObjects",void 0),l([d({type:String,json:{write:!0}})],ge.prototype,"gdbVersion",void 0),l([d({types:ad,json:{read:cr,write:!0}})],ge.prototype,"geometry",void 0),l([d({type:Number,json:{write:!0}})],ge.prototype,"geometryPrecision",void 0),l([d({type:[String],json:{write:!0}})],ge.prototype,"groupByFieldsForStatistics",void 0),l([d({type:String,json:{write:!0}})],ge.prototype,"having",void 0),l([d({type:Date})],ge.prototype,"historicMoment",void 0),l([te("historicMoment")],ge.prototype,"writeHistoricMoment",null),l([d({type:Number,json:{write:!0}})],ge.prototype,"maxAllowableOffset",void 0),l([d({type:Number,cast:e=>e<1?1:e>Lh.MAX_MAX_RECORD_COUNT_FACTOR?Lh.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ge.prototype,"maxRecordCountFactor",void 0),l([d({type:["xyFootprint"],json:{write:!0}})],ge.prototype,"multipatchOption",void 0),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ge.prototype,"num",void 0),l([d({json:{write:!0}})],ge.prototype,"objectIds",void 0),l([d({type:[String],json:{write:!0}})],ge.prototype,"orderByFields",void 0),l([d({type:[String],json:{write:!0}})],ge.prototype,"outFields",void 0),l([d({type:we,json:{name:"outSR",write:!0}})],ge.prototype,"outSpatialReference",void 0),l([d({type:[ek],json:{write:{enabled:!0,overridePolicy(){return{enabled:E(this.outStatistics)&&this.outStatistics.length>0}}}}})],ge.prototype,"outStatistics",void 0),l([d({json:{write:!0}})],ge.prototype,"parameterValues",void 0),l([te("parameterValues")],ge.prototype,"writeParameterValues",null),l([d({type:he,json:{write:!0}})],ge.prototype,"pixelSize",void 0),l([d({type:Q7,json:{write:!0}})],ge.prototype,"quantizationParameters",void 0),l([d({type:[Object],json:{write:!0}})],ge.prototype,"rangeValues",void 0),l([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ge.prototype,"relationParameter",void 0),l([d({type:String,json:{write:!0}})],ge.prototype,"resultType",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"returnCentroid",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"returnDistinctValues",void 0),l([d({type:Boolean,json:{default:!0,write:!0}})],ge.prototype,"returnExceededLimitFeatures",void 0),l([d({type:Boolean,json:{write:!0}})],ge.prototype,"returnGeometry",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"returnQueryGeometry",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"returnM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ge.prototype,"returnZ",void 0),l([d({type:we,json:{write:!0}})],ge.prototype,"sourceSpatialReference",void 0),l([ye(zse,{ignoreUnknown:!1,name:"spatialRel"})],ge.prototype,"spatialRelationship",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],ge.prototype,"start",void 0),l([te("start"),te("num")],ge.prototype,"writeStart",null),l([d({type:String,json:{write:!0}})],ge.prototype,"sqlFormat",void 0),l([d({type:String,json:{write:!0}})],ge.prototype,"text",void 0),l([d({type:Ao,json:{write:!0}})],ge.prototype,"timeExtent",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"timeReferenceUnknownClient",void 0),l([ye(Hse,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],ge.prototype,"units",void 0),l([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],ge.prototype,"where",void 0),l([te("where")],ge.prototype,"writeWhere",null),ge=Lh=l([S("esri.rest.support.Query")],ge);const tr=ge;async function O2(e,t,i){const r=await Gse(e,t,i);return t0.fromJSON(r)}async function Gse(e,t,i){const r=e0(e),n={...i},s=tr.from(t),{data:o}=await J7(r,s,s.sourceSpatialReference,n);return o}function Ei(e,t){return e?t?4:3:t?3:2}const Dp=W.getLogger("esri.layers.graphics.featureConversionUtils"),tk={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ik=(e,t,i,r,n,s)=>{e[i]=n,e[i+1]=s},Zv=(e,t,i,r,n,s)=>{e[i]=n,e[i+1]=s,e[i+2]=t[r+2]},qse=(e,t,i,r,n,s)=>{e[i]=n,e[i+1]=s,e[i+2]=t[r+3]},rk=(e,t,i,r,n,s)=>{e[i]=n,e[i+1]=s,e[i+2]=t[r+2],e[i+3]=t[r+3]};function pM(e,t,i,r){if(e){if(i)return t&&r?rk:Zv;if(t&&r)return qse}else if(t&&r)return Zv;return ik}function k2({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function F2({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function kR({scale:e,translate:t},i){return i*e[0]+t[0]}function FR({scale:e,translate:t},i){return t[1]-i*e[1]}function oEe(e,t,i){return e?t?i?mM(e):fM(e):i?yM(e):Tw(e):null}function Tw(e){const t=e.coords;return{x:t[0],y:t[1]}}function nk(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function fM(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function Wse(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function yM(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function Yse(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function mM(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function Kse(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function Zse(e,t,i,r){let n=Tw;i&&r?n=mM:i?n=fM:r&&(n=yM);for(const s of t){const{geometry:o,attributes:a}=s,u=E(o)?n(o):null;e.push({attributes:a,geometry:u})}return e}function sk(e,t){return e&&t?Kse:e?Wse:t?Yse:nk}function ok(e,t,i,r,n){const s=sk(i,r);for(const o of t){const{geometry:a,attributes:u}=o;let c;a&&(c=s(new or,a)),e.push(new So(c,u,null,u[n]))}return e}function Jse(e,t,i,r){for(const n of t){const{geometry:s,attributes:o}=n;let a;s&&(a=ak(s,i,r)),e.push({attributes:o,geometry:a})}return e}function ak(e,t,i){if(O(e))return null;const r=Ei(t,i),n=[];for(let s=0;s<e.coords.length;s+=r){const o=[];for(let a=0;a<r;a++)o.push(e.coords[s+a]);n.push(o)}return t?i?{points:n,hasZ:t,hasM:i}:{points:n,hasZ:t}:i?{points:n,hasM:i}:{points:n}}function lk(e,t,i,r,n){const s=Ei(i,r);for(const o of t){const a=o.geometry,u=o.attributes;let c;a&&(c=uk(new or,a,s)),e.push(new So(c,u,null,u[n]))}return e}function uk(e,t,i=Ei(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let n=0;for(const s of t.points)for(let o=0;o<i;o++)r[n++]=s[o];return e}function Xse(e,t,i,r){for(const n of t){const{geometry:s,attributes:o}=n;let a;E(s)&&(a=ck(s,i,r)),e.push({attributes:o,geometry:a})}return e}function ck(e,t,i){if(!e)return null;const r=Ei(t,i),{coords:n,lengths:s}=e,o=[];let a=0;for(const u of s){const c=[];for(let h=0;h<u;h++){const f=[];for(let y=0;y<r;y++)f.push(n[a++]);c.push(f)}o.push(c)}return t?i?{paths:o,hasZ:t,hasM:i}:{paths:o,hasZ:t}:i?{paths:o,hasM:i}:{paths:o}}function dk(e,t,i,r,n){const s=Ei(i,r);for(const o of t){const a=o.geometry,u=o.attributes;let c;a&&(c=hk(new or,a,s)),e.push(new So(c,u,null,u[n]))}return e}function hk(e,t,i=Ei(t.hasZ,t.hasM)){const{lengths:r,coords:n}=e;let s=0;for(const o of t.paths){for(const a of o)for(let u=0;u<i;u++)n[s++]=a[u];r.push(o.length)}return e}function Qse(e,t,i,r){for(const n of t){const{geometry:s,attributes:o,centroid:a}=n;let u;if(E(s)&&(u=pk(s,i,r)),E(a)){const c=Tw(a);e.push({attributes:o,centroid:c,geometry:u})}else e.push({attributes:o,geometry:u})}return e}function pk(e,t,i){if(!e)return null;const r=Ei(t,i),{coords:n,lengths:s}=e,o=[];let a=0;for(const u of s){const c=[];for(let h=0;h<u;h++){const f=[];for(let y=0;y<r;y++)f.push(n[a++]);c.push(f)}o.push(c)}return t?i?{rings:o,hasZ:t,hasM:i}:{rings:o,hasZ:t}:i?{rings:o,hasM:i}:{rings:o}}function fk(e,t,i,r,n){for(const s of t){const o=s.geometry,a=s.centroid,u=s.attributes;let c;o&&(c=yk(new or,o,i,r)),E(a)?e.push(new So(c,u,nk(new or,a),u[n])):e.push(new So(c,u,null,u[n]))}return e}function yk(e,t,i=t.hasZ,r=t.hasM){return eoe(e,t.rings,i,r),e}function eoe(e,t,i,r){const n=Ei(i,r),{lengths:s,coords:o}=e;let a=0;s.length=o.length=0;for(const u of t){for(const c of u)for(let h=0;h<n;h++)o[a++]=c[h];s.push(u.length)}return e}const Oh=[],Oy=[];function aEe(e,t,i,r,n){Oh[0]=e;const[s]=mk(Oy,Oh,t,i,r,n);return Oh.length=Oy.length=0,s}function mk(e,t,i,r,n,s){if(e.length=0,!i){for(const o of t){const a=o.attributes[s];e.push(new So(null,o.attributes,null,a))}return e}switch(i){case"esriGeometryPoint":return ok(e,t,r,n,s);case"esriGeometryMultipoint":return lk(e,t,r,n,s);case"esriGeometryPolyline":return dk(e,t,r,n,s);case"esriGeometryPolygon":return fk(e,t,r,n,s);default:Dp.error("convertToFeatureSet:unknown-geometry",new P(`Unable to parse unknown geometry type '${i}'`)),e.length=0}return e}function lEe(e,t,i,r,n,s){const o=e.length;switch(i){case"esriGeometryPoint":ok(e,t,r,n,s);break;case"esriGeometryMultipoint":lk(e,t,r,n,s);break;case"esriGeometryPolyline":dk(e,t,r,n,s);break;case"esriGeometryPolygon":fk(e,t,r,n,s);break;default:Dp.error("convertToFeatureSet:unknown-geometry",new P(`Unable to parse unknown geometry type '${i}'`))}for(let a=0;a<t.length;a++)e[a+o].geometryType=i,e[a+o].insertAfter=t[a].insertAfter,e[a+o].groupId=t[a].groupId;return e}function uEe(e,t,i,r){Oy[0]=e,gk(Oh,Oy,t,i,r);const n=Oh[0];return Oh.length=Oy.length=0,n}function cEe(e,t,i){if(O(e))return null;const r=new or;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),f3(e)?sk(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(r,e):Dc(e)?yk(r,e,t,i):y3(e)?hk(r,e,Ei(t,i)):p3(e)?uk(r,e,Ei(t,i)):void Dp.error("convertFromGeometry:unknown-geometry",new P(`Unable to parse unknown geometry type '${e}'`))}function toe(e,t,i,r){const n=e&&("coords"in e?e:e.geometry);if(O(n))return null;switch(t){case"esriGeometryPoint":{let s=Tw;return i&&r?s=mM:i?s=fM:r&&(s=yM),s(n)}case"esriGeometryMultipoint":return ak(n,i,r);case"esriGeometryPolyline":return ck(n,i,r);case"esriGeometryPolygon":return pk(n,i,r);default:return void Dp.error("convertToGeometry:unknown-geometry",new P(`Unable to parse unknown geometry type '${t}'`))}}function ioe(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function gk(e,t,i,r,n){if(e.length=0,O(i))return ioe(e,t);switch(i){case"esriGeometryPoint":return Zse(e,t,r,n);case"esriGeometryMultipoint":return Jse(e,t,r,n);case"esriGeometryPolyline":return Xse(e,t,r,n);case"esriGeometryPolygon":return Qse(e,t,r,n);default:Dp.error("convertToFeatureSet:unknown-geometry",new P(`Unable to parse unknown geometry type '${i}'`))}return e}function dEe(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:n,hasM:s,hasZ:o,features:a,geometryType:u,exceededTransferLimit:c,uniqueIdField:h,queryGeometry:f,queryGeometryType:y}=e,m={features:gk([],a,u,o,s),fields:n,geometryType:u,objectIdFieldName:t,spatialReference:i,uniqueIdField:h,queryGeometry:toe(f,y,!1,!1)};return r&&(m.transform=r),c&&(m.exceededTransferLimit=c),s&&(m.hasM=s),o&&(m.hasZ=o),m}function hEe(e,t){const i=new Sw,{hasM:r,hasZ:n,features:s,objectIdFieldName:o,spatialReference:a,geometryType:u,exceededTransferLimit:c,transform:h,fields:f}=e;return f&&(i.fields=f),i.geometryType=u,i.objectIdFieldName=o||t,i.spatialReference=a,i.objectIdFieldName?(s&&mk(i.features,s,u,n,r,i.objectIdFieldName),c&&(i.exceededTransferLimit=c),r&&(i.hasM=r),n&&(i.hasZ=n),h&&(i.transform=h),i):(Dp.error(new P("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function pEe(e){const{transform:t,features:i,hasM:r,hasZ:n}=e;if(!t)return e;for(const s of i)E(s.geometry)&&UR(s.geometry,s.geometry,r,n,t),E(s.centroid)&&UR(s.centroid,s.centroid,r,n,t);return e.transform=null,e}function fEe(e,t){const{geometryType:i,features:r,hasM:n,hasZ:s}=t;if(!e)return t;for(let o=0;o<r.length;o++){const a=r[o],u=a.weakClone();u.geometry=new or,BR(u.geometry,a.geometry,n,s,i,e),a.centroid&&(u.centroid=new or,BR(u.centroid,a.centroid,n,s,"esriGeometryPoint",e)),r[o]=u}return t.transform=e,t}function BR(e,t,i,r,n,s,o=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),O(t)||!t.coords.length)return null;const u=tk[n],{coords:c,lengths:h}=t,f=Ei(i,r),y=Ei(i&&o,r&&a),m=pM(i,r,o,a);if(!h.length)return m(e.coords,c,0,0,k2(s,c[0]),F2(s,c[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let g,v,b,w,T=0,A=0,R=A;for(const M of h){if(M<u)continue;let C=0;A=R,b=g=k2(s,c[T]),w=v=F2(s,c[T+1]),m(e.coords,c,A,T,b,w),C++,T+=f,A+=y;for(let k=1;k<M;k++,T+=f)b=k2(s,c[T]),w=F2(s,c[T+1]),b===g&&w===v||(m(e.coords,c,A,T,b-g,w-v),A+=y,C++,g=b,v=w);C>=u&&(e.lengths.push(C),R=A)}return e.coords.length=R,e.coords.length?e:null}function yEe(e,t,i,r,n,s,o=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const u=tk[n],{coords:c,lengths:h}=t,f=Ei(i,r),y=Ei(i&&o,r&&a),m=pM(i,r,o,a);if(!h.length)return m(e.coords,c,0,0,c[0],c[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let g=0;const v=s*s;for(const b of h){if(b<u){g+=b*f;continue}const w=e.coords.length/y,T=g,A=g+(b-1)*f;m(e.coords,c,e.coords.length,T,c[T],c[T+1]),xE(e.coords,c,f,v,m,T,A),m(e.coords,c,e.coords.length,A,c[A],c[A+1]);const R=e.coords.length/y-w;R>=u?e.lengths.push(R):e.coords.length=w*y,g+=b*f}return e.coords.length?e:null}function roe(e,t,i,r){const n=e[t],s=e[t+1],o=e[i],a=e[i+1],u=e[r],c=e[r+1];let h=o,f=a,y=u-h,m=c-f;if(y!==0||m!==0){const g=((n-h)*y+(s-f)*m)/(y*y+m*m);g>1?(h=u,f=c):g>0&&(h+=y*g,f+=m*g)}return y=n-h,m=s-f,y*y+m*m}function xE(e,t,i,r,n,s,o){let a,u=r,c=0;for(let h=s+i;h<o;h+=i)a=roe(t,h,s,o),a>u&&(c=h,u=a);u>r&&(c-s>i&&xE(e,t,i,r,n,s,c),n(e,t,e.length,c,t[c],t[c+1]),o-c>i&&xE(e,t,i,r,n,c,o))}function mEe(e,t,i,r){if(O(t)||!t.coords||!t.coords.length)return null;const n=Ei(i,r);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(t&&t.coords){const c=t.coords;for(let h=0;h<c.length;h+=n){const f=c[h],y=c[h+1];s=Math.min(s,f),a=Math.max(a,f),o=Math.min(o,y),u=Math.max(u,y)}}return e[0]=s,e[1]=o,e[2]=a,e[3]=u,e}function UR(e,t,i,r,n){const{coords:s,lengths:o}=t,a=i?r?rk:Zv:r?Zv:ik,u=Ei(i,r);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,s,0,0,kR(n,s[0]),FR(n,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=u),e;const[c,h]=n.scale;let f=0;for(let y=0;y<o.length;y++){const m=o[y];e.lengths[y]=m;let g=kR(n,s[f]),v=FR(n,s[f+1]);a(e.coords,s,f,f,g,v),f+=u;for(let b=1;b<m;b++,f+=u)g+=s[f]*c,v-=s[f+1]*h,a(e.coords,s,f,f,g,v)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function gEe(e,t,i,r,n,s){const o=Ei(i,r),a=pM(i,r,n,s),u=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let c=0;c<u.length;c+=o)a(e.coords,u,e.coords.length,c,u[c],u[c+1]);return e}function noe(e,t,i,r){let n=0,s=e[r*t],o=e[r*(t+1)];for(let a=1;a<i;a++){const u=s+e[r*(t+a)],c=o+e[r*(t+a)+1],h=(u-s)*(c+o);s=u,o=c,n+=h}return .5*n}function vEe(e,t){const{coords:i,lengths:r}=e;let n=0,s=0;for(let o=0;o<r.length;o++)s+=noe(i,n,r[o],t),n+=o;return Math.abs(s)}function bEe(e,t){if(O(e))return null;const i=e.clone(),r=e.coords,n=e.lengths;let s=0;for(let o=0;o<n.length;o++){const a=n[o];let u=r[t*s],c=r[t*s+1];for(let h=1;h<a;h++){const f=u+r[t*(s+h)],y=c+r[t*(s+h)+1];i.coords[t*(s+h)]=f,i.coords[t*(s+h)+1]=y,u=f,c=y}s+=a}return i}var AE;let mt=AE=class extends j{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new AE($({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};l([d({type:Boolean,json:{write:!0}})],mt.prototype,"cacheHint",void 0),l([d({type:ys,json:{write:!0}})],mt.prototype,"dynamicDataSource",void 0),l([d({type:String,json:{write:!0}})],mt.prototype,"gdbVersion",void 0),l([d({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecision",void 0),l([d({type:Date})],mt.prototype,"historicMoment",void 0),l([te("historicMoment")],mt.prototype,"_writeHistoricMoment",null),l([d({type:Number,json:{write:!0}})],mt.prototype,"maxAllowableOffset",void 0),l([d({type:[Number],json:{write:!0}})],mt.prototype,"objectIds",void 0),l([d({type:[String],json:{write:!0}})],mt.prototype,"orderByFields",void 0),l([d({type:[String],json:{write:!0}})],mt.prototype,"outFields",void 0),l([d({type:we,json:{read:{source:"outSR"},write:{target:"outSR"}}})],mt.prototype,"outSpatialReference",void 0),l([d({json:{write:!0}})],mt.prototype,"relationshipId",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],mt.prototype,"start",void 0),l([te("start"),te("num")],mt.prototype,"writeStart",null),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],mt.prototype,"num",void 0),l([d({json:{write:!0}})],mt.prototype,"returnGeometry",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],mt.prototype,"returnM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],mt.prototype,"returnZ",void 0),l([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],mt.prototype,"where",void 0),mt=AE=l([S("esri.rest.support.RelationshipQuery")],mt),mt.from=it(mt);const ME=mt;var CE;let jd=CE=class extends j{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new CE({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};l([d({type:[String],json:{write:!0}})],jd.prototype,"groupByFields",void 0),l([d({type:Number,json:{write:!0}})],jd.prototype,"topCount",void 0),l([d({type:[String],json:{write:!0}})],jd.prototype,"orderByFields",void 0),jd=CE=l([S("esri.rest.support.TopFilter")],jd);const soe=jd;var IE;const VR=new xe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),jR=new xe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let lt=IE=class extends j{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new IE($({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};l([d({type:Boolean,json:{write:!0}})],lt.prototype,"cacheHint",void 0),l([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],lt.prototype,"distance",void 0),l([d({types:ad,json:{read:cr,write:!0}})],lt.prototype,"geometry",void 0),l([d({type:Number,json:{write:!0}})],lt.prototype,"geometryPrecision",void 0),l([d({type:Number,json:{write:!0}})],lt.prototype,"maxAllowableOffset",void 0),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],lt.prototype,"num",void 0),l([d({json:{write:!0}})],lt.prototype,"objectIds",void 0),l([d({type:[String],json:{write:!0}})],lt.prototype,"orderByFields",void 0),l([d({type:[String],json:{write:!0}})],lt.prototype,"outFields",void 0),l([d({type:we,json:{read:{source:"outSR"},write:{target:"outSR"}}})],lt.prototype,"outSpatialReference",void 0),l([d({type:String,json:{write:!0}})],lt.prototype,"resultType",void 0),l([d({json:{write:!0}})],lt.prototype,"returnGeometry",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],lt.prototype,"returnM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],lt.prototype,"returnZ",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],lt.prototype,"start",void 0),l([te("start"),te("num")],lt.prototype,"writeStart",null),l([d({type:String,json:{read:{source:"spatialRel",reader:VR.read},write:{target:"spatialRel",writer:VR.write}}})],lt.prototype,"spatialRelationship",void 0),l([d({type:Ao,json:{write:!0}})],lt.prototype,"timeExtent",void 0),l([d({type:soe,json:{write:!0}})],lt.prototype,"topFilter",void 0),l([d({type:String,json:{read:jR.read,write:{writer:jR.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],lt.prototype,"units",void 0),l([d({type:String,json:{write:!0}})],lt.prototype,"where",void 0),lt=IE=l([S("esri.rest.support.TopFeaturesQuery")],lt),lt.from=it(lt);const Y0=lt,ooe="esri.widgets.Feature.support.relatedFeatureUtils",zR=W.getLogger(ooe),HR=new Map;function NE(e){if(!da(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function aoe(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(n=>n.id===parseInt(e,10)&&(i=n,!0)),i}function loe({originRelationship:e,relationships:t,layerId:i}){let r;return t&&t.some(n=>(`${n.relatedTableId}`===i&&n.id===e.id&&(r=n),!!r)),r}function uoe(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function coe(e,t){const i=aoe(e,t);if(!!i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function doe(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,n=i&&i.value;t.relatedFeatures=n?n.features:[];const s=r&&r.value;t.relatedStatsFeatures=s?s.features:[]}function hoe(e,t,i,r){const n=new ME;return n.outFields=["*"],n.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(n,r)}function poe(e,t,i){let r=0;const n=[];for(;r<t.length;)n.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return n.join(" OR ")}async function foe(e,t,i,r){const n=i.layerId.toString(),{layerInfo:s,relation:o,relatedFields:a,outStatistics:u,url:c,sourceSpatialReference:h}=t,f=loe({originRelationship:o,relationships:s.relationships,layerId:n});if(f.relationshipTableId&&f.keyFieldInRelationshipTable){const m=(await hoe(e,f,i,r))[e.attributes[i.objectIdField]];if(!m)return null;const g=m.features.map(v=>v.attributes[s.objectIdField]);if((u==null?void 0:u.length)>0&&s.supportsStatistics){const v=new tr;v.where=poe(s.objectIdField,g,1e3),v.outFields=a,v.outStatistics=u,v.sourceSpatialReference=h;const b={features:Promise.resolve(m),statsFeatures:O2(c,v)};return di(b)}}const y=f==null?void 0:f.keyField;if(y){const m=v3(boe(s.fields,y)),g=uoe(e.attributes,o.keyField),v=m?`${y}=${g}`:`${y}='${g}'`,b=O2(c,new tr({where:v,outFields:t.relatedFields,sourceSpatialReference:h}),r),w=t.outStatistics&&t.outStatistics.length>0&&s.supportsStatistics?O2(c,new tr({where:v,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:h}),r):null,T={features:b};return w&&(T.statsFeatures=w),di(T)}return null}function yoe(e,t){return ze(e,{query:{f:"json"},signal:t&&t.signal})}function moe({relatedInfos:e,layer:t},i){const r={};return e.forEach((n,s)=>{const{relation:o}=n;if(!o){const f=new P("relation-required","A relation is required on a layer to retrieve related records.");throw zR.error(f),f}const{relatedTableId:a}=o;if(typeof a!="number"){const f=new P("A related table ID is required on a layer to retrieve related records.");throw zR.error(f),f}const u=`${t.url}/${a}`,c=HR.get(u),h=c||yoe(u,i);c||HR.set(u,h),r[s]=h}),di(r)}function goe({graphic:e,relatedInfos:t,layer:i},r){const n={};return t.forEach((s,o)=>{s.layerInfo&&(n[o]=foe(e,s,i,r))}),di(n)}function voe({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const r=new ek({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(r)}}function boe(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const GR={chartAnimation:!0};let ei=class extends ce{constructor(e){super(e),this.abilities={...GR},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...GR,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:r,fieldInfoMap:n,layer:s}=this;return t==null?void 0:t.map(o=>{const a=o==null?void 0:o.clone();if(!a)return null;if(a.title=Cc({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:s,text:a.title}),a.caption=Cc({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:s,text:a.caption}),a.altText=Cc({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:s,text:a.altText}),a.type==="image"){const{value:u}=a;return this._setImageValue({value:u,formattedAttributes:i,layer:s}),a.value.sourceURL?a:void 0}if(a.type==="pie-chart"||a.type==="line-chart"||a.type==="column-chart"||a.type==="bar-chart"){const{value:u}=a;return this._setChartValue({value:u,chartType:a.type,attributes:e,formattedAttributes:i,layer:s}),a}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:r,layer:n}=e,{linkURL:s,sourceURL:o}=i;if(o){const a=sE(o,n);i.sourceURL=nE({formattedAttributes:r,template:a,fieldInfoMap:t})}if(s){const a=sE(s,n);i.linkURL=nE({formattedAttributes:r,template:a,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:r,chartType:n,layer:s}=e,{popupTemplate:o,relatedInfos:a}=this,{fields:u,normalizeField:c}=t;if(t.fields=nre(u,s),c&&(t.normalizeField=Yv(c,s)),!u.some(f=>!!(r[f]!=null||da(f)&&a.size)))return;const h=o==null?void 0:o.fieldInfos;u.forEach(f=>{if(da(f))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:h,fieldName:f,formattedAttributes:r,chartType:n,value:t})]);const y=this._getChartOption({value:t,attributes:i,chartType:n,formattedAttributes:r,fieldName:f,fieldInfos:h});t.series.push(y)})}_getRelatedChartInfos(e){var g;const{fieldInfos:t,fieldName:i,formattedAttributes:r,chartType:n,value:s}=e,o=[],a=NE(i),{layerId:u,fieldName:c}=a,h=(g=this.relatedInfos)==null?void 0:g.get(u.toString());if(!h)return o;const{relatedFeatures:f,relation:y}=h;if(!y||!f)return o;const{cardinality:m}=y;return f.forEach(v=>{const{attributes:b}=v;b&&Object.keys(b).forEach(w=>{w===c&&o.push(this._getChartOption({value:s,attributes:b,formattedAttributes:r,fieldName:i,chartType:n,relatedFieldName:w,fieldInfos:t}))})}),m==="one-to-many"||m==="many-to-many"?o:[o[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var A,R,M,C,k,B;const{value:t,attributes:i,formattedAttributes:r,fieldName:n,relatedFieldName:s,fieldInfos:o,chartType:a}=e,{layer:u,fieldInfoMap:c}=this,{normalizeField:h,tooltipField:f}=t,y=h?da(h)?i[NE(h).fieldName]:i[h]:null,m=s&&i[s]!==void 0?i[s]:i[n]!==void 0?i[n]:r[n],g=new tO({fieldName:n,value:m===void 0?null:m&&y?m/y:m});if(da(n)){const H=c.get(n.toLowerCase()),Q=c.get(f.toLowerCase()),ee=(A=H==null?void 0:H.fieldName)!=null?A:n,le=(k=(C=(M=r[(R=Q==null?void 0:Q.fieldName)!=null?R:f])!=null?M:H==null?void 0:H.label)!=null?C:H==null?void 0:H.fieldName)!=null?k:s,be=r[ee];return g.tooltip=this._getTooltip({label:le,value:be,chartType:a}),g}const v=E7(o,n),b=Yv(n,u),w=f&&r[f]!==void 0?r[f]:S7(v||new zm({fieldName:b}),(B=this.popupTemplate)==null?void 0:B.expressionInfos),T=r[b];return g.tooltip=this._getTooltip({label:w,value:T,chartType:a}),g}};l([d()],ei.prototype,"abilities",void 0),l([je("abilities")],ei.prototype,"castAbilities",null),l([d()],ei.prototype,"activeMediaInfoIndex",void 0),l([d({readOnly:!0})],ei.prototype,"activeMediaInfo",null),l([d()],ei.prototype,"attributes",void 0),l([d()],ei.prototype,"description",void 0),l([d()],ei.prototype,"fieldInfoMap",void 0),l([d()],ei.prototype,"formattedAttributes",void 0),l([d()],ei.prototype,"expressionAttributes",void 0),l([d({readOnly:!0})],ei.prototype,"formattedMediaInfos",null),l([d()],ei.prototype,"layer",void 0),l([d({readOnly:!0})],ei.prototype,"formattedMediaInfoCount",null),l([d()],ei.prototype,"mediaInfos",void 0),l([d()],ei.prototype,"popupTemplate",void 0),l([d()],ei.prototype,"relatedInfos",void 0),l([d()],ei.prototype,"title",void 0),ei=l([S("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],ei);const Nc=ei;var qR=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],woe=[].concat(qR.slice(30,39),qR.slice(28,30).reverse()),_oe=[{name:"default",colors:woe},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const WR="en-us",gM=new Map([["ar",()=>V(()=>import("./ar.5d7bdca7.js"),["ar.5d7bdca7.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.a)],["bg-bg",()=>V(()=>import("./bg_BG.e6ba29c2.js"),["bg_BG.e6ba29c2.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.b)],["bs-ba",()=>V(()=>import("./bs_BA.14911a00.js"),["bs_BA.14911a00.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.b)],["ca-es",()=>V(()=>import("./ca_ES.1a938920.js"),["ca_ES.1a938920.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.c)],["cs-cz",()=>V(()=>import("./cs_CZ.8624de8a.js"),["cs_CZ.8624de8a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.c)],["da-dk",()=>V(()=>import("./da_DK.aef5a9c8.js"),["da_DK.aef5a9c8.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.d)],["de-de",()=>V(()=>import("./de_DE.b08b4cf1.js"),["de_DE.b08b4cf1.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.d)],["de-ch",()=>V(()=>import("./de_CH.0b6cd702.js"),["de_CH.0b6cd702.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.d)],["el-gr",()=>V(()=>import("./el_GR.8e618bc9.js"),["el_GR.8e618bc9.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["en-us",()=>V(()=>import("./en_US.41c717af.js"),["en_US.41c717af.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["en-ca",()=>V(()=>import("./en_CA.f60d00bf.js"),["en_CA.f60d00bf.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["es-es",()=>V(()=>import("./es_ES.1f0f76f4.js"),["es_ES.1f0f76f4.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["et-ee",()=>V(()=>import("./et_EE.a7babafb.js"),["et_EE.a7babafb.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["fi-fi",()=>V(()=>import("./fi_FI.fdc0a8b3.js"),["fi_FI.fdc0a8b3.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.f)],["fr-fr",()=>V(()=>import("./fr_FR.9fb72c1a.js"),["fr_FR.9fb72c1a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.f)],["he-il",()=>V(()=>import("./he_IL.3941bb8a.js"),["he_IL.3941bb8a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.h)],["hr-hr",()=>V(()=>import("./hr_HR.0f5af0f2.js"),["hr_HR.0f5af0f2.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.h)],["hu-hu",()=>V(()=>import("./hu_HU.b4dae139.js"),["hu_HU.b4dae139.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.h)],["id-id",()=>V(()=>import("./id_ID.f5b918ea.js"),["id_ID.f5b918ea.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.i)],["it-it",()=>V(()=>import("./it_IT.94769a92.js"),["it_IT.94769a92.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.i)],["ja-jp",()=>V(()=>import("./ja_JP.8eb86db8.js"),["ja_JP.8eb86db8.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.j)],["ko-kr",()=>V(()=>import("./ko_KR.8ba7fd29.js"),["ko_KR.8ba7fd29.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.k)],["lt-lt",()=>V(()=>import("./lt_LT.d8c1cc92.js"),["lt_LT.d8c1cc92.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.l)],["lv-lv",()=>V(()=>import("./lv_LV.ceb923a4.js"),["lv_LV.ceb923a4.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.l)],["nb-no",()=>V(()=>import("./nb_NO.d0457d8e.js"),["nb_NO.d0457d8e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.n)],["nl-nl",()=>V(()=>import("./nl_NL.fbf1ad03.js"),["nl_NL.fbf1ad03.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.n)],["pl-pl",()=>V(()=>import("./pl_PL.44d49398.js"),["pl_PL.44d49398.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.p)],["pt-br",()=>V(()=>import("./pt_BR.89b1d3a7.js"),["pt_BR.89b1d3a7.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.p)],["pt-pt",()=>V(()=>import("./pt_PT.2abd4e91.js"),["pt_PT.2abd4e91.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.p)],["ro-ro",()=>V(()=>import("./ro_RO.fb4fff60.js"),["ro_RO.fb4fff60.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.r)],["ru-ru",()=>V(()=>import("./ru_RU.684f53ee.js"),["ru_RU.684f53ee.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.r)],["sk-sk",()=>V(()=>import("./sk_SK.eaca904e.js"),["sk_SK.eaca904e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["sl-sl",()=>V(()=>import("./sl_SL.cff9b92a.js"),["sl_SL.cff9b92a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["sr-rs",()=>V(()=>import("./sr_RS.44ddc4cf.js"),["sr_RS.44ddc4cf.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["sv-se",()=>V(()=>import("./sv_SE.16043ad0.js"),["sv_SE.16043ad0.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["th-th",()=>V(()=>import("./th_TH.99f2a35e.js"),["th_TH.99f2a35e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.t)],["tr-tr",()=>V(()=>import("./tr_TR.ab1c9f2f.js"),["tr_TR.ab1c9f2f.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.t)],["uk-ua",()=>V(()=>import("./uk_UA.ae3608ad.js"),["uk_UA.ae3608ad.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.u)],["vi-vn",()=>V(()=>import("./vi_VN.7d19f32e.js"),["vi_VN.7d19f32e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.v)],["zh-cn",()=>V(()=>import("./zh_Hans.0f482448.js"),["zh_Hans.0f482448.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.z)],["zh-hk",()=>V(()=>import("./zh_Hant.f458376f.js"),["zh_Hant.f458376f.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.z)],["zh-tw",()=>V(()=>import("./zh_Hant.f458376f.js"),["zh_Hant.f458376f.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.z)]]);function Soe(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of gM.keys())if(r.startsWith(t)){i=r;break}return i}function Toe(e){return e?gM.has(e.toLowerCase())?e.toLowerCase():Soe(e)||WR:WR}let md,nf;async function Eoe(e=Xr()){if(e=Toe(e),md&&e===nf)return md;md=V(()=>import("./index.7ba26017.js"),["index.7ba26017.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(t=>t.i),nf=e;try{const[t,i]=await Promise.all([md,gM.get(nf)()]);nf===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return md=null,nf=null,null}return md}function xoe(e,t="default"){const i=_oe.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const wt={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},B2=.05,U2=.95,V2=15,Po="color",Va="tooltip",sf="value",YR="default-line-value";let mr=class extends Ci{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new Nc,this.messages=null,this._getChartDependencies=async i=>{const r=await Eoe(),{destroyed:n,viewModel:s}=this;if(n||!s||!i)return;const{activeMediaInfo:o}=s,a=await this._getRendererColors(r);this._renderChart({chartDiv:i,mediaInfo:o,chartsModule:r,colorMap:a})}}initialize(){this._featureElementInfo=new oM,this.own([Y(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),We),Y(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),We)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return N("div",{bind:this,class:wt.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?N("div",{key:"media-element-container",class:wt.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:n,refreshInterval:s,altText:o,title:a,type:u}=e,{sourceURL:c,linkURL:h}=n,f=w7(h)?"_blank":"_self",y=f==="_blank"?"noreferrer":"",m=s?t:null,g=m?m.timestamp:0,v=m?m.sourceURL:c,b=N("img",{alt:o||a,key:`media-${u}-${i}-${r}-${g}`,src:v});return(h?N("a",{title:a,href:h,rel:y,target:f},b):null)||b}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return N("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:wt.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?N("div",{key:"media-title",class:wt.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?N("div",{key:"media-caption",class:wt.mediaItemCaption,innerHTML:e.caption}):null;return N("div",{key:"media-container",class:wt.mediaItemContainer},N("div",{key:"media-item-container",class:wt.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,r=t?this.classes(wt.mediaButton,wt.mediaPrevious):this.classes(wt.mediaButton,wt.mediaNext),n=t?this.classes(wt.mediaIcon,wt.mediaPreviousIconLTR,wt.iconLeftTriangleArrow):this.classes(wt.mediaIcon,wt.mediaNextIconLTR,wt.iconRightTriangleArrow),s=t?this.classes(wt.mediaIcon,wt.mediaPreviousIconRTL,wt.iconRightTriangleArrow):this.classes(wt.mediaIcon,wt.mediaNextIconRTL,wt.iconLeftTriangleArrow),o=t?"media-previous":"media-next",a=t?this._previous:this._next;return N("button",{type:"button",key:o,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:a},N("span",{"aria-hidden":"true",class:n}),N("span",{"aria-hidden":"true",class:s}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var s;const{am4core:t}=e,i=(s=this.viewModel)==null?void 0:s.layer,r=new Map;if(!i)return r;const n=await ese(i.renderer);return n.delete(null),Array.from(n.values()).every(o=>(o==null?void 0:o.length)===1)&&(r.set(YR,t.color({r:50,g:50,b:50,a:1})),Array.from(n.keys()).forEach(o=>{o&&r.set(o,t.color(n.get(o)[0].toCss(!0)))})),r}_handleMediaKeyup(e){const t=ro(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:n,colorMap:s}=e,{value:o,type:a}=n,{am4core:u}=i,c=xoe(u);function h(m){m instanceof u.ColorSet&&c&&(m.list=c)}R7()&&u.useTheme(i.am4themes_dark);const f=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!f.matches?u.useTheme(i.am4themes_animated):u.unuseTheme(i.am4themes_animated),u.useTheme(h);const y=a==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",n.altText||n.title),y.data=o.series.map(m=>({[Va]:m.tooltip,[sf]:m.value,[Po]:s.get(m.fieldName)})).filter(m=>a!=="pie-chart"||m.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:n}=i,s=r.create(t,n.PieChart);s.rtl=jl(this.container);const o=s.series.push(new n.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value=sf,o.dataFields.category=Va,this._customizeChartTooltip(o.tooltip,r),o.slices.template.tooltipText=s.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",o.slices.template.propertyFields.fill=Po,o.slices.template.propertyFields.stroke=Po,s}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:n}=r,{am4core:s,am4charts:o}=i,a=e.xAxes.push(new o.CategoryAxis);a.dataFields.category=Va,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,s),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dy=-a.tooltip.contentHeight});const u=e.yAxes.push(new o.ValueAxis),c=u.renderer.labels.template;u.renderer.minLabelPosition=B2,u.renderer.maxLabelPosition=U2,u.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(u.tooltip,s),c.wrap=!0;const h=e.series.push(new o.ColumnSeries);h.dataFields.valueY=sf,h.dataFields.categoryX=Va,h.columns.template.propertyFields.fill=Po,h.columns.template.propertyFields.stroke=Po,e.cursor=new o.XYCursor,n.series.length>V2&&(e.scrollbarX=new s.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:n}=r,{am4core:s,am4charts:o}=i,a=e.yAxes.push(new o.CategoryAxis);a.dataFields.category=Va,a.renderer.inversed=!0,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,s),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dx=a.tooltip.contentWidth});const u=e.xAxes.push(new o.ValueAxis),c=u.renderer.labels.template;u.renderer.minLabelPosition=B2,u.renderer.maxLabelPosition=U2,u.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(u.tooltip,s),c.wrap=!0;const h=e.series.push(new o.ColumnSeries);h.dataFields.valueX=sf,h.dataFields.categoryY=Va,h.columns.template.propertyFields.fill=Po,h.columns.template.propertyFields.stroke=Po,e.cursor=new o.XYCursor,n.series.length>V2&&(e.scrollbarY=new s.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:n}=t,{value:s}=r,{am4core:o,am4charts:a}=i,u=e.xAxes.push(new a.CategoryAxis);u.dataFields.category=Va,u.renderer.labels.template.disabled=!0,this._customizeChartTooltip(u.tooltip,o),u.tooltip.events.on("sizechanged",()=>{u.tooltip.dy=-u.tooltip.contentHeight});const c=e.yAxes.push(new a.ValueAxis),h=c.renderer.labels.template;c.renderer.minLabelPosition=B2,c.renderer.maxLabelPosition=U2,c.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(c.tooltip,o),h.wrap=!0;const f=e.series.push(new a.LineSeries);f.dataFields.categoryX=Va,f.dataFields.valueY=sf,f.strokeWidth=1;const y=n.get(YR);y&&(f.stroke=y);const m=f.bullets.push(new a.CircleBullet);m.propertyFields.fill=Po,m.propertyFields.stroke=Po,e.cursor=new a.XYCursor,s.series.length>V2&&(e.scrollbarX=new o.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:n}=r,{am4core:s,am4charts:o}=i,a=s.create(t,o.XYChart);return a.rtl=jl(this.container),n==="column-chart"&&this._createColumnChart(a,e),n==="bar-chart"&&this._createBarChart(a,e),n==="line-chart"&&this._createLineChart(a,e),a}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=n}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[r,n=""]=e.split("#");return`${r}${i}timestamp=${t}${n?"#":""}${n}`}};l([X("viewModel.attributes")],mr.prototype,"attributes",void 0),l([X("viewModel.activeMediaInfoIndex")],mr.prototype,"activeMediaInfoIndex",void 0),l([X("viewModel.description")],mr.prototype,"description",void 0),l([X("viewModel.fieldInfoMap")],mr.prototype,"fieldInfoMap",void 0),l([X("viewModel.layer")],mr.prototype,"layer",void 0),l([X("viewModel.mediaInfos")],mr.prototype,"mediaInfos",void 0),l([X("viewModel.popupTemplate")],mr.prototype,"popupTemplate",void 0),l([X("viewModel.relatedInfos")],mr.prototype,"relatedInfos",void 0),l([X("viewModel.title")],mr.prototype,"title",void 0),l([d({type:Nc})],mr.prototype,"viewModel",void 0),l([d(),Si("esri/widgets/Feature/t9n/Feature")],mr.prototype,"messages",void 0),mr=l([S("esri.widgets.Feature.FeatureMedia")],mr);const vk=mr;class Aoe{constructor(t,i){this.definition=null,this.context=null,this.definition=t,this.context=i}}class Mo{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let i=0;i<this.length();i++)t.push(this.get(i));return t}}class hd extends Mo{constructor(t,i,r,n,s,o){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=i,this._hasZ=r,this._hasM=n,this._cacheId=s,this._partId=o}get(t){if(this._lazyPt[t]===void 0){const i=this._elements[t];if(i===void 0)return;const r=this._hasZ,n=this._hasM;let s=null;s=r&&!n?new he(i[0],i[1],i[2],void 0,this._spRef):n&&!r?new he(i[0],i[1],void 0,i[2],this._spRef):r&&n?new he(i[0],i[1],i[2],i[3],this._spRef):new he(i[0],i[1],this._spRef),s.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=s}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof hd&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class vM extends Mo{constructor(t,i,r,n,s){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=r,this._hasM=n,this._spRef=i,this._cacheId=s}get(t){if(this._lazyPath[t]===void 0){const i=this._elements[t];if(i===void 0)return;this._lazyPath[t]=new hd(i,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof vM&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});function KR(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Co(e,t,i){return t&&KR(e.prototype,t),i&&KR(e,i),e}function Ve(){return Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Ve.apply(this,arguments)}function Bn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,wm(e,t)}function RE(e){return RE=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},RE(e)}function wm(e,t){return wm=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},wm(e,t)}function Moe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g1(e,t,i){return Moe()?g1=Reflect.construct:g1=function(n,s,o){var a=[null];a.push.apply(a,s);var u=Function.bind.apply(n,a),c=new u;return o&&wm(c,o.prototype),c},g1.apply(null,arguments)}function Coe(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function PE(e){var t=typeof Map=="function"?new Map:void 0;return PE=function(r){if(r===null||!Coe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return g1(r,arguments,RE(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wm(n,r)},PE(e)}function bk(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function Ioe(e,t){if(!!e){if(typeof e=="string")return ZR(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ZR(e,t)}}function ZR(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Wl(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=Ioe(e))||t&&e&&typeof e.length=="number"){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pd=function(e){Bn(t,e);function t(){return e.apply(this,arguments)||this}return t}(PE(Error)),Noe=function(e){Bn(t,e);function t(i){return e.call(this,"Invalid DateTime: "+i.toMessage())||this}return t}(pd),Roe=function(e){Bn(t,e);function t(i){return e.call(this,"Invalid Interval: "+i.toMessage())||this}return t}(pd),Poe=function(e){Bn(t,e);function t(i){return e.call(this,"Invalid Duration: "+i.toMessage())||this}return t}(pd),Qf=function(e){Bn(t,e);function t(){return e.apply(this,arguments)||this}return t}(pd),wk=function(e){Bn(t,e);function t(i){return e.call(this,"Invalid unit "+i)||this}return t}(pd),An=function(e){Bn(t,e);function t(){return e.apply(this,arguments)||this}return t}(pd),ja=function(e){Bn(t,e);function t(){return e.call(this,"Zone is an abstract class")||this}return t}(pd),ie="numeric",Ns="short",en="long",$E={year:ie,month:ie,day:ie},_k={year:ie,month:Ns,day:ie},$oe={year:ie,month:Ns,day:ie,weekday:Ns},Sk={year:ie,month:en,day:ie},Tk={year:ie,month:en,day:ie,weekday:en},Ek={hour:ie,minute:ie},xk={hour:ie,minute:ie,second:ie},Ak={hour:ie,minute:ie,second:ie,timeZoneName:Ns},Mk={hour:ie,minute:ie,second:ie,timeZoneName:en},Ck={hour:ie,minute:ie,hourCycle:"h23"},Ik={hour:ie,minute:ie,second:ie,hourCycle:"h23"},Nk={hour:ie,minute:ie,second:ie,hourCycle:"h23",timeZoneName:Ns},Rk={hour:ie,minute:ie,second:ie,hourCycle:"h23",timeZoneName:en},Pk={year:ie,month:ie,day:ie,hour:ie,minute:ie},$k={year:ie,month:ie,day:ie,hour:ie,minute:ie,second:ie},Dk={year:ie,month:Ns,day:ie,hour:ie,minute:ie},Lk={year:ie,month:Ns,day:ie,hour:ie,minute:ie,second:ie},Doe={year:ie,month:Ns,day:ie,weekday:Ns,hour:ie,minute:ie},Ok={year:ie,month:en,day:ie,hour:ie,minute:ie,timeZoneName:Ns},kk={year:ie,month:en,day:ie,hour:ie,minute:ie,second:ie,timeZoneName:Ns},Fk={year:ie,month:en,day:ie,weekday:en,hour:ie,minute:ie,timeZoneName:en},Bk={year:ie,month:en,day:ie,weekday:en,hour:ie,minute:ie,second:ie,timeZoneName:en};function Ge(e){return typeof e>"u"}function Bc(e){return typeof e=="number"}function Ew(e){return typeof e=="number"&&e%1===0}function Loe(e){return typeof e=="string"}function Ooe(e){return Object.prototype.toString.call(e)==="[object Date]"}function Uk(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function koe(e){return Array.isArray(e)?e:[e]}function JR(e,t,i){if(e.length!==0)return e.reduce(function(r,n){var s=[t(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function Foe(e,t){return t.reduce(function(i,r){return i[r]=e[r],i},{})}function sp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ha(e,t,i){return Ew(e)&&e>=t&&e<=i}function Boe(e,t){return e-t*Math.floor(e/t)}function Wt(e,t){t===void 0&&(t=2);var i=e<0,r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function Nl(e){if(!(Ge(e)||e===null||e===""))return parseInt(e,10)}function yu(e){if(!(Ge(e)||e===null||e===""))return parseFloat(e)}function bM(e){if(!(Ge(e)||e===null||e==="")){var t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function wM(e,t,i){i===void 0&&(i=!1);var r=Math.pow(10,t),n=i?Math.trunc:Math.round;return n(e*r)/r}function i0(e){return e%4===0&&(e%100!==0||e%400===0)}function ky(e){return i0(e)?366:365}function Jv(e,t){var i=Boe(t-1,12)+1,r=e+(t-i)/12;return i===2?i0(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function _M(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function Xv(e){var t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||r===3?53:52}function DE(e){return e>99?e:e>60?1900+e:2e3+e}function Vk(e,t,i,r){r===void 0&&(r=null);var n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);var o=Ve({timeZoneName:t},s),a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(function(u){return u.type.toLowerCase()==="timezonename"});return a?a.value:null}function xw(e,t){var i=parseInt(e,10);Number.isNaN(i)&&(i=0);var r=parseInt(t,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function jk(e){var t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new An("Invalid unit value "+e);return t}function Qv(e,t){var i={};for(var r in e)if(sp(e,r)){var n=e[r];if(n==null)continue;i[t(r)]=jk(n)}return i}function Fy(e,t){var i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return""+n+Wt(i,2)+":"+Wt(r,2);case"narrow":return""+n+i+(r>0?":"+r:"");case"techie":return""+n+Wt(i,2)+Wt(r,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function Aw(e){return Foe(e,["hour","minute","second","millisecond"])}var zk=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Uoe=["January","February","March","April","May","June","July","August","September","October","November","December"],Hk=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Voe=["J","F","M","A","M","J","J","A","S","O","N","D"];function Gk(e){switch(e){case"narrow":return[].concat(Voe);case"short":return[].concat(Hk);case"long":return[].concat(Uoe);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var qk=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Wk=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],joe=["M","T","W","T","F","S","S"];function Yk(e){switch(e){case"narrow":return[].concat(joe);case"short":return[].concat(Wk);case"long":return[].concat(qk);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Kk=["AM","PM"],zoe=["Before Christ","Anno Domini"],Hoe=["BC","AD"],Goe=["B","A"];function Zk(e){switch(e){case"narrow":return[].concat(Goe);case"short":return[].concat(Hoe);case"long":return[].concat(zoe);default:return null}}function qoe(e){return Kk[e.hour<12?0:1]}function Woe(e,t){return Yk(t)[e.weekday-1]}function Yoe(e,t){return Gk(t)[e.month-1]}function Koe(e,t){return Zk(t)[e.year<0?0:1]}function Zoe(e,t,i,r){i===void 0&&(i="always"),r===void 0&&(r=!1);var n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&s){var o=e==="days";switch(t){case 1:return o?"tomorrow":"next "+n[e][0];case-1:return o?"yesterday":"last "+n[e][0];case 0:return o?"today":"this "+n[e][0]}}var a=Object.is(t,-0)||t<0,u=Math.abs(t),c=u===1,h=n[e],f=r?c?h[1]:h[2]||h[1]:c?n[e][0]:e;return a?u+" "+f+" ago":"in "+u+" "+f}function XR(e,t){for(var i="",r=Wl(e),n;!(n=r()).done;){var s=n.value;s.literal?i+=s.val:i+=t(s.val)}return i}var Joe={D:$E,DD:_k,DDD:Sk,DDDD:Tk,t:Ek,tt:xk,ttt:Ak,tttt:Mk,T:Ck,TT:Ik,TTT:Nk,TTTT:Rk,f:Pk,ff:Dk,fff:Ok,ffff:Fk,F:$k,FF:Lk,FFF:kk,FFFF:Bk},pa=function(){e.create=function(r,n){return n===void 0&&(n={}),new e(r,n)},e.parseFormat=function(r){for(var n=null,s="",o=!1,a=[],u=0;u<r.length;u++){var c=r.charAt(u);c==="'"?(s.length>0&&a.push({literal:o,val:s}),n=null,s="",o=!o):o||c===n?s+=c:(s.length>0&&a.push({literal:!1,val:s}),s=c,n=c)}return s.length>0&&a.push({literal:o,val:s}),a},e.macroTokenToFormatOpts=function(r){return Joe[r]};function e(i,r){this.opts=r,this.loc=i,this.systemLoc=null}var t=e.prototype;return t.formatWithSystemDefault=function(r,n){this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem());var s=this.systemLoc.dtFormatter(r,Ve({},this.opts,n));return s.format()},t.formatDateTime=function(r,n){n===void 0&&(n={});var s=this.loc.dtFormatter(r,Ve({},this.opts,n));return s.format()},t.formatDateTimeParts=function(r,n){n===void 0&&(n={});var s=this.loc.dtFormatter(r,Ve({},this.opts,n));return s.formatToParts()},t.resolvedOptions=function(r,n){n===void 0&&(n={});var s=this.loc.dtFormatter(r,Ve({},this.opts,n));return s.resolvedOptions()},t.num=function(r,n){if(n===void 0&&(n=0),this.opts.forceSimple)return Wt(r,n);var s=Ve({},this.opts);return n>0&&(s.padTo=n),this.loc.numberFormatter(s).format(r)},t.formatDateTimeFromString=function(r,n){var s=this,o=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",u=function(w,T){return s.loc.extract(r,w,T)},c=function(w){return r.isOffsetFixed&&r.offset===0&&w.allowZ?"Z":r.isValid?r.zone.formatOffset(r.ts,w.format):""},h=function(){return o?qoe(r):u({hour:"numeric",hourCycle:"h12"},"dayperiod")},f=function(w,T){return o?Yoe(r,w):u(T?{month:w}:{month:w,day:"numeric"},"month")},y=function(w,T){return o?Woe(r,w):u(T?{weekday:w}:{weekday:w,month:"long",day:"numeric"},"weekday")},m=function(w){var T=e.macroTokenToFormatOpts(w);return T?s.formatWithSystemDefault(r,T):w},g=function(w){return o?Koe(r,w):u({era:w},"era")},v=function(w){switch(w){case"S":return s.num(r.millisecond);case"u":case"SSS":return s.num(r.millisecond,3);case"s":return s.num(r.second);case"ss":return s.num(r.second,2);case"uu":return s.num(Math.floor(r.millisecond/10),2);case"uuu":return s.num(Math.floor(r.millisecond/100));case"m":return s.num(r.minute);case"mm":return s.num(r.minute,2);case"h":return s.num(r.hour%12===0?12:r.hour%12);case"hh":return s.num(r.hour%12===0?12:r.hour%12,2);case"H":return s.num(r.hour);case"HH":return s.num(r.hour,2);case"Z":return c({format:"narrow",allowZ:s.opts.allowZ});case"ZZ":return c({format:"short",allowZ:s.opts.allowZ});case"ZZZ":return c({format:"techie",allowZ:s.opts.allowZ});case"ZZZZ":return r.zone.offsetName(r.ts,{format:"short",locale:s.loc.locale});case"ZZZZZ":return r.zone.offsetName(r.ts,{format:"long",locale:s.loc.locale});case"z":return r.zoneName;case"a":return h();case"d":return a?u({day:"numeric"},"day"):s.num(r.day);case"dd":return a?u({day:"2-digit"},"day"):s.num(r.day,2);case"c":return s.num(r.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return s.num(r.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return a?u({month:"numeric",day:"numeric"},"month"):s.num(r.month);case"LL":return a?u({month:"2-digit",day:"numeric"},"month"):s.num(r.month,2);case"LLL":return f("short",!0);case"LLLL":return f("long",!0);case"LLLLL":return f("narrow",!0);case"M":return a?u({month:"numeric"},"month"):s.num(r.month);case"MM":return a?u({month:"2-digit"},"month"):s.num(r.month,2);case"MMM":return f("short",!1);case"MMMM":return f("long",!1);case"MMMMM":return f("narrow",!1);case"y":return a?u({year:"numeric"},"year"):s.num(r.year);case"yy":return a?u({year:"2-digit"},"year"):s.num(r.year.toString().slice(-2),2);case"yyyy":return a?u({year:"numeric"},"year"):s.num(r.year,4);case"yyyyyy":return a?u({year:"numeric"},"year"):s.num(r.year,6);case"G":return g("short");case"GG":return g("long");case"GGGGG":return g("narrow");case"kk":return s.num(r.weekYear.toString().slice(-2),2);case"kkkk":return s.num(r.weekYear,4);case"W":return s.num(r.weekNumber);case"WW":return s.num(r.weekNumber,2);case"o":return s.num(r.ordinal);case"ooo":return s.num(r.ordinal,3);case"q":return s.num(r.quarter);case"qq":return s.num(r.quarter,2);case"X":return s.num(Math.floor(r.ts/1e3));case"x":return s.num(r.ts);default:return m(w)}};return XR(e.parseFormat(n),v)},t.formatDurationFromString=function(r,n){var s=this,o=function(y){switch(y[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=function(y){return function(m){var g=o(m);return g?s.num(y.get(g),m.length):m}},u=e.parseFormat(n),c=u.reduce(function(f,y){var m=y.literal,g=y.val;return m?f:f.concat(g)},[]),h=r.shiftTo.apply(r,c.map(o).filter(function(f){return f}));return XR(u,a(h))},e}(),Ss=function(){function e(i,r){this.reason=i,this.explanation=r}var t=e.prototype;return t.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},e}(),Lp=function(){function e(){}var t=e.prototype;return t.offsetName=function(r,n){throw new ja},t.formatOffset=function(r,n){throw new ja},t.offset=function(r){throw new ja},t.equals=function(r){throw new ja},Co(e,[{key:"type",get:function(){throw new ja}},{key:"name",get:function(){throw new ja}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new ja}},{key:"isValid",get:function(){throw new ja}}]),e}(),j2=null,Jk=function(e){Bn(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.offsetName=function(n,s){var o=s.format,a=s.locale;return Vk(n,o,a)},i.formatOffset=function(n,s){return Fy(this.offset(n),s)},i.offset=function(n){return-new Date(n).getTimezoneOffset()},i.equals=function(n){return n.type==="system"},Co(t,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return j2===null&&(j2=new t),j2}}]),t}(Lp),v1={};function Xoe(e){return v1[e]||(v1[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),v1[e]}var Qoe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function eae(e,t){var i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),n=r[1],s=r[2],o=r[3],a=r[4],u=r[5],c=r[6],h=r[7];return[o,n,s,a,u,c,h]}function tae(e,t){for(var i=e.formatToParts(t),r=[],n=0;n<i.length;n++){var s=i[n],o=s.type,a=s.value,u=Qoe[o];o==="era"?r[u]=a:Ge(u)||(r[u]=parseInt(a,10))}return r}var K0={},fd=function(e){Bn(t,e),t.create=function(n){return K0[n]||(K0[n]=new t(n)),K0[n]},t.resetCache=function(){K0={},v1={}},t.isValidSpecifier=function(n){return this.isValidZone(n)},t.isValidZone=function(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}};function t(r){var n;return n=e.call(this)||this,n.zoneName=r,n.valid=t.isValidZone(r),n}var i=t.prototype;return i.offsetName=function(n,s){var o=s.format,a=s.locale;return Vk(n,o,a,this.name)},i.formatOffset=function(n,s){return Fy(this.offset(n),s)},i.offset=function(n){var s=new Date(n);if(isNaN(s))return NaN;var o=Xoe(this.name),a=o.formatToParts?tae(o,s):eae(o,s),u=a[0],c=a[1],h=a[2],f=a[3],y=a[4],m=a[5],g=a[6];f==="BC"&&(u=-Math.abs(u)+1);var v=y===24?0:y,b=_M({year:u,month:c,day:h,hour:v,minute:m,second:g,millisecond:0}),w=+s,T=w%1e3;return w-=T>=0?T:1e3+T,(b-w)/(60*1e3)},i.equals=function(n){return n.type==="iana"&&n.name===this.name},Co(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(Lp),z2=null,As=function(e){Bn(t,e),t.instance=function(n){return n===0?t.utcInstance:new t(n)},t.parseSpecifier=function(n){if(n){var s=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(s)return new t(xw(s[1],s[2]))}return null};function t(r){var n;return n=e.call(this)||this,n.fixed=r,n}var i=t.prototype;return i.offsetName=function(){return this.name},i.formatOffset=function(n,s){return Fy(this.fixed,s)},i.offset=function(){return this.fixed},i.equals=function(n){return n.type==="fixed"&&n.fixed===this.fixed},Co(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return this.fixed===0?"UTC":"UTC"+Fy(this.fixed,"narrow")}},{key:"ianaName",get:function(){return this.fixed===0?"Etc/UTC":"Etc/GMT"+Fy(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return z2===null&&(z2=new t(0)),z2}}]),t}(Lp),Xk=function(e){Bn(t,e);function t(r){var n;return n=e.call(this)||this,n.zoneName=r,n}var i=t.prototype;return i.offsetName=function(){return null},i.formatOffset=function(){return""},i.offset=function(){return NaN},i.equals=function(){return!1},Co(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(Lp);function Dl(e,t){if(Ge(e)||e===null)return t;if(e instanceof Lp)return e;if(Loe(e)){var i=e.toLowerCase();return i==="local"||i==="system"?t:i==="utc"||i==="gmt"?As.utcInstance:As.parseSpecifier(i)||fd.create(e)}else return Bc(e)?As.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new Xk(e)}var QR=function(){return Date.now()},e4="system",t4=null,i4=null,r4=null,n4,qt=function(){function e(){}return e.resetCaches=function(){ci.resetCache(),fd.resetCache()},Co(e,null,[{key:"now",get:function(){return QR},set:function(i){QR=i}},{key:"defaultZone",get:function(){return Dl(e4,Jk.instance)},set:function(i){e4=i}},{key:"defaultLocale",get:function(){return t4},set:function(i){t4=i}},{key:"defaultNumberingSystem",get:function(){return i4},set:function(i){i4=i}},{key:"defaultOutputCalendar",get:function(){return r4},set:function(i){r4=i}},{key:"throwOnInvalid",get:function(){return n4},set:function(i){n4=i}}]),e}(),iae=["base"],rae=["padTo","floor"],s4={};function nae(e,t){t===void 0&&(t={});var i=JSON.stringify([e,t]),r=s4[i];return r||(r=new Intl.ListFormat(e,t),s4[i]=r),r}var LE={};function OE(e,t){t===void 0&&(t={});var i=JSON.stringify([e,t]),r=LE[i];return r||(r=new Intl.DateTimeFormat(e,t),LE[i]=r),r}var kE={};function sae(e,t){t===void 0&&(t={});var i=JSON.stringify([e,t]),r=kE[i];return r||(r=new Intl.NumberFormat(e,t),kE[i]=r),r}var FE={};function oae(e,t){t===void 0&&(t={});var i=t;i.base;var r=bk(i,iae),n=JSON.stringify([e,r]),s=FE[n];return s||(s=new Intl.RelativeTimeFormat(e,t),FE[n]=s),s}var ey=null;function aae(){return ey||(ey=new Intl.DateTimeFormat().resolvedOptions().locale,ey)}function lae(e){var t=e.indexOf("-u-");if(t===-1)return[e];var i,r=e.substring(0,t);try{i=OE(e).resolvedOptions()}catch{i=OE(r).resolvedOptions()}var n=i,s=n.numberingSystem,o=n.calendar;return[r,s,o]}function uae(e,t,i){return(i||t)&&(e+="-u",i&&(e+="-ca-"+i),t&&(e+="-nu-"+t)),e}function cae(e){for(var t=[],i=1;i<=12;i++){var r=Kt.utc(2016,i,1);t.push(e(r))}return t}function dae(e){for(var t=[],i=1;i<=7;i++){var r=Kt.utc(2016,11,13+i);t.push(e(r))}return t}function Z0(e,t,i,r,n){var s=e.listingMode(i);return s==="error"?null:s==="en"?r(t):n(t)}function hae(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}var pae=function(){function e(i,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1,n.padTo,n.floor;var s=bk(n,rae);if(!r||Object.keys(s).length>0){var o=Ve({useGrouping:!1},n);n.padTo>0&&(o.minimumIntegerDigits=n.padTo),this.inf=sae(i,o)}}var t=e.prototype;return t.format=function(r){if(this.inf){var n=this.floor?Math.floor(r):r;return this.inf.format(n)}else{var s=this.floor?Math.floor(r):wM(r,3);return Wt(s,this.padTo)}},e}(),fae=function(){function e(i,r,n){this.opts=n;var s;if(i.zone.isUniversal){var o=-1*(i.offset/60),a=o>=0?"Etc/GMT+"+o:"Etc/GMT"+o;i.offset!==0&&fd.create(a).valid?(s=a,this.dt=i):(s="UTC",n.timeZoneName?this.dt=i:this.dt=i.offset===0?i:Kt.fromMillis(i.ts+i.offset*60*1e3))}else i.zone.type==="system"?this.dt=i:(this.dt=i,s=i.zone.name);var u=Ve({},this.opts);s&&(u.timeZone=s),this.dtf=OE(r,u)}var t=e.prototype;return t.format=function(){return this.dtf.format(this.dt.toJSDate())},t.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},t.resolvedOptions=function(){return this.dtf.resolvedOptions()},e}(),yae=function(){function e(i,r,n){this.opts=Ve({style:"long"},n),!r&&Uk()&&(this.rtf=oae(i,n))}var t=e.prototype;return t.format=function(r,n){return this.rtf?this.rtf.format(r,n):Zoe(n,r,this.opts.numeric,this.opts.style!=="long")},t.formatToParts=function(r,n){return this.rtf?this.rtf.formatToParts(r,n):[]},e}(),ci=function(){e.fromOpts=function(r){return e.create(r.locale,r.numberingSystem,r.outputCalendar,r.defaultToEN)},e.create=function(r,n,s,o){o===void 0&&(o=!1);var a=r||qt.defaultLocale,u=a||(o?"en-US":aae()),c=n||qt.defaultNumberingSystem,h=s||qt.defaultOutputCalendar;return new e(u,c,h,a)},e.resetCache=function(){ey=null,LE={},kE={},FE={}},e.fromObject=function(r){var n=r===void 0?{}:r,s=n.locale,o=n.numberingSystem,a=n.outputCalendar;return e.create(s,o,a)};function e(i,r,n,s){var o=lae(i),a=o[0],u=o[1],c=o[2];this.locale=a,this.numberingSystem=r||u||null,this.outputCalendar=n||c||null,this.intl=uae(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}var t=e.prototype;return t.listingMode=function(){var r=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return r&&n?"en":"intl"},t.clone=function(r){return!r||Object.getOwnPropertyNames(r).length===0?this:e.create(r.locale||this.specifiedLocale,r.numberingSystem||this.numberingSystem,r.outputCalendar||this.outputCalendar,r.defaultToEN||!1)},t.redefaultToEN=function(r){return r===void 0&&(r={}),this.clone(Ve({},r,{defaultToEN:!0}))},t.redefaultToSystem=function(r){return r===void 0&&(r={}),this.clone(Ve({},r,{defaultToEN:!1}))},t.months=function(r,n,s){var o=this;return n===void 0&&(n=!1),s===void 0&&(s=!0),Z0(this,r,s,Gk,function(){var a=n?{month:r,day:"numeric"}:{month:r},u=n?"format":"standalone";return o.monthsCache[u][r]||(o.monthsCache[u][r]=cae(function(c){return o.extract(c,a,"month")})),o.monthsCache[u][r]})},t.weekdays=function(r,n,s){var o=this;return n===void 0&&(n=!1),s===void 0&&(s=!0),Z0(this,r,s,Yk,function(){var a=n?{weekday:r,year:"numeric",month:"long",day:"numeric"}:{weekday:r},u=n?"format":"standalone";return o.weekdaysCache[u][r]||(o.weekdaysCache[u][r]=dae(function(c){return o.extract(c,a,"weekday")})),o.weekdaysCache[u][r]})},t.meridiems=function(r){var n=this;return r===void 0&&(r=!0),Z0(this,void 0,r,function(){return Kk},function(){if(!n.meridiemCache){var s={hour:"numeric",hourCycle:"h12"};n.meridiemCache=[Kt.utc(2016,11,13,9),Kt.utc(2016,11,13,19)].map(function(o){return n.extract(o,s,"dayperiod")})}return n.meridiemCache})},t.eras=function(r,n){var s=this;return n===void 0&&(n=!0),Z0(this,r,n,Zk,function(){var o={era:r};return s.eraCache[r]||(s.eraCache[r]=[Kt.utc(-40,1,1),Kt.utc(2017,1,1)].map(function(a){return s.extract(a,o,"era")})),s.eraCache[r]})},t.extract=function(r,n,s){var o=this.dtFormatter(r,n),a=o.formatToParts(),u=a.find(function(c){return c.type.toLowerCase()===s});return u?u.value:null},t.numberFormatter=function(r){return r===void 0&&(r={}),new pae(this.intl,r.forceSimple||this.fastNumbers,r)},t.dtFormatter=function(r,n){return n===void 0&&(n={}),new fae(r,this.intl,n)},t.relFormatter=function(r){return r===void 0&&(r={}),new yae(this.intl,this.isEnglish(),r)},t.listFormatter=function(r){return r===void 0&&(r={}),nae(this.intl,r)},t.isEnglish=function(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(r){return this.locale===r.locale&&this.numberingSystem===r.numberingSystem&&this.outputCalendar===r.outputCalendar},Co(e,[{key:"fastNumbers",get:function(){return this.fastNumbersCached==null&&(this.fastNumbersCached=hae(this)),this.fastNumbersCached}}]),e}();function Op(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.reduce(function(n,s){return n+s.source},"");return RegExp("^"+r+"$")}function kp(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(n,s){var o=n[0],a=n[1],u=n[2],c=s(r,u),h=c[0],f=c[1],y=c[2];return[Ve({},o,h),f||a,y]},[{},null,1]).slice(0,2)}}function Fp(e){if(e==null)return[null,null];for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];for(var n=0,s=i;n<s.length;n++){var o=s[n],a=o[0],u=o[1],c=a.exec(e);if(c)return u(c)}return[null,null]}function Qk(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r,n){var s={},o;for(o=0;o<t.length;o++)s[t[o]]=Nl(r[n+o]);return[s,null,n+o]}}var eF=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,mae="(?:"+eF.source+"?(?:\\[("+zk.source+")\\])?)?",SM=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,tF=RegExp(""+SM.source+mae),TM=RegExp("(?:T"+tF.source+")?"),gae=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,vae=/(\d{4})-?W(\d\d)(?:-?(\d))?/,bae=/(\d{4})-?(\d{3})/,wae=Qk("weekYear","weekNumber","weekDay"),_ae=Qk("year","ordinal"),Sae=/(\d{4})-(\d\d)-(\d\d)/,iF=RegExp(SM.source+" ?(?:"+eF.source+"|("+zk.source+"))?"),Tae=RegExp("(?: "+iF.source+")?");function kh(e,t,i){var r=e[t];return Ge(r)?i:Nl(r)}function Eae(e,t){var i={year:kh(e,t),month:kh(e,t+1,1),day:kh(e,t+2,1)};return[i,null,t+3]}function Bp(e,t){var i={hours:kh(e,t,0),minutes:kh(e,t+1,0),seconds:kh(e,t+2,0),milliseconds:bM(e[t+3])};return[i,null,t+4]}function r0(e,t){var i=!e[t]&&!e[t+1],r=xw(e[t+1],e[t+2]),n=i?null:As.instance(r);return[{},n,t+3]}function n0(e,t){var i=e[t]?fd.create(e[t]):null;return[{},i,t+1]}var xae=RegExp("^T?"+SM.source+"$"),Aae=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function Mae(e){var t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],h=t[0]==="-",f=u&&u[0]==="-",y=function(g,v){return v===void 0&&(v=!1),g!==void 0&&(v||g&&h)?-g:g};return[{years:y(yu(i)),months:y(yu(r)),weeks:y(yu(n)),days:y(yu(s)),hours:y(yu(o)),minutes:y(yu(a)),seconds:y(yu(u),u==="-0"),milliseconds:y(bM(c),f)}]}var Cae={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function EM(e,t,i,r,n,s,o){var a={year:t.length===2?DE(Nl(t)):Nl(t),month:Hk.indexOf(i)+1,day:Nl(r),hour:Nl(n),minute:Nl(s)};return o&&(a.second=Nl(o)),e&&(a.weekday=e.length>3?qk.indexOf(e)+1:Wk.indexOf(e)+1),a}var Iae=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Nae(e){var t=e[1],i=e[2],r=e[3],n=e[4],s=e[5],o=e[6],a=e[7],u=e[8],c=e[9],h=e[10],f=e[11],y=EM(t,n,r,i,s,o,a),m;return u?m=Cae[u]:c?m=0:m=xw(h,f),[y,new As(m)]}function Rae(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var Pae=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,$ae=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Dae=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function o4(e){var t=e[1],i=e[2],r=e[3],n=e[4],s=e[5],o=e[6],a=e[7],u=EM(t,n,r,i,s,o,a);return[u,As.utcInstance]}function Lae(e){var t=e[1],i=e[2],r=e[3],n=e[4],s=e[5],o=e[6],a=e[7],u=EM(t,a,i,r,n,s,o);return[u,As.utcInstance]}var Oae=Op(gae,TM),kae=Op(vae,TM),Fae=Op(bae,TM),Bae=Op(tF),rF=kp(Eae,Bp,r0,n0),Uae=kp(wae,Bp,r0,n0),Vae=kp(_ae,Bp,r0,n0),jae=kp(Bp,r0,n0);function zae(e){return Fp(e,[Oae,rF],[kae,Uae],[Fae,Vae],[Bae,jae])}function Hae(e){return Fp(Rae(e),[Iae,Nae])}function Gae(e){return Fp(e,[Pae,o4],[$ae,o4],[Dae,Lae])}function qae(e){return Fp(e,[Aae,Mae])}var Wae=kp(Bp);function Yae(e){return Fp(e,[xae,Wae])}var Kae=Op(Sae,Tae),Zae=Op(iF),Jae=kp(Bp,r0,n0);function Xae(e){return Fp(e,[Kae,rF],[Zae,Jae])}var Qae="Invalid Duration",nF={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},ele=Ve({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},nF),un=146097/400,gd=146097/4800,tle=Ve({years:{quarters:4,months:12,weeks:un/7,days:un,hours:un*24,minutes:un*24*60,seconds:un*24*60*60,milliseconds:un*24*60*60*1e3},quarters:{months:3,weeks:un/28,days:un/4,hours:un*24/4,minutes:un*24*60/4,seconds:un*24*60*60/4,milliseconds:un*24*60*60*1e3/4},months:{weeks:gd/7,days:gd,hours:gd*24,minutes:gd*24*60,seconds:gd*24*60*60,milliseconds:gd*24*60*60*1e3}},nF),ju=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ile=ju.slice(0).reverse();function mu(e,t,i){i===void 0&&(i=!1);var r={values:i?t.values:Ve({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new wi(r)}function rle(e){return e<0?Math.floor(e):Math.ceil(e)}function sF(e,t,i,r,n){var s=e[n][i],o=t[i]/s,a=Math.sign(o)===Math.sign(r[n]),u=!a&&r[n]!==0&&Math.abs(o)<=1?rle(o):Math.trunc(o);r[n]+=u,t[i]-=u*s}function nle(e,t){ile.reduce(function(i,r){return Ge(t[r])?i:(i&&sF(e,t,i,t,r),r)},null)}var wi=function(){function e(i){var r=i.conversionAccuracy==="longterm"||!1;this.values=i.values,this.loc=i.loc||ci.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=i.invalid||null,this.matrix=r?tle:ele,this.isLuxonDuration=!0}e.fromMillis=function(r,n){return e.fromObject({milliseconds:r},n)},e.fromObject=function(r,n){if(n===void 0&&(n={}),r==null||typeof r!="object")throw new An("Duration.fromObject: argument expected to be an object, got "+(r===null?"null":typeof r));return new e({values:Qv(r,e.normalizeUnit),loc:ci.fromObject(n),conversionAccuracy:n.conversionAccuracy})},e.fromDurationLike=function(r){if(Bc(r))return e.fromMillis(r);if(e.isDuration(r))return r;if(typeof r=="object")return e.fromObject(r);throw new An("Unknown duration argument "+r+" of type "+typeof r)},e.fromISO=function(r,n){var s=qae(r),o=s[0];return o?e.fromObject(o,n):e.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},e.fromISOTime=function(r,n){var s=Yae(r),o=s[0];return o?e.fromObject(o,n):e.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},e.invalid=function(r,n){if(n===void 0&&(n=null),!r)throw new An("need to specify a reason the Duration is invalid");var s=r instanceof Ss?r:new Ss(r,n);if(qt.throwOnInvalid)throw new Poe(s);return new e({invalid:s})},e.normalizeUnit=function(r){var n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[r&&r.toLowerCase()];if(!n)throw new wk(r);return n},e.isDuration=function(r){return r&&r.isLuxonDuration||!1};var t=e.prototype;return t.toFormat=function(r,n){n===void 0&&(n={});var s=Ve({},n,{floor:n.round!==!1&&n.floor!==!1});return this.isValid?pa.create(this.loc,s).formatDurationFromString(this,r):Qae},t.toHuman=function(r){var n=this;r===void 0&&(r={});var s=ju.map(function(o){var a=n.values[o];return Ge(a)?null:n.loc.numberFormatter(Ve({style:"unit",unitDisplay:"long"},r,{unit:o.slice(0,-1)})).format(a)}).filter(function(o){return o});return this.loc.listFormatter(Ve({type:"conjunction",style:r.listStyle||"narrow"},r)).format(s)},t.toObject=function(){return this.isValid?Ve({},this.values):{}},t.toISO=function(){if(!this.isValid)return null;var r="P";return this.years!==0&&(r+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(r+=this.months+this.quarters*3+"M"),this.weeks!==0&&(r+=this.weeks+"W"),this.days!==0&&(r+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(r+="T"),this.hours!==0&&(r+=this.hours+"H"),this.minutes!==0&&(r+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(r+=wM(this.seconds+this.milliseconds/1e3,3)+"S"),r==="P"&&(r+="T0S"),r},t.toISOTime=function(r){if(r===void 0&&(r={}),!this.isValid)return null;var n=this.toMillis();if(n<0||n>=864e5)return null;r=Ve({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},r);var s=this.shiftTo("hours","minutes","seconds","milliseconds"),o=r.format==="basic"?"hhmm":"hh:mm";(!r.suppressSeconds||s.seconds!==0||s.milliseconds!==0)&&(o+=r.format==="basic"?"ss":":ss",(!r.suppressMilliseconds||s.milliseconds!==0)&&(o+=".SSS"));var a=s.toFormat(o);return r.includePrefix&&(a="T"+a),a},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.toMillis=function(){return this.as("milliseconds")},t.valueOf=function(){return this.toMillis()},t.plus=function(r){if(!this.isValid)return this;for(var n=e.fromDurationLike(r),s={},o=Wl(ju),a;!(a=o()).done;){var u=a.value;(sp(n.values,u)||sp(this.values,u))&&(s[u]=n.get(u)+this.get(u))}return mu(this,{values:s},!0)},t.minus=function(r){if(!this.isValid)return this;var n=e.fromDurationLike(r);return this.plus(n.negate())},t.mapUnits=function(r){if(!this.isValid)return this;for(var n={},s=0,o=Object.keys(this.values);s<o.length;s++){var a=o[s];n[a]=jk(r(this.values[a],a))}return mu(this,{values:n},!0)},t.get=function(r){return this[e.normalizeUnit(r)]},t.set=function(r){if(!this.isValid)return this;var n=Ve({},this.values,Qv(r,e.normalizeUnit));return mu(this,{values:n})},t.reconfigure=function(r){var n=r===void 0?{}:r,s=n.locale,o=n.numberingSystem,a=n.conversionAccuracy,u=this.loc.clone({locale:s,numberingSystem:o}),c={loc:u};return a&&(c.conversionAccuracy=a),mu(this,c)},t.as=function(r){return this.isValid?this.shiftTo(r).get(r):NaN},t.normalize=function(){if(!this.isValid)return this;var r=this.toObject();return nle(this.matrix,r),mu(this,{values:r},!0)},t.shiftTo=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];if(!this.isValid)return this;if(n.length===0)return this;n=n.map(function(T){return e.normalizeUnit(T)});for(var o={},a={},u=this.toObject(),c,h=Wl(ju),f;!(f=h()).done;){var y=f.value;if(n.indexOf(y)>=0){c=y;var m=0;for(var g in a)m+=this.matrix[g][y]*a[g],a[g]=0;Bc(u[y])&&(m+=u[y]);var v=Math.trunc(m);o[y]=v,a[y]=(m*1e3-v*1e3)/1e3;for(var b in u)ju.indexOf(b)>ju.indexOf(y)&&sF(this.matrix,u,b,o,y)}else Bc(u[y])&&(a[y]=u[y])}for(var w in a)a[w]!==0&&(o[c]+=w===c?a[w]:a[w]/this.matrix[c][w]);return mu(this,{values:o},!0).normalize()},t.negate=function(){if(!this.isValid)return this;for(var r={},n=0,s=Object.keys(this.values);n<s.length;n++){var o=s[n];r[o]=this.values[o]===0?0:-this.values[o]}return mu(this,{values:r},!0)},t.equals=function(r){if(!this.isValid||!r.isValid||!this.loc.equals(r.loc))return!1;function n(u,c){return u===void 0||u===0?c===void 0||c===0:u===c}for(var s=Wl(ju),o;!(o=s()).done;){var a=o.value;if(!n(this.values[a],r.values[a]))return!1}return!0},Co(e,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),of="Invalid Interval";function sle(e,t){return!e||!e.isValid?By.invalid("missing or invalid start"):!t||!t.isValid?By.invalid("missing or invalid end"):t<e?By.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO()):null}var By=function(){function e(i){this.s=i.start,this.e=i.end,this.invalid=i.invalid||null,this.isLuxonInterval=!0}e.invalid=function(r,n){if(n===void 0&&(n=null),!r)throw new An("need to specify a reason the Interval is invalid");var s=r instanceof Ss?r:new Ss(r,n);if(qt.throwOnInvalid)throw new Roe(s);return new e({invalid:s})},e.fromDateTimes=function(r,n){var s=uf(r),o=uf(n),a=sle(s,o);return a==null?new e({start:s,end:o}):a},e.after=function(r,n){var s=wi.fromDurationLike(n),o=uf(r);return e.fromDateTimes(o,o.plus(s))},e.before=function(r,n){var s=wi.fromDurationLike(n),o=uf(r);return e.fromDateTimes(o.minus(s),o)},e.fromISO=function(r,n){var s=(r||"").split("/",2),o=s[0],a=s[1];if(o&&a){var u,c;try{u=Kt.fromISO(o,n),c=u.isValid}catch{c=!1}var h,f;try{h=Kt.fromISO(a,n),f=h.isValid}catch{f=!1}if(c&&f)return e.fromDateTimes(u,h);if(c){var y=wi.fromISO(a,n);if(y.isValid)return e.after(u,y)}else if(f){var m=wi.fromISO(o,n);if(m.isValid)return e.before(h,m)}}return e.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},e.isInterval=function(r){return r&&r.isLuxonInterval||!1};var t=e.prototype;return t.length=function(r){return r===void 0&&(r="milliseconds"),this.isValid?this.toDuration.apply(this,[r]).get(r):NaN},t.count=function(r){if(r===void 0&&(r="milliseconds"),!this.isValid)return NaN;var n=this.start.startOf(r),s=this.end.startOf(r);return Math.floor(s.diff(n,r).get(r))+1},t.hasSame=function(r){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,r):!1},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(r){return this.isValid?this.s>r:!1},t.isBefore=function(r){return this.isValid?this.e<=r:!1},t.contains=function(r){return this.isValid?this.s<=r&&this.e>r:!1},t.set=function(r){var n=r===void 0?{}:r,s=n.start,o=n.end;return this.isValid?e.fromDateTimes(s||this.s,o||this.e):this},t.splitAt=function(){var r=this;if(!this.isValid)return[];for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];for(var a=s.map(uf).filter(function(m){return r.contains(m)}).sort(),u=[],c=this.s,h=0;c<this.e;){var f=a[h]||this.e,y=+f>+this.e?this.e:f;u.push(e.fromDateTimes(c,y)),c=y,h+=1}return u},t.splitBy=function(r){var n=wi.fromDurationLike(r);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];for(var s=this.s,o=1,a,u=[];s<this.e;){var c=this.start.plus(n.mapUnits(function(h){return h*o}));a=+c>+this.e?this.e:c,u.push(e.fromDateTimes(s,a)),s=a,o+=1}return u},t.divideEqually=function(r){return this.isValid?this.splitBy(this.length()/r).slice(0,r):[]},t.overlaps=function(r){return this.e>r.s&&this.s<r.e},t.abutsStart=function(r){return this.isValid?+this.e==+r.s:!1},t.abutsEnd=function(r){return this.isValid?+r.e==+this.s:!1},t.engulfs=function(r){return this.isValid?this.s<=r.s&&this.e>=r.e:!1},t.equals=function(r){return!this.isValid||!r.isValid?!1:this.s.equals(r.s)&&this.e.equals(r.e)},t.intersection=function(r){if(!this.isValid)return this;var n=this.s>r.s?this.s:r.s,s=this.e<r.e?this.e:r.e;return n>=s?null:e.fromDateTimes(n,s)},t.union=function(r){if(!this.isValid)return this;var n=this.s<r.s?this.s:r.s,s=this.e>r.e?this.e:r.e;return e.fromDateTimes(n,s)},e.merge=function(r){var n=r.sort(function(a,u){return a.s-u.s}).reduce(function(a,u){var c=a[0],h=a[1];return h?h.overlaps(u)||h.abutsStart(u)?[c,h.union(u)]:[c.concat([h]),u]:[c,u]},[[],null]),s=n[0],o=n[1];return o&&s.push(o),s},e.xor=function(r){for(var n,s=null,o=0,a=[],u=r.map(function(g){return[{time:g.s,type:"s"},{time:g.e,type:"e"}]}),c=(n=Array.prototype).concat.apply(n,u),h=c.sort(function(g,v){return g.time-v.time}),f=Wl(h),y;!(y=f()).done;){var m=y.value;o+=m.type==="s"?1:-1,o===1?s=m.time:(s&&+s!=+m.time&&a.push(e.fromDateTimes(s,m.time)),s=null)}return e.merge(a)},t.difference=function(){for(var r=this,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e.xor([this].concat(s)).map(function(a){return r.intersection(a)}).filter(function(a){return a&&!a.isEmpty()})},t.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":of},t.toISO=function(r){return this.isValid?this.s.toISO(r)+"/"+this.e.toISO(r):of},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():of},t.toISOTime=function(r){return this.isValid?this.s.toISOTime(r)+"/"+this.e.toISOTime(r):of},t.toFormat=function(r,n){var s=n===void 0?{}:n,o=s.separator,a=o===void 0?" \u2013 ":o;return this.isValid?""+this.s.toFormat(r)+a+this.e.toFormat(r):of},t.toDuration=function(r,n){return this.isValid?this.e.diff(this.s,r,n):wi.invalid(this.invalidReason)},t.mapEndpoints=function(r){return e.fromDateTimes(r(this.s),r(this.e))},Co(e,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return this.invalidReason===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),ty=function(){function e(){}return e.hasDST=function(i){i===void 0&&(i=qt.defaultZone);var r=Kt.now().setZone(i).set({month:12});return!i.isUniversal&&r.offset!==r.set({month:6}).offset},e.isValidIANAZone=function(i){return fd.isValidZone(i)},e.normalizeZone=function(i){return Dl(i,qt.defaultZone)},e.months=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,s=n.locale,o=s===void 0?null:s,a=n.numberingSystem,u=a===void 0?null:a,c=n.locObj,h=c===void 0?null:c,f=n.outputCalendar,y=f===void 0?"gregory":f;return(h||ci.create(o,u,y)).months(i)},e.monthsFormat=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,s=n.locale,o=s===void 0?null:s,a=n.numberingSystem,u=a===void 0?null:a,c=n.locObj,h=c===void 0?null:c,f=n.outputCalendar,y=f===void 0?"gregory":f;return(h||ci.create(o,u,y)).months(i,!0)},e.weekdays=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,s=n.locale,o=s===void 0?null:s,a=n.numberingSystem,u=a===void 0?null:a,c=n.locObj,h=c===void 0?null:c;return(h||ci.create(o,u,null)).weekdays(i)},e.weekdaysFormat=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,s=n.locale,o=s===void 0?null:s,a=n.numberingSystem,u=a===void 0?null:a,c=n.locObj,h=c===void 0?null:c;return(h||ci.create(o,u,null)).weekdays(i,!0)},e.meridiems=function(i){var r=i===void 0?{}:i,n=r.locale,s=n===void 0?null:n;return ci.create(s).meridiems()},e.eras=function(i,r){i===void 0&&(i="short");var n=r===void 0?{}:r,s=n.locale,o=s===void 0?null:s;return ci.create(o,null,"gregory").eras(i)},e.features=function(){return{relative:Uk()}},e}();function a4(e,t){var i=function(s){return s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},r=i(t)-i(e);return Math.floor(wi.fromMillis(r).as("days"))}function ole(e,t,i){for(var r=[["years",function(v,b){return b.year-v.year}],["quarters",function(v,b){return b.quarter-v.quarter}],["months",function(v,b){return b.month-v.month+(b.year-v.year)*12}],["weeks",function(v,b){var w=a4(v,b);return(w-w%7)/7}],["days",a4]],n={},s,o,a=0,u=r;a<u.length;a++){var c=u[a],h=c[0],f=c[1];if(i.indexOf(h)>=0){var y;s=h;var m=f(e,t);if(o=e.plus((y={},y[h]=m,y)),o>t){var g;e=e.plus((g={},g[h]=m-1,g)),m-=1}else e=o;n[h]=m}}return[e,n,o,s]}function ale(e,t,i,r){var n=ole(e,t,i),s=n[0],o=n[1],a=n[2],u=n[3],c=t-s,h=i.filter(function(g){return["hours","minutes","seconds","milliseconds"].indexOf(g)>=0});if(h.length===0){if(a<t){var f;a=s.plus((f={},f[u]=1,f))}a!==s&&(o[u]=(o[u]||0)+c/(a-s))}var y=wi.fromObject(o,r);if(h.length>0){var m;return(m=wi.fromMillis(c,r)).shiftTo.apply(m,h).plus(y)}else return y}var xM={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},l4={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},lle=xM.hanidec.replace(/[\[|\]]/g,"").split("");function ule(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var i=0;i<e.length;i++){var r=e.charCodeAt(i);if(e[i].search(xM.hanidec)!==-1)t+=lle.indexOf(e[i]);else for(var n in l4){var s=l4[n],o=s[0],a=s[1];r>=o&&r<=a&&(t+=r-o)}}return parseInt(t,10)}else return t}function Hn(e,t){var i=e.numberingSystem;return t===void 0&&(t=""),new RegExp(""+xM[i||"latn"]+t)}var cle="missing Intl.DateTimeFormat.formatToParts support";function Ze(e,t){return t===void 0&&(t=function(r){return r}),{regex:e,deser:function(r){var n=r[0];return t(ule(n))}}}var dle=String.fromCharCode(160),oF="[ "+dle+"]",aF=new RegExp(oF,"g");function hle(e){return e.replace(/\./g,"\\.?").replace(aF,oF)}function u4(e){return e.replace(/\./g,"").replace(aF," ").toLowerCase()}function Gn(e,t){return e===null?null:{regex:RegExp(e.map(hle).join("|")),deser:function(r){var n=r[0];return e.findIndex(function(s){return u4(n)===u4(s)})+t}}}function c4(e,t){return{regex:e,deser:function(r){var n=r[1],s=r[2];return xw(n,s)},groups:t}}function H2(e){return{regex:e,deser:function(i){var r=i[0];return r}}}function ple(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function fle(e,t){var i=Hn(t),r=Hn(t,"{2}"),n=Hn(t,"{3}"),s=Hn(t,"{4}"),o=Hn(t,"{6}"),a=Hn(t,"{1,2}"),u=Hn(t,"{1,3}"),c=Hn(t,"{1,6}"),h=Hn(t,"{1,9}"),f=Hn(t,"{2,4}"),y=Hn(t,"{4,6}"),m=function(w){return{regex:RegExp(ple(w.val)),deser:function(A){var R=A[0];return R},literal:!0}},g=function(w){if(e.literal)return m(w);switch(w.val){case"G":return Gn(t.eras("short",!1),0);case"GG":return Gn(t.eras("long",!1),0);case"y":return Ze(c);case"yy":return Ze(f,DE);case"yyyy":return Ze(s);case"yyyyy":return Ze(y);case"yyyyyy":return Ze(o);case"M":return Ze(a);case"MM":return Ze(r);case"MMM":return Gn(t.months("short",!0,!1),1);case"MMMM":return Gn(t.months("long",!0,!1),1);case"L":return Ze(a);case"LL":return Ze(r);case"LLL":return Gn(t.months("short",!1,!1),1);case"LLLL":return Gn(t.months("long",!1,!1),1);case"d":return Ze(a);case"dd":return Ze(r);case"o":return Ze(u);case"ooo":return Ze(n);case"HH":return Ze(r);case"H":return Ze(a);case"hh":return Ze(r);case"h":return Ze(a);case"mm":return Ze(r);case"m":return Ze(a);case"q":return Ze(a);case"qq":return Ze(r);case"s":return Ze(a);case"ss":return Ze(r);case"S":return Ze(u);case"SSS":return Ze(n);case"u":return H2(h);case"uu":return H2(a);case"uuu":return Ze(i);case"a":return Gn(t.meridiems(),0);case"kkkk":return Ze(s);case"kk":return Ze(f,DE);case"W":return Ze(a);case"WW":return Ze(r);case"E":case"c":return Ze(i);case"EEE":return Gn(t.weekdays("short",!1,!1),1);case"EEEE":return Gn(t.weekdays("long",!1,!1),1);case"ccc":return Gn(t.weekdays("short",!0,!1),1);case"cccc":return Gn(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return c4(new RegExp("([+-]"+a.source+")(?::("+r.source+"))?"),2);case"ZZZ":return c4(new RegExp("([+-]"+a.source+")("+r.source+")?"),2);case"z":return H2(/[a-z_+-/]{1,256}?/i);default:return m(w)}},v=g(e)||{invalidReason:cle};return v.token=e,v}var yle={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function mle(e,t,i){var r=e.type,n=e.value;if(r==="literal")return{literal:!0,val:n};var s=i[r],o=yle[r];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function gle(e){var t=e.map(function(i){return i.regex}).reduce(function(i,r){return i+"("+r.source+")"},"");return["^"+t+"$",e]}function vle(e,t,i){var r=e.match(t);if(r){var n={},s=1;for(var o in i)if(sp(i,o)){var a=i[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+u))),s+=u}return[r,n]}else return[r,{}]}function ble(e){var t=function(o){switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},i=null,r;Ge(e.z)||(i=fd.create(e.z)),Ge(e.Z)||(i||(i=new As(e.Z)),r=e.Z),Ge(e.q)||(e.M=(e.q-1)*3+1),Ge(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ge(e.u)||(e.S=bM(e.u));var n=Object.keys(e).reduce(function(s,o){var a=t(o);return a&&(s[a]=e[o]),s},{});return[n,i,r]}var G2=null;function wle(){return G2||(G2=Kt.fromMillis(1555555555555)),G2}function _le(e,t){if(e.literal)return e;var i=pa.macroTokenToFormatOpts(e.val);if(!i)return e;var r=pa.create(t,i),n=r.formatDateTimeParts(wle()),s=n.map(function(o){return mle(o,t,i)});return s.includes(void 0)?e:s}function Sle(e,t){var i;return(i=Array.prototype).concat.apply(i,e.map(function(r){return _le(r,t)}))}function lF(e,t,i){var r=Sle(pa.parseFormat(i),e),n=r.map(function(w){return fle(w,e)}),s=n.find(function(w){return w.invalidReason});if(s)return{input:t,tokens:r,invalidReason:s.invalidReason};var o=gle(n),a=o[0],u=o[1],c=RegExp(a,"i"),h=vle(t,c,u),f=h[0],y=h[1],m=y?ble(y):[null,null,void 0],g=m[0],v=m[1],b=m[2];if(sp(y,"a")&&sp(y,"H"))throw new Qf("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:c,rawMatches:f,matches:y,result:g,zone:v,specificOffset:b}}function Tle(e,t,i){var r=lF(e,t,i),n=r.result,s=r.zone,o=r.specificOffset,a=r.invalidReason;return[n,s,o,a]}var uF=[0,31,59,90,120,151,181,212,243,273,304,334],cF=[0,31,60,91,121,152,182,213,244,274,305,335];function Mn(e,t){return new Ss("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function dF(e,t,i){var r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);var n=r.getUTCDay();return n===0?7:n}function hF(e,t,i){return i+(i0(e)?cF:uF)[t-1]}function pF(e,t){var i=i0(e)?cF:uF,r=i.findIndex(function(s){return s<t}),n=t-i[r];return{month:r+1,day:n}}function BE(e){var t=e.year,i=e.month,r=e.day,n=hF(t,i,r),s=dF(t,i,r),o=Math.floor((n-s+10)/7),a;return o<1?(a=t-1,o=Xv(a)):o>Xv(t)?(a=t+1,o=1):a=t,Ve({weekYear:a,weekNumber:o,weekday:s},Aw(e))}function d4(e){var t=e.weekYear,i=e.weekNumber,r=e.weekday,n=dF(t,1,4),s=ky(t),o=i*7+r-n-3,a;o<1?(a=t-1,o+=ky(a)):o>s?(a=t+1,o-=ky(t)):a=t;var u=pF(a,o),c=u.month,h=u.day;return Ve({year:a,month:c,day:h},Aw(e))}function q2(e){var t=e.year,i=e.month,r=e.day,n=hF(t,i,r);return Ve({year:t,ordinal:n},Aw(e))}function h4(e){var t=e.year,i=e.ordinal,r=pF(t,i),n=r.month,s=r.day;return Ve({year:t,month:n,day:s},Aw(e))}function Ele(e){var t=Ew(e.weekYear),i=ha(e.weekNumber,1,Xv(e.weekYear)),r=ha(e.weekday,1,7);return t?i?r?!1:Mn("weekday",e.weekday):Mn("week",e.week):Mn("weekYear",e.weekYear)}function xle(e){var t=Ew(e.year),i=ha(e.ordinal,1,ky(e.year));return t?i?!1:Mn("ordinal",e.ordinal):Mn("year",e.year)}function fF(e){var t=Ew(e.year),i=ha(e.month,1,12),r=ha(e.day,1,Jv(e.year,e.month));return t?i?r?!1:Mn("day",e.day):Mn("month",e.month):Mn("year",e.year)}function yF(e){var t=e.hour,i=e.minute,r=e.second,n=e.millisecond,s=ha(t,0,23)||t===24&&i===0&&r===0&&n===0,o=ha(i,0,59),a=ha(r,0,59),u=ha(n,0,999);return s?o?a?u?!1:Mn("millisecond",n):Mn("second",r):Mn("minute",i):Mn("hour",t)}var W2="Invalid DateTime",p4=864e13;function J0(e){return new Ss("unsupported zone",'the zone "'+e.name+'" is not supported')}function Y2(e){return e.weekData===null&&(e.weekData=BE(e.c)),e.weekData}function af(e,t){var i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Kt(Ve({},i,t,{old:i}))}function mF(e,t,i){var r=e-t*60*1e3,n=i.offset(r);if(t===n)return[r,t];r-=(n-t)*60*1e3;var s=i.offset(r);return n===s?[r,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function f4(e,t){e+=t*60*1e3;var i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function b1(e,t,i){return mF(_M(e),t,i)}function y4(e,t){var i=e.o,r=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s=Ve({},e.c,{year:r,month:n,day:Math.min(e.c.day,Jv(r,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7}),o=wi.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=_M(s),u=mF(a,i,e.zone),c=u[0],h=u[1];return o!==0&&(c+=o,h=e.zone.offset(c)),{ts:c,o:h}}function lf(e,t,i,r,n,s){var o=i.setZone,a=i.zone;if(e&&Object.keys(e).length!==0){var u=t||a,c=Kt.fromObject(e,Ve({},i,{zone:u,specificOffset:s}));return o?c:c.setZone(a)}else return Kt.invalid(new Ss("unparsable",'the input "'+n+`" can't be parsed as `+r))}function X0(e,t,i){return i===void 0&&(i=!0),e.isValid?pa.create(ci.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function K2(e,t){var i=e.c.year>9999||e.c.year<0,r="";return i&&e.c.year>=0&&(r+="+"),r+=Wt(e.c.year,i?6:4),t?(r+="-",r+=Wt(e.c.month),r+="-",r+=Wt(e.c.day)):(r+=Wt(e.c.month),r+=Wt(e.c.day)),r}function m4(e,t,i,r,n,s){var o=Wt(e.c.hour);return t?(o+=":",o+=Wt(e.c.minute),(e.c.second!==0||!i)&&(o+=":")):o+=Wt(e.c.minute),(e.c.second!==0||!i)&&(o+=Wt(e.c.second),(e.c.millisecond!==0||!r)&&(o+=".",o+=Wt(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Wt(Math.trunc(-e.o/60)),o+=":",o+=Wt(Math.trunc(-e.o%60))):(o+="+",o+=Wt(Math.trunc(e.o/60)),o+=":",o+=Wt(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}var gF={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ale={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Mle={ordinal:1,hour:0,minute:0,second:0,millisecond:0},vF=["year","month","day","hour","minute","second","millisecond"],Cle=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Ile=["year","ordinal","hour","minute","second","millisecond"];function g4(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new wk(e);return t}function v4(e,t){var i=Dl(t.zone,qt.defaultZone),r=ci.fromObject(t),n=qt.now(),s,o;if(Ge(e.year))s=n;else{for(var a=Wl(vF),u;!(u=a()).done;){var c=u.value;Ge(e[c])&&(e[c]=gF[c])}var h=fF(e)||yF(e);if(h)return Kt.invalid(h);var f=i.offset(n),y=b1(e,f,i);s=y[0],o=y[1]}return new Kt({ts:s,zone:i,loc:r,o})}function b4(e,t,i){var r=Ge(i.round)?!0:i.round,n=function(f,y){f=wM(f,r||i.calendary?0:2,!0);var m=t.loc.clone(i).relFormatter(i);return m.format(f,y)},s=function(f){return i.calendary?t.hasSame(e,f)?0:t.startOf(f).diff(e.startOf(f),f).get(f):t.diff(e,f).get(f)};if(i.unit)return n(s(i.unit),i.unit);for(var o=Wl(i.units),a;!(a=o()).done;){var u=a.value,c=s(u);if(Math.abs(c)>=1)return n(c,u)}return n(e>t?-0:0,i.units[i.units.length-1])}function w4(e){var t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}var Kt=function(){function e(i){var r=i.zone||qt.defaultZone,n=i.invalid||(Number.isNaN(i.ts)?new Ss("invalid input"):null)||(r.isValid?null:J0(r));this.ts=Ge(i.ts)?qt.now():i.ts;var s=null,o=null;if(!n){var a=i.old&&i.old.ts===this.ts&&i.old.zone.equals(r);if(a){var u=[i.old.c,i.old.o];s=u[0],o=u[1]}else{var c=r.offset(this.ts);s=f4(this.ts,c),n=Number.isNaN(s.year)?new Ss("invalid input"):null,s=n?null:s,o=n?null:c}}this._zone=r,this.loc=i.loc||ci.create(),this.invalid=n,this.weekData=null,this.c=s,this.o=o,this.isLuxonDateTime=!0}e.now=function(){return new e({})},e.local=function(){var r=w4(arguments),n=r[0],s=r[1],o=s[0],a=s[1],u=s[2],c=s[3],h=s[4],f=s[5],y=s[6];return v4({year:o,month:a,day:u,hour:c,minute:h,second:f,millisecond:y},n)},e.utc=function(){var r=w4(arguments),n=r[0],s=r[1],o=s[0],a=s[1],u=s[2],c=s[3],h=s[4],f=s[5],y=s[6];return n.zone=As.utcInstance,v4({year:o,month:a,day:u,hour:c,minute:h,second:f,millisecond:y},n)},e.fromJSDate=function(r,n){n===void 0&&(n={});var s=Ooe(r)?r.valueOf():NaN;if(Number.isNaN(s))return e.invalid("invalid input");var o=Dl(n.zone,qt.defaultZone);return o.isValid?new e({ts:s,zone:o,loc:ci.fromObject(n)}):e.invalid(J0(o))},e.fromMillis=function(r,n){if(n===void 0&&(n={}),Bc(r))return r<-p4||r>p4?e.invalid("Timestamp out of range"):new e({ts:r,zone:Dl(n.zone,qt.defaultZone),loc:ci.fromObject(n)});throw new An("fromMillis requires a numerical input, but received a "+typeof r+" with value "+r)},e.fromSeconds=function(r,n){if(n===void 0&&(n={}),Bc(r))return new e({ts:r*1e3,zone:Dl(n.zone,qt.defaultZone),loc:ci.fromObject(n)});throw new An("fromSeconds requires a numerical input")},e.fromObject=function(r,n){n===void 0&&(n={}),r=r||{};var s=Dl(n.zone,qt.defaultZone);if(!s.isValid)return e.invalid(J0(s));var o=qt.now(),a=Ge(n.specificOffset)?s.offset(o):n.specificOffset,u=Qv(r,g4),c=!Ge(u.ordinal),h=!Ge(u.year),f=!Ge(u.month)||!Ge(u.day),y=h||f,m=u.weekYear||u.weekNumber,g=ci.fromObject(n);if((y||c)&&m)throw new Qf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&c)throw new Qf("Can't mix ordinal dates with month/day");var v=m||u.weekday&&!y,b,w,T=f4(o,a);v?(b=Cle,w=Ale,T=BE(T)):c?(b=Ile,w=Mle,T=q2(T)):(b=vF,w=gF);for(var A=!1,R=Wl(b),M;!(M=R()).done;){var C=M.value,k=u[C];Ge(k)?A?u[C]=w[C]:u[C]=T[C]:A=!0}var B=v?Ele(u):c?xle(u):fF(u),H=B||yF(u);if(H)return e.invalid(H);var Q=v?d4(u):c?h4(u):u,ee=b1(Q,a,s),le=ee[0],be=ee[1],oe=new e({ts:le,zone:s,o:be,loc:g});return u.weekday&&y&&r.weekday!==oe.weekday?e.invalid("mismatched weekday","you can't specify both a weekday of "+u.weekday+" and a date of "+oe.toISO()):oe},e.fromISO=function(r,n){n===void 0&&(n={});var s=zae(r),o=s[0],a=s[1];return lf(o,a,n,"ISO 8601",r)},e.fromRFC2822=function(r,n){n===void 0&&(n={});var s=Hae(r),o=s[0],a=s[1];return lf(o,a,n,"RFC 2822",r)},e.fromHTTP=function(r,n){n===void 0&&(n={});var s=Gae(r),o=s[0],a=s[1];return lf(o,a,n,"HTTP",n)},e.fromFormat=function(r,n,s){if(s===void 0&&(s={}),Ge(r)||Ge(n))throw new An("fromFormat requires an input string and a format");var o=s,a=o.locale,u=a===void 0?null:a,c=o.numberingSystem,h=c===void 0?null:c,f=ci.fromOpts({locale:u,numberingSystem:h,defaultToEN:!0}),y=Tle(f,r,n),m=y[0],g=y[1],v=y[2],b=y[3];return b?e.invalid(b):lf(m,g,s,"format "+n,r,v)},e.fromString=function(r,n,s){return s===void 0&&(s={}),e.fromFormat(r,n,s)},e.fromSQL=function(r,n){n===void 0&&(n={});var s=Xae(r),o=s[0],a=s[1];return lf(o,a,n,"SQL",r)},e.invalid=function(r,n){if(n===void 0&&(n=null),!r)throw new An("need to specify a reason the DateTime is invalid");var s=r instanceof Ss?r:new Ss(r,n);if(qt.throwOnInvalid)throw new Noe(s);return new e({invalid:s})},e.isDateTime=function(r){return r&&r.isLuxonDateTime||!1};var t=e.prototype;return t.get=function(r){return this[r]},t.resolvedLocaleOptions=function(r){r===void 0&&(r={});var n=pa.create(this.loc.clone(r),r).resolvedOptions(this),s=n.locale,o=n.numberingSystem,a=n.calendar;return{locale:s,numberingSystem:o,outputCalendar:a}},t.toUTC=function(r,n){return r===void 0&&(r=0),n===void 0&&(n={}),this.setZone(As.instance(r),n)},t.toLocal=function(){return this.setZone(qt.defaultZone)},t.setZone=function(r,n){var s=n===void 0?{}:n,o=s.keepLocalTime,a=o===void 0?!1:o,u=s.keepCalendarTime,c=u===void 0?!1:u;if(r=Dl(r,qt.defaultZone),r.equals(this.zone))return this;if(r.isValid){var h=this.ts;if(a||c){var f=r.offset(this.ts),y=this.toObject(),m=b1(y,f,r);h=m[0]}return af(this,{ts:h,zone:r})}else return e.invalid(J0(r))},t.reconfigure=function(r){var n=r===void 0?{}:r,s=n.locale,o=n.numberingSystem,a=n.outputCalendar,u=this.loc.clone({locale:s,numberingSystem:o,outputCalendar:a});return af(this,{loc:u})},t.setLocale=function(r){return this.reconfigure({locale:r})},t.set=function(r){if(!this.isValid)return this;var n=Qv(r,g4),s=!Ge(n.weekYear)||!Ge(n.weekNumber)||!Ge(n.weekday),o=!Ge(n.ordinal),a=!Ge(n.year),u=!Ge(n.month)||!Ge(n.day),c=a||u,h=n.weekYear||n.weekNumber;if((c||o)&&h)throw new Qf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new Qf("Can't mix ordinal dates with month/day");var f;s?f=d4(Ve({},BE(this.c),n)):Ge(n.ordinal)?(f=Ve({},this.toObject(),n),Ge(n.day)&&(f.day=Math.min(Jv(f.year,f.month),f.day))):f=h4(Ve({},q2(this.c),n));var y=b1(f,this.o,this.zone),m=y[0],g=y[1];return af(this,{ts:m,o:g})},t.plus=function(r){if(!this.isValid)return this;var n=wi.fromDurationLike(r);return af(this,y4(this,n))},t.minus=function(r){if(!this.isValid)return this;var n=wi.fromDurationLike(r).negate();return af(this,y4(this,n))},t.startOf=function(r){if(!this.isValid)return this;var n={},s=wi.normalizeUnit(r);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(s==="weeks"&&(n.weekday=1),s==="quarters"){var o=Math.ceil(this.month/3);n.month=(o-1)*3+1}return this.set(n)},t.endOf=function(r){var n;return this.isValid?this.plus((n={},n[r]=1,n)).startOf(r).minus(1):this},t.toFormat=function(r,n){return n===void 0&&(n={}),this.isValid?pa.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,r):W2},t.toLocaleString=function(r,n){return r===void 0&&(r=$E),n===void 0&&(n={}),this.isValid?pa.create(this.loc.clone(n),r).formatDateTime(this):W2},t.toLocaleParts=function(r){return r===void 0&&(r={}),this.isValid?pa.create(this.loc.clone(r),r).formatDateTimeParts(this):[]},t.toISO=function(r){var n=r===void 0?{}:r,s=n.format,o=s===void 0?"extended":s,a=n.suppressSeconds,u=a===void 0?!1:a,c=n.suppressMilliseconds,h=c===void 0?!1:c,f=n.includeOffset,y=f===void 0?!0:f,m=n.extendedZone,g=m===void 0?!1:m;if(!this.isValid)return null;var v=o==="extended",b=K2(this,v);return b+="T",b+=m4(this,v,u,h,y,g),b},t.toISODate=function(r){var n=r===void 0?{}:r,s=n.format,o=s===void 0?"extended":s;return this.isValid?K2(this,o==="extended"):null},t.toISOWeekDate=function(){return X0(this,"kkkk-'W'WW-c")},t.toISOTime=function(r){var n=r===void 0?{}:r,s=n.suppressMilliseconds,o=s===void 0?!1:s,a=n.suppressSeconds,u=a===void 0?!1:a,c=n.includeOffset,h=c===void 0?!0:c,f=n.includePrefix,y=f===void 0?!1:f,m=n.extendedZone,g=m===void 0?!1:m,v=n.format,b=v===void 0?"extended":v;if(!this.isValid)return null;var w=y?"T":"";return w+m4(this,b==="extended",u,o,h,g)},t.toRFC2822=function(){return X0(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},t.toHTTP=function(){return X0(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return this.isValid?K2(this,!0):null},t.toSQLTime=function(r){var n=r===void 0?{}:r,s=n.includeOffset,o=s===void 0?!0:s,a=n.includeZone,u=a===void 0?!1:a,c=n.includeOffsetSpace,h=c===void 0?!0:c,f="HH:mm:ss.SSS";return(u||o)&&(h&&(f+=" "),u?f+="z":o&&(f+="ZZ")),X0(this,f,!0)},t.toSQL=function(r){return r===void 0&&(r={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(r):null},t.toString=function(){return this.isValid?this.toISO():W2},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1e3):NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(r){if(r===void 0&&(r={}),!this.isValid)return{};var n=Ve({},this.c);return r.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(r,n,s){if(n===void 0&&(n="milliseconds"),s===void 0&&(s={}),!this.isValid||!r.isValid)return wi.invalid("created by diffing an invalid DateTime");var o=Ve({locale:this.locale,numberingSystem:this.numberingSystem},s),a=koe(n).map(wi.normalizeUnit),u=r.valueOf()>this.valueOf(),c=u?this:r,h=u?r:this,f=ale(c,h,a,o);return u?f.negate():f},t.diffNow=function(r,n){return r===void 0&&(r="milliseconds"),n===void 0&&(n={}),this.diff(e.now(),r,n)},t.until=function(r){return this.isValid?By.fromDateTimes(this,r):this},t.hasSame=function(r,n){if(!this.isValid)return!1;var s=r.valueOf(),o=this.setZone(r.zone,{keepLocalTime:!0});return o.startOf(n)<=s&&s<=o.endOf(n)},t.equals=function(r){return this.isValid&&r.isValid&&this.valueOf()===r.valueOf()&&this.zone.equals(r.zone)&&this.loc.equals(r.loc)},t.toRelative=function(r){if(r===void 0&&(r={}),!this.isValid)return null;var n=r.base||e.fromObject({},{zone:this.zone}),s=r.padding?this<n?-r.padding:r.padding:0,o=["years","months","days","hours","minutes","seconds"],a=r.unit;return Array.isArray(r.unit)&&(o=r.unit,a=void 0),b4(n,this.plus(s),Ve({},r,{numeric:"always",units:o,unit:a}))},t.toRelativeCalendar=function(r){return r===void 0&&(r={}),this.isValid?b4(r.base||e.fromObject({},{zone:this.zone}),this,Ve({},r,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},e.min=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];if(!n.every(e.isDateTime))throw new An("min requires all arguments be DateTimes");return JR(n,function(o){return o.valueOf()},Math.min)},e.max=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];if(!n.every(e.isDateTime))throw new An("max requires all arguments be DateTimes");return JR(n,function(o){return o.valueOf()},Math.max)},e.fromFormatExplain=function(r,n,s){s===void 0&&(s={});var o=s,a=o.locale,u=a===void 0?null:a,c=o.numberingSystem,h=c===void 0?null:c,f=ci.fromOpts({locale:u,numberingSystem:h,defaultToEN:!0});return lF(f,r,n)},e.fromStringExplain=function(r,n,s){return s===void 0&&(s={}),e.fromFormatExplain(r,n,s)},Co(e,[{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Y2(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Y2(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Y2(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?q2(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?ty.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?ty.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?ty.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?ty.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return i0(this.year)}},{key:"daysInMonth",get:function(){return Jv(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?ky(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?Xv(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return $E}},{key:"DATE_MED",get:function(){return _k}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return $oe}},{key:"DATE_FULL",get:function(){return Sk}},{key:"DATE_HUGE",get:function(){return Tk}},{key:"TIME_SIMPLE",get:function(){return Ek}},{key:"TIME_WITH_SECONDS",get:function(){return xk}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Ak}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Mk}},{key:"TIME_24_SIMPLE",get:function(){return Ck}},{key:"TIME_24_WITH_SECONDS",get:function(){return Ik}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return Nk}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return Rk}},{key:"DATETIME_SHORT",get:function(){return Pk}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return $k}},{key:"DATETIME_MED",get:function(){return Dk}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return Lk}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return Doe}},{key:"DATETIME_FULL",get:function(){return Ok}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return kk}},{key:"DATETIME_HUGE",get:function(){return Fk}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Bk}}]),e}();function uf(e){if(Kt.isDateTime(e))return e;if(e&&e.valueOf&&Bc(e.valueOf()))return Kt.fromJSDate(e);if(e&&typeof e=="object")return Kt.fromObject(e);throw new An("Unknown datetime argument: "+e+", of type "+typeof e)}var Nle="2.4.0",eb=Fn.DateTime=Kt;Fn.Duration=wi;Fn.FixedOffsetZone=As;Fn.IANAZone=fd;Fn.Info=ty;Fn.Interval=By;Fn.InvalidZone=Xk;Fn.Settings=qt;Fn.SystemZone=Jk;Fn.VERSION=Nle;Fn.Zone=Lp;const Z2={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function bF(e){e||(e=Xr());let t=e in Z2;if(!t){const s=e.split("-");s.length>1&&s[0]in Z2&&(e=s[0],t=!0),t||(e="en")}const[i,r,n="#,##0.###"]=Z2[e];return{decimal:i,group:r,pattern:n}}function Rle(e,t){const i=bF((t={...t}).locale);t.customs=i;const r=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:Ple(e,r,t)}const wF=/[#0,]*[#0](?:\.0*#*)?/;function Ple(e,t,i){const r=(i=i||{}).customs.group,n=i.customs.decimal,s=t.split(";"),o=s[0];if((t=s[e<0?1:0]||"-"+o).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xA4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const a=wF,u=o.match(a);if(!u)throw new Error("unable to find a number expression in pattern: "+t);return i.fractional===!1&&(i.places=0),t.replace(a,$le(e,u[0],{decimal:n,group:r,places:i.places,round:i.round}))}function $le(e,t,i){(i=i||{}).places===!0&&(i.places=0),i.places===1/0&&(i.places=6);const r=t.split("."),n=typeof i.places=="string"&&i.places.indexOf(",");let s=i.places;n?s=i.places.substring(n+1):s>=0||(s=(r[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(s))));const o=String(Math.abs(e)).split("."),a=o[1]||"";if(r[1]||i.places){n&&(i.places=i.places.substring(0,n));const g=i.places!==void 0?i.places:r[1]&&r[1].lastIndexOf("0")+1;g>a.length&&(o[1]=a.padEnd(Number(g),"0")),s<a.length&&(o[1]=a.substr(0,Number(s)))}else o[1]&&o.pop();const u=r[0].replace(",","");let c=u.indexOf("0");c!==-1&&(c=u.length-c,c>o[0].length&&(o[0]=o[0].padStart(c,"0")),u.includes("#")||(o[0]=o[0].substr(o[0].length-c)));let h,f,y=r[0].lastIndexOf(",");if(y!==-1){h=r[0].length-y-1;const g=r[0].substr(0,y);y=g.lastIndexOf(","),y!==-1&&(f=g.length-y-1)}const m=[];for(let g=o[0];g;){const v=g.length-h;m.push(v>0?g.substr(v):g),g=v>0?g.slice(0,v):"",f&&(h=f,f=void 0)}return o[0]=m.reverse().join(i.group||","),o.join(i.decimal||".")}function Dle(e){const t=bF((e=e||{}).locale),i=e.pattern||t.pattern,r=t.group,n=t.decimal;let s=1;if(i.includes("%"))s/=100;else if(i.includes("\u2030"))s/=1e3;else if(i.includes("\xA4"))throw new Error("currency notation not supported");const o=i.split(";");return o.length===1&&o.push("-"+o[0]),{regexp:_m(o,u=>(u="(?:"+IA(u,".")+")").replace(wF,c=>{const h={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:n,exponent:!1},f=c.split(".");let y=e.places;f.length===1&&s!==1&&(f[1]="###"),f.length===1||y===0?h.fractional=!1:(y===void 0&&(y=e.pattern?f[1].lastIndexOf("0")+1:1/0),y&&e.fractional==null&&(h.fractional=!0),!e.places&&y<f[1].length&&(y+=","+f[1].length),h.places=y);const m=f[0].split(",");return m.length>1&&(h.groupSize=m.pop().length,m.length>1&&(h.groupSize2=m.pop().length)),"("+Ole(h)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:n,factor:s}}function Lle(e,t){const i=Dle(t),r=new RegExp("^"+i.regexp+"$").exec(e);if(!r)return NaN;let n=r[1];if(!r[1]){if(!r[2])return NaN;n=r[2],i.factor*=-1}return n=n.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(n)*i.factor}function Ole(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=_4(e),i=_m(e.fractional,n=>{let s="";return n&&e.places!==0&&(s="\\"+e.decimal,e.places===1/0?s="(?:"+s+"\\d+)?":s+="\\d{"+e.places+"}"),s},!0);let r=t+i;return i&&(r="(?:(?:"+r+")|(?:"+i+"))"),r+_m(e.exponent,n=>n?"([eE]"+_4({signed:e.eSigned})+")":"")}function _4(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",_m(e.signed,t=>t?"[-+]":"",!0)+_m(e.separator,t=>{if(!t)return"(?:\\d+)";(t=IA(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const i=e.groupSize,r=e.groupSize2;if(r){const n="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+i+"})";return i-r>0?"(?:"+n+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":n}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0)}const _m=(e,t,i)=>{if(!(e instanceof Array))return t(e);const r=[];for(let n=0;n<e.length;n++)r.push(t(e[n]));return kle(r.join("|"),i)},kle=(e,t)=>"("+(t?"?:":"")+e+")";var S4,T4;function wEe(e){return Qm.fromJSON(e.toJSON())}function Fle(e){return e.toJSON?e.toJSON():e}function _Ee(e){return typeof e=="string"||e instanceof String}function SEe(e){return typeof e=="number"}function E4(e){return e instanceof Date}function TEe(e,t){return e===t||!(!E4(e)||!E4(t))&&e.getTime()===t.getTime()}function EEe(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function xEe(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Ue({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function AEe(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(S4||(S4={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(T4||(T4={}));const MEe=1e3,CEe={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},x4={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},IEe={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function NEe(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function REe(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(n=t.cmp,function(o){return function(a,u){const c={key:a,value:o[a]},h={key:u,value:o[u]};return n(c,h)}});var n;const s=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let u,c;if(Array.isArray(a)){for(c="[",u=0;u<a.length;u++)u&&(c+=","),c+=o(a[u])||"null";return c+"]"}if(a===null)return"null";if(s.includes(a)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=s.push(a)-1,f=Object.keys(a).sort(r&&r(a));for(c="",u=0;u<f.length;u++){const y=f[u],m=o(a[y]);m&&(c&&(c+=","),c+=JSON.stringify(y)+":"+m)}return s.splice(h,1),"{"+c+"}"}(e)}class _F{constructor(t){this.value=t}}class SF{constructor(t){this.value=t}}class AM{constructor(t){this.fn=t}}class MM{constructor(t,i){this.paramCount=i,this.fn=t}}const Ble=AM,Ule=SF,Vle=_F,jle=MM,Kr={type:"VOID"},zle={type:"BREAK"},Hle={type:"CONTINUE"};function Sm(e,t,i){return t===""||t==null||t===i||t===i?e:e=e.split(t).join(i)}function CM(e){return e instanceof AM||e instanceof Aoe||e instanceof MM}function tb(e){return!!bi(e)||!!Qi(e)||!!Oi(e)||!!Xi(e)||e===null||e===Kr||typeof e=="number"}function Gle(e,t){return e===void 0?t:e}function bi(e){return typeof e=="string"||e instanceof String}function Xi(e){return typeof e=="boolean"}function Qi(e){return typeof e=="number"}function qle(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function On(e){return e instanceof Array}function Wle(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function Yle(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function Kle(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function ed(e){return e instanceof Mo}function Oi(e){return e instanceof Date}function Zle(e,t,i){if(e.length<t||e.length>i)throw new Error("Function called with wrong number of Parameters")}function Jle(e){return e<0?-Math.round(-e):Math.round(e)}function Xle(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?i:3&i|8).toString(16)})}function IM(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=Sm(t,"\u2030",""),t=Sm(t,"\xA4",""),Rle(e,{pattern:t})):e.toString()}function Mw(e,t){const i=eb.fromJSDate(e);return t==null||t===""?i.toISO({suppressMilliseconds:!0}):i.toFormat(TF(t),{locale:Xr(),numberingSystem:"latn"})}function TF(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const i=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i))switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}function Xe(e,t,i){switch(i){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function Qle(e,t,i){if(e===null){if(t===null||t===Kr)return Xe(null,null,i);if(Qi(t))return Xe(0,t,i);if(bi(t)||Xi(t))return Xe(0,St(t),i);if(Oi(t))return Xe(0,t.getTime(),i)}if(e===Kr){if(t===null||t===Kr)return Xe(null,null,i);if(Qi(t))return Xe(0,t,i);if(bi(t)||Xi(t))return Xe(0,St(t),i);if(Oi(t))return Xe(0,t.getTime(),i)}else if(Qi(e)){if(Qi(t))return Xe(e,t,i);if(Xi(t))return Xe(e,St(t),i);if(t===null||t===Kr)return Xe(e,0,i);if(bi(t))return Xe(e,St(t),i);if(Oi(t))return Xe(e,t.getTime(),i)}else if(bi(e)){if(bi(t))return Xe(Yl(e),Yl(t),i);if(Oi(t))return Xe(St(e),t.getTime(),i);if(Qi(t))return Xe(St(e),t,i);if(t===null||t===Kr)return Xe(St(e),0,i);if(Xi(t))return Xe(St(e),St(t),i)}else if(Oi(e)){if(Oi(t))return Xe(e,t,i);if(t===null||t===Kr)return Xe(e.getTime(),0,i);if(Qi(t))return Xe(e.getTime(),t,i);if(Xi(t)||bi(t))return Xe(e.getTime(),St(t),i)}else if(Xi(e)){if(Xi(t))return Xe(e,t,i);if(Qi(t))return Xe(St(e),St(t),i);if(Oi(t))return Xe(St(e),t.getTime(),i);if(t===null||t===Kr)return Xe(St(e),0,i);if(bi(t))return Xe(St(e),St(t),i)}return!!EF(e,t)&&(i==="<="||i===">=")}function EF(e,t){if(e===t||e===null&&t===Kr||t===null&&e===Kr)return!0;if(Oi(e)&&Oi(t))return e.getTime()===t.getTime();if(e instanceof vM||e instanceof hd)return e.equalityTest(t);if(e instanceof he&&t instanceof he){const i=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(i!=null)return i===r}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function Yl(e,t){if(bi(e))return e;if(e===null)return"";if(Qi(e))return IM(e,t);if(Xi(e))return e.toString();if(Oi(e))return Mw(e,t);if(e instanceof Ir)return JSON.stringify(e.toJSON());if(On(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=ib(e[r]);return"["+i.join(",")+"]"}if(e instanceof Mo){const i=[];for(let r=0;r<e.length();r++)i[r]=ib(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():CM(e)?"object, Function":""}function eue(e){const t=[];if(On(e)===!1)return null;if(e instanceof Mo){for(let i=0;i<e.length();i++)t[i]=St(e.get(i));return t}for(let i=0;i<e.length;i++)t[i]=St(e[i]);return t}function w1(e,t){if(bi(e))return e;if(e===null)return"";if(Qi(e))return IM(e,t);if(Xi(e))return e.toString();if(Oi(e))return Mw(e,t);if(e instanceof Ir)return e instanceof Ue?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+UE(e.spatialReference)+"}":UE(e.toJSON(),(i,r)=>i.key===r.key?0:i.key==="spatialReference"?1:r.key==="spatialReference"||i.key<r.key?-1:i.key>r.key?1:0);if(On(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=ib(e[r]);return"["+i.join(",")+"]"}if(e instanceof Mo){const i=[];for(let r=0;r<e.length();r++)i[r]=ib(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():CM(e)?"object, Function":""}function ib(e){if(e===null)return"null";if(Xi(e)||Qi(e)||bi(e))return JSON.stringify(e);if(e instanceof Ir||e instanceof Mo||e instanceof Array)return w1(e);if(e instanceof Date)return JSON.stringify(Mw(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===Kr)return"null";return"null"}function St(e,t){return Qi(e)?e:e===null||e===""?0:Oi(e)?NaN:Xi(e)?e?1:0:On(e)||e===""||e===void 0?NaN:t!==void 0&&bi(e)?(t=Sm(t,"\u2030",""),t=Sm(t,"\xA4",""),Lle(e,{pattern:t})):e===Kr?0:Number(e)}function tue(e){if(Oi(e))return e;if(bi(e)){const t=xF(e);if(t)return t.toJSDate()}return null}function iue(e){return Oi(e)?eb.fromJSDate(e):bi(e)?xF(e):null}function xF(e){const t=/ (\d\d)/;let i=eb.fromISO(e);return i.isValid||t.test(e)&&(e=e.replace(t,"T$1"),i=eb.fromISO(e),i.isValid)?i:null}function rue(e){return Xi(e)?e:bi(e)?(e=e.toLowerCase())==="true":!!Qi(e)&&e!==0&&!isNaN(e)}function nue(e,t){return O(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function sue(e){if(e===null)return null;if(e instanceof he)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof Rr){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof ir){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof Tp?e.points.length===0?null:e:e instanceof Ue?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function AF(e,t){if(!e||!e.domain)return t;let i=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=Yl(t);else{if(t==null)return null;if(t==="")return t;t=St(t)}for(let r=0;r<e.domain.codedValues.length;r++){const n=e.domain.codedValues[r];n.code===t&&(i=n)}return i===null?t:i.name}function MF(e,t){if(!e||!e.domain)return t;let i=null;t=Yl(t);for(let r=0;r<e.domain.codedValues.length;r++){const n=e.domain.codedValues[r];n.name===t&&(i=n)}return i===null?t:i.code}function Cw(e,t,i=null,r=null){if(!t||!t.fields)return null;let n,s,o=null;for(let a=0;a<t.fields.length;a++){const u=t.fields[a];u.name.toLowerCase()===e.toString().toLowerCase()&&(o=u)}if(o===null)throw new Error("Field not found");return r===null&&i&&t.typeIdField&&(r=i.hasField(t.typeIdField)?i.field(t.typeIdField):null),r!=null&&t.types.some(function(a){return a.id===r&&(n=a.domains&&a.domains[o.name],n&&n.type==="inherited"&&(n=A4(o.name,t),s=!0),!0)}),s||n||(n=A4(e,t)),{field:o,domain:n}}function A4(e,t){let i;return t.fields.some(function(r){return r.name.toLowerCase()===e.toLowerCase()&&(i=r.domain),!!i}),i}function UE(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(n=t.cmp,function(o){return function(a,u){const c={key:a,value:o[a]},h={key:u,value:o[u]};return n(c,h)}});var n;const s=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let u,c;if(Array.isArray(a)){for(c="[",u=0;u<a.length;u++)u&&(c+=","),c+=o(a[u])||"null";return c+"]"}if(a===null)return"null";if(s.includes(a)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=s.push(a)-1,f=Object.keys(a).sort(r&&r(a));for(c="",u=0;u<f.length;u++){const y=f[u],m=o(a[y]);m&&(c&&(c+=","),c+=JSON.stringify(y)+":"+m)}return s.splice(h,1),"{"+c+"}"}(e)}function oue(e){if(e===null)return null;const t=[];for(const i of e)i&&i.arcadeDeclaredClass&&i.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(i.geometry()):t.push(i);return t}function op(e,t){if(!(t instanceof he))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function aue(e,t){if(On(e)||ed(e)){let i=!1,r=!1,n=[],s=t;if(On(e)){for(const o of e)op(n,o);n.length>0&&(s=e[0].spatialReference,i=e[0].hasZ,r=e[0].hasM)}else if(e instanceof hd)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,s=e.get(0).spatialReference);else{if(!ed(e))throw new Error("Invalid Argument");for(const o of e.toArray())op(n,o);n.length>0&&(s=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return n.length===0?null:(l3(n,r,i)===!1&&(n=n.slice(0).reverse()),new Rr({rings:[n],spatialReference:s,hasZ:i,hasM:r}))}return e}function lue(e,t){if(On(e)||ed(e)){let i=!1,r=!1,n=[],s=t;if(On(e)){for(const o of e)op(n,o);n.length>0&&(s=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof hd)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,s=e.get(0).spatialReference);else if(ed(e)){for(const o of e.toArray())op(n,o);n.length>0&&(s=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return n.length===0?null:new ir({paths:[n],spatialReference:s,hasZ:i,hasM:r})}return e}function uue(e,t){if(On(e)||ed(e)){let i=!1,r=!1,n=[],s=t;if(On(e)){for(const o of e)op(n,o);n.length>0&&(s=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof hd)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,s=e.get(0).spatialReference);else if(ed(e)){for(const o of e.toArray())op(n,o);n.length>0&&(s=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return n.length===0?null:new Tp({points:n,spatialReference:s,hasZ:i,hasM:r})}return e}function cue(e,t=!1){const i=[];if(e===null)return i;if(On(e)===!0){for(let r=0;r<e.length;r++){const n=Yl(e[r]);n===""&&t!==!0||i.push(n)}return i}if(e instanceof Mo){for(let r=0;r<e.length();r++){const n=Yl(e.get(r));n===""&&t!==!0||i.push(n)}return i}if(tb(e)){const r=Yl(e);return r===""&&t!==!0||i.push(r),i}return[]}let J2=0;function due(e){return J2++,J2%100==0?(J2=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function hue(e,t,i){switch(i){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function Tm(e,t=null){return e==null?null:Xi(e)||Qi(e)||bi(e)?e:e instanceof Ir?(t==null?void 0:t.keepGeometryType)===!0?e:e.toJSON():e instanceof Mo?e.toArray().map(i=>Tm(i,t)):e instanceof Array?e.map(i=>Tm(i,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}async function pue(e,t,i,r,n){const s=await NM(e,t,i);n[r]=s}async function NM(e,t=null,i=null){if(e instanceof Mo&&(e=e.toArray()),e==null)return null;if(tb(e)||e instanceof Ir||e instanceof Date)return Tm(e,i);if(e instanceof Array){const r=[],n=[];for(const s of e)s===null||tb(s)||s instanceof Ir||s instanceof Date?n.push(Tm(s,i)):(n.push(null),r.push(pue(s,t,i,n.length-1,n)));return r.length>0&&await Promise.all(r),n}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,i):null}function fue(e,t,i){const r=e.fullSchema();return r===null||!r.fields?null:Cw(t,r,e,i)}function yue(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(i=>({name:i.name,code:i.id})):[]}:null}function mue(e,t,i,r){const n=e.fullSchema();if(n===null||!n.fields)return null;const s=Cw(t,n,e,r);if(i===void 0)try{i=e.field(t)}catch{return null}return AF(s,i)}function gue(e,t,i,r){const n=e.fullSchema();if(n===null||!n.fields)return null;if(i===void 0){try{i=e.field(t)}catch{return null}return i}return MF(Cw(t,n,e,r),i)}function vue(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const i=[];for(const r of t.fields)i.push(Fle(r));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:x4[t.geometryType]===void 0?"":x4[t.geometryType],fields:i}}const PEe=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:_F,ImplicitResultE:SF,NativeFunctionE:AM,SizzleFunctionE:MM,NativeFunction:Ble,ImplicitResult:Ule,ReturnResult:Vle,SizzleFunction:jle,voidOperation:Kr,breakResult:zle,continueResult:Hle,multiReplace:Sm,isFunctionParameter:CM,isSimpleType:tb,defaultUndefined:Gle,isString:bi,isBoolean:Xi,isNumber:Qi,isInteger:qle,isArray:On,isFeature:Wle,isFeatureSet:Yle,isFeatureSetCollection:Kle,isImmutableArray:ed,isDate:Oi,pcCheck:Zle,absRound:Jle,generateUUID:Xle,formatNumber:IM,formatDate:Mw,standardiseDateFormat:TF,greaterThanLessThan:Qle,equalityTest:EF,toString:Yl,toNumberArray:eue,toStringExplicit:w1,toNumber:St,toDate:tue,toDateTime:iue,toBoolean:rue,fixSpatialReference:nue,fixNullGeometry:sue,getDomainValue:AF,getDomainCode:MF,getDomain:Cw,stableStringify:UE,autoCastFeatureToGeometry:oue,autoCastArrayOfPointsToPolygon:aue,autoCastArrayOfPointsToPolyline:lue,autoCastArrayOfPointsToMultiPoint:uue,toStringArray:cue,tick:due,binaryOperator:hue,castAsJson:Tm,castAsJsonAsync:NM,featureFullDomain:fue,featureSubtypes:yue,featureDomainValueLookup:mue,featureDomainCodeLookup:gue,featureSchema:vue},Symbol.toStringTag,{value:"Module"}));var VE;let iy=VE=class extends j{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new VE({minValue:this.minValue,maxValue:this.maxValue})}};l([d({type:Number,json:{write:!0}})],iy.prototype,"minValue",void 0),l([d({type:Number,json:{write:!0}})],iy.prototype,"maxValue",void 0),iy=VE=l([S("esri.renderer.support.AuthoringInfoClassBreakInfo")],iy);var jE;let Rl=jE=class extends j{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new jE({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:$(this.classBreakInfos)})}};l([d({type:String,json:{write:!0}})],Rl.prototype,"field",void 0),l([d({type:String,json:{write:!0}})],Rl.prototype,"normalizationField",void 0),l([d({type:String,json:{write:!0}})],Rl.prototype,"label",void 0),l([d({type:[iy],json:{write:!0}})],Rl.prototype,"classBreakInfos",void 0),Rl=jE=l([S("esri.renderers.support.AuthoringInfoFieldInfo")],Rl);var zE;const Q0=new xe({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),eg=new xe({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),M4={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},C4=["high-to-low","above-and-below","centered-on","extremes"],I4=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],N4=["seconds","minutes","hours","days","months","years"];let gr=zE=class extends j{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new zE({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};l([d({types:M4,json:{write:!0}})],gr.prototype,"endTime",void 0),l([je("endTime")],gr.prototype,"castEndTime",null),l([d({type:String,json:{write:!0}})],gr.prototype,"field",void 0),l([d({type:Number,json:{write:!0}})],gr.prototype,"maxSliderValue",void 0),l([d({type:Number,json:{write:!0}})],gr.prototype,"minSliderValue",void 0),l([d({types:M4,json:{write:!0}})],gr.prototype,"startTime",void 0),l([je("startTime")],gr.prototype,"castStartTime",null),l([d({type:Q0.apiValues,value:null,json:{type:Q0.jsonValues,read:Q0.read,write:Q0.write}})],gr.prototype,"style",null),l([d({type:I4,value:null,json:{type:I4,origins:{"web-scene":{type:C4,write:{writer:(e,t)=>{C4.includes(e)&&(t.theme=e)}}}},write:!0}})],gr.prototype,"theme",null),l([d({type:eg.apiValues,json:{type:eg.jsonValues,read:eg.read,write:eg.write}})],gr.prototype,"type",void 0),l([d({type:N4,json:{type:N4,write:!0}})],gr.prototype,"units",void 0),gr=zE=l([S("esri.renderers.support.AuthoringInfoVisualVariable")],gr);const bue=gr;let _1=class extends j{constructor(e){super(e),this.type=null}};l([d({readOnly:!0,json:{read:!1,write:!0}})],_1.prototype,"type",void 0),_1=l([S("esri.rest.support.ColorRamp")],_1);const RM=_1;var HE;let zu=HE=class extends RM{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new HE({fromColor:$(this.fromColor),toColor:$(this.toColor),algorithm:this.algorithm})}};l([ye({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],zu.prototype,"algorithm",void 0),l([d({type:se,json:{type:[st],write:!0}})],zu.prototype,"fromColor",void 0),l([d({type:se,json:{type:[st],write:!0}})],zu.prototype,"toColor",void 0),l([d({type:["algorithmic"]})],zu.prototype,"type",void 0),zu=HE=l([S("esri.rest.support.AlgorithmicColorRamp")],zu);const PM=zu;var GE;let ry=GE=class extends RM{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new GE({colorRamps:$(this.colorRamps)})}};l([d({type:[PM],json:{write:!0}})],ry.prototype,"colorRamps",void 0),l([d({type:["multipart"]})],ry.prototype,"type",void 0),ry=GE=l([S("esri.rest.support.MultipartColorRamp")],ry);const CF=ry,wue={key:"type",base:RM,typeMap:{algorithmic:PM,multipart:CF}};function _ue(e){return e&&e.type?e.type==="algorithmic"?PM.fromJSON(e):e.type==="multipart"?CF.fromJSON(e):null:null}var qE;const gu=new xe({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),tg=new xe({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),R4=new xe({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),P4=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Sue=["high-to-low","above-and-below","above","below","90-10"],Tue=["flow-line","wave-front"],Eue=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Ot=qE=class extends j{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return _ue(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new qE({classificationMethod:this.classificationMethod,colorRamp:$(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:$(this.field1),field2:$(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};l([d({type:gu.apiValues,value:null,json:{type:gu.jsonValues,read:gu.read,write:gu.write,origins:{"web-document":{default:"manual",type:gu.jsonValues,read:gu.read,write:gu.write}}}})],Ot.prototype,"classificationMethod",null),l([d({types:wue,json:{write:!0}})],Ot.prototype,"colorRamp",void 0),l([Z("colorRamp")],Ot.prototype,"readColorRamp",null),l([d({type:[String],value:null,json:{write:!0}})],Ot.prototype,"fields",null),l([d({type:Rl,value:null,json:{write:!0}})],Ot.prototype,"field1",null),l([d({type:Rl,value:null,json:{write:!0}})],Ot.prototype,"field2",null),l([d({type:Tue,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ot.prototype,"flowTheme",null),l([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Ot.prototype,"focus",null),l([d({type:Number,value:null,json:{type:st,write:!0}})],Ot.prototype,"numClasses",null),l([d({type:P4,json:{type:P4,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Ot.prototype,"lengthUnit",void 0),l([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ot.prototype,"maxSliderValue",void 0),l([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ot.prototype,"minSliderValue",void 0),l([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ot.prototype,"statistics",null),l([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Ot.prototype,"standardDeviationInterval",null),l([d({type:tg.apiValues,value:null,json:{type:tg.jsonValues,read:tg.read,write:tg.write,origins:{"web-scene":{type:R4.jsonValues,write:{writer:R4.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Ot.prototype,"type",null),l([d({type:[bue],json:{write:!0}})],Ot.prototype,"visualVariables",void 0),l([d({type:Eue,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ot.prototype,"univariateSymbolStyle",null),l([d({type:Sue,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ot.prototype,"univariateTheme",null),Ot=qE=l([S("esri.renderers.support.AuthoringInfo")],Ot);const IF=Ot,X2=new xe({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let ny=class extends j{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};l([d({type:IF,json:{write:!0}})],ny.prototype,"authoringInfo",void 0),l([d({type:X2.apiValues,readOnly:!0,json:{type:X2.jsonValues,read:!1,write:{writer:X2.write,ignoreOrigin:!0}}})],ny.prototype,"type",void 0),ny=l([S("esri.renderers.Renderer")],ny);const Na=ny;var WE;let Fh=WE=class extends j{constructor(){super(...arguments),this.title=null}clone(){return new WE({title:this.title})}};l([d({type:String,json:{write:!0}})],Fh.prototype,"title",void 0),Fh=WE=l([S("esri.renderers.support.LegendOptions")],Fh);var YE;let S1=YE=class extends Fh{constructor(){super(...arguments),this.showLegend=null}clone(){return new YE({title:this.title,showLegend:this.showLegend})}};l([d({type:Boolean,json:{write:!0}})],S1.prototype,"showLegend",void 0),S1=YE=l([S("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],S1);const NF=S1,xue=W.getLogger("esri.renderers.visualVariables.VisualVariable"),Q2=new xe({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ns=class extends j{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(xue.error(".field: field must be a string value"),null):Um(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};l([d()],ns.prototype,"index",void 0),l([d({type:Q2.apiValues,readOnly:!0,json:{read:Q2.read,write:Q2.write}})],ns.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],ns.prototype,"field",void 0),l([je("field")],ns.prototype,"castField",null),l([d({type:String,json:{write:!0}})],ns.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],ns.prototype,"valueExpressionTitle",void 0),l([d({readOnly:!0})],ns.prototype,"arcadeRequired",null),l([d({type:NF,json:{write:!0}})],ns.prototype,"legendOptions",void 0),ns=l([S("esri.renderers.visualVariables.VisualVariable")],ns);const s0=ns;var KE;let Hu=KE=class extends s0{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new KE({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([d({readOnly:!0})],Hu.prototype,"cache",null),l([d({type:["color"],json:{type:["colorInfo"]}})],Hu.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Hu.prototype,"normalizationField",void 0),l([d({type:[Wre],json:{write:!0}})],Hu.prototype,"stops",null),Hu=KE=l([S("esri.renderers.visualVariables.ColorVariable")],Hu);const RF=Hu;var ZE;let cl=ZE=class extends j{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return rm(t.transparency)}writeOpacity(e,t,i){t[i]=Jb(e)}clone(){return new ZE({label:this.label,opacity:this.opacity,value:this.value})}};l([d({type:String,json:{write:!0}})],cl.prototype,"label",void 0),l([d({type:Number,json:{type:st,write:{target:"transparency"}}})],cl.prototype,"opacity",void 0),l([Z("opacity",["transparency"])],cl.prototype,"readOpacity",null),l([te("opacity")],cl.prototype,"writeOpacity",null),l([d({type:Number,json:{write:!0}})],cl.prototype,"value",void 0),cl=ZE=l([S("esri.renderers.visualVariables.support.OpacityStop")],cl);const Aue=cl;var JE;let Gu=JE=class extends s0{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new JE({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([d({readOnly:!0})],Gu.prototype,"cache",null),l([d({type:["opacity"],json:{type:["transparencyInfo"]}})],Gu.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Gu.prototype,"normalizationField",void 0),l([d({type:[Aue],json:{write:!0}})],Gu.prototype,"stops",null),Gu=JE=l([S("esri.renderers.visualVariables.OpacityVariable")],Gu);const PF=Gu;var XE;let Yo=XE=class extends s0{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const n=`visualVariables[${this.index}]`;r.messages.push(new P("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:r}))}}clone(){return new XE({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};l([d({readOnly:!0})],Yo.prototype,"cache",null),l([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Yo.prototype,"axis",void 0),l([d({type:["rotation"],json:{type:["rotationInfo"]}})],Yo.prototype,"type",void 0),l([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Yo.prototype,"rotationType",void 0),l([d({type:String,json:{write:!0}})],Yo.prototype,"valueExpressionTitle",void 0),l([te("web-scene","valueExpressionTitle")],Yo.prototype,"writeValueExpressionTitleWebScene",null),Yo=XE=l([S("esri.renderers.visualVariables.RotationVariable")],Yo);const $F=Yo;var QE;let zd=QE=class extends j{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new QE({label:this.label,size:this.size,value:this.value})}};l([d({type:String,json:{write:!0}})],zd.prototype,"label",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],zd.prototype,"size",void 0),l([d({type:Number,json:{write:!0}})],zd.prototype,"value",void 0),zd=QE=l([S("esri.renderers.visualVariables.support.SizeStop")],zd);const Mue=zd;var ex;let T1=ex=class extends NF{constructor(){super(...arguments),this.customValues=null}clone(){return new ex({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};l([d({type:[Number],json:{write:!0}})],T1.prototype,"customValues",void 0),T1=ex=l([S("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],T1);const Cue=T1;var va,ii;function mh(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Em(e){return e!=null&&!isNaN(e)&&isFinite(e)}function DF(e){return e.valueExpression?va.Expression:e.field&&typeof e.field=="string"?va.Field:va.Unknown}function Iue(e,t){const i=t||DF(e),r=e.valueUnit||"unknown";return i===va.Unknown?ii.Constant:e.stops?ii.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?ii.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?ii.Proportional:ii.Additive:ii.Identity:ii.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(va||(va={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(ii||(ii={}));const LF={inches:gn(1,"meters","inches"),feet:gn(1,"meters","feet"),"us-feet":gn(1,"meters","us-feet"),yards:gn(1,"meters","yards"),miles:gn(1,"meters","miles"),"nautical-miles":gn(1,"meters","nautical-miles"),millimeters:gn(1,"meters","millimeters"),centimeters:gn(1,"meters","centimeters"),decimeters:gn(1,"meters","decimeters"),meters:gn(1,"meters","meters"),kilometers:gn(1,"meters","kilometers"),"decimal-degrees":1/FX(1,"meters",ct.radius)},ou=W.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),$4=new zi,E1=Math.PI,OF=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function kF(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void ou.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const u=r.field,{ipData:c,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!u&&!h){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if(O(i)||O(i.arcade))return void ou.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(g),w=v.createExecContext(s,b);if(!f){const T=v.createSyntaxTree(r.valueExpression);f=v.createFunction(T),r.cache.compiledFunc=f}a=v.executeFunction(f,w)}else o&&(a=o[u]);const y=r.normalizationField,m=o?parseFloat(o[y]):void 0;if(a!=null&&(!y||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=$M(a,c);if(g){const v=g[0],b=g[1],w=v===b?r.stops[v].color:se.blendColors(r.stops[v].color,r.stops[b].color,g[2],E(i)?i.color:void 0);return new se(w)}}}function FF(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void ou.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const u=r.field,{ipData:c,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!u&&!h){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if(O(i)||O(i.arcade))return void ou.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(g),w=v.createExecContext(s,b);if(!f){const T=v.createSyntaxTree(r.valueExpression);f=v.createFunction(T),r.cache.compiledFunc=f}a=v.executeFunction(f,w)}else o&&(a=o[u]);const y=r.normalizationField,m=o?parseFloat(o[y]):void 0;if(a!=null&&(!y||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=$M(a,c);if(g){const v=g[0],b=g[1];if(v===b)return r.stops[v].opacity;{const w=r.stops[v].opacity;return w+(r.stops[b].opacity-w)*g[2]}}}}function BF(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void ou.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,u=a&&a.attributes,c=r.field,{hasExpression:h}=r.cache;let f=r.cache.compiledFunc,y=0;if(!c&&!h)return y;if(h){if(O(i)||O(i.arcade))return void ou.error("Use of arcade expressions requires an arcade context");const m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,v=g.getViewInfo(m),b=g.createExecContext(a,v);if(!f){const w=g.createSyntaxTree(r.valueExpression);f=g.createFunction(w),r.cache.compiledFunc=f}y=g.executeFunction(f,b)}else u&&(y=u[c]||0);return y=typeof y!="number"||isNaN(y)?null:s+o*y,y}function Nue(e,t,i){const r=typeof t=="number",n=r?null:t,s=n&&n.attributes;let o=r?t:null;const{isScaleDriven:a}=e.cache;let u=e.cache.compiledFunc;if(a){const h=E(i)?i.scale:void 0,f=E(i)?i.view:void 0;o=h==null||f==="3d"?Rue(e):h}else if(!r)switch(e.inputValueType){case va.Expression:{if(O(i)||O(i.arcade))return void ou.error("Use of arcade expressions requires an arcade context");const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},f=i.arcade.arcadeUtils,y=f.getViewInfo(h),m=f.createExecContext(n,y);if(!u){const g=f.createSyntaxTree(e.valueExpression);u=f.createFunction(g),e.cache.compiledFunc=u}o=f.executeFunction(u,m);break}case va.Field:s&&(o=s[e.field]);break;case va.Unknown:o=null}if(!Em(o))return null;if(r||!e.normalizationField)return o;const c=s?parseFloat(s[e.normalizationField]):null;return Em(c)&&c!==0?o/c:null}function Rue(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function Iw(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void ou.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=VF(Nue(r,t,i),r,t,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function Mr(e,t,i){return e==null?null:mh(e)?Iw(e,t,i):Em(e)?e:null}function UF(e,t,i){return Em(i)&&e>i?i:Em(t)&&e<t?t:e}function Pue(e,t,i,r){return e+(Mr(t.minSize,i,r)||t.minDataValue)}function $ue(e,t,i){const r=e.stops;let n=r&&r.length&&r[0].size;return n==null&&(n=e.minSize),Mr(n,t,i)}function Due(e,t,i,r){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=Mr(t.minSize,i,r),o=Mr(t.maxSize,i,r),a=E(r)?r.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(t.scaleBy==="area"&&a){const u=a==="circle",c=u?E1*(s/2)**2:s*s,h=c+n*((u?E1*(o/2)**2:o*o)-c);return u?2*Math.sqrt(h/E1):Math.sqrt(h)}return s+n*(o-s)}function Lue(e,t,i,r){const n=E(r)?r.shape:void 0,s=e/t.minDataValue,o=Mr(t.minSize,i,r),a=Mr(t.maxSize,i,r);let u=null;return u=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,UF(u,o,a)}function Oue(e,t,i,r,n){const[s,o,a]=$M(e,n);if(s===o)return Mr(t.stops[s].size,i,r);{const u=Mr(t.stops[s].size,i,r);return u+(Mr(t.stops[o].size,i,r)-u)*a}}function kue(e,t,i,r){const n=(E(r)&&r.resolution?r.resolution:1)*LF[t.valueUnit],s=Mr(t.minSize,i,r),o=Mr(t.maxSize,i,r),{valueRepresentation:a}=t;let u=null;return u=a==="area"?2*Math.sqrt(e/E1)/n:a==="radius"||a==="distance"?2*e/n:e/n,UF(u,s,o)}function VF(e,t,i,r,n){switch(t.transformationType){case ii.Additive:return Pue(e,t,i,r);case ii.Constant:return $ue(t,i,r);case ii.ClampedLinear:return Due(e,t,i,r);case ii.Proportional:return Lue(e,t,i,r);case ii.Stops:return Oue(e,t,i,r,n);case ii.RealWorldSize:return kue(e,t,i,r);case ii.Identity:return e;case ii.Unknown:return null}}function Fue(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const n={scale:t,view:i};let s=Mr(e.minSize,$4,n),o=Mr(e.maxSize,$4,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function Bue(e,t,i){if(!e.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const u of e.visualVariables)switch(u.type){case"color":n.push(u);break;case"opacity":s.push(u);break;case"rotation":a.push(u);break;case"size":o.push(u)}return n.forEach(u=>{const c=kF(u,t,i);r.push({variable:u,value:c})}),s.forEach(u=>{const c=FF(u,t,i);r.push({variable:u,value:c})}),a.forEach(u=>{const c=BF(u,t,i);r.push({variable:u,value:c})}),o.forEach(u=>{const c=Iw(u,t,i);r.push({variable:u,value:c})}),r.filter(u=>u.value!=null)}function $M(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((n,s)=>e<n?(r=s,!0):(i=s,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function Uue(e,t,i){const r=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":Iw(n,t,i);switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const DM=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Uue,getColor:kF,getOpacity:FF,getRotationAngle:BF,getSize:Iw,getSizeForValue:VF,getSizeFromNumberOrVariable:Mr,getSizeRangeAtScale:Fue,getVisualVariableValues:Bue,viewScaleRE:OF},Symbol.toStringTag,{value:"Module"}));var tx;const vd=W.getLogger("esri.renderers.visualVariables.SizeVariable"),ig=new xe({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),ix=new xe({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function D4(e){if(e!=null)return typeof e=="string"||typeof e=="number"?qe(e):e.type==="size"?mh(e)?e:(delete(e={...e}).type,new Ye(e)):void 0}function L4(e,t,i){if(typeof e!="object")return e;const r=new Ye;return r.read(e,i),r}let Ye=tx=class extends s0{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:OF.test(this.valueExpression)}}set expression(e){vd.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){mh(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),mh(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return DF(this)}set maxDataValue(e){e&&this.stops&&(vd.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(vd.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return D4(e)}readMaxSize(e,t,i){return L4(e,t,i)}set minDataValue(e){e&&this.stops&&(vd.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(vd.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return D4(e)}readMinSize(e,t,i){return L4(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(vd.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Iue(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new P("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?ix.read(e):null}clone(){return new tx({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:mh(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:mh(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===ii.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===ii.Stops){const e=this.stops,t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([d({readOnly:!0})],Ye.prototype,"cache",null),l([d({type:ig.apiValues,json:{type:ig.jsonValues,origins:{"web-map":{read:!1}},read:ig.read,write:ig.write}})],Ye.prototype,"axis",void 0),l([d({type:String,value:null,json:{read:!1}})],Ye.prototype,"expression",null),l([d()],Ye.prototype,"index",null),l([d({type:String,readOnly:!0})],Ye.prototype,"inputValueType",null),l([d({type:Cue,json:{write:!0}})],Ye.prototype,"legendOptions",void 0),l([d({type:Number,value:null,json:{write:!0}})],Ye.prototype,"maxDataValue",null),l([d({type:Number,value:null,json:{write:!0}})],Ye.prototype,"maxSize",null),l([je("maxSize")],Ye.prototype,"castMaxSize",null),l([Z("maxSize")],Ye.prototype,"readMaxSize",null),l([d({type:Number,value:null,json:{write:!0}})],Ye.prototype,"minDataValue",null),l([d({type:Number,value:null,json:{write:!0}})],Ye.prototype,"minSize",null),l([je("minSize")],Ye.prototype,"castMinSize",null),l([Z("minSize")],Ye.prototype,"readMinSize",null),l([d({type:String,json:{write:!0}})],Ye.prototype,"normalizationField",void 0),l([d({readOnly:!0})],Ye.prototype,"arcadeRequired",null),l([d({type:String})],Ye.prototype,"scaleBy",void 0),l([d({type:[Mue],value:null,json:{write:!0}})],Ye.prototype,"stops",null),l([d({type:["outline"],json:{write:!0}})],Ye.prototype,"target",void 0),l([d({type:String,readOnly:!0})],Ye.prototype,"transformationType",null),l([d({type:["size"],json:{type:["sizeInfo"]}})],Ye.prototype,"type",void 0),l([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ye.prototype,"useSymbolValue",void 0),l([d({type:String,json:{write:!0}})],Ye.prototype,"valueExpression",void 0),l([Z("valueExpression",["valueExpression","expression"])],Ye.prototype,"readValueExpression",null),l([te("web-scene","valueExpression")],Ye.prototype,"writeValueExpressionWebScene",null),l([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ye.prototype,"valueRepresentation",void 0),l([d({type:ix.apiValues,json:{write:ix.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],Ye.prototype,"valueUnit",void 0),l([Z("valueUnit")],Ye.prototype,"readValueUnit",null),Ye=tx=l([S("esri.renderers.visualVariables.SizeVariable")],Ye);const jF=Ye,Vue=W.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),jue={color:RF,size:jF,opacity:PF,rotation:$F},zue=new xe({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Hue=/^\[([^\]]+)\]$/i;let x1=class extends ce{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let r=null;return r=t.target===i.target?0:t.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:n}=t,s=r&&r.match(Hue),o=s&&s[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:o})),e)return e.map(a=>{const u=zue.read(a.type),c=jue[u];c||(Vue.warn(`Unknown variable type: ${u}`),i&&i.messages&&i.messages.push(new ur("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:a,context:i})));const h=new c;return h.read(a,i),h})}writeVariables(e,t){const i=[];for(const r of e){const n=r.toJSON(t);n&&i.push(n)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};l([d()],x1.prototype,"visualVariables",null),x1=l([S("esri.renderers.visualVariables.VisualVariableFactory")],x1);const Gue=x1,que={base:s0,key:"type",typeMap:{opacity:PF,color:RF,rotation:$F,size:jF}},Up=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Gue}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,s){r[n]=this._vvFactory.writeVariables(i,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(s=>s.type===i&&(typeof r=="string"?s.target===r:r!==!1||!s.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&Rn(i,r,s.field),s.normalizationField&&Rn(i,r,s.normalizationField),s.valueExpression&&await dr(i,r,s.valueExpression))}};return l([d({types:[que],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),l([Z("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),l([te("visualVariables")],t.prototype,"writeVisualVariables",null),t=l([S("esri.renderers.mixins.VisualVariablesMixin")],t),t},cf={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Wue(e,t=cf){var a,u;if(!e)return{symbol:null};const{retainId:i=cf.retainId,ignoreDrivers:r=cf.ignoreDrivers,hasLabelingContext:n=cf.hasLabelingContext,retainCIM:s=cf.retainCIM}=t;let o;if(tp(e)||e instanceof cd)o=e.clone();else if(e.type==="cim"){const c=(u=(a=e.data)==null?void 0:a.symbol)==null?void 0:u.type;if(c!=="CIMPointSymbol")return{error:new P("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:e})};o=s?e.clone():bc.fromCIMSymbol(e)}else if(e instanceof sn)o=sw.fromSimpleLineSymbol(e);else if(e instanceof hu)o=bc.fromSimpleMarkerSymbol(e);else if(e instanceof Wm)o=bc.fromPictureMarkerSymbol(e);else if(e instanceof Ca)o=Ym.fromSimpleFillSymbol(e);else{if(!(e instanceof ud))return{error:new P("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=n?nw.fromTextSymbol(e):bc.fromTextSymbol(e)}if(i&&o.type!=="cim"&&(o.id=e.id),r&&tp(o))for(let c=0;c<o.symbolLayers.length;++c)o.symbolLayers.getItemAt(c)._ignoreDrivers=!0;return{symbol:o}}const Yue=["building-scene","integrated-mesh","point-cloud","scene"];function rb(e,t,i,r){const n=zF(e,{},{context:r,isLabelSymbol:!1});E(n)&&(t[i]=n)}function O4(e,t,i,r){const n=zF(e,{},{context:r,isLabelSymbol:!0});E(n)&&(t[i]=n)}function k4(e){return e instanceof Cp||e instanceof cd}function zF(e,t,i){var a;if(O(e))return null;const{context:r,isLabelSymbol:n}=i,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!k4(e)){const u=Wue(e,{retainCIM:!0,hasLabelingContext:n});return E(u.symbol)?u.symbol.write(t,r):(o==null||o.push(new P("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:u.error})),null)}return(s==="web-map"||s==="portal-item"&&!Yue.includes((a=r==null?void 0:r.layer)==null?void 0:a.type))&&k4(e)?(o==null||o.push(new P("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function $Ee(e,t){return KJ(e,null,t)}const o0={types:jO,json:{write:{writer:rb},origins:{"web-scene":{types:hN,write:{writer:rb},read:{reader:wp({types:hN})}}}}},HF={types:{base:$r,key:"type",typeMap:{"simple-fill":Lc.typeMap["simple-fill"],"picture-fill":Lc.typeMap["picture-fill"],"polygon-3d":Lc.typeMap["polygon-3d"]}},json:{write:{writer:rb},origins:{"web-scene":{type:Ym,write:{writer:rb}}}}};var rx;let dl=rx=class extends j{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new rx({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};l([d({type:String,json:{write:!0}})],dl.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],dl.prototype,"label",void 0),l([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],dl.prototype,"minValue",void 0),l([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],dl.prototype,"maxValue",void 0),l([d(o0)],dl.prototype,"symbol",void 0),dl=rx=l([S("esri.renderers.support.ClassBreakInfo")],dl);const nb=dl;var nx;const rg=W.getLogger("esri.renderers.ClassBreaksRenderer"),GF="log",A1="percent-of-total",M1="field",ng=new xe({esriNormalizeByLog:GF,esriNormalizeByPercentOfTotal:A1,esriNormalizeByField:M1}),Kue=it(nb);let Ht=nx=class extends Up(Na){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(n=>{const s=new nb;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(e,t,i,r){const n=e.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[i]=n}castField(e){return e==null?e:typeof e=="function"?(rg.error(".field: field must be a string value"),null):Um(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&M1||i&&A1||null,t&&i&&rg.warn("warning: both normalizationField and normalizationTotal are set!")):e!==M1&&e!==A1||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new nb({minValue:e,maxValue:t,symbol:zO(i)}):Kue($(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(O(t)||O(t.arcade))&&rg.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(O(t)||O(t.arcade))&&(i={...i,arcade:await Ta()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(O(t)||O(t.arcade)))return void rg.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(O(t)||O(t.arcade))){const n=await Ta(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new nx({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:$(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:$(this.visualVariables),legendOptions:$(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),dr(e,t,this.valueExpression)];Rn(e,t,this.field),Rn(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:s}=Rb(t,{});let o=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const a=s.arcadeUtils;if(!o){const c=a.createSyntaxTree(this.valueExpression);o=a.createFunction(c),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=this.valueExpression;const u=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let n=parseFloat(i[t]);if(r){const s=this.normalizationTotal,o=parseFloat(i[this.normalizationField]);if(r===GF)n=Math.log(n)*Math.LOG10E;else if(r!==A1||isNaN(s)){if(r===M1&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};l([d(HF)],Ht.prototype,"backgroundFillSymbol",void 0),l([d({type:[nb]})],Ht.prototype,"classBreakInfos",void 0),l([Z("classBreakInfos")],Ht.prototype,"readClassBreakInfos",null),l([te("classBreakInfos")],Ht.prototype,"writeClassBreakInfos",null),l([d({type:String,json:{write:!0}})],Ht.prototype,"defaultLabel",void 0),l([d(o0)],Ht.prototype,"defaultSymbol",void 0),l([d({type:String,json:{write:!0}})],Ht.prototype,"field",void 0),l([je("field")],Ht.prototype,"castField",null),l([d({type:Boolean})],Ht.prototype,"isMaxInclusive",void 0),l([d({type:Fh,json:{write:!0}})],Ht.prototype,"legendOptions",void 0),l([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ht.prototype,"minValue",null),l([d({type:String,json:{write:!0}})],Ht.prototype,"normalizationField",void 0),l([d({type:Number,cast:e=>xn(e),json:{write:!0}})],Ht.prototype,"normalizationTotal",void 0),l([d({type:ng.apiValues,value:null,json:{type:ng.jsonValues,read:ng.read,write:ng.write}})],Ht.prototype,"normalizationType",null),l([ye({classBreaks:"class-breaks"})],Ht.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Ht.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],Ht.prototype,"valueExpressionTitle",void 0),Ht=nx=l([S("esri.renderers.ClassBreaksRenderer")],Ht);const qF=Ht;class WF{constructor(t,i){this._storage=new k7,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const F4=W.getLogger("esri.renderers.support.DictionaryLoader"),Zue={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class LM{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new WF(100),this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(m){if(lr(m))return this._dictionaryPromise=null,null}const n={};if(this.fieldMap)for(const m of this._symbolFields){const g=this.fieldMap[m];if(g&&t.attributes[g]!=null){const v=""+t.attributes[g];n[m]=v}else n[m]=""}const s=r(n,i);if(!s||typeof s!="string")return null;const o=NA(s).toString(),a=this._symbolCache.get(o);if(a)return a.catch(()=>{this._symbolCache.pop(o)}),a;const u=s.split(";"),c=[],h=[];for(const m of u)if(m)if(m.includes("po:")){const g=m.substr(3).split("|");if(g.length===3){const v=g[0],b=g[1];let w=g[2];if(b==="DashTemplate")w=w.split(" ").map(T=>Number(T));else if(b==="Color"){const T=new se(w).toRgba();w=[T[0],T[1],T[2],255*T[3]]}else w=Number(w);h.push({primitiveName:v,propertyName:b,value:w})}}else if(m.includes("|")){for(const g of m.split("|"))if(this._itemNames.has(g)){c.push(g);break}}else this._itemNames.has(m)&&c.push(m);const f=!E(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",y=this._cimPartsToCIMSymbol(c,h,f,i);return this._symbolCache.put(o,y,1),y}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void F4.error("no valid URL!");const i=ze(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:E(t)?t.signal:null}),[{data:r}]=await Promise.all([i,Ta()]);if(!r)throw this._dictionaryPromise=null,new P("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=r.expression,s=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=s.symbol;const o={};if(this.config){const u=this.config;for(const c in u)o[c]=u[c]}if(s.configuration)for(const u of s.configuration)o.hasOwnProperty(u.name)||(o[u.name]=u.value);const a=[];if(E(t)&&t.fields&&this.fieldMap)for(const u of this._symbolFields){const c=this.fieldMap[u],h=t.fields.filter(f=>f.name===c);h.length>0&&a.push({...h[0],name:u})}return this._dictionaryPromise=pZ(n,E(t)?t.spatialReference:null,a,o).then(u=>{const c={scale:0};return(h,f)=>{const y=u.repurposeFeature({geometry:null,attributes:h});return c.scale=E(f)?f.scale:void 0,u.evaluate({$feature:y,$view:c})}}).catch(u=>(F4.error("Creating dictinoary expression failed:",u),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,i,r,n){const s=new Array(t.length);for(let u=0;u<t.length;u++)s[u]=this._getSymbolPart(t[u],n);const o=await Promise.all(s),a=this.fieldMap;for(const u of o)YF(u,a);return new Hm({data:this._combineSymbolParts(o,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(s=>s.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),n=ze(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,n);try{return(await n).data}catch(s){throw this._ongoingRequests.delete(t),s}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const n={...t[0]};if(t.length>1){n.symbolLayers=[];for(const s of t){const o=s;n.symbolLayers.unshift(...o.symbolLayers)}}return r&&(n.callout=Zue),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:i}}}function YF(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const n=i[r];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&Jue(n,t)}}function Jue(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const n=r.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":YF(n,t);break;case"CIMTextSymbol":n.fieldMap=t}}}const DEe=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:LM},Symbol.toStringTag,{value:"Module"}));var sx;let ss=sx=class extends Up(Na){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new LM(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new sx({config:$(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:$(this.fieldMap),url:$(this.url),visualVariables:$(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await dr(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};l([d({type:LM})],ss.prototype,"_loader",null),l([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],ss.prototype,"config",void 0),l([d({type:Object,json:{write:!0}})],ss.prototype,"fieldMap",void 0),l([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],ss.prototype,"scaleExpression",void 0),l([te("scaleExpression")],ss.prototype,"writeData",null),l([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],ss.prototype,"scaleExpressionTitle",void 0),l([d({type:String,json:{write:!0}})],ss.prototype,"url",void 0),l([te("visualVariables")],ss.prototype,"writeVisualVariables",null),ss=sx=l([S("esri.renderers.DictionaryRenderer")],ss);const Xue=ss;var ox;const Que=W.getLogger("esri.renderers.support.AttributeColorInfo");let Ko=ox=class extends j{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Que.error(".field: field must be a string value"),null):Um(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new ox({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([d({type:se,json:{type:[Number],write:!0}})],Ko.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],Ko.prototype,"field",void 0),l([je("field")],Ko.prototype,"castField",null),l([d({type:String,json:{write:!0}})],Ko.prototype,"label",void 0),l([d({type:String,json:{write:!0}})],Ko.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],Ko.prototype,"valueExpressionTitle",void 0),Ko=ox=l([S("esri.renderers.support.AttributeColorInfo")],Ko);const KF=Ko;var ax;let C1=ax=class extends j{constructor(){super(...arguments),this.unit=null}clone(){return new ax({unit:this.unit})}};l([d({type:String,json:{write:!0}})],C1.prototype,"unit",void 0),C1=ax=l([S("esri.renderers.support.DotDensityLegendOptions")],C1);const ece=C1;var lx;let Pi=lx=class extends Up(Na){constructor(e){super(e),this.attributes=null,this.backgroundColor=new se([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new sn,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Ca({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new lx({attributes:$(this.attributes),backgroundColor:$(this.backgroundColor),dotBlendingEnabled:$(this.dotBlendingEnabled),dotShape:$(this.dotShape),dotSize:$(this.dotSize),dotValue:$(this.dotValue),legendOptions:$(this.legendOptions),outline:$(this.outline),referenceScale:$(this.referenceScale),visualVariables:$(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await dr(e,t,i.valueExpression),i.field&&e.add(i.field)}};l([d({type:[KF],json:{write:!0}})],Pi.prototype,"attributes",void 0),l([d({type:se,json:{write:!0}})],Pi.prototype,"backgroundColor",void 0),l([d({type:Boolean}),X("dotBlendingEnabled")],Pi.prototype,"blendDots",void 0),l([d({type:Boolean,json:{write:!0}})],Pi.prototype,"dotBlendingEnabled",void 0),l([d({type:String,json:{write:!1}})],Pi.prototype,"dotShape",void 0),l([d({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],Pi.prototype,"dotSize",void 0),l([d({type:ece,json:{write:!0}})],Pi.prototype,"legendOptions",void 0),l([d({type:sn,json:{default:null,write:!0}})],Pi.prototype,"outline",void 0),l([d({type:Number,json:{write:!0}})],Pi.prototype,"dotValue",void 0),l([d({type:Number}),X("dotValue")],Pi.prototype,"referenceDotValue",void 0),l([d({type:Number,json:{write:!0}})],Pi.prototype,"referenceScale",void 0),l([d({type:Number,json:{write:!0}})],Pi.prototype,"seed",void 0),l([ye({dotDensity:"dot-density"})],Pi.prototype,"type",void 0),Pi=lx=l([S("esri.renderers.DotDensityRenderer")],Pi);const tce=Pi;let Hd=class extends Dr(j){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};l([d({type:String,json:{write:!0}})],Hd.prototype,"minLabel",void 0),l([d({type:String,json:{write:!0}})],Hd.prototype,"maxLabel",void 0),l([d({type:String,json:{write:!0}})],Hd.prototype,"title",void 0),Hd=l([S("esri.renderers.support.HeatmapLegendOptions")],Hd);function Nw(){return[0,0,0,0]}function ice(e){return[e[0],e[1],e[2],e[3]]}function Vp(e,t,i,r){return[e,t,i,r]}function rce(e){const t=Nw(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function nce(e,t){return new Float64Array(e,t,4)}function ZF(){return Nw()}function JF(){return Vp(1,1,1,1)}function XF(){return Vp(1,0,0,0)}function QF(){return Vp(0,1,0,0)}function eB(){return Vp(0,0,1,0)}function tB(){return Vp(0,0,0,1)}const sce=ZF(),oce=JF(),ace=XF(),lce=QF(),uce=eB(),cce=tB();Object.freeze(Object.defineProperty({__proto__:null,create:Nw,clone:ice,fromValues:Vp,fromArray:rce,createView:nce,zeros:ZF,ones:JF,unitX:XF,unitY:QF,unitZ:eB,unitW:tB,ZEROS:sce,ONES:oce,UNIT_X:ace,UNIT_Y:lce,UNIT_Z:uce,UNIT_W:cce},Symbol.toStringTag,{value:"Module"}));const OM=2.4;function dce(e){return wo(e*OM)}function hce(e){return pO(e)/OM}function pce(e,t,i,r){let{color:n,ratio:s}=t,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const u=Nr((r-s)/(a-s),0,1);_L(e,n.toArray(),o.toArray(),u)}function LEe(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,u)=>a.ratio-u.ratio).map(({color:a,ratio:u})=>({color:a,ratio:Math.max(u,.001)})),e.length<1)return i;let r=e[0],n=e[0],s=1;const o=Nw();for(let a=0;a<512;a++){const u=(a+.5)/512;for(;u>n.ratio&&s<e.length;)r=n,n=e[s++];pce(o,r,n,u),i.set(o,4*a)}return i}function OEe(e,t,i,r){const{radius:n,fieldOffset:s,field:o}=t,a=Math.round(pO(n)),u=new Float64Array(i*r);let c,h=Number.NEGATIVE_INFINITY;const f=mce(o,s),y=new Set;for(const m of e){const g=m.getCursor();for(;g.next();){const v=g.getObjectId();if(y.has(v))continue;y.add(v);const b=g.readLegacyPointGeometry(),w=128;if(b.x<-w||b.x>=i+w||b.y<-w||b.y>r+w)continue;const T=+f(g),A=Math.max(0,Math.round(b.x)-a),R=Math.max(0,Math.round(b.y)-a),M=Math.min(r,Math.round(b.y)+a),C=Math.min(i,Math.round(b.x)+a);for(let k=R;k<M;k++)for(let B=A;B<C;B++){const H=k*i+B,Q=yce(b.x-B,b.y-k,a);c=u[H]+=Q*T,c>h&&(h=c)}}}return{matrix:u.buffer,max:h}}function kEe(e,t,i,r,n,s){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const o=e.getImageData(0,0,t,t);i&&r&&o.data.set(new Uint8ClampedArray(fce(t,i,r,n,s))),e.putImageData(o,0,0)}function fce(e,t,i,r,n){const s=new Uint32Array(e*e),o="buffer"in t?t:new Float64Array(t),a="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),u=a.length/(n-r);for(let c=0;c<o.length;c++){const h=o[c],f=Math.floor((h-r)*u);s[c]=a[Nr(f,0,a.length-1)]}return s.buffer}function yce(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function FEe(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function mce(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var ux;const gce=W.getLogger("esri.renderers.HeatmapRenderer");function B4(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let ti=ux=class extends Na{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Dy({ratio:0,color:new se("rgba(255, 140, 0, 0)")}),new Dy({ratio:.75,color:new se("rgba(255, 140, 0, 1)")}),new Dy({ratio:.9,color:new se("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return B4(e)}get blurRadius(){return hce(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",dce(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(OM**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||Vi(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,bp(()=>{Y_(gce,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=B4(e),super.read(e,t)}getSymbol(){const e=this.referenceScale!==0?5:1,t=Math.min(this.radius*e,wo(256));return new hu({size:t})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await Rn(e,t,i),r&&typeof r=="string"&&await dr(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new ux({colorStops:$(this.colorStops),field:this.field,legendOptions:$(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([d({type:IF,json:{write:!1}})],ti.prototype,"authoringInfo",void 0),l([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ti.prototype,"blurRadius",null),l([d({type:[Dy],json:{write:!0}})],ti.prototype,"colorStops",void 0),l([d({type:String,json:{write:!0}})],ti.prototype,"field",void 0),l([d({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],ti.prototype,"fieldOffset",void 0),l([d({type:Hd,json:{write:!0}})],ti.prototype,"legendOptions",void 0),l([d({type:Number,json:{write:!0}})],ti.prototype,"maxDensity",void 0),l([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ti.prototype,"maxPixelIntensity",null),l([d({type:Number,json:{write:!0}})],ti.prototype,"minDensity",void 0),l([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ti.prototype,"minPixelIntensity",null),l([d({type:Number,cast:qe,json:{write:!0}})],ti.prototype,"radius",void 0),l([d({type:Number,range:{min:0},json:{default:0,write:!0}})],ti.prototype,"referenceScale",void 0),l([ye({heatmap:"heatmap"})],ti.prototype,"type",void 0),l([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],ti.prototype,"valueExpression",void 0),l([d({type:String})],ti.prototype,"valueExpressionTitle",void 0),l([d({readOnly:!0})],ti.prototype,"_pixelIntensityToDensity",null),ti=ux=l([S("esri.renderers.HeatmapRenderer")],ti);const iB=ti;let uc=class extends Dr(j){constructor(){super(...arguments),this.color=new se([0,0,0,0]),this.label=null,this.threshold=0}};l([d({type:se,json:{write:!0}})],uc.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],uc.prototype,"label",void 0),l([d({type:Number,range:{min:0,max:1},json:{write:!0}})],uc.prototype,"threshold",void 0),uc=l([S("esri.renderers.support.OthersCategory")],uc);let I1=class extends Dr(j){constructor(){super(...arguments),this.title=null}};l([d({type:String,json:{write:!0}})],I1.prototype,"title",void 0),I1=l([S("esri.renderers.support.PieChartLegendOptions")],I1);let jr=class extends Up(Dr(Na)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new se([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new uc,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new hu({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await dr(e,t,i.valueExpression),i.field&&e.add(i.field)}};l([d({type:[KF],json:{write:!0}})],jr.prototype,"attributes",void 0),l([d({type:Ca,json:{default:null,write:!0}})],jr.prototype,"backgroundFillSymbol",void 0),l([d({type:se,json:{write:!0}})],jr.prototype,"defaultColor",void 0),l([d({type:String,json:{write:!0}})],jr.prototype,"defaultLabel",void 0),l([d({type:Number,range:{min:0,max:1},json:{write:!0}})],jr.prototype,"holePercentage",void 0),l([d({type:uc,json:{write:!0}})],jr.prototype,"othersCategory",void 0),l([d({type:I1,json:{write:!0}})],jr.prototype,"legendOptions",void 0),l([d({type:sn,json:{default:null,write:!0}})],jr.prototype,"outline",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],jr.prototype,"size",void 0),l([ye({pieChart:"pie-chart"})],jr.prototype,"type",void 0),jr=l([S("esri.renderers.PieChartRenderer")],jr);const vce=jr;var cx;let qu=cx=class extends Up(Na){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new cx({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:$(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};l([d({type:String,json:{write:!0}})],qu.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],qu.prototype,"label",void 0),l([d(o0)],qu.prototype,"symbol",void 0),l([ye({simple:"simple"})],qu.prototype,"type",void 0),qu=cx=l([S("esri.renderers.SimpleRenderer")],qu);const kM=qu,bce=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function dx(e){return e instanceof ce}function U4(e){return e instanceof me?Object.keys(e.items):dx(e)?Vi(e).keys():e?Object.keys(e):[]}function sg(e,t){return e instanceof me?e.items[t]:e[t]}function wce(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Uy(e){return e?e.declaredClass:null}function rB(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=U4(e),n=U4(t);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||wce(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(f=>!r.includes(f)),o=r.filter(f=>!n.includes(f)),a=r.filter(f=>n.includes(f)&&sg(e,f)!==sg(t,f)).concat(s,o).sort(),u=Uy(e);if(u&&bce.includes(u)&&a.length)return{type:"complete",oldValue:e,newValue:t};let c;const h=dx(e)&&dx(t);for(const f of a){const y=sg(e,f),m=sg(t,f);let g;if((h||typeof y!="function"&&typeof m!="function")&&y!==m&&(y!=null||m!=null)){if(i&&i[f]&&typeof i[f]=="function")g=i[f](y,m);else if(y instanceof Date&&m instanceof Date){if(y.getTime()===m.getTime())continue;g={type:"complete",oldValue:y,newValue:m}}else g=typeof y=="object"&&typeof m=="object"&&Uy(y)===Uy(m)?rB(y,m):{type:"complete",oldValue:y,newValue:m};E(g)&&(E(c)?c.diff[f]=g:c={type:"partial",diff:{[f]:g}})}}return c}function _ce(e,t){if(O(e))return!1;const i=t.split(".");let r=e;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function BEe(e,t){for(const i of t)if(_ce(e,i))return!0;return!1}function Sce(e,t){if(!(typeof e=="function"||typeof t=="function"||O(e)&&O(t)))return O(e)||O(t)||typeof e=="object"&&typeof t=="object"&&Uy(e)!==Uy(t)?{type:"complete",oldValue:e,newValue:t}:rB(e,t)}var hx;let hl=hx=class extends j{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new hx({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};l([d({type:String,json:{write:!0}})],hl.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],hl.prototype,"label",void 0),l([d(o0)],hl.prototype,"symbol",void 0),l([d({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],hl.prototype,"value",void 0),l([je("value")],hl.prototype,"castValue",null),hl=hx=l([S("esri.renderers.support.UniqueValueInfo")],hl);const sb=hl,Tce=()=>!!F("enable-feature:force-wosr"),e_={};async function Ece(e,t){try{return{data:(await Cce(e,t)).data,baseUrl:P6(e),styleUrl:e}}catch(i){return Gl(i),null}}function xce(e,t,i){const r=E(t.portal)?t.portal:ri.getDefault();let n;const s=`${r.url} - ${r.user&&r.user.username} - ${e}`;return e_[s]||(e_[s]=Ace(e,r,i).then(o=>(n=o,o.fetchData())).then(o=>({data:o,baseUrl:n.itemUrl,styleName:e}))),e_[s]}function Ace(e,t,i){return t.load(i).then(()=>{const r=new ua({disableExtraQuery:!0,query:`owner:${V4} AND type:${j4} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{let n=null;const s=e.toLowerCase();if(r&&Array.isArray(r)){for(const o of r)if(o.typeKeywords.some(a=>a.toLowerCase()===s)&&o.type===j4&&o.owner===V4){n=o;break}}if(!n)throw new P("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(i)})}function Mce(e,t,i){return e.styleUrl?Ece(e.styleUrl,i):e.styleName?xce(e.styleName,t,i):Promise.reject(new P("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function UEe(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function VEe(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!Tce()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function Cce(e,t){const i={responseType:"json",query:{f:"json"},...t};return ze(Jr(e),i)}const V4="esri_en",j4="Style",jEe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var sy;const vu=W.getLogger("esri.renderers.UniqueValueRenderer"),Ice=it(sb);let _t=sy=class extends Up(Na){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=t.find(a=>a.value===i[s].value);o?Sce(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<t.length;s++)i.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:Um(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new P("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):vu.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,i){return i.portal||ri.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=Ap(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Gm(e.styleUrl,r))}set uniqueValueInfos(e){this.styleOrigin?vu.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void vu.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?Ice(e):new sb({value:e,symbol:zO(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i}removeUniqueValueInfo(e){if(this.styleOrigin)vu.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(O(t)||O(t.arcade))&&(i={...i,arcade:await Ta()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(O(t)||O(t.arcade)))return void vu.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(O(i)||O(i.arcade))){const n=await Ta(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new sy({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:$(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:$(this.visualVariables),legendOptions:$(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:$(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=$(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze($(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),dr(e,t,this.valueExpression)];Rn(e,t,this.field),Rn(e,t,this.field2),Rn(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return Mce(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const r=new cd({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const n=new sb({value:i.name,symbol:r});t.push(n),this._valueInfoMap[i.name]=n}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:s}=Rb(t,{});let o=this._cache.compiledFunc;const a=s.arcadeUtils;if(!o){const c=a.createSyntaxTree(this.valueExpression);o=a.createFunction(c),this._cache.compiledFunc=o}const u=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._valueInfoMap[u+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(i[t]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new sy(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||ri.getDefault());const r=i.populateFromStyle();return r.catch(n=>{vu.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(e,t){const i=new sy(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(n=>{vu.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};l([d({readOnly:!0})],_t.prototype,"_cache",null),l([ye({uniqueValue:"unique-value"})],_t.prototype,"type",void 0),l([d(HF)],_t.prototype,"backgroundFillSymbol",void 0),l([d({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],_t.prototype,"field",void 0),l([je("field")],_t.prototype,"castField",null),l([te("field")],_t.prototype,"writeField",null),l([d({type:String,json:{write:!0}})],_t.prototype,"field2",void 0),l([d({type:String,json:{write:!0}})],_t.prototype,"field3",void 0),l([d({type:String,json:{write:!0}})],_t.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],_t.prototype,"valueExpressionTitle",void 0),l([d({type:Fh,json:{write:!0}})],_t.prototype,"legendOptions",void 0),l([d({type:String,json:{write:!0}})],_t.prototype,"defaultLabel",void 0),l([d(P9({...o0},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],_t.prototype,"defaultSymbol",null),l([d({type:String,json:{write:!0}})],_t.prototype,"fieldDelimiter",void 0),l([d({type:ri,readOnly:!0})],_t.prototype,"portal",void 0),l([Z("portal",["styleName"])],_t.prototype,"readPortal",null),l([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],_t.prototype,"styleOrigin",void 0),l([Z("styleOrigin",["styleName","styleUrl"])],_t.prototype,"readStyleOrigin",null),l([te("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],_t.prototype,"writeStyleOrigin",null),l([d({type:[sb],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],_t.prototype,"uniqueValueInfos",null),_t=sy=l([S("esri.renderers.UniqueValueRenderer")],_t);const FM=_t,a0={key:"type",base:Na,typeMap:{heatmap:iB,simple:kM,"unique-value":FM,"class-breaks":qF,"dot-density":tce,dictionary:Xue,"pie-chart":vce},errorContext:"renderer"},nB={key:"type",base:Na,typeMap:{simple:kM,"unique-value":FM,"class-breaks":qF,heatmap:iB},errorContext:"renderer"};function zEe(e,t){return sB(e,null,t)}const Nce=wp({types:a0});function sB(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new ur("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):Nce(e,t,i):null}class BM{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(q_),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new BM,r=this._originStores[Fe.DEFAULTS];r&&r.forEach((n,s)=>{i.set(s,$(n),Fe.DEFAULTS)});for(let n=Fe.SERVICE;n<q_;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{t&&t.has(a)||i.set(a,$(o),n)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=Fe.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const s=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),s!==i}return!1}delete(t,i=Fe.USER){const r=this._originStores[i];if(!r)return;const n=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],n=r&&r.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,i),s!==n}originOf(t){return this._propertyOriginMap.get(t)||Fe.DEFAULTS}forEach(t){this._values.forEach(t)}}const oB=e=>{let t=class extends e{constructor(...i){super(...i);const r=Vi(this),n=r.store,s=new BM;r.store=s,m6(r,n,s)}read(i,r){v6(this,i,r)}getAtOrigin(i,r){const n=t_(this),s=kl(r);if(typeof i=="string")return n.get(i,s);const o={};return i.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(i){return sv(this.originIdOf(i))}originIdOf(i){return t_(this).originOf(i)}revert(i,r){const n=t_(this),s=kl(r),o=Vi(this);let a;a=typeof i=="string"?i==="*"?n.keys(s):[i]:i,a.forEach(u=>{o.invalidate(u),n.revert(u,s),o.commit(u)})}};return t=l([S("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function t_(e){return Vi(e).store}let z4=class extends oB(ce){};z4=l([S("esri.core.ReadOnlyMultiOriginJSONSupport")],z4);const Rce=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return i_(this).delete(i,kl(r))}write(i={},r){return w6(this,i=i||{},r),i}setAtOrigin(i,r,n){Vi(this).setAtOrigin(i,r,kl(n))}removeOrigin(i){const r=i_(this),n=kl(i),s=r.keys(n);for(const o of s)r.originOf(o)===n&&r.set(o,r.get(o,n),Fe.USER)}updateOrigin(i,r){const n=i_(this),s=kl(r),o=this.get(i);for(let a=s+1;a<q_;++a)n.delete(i,a);n.set(i,o,s)}toJSON(i){return this.write({},i)}};return t=l([S("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function i_(e){return Vi(e).store}const Rw=e=>{let t=class extends Rce(oB(e)){constructor(...i){super(...i)}};return t=l([S("esri.core.MultiOriginJSONSupport")],t),t};let H4=class extends Rw(ce){};H4=l([S("esri.core.MultiOriginJSONSupport")],H4);async function Pce(e,t){const{WhereClause:i}=await V(()=>import("./WhereClause.36ec5599.js"),[],import.meta.url);return i.create(e,t)}function $ce(e,t){return E(e)?E(t)?`(${e}) AND (${t})`:e:t}var px;let Wu=px=class extends j{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new px({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([d({type:String,json:{write:!0}})],Wu.prototype,"expression",void 0),l([d({type:String,json:{write:!0}})],Wu.prototype,"name",void 0),l([d({type:["boolean","date","number","string"],json:{write:!0}})],Wu.prototype,"returnType",void 0),l([d({type:String,json:{write:!0}})],Wu.prototype,"title",void 0),Wu=px=l([S("esri.form.ExpressionInfo")],Wu);const Dce=Wu;let Yu=class extends j{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};l([d({type:String,json:{write:!0}})],Yu.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],Yu.prototype,"label",void 0),l([d()],Yu.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Yu.prototype,"visibilityExpression",void 0),Yu=l([S("esri.form.elements.Element")],Yu);const ap=Yu;var fx;let N1=fx=class extends j{constructor(e){super(e),this.type=null}clone(){return new fx({type:this.type})}};l([d({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],N1.prototype,"type",void 0),N1=fx=l([S("esri.form.elements.inputs.AttachmentInput")],N1);const Lce=N1;var yx;let Ku=yx=class extends ap{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new yx({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};l([d({type:String,json:{write:!0}})],Ku.prototype,"attachmentKeyword",void 0),l([d({type:Boolean,json:{write:!0}})],Ku.prototype,"editable",void 0),l([d({type:Lce,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ku.prototype,"input",void 0),l([d({type:["attachment"],json:{read:!1,write:!0}})],Ku.prototype,"type",void 0),Ku=yx=l([S("esri.form.elements.AttachmentElement")],Ku);const G4=Ku;let R1=class extends j{constructor(e){super(e),this.type=null}};l([d()],R1.prototype,"type",void 0),R1=l([S("esri.form.elements.inputs.Input")],R1);const jp=R1;let oy=class extends jp{constructor(e){super(e),this.maxLength=null,this.minLength=0}};l([d({type:Number,json:{write:!0}})],oy.prototype,"maxLength",void 0),l([d({type:Number,json:{write:!0}})],oy.prototype,"minLength",void 0),oy=l([S("esri.form.elements.inputs.TextInput")],oy);const UM=oy;var mx;let P1=mx=class extends UM{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new mx({maxLength:this.maxLength,minLength:this.minLength})}};l([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],P1.prototype,"type",void 0),P1=mx=l([S("esri.form.elements.inputs.BarcodeScannerInput")],P1);const Oce=P1;var gx;let Gd=gx=class extends jp{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new gx({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};l([d({type:String,json:{write:!0}})],Gd.prototype,"noValueOptionLabel",void 0),l([d({type:Boolean,json:{write:!0}})],Gd.prototype,"showNoValueOption",void 0),l([d({type:["combo-box"],json:{read:!1,write:!0}})],Gd.prototype,"type",void 0),Gd=gx=l([S("esri.form.elements.inputs.ComboBoxInput")],Gd);const kce=Gd;var vx;function q4(e){return e!=null?new Date(e):null}function W4(e){return e?e.getTime():null}let os=vx=class extends jp{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return q4(t.max)}writeMax(e,t){t.max=W4(e)}readMin(e,t){return q4(t.min)}writeMin(e,t){t.min=W4(e)}clone(){return new vx({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};l([d({type:Boolean,json:{write:!0}})],os.prototype,"includeTime",void 0),l([d({type:Date,json:{type:Number,write:!0}})],os.prototype,"max",void 0),l([Z("max")],os.prototype,"readMax",null),l([te("max")],os.prototype,"writeMax",null),l([d({type:Date,json:{type:Number,write:!0}})],os.prototype,"min",void 0),l([Z("min")],os.prototype,"readMin",null),l([te("min")],os.prototype,"writeMin",null),l([d({type:["datetime-picker"],json:{read:!1,write:!0}})],os.prototype,"type",void 0),os=vx=l([S("esri.form.elements.inputs.DateTimePickerInput")],os);const Fce=os;var bx;let qd=bx=class extends jp{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new bx({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};l([d({type:String,json:{write:!0}})],qd.prototype,"noValueOptionLabel",void 0),l([d({type:Boolean,json:{write:!0}})],qd.prototype,"showNoValueOption",void 0),l([d({type:["radio-buttons"],json:{read:!1,write:!0}})],qd.prototype,"type",void 0),qd=bx=l([S("esri.form.elements.inputs.RadioButtonsInput")],qd);const Bce=qd;var wx;let Wd=wx=class extends jp{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new wx({offValue:this.offValue,onValue:this.onValue})}};l([d({type:[String,Number],json:{write:!0}})],Wd.prototype,"offValue",void 0),l([d({type:[String,Number],json:{write:!0}})],Wd.prototype,"onValue",void 0),l([d({type:["switch"],json:{read:!1,write:!0}})],Wd.prototype,"type",void 0),Wd=wx=l([S("esri.form.elements.inputs.SwitchInput")],Wd);const Uce=Wd;var _x;let $1=_x=class extends UM{constructor(e){super(e),this.type="text-area"}clone(){return new _x({maxLength:this.maxLength,minLength:this.minLength})}};l([d({type:["text-area"],json:{read:!1,write:!0}})],$1.prototype,"type",void 0),$1=_x=l([S("esri.form.elements.inputs.TextAreaInput")],$1);const Vce=$1;var Sx;let D1=Sx=class extends UM{constructor(e){super(e),this.type="text-box"}clone(){return new Sx({maxLength:this.maxLength,minLength:this.minLength})}};l([d({type:["text-box"],json:{read:!1,write:!0}})],D1.prototype,"type",void 0),D1=Sx=l([S("esri.form.elements.inputs.TextBoxInput")],D1);const jce=D1,zce={base:jp,key:"type",typeMap:{"barcode-scanner":Oce,"combo-box":kce,"datetime-picker":Fce,"radio-buttons":Bce,switch:Uce,"text-area":Vce,"text-box":jce}};var Tx;let vn=Tx=class extends ap{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Tx({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};l([d({types:z7,json:{read:{reader:hM},write:!0}})],vn.prototype,"domain",void 0),l([d({type:Boolean,json:{write:!0}})],vn.prototype,"editable",void 0),l([d({type:String,json:{write:!0}})],vn.prototype,"editableExpression",void 0),l([d({type:String,json:{write:!0}})],vn.prototype,"fieldName",void 0),l([d({type:String,json:{write:!0}})],vn.prototype,"hint",void 0),l([d({types:zce,json:{read:{source:"inputType"},write:{target:"inputType"}}})],vn.prototype,"input",void 0),l([d({type:String,json:{write:!0}})],vn.prototype,"requiredExpression",void 0),l([d({type:String,json:{read:!1,write:!0}})],vn.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],vn.prototype,"valueExpression",void 0),vn=Tx=l([S("esri.form.elements.FieldElement")],vn);const Y4=vn;var Ex;let Zo=Ex=class extends ap{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Ex({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:$(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};l([d({type:Number,json:{write:!0}})],Zo.prototype,"displayCount",void 0),l([d({type:["list"],json:{write:!0}})],Zo.prototype,"displayType",void 0),l([d({type:Boolean,json:{write:!0}})],Zo.prototype,"editable",void 0),l([d({type:[uO],json:{write:!0}})],Zo.prototype,"orderByFields",void 0),l([d({type:Number,json:{write:!0}})],Zo.prototype,"relationshipId",void 0),l([d({type:["relationship"],json:{read:!1,write:!0}})],Zo.prototype,"type",void 0),Zo=Ex=l([S("esri.form.elements.RelationshipElement")],Zo);const K4=Zo;function aB(e){return{typesWithGroup:{base:ap,key:"type",typeMap:{attachment:G4,field:Y4,group:e,relationship:K4}},typesWithoutGroup:{base:ap,key:"type",typeMap:{attachment:G4,field:Y4,relationship:K4}}}}function lB(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function uB(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}function cB(e,t,i=!0){return e?e.map(r=>mo(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var xx;let Xs=xx=class extends ap{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return cB(e,r_,!1)}readElements(e,t){return lB(t.formElements,r_,!1)}writeElements(e,t){t.formElements=uB(e,r_,!1)}clone(){return new xx({description:this.description,elements:$(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};l([d({json:{write:!0}})],Xs.prototype,"elements",void 0),l([je("elements")],Xs.prototype,"castElements",null),l([Z("elements",["formElements"])],Xs.prototype,"readElements",null),l([te("elements")],Xs.prototype,"writeElements",null),l([d({type:["collapsed","expanded"],json:{write:!0}})],Xs.prototype,"initialState",void 0),l([d({type:String,json:{read:!1,write:!0}})],Xs.prototype,"type",void 0),Xs=xx=l([S("esri.form.elements.GroupElement")],Xs);const r_=aB(Xs),Hce=Xs;var Ax;const n_=aB(Hce);let Ws=Ax=class extends j{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return cB(e,n_)}readElements(e,t){return lB(t.formElements,n_)}writeElements(e,t){t.formElements=uB(e,n_)}clone(){return new Ax({description:this.description,expressionInfos:$(this.expressionInfos),elements:$(this.elements),title:this.title})}};l([d({type:String,json:{write:!0}})],Ws.prototype,"description",void 0),l([d({json:{write:!0}})],Ws.prototype,"elements",void 0),l([je("elements")],Ws.prototype,"castElements",null),l([Z("elements",["formElements"])],Ws.prototype,"readElements",null),l([te("elements")],Ws.prototype,"writeElements",null),l([d({type:[Dce],json:{write:!0}})],Ws.prototype,"expressionInfos",void 0),l([d({type:String,json:{write:!0}})],Ws.prototype,"title",void 0),Ws=Ax=l([S("esri.form.FormTemplate")],Ws);const Gce=Ws;var ay;const ob=Ai()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),dB=ob.jsonValues.slice();_9(dB,"orthometric");const Vy=Ai()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let as=ay=class extends j{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return ob.write(e,t,i)}readHeightModel(e,t,i){return ob.read(e)||(i&&i.messages&&i.messages.push(qce(e,{context:i})),null)}readHeightUnit(e,t,i){return Vy.read(e)||(i&&i.messages&&i.messages.push(Z4(e,{context:i})),null)}readHeightUnitService(e,t,i){return QO(e)||Vy.read(e)||(i&&i.messages&&i.messages.push(Z4(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new ay({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=BX(t);return new ay({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new ay;return t.read(e,{origin:"web-scene"}),t}};function Z4(e,t){return new ur("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function qce(e,t){return new ur("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}l([d({type:ob.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:dB,default:"ellipsoidal"}}}})],as.prototype,"heightModel",void 0),l([te("web-scene","heightModel")],as.prototype,"writeHeightModel",null),l([Z(["web-scene","service"],"heightModel")],as.prototype,"readHeightModel",null),l([d({type:Vy.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Vy.jsonValues,write:Vy.write}}}})],as.prototype,"heightUnit",void 0),l([Z("web-scene","heightUnit")],as.prototype,"readHeightUnit",null),l([Z("service","heightUnit")],as.prototype,"readHeightUnitService",null),l([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],as.prototype,"vertCRS",void 0),l([Z("service","vertCRS",["vertCRS","ellipsoid","geoid"])],as.prototype,"readVertCRS",null),as=ay=l([S("esri.geometry.HeightModelInfo")],as);const Pw=as;function J4(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const n of r)n.length>2&&(n[2]*=i)}function Wce(e,t,i){if(!e&&!t||!i)return;const r=ip(i);X4(e,i,r),X4(t,i,r)}function X4(e,t,i){if(e)for(const r of e)Yce(r.geometry,t,i)}function Yce(e,t,i){if(O(e)||!e.spatialReference||hr(e.spatialReference,t))return;const r=ip(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)J4(e,e.rings,r);else if("paths"in e)J4(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=r)}}let Kce=0;const s_=W.getLogger("esri.layers.graphics.sources.MemorySource");let sa=class extends go.LoadableMixin(jb(uu(me))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=E(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);wE(e,this.layer.spatialReference,i);const r=t0.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const n=this.layer.objectIdField;for(const s of r.features){const o=s.attributes[n],a=this._idToClientGraphic.get(o);a&&(s.geometry=a.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new P("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return wE(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:Ue.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new P("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const s=c=>"objectId"in c&&c.objectId!=null?c.objectId:"attributes"in c&&c.attributes[t]!=null?c.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const c of e.deleteFeatures){const h=s(c);h!=null&&r.push(h)}const o=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const c of e.updateFeatures)if(n.push(this._serializeFeature(c)),o){const h=s(c);h!=null&&o.set(h,c)}}Wce(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:a,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:r});return this.fullExtent=a,i&&i.finish(u.uidToObjectId),this._updateClientGraphicIds(o,u),this._createEditsResult(u)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||O(e))return;const i=[];for(const{geometry:r}of e)!E(r)||r.type!=="mesh"||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const r=e.get(i.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new P("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let s=0;s<e.length;s++){const o=e[s],a=this._serializeFeature(o);!r&&E(o.geometry)&&(r=o.geometry.type),i[s]=a,t.set(`${a.uid}`,o)}const n=this;return{features:i,inferredGeometryType:r,finish(s){const o=n.sourceJSON.objectIdField;for(const a in s){const u=s[a],c=t.get(a);c&&(c.attributes||(c.attributes={}),u===-1?delete c.attributes[o]:c.attributes[o]=u,n._addIdToClientGraphic(c))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get layerOrSourceGeometryType(){var e,t,i;return(i=(e=this.layer)==null?void 0:e.geometryType)!=null?i:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(Kce++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return O(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Rr.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await WO("MemorySourceWorker",{strategy:F("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:n,hasZ:s,timeInfo:o}=this.layer,a=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",y=>{s_.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),y.preventDefault()}));const c={features:u.features,fields:t&&t.map(y=>y.toJSON()),geometryType:tN.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&n,hasZ:this.layerOrSourceGeometryType==="mesh"||s,objectIdField:r,spatialReference:a?null:i&&i.toJSON(),timeInfo:o?o.toJSON():null},h=await this._connection.invoke("load",c,{signal:e});for(const y of h.warnings)s_.warn(y.message,{layer:this.layer,warning:y});h.featureErrors.length&&s_.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);const f=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(f.geometryType=tN.toJSON(u.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(h.assignedObjectIds)}};l([VA({Type:zi,ensureType:it(zi)})],sa.prototype,"itemType",void 0),l([d()],sa.prototype,"type",void 0),l([d({constructOnly:!0})],sa.prototype,"layer",void 0),l([d({readOnly:!0})],sa.prototype,"workerGeometryType",null),l([d()],sa.prototype,"sourceJSON",void 0),sa=l([S("esri.layers.graphics.sources.MemorySource")],sa);function Zce(e){return"portalItem"in e}const hB=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Zce(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return l([d({type:String})],t.prototype,"apiKey",null),t=l([S("esri.layers.mixins.APIKeyMixin")],t),t},pB={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},fB=Object.values(pB),yB=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${fB.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Jce=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${fB.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Xce=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function HEe(e){return!!yB.test(e)}function lp(e){if(O(e))return null;const t=ut(e),i=t.path.match(yB)||t.path.match(Jce);if(!i)return null;const[,r,n,s,o]=i,a=n.indexOf("/");return{title:VM(a!==-1?n.slice(a+1):n),serverType:pB[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function Qce(e){const t=ut(e).path.match(Xce);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function VM(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function ede(e,t){const i=[];if(e){const r=lp(e);E(r)&&r.title&&i.push(r.title)}if(t){const r=VM(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function mB(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",n="//features",s=(e=e.toLowerCase()).includes(t),o=e.includes(i)||e.includes(r)||e.includes(n);return s&&o}function tde(e,t){return e&&qb($6(e,t))}function ide(e){let{url:t}=e;if(!t)return{url:t};t=$6(t,e.logger);const i=ut(t),r=lp(i.path);let n;if(E(r))r.sublayer!=null&&e.layer.layerId==null&&(n=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const s=Qce(i.path);E(s)&&(t=s.serviceUrl,n=s.sublayerId)}return{url:qb(t),layerId:n}}function rde(e,t,i,r,n){Kc(t,r,"url",n),r.url&&e.layerId!=null&&(r.url=vo(r.url,i,e.layerId.toString()))}function GEe(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return i&&(r||n||s)}const gB=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=lp(this.url);if(E(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",tde(i,W.getLogger(this.declaredClass)))}};return l([d()],t.prototype,"title",null),l([d({type:String})],t.prototype,"url",null),t=l([S("esri.layers.mixins.ArcGISService")],t),t},Q4={read:{reader:cM},write:{allowNull:!0,writer:dM}},jM=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return l([d({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),l([d({json:{read:!1,write:!1,origins:{"web-map":Q4,"portal-item":Q4}}})],t.prototype,"effect",void 0),t=l([S("esri.layers.mixins.BlendLayer")],t),t},zM=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return l([d({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=l([S("esri.layers.mixins.CustomParametersMixin")],t),t};var Mx;const o_=new xe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),a_=new xe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ys=Mx=class extends j{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new tr({geometry:$(i),objectIds:$(s),spatialRelationship:r,timeExtent:$(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new Mx({geometry:$(t),objectIds:$(n),spatialRelationship:i,timeExtent:$(r),where:e,units:s,distance:o})}};l([d({type:String,json:{write:!0}})],Ys.prototype,"where",void 0),l([d({types:ad,json:{write:!0}})],Ys.prototype,"geometry",void 0),l([d({type:o_.apiValues,json:{name:"spatialRel",read:{reader:o_.read},write:{allowNull:!1,writer:o_.write,overridePolicy(){return{enabled:E(this.geometry)}}}}})],Ys.prototype,"spatialRelationship",void 0),l([d({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Ys.prototype,"distance",void 0),l([d({type:[Number],json:{write:!0}})],Ys.prototype,"objectIds",void 0),l([d({type:a_.apiValues,json:{read:a_.read,write:{writer:a_.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Ys.prototype,"units",void 0),l([d({type:Ao,json:{write:!0}})],Ys.prototype,"timeExtent",void 0),Ys=Mx=l([S("esri.layers.support.FeatureFilter")],Ys);const nde=Ys;var Cx;const e5={read:{reader:cM},write:{writer:dM,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},t5={read:{reader:cM},write:{writer:dM,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},i5={name:"showExcludedLabels",default:!0};let Zu=Cx=class extends j{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,n;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(r=t.messages)==null||r.push(new P("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=t.messages)==null||n.push(new P("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new Cx({filter:E(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};l([d({type:nde,json:{write:{allowNull:!0,writer(e,t,i,r){const n=e==null?void 0:e.write({},r);n&&Object.keys(n).length!==0?Cr(i,n,t):Cr(i,null,t)}}}})],Zu.prototype,"filter",void 0),l([d({json:{write:!0,origins:{"web-map":e5,"portal-item":e5}}})],Zu.prototype,"includedEffect",void 0),l([d({json:{write:!0,origins:{"web-map":t5,"portal-item":t5}}})],Zu.prototype,"excludedEffect",void 0),l([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":i5,"portal-item":i5}}})],Zu.prototype,"excludedLabelsVisible",void 0),Zu=Cx=l([S("esri.layers.support.FeatureEffect")],Zu);const sde=Zu,r5={write:{allowNull:!0}},vB=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return l([d({type:sde,json:{origins:{"web-map":r5,"portal-item":r5}}})],t.prototype,"featureEffect",void 0),t=l([S("esri.layers.mixins.FeatureEffectLayer")],t),t},ode={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function ade(e){if(!e)return e;const{start:t,end:i}=e;return new Ao({start:E(t)?Fc(t,-t.getTimezoneOffset(),"minutes"):t,end:E(i)?Fc(i,-i.getTimezoneOffset(),"minutes"):i})}function lde(e){if(!e)return e;const{start:t,end:i}=e;return new Ao({start:E(t)?Fc(t,t.getTimezoneOffset(),"minutes"):t,end:E(i)?Fc(i,i.getTimezoneOffset(),"minutes"):i})}var Ix;let ly=Ix=class extends j{async collectRequiredFields(e,t){return dr(e,t,this.expression)}clone(){return new Ix({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};l([d({type:String,json:{write:!0}})],ly.prototype,"expression",void 0),l([d({type:String,json:{write:!0}})],ly.prototype,"title",void 0),ly=Ix=l([S("esri.layers.support.FeatureExpressionInfo")],ly);const n5=ly;function ude(){const e=Object.keys(LF);return e.sort(),e}const cde=ude();var Nx;const og=Ai()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),s5=new xe({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Jo=Nx=class extends j{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):E(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new Nx({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&sH(this.featureExpressionInfo,e.featureExpressionInfo)}};l([d({type:n5,json:{write:!0}})],Jo.prototype,"featureExpressionInfo",void 0),l([Z("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Jo.prototype,"readFeatureExpressionInfo",null),l([te("featureExpressionInfo",{featureExpressionInfo:{type:n5},"featureExpression.value":{type:[0]}})],Jo.prototype,"writeFeatureExpressionInfo",null),l([d({type:og.apiValues,nonNullable:!0,json:{type:og.jsonValues,read:og.read,write:{writer:og.write,isRequired:!0}}})],Jo.prototype,"mode",null),l([d({type:Number,json:{write:!0}})],Jo.prototype,"offset",void 0),l([d({type:cde,json:{type:String,read:s5.read,write:s5.write}})],Jo.prototype,"unit",null),Jo=Nx=l([S("esri.layers.support.ElevationInfo")],Jo);const dde=Jo,bB={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},$w={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},Dw={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},wB={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Kc}}},_B={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},SB={value:null,type:dde,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function qEe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const jy={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},hde={...jy,json:{...jy.json,origins:{"web-document":{...jy.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?rm(t.layerDefinition.drawingInfo.transparency):void 0:rm(t.drawingInfo.transparency)}}},WEe={type:Ao,readOnly:!0,get(){var a,u;if(!((a=this.layer)!=null&&a.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=(u=this.view)==null?void 0:u.timeExtent;let n=this.layer.timeExtent;e&&(n=lde(n));let s=i?r&&n?r.intersection(n):r||n:n;if(!s||s.isEmpty||s.isAllTime)return s;t&&(s=s.offset(-t.value,t.unit)),e&&(s=ade(s));const o=this._get("timeExtent");return s.equals(o)?o:s}},YEe={type:Ue,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Ue.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=we.fromJSON(t.spatialReference)),i}}}},read:!1}},TB={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},pde={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},fde={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},EB={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},HM=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,n,s){(s&&s.layerContainerType==="ground"||i&&cq(this,n,{},s))&&(r[n]=i)}writeOperationalLayerType(i,r,n,s){!i||s&&s.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i||"Layer"}read(i,r){r&&(r.layer=this),oq(this,i,n=>super.read(i,n),r)}write(i,r){var o,a;if(r!=null&&r.origin){const u=`${r.origin}/${r.layerContainerType||"operational-layers"}`,c=ode[u];let h=c&&c[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&u==="web-scene/operational-layers"&&(h=!1),!h)return(o=r.messages)==null||o.push(new P("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${u}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter(u=>u instanceof P&&u.name==="web-document-write:property-required").length;return Gb(n==null?void 0:n.url)?((a=r==null?void 0:r.messages)==null||a.push(new P("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return l([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),l([d(EB)],t.prototype,"listMode",void 0),l([te("listMode")],t.prototype,"writeListMode",null),l([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),l([te("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),l([d(jy)],t.prototype,"opacity",void 0),l([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),l([te([void 0,"web-scene"],"title")],t.prototype,"writeTitle",null),l([d({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=l([S("esri.layers.mixins.OperationalLayer")],t),t};var Rx;const l_=new xe({asc:"ascending",desc:"descending"});let Yd=Rx=class extends j{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Rx({field:this.field,valueExpression:this.valueExpression,order:this.order})}};l([d({type:String,json:{write:!0}})],Yd.prototype,"field",void 0),l([d({type:String,json:{write:!0}})],Yd.prototype,"valueExpression",void 0),l([d({type:l_.apiValues,json:{read:l_.read,write:l_.write}})],Yd.prototype,"order",void 0),Yd=Rx=l([S("esri.layers.support.OrderByInfo")],Yd);const xB=Yd;function yde(e,t,i){if(!e)return null;const r=e.find(s=>!!s.field);if(!r)return null;const n=new xB;return n.read(r,i),[n]}function mde(e,t,i,r){const n=e.find(s=>!!s.field);n&&Cr(i,[n.toJSON()],t)}const AB=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return l([d({type:[xB],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:yde},write:{target:"layerDefinition.orderBy",writer:mde}}})],t.prototype,"orderBy",void 0),t=l([S("esri.layers.mixins.OrderedLayer")],t),t},gde=W.getLogger("esri.layers.mixins.PortalLayer"),MB=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var i;(i=this.portalItem)==null||i.destroy(),this.portalItem=null}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new Sv({id:r.itemId,portal:n&&n.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const n=await V(()=>import("./layersLoader.540e258b.js").then(s=>s.l),["layersLoader.540e258b.js","lazyLayerLoader.c07309e4.js"],import.meta.url);return Ct(r),await n.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData},r)}catch(n){throw lr(n)||gde.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Gl(r),!0)))}async _fetchUserHasEditingPrivileges(i){const r=this.url?xt==null?void 0:xt.findCredential(this.url):null;if(!r)return!0;const n=ag.credential===r?ag.user:await this._fetchEditingUser(i);return ag.credential=r,ag.user=n,O(n)||n.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var h,f;const r=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(r)return r;const n=xt.findServerInfo(this.url);if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=ri.getDefault();if(o&&o.loaded&&Jr(o.restUrl)===Jr(s))return o.user;const a=`${s}/community/self`,u=E(i)?i.signal:null,c=await zb(ze(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?t3.fromJSON(c.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const n=r&&r.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||ri.getDefault());return n&&s&&!C6(s.restUrl,n.restUrl)?(r.messages&&r.messages.push(new P("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return l([d({type:Sv})],t.prototype,"portalItem",null),l([Z("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),l([te("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),l([d({clonable:!1})],t.prototype,"resourceReferences",void 0),l([d({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=l([S("esri.layers.mixins.PortalLayer")],t),t},ag={credential:null,user:null},xm=new me,zy=new WeakMap;function vde(e){CB(e)&&xm.push(e)}function bde(e){CB(e)&&xm.includes(e)&&xm.remove(e)}function CB(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function IB(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:IB(t,e%t):0}let u_=0,lg=0;function wde(){var t;const e=Date.now();for(const i of xm)i.refreshInterval&&e-((t=zy.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(zy.set(i,e),i.refresh(e))}Y9(()=>{const e=Date.now();let t=0;for(const i of xm)t=IB(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?zy.get(i)||zy.set(i,e):zy.delete(i);if(t!==lg){if(lg=t,clearInterval(u_),lg===0)return void(u_=0);u_=setInterval(wde,lg)}});const NB=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=DA(()=>this.hasDataChanged()),this.when().then(()=>{vde(this)},()=>{})}destroy(){bde(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Z_(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{W.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return l([d({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),l([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),l([d()],t.prototype,"refreshParameters",null),t=l([S("esri.layers.mixins.RefreshableLayer")],t),t},GM=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&_de(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return l([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),l([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),l([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=l([S("esri.layers.mixins.ScaleRangeLayer")],t),t};function _de(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Rc=Ai()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var Px;let uy=Px=class extends j{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Vse(this.value,this.unit,"milliseconds")}clone(){return new Px({value:this.value,unit:this.unit})}};l([d({type:Number,json:{write:!0},nonNullable:!0})],uy.prototype,"value",void 0),l([d({type:Rc.apiValues,json:{type:Rc.jsonValues,read:Rc.read,write:Rc.write},nonNullable:!0})],uy.prototype,"unit",void 0),uy=Px=l([S("esri.TimeInterval")],uy);const Am=uy;var $x;let Kd=$x=class extends j{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new $x({respectsDaylightSaving:e,timezone:t})}};l([d({type:Boolean,json:{write:!0}})],Kd.prototype,"respectsDaylightSaving",void 0),l([Z("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],Kd.prototype,"readRespectsDaylightSaving",null),l([d({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],Kd.prototype,"timezone",void 0),Kd=$x=l([S("esri.layers.support.TimeReference")],Kd);const Sde=Kd;var Dx;let $i=Dx=class extends j{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new Ao({start:i,end:r})}writeFullTimeExtent(e,t){e&&E(e.start)&&E(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new Am({value:t.timeInterval,unit:Rc.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new Am({value:t.defaultTimeInterval,unit:Rc.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:s,fullTimeExtent:o,trackIdField:a,useTime:u}=this;return new Dx({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:$(s),fullTimeExtent:$(o),trackIdField:a,useTime:u})}};l([d({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],$i.prototype,"cumulative",void 0),l([d({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],$i.prototype,"endField",void 0),l([d({type:Ao,json:{write:{enabled:!0,allowNull:!0}}})],$i.prototype,"fullTimeExtent",void 0),l([Z("fullTimeExtent",["timeExtent"])],$i.prototype,"readFullTimeExtent",null),l([te("fullTimeExtent")],$i.prototype,"writeFullTimeExtent",null),l([d({type:Boolean,json:{write:!0}})],$i.prototype,"hasLiveData",void 0),l([d({type:Am,json:{write:{enabled:!0,allowNull:!0}}})],$i.prototype,"interval",void 0),l([Z("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],$i.prototype,"readInterval",null),l([te("interval")],$i.prototype,"writeInterval",null),l([d({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],$i.prototype,"startField",void 0),l([d({type:Sde,json:{write:{enabled:!0,allowNull:!0}}})],$i.prototype,"timeReference",void 0),l([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],$i.prototype,"trackIdField",void 0),l([d({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],$i.prototype,"useTime",void 0),$i=Dx=l([S("esri.layers.support.TimeInfo")],$i);const RB=$i,PB=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=Rc.fromJSON(n.timeOffsetUnits);return s&&o?new Am({value:s,unit:o}):null}set timeInfo(i){m3(i,this.fieldsIndex),this._set("timeInfo",i)}};return l([d({type:Ao,json:{write:!1}})],t.prototype,"timeExtent",void 0),l([d({type:Am})],t.prototype,"timeOffset",void 0),l([Z("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),l([d({value:null,type:RB,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),l([d({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=l([S("esri.layers.mixins.TemporalLayer")],t),t};var Lx;let oa=Lx=class extends j{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:i,isUnique:r,description:n}=this;return new Lx({name:e,fields:t,isAscending:i,isUnique:r,description:n})}};l([d({constructOnly:!0})],oa.prototype,"name",void 0),l([d({constructOnly:!0})],oa.prototype,"fields",void 0),l([d({constructOnly:!0})],oa.prototype,"isAscending",void 0),l([d({constructOnly:!0})],oa.prototype,"isUnique",void 0),l([d({constructOnly:!0})],oa.prototype,"description",void 0),oa=Lx=l([S("esri.layers.support.FeatureIndex")],oa);let Kl=class extends j{constructor(){super(...arguments),this.type=null}};l([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Kl.prototype,"type",void 0),Kl=l([S("esri.layers.support.FeatureReduction")],Kl);var Ox;let Zd=Ox=class extends j{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new Ox({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};l([d({type:String,json:{write:!0}})],Zd.prototype,"statisticType",void 0),l([d({type:String,json:{write:!0}})],Zd.prototype,"onStatisticField",void 0),l([d({type:String,json:{write:!0}})],Zd.prototype,"onStatisticValueExpression",void 0),Zd=Ox=l([S("esri.layers.support.OutStatistic")],Zd);const Tde=Zd;var kx;let cy=kx=class extends j{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new kx({name:this.name,outStatistic:this.outStatistic.clone()})}};l([d({type:String,json:{write:!0}})],cy.prototype,"name",void 0),l([d({type:Tde,json:{write:!0}})],cy.prototype,"outStatistic",void 0),cy=kx=l([S("esri.layers.support.AggregateField")],cy);const $B=cy,qM="__begin__",WM="__end__",Ede=new RegExp(qM,"ig"),xde=new RegExp(WM,"ig"),o5=new RegExp("^"+qM,"i"),a5=new RegExp(WM+"$","i"),ab='"',Ade=ab+" + ",Mde=" + "+ab;function Cde(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function Ide(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function YM(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Cde(e.labelExpression),t.type="conventional"),t}function Nde(e){const t=YM(e);if(!t)return null;switch(t.type){case"conventional":return Fx(t.expression);case"arcade":return t.expression}return null}function Rde(e){const t=YM(e);if(!t)return null;switch(t.type){case"conventional":return $de(t.expression);case"arcade":return DB(t.expression)}return null}function Fx(e){let t;return e?(t=yo(e,i=>qM+'$feature["'+i+'"]'+WM),t=o5.test(t)?t.replace(o5,""):ab+t,t=a5.test(t)?t.replace(a5,""):t+ab,t=t.replace(Ede,Ade).replace(xde,Mde)):t='""',t}const Pde=/^\s*\{([^}]+)\}\s*$/i;function $de(e){const t=e.match(Pde);return t&&t[1].trim()||null}const Dde=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,Lde=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Ode=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function DB(e){if(!e)return null;let t=Dde.exec(e)||Lde.exec(e);return t?t[1]||t[3]:(t=Ode.exec(e),t?t[2]:null)}var Bx;let pl=Bx=class extends j{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?Fx(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=Fx(this.value)),e!=null&&(t[i]=e)}clone(){return new Bx({expression:this.expression,title:this.title,value:this.value})}};l([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],pl.prototype,"expression",void 0),l([Z("expression",["expression","value"])],pl.prototype,"readExpression",null),l([te("expression")],pl.prototype,"writeExpression",null),l([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],pl.prototype,"title",void 0),l([d({json:{read:!1,write:!1}})],pl.prototype,"value",void 0),pl=Bx=l([S("esri.layers.support.LabelExpressionInfo")],pl);const LB=pl,OB=[252,146,31,255],kB={type:"esriSMS",style:"esriSMSCircle",size:6,color:OB,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},FB={type:"esriSLS",style:"esriSLSSolid",width:.75,color:OB},BB={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},kde={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Fde={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Bde={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Ude={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};hu.fromJSON(kB);sn.fromJSON(FB);Ca.fromJSON(BB);const Vde=ud.fromJSON(kde),KEe=hu.fromJSON(Fde),ZEe=sn.fromJSON(Bde),JEe=Ca.fromJSON(Ude);var Ux;const ug=new xe({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function UB(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function jde(e){return(e==null?void 0:e.type)==="map-image"}function VB(e){var t,i;return!!jde(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function zde(e){return UB(e)||VB(e.layer)}let Pt=Ux=class extends j{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Vde,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=(r,n,s)=>{switch(n){case"=":return r==s;case"<>":return r!=s;case">":return r>s;case">=":return r>=s;case"<":return r<s;case"<=":return r<=s}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const n=i(t[r[0]],r[1],r[2]),s=r[3],o=i(t[r[4]],r[5],r[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=Ide(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=DB(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&UB(r))e=new LB({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(r);n.expression&&(t[i]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return YM(this)}getLabelExpressionArcade(){return Nde(this)}getLabelExpressionSingleField(){return Rde(this)}hash(){return JSON.stringify(this)}clone(){return new Ux({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:$(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:$(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};l([d({type:String,json:{write:!0}})],Pt.prototype,"name",void 0),l([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Pt.prototype,"allowOverrun",void 0),l([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],Pt.prototype,"deconflictionStrategy",void 0),l([d({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&VB(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Pt.prototype,"labelExpression",void 0),l([Z("labelExpression")],Pt.prototype,"readLabelExpression",null),l([te("labelExpression")],Pt.prototype,"writeLabelExpression",null),l([d({type:LB,json:{write:{overridePolicy:(e,t,i)=>zde(i)?{allowNull:!0}:{enabled:!1}}}})],Pt.prototype,"labelExpressionInfo",void 0),l([te("labelExpressionInfo")],Pt.prototype,"writeLabelExpressionInfo",null),l([d({type:ug.apiValues,json:{type:ug.jsonValues,read:ug.read,write:ug.write}})],Pt.prototype,"labelPlacement",void 0),l([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Pt.prototype,"labelPosition",void 0),l([d({type:Number})],Pt.prototype,"maxScale",void 0),l([te("maxScale")],Pt.prototype,"writeMaxScale",null),l([d({type:Number})],Pt.prototype,"minScale",void 0),l([te("minScale")],Pt.prototype,"writeMinScale",null),l([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],Pt.prototype,"repeatLabel",void 0),l([d({type:Number,cast:qe,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Pt.prototype,"repeatLabelDistance",void 0),l([d({types:ZJ,json:{origins:{"web-scene":{types:JJ,write:O4,default:null}},write:O4,default:null}})],Pt.prototype,"symbol",void 0),l([d({type:Boolean,json:{write:!0}})],Pt.prototype,"useCodedValues",void 0),l([d({type:String,json:{write:!0}})],Pt.prototype,"where",void 0),Pt=Ux=l([S("esri.layers.support.LabelClass")],Pt);const l0=Pt;var Vx;let ls=Vx=class extends Kl{constructor(e){super(e),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new Vx({fields:$(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:$(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:$(this.popupTemplate),renderer:$(this.renderer)})}};l([ye({binning:"binning"})],ls.prototype,"type",void 0),l([d({type:Number,json:{write:!0}})],ls.prototype,"fixedBinLevel",void 0),l([d({type:[l0],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ls.prototype,"labelingInfo",void 0),l([d(Dw)],ls.prototype,"labelsVisible",void 0),l([d($w)],ls.prototype,"popupEnabled",void 0),l([d({type:cu,json:{name:"popupInfo",write:!0}})],ls.prototype,"popupTemplate",void 0),l([d({type:[$B],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],ls.prototype,"fields",void 0),l([d({types:a0,json:{write:!0}})],ls.prototype,"renderer",void 0),ls=Vx=l([S("esri.layers.support.FeatureReductionBinning")],ls);const Hde=ls;var jx;let vr=jx=class extends j{constructor(e){super(e),this.type="cluster",this.clusterRadius=qe("80px"),this.clusterMinSize=qe("12px"),this.clusterMaxSize=qe("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new jx({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:$(this.labelingInfo),labelsVisible:this.labelsVisible,fields:$(this.fields),renderer:$(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:$(this.popupTemplate)})}};l([d({type:["cluster"],readOnly:!0,json:{write:!0}})],vr.prototype,"type",void 0),l([d({type:Number,cast:e=>e==="auto"?e:qe(e),json:{write:!0}})],vr.prototype,"clusterRadius",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],vr.prototype,"clusterMinSize",void 0),l([d({type:Number,cast:qe,json:{write:!0}})],vr.prototype,"clusterMaxSize",void 0),l([d($w)],vr.prototype,"popupEnabled",void 0),l([d({type:cu,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],vr.prototype,"popupTemplate",void 0),l([d({types:a0,json:{write:!0}})],vr.prototype,"renderer",void 0),l([d({types:YJ})],vr.prototype,"symbol",void 0),l([d({type:[l0],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],vr.prototype,"labelingInfo",void 0),l([d(Dw)],vr.prototype,"labelsVisible",void 0),l([d({type:[$B],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],vr.prototype,"fields",void 0),vr=jx=l([S("esri.layers.support.FeatureReductionCluster")],vr);const jB=vr;var zx;let L1=zx=class extends Kl{constructor(e){super(e),this.type="selection"}clone(){return new zx}};l([d({type:["selection"]})],L1.prototype,"type",void 0),L1=zx=l([S("esri.layers.support.FeatureReductionSelection")],L1);const l5=L1,u5={key:"type",base:Kl,typeMap:{selection:jB}},zB={types:{key:"type",base:Kl,typeMap:{selection:l5,cluster:jB,binning:Hde}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:u5},"portal-item":{types:u5},"web-scene":{types:{key:"type",base:Kl,typeMap:{selection:l5}}}}}},c5=new xe({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let fl=class extends Dr(j){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};l([d({json:{write:!0}})],fl.prototype,"name",void 0),l([d({json:{write:!0}})],fl.prototype,"description",void 0),l([d({json:{read:c5.read,write:c5.write}})],fl.prototype,"drawingTool",void 0),l([d({json:{write:!0}})],fl.prototype,"prototype",void 0),l([d({json:{write:!0}})],fl.prototype,"thumbnail",void 0),fl=l([S("esri.layers.support.FeatureTemplate")],fl);const Lw=fl;let Xo=class extends Dr(j){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=hM(e[i]);return t}writeDomains(e,t){var r;const i={};for(const n of Object.keys(e))e[n]&&(i[n]=(r=e[n])==null?void 0:r.toJSON());t.domains=i}};l([d({json:{write:!0}})],Xo.prototype,"id",void 0),l([d({json:{write:!0}})],Xo.prototype,"name",void 0),l([d({json:{write:!0}})],Xo.prototype,"domains",void 0),l([Z("domains")],Xo.prototype,"readDomains",null),l([te("domains")],Xo.prototype,"writeDomains",null),l([d({type:[Lw],json:{write:!0}})],Xo.prototype,"templates",void 0),Xo=l([S("esri.layers.support.FeatureType")],Xo);const KM=Xo;function Gde(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function d5(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function h5(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class qde{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const i=[];for(const r of t){const n=r&&r.name;if(n){const s=p5(n);this._fieldsMap.set(n,r),this._fieldsMap.set(s,r),i.push(s),Gde(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):v3(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),d5(r)||h5(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)d5(t)||h5(t)||t.nullable||_Z(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(p5(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name}}function p5(e){return e.toLowerCase().trim()}const Wde=W.getLogger("esri.layers.support.fieldProperties");function HB(){return{fields:{type:[Qm],value:null},fieldsIndex:{readOnly:!0,get(){return new qde(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||Wde.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return HL(this.fieldsIndex,e)}}}}let Jd=class extends Dr(j){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};l([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Jd.prototype,"shapeAreaField",void 0),l([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Jd.prototype,"shapeLengthField",void 0),l([d({type:String,json:{read:e=>HX.read(e)||GX.read(e)}})],Jd.prototype,"units",void 0),Jd=l([S("esri.layers.support.GeometryFieldsInfo")],Jd);const Yde=Jd,Kde=/\[([^\[\]]+)\]/gi;function Hx(e,t,i){return e?e.map(r=>{const n=new l0;if(n.read(r,i),n.labelExpression){const s=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replace(Kde,(o,a)=>`[${Zde(a,s)}]`)}return n}):null}function Zde(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const n=t[r].name;if(n.toLowerCase()===i)return n}return e}var Gx;let Xd=Gx=class extends j{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new me}clone(){return new Gx({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};l([d({type:String,json:{write:!0}})],Xd.prototype,"floorField",void 0),l([d({json:{read:!1,write:!1}})],Xd.prototype,"viewAllMode",void 0),l([d({json:{read:!1,write:!1}})],Xd.prototype,"viewAllLevelIds",void 0),Xd=Gx=l([S("esri.layers.support.LayerFloorInfo")],Xd);const Jde=Xd,f5=new xe({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),y5=new xe({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let bn=class extends Dr(j){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};l([d({json:{read:f5.read,write:f5.write}})],bn.prototype,"cardinality",void 0),l([d({json:{read:!0,write:!0}})],bn.prototype,"composite",void 0),l([d({json:{read:!0,write:!0}})],bn.prototype,"id",void 0),l([d({json:{read:!0,write:!0}})],bn.prototype,"keyField",void 0),l([d({json:{read:!0,write:!0}})],bn.prototype,"keyFieldInRelationshipTable",void 0),l([d({json:{read:!0,write:!0}})],bn.prototype,"name",void 0),l([d({json:{read:!0,write:!0}})],bn.prototype,"relatedTableId",void 0),l([d({json:{read:!0,write:!0}})],bn.prototype,"relationshipTableId",void 0),l([d({json:{read:y5.read,write:y5.write}})],bn.prototype,"role",void 0),bn=l([S("esri.layers.support.Relationship")],bn);const Xde=bn,us=[];function Qde(e,t){if(mB(e.url))return!0;const{wkid:i}=t;for(const r of us){if(e.version>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}us.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),us.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),us.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),us.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),us.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),us.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),us.push([10.61,()=>new Set([102497])]),us.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),us.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),us.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function ehe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await zb(r.populateFromStyle());if(Ct(i),n.ok===!1){const s=n.error;t&&t.messages&&t.messages.push(new ur("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t.origin)}}}const the=["oid","global-id"],ihe=["oid","global-id","guid"];function GB({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=lhe({editFieldsInfo:t,fields:i,objectIdField:r},s);if(!o.length)return null;const a=dhe({titleBase:n,fields:i,displayField:e}),u=che();return new cu({title:a,content:u,fieldInfos:o})}const rhe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],nhe=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!qB(e.name,t)&&(!i||e.name!==i)&&!the.includes(e.type)&&!rhe.some(n=>n.test(e.name));function she(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort(ohe),e}function ohe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:m5(e)?-1:m5(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function qB(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),n&&n.toLowerCase(),s&&s.toLowerCase()].includes(e.toLowerCase())}function ahe(e,t){return e.editable&&!ihe.includes(e.type)&&!qB(e.name,t)}function lhe({editFieldsInfo:e,fields:t,objectIdField:i},r){return she(t,(r==null?void 0:r.ignoreFieldTypes)||hhe).map(n=>new zm({fieldName:n.name,isEditable:ahe(n,e),label:n.alias,format:uhe(n),visible:nhe(n,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function uhe(e){switch(e.type){case"small-integer":case"integer":case"single":return new hh({digitSeparator:!0,places:0});case"double":return new hh({digitSeparator:!0,places:2});case"date":return new hh({dateFormat:"long-month-day-year"});default:return e.type==="string"&&ZL(e.name)?new hh({digitSeparator:!0,places:0}):null}}function che(){return[new Qh,new am]}function dhe(e){const t=mZ(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i}function m5(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const hhe=["geometry","blob","raster","guid","xml"],c_=new xe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),phe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Rt="FeatureLayer",g5=W.getLogger("esri.layers.FeatureLayer");function cg(e,t){return new P("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function v5(e){return e&&e instanceof me}function _e(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function dg(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function fhe(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function df(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}const d_=HB();function h_(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let q=class extends vB(jM(AB(PB(GM(NB(gB(HM(MB(Rw(zM(hB(Dr(Jh))))))))))))){constructor(...e){super(...e),this._handles=new Mi,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=we.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(me.ofType(oa)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=En(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=E(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(r=>this._initLayerProperties(r)));const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Gl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstLayerId(t);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new P("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{analytics:this._readAnalyticsCapabilities(t),attachment:this._readAttachmentCapabilities(t),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),queryTopFeatures:this._readQueryTopFeaturesCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&Cr(i,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}get parsedUrl(){const e=this.url?ut(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=vo(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=vo(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){Av(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const r=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(r){const n=sB(r,t,i)||void 0;return n||g5.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),n}if(t.defaultSymbol)return t.types&&t.types.length?new FM({defaultSymbol:p_(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:p_(n.symbol,n,i)}))}):new kM({symbol:p_(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(v5(t)&&this._resetMemorySource(t),v5(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof me?new sa({layer:this,items:e}):e:null}readSource(e,t){const i=t0.fromJSON(t.featureSet);return new sa({layer:this,items:i&&i.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e=e&&e.map(s=>Lw.fromJSON(s)),this._fixTemplates(e,r),this._fixTemplates(e,n),e}readTitle(e,t){const i=t.layerDefinition&&t.layerDefinition.name||t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const n=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?ede(this.url,i):i;let s=i;if(!s&&this.url){const o=lp(this.url);E(o)&&(s=o.title)}return s?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==s&&(s=n+" - "+s),VM(s)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e&&e.map(s=>(s=KM.fromJSON(s),this._fixTemplates(s.templates,r),this._fixTemplates(s.templates,n),s))}set url(e){const t=ide({layer:this,url:e,nonStandardUrlAllowed:!0,logger:g5});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,i,r){rde(this,e,null,t,r)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new P(Rt,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,i){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new P(Rt,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,i)})}async applyEdits(e,t){const i=await V(()=>import("./editingSupport.d5502ac1.js"),[],import.meta.url);return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return GB(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await ZH(V(()=>import("./FeatureLayerSource.ed0b25c5.js"),["FeatureLayerSource.ed0b25c5.js","executeForIds.c1c247fe.js"],import.meta.url),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new tr,t=this.get("capabilities.data"),i=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"];const r=E(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,n=$ce(this.definitionExpression,r);e.where=n||"1=1";const{timeOffset:s,timeExtent:o}=this;return e.timeExtent=s!=null&&o!=null?o.offset(-s.value,s.unit):o||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new P(Rt,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new P(Rt,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let n=null;return i.some(s=>{const{id:o}=s;return o!=null&&(o.toString()===r.toString()&&(n=s),!!n)}),n}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const n=r.domains&&r.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=iE.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new P(Rt,"this layer doesn't support attachments");const{attachmentTypes:i,objectIds:r,globalIds:n,num:s,size:o,start:a,where:u}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const c=r&&r.length>1,h=i&&i.length,f=n&&n.length,y=o&&o.length;if(c||h||f||y||s||a||u)throw new P(Rt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||u))throw new P(Rt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new P(Rt,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(tr.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(tr.from(e)||this.createQuery(),t);throw new P(Rt,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(tr.from(e)||this.createQuery(),t);throw new P(Rt,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(tr.from(e)||this.createQuery(),t);throw new P(Rt,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(ME.from(e),t);throw new P(Rt,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(ME.from(e),t);throw new P(Rt,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(Y0.from(e),t).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i});throw new P(Rt,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(Y0.from(e),t);throw new P(Rt,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(Y0.from(e),t);throw new P(Rt,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(Y0.from(e),t);throw new P(Rt,"Layer source does not support queryFeatureCount capability")})}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var s;t={...t,writeLayerSchema:(s=t==null?void 0:t.writeLayerSchema)!=null?s:this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:n}=t;if(this.dynamicDataSource)return n==null||n.push(cg(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return n==null||n.push(cg(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return n==null||n.push(cg(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return n==null||n.push(cg(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new P(Rt,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||Qde(this,e))}async save(e){return(await V(()=>import("./featureLayerUtils.4bacec67.js"),["featureLayerUtils.4bacec67.js","originUtils.68552ec1.js","multiOriginJSONSupportUtils.8128aa52.js","arcgisLayers.2720651a.js","lazyLayerLoader.c07309e4.js","portalItemUtils.a754404a.js"],import.meta.url)).save(this,e)}async saveAs(e,t){return(await V(()=>import("./featureLayerUtils.4bacec67.js"),["featureLayerUtils.4bacec67.js","originUtils.68552ec1.js","multiOriginJSONSupportUtils.8128aa52.js","arcgisLayers.2720651a.js","lazyLayerLoader.c07309e4.js","portalItemUtils.a754404a.js"],import.meta.url)).saveAs(this,e,t)}_readEditingEnabled(e,t,i){var n;let r=(n=e.layerDefinition)==null?void 0:n.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var n,s;if(!e){const o=(s=(n=this.capabilities)==null?void 0:n.operations)!=null&&s.supportsSync?"Query,Sync":"Query";Cr("layerDefinition.capabilities",o,t),i&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=o)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:i}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[i]?void 0:Promise.reject(new P(Rt,`feature is missing the identifying attribute ${i}`)):Promise.reject(new P(Rt,"'attributes' are required on a feature to query attachments")):Promise.reject(new P(Rt,"A feature is required to add/delete/update attachments")):Promise.reject(new P(Rt,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return ze(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Av(this.renderer,this.fieldsIndex),m3(this.timeInfo,this.fieldsIndex),ehe(this,{origin:"service"})}async hasDataChanged(){var e,t;if((e=this.source)!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await((t=this.source)==null?void 0:t.refresh());if(E(r)&&(this.sourceJSON={...this.sourceJSON,...r},this.read(r,{origin:"service",url:this.parsedUrl})),i)return!0}catch{}if(this.definitionExpression)try{return(await Pce(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){var t;const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((t=this.fields)==null?void 0:t.some(i=>i.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new P("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new P("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(e){return{supportsCacheHint:df(e.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:df(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:_e(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const n=phe[r.name];n&&(i[n]=!!r.isEnabled)}),i}_readDataCapabilities(e){return{isVersioned:_e(e,"isDataVersioned",!1),supportsAttachment:_e(e,"hasAttachments",!1),supportsM:_e(e,"hasM",!1),supportsZ:_e(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:_e(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const i=e?e.toLowerCase().split(",").map(f=>f.trim()):[],r=this.url?lp(this.url):null,n=i.includes(E(r)&&r.serverType==="MapServer"?"data":"query"),s=i.includes("editing")&&!t.datesInUnknownTimezone;let o=s&&i.includes("create"),a=s&&i.includes("delete"),u=s&&i.includes("update");const c=i.includes("changetracking"),h=t.advancedQueryCapabilities;return s&&!(o||a||u)&&(o=a=u=!0),{supportsCalculate:_e(t,"supportsCalculate",!1),supportsTruncate:_e(t,"supportsTruncate",!1),supportsValidateSql:_e(t,"supportsValidateSql",!1),supportsAdd:o,supportsDelete:a,supportsEditing:s,supportsChangeTracking:c,supportsQuery:n,supportsQueryAnalytics:_e(h,"supportsQueryAnalytic",!1),supportsQueryAttachments:_e(h,"supportsQueryAttachments",!1),supportsQueryTopFeatures:_e(h,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:_e(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:_e(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var u;const t=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,r=e.archivingInfo,n=(u=this.url)==null?void 0:u.includes("MapServer"),s=!F("mapserver-pbf-enabled")&&n&&this.version<10.81,o=mB(this.url),a=(e.supportedQueryFormats||"").split(",").reduce((c,h)=>{const f=h.toLowerCase().trim();return f&&c.add(f),c},new Set);return{supportsStatistics:_e(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:_e(t,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:_e(t,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:fhe(t),supportsCentroid:_e(t,"supportsReturningGeometryCentroid",!1),supportsDistance:_e(t,"supportsQueryWithDistance",!1),supportsDistinct:_e(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:_e(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:_e(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:_e(t,"supportsHavingClause",!1),supportsOrderBy:_e(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:_e(t,"supportsPagination",!1),supportsQuantization:_e(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:_e(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:_e(e,"supportsReturningQueryGeometry",!1),supportsResultType:_e(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:_e(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:_e(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:_e(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:_e(t,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:_e(i,"allowOthersToQuery",!0),supportsHistoricMoment:_e(r,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!s&&a.has("pbf"),supportsDisjointSpatialRelationship:_e(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:_e(t,"supportsQueryWithCacheHint",!1)||df(t,"query"),supportsDefaultSpatialReference:_e(t,"supportsDefaultSR",!1),supportsCompactGeometry:o,maxRecordCountFactor:dg(e,"maxRecordCountFactor",void 0),maxRecordCount:dg(e,"maxRecordCount",void 0),standardMaxRecordCount:dg(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:dg(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,i=_e(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:_e(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:df(t,"queryRelated")}}_readQueryTopFeaturesCapabilities(e){return{supportsCacheHint:df(e.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:_e(e,"allowGeometryUpdates",!0),supportsGlobalId:_e(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:_e(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:_e(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:_e(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:_e(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:_e(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:_e(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:_e(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:_e(t,"allowOthersToUpdate",!0)}}};l([d({readOnly:!0,json:{read:!1}})],q.prototype,"capabilities",void 0),l([Z("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],q.prototype,"readCapabilities",null),l([d({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],q.prototype,"charts",void 0),l([d({readOnly:!0})],q.prototype,"createQueryVersion",null),l([d({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],q.prototype,"copyright",void 0),l([d({type:Boolean})],q.prototype,"datesInUnknownTimezone",void 0),l([d({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],q.prototype,"displayField",void 0),l([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],q.prototype,"definitionExpression",void 0),l([d({types:Lc,readOnly:!0})],q.prototype,"defaultSymbol",void 0),l([d({type:ys})],q.prototype,"dynamicDataSource",void 0),l([d({readOnly:!0})],q.prototype,"editFieldsInfo",void 0),l([d({type:Boolean})],q.prototype,"editingEnabled",null),l([Z(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],q.prototype,"readEditingEnabled",null),l([Z("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],q.prototype,"readEditingEnabledFromWebMap",null),l([te(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],q.prototype,"writeEditingEnabled",null),l([te("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],q.prototype,"writeEditingEnabledToWebMap",null),l([d({readOnly:!0})],q.prototype,"editingInfo",void 0),l([Z("editingInfo")],q.prototype,"readEditingInfo",null),l([d((()=>{const e=$(SB),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],q.prototype,"elevationInfo",void 0),l([d(zB)],q.prototype,"featureReduction",void 0),l([d({...d_.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:h_}}}}})],q.prototype,"fields",void 0),l([d(d_.fieldsIndex)],q.prototype,"fieldsIndex",void 0),l([d({type:Jde,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],q.prototype,"floorInfo",void 0),l([d({type:Gce,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],q.prototype,"formTemplate",void 0),l([d({type:Ue,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],q.prototype,"fullExtent",void 0),l([d()],q.prototype,"gdbVersion",void 0),l([d({readOnly:!0,type:Yde,json:{read:{source:"geometryProperties"}}})],q.prototype,"geometryFieldsInfo",void 0),l([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:c_.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:h_,writer(e,t,i){const r=e?c_.toJSON(e):null;r&&Cr(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:c_.read}}})],q.prototype,"geometryType",void 0),l([d({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],q.prototype,"hasM",void 0),l([d({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],q.prototype,"hasZ",void 0),l([d({readOnly:!0,type:Pw})],q.prototype,"heightModelInfo",void 0),l([d({type:Date})],q.prototype,"historicMoment",void 0),l([d(TB)],q.prototype,"id",void 0),l([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],q.prototype,"infoFor3D",void 0),l([d({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],q.prototype,"isTable",void 0),l([Z("service","isTable",["type","geometryType"]),Z("isTable",["layerDefinition.type","layerDefinition.geometryType"])],q.prototype,"readIsTable",null),l([te("web-map","isTable")],q.prototype,"writeIsTable",null),l([d(Dw)],q.prototype,"labelsVisible",void 0),l([d({type:[l0],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Hx},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Hx},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],q.prototype,"labelingInfo",void 0),l([d((()=>{const e=$(hde);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){Cr(r,Jb(t),i)}}},e})())],q.prototype,"opacity",void 0),l([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],q.prototype,"layerId",void 0),l([d(_B)],q.prototype,"legendEnabled",void 0),l([d({type:["show","hide"],json:(()=>{const e=$(EB.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],q.prototype,"listMode",void 0),l([d(pde)],q.prototype,"minScale",void 0),l([Z("service","minScale",["minScale","effectiveMinScale"])],q.prototype,"readMinScale",null),l([d(fde)],q.prototype,"maxScale",void 0),l([Z("service","maxScale",["maxScale","effectiveMaxScale"])],q.prototype,"readMaxScale",null),l([d({type:String})],q.prototype,"globalIdField",void 0),l([Z("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Z("service","globalIdField",["globalIdField","fields"])],q.prototype,"readGlobalIdFieldFromService",null),l([d({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:h_}}}}})],q.prototype,"objectIdField",void 0),l([Z("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Z("service","objectIdField",["objectIdField","fields"])],q.prototype,"readObjectIdFieldFromService",null),l([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],q.prototype,"operationalLayerType",void 0),l([d(d_.outFields)],q.prototype,"outFields",void 0),l([d({readOnly:!0})],q.prototype,"parsedUrl",null),l([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],q.prototype,"path",void 0),l([d($w)],q.prototype,"popupEnabled",void 0),l([d({type:cu,json:{name:"popupInfo",write:!0}})],q.prototype,"popupTemplate",void 0),l([d({readOnly:!0})],q.prototype,"defaultPopupTemplate",null),l([d({type:[Xde],readOnly:!0})],q.prototype,"relationships",void 0),l([d({types:a0,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:nB,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],q.prototype,"renderer",null),l([Z("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Z("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],q.prototype,"readRenderer",null),l([d()],q.prototype,"sourceJSON",void 0),l([d({type:Boolean})],q.prototype,"returnM",void 0),l([d({type:Boolean})],q.prototype,"returnZ",void 0),l([d((()=>{const e=$(bB);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],q.prototype,"screenSizePerspectiveEnabled",void 0),l([d({clonable:!1})],q.prototype,"source",null),l([je("source")],q.prototype,"castSource",null),l([Z("portal-item","source",["featureSet"]),Z("web-map","source",["featureSet"])],q.prototype,"readSource",null),l([d({readOnly:!0})],q.prototype,"serviceDefinitionExpression",void 0),l([Z("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],q.prototype,"readServiceDefinitionExpression",null),l([d({type:we,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],q.prototype,"spatialReference",void 0),l([d({type:Number})],q.prototype,"subtypeCode",void 0),l([d({type:String,json:{origins:{service:{read:!0}}}})],q.prototype,"subtypeField",void 0),l([d({type:[Lw]})],q.prototype,"templates",void 0),l([Z("templates",["editFieldsInfo","creatorField","editorField","templates"])],q.prototype,"readTemplates",null),l([d({type:RB})],q.prototype,"timeInfo",void 0),l([d()],q.prototype,"title",void 0),l([Z("service","title",["name"]),Z("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],q.prototype,"readTitle",null),l([Z("web-map","title",["layerDefinition.name","title"])],q.prototype,"readTitleFromWebMap",null),l([d({type:String})],q.prototype,"sublayerTitleMode",void 0),l([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],q.prototype,"trackIdField",void 0),l([d({json:{read:!1}})],q.prototype,"type",void 0),l([d({type:String})],q.prototype,"typeIdField",void 0),l([Z("service","typeIdField"),Z("typeIdField",["layerDefinition.typeIdField"])],q.prototype,"readTypeIdField",null),l([d({type:[KM]})],q.prototype,"types",void 0),l([Z("service","types",["types"]),Z("types",["layerDefinition.types"])],q.prototype,"readTypes",null),l([d({readOnly:!0,json:{write:!1}})],q.prototype,"serverGens",void 0),l([d({type:me.ofType(oa),readOnly:!0})],q.prototype,"indexes",void 0),l([d(wB)],q.prototype,"url",null),l([te("url")],q.prototype,"writeUrl",null),l([d({readOnly:!0})],q.prototype,"userIsAdmin",void 0),l([d({json:{origins:{service:{read:!0}},read:!1}})],q.prototype,"version",void 0),l([Z("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],q.prototype,"readVersion",null),l([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],q.prototype,"visible",void 0),l([Z("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],q.prototype,"readVisible",null),q=l([S("esri.layers.FeatureLayer")],q);const p_=wp({types:jO}),WB=q,XEe=Object.freeze(Object.defineProperty({__proto__:null,default:WB},Symbol.toStringTag,{value:"Module"})),yhe=["$datastore","$map","$layer","$aggregatedfeatures"],mhe="esri.widgets.Feature.support.arcadeFeatureUtils",ghe=W.getLogger(mhe);function vhe(e){return typeof e=="string"?Jm(iM(e)):Array.isArray(e)?bhe(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?whe(e):e}function bhe(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?Jm(iM(t)):t}</li>`).join("")}</ul>`}function whe(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?Jm(iM(i)):i}</td></tr>`}).join("")}</table>`}function _he({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:n,map:s,graphic:o,interceptor:a}){i.forEach(u=>{const c=u.toLowerCase(),h={map:s,spatialReference:n.sr,interceptor:a};if(c==="$map"&&(r.vars[c]=t.convertMapToFeatureSetCollection(h)),c==="$layer"&&(r.vars[c]=t.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:n.sr,interceptor:a})),c==="$datastore"&&(r.vars[c]=t.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:n.sr,interceptor:a})),c==="$aggregatedfeatures"){const f=o.layer,{fields:y,objectIdField:m,geometryType:g,spatialReference:v,displayField:b}=f,w=new WB({fields:y,objectIdField:m,geometryType:g,spatialReference:v,displayField:b,...f.type==="feature"?{templates:f.templates,typeIdField:f.typeIdField,types:f.types}:null,source:e});r.vars[c]=t.convertFeatureLayerToFeatureSet({layer:w,spatialReference:n.sr,interceptor:a})}})}function YB(){return V(()=>import("./arcadeUtils.ae06eee0.js").then(e=>e.t),[],import.meta.url)}async function She({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||(t==null?void 0:t.type)!=="2d")return[];const n=await t.whenLayerView(r);if(!n.createQuery||!n.queryFeatures)return[];const s=n.createQuery();s.aggregateIds=[e.getObjectId()];const{features:o}=await n.queryFeatures(s);return o}async function KB({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:n,graphic:s,view:o}){if(!e||!e.expression)return null;const a=t.createSyntaxTree(e.expression),u=yhe.filter(m=>t.hasVariable(a,m)),[c]=await Promise.all([She({graphic:s,view:o}),t.loadScriptDependencies(a,!0,u)]),h=t.getViewInfo({spatialReference:r}),f=t.createExecContext(s,h);f.interceptor=i,f.useAsync=!0,_he({aggregatedFeatures:c,arcadeUtils:t,featureSetVars:u,context:f,viewInfo:h,map:n,graphic:s,interceptor:i});const y=t.createFunction(a,f);return t.executeAsyncFunction(y,f).catch(m=>ghe.error("arcade-execution-error",{error:m,graphic:s,expressionInfo:e}))}async function The({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:n,view:s}){if(!e||!e.length)return{};const o=await YB(),a={};for(const h of e)a[`expression/${h.name}`]=KB({expressionInfo:h,arcadeUtils:o,interceptor:r,spatialReference:t,map:n,graphic:i,view:s});const u=await di(a),c={};for(const h in u)c[h]=vhe(u[h].value);return c}const Ehe=1;let zr=class extends uu(ce){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var r,n;const t=(r=this.contentElement)==null?void 0:r.type;(n=this.contentElementViewModel)==null||n.destroy();const i=t==="fields"?new dw:t==="media"?new Nc:t==="text"?new Kv:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=K3(this._compile,Ehe,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:r,spatialReference:n,map:s,view:o,_abortController:a}=this;if(!(t&&i&&n&&s))return void this._set("contentElement",null);const u=await YB();if(a!==this._abortController)return;const c=await KB({arcadeUtils:u,expressionInfo:t,graphic:i,interceptor:r,map:s,spatialReference:n,view:o});if(!c||c.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const h=await NM(c,a.signal),f=h==null?void 0:h.type,y=f==="media"?cm.fromJSON(h):f==="text"?ep.fromJSON(h):f==="fields"?Qh.fromJSON(h):null;this._set("contentElement",y)},this.handles.add([Y(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),We),Y(()=>[this.contentElement],()=>this._createVM(),We)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};l([d()],zr.prototype,"_abortController",void 0),l([d({type:JL})],zr.prototype,"expressionInfo",void 0),l([d({type:zi})],zr.prototype,"graphic",void 0),l([d({readOnly:!0})],zr.prototype,"contentElement",void 0),l([d({readOnly:!0})],zr.prototype,"contentElementViewModel",void 0),l([d()],zr.prototype,"interceptor",void 0),l([d()],zr.prototype,"spatialReference",null),l([d({readOnly:!0})],zr.prototype,"state",null),l([d()],zr.prototype,"map",null),l([d()],zr.prototype,"view",void 0),zr=l([S("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],zr);const ZM=zr,hg={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let O1=class extends Ci{constructor(e,t){super(e,t),this.viewModel=new ZM}initialize(){this.own(Y(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),We))}destroy(){this._destroyContentWidget()}renderLoading(){return N("div",{key:"loading-container",class:hg.loadingSpinnerContainer},N("span",{class:this.classes(hg.iconLoading,hg.spinner)}))}render(){var t;const{state:e}=this.viewModel;return N("div",{class:hg.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const r=e?i==="fields"?new $7({viewModel:e}):i==="media"?new vk({viewModel:e}):i==="text"?new y1({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};l([d({type:ZM})],O1.prototype,"viewModel",void 0),O1=l([S("esri.widgets.Feature.FeatureExpression")],O1);const xhe=O1;class Ahe{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}}var k1;const Mhe=1,b5="content-view-models",ZB="esri.widgets.FeatureViewModel",Che=W.getLogger(ZB),w5={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let gt=k1=class extends ce{constructor(e){super(e),this._handles=new Mi,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=K3(this._graphicChanged,Mhe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...w5},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent},this._handles.add(Y(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),We))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return E(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return mre(hR(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return b7(this.graphic)}castAbilities(e){return{...w5,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof Nc&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof Nc&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof Nc&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){lr(i)||(this._error=i,Che.error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new ep({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(b5),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:r,contentElementViewModel:n}=e,s=r==null?void 0:r.type;n&&s&&(s==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,t))),s==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createMediaVMParams(r,t))),s==="text"&&n.set(this._createTextVMParams(r)))}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:n,spatialReference:s,view:o}=this,a=new ZM({expressionInfo:i,graphic:r,interceptor:k1.interceptor,map:n,spatialReference:s,view:o});return this.contentViewModels[t]=a,this._handles.add(Y(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,t),We),b5),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:n}=e;return this.contentViewModels[t]=new nM({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:n}=e;return this.contentViewModels[t]=new Kv({graphic:i,creator:r,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:s,_expressionAttributes:o}=this,{attributes:a}=n,u=s.global;return{title:Cc({attributes:a,fieldInfoMap:i,globalAttributes:u,expressionAttributes:o,layer:r,text:e}),description:Cc({attributes:a,fieldInfoMap:i,globalAttributes:u,expressionAttributes:o,layer:r,text:t})}}_createFieldsVMParams(e,t){var c;const{_effectivePopupTemplate:i,formattedAttributes:r}=this,n={...r.global,...r.content[t]},s=(c=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:c.filter(({fieldName:h})=>_7(h)||da(h)||n.hasOwnProperty(h)),o=i==null?void 0:i.expressionInfos,{description:a,title:u}=e;return{attributes:n,expressionInfos:o,fieldInfos:s,...this._compileTitleAndDesc({title:u,description:a})}}_compileFields(e,t){const i=e.clone(),r=new dw(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:n,formattedAttributes:s,_effectivePopupTemplate:o,relatedInfos:a,_sourceLayer:u,_expressionAttributes:c}=this,{attributes:h}=r,{description:f,mediaInfos:y,title:m}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:h,layer:u,fieldInfoMap:n,formattedAttributes:{...s.global,...s.content[t]},expressionAttributes:c,mediaInfos:y,popupTemplate:o,relatedInfos:a,...this._compileTitleAndDesc({title:m,description:f})}}_compileMedia(e,t){const i=e.clone(),r=new Nc(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(e&&e.text){const{attributes:s}=t,o=this.formattedAttributes.global;e.text=Cc({attributes:s,fieldInfoMap:i,globalAttributes:o,expressionAttributes:n,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new Kv(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,n=t==null?void 0:t.editFieldsInfo;return r&&n?yre(n,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,{attributes:s}=r,o=this.formattedAttributes.global;return Cc({attributes:s,fieldInfoMap:t,globalAttributes:o,expressionAttributes:n,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return Wv(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return Wv(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n,spatialReference:s,map:o,view:a}=this,{content:{value:u},title:{value:c}}=await di({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!r)return;await bre({graphic:r,popupTemplate:n,layer:i,spatialReference:s},e);const{expressionAttributes:{value:h}}=await di({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:The({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:s,graphic:r,map:o,interceptor:k1.interceptor,view:a})});t===this._featureAbortController&&r&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...r.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(u)),this._set("title",this._compileTitle(c)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(u)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:u}=this;i.content[t]=C2({fieldInfos:r==null?void 0:r.fieldInfos,graphic:n,attributes:{...u,...e.attributes},layer:o,fieldInfoMap:a,relatedInfos:s})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;i.content[t]=C2({fieldInfos:e.fieldInfos,graphic:r,attributes:{...a,...e.attributes},layer:s,fieldInfoMap:o,relatedInfos:n})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:s,_graphicExpressionAttributes:o}=this,a=t==null?void 0:t.fieldInfos,u={global:C2({fieldInfos:a,graphic:i,attributes:o,layer:n,fieldInfoMap:s,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((c,h)=>{c.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:c,contentElementIndex:h,formattedAttributes:u}),c.type==="media"&&this._createMediaFormattedAttributes({contentElement:c,contentElementIndex:h,formattedAttributes:u})}),u}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,hR(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const s=E(n.associatedLayer)?await n.associatedLayer.load(i):n;if(!s)return;const o=t.filter(c=>c&&da(c.fieldName));if(!o||!o.length)return;t.forEach(c=>this._configureRelatedInfo(c,s));const a=await moe({relatedInfos:r,layer:s},i);Object.keys(a).forEach(c=>{var y;const h=r.get(c.toString()),f=(y=a[c])==null?void 0:y.value;h&&f&&(h.layerInfo=f.data)});const u=await goe({graphic:e,relatedInfos:r,layer:s},i);Object.keys(u).forEach(c=>{var h;doe((h=u[c])==null?void 0:h.value,r.get(c.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=NE(e.fieldName);if(!r)return;const{layerId:n,fieldName:s}=r;if(!n)return;const o=i.get(n.toString())||coe(n,t);o&&(voe({relatedInfo:o,fieldName:s,fieldInfo:e}),this.relatedInfos.set(n,o))}};gt.interceptor=new Ahe(Sre,Tre),l([d()],gt.prototype,"_error",void 0),l([d()],gt.prototype,"_featureAbortController",void 0),l([d({readOnly:!0})],gt.prototype,"_effectivePopupTemplate",null),l([d({readOnly:!0})],gt.prototype,"_fieldInfoMap",null),l([d({readOnly:!0})],gt.prototype,"_sourceLayer",null),l([d()],gt.prototype,"abilities",void 0),l([je("abilities")],gt.prototype,"castAbilities",null),l([d({readOnly:!0})],gt.prototype,"content",void 0),l([d({readOnly:!0})],gt.prototype,"contentViewModels",void 0),l([d({type:Boolean})],gt.prototype,"defaultPopupTemplateEnabled",void 0),l([d({readOnly:!0})],gt.prototype,"state",null),l([d({readOnly:!0})],gt.prototype,"formattedAttributes",void 0),l([d({type:zi,value:null})],gt.prototype,"graphic",null),l([d({readOnly:!0})],gt.prototype,"lastEditInfo",void 0),l([d({readOnly:!0})],gt.prototype,"relatedInfos",void 0),l([d()],gt.prototype,"spatialReference",null),l([d({readOnly:!0})],gt.prototype,"title",void 0),l([d()],gt.prototype,"map",null),l([d({readOnly:!0})],gt.prototype,"waitingForContent",null),l([d()],gt.prototype,"view",void 0),gt=k1=l([S(ZB)],gt);const JM=gt,JB=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>P7(i)&&!i.destroyed?N("div",{key:i},i.render()):i instanceof HTMLElement?N("div",{key:i,bind:i,afterCreate:this._attachToNode}):Vre(i)?N("div",{key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=l([S("esri.widgets.Feature.ContentMixin")],t),t},yi={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},_5={title:!0,content:!0,lastEditedInfo:!0};let mi=class extends JB(Ci){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={..._5},this.map=null,this.view=null,this.viewModel=new JM}initialize(){this.own(Y(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),We))}loadDependencies(){return V(()=>import("./calcite-notice.6bc99ca5.js"),[],import.meta.url)}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{..._5,...e}}render(){const{state:e}=this.viewModel,t=N("div",{class:yi.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return N("div",{class:this.classes(yi.base,yi.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return N("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?N("div",{key:"error-title",slot:"title"},e.errorMessage):null,N("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return N("div",{key:"loading-container",class:yi.loadingSpinnerContainer},N("span",{class:this.classes(yi.iconLoading,yi.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?N("div",{class:yi.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?N(sM,{level:this.headingLevel,class:yi.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?N("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:N("div",{key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?N("div",{key:this._buildKey("attachments-element",e),class:this.classes(yi.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:N("div",{key:this._buildKey("expression-element",e),class:yi.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?N("div",{key:this._buildKey("custom-element",t),class:yi.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:N("div",{key:this._buildKey("fields-element",e),class:yi.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:N("div",{key:this._buildKey("media-element",e),class:yi.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:n}=i,s=i.type==="edit"?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=ds(s,{date:r,user:n});return N("div",{key:"edit-info-element",class:this.classes(yi.lastEditedInfo,yi.contentElement)},o)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?N("div",{key:this._buildKey("text-element",t),class:this.classes(yi.contentElement,yi.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((n,s)=>{n.type==="attachments"&&(this._contentWidgets[s]=new $re({displayType:n.displayType,headingLevel:t.title?e+1:e,viewModel:r[s]})),n.type==="fields"&&(this._contentWidgets[s]=new $7({viewModel:r[s]})),n.type==="media"&&(this._contentWidgets[s]=new vk({viewModel:r[s]})),n.type==="text"&&(this._contentWidgets[s]=new y1({viewModel:r[s]})),n.type==="custom"&&(this._contentWidgets[s]=new y1({viewModel:r[s]})),n.type==="expression"&&(this._contentWidgets[s]=new xhe({viewModel:r[s]}))},this);else{const n=r[0];n&&!n.destroyed&&(this._contentWidgets[0]=new y1({viewModel:n}))}this.scheduleRender()}};l([X("viewModel.graphic")],mi.prototype,"graphic",void 0),l([X("viewModel.defaultPopupTemplateEnabled")],mi.prototype,"defaultPopupTemplateEnabled",void 0),l([d()],mi.prototype,"headingLevel",void 0),l([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],mi.prototype,"label",void 0),l([d(),Si("esri/widgets/Feature/t9n/Feature")],mi.prototype,"messages",void 0),l([d(),Si("esri/t9n/common")],mi.prototype,"messagesCommon",void 0),l([d(),Si("esri/widgets/support/t9n/uriUtils")],mi.prototype,"messagesURIUtils",void 0),l([X("viewModel.spatialReference")],mi.prototype,"spatialReference",void 0),l([X("viewModel.title")],mi.prototype,"title",void 0),l([d()],mi.prototype,"visibleElements",void 0),l([je("visibleElements")],mi.prototype,"castVisibleElements",null),l([X("viewModel.map")],mi.prototype,"map",void 0),l([X("viewModel.view")],mi.prototype,"view",void 0),l([d({type:JM})],mi.prototype,"viewModel",void 0),mi=l([S("esri.widgets.Feature")],mi);const Ihe=mi;var XB;const F1=Symbol("anchorHandles");let Ju=class extends Ma.EventedAccessor{constructor(e){super(e),this[XB]=new Mi,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[F1].add([Ln(()=>to(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),Y(()=>this.screenLocation,(t,i)=>{E(t)&&E(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[F1]=En(this[F1])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this;return i&&E(e)&&E(t)&&t.ready?t.toScreen(e):null}};XB=F1,l([d()],Ju.prototype,"location",void 0),l([d()],Ju.prototype,"screenLocation",null),l([d()],Ju.prototype,"screenLocationEnabled",void 0),l([d()],Ju.prototype,"view",void 0),Ju=l([S("esri.widgets.support.AnchorElementViewModel")],Ju);const QB=Ju,Nhe="esri.widgets.CompassViewModel";let B1=class extends QB{constructor(e){super(e),this.visible=!1}};l([d()],B1.prototype,"visible",void 0),B1=l([S(Nhe)],B1);const eU=B1,f_={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let Xu=class extends Ci{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new eU,this.visible=!1}initialize(){this.own([Y(()=>this.visible,e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r=e&&i,n=!e&&i,s={[f_.spinnerStart]:r,[f_.spinnerFinish]:n},o=this._getPositionStyles();return N("div",{class:this.classes(f_.base,s),styles:o})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=Fb(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(O(t)||O(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};l([X("viewModel.location")],Xu.prototype,"location",void 0),l([X("viewModel.view")],Xu.prototype,"view",void 0),l([d({type:eU})],Xu.prototype,"viewModel",void 0),l([X("viewModel.visible")],Xu.prototype,"visible",void 0),Xu=l([S("esri.widgets.Spinner")],Xu);const Rhe=Xu;var S5;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(S5||(S5={}));function Phe(e){return"r"in e&&"g"in e&&"b"in e}function tU(e){return"h"in e&&"s"in e&&"v"in e}function iU(e){return"l"in e&&"a"in e&&"b"in e}function rU(e){return"l"in e&&"c"in e&&"h"in e}function $he(e){return"x"in e&&"y"in e&&"z"in e}const Dhe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Lhe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function nU(e,t){const i=[];let r,n;if(e[0].length!==t.length)throw"dimensions do not match";const s=e.length,o=e[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=e[r][n]*t[n];i.push(a)}return i}function sU(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=nU(Dhe,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function XM(e){const t=nU(Lhe,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function oU(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function aU(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function Ohe(e){const t=e.l,i=e.a,r=e.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function khe(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function Fhe(e){return oU(sU(e))}function Bhe(e){return XM(aU(e))}function Uhe(e){return Ohe(oU(sU(e)))}function Vhe(e){return XM(aU(khe(e)))}function jhe(e){const t=e.r,i=e.g,r=e.b,n=Math.max(t,i,r),s=n-Math.min(t,i,r);let o=n,a=s===0?0:n===t?(i-r)/s%6:n===i?(r-t)/s+2:(t-i)/s+4,u=s===0?0:s/o;return a<0&&(a+=6),a*=60,u*=100,o*=100/255,{h:a,s:u,v:o}}function zhe(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,n=r*i,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}function Mm(e){return Phe(e)?e:rU(e)?Vhe(e):iU(e)?Bhe(e):$he(e)?XM(e):tU(e)?zhe(e):e}function QEe(e){return tU(e)?e:jhe(Mm(e))}function T5(e){return iU(e)?e:Fhe(Mm(e))}function E5(e){return rU(e)?e:Uhe(Mm(e))}function lU(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Hhe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Ghe(e,t,i,r,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function qhe(e,t){return new Float32Array(e,t,6)}function uU(e,t,i,r){const n=t[r],s=t[r+1];e[r]=i[0]*n+i[2]*s+i[4],e[r+1]=i[1]*n+i[3]*s+i[5]}function Whe(e,t,i,r=0,n=0,s=2){const o=n||t.length/s;for(let a=r;a<o;a++)uU(e,t,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,create:lU,clone:Hhe,fromValues:Ghe,createView:qhe,transform:uU,transformMany:Whe},Symbol.toStringTag,{value:"Module"}));function Yhe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Khe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Zhe(e,t,i,r,n,s,o){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=s,e[5]=o,e}function QM(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let u=i*s-r*n;return u?(u=1/u,e[0]=s*u,e[1]=-r*u,e[2]=-n*u,e[3]=i*u,e[4]=(n*a-s*o)*u,e[5]=(r*o-i*a)*u,e):null}function Jhe(e){return e[0]*e[3]-e[1]*e[2]}function cU(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=i[0],h=i[1],f=i[2],y=i[3],m=i[4],g=i[5];return e[0]=r*c+s*h,e[1]=n*c+o*h,e[2]=r*f+s*y,e[3]=n*f+o*y,e[4]=r*m+s*g+a,e[5]=n*m+o*g+u,e}function Ow(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=Math.sin(i),h=Math.cos(i);return e[0]=r*h+s*c,e[1]=n*h+o*c,e[2]=r*-c+s*h,e[3]=n*-c+o*h,e[4]=a,e[5]=u,e}function eC(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=i[0],h=i[1];return e[0]=r*c,e[1]=n*c,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=u,e}function Cm(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=i[0],h=i[1];return e[0]=r,e[1]=n,e[2]=s,e[3]=o,e[4]=r*c+s*h+a,e[5]=n*c+o*h+u,e}function dU(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function hU(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function tC(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Xhe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Qhe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function epe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function pU(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function tpe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function ipe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function rpe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function npe(e,t){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=t[0],c=t[1],h=t[2],f=t[3],y=t[4],m=t[5];return Math.abs(i-u)<=Te*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-c)<=Te*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-h)<=Te*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-f)<=Te*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-y)<=Te*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-m)<=Te*Math.max(1,Math.abs(a),Math.abs(m))}const spe=cU,ope=pU;Object.freeze(Object.defineProperty({__proto__:null,copy:Yhe,identity:Khe,set:Zhe,invert:QM,determinant:Jhe,multiply:cU,rotate:Ow,scale:eC,translate:Cm,fromRotation:dU,fromScaling:hU,fromTranslation:tC,str:Xhe,frob:Qhe,add:epe,subtract:pU,multiplyScalar:tpe,multiplyScalarAndAdd:ipe,exactEquals:rpe,equals:npe,mul:spe,sub:ope},Symbol.toStringTag,{value:"Module"}));const x5=F("android");F("chrome")||x5&&x5>=4;JT();function fU(e){return e&&"opacity"in e?e.opacity*fU(e.parent):1}async function ape(e,t){var b;if(!e)return;const i=e.sourceLayer,r=(b=E(t)&&t.useSourceLayer?i:e.layer)!=null?b:i,n=fU(r);if(E(e.symbol)&&(!E(t)||t.ignoreGraphicSymbol!==!0)){const w=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,cache:E(t)?t.webStyleCache:null}):e.symbol.clone();return $2(w,null,n),w}const s=E(t)&&t.renderer||r&&"renderer"in r&&r.renderer;let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...t,cache:E(t)?t.webStyleCache:null}):o.clone(),!("visualVariables"in s)||!s.visualVariables||!s.visualVariables.length)return $2(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(O(t)||O(t.arcade))){const w={...t};w.arcade=await Ta(),t=w}const a=await V(()=>Promise.resolve().then(()=>DM),void 0,import.meta.url),u=[],c=[],h=[],f=[];for(const w of s.visualVariables)switch(w.type){case"color":u.push(w);break;case"opacity":c.push(w);break;case"rotation":f.push(w);break;case"size":w.target||h.push(w)}const y=!!u.length&&u[u.length-1],m=y?a.getColor(y,e,t):null,g=!!c.length&&c[c.length-1];let v=g?a.getOpacity(g,e,t):null;if(n!=null&&(v=v!=null?v*n:n),$2(o,m,v),h.length){const w=a.getAllSizes(h,e,t);await zne(o,w)}for(const w of f)Hne(o,a.getRotationAngle(w,e,t),w.axis);return o}class lpe{constructor(t,i){this.owner=i,this.properties={},this.afterDispatchHandle=null;for(const r in t){const n=t[r],s=new U9(n,null,null,2,2);this.properties[r]={pool:s,acquired:[]}}this.afterDispatchHandle=pG(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const t in this.properties){const i=this.properties[t];for(const r of i.acquired)wI(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this.properties=null,this.owner=null}get(t){const i=this.owner._get(t),r=this.properties[t];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const t in this.properties){const i=this.properties[t];let r=0;for(const n of i.acquired)wI(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}}const upe=F("mac")?"Meta":"Ctrl",kw={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)kw[e]=String.fromCharCode(e);for(let e=1;e<25;e++)kw[111+e]=`F${e}`;for(let e=65;e<91;e++)kw[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function cpe(e){if(e.key!==void 0)return ro(e);const t=kw[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function dpe(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class hpe{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}}const A5=W.getLogger("esri.views.input.InputHandler");class hi{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?A5.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof t=="string"?new hpe(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const y=f.indexOf(h);f.splice(y,1),o(),this._manager&&this._manager.updateDependencies()}},u=new ppe(s,r,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(u),o(),this._manager&&this._manager.updateDependencies(),u}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new fpe(t,{onEmit:(r,n,s,o)=>{this._manager.emit(r.eventType,n,s,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):A5.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const r of i)if(r.match.matches(t)&&(r.callback(t),t.shouldStopPropagation()))break}}}class ppe{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class fpe{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}class ype extends hi{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{const r=i.data.native.pointerType==="touch";this._setValue(r?"touch":"mouse",i.data.x,i.data.y)})}_setValue(t,i,r){t===this._value&&this._x===i&&this._y===r||(this._value=t,this._x=i,this._y=r,this._onChange(t,i,r))}}const y_=W.getLogger("esri.views.input.InputManager");let yl=class extends ce{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=upe,this.latestPointerType="mouse",this._propertiesPool=new lpe({latestPointerLocation:gpe},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,i=Zl.INTERNAL){if(this._nameToGroup[e])return void y_.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void y_.error("Can't register a group of zero handlers");const r={name:e,handlers:t.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let n=r.handlers.length-1;n>=0;n--){const s=r.handlers[n];this._handlers.push(s),s.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,a,u,c,h)=>{this._emitInputEvent(s.priorityIndex+1,o,a,u,h,c)},setPointerCapture:(o,a)=>{this._setPointerCapture(r,s,o,a)},setEventCallback:o=>{s.eventCallback=o},setUninstallCallback:o=>{s.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):y_.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const r=this._handlers[i];r.priorityIndex=i,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let n=r.handler.hasSideEffects;if(!n){for(const s of r.handler.outgoingEventTypes)if(e.has(s)){n=!0;break}}if(n)for(const s of r.handler.incomingEventMatches){e.add(s.eventType);for(const o of s.keyModifiers)dpe(o)||t.add(o)}r.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._get("latestPointerType")!==e&&this._set("latestPointerType",e);const r=this._get("latestPointerLocation");if(O(r)||r.x!==t||r.y!==i){const n=this._propertiesPool.get("latestPointerLocation");n.x=t,n.y=i,this._set("latestPointerLocation",n)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const n=t;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const o=new Set;this._activeKeyModifiers.forEach(a=>{o.add(a)}),this._activeKeyModifiers=o,i=!0}},n=(o,a)=>{a&&!this._activeKeyModifiers.has(o)?(r(),this._activeKeyModifiers.add(o)):!a&&this._activeKeyModifiers.has(o)&&(r(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=t.key;this._keyModifiers.has(o)&&n(o,e==="key-down")}const s=t.native;n("Alt",!(!s||!s.altKey)),n("Ctrl",!(!s||!s.ctrlKey)),n("Shift",!(!s||!s.shiftKey)),n("Meta",!(!s||!s.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new ype((e,t,i)=>this._setLatestPointer(e,t,i)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],Zl.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Zl.INTERNAL)}_setPointerCapture(e,t,i,r){const n=e.name+"-"+t.priorityIndex,s=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,s),r?(s.add(n),s.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):s.has(n)&&(s.delete(n),s.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,n,s){const o=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=n!==void 0&&n,u={event:new mpe(t,i,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new Iv,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:i}=this._currentPropagation.events.pop(),r=t.data&&t.data.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new Iv;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const r of t.handler.incomingEventMatches){if(i.eventType!==r.eventType)continue;const n=i.keyModifiers.filter(s=>r.keyModifiers.includes(s));if(n.length===i.keyModifiers.length!=(n.length===r.keyModifiers.length))return i.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let r=0;for(;r<t.length&&this._compareHandlerPriority(i,t[r])>=0;)r++;t.splice(r,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};l([d({readOnly:!0})],yl.prototype,"hasPendingInputs",null),l([d()],yl.prototype,"eventSource",void 0),l([d()],yl.prototype,"recognizers",void 0),l([d({readOnly:!0})],yl.prototype,"latestPointerType",void 0),l([d({readOnly:!0})],yl.prototype,"latestPointerLocation",void 0),yl=l([S("esri.views.input.InputManager")],yl);class mpe{constructor(t,i,r,n,s){this.type=t,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=Pl.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Pl.STOPPED}shouldStopPropagation(){return(this._propagationState&Pl.STOPPED)!=0}async(t){this._propagationState|=Pl.PAUSED;const i=(r,n)=>{this._propagationState&=~Pl.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&Pl.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var Pl;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Pl||(Pl={}));const Zl={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class gpe{}function qx(e){return e&&typeof e.highlight=="function"}const Fw={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Pc=new xp({id:"zoom-to-feature",title:"{messages.zoom}",className:Fw.iconZoom}),M5=new xp({id:"remove-selected-feature",title:"{messages.remove}",className:Fw.iconTrash}),gh=new xp({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Fw.iconZoom}),vh=new xp({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Fw.iconBrowseClusteredFeatures}),vpe="esri.widgets.Popup.PopupViewModel",lb=W.getLogger(vpe),bpe=e=>{const{event:t,view:i}=e,{action:r}=t,n=i&&i.popup;if(!r)return Promise.reject(new P("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new P("trigger-action:missing-arguments","view.popup is missing"));const{disabled:s,id:o}=r;if(!o)return Promise.reject(new P("trigger-action:invalid-action","action.id is missing"));if(s)return Promise.reject(new P("trigger-action:invalid-action","Action is disabled"));if(o===Pc.id)return _pe(n.viewModel).catch(K_);if(o===gh.id)return Spe(n.viewModel);if(o===vh.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,o===M5.id){n.close();const{selectedFeature:a}=n;if(!a)return Promise.reject(new P(`trigger-action:${M5.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:u}=a;return u?u.remove(a):i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function yU(e){const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function cc(e){var t,i;return(e==null?void 0:e.isAggregate)&&((i=(t=e==null?void 0:e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}function wpe(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r=!1;return i.whenGraphicBounds(e,{useViewElevation:!0}).then(n=>{r=!n||!n.boundingBox||n.boundingBox[0]===n.boundingBox[3]&&n.boundingBox[1]===n.boundingBox[4]&&n.boundingBox[2]===n.boundingBox[5]}).catch(()=>{const n=new P("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});lb.error(n)}),r}return!0}async function _pe(e){const{location:t,selectedFeature:i,view:r,zoomFactor:n}=e,s=yU(e);if(!s){const c=new P("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:s,view:r});throw lb.error(c),c}const o=r.scale/n,a=e.get("selectedFeature.geometry")||t,u=a&&a.type==="point"&&wpe(i,r);Pc.active=!0,Pc.disabled=!0;try{await e.view.goTo({target:s,scale:u?o:void 0})}finally{Pc.active=!1,Pc.disabled=!1,e.zoomToLocation=null,u&&(e.location=a)}}async function Spe(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const a=new P("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw lb.error(a),a}if(!cc(t)){const a=new P("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw lb.error(a),a}const r=t.sourceLayer,n=await i.whenLayerView(r),s=n.createQuery();s.aggregateIds=[t.getObjectId()],gh.active=!0,gh.disabled=!0;const{extent:o}=await n.queryExtent(s);await i.goTo({target:o}),gh.active=!1,gh.disabled=!1}async function Tpe(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,n=await i.whenLayerView(r),s=n.createQuery();s.aggregateIds=[t.getObjectId()];const{extent:o}=await n.queryExtent(s);e.selectedClusterBoundaryFeature.geometry=o,i.graphics.add(e.selectedClusterBoundaryFeature)}async function Epe(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,n=await i.whenLayerView(r),s=n.createQuery();s.aggregateIds=[t.getObjectId()],vh.active=!0,vh.disabled=!0;const{features:o}=await n.queryFeatures(s);vh.active=!1,vh.disabled=!1,i.popup.open({features:[t].concat(o),featureMenuOpen:!0})}function xpe(e){const t=e.features.filter(i=>cc(i));t.length&&(e.features=t)}const iC=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return l([d()],t.prototype,"goToOverride",void 0),l([d()],t.prototype,"view",void 0),t=l([S("esri.widgets.support.GoTo")],t),t},Hy=me.ofType({key:"type",defaultKeyValue:"button",base:tw,typeMap:{button:xp,toggle:cO}}),Ape=()=>[Pc.clone()],Mpe=()=>[gh.clone(),vh.clone()],mU="esri.widgets.Popup.PopupViewModel",pg=W.getLogger(mU);let Le=class extends iC(QB){constructor(e){super(e),this._handles=new Mi,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Hy,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new zi({symbol:new Ca({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([Y(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),Y(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),Y(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),Y(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),Y(()=>this.location,e=>this._locationChange(e)),Y(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),Y(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),Y(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),Y(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>bpe({event:e,view:this.view})),Ln(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Wh),Y(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),Y(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Ln(()=>!this.visible,()=>this.browseClusterEnabled=!1),Y(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Hy;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:n,selectedFeature:s}=this,o=n?i.concat(t):t,a=s&&(typeof s.getEffectivePopupTemplate=="function"&&s.getEffectivePopupTemplate(r)||s.popupTemplate),u=a&&a.actions,c=a&&a.overwriteActions?u:u?u.concat(o):o;return c&&c.filter(Boolean).forEach(h=>e.add(h)),e}get defaultActions(){const e=this._get("defaultActions")||new Hy;return e.removeAll(),e.addMany(cc(this.selectedFeature)?Mpe():Ape()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:n}=this,s=r&&t.length;s&&i&&n===-1?this.selectedFeatureIndex=0:s&&n!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=ga(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=n=>{this._pendingPromises.has(t)&&this._updateFeatures(n),this._updatePendingPromises(t)},r=()=>this._updatePendingPromises(t);t.then(i,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=yU(this);if(!t){const i=new P("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return pg.error(i),Promise.reject(i)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e){const r=new P("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return pg.error(r),Promise.reject(r)}return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const n of r)delete t[n];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){xpe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?cc(t)?(await Tpe(this),await Epe(this)):pg.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):pg.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(Pc.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(cc(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:n}=this;if(i===null)return;const s=((i-1)*r+t)%t,o=s+r;n.slice(s,o).forEach((a,u)=>{a&&!a.graphic&&(a.graphic=e[s+u])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:r}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),cc(e)?void 0:(e.symbol=await ape(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=r.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:r}=t,n=Promise.resolve(i),s=r.map(o=>o.promise);this.promises=[n,...s]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(cc(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),n=[];t.forEach((s,o)=>{var u,c;if(!s)return;let a=null;if(r.some((h,f)=>(h&&h.graphic===s&&(a=h,r.splice(f,1)),!!a)),a)n[o]=a;else{const h=new JM({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(u=this.view)==null?void 0:u.spatialReference,graphic:s===e?s:null,map:(c=this.view)==null?void 0:c.map,view:this.view});n[o]=h}}),r.forEach(s=>s&&!s.destroyed&&s.destroy()),this._set("featureViewModels",n)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const r=this.view.on("click",n=>{n.pointerType==="mouse"&&n.button!==0||this._fetchFeaturesAndOpen(n)},Zl.WIDGET);t.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const n=this.fetchFeatures(e,{signal:r,event:t});return n.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),n}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then(n=>{const{clientOnlyGraphics:s,promisesPerLayerView:o,location:a}=n,u=[Promise.resolve(s),...o.map(c=>c.promise)];return r.popup.open({location:a||i,promises:u}),n})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return O(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:i}=e;return(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:t}_getHighlightTarget(e,t){const i=t.type==="imagery"?void 0:"objectIdField"in t&&t.objectIdField,r=e.attributes;return r&&i&&r[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:i,activeFeature:r,visible:n}=this;if(!(r&&i&&t&&n))return;const s=this._getHighlightLayer(r);if(!(s&&s instanceof Jh))return;const o=this._getLayerView(i,s);this._highlightActiveFeaturePromise=o;const a=await o;if(!(a&&qx(a)&&this._highlightActiveFeaturePromise===o&&this.activeFeature&&this.highlightEnabled))return;const u=a.highlight(this._getHighlightTarget(r,s));this._handles.add(u,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:n}=this;if(!(t&&r&&i&&n))return;const s=this._getHighlightLayer(t);if(!(s&&s instanceof Jh))return;const o=this._getLayerView(r,s);this._highlightSelectedFeaturePromise=o;const a=await o;if(!(a&&qx(a)&&this._highlightSelectedFeaturePromise===o&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u=a.highlight(this._getHighlightTarget(t,s));this._handles.add(u,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(r=>!t.includes(r));this.features=t.concat(i)}};l([d()],Le.prototype,"featurePage",void 0),l([d()],Le.prototype,"isLoadingFeature",null),l([d({type:Hy})],Le.prototype,"actions",void 0),l([d({readOnly:!0})],Le.prototype,"active",null),l([d()],Le.prototype,"activeFeature",void 0),l([d({readOnly:!0})],Le.prototype,"allActions",null),l([d({type:Boolean})],Le.prototype,"defaultPopupTemplateEnabled",void 0),l([d()],Le.prototype,"autoCloseEnabled",void 0),l([d()],Le.prototype,"autoOpenEnabled",void 0),l([d()],Le.prototype,"browseClusterEnabled",void 0),l([d()],Le.prototype,"content",void 0),l([d({type:Hy,readOnly:!0})],Le.prototype,"defaultActions",null),l([d({readOnly:!0})],Le.prototype,"featureCount",null),l([d()],Le.prototype,"features",null),l([d()],Le.prototype,"featuresPerPage",void 0),l([d()],Le.prototype,"featureViewModelAbilities",void 0),l([d({readOnly:!0})],Le.prototype,"featureViewModels",void 0),l([d()],Le.prototype,"highlightEnabled",void 0),l([d()],Le.prototype,"includeDefaultActions",void 0),l([d({type:he})],Le.prototype,"location",null),l([d({readOnly:!0})],Le.prototype,"pendingPromisesCount",null),l([d({readOnly:!0})],Le.prototype,"selectedClusterBoundaryFeature",void 0),l([d({readOnly:!0})],Le.prototype,"waitingForResult",null),l([d({readOnly:!0})],Le.prototype,"promiseCount",null),l([d()],Le.prototype,"promises",null),l([d({value:null,readOnly:!0})],Le.prototype,"selectedFeature",null),l([d({value:-1})],Le.prototype,"selectedFeatureIndex",null),l([d({readOnly:!0})],Le.prototype,"selectedFeatureViewModel",null),l([d({readOnly:!0})],Le.prototype,"state",null),l([d()],Le.prototype,"title",void 0),l([d()],Le.prototype,"updateLocationEnabled",void 0),l([d()],Le.prototype,"view",void 0),l([d()],Le.prototype,"visible",void 0),l([d()],Le.prototype,"zoomFactor",void 0),l([d()],Le.prototype,"zoomToLocation",void 0),l([d()],Le.prototype,"centerAtLocation",null),Le=l([S(mU)],Le);const gU=Le,C5="selected-index",Cpe=0,I5="popup-spinner",G={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},N5={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},R5="esri-popup";function $o(e,t){return t===void 0?`${R5}__${e}`:`${R5}__${e}-${t}`}const vU="esri.widgets.Popup",P5=W.getLogger(vU),$5={closeButton:!0,featureNavigation:!0};let fe=class extends JB(Ci){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Mi,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=K3(()=>this._displaySpinner(),Cpe),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new gU,this.visible=null,this.visibleElements={...$5},this._addSelectedFeatureIndexHandle(),this.own([Y(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),Y(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),Y(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),Y(()=>{var i,r,n,s,o,a;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.size,(o=this.viewModel)==null?void 0:o.active,(a=this.viewModel)==null?void 0:a.location,this.alignment]},()=>this.reposition()),Y(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),Y(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),Y(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),Y(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i,r)),Y(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),Y(()=>{var i,r,n,s;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.state]},()=>this._setTitleFromFeatureWidget()),Y(()=>{var i,r,n,s;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.state]},()=>this._setContentFromFeatureWidget()),Ln(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),iu(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),Y(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),We),Y(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,i,r,n,s,o;return!!(this.selectedFeatureWidget?((t=(e=this.selectedFeatureWidget)==null?void 0:e.viewModel)==null?void 0:t.waitingForContent)||((r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.state)==="error"||((s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.content):(o=this.viewModel)==null?void 0:o.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||N5}set dockOptions(e){const t={...N5},i=this.get("viewModel.view.breakpoints"),r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const n={...t,...e},s={...t.breakpoint,...r},{breakpoint:o}=n;o===!0?n.breakpoint=s:typeof o=="object"&&(n.breakpoint={...s,...o}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:r}=this.viewModel,n={...t,title:!1};return r?(e?(e.viewModel=r,e.visibleElements=n):this._feature=new Ihe({headingLevel:i+1,viewModel:r,visibleElements:n}),this._feature):null}castVisibleElements(e){return{...$5,...e}}blur(){const{active:e}=this.viewModel;e||P5.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||P5.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var n,s;this._handles.remove(C5);const t=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:t};((s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var g,v,b,w;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:i,dividedActions:r,currentAlignment:n,currentDockPosition:s}=this,{active:o}=this.viewModel,{menuActions:a}=r,u=o&&a.length>1&&e,c=o&&t,h=o&&!t,f=(v=(g=this.selectedFeature)==null?void 0:g.layer)==null?void 0:v.title,y=(w=(b=this.selectedFeature)==null?void 0:b.layer)==null?void 0:w.id,m={[G.alignTopCenter]:n==="top-center",[G.alignBottomCenter]:n==="bottom-center",[G.alignTopLeft]:n==="top-left",[G.alignBottomLeft]:n==="bottom-left",[G.alignTopRight]:n==="top-right",[G.alignBottomRight]:n==="bottom-right",[G.isDocked]:c,[G.shadow]:h,[G.isDockedTopLeft]:s==="top-left",[G.isDockedTopCenter]:s==="top-center",[G.isDockedTopRight]:s==="top-right",[G.isDockedBottomLeft]:s==="bottom-left",[G.isDockedBottomCenter]:s==="bottom-center",[G.isDockedBottomRight]:s==="bottom-right",[G.isFeatureMenuOpen]:i,[G.isActionsMenuOpen]:u};return N("div",{class:this.classes(G.base,m),role:"presentation","data-layer-title":f,"data-layer-id":y,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},o?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return N("span",{"aria-hidden":"true",class:this.classes(G.icon,G.iconLoading,G.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?N("div",{key:$o("loading-container"),role:"presentation",class:G.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=jl(this.container),t={[G.iconRightTriangleArrow]:e,[G.paginationPreviousIconRTL]:e,[G.iconLeftTriangleArrow]:!e,[G.paginationPreviousIconLTR]:!e};return N("span",{"aria-hidden":"true",class:this.classes(G.icon,t)})}renderPreviousButton(){const{messages:e}=this;return N("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(G.button,G.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=jl(this.container),t={[G.iconLeftTriangleArrow]:e,[G.paginationNextIconRTL]:e,[G.iconRightTriangleArrow]:!e,[G.paginationNextIconLTR]:!e};return N("span",{"aria-hidden":"true",class:this.classes(G.icon,t)})}renderNextButton(){const{messages:e}=this;return N("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(G.button,G.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:n}=this.viewModel;return N("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(G.button,G.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[G.iconUndock]:e,[G.iconDock]:!e,[G.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[G.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[G.iconDockToTop]:!e&&t==="top-center",[G.iconDockToBottom]:!e&&t==="bottom-center"};return N("span",{"aria-hidden":"true",class:this.classes(i,G.icon)})}renderDockButton(){var n,s,o;const{dockEnabled:e,messages:t}=this,i=(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.widthBreakpoint,r=e?t.undock:t.dock;return i!=="xsmall"&&((o=this.dockOptions)==null?void 0:o.buttonEnabled)?N("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(G.button,G.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:n}=this,s={[G.headerContainerButton]:i},o=N(sM,{level:this.headingLevel,class:G.headerTitle,innerHTML:e}),a=i?N("button",{key:`${e}--collapsible`,id:t,title:r?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(G.headerContainer,s),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},o):N("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(G.headerContainer,s)},o);return e?a:null}renderCloseIcon(){return N("span",{"aria-hidden":"true",class:this.classes(G.icon,G.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?N("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:G.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return N("header",{class:G.header},this.renderTitle(),N("div",{class:G.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:r}=this.viewModel;return t&&!i?N("article",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:G.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:n}=this,s=i?n.close:n.open,{menuActions:o}=r;return o.length?N("div",{key:$o("actions-menu-button"),class:this.classes(G.button,G.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":s,title:s},N("span",{"aria-hidden":"true",class:G.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:n}=r;return n.length&&i?N("ul",{id:e,role:"menu","aria-labelledby":t,key:$o("actions"),class:G.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(s=>this.renderAction({action:s,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?N("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:G.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?N("section",{key:$o("navigation"),class:this.classes(G.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,n=!!i.length,s=!!r.length,o={[G.footerHasPagination]:e,[G.footerHasActions]:n,[G.footerHasActionsMenu]:s};return e||n?N("div",{key:$o("feature-buttons"),class:this.classes(G.footer,o)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=ds(e.selectedFeatures,{total:t.length});return N("section",{key:$o("menu"),class:G.featureMenu},N("strong",{class:G.featureMenuHeader},r),N("nav",{bind:this,class:G.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Mc},this.renderFeatureMenu(),N("div",{class:G.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?N("div",{class:G.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:N("div",{key:$o("pointer"),class:G.pointer,role:"presentation"},N("div",{class:this.classes(G.pointerDirection,G.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:n,collapsible:s,hasContent:o,contentCollapsed:a,visibleElements:u}=this,{title:c}=this.viewModel,h=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",f=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",y={[G.shadow]:e,[G.isCollapsible]:s,[G.isCollapsed]:a};return N("div",{class:this.classes(G.main,G.widget,y),tabIndex:u.closeButton?null:-1,role:"dialog","aria-labelledby":c?r:"","aria-describedby":o&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?N("div",{key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return N("span",{key:"text",class:G.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[G.iconLoading]:e.active,[G.rotating]:e.active,[G.icon]:!!t,[G.actionImage]:!e.active&&!!i};return t&&(r[t]=!e.active),N("span",{key:"icon","aria-hidden":"true",class:this.classes(G.icon,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),n={[G.action]:t.type!=="toggle",[G.actionToggle]:t.type==="toggle",[G.actionToggleOn]:t.type==="toggle"&&t.value,[G.buttonDisabled]:t.disabled},s=[this.renderActionIcon(t),this.renderActionText(r)],o=i==="menu-item"?N("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(G.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s):N("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(G.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s);return t.visible?o:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:s}=this.viewModel,o=e===s,a={[G.featureMenuSelected]:o},u=o?N("span",{key:$o(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:G.iconCheckMark}):null,c=N("span",{innerHTML:e.title||r.untitled});return N("li",{role:"menuitem",tabIndex:-1,key:$o(`feature-menu-feature-${n}`),class:this.classes(a,G.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},N("span",{class:G.featureMenuTitle},c,u))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?N("ol",{class:G.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:n}=e,s=i==null?void 0:i.attributes,o=n==="zoom-to-feature"?ds(e.title,{messages:t}):n==="remove-selected-feature"?ds(e.title,{messages:r}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?ds(e.title,{messages:t}):e.title;return o&&s?ds(o,s):o}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:r,image:n}=e,s=n||r?r:G.iconDefaultAction;return s&&i?ds(s,i):s}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:r}=e;return r&&i?ds(r,i):r}_createFeatureUpdatedAnimation(){return vte("enter",G.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(Y(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(s=>s.visible),i=this._getInlineActionCount(),r=i===null,n=i===0;return{inlineActions:r?t.slice(0):n?new me:t.slice(0,i),menuActions:r?new me:n?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){ro(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){ro(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,i=e.currentTarget["data-feature-index"];t.activeFeature=t.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=ro(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const n=i.querySelectorAll("li"),s=n.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(r+1+s)%s].focus()):(e.stopPropagation(),n[(r-1+s)%s].focus())}_handleActionMenuItemKeyup(e){const t=ro(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,s=n.findIndex(u=>u.uid===r);if(!i)return;const o=i.querySelectorAll("li"),a=o.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),o[o.length-1].focus()):(e.stopPropagation(),o[0].focus()):(e.stopPropagation(),o[(s+1+a)%a].focus()):(e.stopPropagation(),o[(s-1+a)%a].focus())}_handleMainKeyup(e){const t=ro(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await nm(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=Y(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,C5)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:n,view:s}=e;if(isNaN(i)||isNaN(t)||!s||!r)return!1;const o=s.padding;return n==="right"&&r.x+i/2>s.width-o.right||n==="left"&&r.x-i/2<o.left||n==="top"&&r.y-t<o.top||n==="bottom"&&r.y+t>s.height-o.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:n}=this,{screenLocation:s,view:o}=n;if(O(s)||!o||!i)return"top-center";if(!this._isScreenLocationWithinView(s,o))return this._get("currentAlignment")||"top-center";function a(A){return parseInt(A.replace(/[^-\d\.]/g,""),10)}const u=r?window.getComputedStyle(r,null):null,c=u?a(u.getPropertyValue("max-height")):0,h=u?a(u.getPropertyValue("height")):0,{height:f,width:y}=i.getBoundingClientRect(),m=y+t,g=Math.max(f,c,h)+t,v=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"right",view:o}),b=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"left",view:o}),w=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"top",view:o}),T=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"bottom",view:o});return b?w?"bottom-right":"top-right":v?w?"bottom-left":"top-left":w?T?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return jl(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var o;if(e!=="auto")return e;const t=(o=this.viewModel)==null?void 0:o.view,i=jl(this.container)?"top-left":"top-right";if(!t)return i;const r=t.padding||{left:0,right:0,top:0,bottom:0},n=t.width-r.left-r.right,{breakpoints:s}=t;return s&&n<=s.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&(e.style.top=r.top,e.style.left=r.left,e.style.bottom=r.bottom,e.style.right=r.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:n,_pointerOffsetInPx:s}=this,o=r/2,a=i.height-t,u=i.width-e,{padding:c}=this.view;return n==="bottom-center"?{top:t+s-c.top,left:e-o-c.left}:n==="top-left"?{bottom:a+s-c.bottom,right:u+s-c.right}:n==="bottom-left"?{top:t+s-c.top,right:u+s-c.right}:n==="top-right"?{bottom:a+s-c.bottom,left:e+s-c.left}:n==="bottom-right"?{top:t+s-c.top,left:e+s-c.left}:n==="top-center"?{bottom:a+s-c.bottom,left:e-o-c.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(O(e)||!t)return;const n=this._calculateFullWidth(t),s=this._calculateAlignmentPosition(e.x,e.y,r,n);return s?{top:s.top!==void 0?`${s.top}px`:"auto",left:s.left!==void 0?`${s.left}px`:"auto",bottom:s.bottom!==void 0?`${s.bottom}px`:"auto",right:s.right!==void 0?`${s.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,n]=e,[s,o]=t,{width:a,height:u}=i;return r<=a&&s>a||r>a&&s<=a||n<=u&&o>u||n>u&&o<=u}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,n=i.top+i.bottom,s=[],o=[];s[0]=e[0]-r,s[1]=e[1]-n,o[0]=t[0]-r,o[1]=t[1]-n;const{dockOptions:a}=this,u=a.breakpoint;this._dockingThresholdCrossed(s,o,u)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var a,u;const t=e.breakpoint,i=(u=(a=this.viewModel)==null?void 0:a.view)==null?void 0:u.ui;if(!i)return!1;const{width:r,height:n}=i;if(isNaN(r)||isNaN(n))return!1;const s=t.hasOwnProperty("width")&&r<=t.width,o=t.hasOwnProperty("height")&&n<=t.height;return s||o}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?ds(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,I5),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new Rhe({view:e}),e.ui.add(this._spinner,{key:I5,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(s=>s.uid===t),n=i.getItemAt(r);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};l([d({readOnly:!0})],fe.prototype,"actionsMenuId",null),l([d({readOnly:!0})],fe.prototype,"actionsMenuButtonId",null),l([d({readOnly:!0})],fe.prototype,"featureMenuId",null),l([d({readOnly:!0})],fe.prototype,"titleId",null),l([d({readOnly:!0})],fe.prototype,"contentId",null),l([d({readOnly:!0})],fe.prototype,"hasContent",null),l([d({readOnly:!0})],fe.prototype,"featureNavigationVisible",null),l([d({readOnly:!0})],fe.prototype,"collapsible",null),l([d({readOnly:!0})],fe.prototype,"featureMenuVisible",null),l([d({readOnly:!0})],fe.prototype,"contentCollapsed",null),l([d({readOnly:!0})],fe.prototype,"dividedActions",null),l([X("viewModel.actions")],fe.prototype,"actions",void 0),l([d()],fe.prototype,"actionsMenuOpen",null),l([d()],fe.prototype,"alignment",void 0),l([X("viewModel.autoCloseEnabled")],fe.prototype,"autoCloseEnabled",void 0),l([X("viewModel.autoOpenEnabled")],fe.prototype,"autoOpenEnabled",void 0),l([X("viewModel.defaultPopupTemplateEnabled")],fe.prototype,"defaultPopupTemplateEnabled",void 0),l([X("viewModel.content")],fe.prototype,"content",void 0),l([d()],fe.prototype,"collapsed",void 0),l([d()],fe.prototype,"collapseEnabled",void 0),l([d({readOnly:!0})],fe.prototype,"currentAlignment",null),l([d({readOnly:!0})],fe.prototype,"currentDockPosition",null),l([d()],fe.prototype,"dockOptions",null),l([d()],fe.prototype,"dockEnabled",void 0),l([X("viewModel.featureCount")],fe.prototype,"featureCount",void 0),l([d()],fe.prototype,"featureMenuOpen",void 0),l([X("viewModel.features")],fe.prototype,"features",void 0),l([X("viewModel.goToOverride")],fe.prototype,"goToOverride",void 0),l([d()],fe.prototype,"headingLevel",void 0),l([X("viewModel.highlightEnabled")],fe.prototype,"highlightEnabled",void 0),l([X("viewModel.location")],fe.prototype,"location",void 0),l([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],fe.prototype,"label",void 0),l([d()],fe.prototype,"maxInlineActions",void 0),l([d(),Si("esri/widgets/Popup/t9n/Popup")],fe.prototype,"messages",void 0),l([d(),Si("esri/t9n/common")],fe.prototype,"messagesCommon",void 0),l([X("viewModel.promises")],fe.prototype,"promises",void 0),l([X("viewModel.selectedFeature")],fe.prototype,"selectedFeature",void 0),l([X("viewModel.selectedFeatureIndex")],fe.prototype,"selectedFeatureIndex",void 0),l([d({readOnly:!0})],fe.prototype,"selectedFeatureWidget",null),l([d()],fe.prototype,"spinnerEnabled",void 0),l([X("viewModel.title")],fe.prototype,"title",void 0),l([X("viewModel.updateLocationEnabled")],fe.prototype,"updateLocationEnabled",void 0),l([X("viewModel.view")],fe.prototype,"view",void 0),l([d({type:gU}),I7(["triggerAction","trigger-action"])],fe.prototype,"viewModel",void 0),l([X("viewModel.visible")],fe.prototype,"visible",void 0),l([d()],fe.prototype,"visibleElements",void 0),l([je("visibleElements")],fe.prototype,"castVisibleElements",null),l([Tr()],fe.prototype,"_close",null),l([Tr()],fe.prototype,"_toggleDockEnabled",null),l([Tr()],fe.prototype,"_toggleFeatureMenu",null),l([Tr()],fe.prototype,"_toggleActionsMenu",null),l([Tr()],fe.prototype,"_triggerAction",null),l([Tr()],fe.prototype,"_selectFeature",null),l([Tr()],fe.prototype,"_next",null),l([Tr()],fe.prototype,"_previous",null),fe=l([S(vU)],fe);const D5=fe,m_=[0,0];function Ipe(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return m_[0]=i.left+t.pageXOffset,m_[1]=i.top+t.pageYOffset,m_}function L5(e){e&&(w8(e),e.parentNode&&e.parentNode.removeChild(e))}function Npe(e){const t=document.createElement("div");return e.appendChild(t),t}const hf=16,fg=750,Rpe=512,Ppe=2,$pe=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:hf,time:fg},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([Y(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),Y(()=>this.interacting,r=>{const{surface:n}=this;n&&n.setAttribute("data-interacting",r.toString())})])}initialize(){this.handles.add(Y(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(i){const r=this._get("container");if(r===i)return;const n="dom-size";if(this.handles.remove(n),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),L5(this.root),this._set("root",null),FN(this.userContent,r),L5(this.userContent),this._set("userContent",null)),i){i.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",FN(i,s),i.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",i.insertBefore(o,i.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const u=new YN;o.appendChild(u.surface),this._set("overlay",u),Y(()=>u.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Gh({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(Y(()=>this.size,c=>{const[h,f]=c,y="esri-view-surface--inset-outline";h>=document.body.clientWidth||f>=document.body.clientHeight?a.classList.add(y):a.classList.remove(y)},We),n),this._set("container",i),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get popup(){return this._get("popup")||new D5({view:this})}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,n){const s=this.position;return i-=s[0],r-=s[1],n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const s=this.position;return i+=s[0],r+=s[1],n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([Y(()=>this.root,r=>{i.container=r?Npe(r):null},We),Y(()=>this.popup,(r,n)=>{const s="popup",o="manual";n&&i.remove(n,s),r&&(r.view=i.view,i.add(r,{key:s,position:o}))},We)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=hf,i.time=fg,this.handles.add([(()=>{const r=()=>{i.freq=hf,i.time=fg};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),Gh({prepare:r=>{const n=this._measure(),s=this._freqInfo;if(s.time+=r.deltaTime,n&&(s.freq=hf,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?hf:Math.min(fg,s.freq*Ppe),!n&&s.freq>=Rpe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return r===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=Ipe(i);return(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return l([d({value:null,cast:i=>G3(i)})],t.prototype,"container",null),l([d({readOnly:!0})],t.prototype,"focused",null),l([d({readOnly:!0})],t.prototype,"height",void 0),l([d({type:D5})],t.prototype,"popup",null),l([d({type:YN})],t.prototype,"overlay",void 0),l([d({readOnly:!0})],t.prototype,"position",void 0),l([d({readOnly:!0})],t.prototype,"resizing",void 0),l([d({readOnly:!0})],t.prototype,"root",void 0),l([d({value:null,readOnly:!0})],t.prototype,"size",null),l([d({readOnly:!0})],t.prototype,"surface",void 0),l([d({readOnly:!0})],t.prototype,"suspended",void 0),l([d()],t.prototype,"ui",void 0),l([d({readOnly:!0})],t.prototype,"userContent",void 0),l([d({readOnly:!0})],t.prototype,"width",void 0),l([d()],t.prototype,"widthBreakpoint",void 0),t=l([S("esri.views.DOMContainer")],t),t},Dpe=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:n,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,r),u=Promise.resolve(a),c=this._queryLayerPopupFeatures(s,o,r),h=c.map(f=>f.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:JH([u,...h]).then(f=>Array.from(new Set(f.flat()))),promisesPerLayerView:c}}_queryLayerPopupFeatures(i,r,n){return r.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:E(n)?n.event:null,signal:E(n)?n.signal:null,defaultPopupTemplateEnabled:!!E(n)&&!!n.defaultPopupTemplateEnabled},u=s.fetchPopupFeatures(i,a);return{layerView:s,promise:u}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(E(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:n,queryArea:s,location:o}=await this._popupHitTestGraphics(i,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:u,clientOnlyGraphics:c}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:c,layerViewsAndGraphics:u,queryArea:s,location:o}}async _popupHitTestGraphics(i,r){const{results:n,mapPoint:s}=await this.popupHitTest(i),o=n.filter(u=>u.type==="graphic"&&this._isValidPopupGraphic(u.graphic,r)),a=o.length?o[0].mapPoint:null;return{clientGraphics:o.map(u=>u.graphic),queryArea:s,location:s||a}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),E(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return E(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const n=[],s=new Map,o=r.map(a=>{const u=[];return"layer"in a?s.set(a.layer,u):s.set(a.graphics,u),{layerView:a,graphics:u}});for(const a of i){const u=s.get(a.layer)||s.get(a.sourceLayer)||null;u?u.push(a):n.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:n}}};return t=l([S("esri.views.PopupView")],t),t};W.getLogger("esri.core.support.OwningCollection");let Gy=class extends uu(me){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{O(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(me.ofType(this.itemType.Type))(e):new me(e)}};function O5(e,t){return{type:e,cast:y6,set(i){const r=Vc(i,this._get(t),e);r.owner=this,this._set(t,r)}}}l([d()],Gy.prototype,"owner",null),Gy=l([S("esri.core.support.OwningCollection")],Gy);const Lpe=W.getLogger("esri.support.AnalysesCollection");let ub=class extends Gy{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{O(t.item)||t.item.parent===this.owner&&(Lpe.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};ub=l([S("esri.support.AnalysesCollection")],ub);let qy=class extends Gy{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};l([VA({Type:zi,ensureType:it(zi)})],qy.prototype,"itemType",void 0),qy=l([S("esri.support.GraphicsCollection")],qy);let ml=class extends ce{constructor(e){super(e),this.view=null,this.baseLayerViews=new me,this.referenceLayerViews=new me,this._loadingHandle=Y(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap},t=>{t&&t.load().catch(()=>{})},We)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,i;if(this.view&&this.view.suspended)return!1;const e=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};l([d({constructOnly:!0})],ml.prototype,"view",void 0),l([d({readOnly:!0})],ml.prototype,"baseLayerViews",void 0),l([d({readOnly:!0})],ml.prototype,"referenceLayerViews",void 0),l([d({readOnly:!0})],ml.prototype,"suspended",null),l([d({type:Boolean,readOnly:!0})],ml.prototype,"updating",null),ml=l([S("esri.views.BasemapView")],ml);const Ope=W.getLogger("esri.views.LayerViewManager");class kpe{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Sa(),this._started=!1,this.done=!1,$n(this._controller.signal,()=>{const n=new P("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var n,s;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let o,a;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)o=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new P("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(i);Ct(t),o="default"in h?new h.default({layer:i,view:r}):new h({layer:i,view:r})}const u=()=>{a=Zr(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=$n(t,u),Ct(t);try{await o.when()}catch(h){throw u(),h}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(i)))return u(),void this._deferred.reject(new P("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=o,i.emit("layerview-create",{view:r,layerView:o}),r.emit("layerview-create",{layer:i,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){i.emit("layerview-create-error",{view:r,error:o}),r.emit("layerview-create-error",{layer:i,error:o}),this.done=!0,this._deferred.reject(new P("layerview:create-error","layerview creation failed",{layer:i,error:o}))}}}let wn=class extends sm{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new Rh,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const t=(i=this.view.map)==null?void 0:i.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(O(this._workPromise)&&(this._workPromise=Sa()),this.handles.remove("reschedule"),this.handles.add(bp(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var s,o,a;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),O(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const i=new Yh({getCollections:()=>this._rootCollectionNames.map(u=>this.get(u)),getChildrenFunction:u=>u&&"layers"in u?u.layers:null});if(!i)return this._workPromise.resolve(),void(this._workPromise=null);for(const u of i)this._createLayerView(u);this._refreshCollections();for(const[u,c]of this._layerLayerViewInfoMap)i.includes(u)||(this._layerLayerViewInfoMap.delete(c.layer),c.destroy());const r=i.filter(u=>u.type==="group").map(u=>u.layers),n=[(s=t==null?void 0:t.ground)==null?void 0:s.layers,(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers,(a=t==null?void 0:t.basemap)==null?void 0:a.referenceLayers,t==null?void 0:t.layers,...r].filter(u=>!!u);this.handles.add(n.map(u=>this._watchUpdatingTracking.addOnCollectionChange(()=>u,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([iu(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Y(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Al)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return E(this._workPromise)||this._watchUpdatingTracking.updating||Ub(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new P("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const n of e){const s=this._layerLayerViewInfoMap.get(n);if(!s||!s.layerView)continue;const o=s.layerView;o.layer=n,o.parent=i,t.getItemAt(r)!==o&&t.splice(r,0,o),n.layers&&this._populateLayerViewsOwners(n.layers,o.layerViews,o),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new kpe(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var r,n;i&&(lr(i)||i.name==="cancelled:layerview-create")||Ope.error(`Failed to create layerview for layer title:'${(r=e.title)!=null?r:"no title"}', id:'${(n=e.id)!=null?n:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([d()],wn.prototype,"_workPromise",void 0),l([d({readOnly:!0})],wn.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0})],wn.prototype,"_layersToLayerViews",null),l([d({readOnly:!0})],wn.prototype,"_rootCollectionNames",null),l([d()],wn.prototype,"layerViewImporter",void 0),l([d()],wn.prototype,"supportsGround",void 0),l([d({readOnly:!0})],wn.prototype,"updating",null),l([d({readOnly:!0})],wn.prototype,"updatingRemaining",null),l([d({constructOnly:!0})],wn.prototype,"view",void 0),wn=l([S("esri.views.LayerViewManager")],wn);const Fpe=wn;let Hr=class extends ce{constructor(e){super(e),this.factor=1.5,this.offset=Ar(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([d({type:Number})],Hr.prototype,"factor",void 0),l([d({nonNullable:!0})],Hr.prototype,"offset",void 0),l([d()],Hr.prototype,"position",void 0),l([d({type:Number,range:{min:0}})],Hr.prototype,"size",void 0),l([d()],Hr.prototype,"maskUrl",void 0),l([d()],Hr.prototype,"maskEnabled",void 0),l([d()],Hr.prototype,"overlayUrl",void 0),l([d()],Hr.prototype,"overlayEnabled",void 0),l([d({readOnly:!0})],Hr.prototype,"version",null),l([d({type:Boolean})],Hr.prototype,"visible",void 0),Hr=l([S("esri.views.Magnifier")],Hr);const bU=Hr;let U1=class extends ce{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return this.running=!0,new Promise((r,n)=>this._tasks.push(new k5(r,n,e,t,i)))}unshift(e,t,i){return this.running=!0,new Promise((r,n)=>this._tasks.unshift(new k5(r,n,e,t,i)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const i=Pn(t.signal);if(i&&!t.abortCallback)t.reject(Mt());else{const r=i?t.abortCallback(Mt()):t.callback(e);Aa(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(i){t.reject(i)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=Mt();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0,this.running=!1}};l([d()],U1.prototype,"running",void 0),U1=l([S("esri.layers.support.PromiseQueue")],U1);class k5{constructor(t,i,r,n,s){this.resolve=t,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=s}}let dy=class extends ce{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};l([d()],dy.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),l([d()],dy.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),dy=l([S("esri.views.support.DebugFlags")],dy);const Bpe=new dy,Upe=W.getLogger("esri.views.support.Scheduler");var Be;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(Be||(Be={}));const Qs=0,F5=new Map([[Be.RESOURCE_CONTROLLER,Qs],[Be.SLIDE,Qs],[Be.STREAM_DATA_LOADER,Qs],[Be.ELEVATION_QUERY,Qs],[Be.TERRAIN_SURFACE,1],[Be.SURFACE_GEOMETRY_UPDATES,1],[Be.GRAPHICS_CORE,2],[Be.I3S_CONTROLLER,2],[Be.POINT_CLOUD_LAYER,2],[Be.FEATURE_TILE_FETCHER,2],[Be.OVERLAY,4],[Be.STAGE,4],[Be.GRAPHICS_DECONFLICTOR,4],[Be.FILTER_VISIBILITY,4],[Be.SCALE_VISIBILITY,4],[Be.FRUSTUM_VISIBILITY,4],[Be.POINT_OF_INTEREST_FREQUENT,6],[Be.POINT_OF_INTEREST_INFREQUENT,30],[Be.LABELER,8],[Be.FEATURE_QUERY_ENGINE,8],[Be.FEATURE_TILE_TREE,16],[Be.FEATURE_TILE_TREE_ACTIVE,Qs],[Be.ELEVATION_ALIGNMENT,12],[Be.TEXT_TEXTURE_ATLAS,12],[Be.CLOUDS_GENERATOR,12],[Be.TEXTURE_UNLOAD,12],[Be.LINE_OF_SIGHT_TOOL,16],[Be.LINE_OF_SIGHT_TOOL_INTERACTIVE,Qs],[Be.SNAPPING,Qs],[Be.SHADOW_ACCUMULATOR,30]]);function B5(e){return F5.has(e)?F5.get(e):typeof e=="number"?e:1}var qr;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(qr||(qr={}));const U5=6.5,V5=1,Vpe=30,j5=1e3/30,z5=100,H5=.9;var Wx,bu;(function(e){let t=class extends ce{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new Sy("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=qr.INTERACTING,this._tasks=new Hl,this._runQueue=new Hl,this._load=0,this._idleStateCallbacks=new Hl,this._idleUpdatesStartFired=!1,this._maxReschedule=yg,this._forceTask=!1,this._debug=!1,this._debugHandle=Y(()=>Bpe.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,We);for(const o of Object.keys(Be))this.performanceInfo.tasks.set(Be[o],new Sy(Be[o]));let n;const s=this;this._test={get state(){return Rb(n,s._state)},set state(o){n=o},FRAME_SAFETY_BUDGET:U5,INTERACTING_BUDGET:j5,IDLE_BUDGET:z5,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),Zr(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=yg,this._schedule(),this.frame()))}))}registerTask(n,s){const o=B5(n),a=new i(this,n,s,o);return this._tasks.push(a),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new Sy(n)),a}registerIdleStateCallbacks(n,s){const o={idleBegin:n,idleEnd:s};this._idleStateCallbacks.push(o),this.state===qr.IDLE&&this._idleUpdatesStartFired&&o.idleBegin();const a=this;return{remove:()=>this._removeIdleStateCallbacks(o),set idleBegin(u){a._idleUpdatesStartFired&&(o.idleEnd(),a._state===qr.IDLE&&u()),o.idleBegin=u},set idleEnd(u){o.idleEnd=u}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==qr.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(s=>s.idleEnd())))}get state(){return O(this._test.state)?this._state:this._test.state}updateBudget(n){this._test.usedBudget=0;let s=U5,o=n.frameDuration,a=V5;switch(this.state){case qr.IDLE:s=0,o=Math.max(z5,n.frameDuration),a=Vpe;break;case qr.INTERACTING:o=Math.max(j5,n.frameDuration);case qr.ANIMATING:}return o=o-n.elapsedFrameTime-s,this.state!==qr.IDLE&&o<V5&&!this._forceTask?(this._forceTask=!0,!1):(o=Math.max(o,a),this._budget.reset(o,this.state),this._maxReschedule=yg,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case qr.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case qr.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n)}_updateTask(n){this._tasks.forAll(s=>{s.name===n&&s.setPriority(n)})}_getState(n){if(this._runQueue.some(o=>o.name===n))return bu.SCHEDULED;let s=bu.IDLE;return this._tasks.forAll(o=>{o.name===n&&o.needsUpdate&&(o.schedulePriority<=1?s=bu.READY:s!==bu.READY&&(s=bu.WAITING))}),s}_getRuntime(n){let s=0;return this._tasks.forAll(o=>{o.name===n&&(s+=o.runtime)}),s}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(o=>{o.needsUpdate&&n.set(o.name,(n.get(o.name)||0)+1)}),n.size===0)return null;let s="";return n.forEach((o,a)=>{s+=o>1?` ${o}x ${a}`:` ${a}`}),s}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((s,o)=>o.needsUpdate?++s:s,0);this._load=this._load*H5+n*(1-H5)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===Qs&&n.needsUpdate&&!this._runQueue.includes(n)&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,s=0;if(this._tasks.forAll(o=>{o.needsUpdate&&o.schedulePriority!==0&&o.basePriority!==Qs&&(n=!0,s=Math.max(s,o.basePriority),o.schedulePriority===1?(o.schedulePriority=0,this._runQueue.push(o)):--o.schedulePriority)}),!n)return this.updating=!1,!1;this._maxReschedule===yg&&(this._maxReschedule=s),--this._maxReschedule}return this.updating=!0,!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)}catch(u){Upe.error(`Exception in task "${o.name}"`,u)}o.schedulePriority=o.basePriority;const a=this._budget.now()-s;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",o.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(u=>u.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-n)}while(this._schedule());this.updating=this._tasks.some(s=>s.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(Be))this._frameTaskTimes.set(Be[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((s,o)=>this.performanceInfo.tasks.get(o).record(s)),this.performanceInfo.total.record(n)}get test(){return this._test}};l([d()],t.prototype,"updating",void 0),t=l([S("esri.views.support.Scheduler")],t),e.Scheduler=t;let i=class extends ce{constructor(n,s,o,a){super({}),this._scheduler=n,this.name=s,this._basePriority=a,this.runtime=0,this._queue=new U1,this._handles=new Mi,this.schedulePriority=this._basePriority,this.task=E(o)?o:this._queue,this._handles.add(Ln(()=>this.task.running,()=>n.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(wU),this._scheduler.removeTask(this),this.schedule=Yx.schedule,this.reschedule=Yx.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){this.name=n;const s=B5(n);this._basePriority!==Qs&&this.schedulePriority===0||(this.schedulePriority=s),this._basePriority=s}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,s,o){return this._queue.push(n,s,o)}reschedule(n,s,o){return this._queue.unshift(n,s,o)}processQueue(n){this._queue.runTask(n)}};l([d({constructOnly:!0})],i.prototype,"task",void 0),l([d({readOnly:!0})],i.prototype,"updating",null),i=l([S("esri.views.support.SchedulerTask")],i);class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=qr.IDLE,this._didWork=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=r})(Wx||(Wx={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(bu||(bu={}));const wU=(()=>{const e=new Wx.Budget;return e.enabled=!1,e})();class jpe{remove(){}processQueue(){}schedule(t,i,r){try{if(Pn(i)){const n=Mt();return r?Promise.resolve(r(n)):Promise.reject(n)}return J_(t(wU))}catch(n){return Promise.reject(n)}}reschedule(t,i,r){return this.schedule(t,i,r)}}const Yx=new jpe,yg=Number.MAX_SAFE_INTEGER;let hy=class extends ce{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(Be.TEXTURE_UNLOAD))!=null?i:Yx}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let n=this._textureRequests.get(r);return n||(n={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(n.texture),this._stage.loadImmediate(n.texture)),this._textureRequests.set(r,n)),n.referenceCount++,{uid:r,texture:n.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return E(t)?`${e}.${t}px`:e}};l([d()],hy.prototype,"_frameTask",void 0),l([d()],hy.prototype,"updating",null),hy=l([S("esri.views.3d.support.TextureCollection")],hy);var G5;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(G5||(G5={}));const _U=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],SU={};function TU(e){return!!SU[e]}function zpe(e){for(const t of e)if(!TU(t))return!1;return!0}_U.forEach(e=>{SU[e]=!0});class Hpe{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:i,priority:r},n)=>this.inputManager.installHandlers(n,[i],r))}disconnect(){this.inputManager&&this.handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,i,r,n){const s=Array.isArray(t)?t:t.split(",");if(!zpe(s))return s.some(TU)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:n=r,n=n!=null?n:Zl.DEFAULT;const u=this._createUniqueGroupName(),c=new Gpe(this.view,s,a,o);this.handlers.set(u,{handler:c,priority:n});for(const h of s){const f=this.handlerCounts.get(h)||0;this.handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(u,[c],n),{remove:()=>this._removeHandler(u,s)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,i){if(this.handlers.has(t)){this.handlers.delete(t);for(const r of i){const n=this.handlerCounts.get(r);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):n===1?this.handlerCounts.delete(r):this.handlerCounts.set(r,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class Gpe extends hi{constructor(t,i,r,n){super(!0),this.view=t;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,o=>n(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",r,o=>n(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>n(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>n(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",r,o=>n(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>n(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>n(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>n(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>n(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>n(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>n(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>n(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>n(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>n(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{n(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",r,o=>{n(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",r,o=>{n(this._wrapBlur(o))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,{cancelable:c,timestamp:h}=t;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:Ar(s,o),mapPoint:this._getMapPoint(s,o),eventId:u,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,{cancelable:c,timestamp:h}=t;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(s,o),eventId:u,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(s,o),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:u}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(s,o),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a}=t.data,{cancelable:u,timestamp:c}=t;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:this._getMapPoint(s,o),cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(Ar(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this.latestDragStart=i),!this.latestDragStart)return;const u=i.pointer.native,c=i.buttons,{cancelable:h,timestamp:f}=t,y={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return s==="end"&&(this.latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:y,pointerType:o,button:a,buttons:c,radius:i.radius,angle:SL(i.angle),native:u,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:n}=t.data,{cancelable:s,timestamp:o}=t;return{type:"key-down",key:i,repeat:r,native:n,timestamp:o,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-up",key:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:o=>t.async(o),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:n,button:s,buttons:o,native:a,eventId:u}=t.data,c=a.pointerId,h=a.pointerType,{cancelable:f,timestamp:y}=t;return{type:i,x:r,y:n,pointerId:c,pointerType:h,button:s,buttons:o,native:a,timestamp:y,eventId:u,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:n,native:s,eventId:o}=t.data.currentEvent,{button:a}=t.data.startEvent,u=t.data.startEvent.native.pointerId,c=t.data.startEvent.native.pointerType,h=t.data.action,f={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:y,timestamp:m}=t;return{type:"pointer-drag",x:i,y:r,pointerId:u,pointerType:c,button:a,buttons:n,action:h,origin:f,native:s,timestamp:m,eventId:o,cancelable:y,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:n}=t,{x:s,y:o,deltaY:a,native:u}=r;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:u,timestamp:n,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:n}=t.data,{cancelable:s,timestamp:o}=t,{buttons:a,axes:u}=r;return{type:"gamepad",device:n,timestamp:o,action:i,buttons:a,axes:u,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}}var Im,q5,W5;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Im||(Im={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(q5||(q5={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(W5||(W5={}));const qpe=W.getLogger("esri.views.interactive.interactiveToolUtils");function Wpe(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return qpe.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.visible=!1,i.active&&(i.view.activeTool=null),i.destroy()})]}function cb(e){return e.visible&&e.getEditableFlag(Im.USER)&&e.getEditableFlag(Im.MANAGER)}function Ks(e){return Ar(e.x,e.y)}function EU(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Ar(t.clientX-i.left,t.clientY-i.top)}function Y5(e,t){return t instanceof Event?EU(e,t):Ks(t)}function K5(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class Ype{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":Z5(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!J5(t))break;const n=Ks(t),s=this._intersect(n,t.pointerType,i.forEachTool);if(O(s))break;const o=this._findToolAndManipulatorByKey(s,i.forEachTool,mg),a=to(o,c=>c.manipulator),u=to(o,c=>c.tool);!(E(a)&&E(u)&&a.interactive)||a.grabbable&&a.grabbableForEvent(t)||!a.grabbing||a.dragging||this._ungrabManipulatorBeforeDragging(a,u,t),E(a)&&a.interactive&&a.grabbable&&a.grabbableForEvent(t)&&!a.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:s,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool!==s.tool&&(this._currentlyActiveTool=i.activeTool,this._revertToActiveTool=!0,i.setActiveTool(s.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),r());break}case"pointer-up":this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!J5(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=this._draggedManipulators.get(t.pointerId),o=to(n||s,({key:h})=>h),a=this._findManipulatorByKey(o,i.forEachTool);if(O(a))break;const u=Ks(t);u.x=Nr(u.x,0,i.view.width),u.y=Nr(u.y,0,i.view.height);const c=(n||s).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(a.dragging=!0,s?a.events.emit("drag",{action:"update",start:c,screenPoint:u}):a.events.emit("drag",{action:"start",start:c,screenPoint:u,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:o,start:c}));break;case"end":a.dragging=!1,s&&a.events.emit("drag",{action:"end",start:c,screenPoint:u}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const n=Ks(t),s=this._intersect(n,t.pointerType,i.forEachTool),o=this._findToolAndManipulatorByKey(s,i.forEachTool,mg);if(Kpe(t)||i.forEachTool(h=>{if((!E(o)||o.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let f=!1;h.manipulators.forEach(({manipulator:y})=>{y.selected&&(y.selected=!1,f=!0)}),f&&h.manipulatorSelectionChanged&&h.manipulatorSelectionChanged()}}),O(o))break;const{manipulator:a,tool:u}=o;if(!a.interactive)break;a.selectable&&u.automaticManipulatorSelection&&(a.selected=!a.selected,u.manipulatorSelectionChanged&&u.manipulatorSelectionChanged());const c=t.native.shiftKey;a.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:c,stopPropagation:r});break}case"click":{const n=Ks(t),s=this._intersect(n,t.pointerType,i.forEachTool),o=this._findManipulatorByKey(s,i.forEachTool);if(O(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{const n=Ks(t),s=this._intersect(n,t.pointerType,i.forEachTool),o=this._findManipulatorByKey(s,i.forEachTool);if(O(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}case"immediate-double-click":{const n=Ks(t),s=this._intersect(n,t.pointerType,i.forEachTool),o=this._findManipulatorByKey(s,i.forEachTool);if(O(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Ks(r)}),this._grabbedManipulators.forEach(({key:n},s)=>{n.tool===i&&i.manipulators.findById(n.manipulatorId)===t&&this._grabbedManipulators.delete(s)})}_handlePointerEnd(t,i){const r=to(this._grabbedManipulators.get(t.pointerId),({key:s})=>s),n=this._findManipulatorByKey(r,i.forEachTool);E(n)&&!n.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(i.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Ks(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,i){let r=null;return Ub(t,({key:n})=>{const s=this._findManipulatorByKey(n,i);return!!(E(s)&&s.interactive&&"cursor"in s&&s.cursor)&&(r=s.cursor,!0)}),r}_onFocusChange(t){this._updateCursor(t),this._updateFocusedManipulatorTools(t)}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set;this._grabbedManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),this._hoveredManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),t(r=>{r.hasFocusedManipulators=i.has(r)})}clearPointers(t,i,r=!0,n){const s=o=>o.tool===t&&(O(n)||o.manipulatorId===n);this._grabbedManipulators.forEach(({key:o,pointerType:a},u)=>{if(s(o)){this._grabbedManipulators.delete(u);const c=this._findManipulatorByKey(o,i);E(c)&&(c.grabbing=!1,c.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:a}))}}),this._draggedManipulators.forEach(({key:o},a)=>{if(s(o)){this._draggedManipulators.delete(a);const u=this._findManipulatorByKey(o,i);E(u)&&(u.dragging=!1,u.events.emit("drag",{action:"cancel"}))}}),r&&this._hoveredManipulators.forEach(({key:o},a)=>{if(s(o)){this._hoveredManipulators.delete(a);const u=this._findManipulatorByKey(o,i);E(u)&&(u.hovering=!1)}}),this._onFocusChange(i)}_intersect(t,i,r){let n=null;return r(s=>{if(s.manipulators==null||!cb(s))return!1;const o=s.manipulators.intersect(t,i);return!O(o)&&(n={manipulatorId:o.id,tool:s},!0)}),n}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Ar(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!Z5(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Ks(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,n){const s=this._intersect(t,r,n);let o=this._findManipulatorByKey(s,n);const a=to(this._hoveredManipulators.get(i),({key:c})=>c),u=this._findManipulatorByKey(a,n);E(o)&&!o.interactive&&(o=null),u!==o&&(E(u)&&(u.hovering=!1),E(o)?(o.hovering=!0,this._hoveredManipulators.set(i,{key:s})):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_findManipulatorByKey(t,i){return this._findToolAndManipulatorByKey(t,i,mg)?mg.manipulator:null}_findToolAndManipulatorByKey(t,i,r){return O(t)?null:(r.tool=null,r.manipulator=null,i(n=>{if(n!==t.tool||n.manipulators==null||!cb(n))return!1;const s=n.manipulators.findById(t.manipulatorId);return!!E(s)&&(r.manipulator=s,r.tool=n,!0)}),r.manipulator?r:null)}}function Z5(e){return e==="mouse"}function J5(e){return e.pointerType!=="mouse"||e.button===0}function Kpe(e){return!!e.native.shiftKey}const mg={manipulator:null,tool:null},Zpe=W.getLogger("esri.views.ToolViewManager"),X5="attached",g_="tools";let Qo=class extends sm{constructor(e){super(e),this._manipulatorState=new Ype,this.tools=new me,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(_U,e=>{this._handleInputEvent(e)},Zl.TOOL),...Wpe(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(E(e)&&!this.view.ready)return void Zpe.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),E(t)&&t.deactivate(),E(e)&&e.activate(),this._removeIncompleteTools(e);const i=O(this.activeTool);for(const r of this.tools){r.setEditableFlag(Im.MANAGER,i||r===this.activeTool);const n=cb(r);!i&&n||this._manipulatorState.clearPointers(r,this._forEachTool,!n)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){this.view.type==="3d"?(this._set("textures",new hy(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([Y(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),gp(()=>this._set("textures",En(this.textures)))],X5)):this.handles.add(Y(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){E(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(X5)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};E(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:r=>{this.activeTool=r},view:this.view}),!t&&E(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(g_),this._forEachTool(e=>{if(e instanceof ce){const t=Y(()=>[e.cursor,e.visible,e.editable],()=>{cb(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,g_)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:i})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,i)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),g_)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const e=this._manipulatorState.cursor;let t=e;this._forEachTool(i=>!(!E(i.cursor)||!i.visible||!O(e)&&i.preferManipulatorCursor)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(e){this.tools.filter(t=>(O(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};l([d({constructOnly:!0,nonNullable:!0})],Qo.prototype,"view",void 0),l([d({readOnly:!0,nonNullable:!0})],Qo.prototype,"textures",void 0),l([d({value:null})],Qo.prototype,"activeTool",null),l([d({readOnly:!0,type:me})],Qo.prototype,"tools",void 0),l([d({readOnly:!0})],Qo.prototype,"cursor",void 0),l([d({readOnly:!0})],Qo.prototype,"updating",null),Qo=l([S("esri.views.ToolViewManager")],Qo);const Jpe=Qo;let Qd=class extends ce{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Xpe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Qpe[this.deviceType]}};l([d({nonNullable:!0,readOnly:!0})],Qd.prototype,"nativeIndex",void 0),l([d({type:String,readOnly:!0})],Qd.prototype,"deviceType",null),l([d({type:Number,readOnly:!0})],Qd.prototype,"axisThreshold",null),Qd=l([S("esri.views.input.gamepad.GamepadInputDevice")],Qd);const Xpe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Qpe={standard:.15,spacemouse:.025,unknown:0},rC=Qd;let py=class extends ce{constructor(...e){super(...e),this.devices=new me,this.enabledFocusMode="document"}};l([d({type:me.ofType(rC),readOnly:!0})],py.prototype,"devices",void 0),l([d({type:["document","view","none"]})],py.prototype,"enabledFocusMode",void 0),py=l([S("esri.views.input.gamepad.GamepadSettings")],py);const efe=py;let V1=class extends ce{constructor(){super(...arguments),this.gamepad=new efe}};l([d({readOnly:!0})],V1.prototype,"gamepad",void 0),V1=l([S("esri.views.input.Input")],V1);const tfe=V1;let gl=class extends ce{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([d({type:Boolean,nonNullable:!0})],gl.prototype,"enabled",void 0),l([d({type:rC})],gl.prototype,"device",void 0),l([d({type:["pan","zoom"],nonNullable:!0})],gl.prototype,"mode",void 0),l([d({type:["forward-down","forward-up"],nonNullable:!0})],gl.prototype,"tiltDirection",void 0),l([d({type:Number,nonNullable:!0})],gl.prototype,"velocityFactor",void 0),gl=l([S("esri.views.navigation.gamepad.GamepadSettings")],gl);const xU=gl;let Qu=class extends ce{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new xU,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};l([d({type:Boolean})],Qu.prototype,"browserTouchPanEnabled",void 0),l([d({type:xU,nonNullable:!0})],Qu.prototype,"gamepad",void 0),l([d({type:Boolean})],Qu.prototype,"momentumEnabled",void 0),l([d({type:Boolean})],Qu.prototype,"mouseWheelZoomEnabled",void 0),Qu=l([S("esri.views.navigation.Navigation")],Qu);const AU=Qu;var Q5;function ife(e){const t=e.url&&lp(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&E(t)&&t.serverType==="ImageServer")&&MU(e)&&e.heightModelInfo?e.heightModelInfo:rfe(e)?Pw.deriveUnitFromSR(sfe,e.spatialReference):null}function MU(e){return"heightModelInfo"in e}function CU(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function rfe(e){return CU(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):IU(e)}function nfe(e){return e.layers!=null||IU(e)||CU(e)||MU(e)}function IU(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Q5||(Q5={}));const sfe=new Pw({heightModel:"gravity-related-height"});var db;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(db||(db={}));let Kx,v_=null;async function ofe(e){v_||(v_=V(()=>import("./geometryServiceUtils.2dede0c7.js"),[],import.meta.url).then(t=>Kx=t)),await v_,Ct(e)}async function NU(e,t,i,r){if(!e)return null;const n=e.spatialReference;return Zc()||su(n,t)?Ip(e,t):Kx?Kx.projectGeometry(e,t,i,r):(await Promise.race([ofe(r),Jc(r)]),NU(e,t,i,r))}let rt=class extends ce{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=H_(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return E(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return O(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,r,n,s;const e=(i=this.map)==null?void 0:i.call(this),t=[];return E(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(n=e==null?void 0:e.ground)==null?void 0:n.layers},{parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var n;if(this.suspended)return(n=this._get("_spatialReferenceTask"))!=null?n:{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const s of e){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(i,o);E(a)&&(i=a)}if(E(i)&&i.length===1)break}if(t&&(O(i)||i.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(i);return{spatialReference:E(r)?r.spatialReference:null,viewingMode:E(r)?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,r,n,s,o,a,u,c;if(!this.required.tileInfo)return(i=this._get("_tileInfoTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(n=(r=this.map)==null?void 0:r.call(this))==null?void 0:n.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(c=(u=this.map)==null?void 0:u.call(this))==null?void 0:c.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const h=e[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var i,r,n,s;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))==null?void 0:i.heightModelInfo))return(r=this._get("_heightModelInfoTask"))!=null?r:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const o of e)if(nfe(o)){const a=ife(o);if(a)return{heightModelInfo:a,vcsWkid:(n=o.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var r,n;if(this.suspended||!this.required.extent)return(r=this._get("_extentCandidatesTask"))!=null?r:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const s of e.layers){const o="fullExtents"in s&&s.fullExtents||(E(s.fullExtent)?[s.fullExtent]:[]),a=this.requiresExtentInSpatialReference?null:o[0],u=(n=o.find(c=>c.spatialReference.equals(this.spatialReference)))!=null?n:a;if(u)return{candidates:[{extent:u,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const c of o)i.push({extent:c,layer:s})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(O(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:E(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(E(this._projectExtentTask.task)&&(this._projectExtentTask.task=H_(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:LA(async n=>{try{const s=await NU(i.extent,r,i.layer.portalItem,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:s}}catch{if(Pn(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(O(e))return t;const i=[],r=(n,s)=>E(n)?E(s)?n===s&&n:n:s;for(const n of e)for(const s of t){if(!n.spatialReference.equals(s.spatialReference))continue;const o=r(n.viewingMode,s.viewingMode);if(o!==!1){i.push({spatialReference:n.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return O(e)||e.length<1?E(t)?{spatialReference:t,viewingMode:null}:null:(E(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==db.Local)&&(e=e.filter(({viewingMode:i})=>i!==db.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const r of t){const n=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(E(n)){const s=E(n.constraints)?n.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:o,viewingMode:a}of s)(!this.requiresExtentInSpatialReference||O(this.userSpatialReference)||o.equals(this.userSpatialReference))&&i.push({spatialReference:o,viewingMode:a})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load(),"loading"):e.loadStatus:"loaded"}};l([d()],rt.prototype,"required",void 0),l([d({constructOnly:!0})],rt.prototype,"map",void 0),l([d({constructOnly:!0})],rt.prototype,"getSpatialReferenceSupport",void 0),l([d()],rt.prototype,"defaultSpatialReference",void 0),l([d()],rt.prototype,"userSpatialReference",void 0),l([d()],rt.prototype,"sourcePreloadCount",void 0),l([d()],rt.prototype,"priorityCollection",void 0),l([d()],rt.prototype,"requiresExtentInSpatialReference",void 0),l([d()],rt.prototype,"suspended",void 0),l([d({readOnly:!0})],rt.prototype,"ready",null),l([d({readOnly:!0})],rt.prototype,"heightModelInfoReady",null),l([d({readOnly:!0})],rt.prototype,"spatialReference",null),l([d({readOnly:!0})],rt.prototype,"extent",null),l([d({readOnly:!0})],rt.prototype,"heightModelInfo",null),l([d({readOnly:!0})],rt.prototype,"vcsWkid",null),l([d({readOnly:!0})],rt.prototype,"latestVcsWkid",null),l([d({readOnly:!0})],rt.prototype,"viewingMode",null),l([d({readOnly:!0})],rt.prototype,"tileInfo",null),l([d({readOnly:!0})],rt.prototype,"mapCollections",null),l([d({readOnly:!0})],rt.prototype,"_allLayers",null),l([d({readOnly:!0})],rt.prototype,"_spatialReferenceTask",null),l([d({readOnly:!0})],rt.prototype,"_tileInfoTask",null),l([d({readOnly:!0})],rt.prototype,"_heightModelInfoTask",null),l([d({readOnly:!0})],rt.prototype,"_extentCandidatesTask",null),l([d()],rt.prototype,"_extentTask",null),l([d()],rt.prototype,"_projectExtentTask",void 0),rt=l([S("esri.views.support.DefaultsFromMap")],rt);var j1;const gg=W.getLogger("esri.views.View");let ve=j1=class extends uu(Ma.EventedMixin(jb(ce))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Yh({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new qy,this.analyses=new ub,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new me,this.magnifier=new bU,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new tfe,this.navigation=new AU,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Hpe(this),this.persistableViewModels=new me,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(Y(()=>this.preconditionsReady,t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,j1.views.add(this)):(this._currentSpatialReference=null,j1.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.layerViewManager)==null||i.clear(),(r=this.toolViewManager)==null||r.detach(),E(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(this._startup(),E(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Wh))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,nm(()=>this.ready)))),this.basemapView=new ml({view:this}),this.layerViewManager=new Fpe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Jpe({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Y(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),Y(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Y(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([Y(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(E(e))return;const n=gp(()=>e=H_(e));e=LA(async s=>{try{await Fb(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}gg.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=En(this.graphics),this.analyses=En(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),En(this.analysisViewManager),this.toolViewManager=En(this.toolViewManager),this.layerViewManager=En(this.layerViewManager),this.basemapView=En(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return gg.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new rt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||go.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(gg.warn("#map","The provided map is already destroyed",{map:e}),e=null),go.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!hr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return E(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(i=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?i:null}importLayerView(e){throw new P("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return E(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&gg.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Ln(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};ve.views=new me,l([d()],ve.prototype,"_userSpatialReference",void 0),l([X("toolViewManager.activeTool")],ve.prototype,"activeTool",void 0),l([d({readOnly:!0})],ve.prototype,"allLayerViews",void 0),l([d()],ve.prototype,"groundView",void 0),l([d()],ve.prototype,"animation",void 0),l([d()],ve.prototype,"basemapView",void 0),l([d({readOnly:!0})],ve.prototype,"_defaultsFromMapSettings",null),l([d()],ve.prototype,"defaultsFromMap",null),l([d()],ve.prototype,"fatalError",void 0),l([d({type:Ue})],ve.prototype,"extent",void 0),l([d(O5(qy,"graphics"))],ve.prototype,"graphics",void 0),l([d(O5(ub,"analyses"))],ve.prototype,"analyses",void 0),l([d({readOnly:!0,type:Pw})],ve.prototype,"heightModelInfo",null),l([d({readOnly:!0})],ve.prototype,"interacting",null),l([d({readOnly:!0})],ve.prototype,"navigating",void 0),l([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ve.prototype,"preconditionsReady",null),l([d({readOnly:!0})],ve.prototype,"typeSpecificPreconditionsReady",void 0),l([d({type:me,readOnly:!0})],ve.prototype,"layerViews",void 0),l([d({type:bU})],ve.prototype,"magnifier",void 0),l([d({value:null,type:zL})],ve.prototype,"map",null),l([d()],ve.prototype,"padding",void 0),l([d({readOnly:!0})],ve.prototype,"ready",void 0),l([d({type:we})],ve.prototype,"spatialReference",null),l([d()],ve.prototype,"spatialReferenceWarningDelay",void 0),l([d()],ve.prototype,"stationary",null),l([d({readOnly:!0})],ve.prototype,"supportsGround",void 0),l([d({type:Ao})],ve.prototype,"timeExtent",void 0),l([X("toolViewManager.tools")],ve.prototype,"tools",void 0),l([d()],ve.prototype,"toolViewManager",void 0),l([d({readOnly:!0})],ve.prototype,"type",void 0),l([d({type:Number})],ve.prototype,"scale",void 0),l([d({readOnly:!0})],ve.prototype,"updating",void 0),l([d({readOnly:!0})],ve.prototype,"initialExtentRequired",void 0),l([d({readOnly:!0})],ve.prototype,"initialExtent",null),l([d()],ve.prototype,"cursor",null),l([d({readOnly:!0})],ve.prototype,"input",void 0),l([d({type:AU,nonNullable:!0})],ve.prototype,"navigation",void 0),l([d()],ve.prototype,"layerViewManager",void 0),l([d()],ve.prototype,"analysisViewManager",void 0),l([d()],ve.prototype,"width",void 0),l([d()],ve.prototype,"height",void 0),l([d({readOnly:!0})],ve.prototype,"resizing",void 0),l([d({value:null,readOnly:!0})],ve.prototype,"size",null),l([d({readOnly:!0})],ve.prototype,"suspended",void 0),l([d({readOnly:!0})],ve.prototype,"viewEvents",void 0),l([d({readOnly:!0})],ve.prototype,"persistableViewModels",void 0),l([d()],ve.prototype,"_isValid",void 0),l([d()],ve.prototype,"_readyCycleForced",void 0),l([d()],ve.prototype,"_currentSpatialReference",void 0),ve=j1=l([S("esri.views.View")],ve);const afe=ve;let vl=class extends vv{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new P("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=Aa(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};l([d({readOnly:!0})],vl.prototype,"done",null),l([d({readOnly:!0,type:String})],vl.prototype,"state",void 0),l([d()],vl.prototype,"target",void 0),vl=l([S("esri.views.ViewAnimation")],vl),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(vl||(vl={}));const Zx=vl;function Ll(e,t,i,r){const n=3*e,s=3*(i-e)-n,o=1-n-s,a=3*t,u=3*(r-t)-a,c=1-a-u;function h(g){return((o*g+s)*g+n)*g}function f(g){return((c*g+u)*g+a)*g}function y(g){return(3*o*g+2*s)*g+n}function m(g,v){let b,w,T,A,R,M;for(T=g,M=0;M<8;M++){if(A=h(T)-g,Math.abs(A)<v)return T;if(R=y(T),Math.abs(R)<1e-6)break;T-=A/R}if(b=0,w=1,T=g,T<b)return b;if(T>w)return w;for(;b<w;){if(A=h(T),Math.abs(A-g)<v)return T;g>A?b=T:w=T,T=.5*(w-b)+b}return T}return function(g,v=1e-6){return f(m(g,v))}}const lfe=/^cubic-bezier\((.*)\)/,Tn={};function ufe(e){let t=Tn[e]||null;if(!t){const i=lfe.exec(e);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(t=Ll.apply(Ll,r))}}return t}Tn.ease=Ll(.25,.1,.25,1),Tn.linear=Ll(0,0,1,1),Tn.easeIn=Tn["ease-in"]=Ll(.42,0,1,1),Tn.easeOut=Tn["ease-out"]=Ll(0,0,.58,1),Tn.easeInOut=Tn["ease-in-out"]=Ll(.42,0,.58,1);function Jl(){return[1,0,0,1,0,0]}function cfe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function dfe(e,t,i,r,n,s){return[e,t,i,r,n,s]}function hfe(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:Jl,clone:cfe,fromValues:dfe,createView:hfe},Symbol.toStringTag,{value:"Module"}));function Nm(e,t){return e[0]=t[0],e[1]=t[1],e}function ui(e,t,i){return e[0]=t,e[1]=i,e}function RU(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Rm(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function PU(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function $U(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function pfe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function ffe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function yfe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function mfe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function gfe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function u0(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function vfe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function c0(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function hb(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function pb(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function DU(e){const t=e[0],i=e[1];return t*t+i*i}function LU(e,t){return e[0]=-t[0],e[1]=-t[1],e}function bfe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Jx(e,t){const i=t[0],r=t[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function OU(e,t){return e[0]*t[0]+e[1]*t[1]}function kU(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function wfe(e,t,i,r){const n=t[0],s=t[1];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e}function _fe(e,t){t=t||1;const i=2*Fl()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function Sfe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n,e[1]=i[1]*r+i[3]*n,e}function eo(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}function Tfe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[3]*n+i[6],e[1]=i[1]*r+i[4]*n+i[7],e}function Efe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e}function xfe(e,t,i,r){const n=t[0]-i[0],s=t[1]-i[1],o=Math.sin(r),a=Math.cos(r);return e[0]=n*a-s*o+i[0],e[1]=n*o+s*a+i[1],e}function Afe(e,t){const i=e[0],r=e[1],n=t[0],s=t[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const u=(i*n+r*s)*o*a;return u>1?0:u<-1?Math.PI:Math.acos(u)}function Mfe(e){return"vec2("+e[0]+", "+e[1]+")"}function Cfe(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ife(e,t){const i=e[0],r=e[1],n=t[0],s=t[1];return Math.abs(i-n)<=Te*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=Te*Math.max(1,Math.abs(r),Math.abs(s))}function Nfe(e,t,i,r,n){let s=t[0]-i[0],o=t[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const Rfe=pb,nC=Rm,Pfe=PU,$fe=$U,Dfe=c0,Lfe=hb,Ofe=DU;Object.freeze(Object.defineProperty({__proto__:null,copy:Nm,set:ui,add:RU,subtract:Rm,multiply:PU,divide:$U,ceil:pfe,floor:ffe,min:yfe,max:mfe,round:gfe,scale:u0,scaleAndAdd:vfe,distance:c0,squaredDistance:hb,length:pb,squaredLength:DU,negate:LU,inverse:bfe,normalize:Jx,dot:OU,cross:kU,lerp:wfe,random:_fe,transformMat2:Sfe,transformMat2d:eo,transformMat3:Tfe,transformMat4:Efe,rotate:xfe,angle:Afe,str:Mfe,exactEquals:Cfe,equals:Ife,projectAndScale:Nfe,len:Rfe,sub:nC,mul:Pfe,div:$fe,dist:Dfe,sqrDist:Lfe,sqrLen:Ofe},Symbol.toStringTag,{value:"Module"}));function Lt(){return[0,0]}function kfe(e){return[e[0],e[1]]}function d0(e,t){return[e,t]}function Ffe(e){const t=Lt(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Bfe(e,t){return new Float64Array(e,t,2)}function FU(){return Lt()}function BU(){return d0(1,1)}function UU(){return d0(1,0)}function VU(){return d0(0,1)}const Ufe=FU(),Vfe=BU(),jfe=UU(),zfe=VU();Object.freeze(Object.defineProperty({__proto__:null,create:Lt,clone:kfe,fromValues:d0,fromArray:Ffe,createView:Bfe,zeros:FU,ones:BU,unitX:UU,unitY:VU,ZEROS:Ufe,ONES:Vfe,UNIT_X:jfe,UNIT_Y:zfe},Symbol.toStringTag,{value:"Module"}));const jU=96,zU=39.37,Hfe=180/Math.PI;function HU(e){return e.wkid?e:e.spatialReference||we.WGS84}function sC(e,t){return t.type?ui(e,t.x,t.y):Nm(e,t)}function GU(e){return pu(e)}function Wy(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*Qfe(e.spatialReference)}async function fy(e,t,i,r){let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(me.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(h=>"attributes"in h),u=e.some(h=>!h.geometry);let c=e;if(a&&u&&t&&t.allLayerViews){const h=new Map;for(const g of e){const v=g.layer,b=h.get(v)||[],w=g.attributes[v.objectIdField];w!=null&&b.push(w),h.set(v,b)}const f=[];h.forEach((g,v)=>{const b=t.allLayerViews.find(w=>w.layer.id===v.id);if("queryFeatures"in b){const w=v.createQuery();w.objectIds=g,w.returnGeometry=!0,f.push(b.queryFeatures(w))}});const y=await Promise.all(f),m=[];for(const g of y)if(g&&g.features&&g.features.length)for(const v of g.features)E(v.geometry)&&m.push(v.geometry);c=m}for(const h of c)r=await fy(h,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new he(e);else if(e instanceof Ir)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const a=e.layer,u=t.allLayerViews.find(c=>c.layer.id===a.id);if("queryFeatures"in u){const c=a.createQuery();c.objectIds=[e.attributes[a.objectIdField]],c.returnGeometry=!0;const h=await u.queryFeatures(c);n=g9(h,"features",0,"geometry")}}}if(O(n)||(s=n.type==="point"?new Ue({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!s))return null;Zc()||su(s.spatialReference,i)||await Jc();const o=Ip(s,i);return o?r=r?r.union(o):o:null}function Gfe(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const n=r.layer;n&&n.minScale&&n.maxScale&&(t=n.minScale<t?n.minScale:t,i=n.maxScale>i?n.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function b_(e,t){return hr(HU(e),t)?e:Ip(e,t)}async function qfe(e,t){if(!e||!t)return new ao({targetGeometry:new he,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let u=null;e instanceof ao?u=e:e.viewpoint?u=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(u=e.target);let c=null;u&&u.targetGeometry?c=u.targetGeometry:e instanceof Ue?c=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(c=await fy(e.center,t,i)||await fy(e.extent,t,i)||await fy(e.target,t,i)||await fy(e,t,i)),!c&&s&&s.targetGeometry?c=s.targetGeometry:!c&&t.extent&&(c=t.extent),i||(i=HU(t.spatialReference||t.extent||c)),Zc()||hr(c.spatialReference,i)||su(c,i)||await Jc();const h=b_(c.center?c.center:c,i);let f=null;if(u&&E(u.targetGeometry)&&u.targetGeometry.type==="point")f=u.scale;else if("scale"in e&&e.scale)f=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)f=r.zoomToScale(e.zoom);else if(Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0){const v=b_(t.extent,i);f=E(v)?Wy(v,a):t.extent?Wy(t.extent,a):s.scale}else f=Wy(b_(c.extent,i),a);const y=Gfe(e);y&&(y.min&&y.min>f?f=y.min:y.max&&y.max<f&&(f=y.max));let m=0;u?m=u.rotation:e.hasOwnProperty("rotation")?m=e.rotation:s&&(m=s.rotation);let g=new ao({targetGeometry:h,scale:f,rotation:m});return r&&(g=r.fit(g),r.constrainByGeometry(g),r.rotationEnabled||(g.rotation=m)),g}function Ps(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Wfe(e,t,i){return i?ui(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):u0(e,t,.5)}const Yfe=function(){const e=Lt();return function(t,i,r){const n=i.targetGeometry;sC(e,n);const s=.5*zp(i);return t.xmin=e[0]-s*r[0],t.ymin=e[1]-s*r[1],t.xmax=e[0]+s*r[0],t.ymax=e[1]+s*r[1],t.spatialReference=n.spatialReference,t}}();function Kfe(e,t,i,r,n){return Xx(e,t,i.center),e.scale=Wy(i,r),n&&n.constraints&&n.constraints.constrain(e),e}function Zfe(e,t,i,r){return lC(e,t,i,r),QM(e,e)}const qU=function(){const e=Lt();return function(t,i,r){return nC(t,eye(t,i),Wfe(e,i,r))}}(),Jfe=function(){const e=Jl(),t=Lt();return function(i,r,n,s){const o=zp(r),a=oC(r);return ui(t,o,o),hU(e,t),Ow(e,e,a),Cm(e,e,qU(t,n,s)),Cm(e,e,[0,s.top-s.bottom]),ui(i,e[4],e[5])}}();function zp(e){return e.scale*Xfe(e.targetGeometry)}function Xfe(e){return E(e)&&ji(e.spatialReference)?1/(GU(e.spatialReference)*zU*jU):1}function oC(e){return s3(e.rotation)||0}function Qfe(e){return ji(e)?GU(e)*zU*jU:1}function eye(e,t){return u0(e,t,.5)}const aC=function(){const e=Lt(),t=Lt(),i=Lt();return function(r,n,s,o,a,u){return LU(e,n),u0(t,s,.5*u),ui(i,1/o*u,-1/o*u),tC(r,t),a&&Ow(r,r,a),eC(r,r,i),Cm(r,r,e),r}}(),lC=function(){const e=Lt();return function(t,i,r,n){const s=zp(i),o=oC(i);return sC(e,i.targetGeometry),aC(t,e,r,s,o,n)}}(),tye=function(){const e=Lt();return function(t,i,r,n){const s=zp(i);return sC(e,i.targetGeometry),aC(t,e,r,s,0,n)}}();function iye(e){const t=Es(e);return t?t.valid[1]-t.valid[0]:0}function rye(e,t){return Math.round(iye(e)/t)}const nye=function(){const e=Lt(),t=Lt(),i=[0,0,0];return function(r,n,s){Rm(e,r,n),Jx(e,e),Rm(t,r,s),Jx(t,t),kU(i,e,t);let o=Math.acos(OU(e,t)/(pb(e)*pb(t)))*Hfe;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),sye=function(){const e=Lt();return function(t,i,r,n){const s=t.targetGeometry;return Ps(t,i),Jfe(e,i,r,n),s.x+=e[0],s.y+=e[1],t}}(),Xx=function(e,t,i){Ps(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},oye=function(){const e=Lt();return function(t,i,r,n,s){s||(s="center"),nC(e,r,n),u0(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":ui(e,0,0);break;case"left":ui(e,-o,0);break;case"top":ui(e,0,a);break;case"right":ui(e,o,0);break;case"bottom":ui(e,0,-a);break;case"top-left":ui(e,-o,a);break;case"bottom-left":ui(e,-o,-a);break;case"top-right":ui(e,o,a);break;case"bottom-right":ui(e,o,-a)}return Bw(t,i,e),t}}();function exe(e,t,i){return Ps(e,t),e.rotation+=i,e}function aye(e,t,i){return Ps(e,t),e.rotation=i,e}const lye=function(){const e=Lt();return function(t,i,r,n,s){return Ps(t,i),isNaN(r)||r===0||(YU(e,n,i,s),t.scale=i.scale*r,KU(e,e,t,s),Bw(t,t,ui(e,e[0]-n[0],n[1]-e[1]))),t}}();function eP(e,t,i){return Ps(e,t),e.scale=i,e}const WU=function(){const e=Lt();return function(t,i,r,n,s,o){return Ps(t,i),isNaN(r)||r===0||(YU(e,s,i,o),t.scale=i.scale*r,t.rotation+=n,KU(e,e,t,o),Bw(t,t,ui(e,e[0]-s[0],s[1]-e[1]))),t}}(),txe=function(){const e=Lt(),t=Lt();return function(i,r,n,s,o,a,u){return qU(t,a,u),RU(e,o,t),s?WU(i,r,n,s,e,a):lye(i,r,n,e,a)}}(),YU=function(){const e=Jl();return function(t,i,r,n){return eo(t,i,Zfe(e,r,n,1))}}(),KU=function(){const e=Jl();return function(t,i,r,n){return eo(t,i,lC(e,r,n,1))}}(),Bw=function(){const e=Lt(),t=Jl();return function(i,r,n){Ps(i,r);const s=zp(r),o=i.targetGeometry;return dU(t,oC(r)),eC(t,t,d0(s,s)),eo(e,n,t),o.x+=e[0],o.y+=e[1],i}}();class uye{constructor(t,i,r,n){const s=t.targetGeometry,o=i.targetGeometry;n?typeof n=="string"&&(n=ufe(n)||Tn.ease):n=Tn.ease,this.easing=n,this.duration=r,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let n,s,o,a;i>=1?(n=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(n=this.sCenterX+r*this.dCenterX,s=this.sCenterY+r*this.dCenterY,o=this.sRotation+r*this.dRotation,a=this.sScale+r*this.dScale),t.targetGeometry.x=n,t.targetGeometry.y=s,t.scale=a,t.rotation=o}}let ea=class extends ce{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=Tn.ease,this.view=null,this.viewpoint=null,this.viewpoint=new ao({targetGeometry:new he,scale:0,rotation:0}),this._updateTask=Gh({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const r=this.viewpoint;Ps(r,t),this.transition=new uye(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new Zx({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==Zx.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,r=i>=1;this.transition.applyRatio(this.viewpoint,i),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};l([d()],ea.prototype,"animation",void 0),l([d()],ea.prototype,"duration",void 0),l([d()],ea.prototype,"transition",void 0),l([d()],ea.prototype,"easing",void 0),l([d()],ea.prototype,"view",void 0),l([d()],ea.prototype,"viewpoint",void 0),ea=l([S("esri.views.2d.AnimationManager")],ea);const cye=ea;class dye{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:n,layerViews:s,state:{id:o}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),E(n)&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),E(r)&&(r.lastUpdateId!==o&&(r.viewChange(),r.lastUpdateId=o),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Y(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Gh(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function Gt(){return Promise.all([V(()=>import("./webglDeps.25b576d6.js"),["webglDeps.25b576d6.js","VertexArrayObject.4de33820.js","Texture.723f1298.js","ProgramTemplate.72a295d9.js","programUtils.34c1b4a4.js"],import.meta.url),V(()=>import("./mapViewDeps.7fe11df0.js"),["mapViewDeps.7fe11df0.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","MaterialKey.e49a9339.js","Utils.0d6a4873.js","Texture.723f1298.js","utils.9f5c0c70.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","programUtils.34c1b4a4.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","_commonjsHelpers.01f5fe30.js","imageutils.deac8ce4.js","Matcher.caf07c0c.js","visualVariablesUtils.b5aaf02b.js","visualVariablesUtils.af8c0332.js","tileUtils.f1f0078a.js","TileClipper.6695b533.js","devEnvironmentUtils.8c6e6b72.js","CircularArray.356e1ead.js","requestImageUtils.2e51e692.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","BaseGraphicContainer.c01f4603.js","normalizeUtilsSync.fa852835.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","FeatureContainer.49f22c95.js","TileContainer.6677f24d.js","schemaUtils.ac331e2c.js","createSymbolSchema.52220ac9.js","MD5.97b39efc.js","util.e93d9be3.js","vec3f32.8d37ecf5.js","GraphicContainer.02e110a8.js"],import.meta.url)])}const pf=()=>Gt().then(()=>V(()=>import("./TileLayerView2D.25a06b1e.js"),["TileLayerView2D.25a06b1e.js","imageUtils.9b079da5.js","BitmapTileContainer.cb141595.js","Bitmap.7cc7d4b3.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","TileContainer.6677f24d.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","RefreshableLayerView.c3c16cde.js","drapedUtils.ee3f945a.js"],import.meta.url)),vg=()=>Gt().then(()=>V(()=>import("./FeatureLayerView2D.ebcc540d.js"),["FeatureLayerView2D.ebcc540d.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","LayerView.8ff8f265.js","schemaUtils.ac331e2c.js","visualVariablesUtils.af8c0332.js","createSymbolSchema.52220ac9.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","MD5.97b39efc.js","util.e93d9be3.js","floorFilterUtils.69500d62.js","popupUtils.679addda.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),tP={"base-dynamic":()=>Gt().then(()=>V(()=>import("./BaseDynamicLayerView2D.b4af855a.js"),["BaseDynamicLayerView2D.b4af855a.js","BitmapContainer.03b7c257.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","ExportStrategy.b8091561.js","Bitmap.7cc7d4b3.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),"base-tile":pf,"bing-maps":pf,csv:vg,"geo-rss":()=>Gt().then(()=>V(()=>import("./GeoRSSLayerView2D.bbd268e2.js"),["GeoRSSLayerView2D.bbd268e2.js","LayerView.8ff8f265.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","GraphicContainer.02e110a8.js","BaseGraphicContainer.c01f4603.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","normalizeUtilsSync.fa852835.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","VertexArrayObject.4de33820.js","FeatureContainer.49f22c95.js","TileContainer.6677f24d.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","visualVariablesUtils.b5aaf02b.js","visualVariablesUtils.af8c0332.js","Matcher.caf07c0c.js","tileUtils.f1f0078a.js","TileClipper.6695b533.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.ac331e2c.js","createSymbolSchema.52220ac9.js","MD5.97b39efc.js","util.e93d9be3.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","vec3f32.8d37ecf5.js"],import.meta.url)),feature:vg,geojson:vg,graphics:()=>Gt().then(()=>V(()=>import("./GraphicsLayerView2D.de51ad4a.js"),["GraphicsLayerView2D.de51ad4a.js","LayerView.8ff8f265.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","GraphicContainer.02e110a8.js","BaseGraphicContainer.c01f4603.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","normalizeUtilsSync.fa852835.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","VertexArrayObject.4de33820.js","FeatureContainer.49f22c95.js","TileContainer.6677f24d.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","visualVariablesUtils.b5aaf02b.js","visualVariablesUtils.af8c0332.js","Matcher.caf07c0c.js","tileUtils.f1f0078a.js","TileClipper.6695b533.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.ac331e2c.js","createSymbolSchema.52220ac9.js","MD5.97b39efc.js","util.e93d9be3.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","vec3f32.8d37ecf5.js"],import.meta.url)),group:()=>Gt().then(()=>V(()=>import("./GroupLayerView2D.b5d31227.js"),["GroupLayerView2D.b5d31227.js","GroupContainer.f899dec5.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js"],import.meta.url)),imagery:()=>Gt().then(()=>V(()=>import("./ImageryLayerView2D.c600716a.js"),["ImageryLayerView2D.c600716a.js","RasterVFDisplayObject.32d1dd1d.js","VertexArrayObject.4de33820.js","Texture.723f1298.js","dataUtils.364659f1.js","pixelUtils.a71d38d7.js","WGLContainer.150ce0ac.js","utils.9f5c0c70.js","Utils.0d6a4873.js","MaterialKey.e49a9339.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","BaseGraphicContainer.c01f4603.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","normalizeUtilsSync.fa852835.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","FeatureContainer.49f22c95.js","TileContainer.6677f24d.js","visualVariablesUtils.b5aaf02b.js","visualVariablesUtils.af8c0332.js","Matcher.caf07c0c.js","tileUtils.f1f0078a.js","TileClipper.6695b533.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.ac331e2c.js","createSymbolSchema.52220ac9.js","MD5.97b39efc.js","util.e93d9be3.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","vec3f32.8d37ecf5.js","HighlightGraphicContainer.5f8815e0.js","BitmapContainer.03b7c257.js","Bitmap.7cc7d4b3.js","ExportStrategy.b8091561.js","rasterProjectionHelper.b8e40d02.js","popupUtils.679addda.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),"imagery-tile":()=>Gt().then(()=>V(()=>import("./ImageryTileLayerView2D.a017a9fd.js"),["ImageryTileLayerView2D.a017a9fd.js","RasterVFDisplayObject.32d1dd1d.js","VertexArrayObject.4de33820.js","Texture.723f1298.js","dataUtils.364659f1.js","pixelUtils.a71d38d7.js","WGLContainer.150ce0ac.js","utils.9f5c0c70.js","Utils.0d6a4873.js","MaterialKey.e49a9339.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","TileContainer.6677f24d.js","RawBlockCache.58b71f1a.js","rasterProjectionHelper.b8e40d02.js","util.e93d9be3.js","popupUtils.679addda.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),kml:()=>Gt().then(()=>V(()=>import("./KMLLayerView2D.378cf499.js"),["KMLLayerView2D.378cf499.js","kmlUtils.a3cceb0d.js","Bitmap.7cc7d4b3.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","BitmapContainer.03b7c257.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","GraphicContainer.02e110a8.js","BaseGraphicContainer.c01f4603.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","normalizeUtilsSync.fa852835.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","FeatureContainer.49f22c95.js","TileContainer.6677f24d.js","visualVariablesUtils.b5aaf02b.js","visualVariablesUtils.af8c0332.js","Matcher.caf07c0c.js","tileUtils.f1f0078a.js","TileClipper.6695b533.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.ac331e2c.js","createSymbolSchema.52220ac9.js","MD5.97b39efc.js","util.e93d9be3.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","vec3f32.8d37ecf5.js"],import.meta.url)),"map-image":()=>Gt().then(()=>V(()=>import("./MapImageLayerView2D.23a0c341.js"),["MapImageLayerView2D.23a0c341.js","BitmapContainer.03b7c257.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","BaseGraphicContainer.c01f4603.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","normalizeUtilsSync.fa852835.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","FeatureContainer.49f22c95.js","TileContainer.6677f24d.js","visualVariablesUtils.b5aaf02b.js","visualVariablesUtils.af8c0332.js","Matcher.caf07c0c.js","tileUtils.f1f0078a.js","TileClipper.6695b533.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.ac331e2c.js","createSymbolSchema.52220ac9.js","MD5.97b39efc.js","util.e93d9be3.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","vec3f32.8d37ecf5.js","HighlightGraphicContainer.5f8815e0.js","ExportStrategy.b8091561.js","Bitmap.7cc7d4b3.js","ExportImageParameters.15239e19.js","floorFilterUtils.69500d62.js","sublayerUtils.360b5518.js","drapedUtils.ee3f945a.js","popupUtils.679addda.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),"map-notes":()=>Gt().then(()=>V(()=>import("./MapNotesLayerView2D.284c3237.js"),["MapNotesLayerView2D.284c3237.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","GroupContainer.f899dec5.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","GraphicContainer.02e110a8.js","BaseGraphicContainer.c01f4603.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","normalizeUtilsSync.fa852835.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","FeatureContainer.49f22c95.js","TileContainer.6677f24d.js","visualVariablesUtils.b5aaf02b.js","visualVariablesUtils.af8c0332.js","Matcher.caf07c0c.js","tileUtils.f1f0078a.js","TileClipper.6695b533.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.ac331e2c.js","createSymbolSchema.52220ac9.js","MD5.97b39efc.js","util.e93d9be3.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","vec3f32.8d37ecf5.js"],import.meta.url)),media:()=>Gt().then(()=>V(()=>import("./MediaLayerView2D.75622f3e.js"),["MediaLayerView2D.75622f3e.js","normalizeUtilsSync.fa852835.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","VertexArrayObject.4de33820.js","vec3f32.8d37ecf5.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js"],import.meta.url)),"ogc-feature":()=>Gt().then(()=>V(()=>import("./OGCFeatureLayerView2D.ee91fbd2.js"),["OGCFeatureLayerView2D.ee91fbd2.js","FeatureLayerView2D.ebcc540d.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","LayerView.8ff8f265.js","schemaUtils.ac331e2c.js","visualVariablesUtils.af8c0332.js","createSymbolSchema.52220ac9.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","MD5.97b39efc.js","util.e93d9be3.js","floorFilterUtils.69500d62.js","popupUtils.679addda.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),"open-street-map":pf,route:()=>Gt().then(()=>V(()=>import("./RouteLayerView2D.cb5d6e67.js"),["RouteLayerView2D.cb5d6e67.js","Stop.0a53bdfb.js","LayerView.8ff8f265.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","GraphicContainer.02e110a8.js","BaseGraphicContainer.c01f4603.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","normalizeUtilsSync.fa852835.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","VertexArrayObject.4de33820.js","FeatureContainer.49f22c95.js","TileContainer.6677f24d.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","visualVariablesUtils.b5aaf02b.js","visualVariablesUtils.af8c0332.js","Matcher.caf07c0c.js","tileUtils.f1f0078a.js","TileClipper.6695b533.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.ac331e2c.js","createSymbolSchema.52220ac9.js","MD5.97b39efc.js","util.e93d9be3.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","vec3f32.8d37ecf5.js"],import.meta.url)),stream:()=>Gt().then(()=>V(()=>import("./StreamLayerView2D.4a28d34f.js"),["StreamLayerView2D.4a28d34f.js","FeatureLayerView2D.ebcc540d.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","LayerView.8ff8f265.js","schemaUtils.ac331e2c.js","visualVariablesUtils.af8c0332.js","createSymbolSchema.52220ac9.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","MD5.97b39efc.js","util.e93d9be3.js","floorFilterUtils.69500d62.js","popupUtils.679addda.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),"subtype-group":()=>Gt().then(()=>V(()=>import("./SubtypeGroupLayerView2D.b6878043.js"),["SubtypeGroupLayerView2D.b6878043.js","FeatureLayerView2D.ebcc540d.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","LayerView.8ff8f265.js","schemaUtils.ac331e2c.js","visualVariablesUtils.af8c0332.js","createSymbolSchema.52220ac9.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","MD5.97b39efc.js","util.e93d9be3.js","floorFilterUtils.69500d62.js","popupUtils.679addda.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),tile:pf,"vector-tile":()=>Gt().then(()=>V(()=>import("./VectorTileLayerView2D.88635de6.js"),["VectorTileLayerView2D.88635de6.js","BidiEngine.ec67919b.js","Texture.723f1298.js","CIMSymbolHelper.b7bce5b2.js","MaterialKey.e49a9339.js","Utils.0d6a4873.js","VertexArrayObject.4de33820.js","config.40d47db8.js","TileContainer.6677f24d.js","utils.9f5c0c70.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","ProgramTemplate.72a295d9.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","Bitmap.7cc7d4b3.js","BitmapContainer.03b7c257.js"],import.meta.url)),wcs:()=>Gt().then(()=>V(()=>import("./ImageryTileLayerView2D.a017a9fd.js"),["ImageryTileLayerView2D.a017a9fd.js","RasterVFDisplayObject.32d1dd1d.js","VertexArrayObject.4de33820.js","Texture.723f1298.js","dataUtils.364659f1.js","pixelUtils.a71d38d7.js","WGLContainer.150ce0ac.js","utils.9f5c0c70.js","Utils.0d6a4873.js","MaterialKey.e49a9339.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","TileContainer.6677f24d.js","RawBlockCache.58b71f1a.js","rasterProjectionHelper.b8e40d02.js","util.e93d9be3.js","popupUtils.679addda.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),"web-tile":pf,wfs:vg,wms:()=>Gt().then(()=>V(()=>import("./WMSLayerView2D.857f4055.js"),["WMSLayerView2D.857f4055.js","BitmapContainer.03b7c257.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","ExportStrategy.b8091561.js","Bitmap.7cc7d4b3.js","RefreshableLayerView.c3c16cde.js","ExportWMSImageParameters.b97077c2.js"],import.meta.url)),wmts:()=>Gt().then(()=>V(()=>import("./WMTSLayerView2D.d8b2719c.js"),["WMTSLayerView2D.d8b2719c.js","imageUtils.9b079da5.js","BitmapTileContainer.cb141595.js","Bitmap.7cc7d4b3.js","utils.9f5c0c70.js","Utils.0d6a4873.js","Texture.723f1298.js","MaterialKey.e49a9339.js","TileContainer.6677f24d.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.8ff8f265.js","RefreshableLayerView.c3c16cde.js"],import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function hye(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new P(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const iP={hasLayerViewModule:e=>E(tP[e.type]),importLayerView:e=>{const t=tP[e.type];if(O(t))throw hye(e);return t(e)}};function pye(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],u=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const c of u)for(let h=0;h<c.length-1;h++){HK(a,r,c,h);const f=c0(r,a);f<n&&(n=f,s=a[0],o=a[1])}return{coordinate:new he({x:s,y:o,spatialReference:i}),distance:n}}var Qx;const fye=W.getLogger("esri.views.MapView");let dc=Qx=class extends ce{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(O(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Ip(this.geometry,this.spatialReference)}catch(e){return fye.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(O(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Zb(this.normalizedGeometry,i):z6(this.normalizedGeometry,i))return e;const{coordinate:r}=pye(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new Qx({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};l([d({constructOnly:!0})],dc.prototype,"geometry",void 0),l([d({readOnly:!0})],dc.prototype,"normalizedGeometry",null),l([d({constructOnly:!0})],dc.prototype,"spatialReference",void 0),dc=Qx=l([S("esri.views.2d.constraints.GeometryConstraint")],dc);var eA;let yy=eA=class extends ce{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new eA({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([d()],yy.prototype,"enabled",void 0),l([d()],yy.prototype,"rotationEnabled",void 0),yy=eA=l([S("esri.views.2d.constraints.RotationConstraint")],yy);const ZU=yy;var tA;let br=tA=class extends ce{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,u=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!u&&i>0&&i>=h.scale&&(o=h.level,u=!0),!c&&r>0&&r>=h.scale&&(a=e?e.level:-1,c=!0),e=h;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),i=t[n].scale,r=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=r!==0&&e.scale<r,a=i!==0&&e.scale>i;if(o||a){const u=a?i:r;if(s){const c=(u-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}e.scale=u}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],r===e)return n+this.effectiveMinZoom+1;if(i>e&&r<e)return n+this.effectiveMinZoom+1-(e-r)/(i-r)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new tA({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};l([d({readOnly:!0})],br.prototype,"effectiveLODs",void 0),l([d({readOnly:!0})],br.prototype,"effectiveMinZoom",void 0),l([d({readOnly:!0})],br.prototype,"effectiveMaxZoom",void 0),l([d({readOnly:!0})],br.prototype,"effectiveMinScale",void 0),l([d({readOnly:!0})],br.prototype,"effectiveMaxScale",void 0),l([d()],br.prototype,"lods",void 0),l([d()],br.prototype,"minZoom",void 0),l([d()],br.prototype,"maxZoom",void 0),l([d()],br.prototype,"minScale",void 0),l([d()],br.prototype,"maxScale",void 0),l([d()],br.prototype,"snapToZoom",void 0),br=tA=l([S("esri.views.2d.constraints.ZoomConstraint")],br);const JU=br,yye={base:null,key:"type",typeMap:{extent:Ue,polygon:Rr}};let $t=class extends ce{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((e=this._get("version"))!=null?e:0)+1}get _defaultLODs(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:r.tileInfo,t=(n=this.view)==null?void 0:n.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new dc({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new ZU({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,n=this.minScale,s=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===n&&e.maxScale===s&&e.snapToZoom===o?e:new JU({lods:t,minZoom:i,maxZoom:r,minScale:n,maxScale:s,snapToZoom:o})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};l([d({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],$t.prototype,"effectiveLODs",void 0),l([d({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],$t.prototype,"effectiveMinScale",void 0),l([d({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],$t.prototype,"effectiveMaxScale",void 0),l([d({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],$t.prototype,"effectiveMinZoom",void 0),l([d({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],$t.prototype,"effectiveMaxZoom",void 0),l([d({types:yye,value:null})],$t.prototype,"geometry",null),l([d({type:[H3]})],$t.prototype,"lods",void 0),l([d()],$t.prototype,"minScale",void 0),l([d()],$t.prototype,"maxScale",void 0),l([d()],$t.prototype,"minZoom",void 0),l([d()],$t.prototype,"maxZoom",void 0),l([d()],$t.prototype,"rotationEnabled",void 0),l([d()],$t.prototype,"snapToZoom",void 0),l([d()],$t.prototype,"view",void 0),l([d({readOnly:!0})],$t.prototype,"version",null),l([d()],$t.prototype,"_defaultLODs",null),l([d({type:dc})],$t.prototype,"_geometry",null),l([d({type:ZU})],$t.prototype,"_rotation",null),l([d({readOnly:!0,type:JU})],$t.prototype,"_zoom",null),$t=l([S("esri.views.2d.MapViewConstraints")],$t);const XU=$t;function mye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function gye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function QU(e,t,i,r,n,s,o,a,u,c){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=u,e[8]=c,e}function eV(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function vye(e,t){if(e===t){const i=t[1],r=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function bye(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=h*o-a*c,y=-h*s+a*u,m=c*s-o*u;let g=i*f+r*y+n*m;return g?(g=1/g,e[0]=f*g,e[1]=(-h*r+n*c)*g,e[2]=(a*r-n*o)*g,e[3]=y*g,e[4]=(h*i-n*u)*g,e[5]=(-a*i+n*s)*g,e[6]=m*g,e[7]=(-c*i+r*u)*g,e[8]=(o*i-r*s)*g,e):null}function wye(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=n*c-r*h,e[2]=r*a-n*o,e[3]=a*u-s*h,e[4]=i*h-n*u,e[5]=n*s-i*a,e[6]=s*c-o*u,e[7]=r*u-i*c,e[8]=i*o-r*s,e}function _ye(e){const t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8];return t*(c*s-o*u)+i*(-c*n+o*a)+r*(u*n-s*a)}function uC(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=t[8],y=i[0],m=i[1],g=i[2],v=i[3],b=i[4],w=i[5],T=i[6],A=i[7],R=i[8];return e[0]=y*r+m*o+g*c,e[1]=y*n+m*a+g*h,e[2]=y*s+m*u+g*f,e[3]=v*r+b*o+w*c,e[4]=v*n+b*a+w*h,e[5]=v*s+b*u+w*f,e[6]=T*r+A*o+R*c,e[7]=T*n+A*a+R*h,e[8]=T*s+A*u+R*f,e}function iA(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=t[8],y=i[0],m=i[1];return e[0]=r,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=u,e[6]=y*r+m*o+c,e[7]=y*n+m*a+h,e[8]=y*s+m*u+f,e}function tV(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=t[8],y=Math.sin(i),m=Math.cos(i);return e[0]=m*r+y*o,e[1]=m*n+y*a,e[2]=m*s+y*u,e[3]=m*o-y*r,e[4]=m*a-y*n,e[5]=m*u-y*s,e[6]=c,e[7]=h,e[8]=f,e}function Sye(e,t,i){const r=i[0],n=i[1],s=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function Tye(e,t,i){const r=i[0],n=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function Eye(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function xye(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Aye(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Mye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Cye(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=i+i,a=r+r,u=n+n,c=i*o,h=r*o,f=r*a,y=n*o,m=n*a,g=n*u,v=s*o,b=s*a,w=s*u;return e[0]=1-f-g,e[3]=h-w,e[6]=y+b,e[1]=h+w,e[4]=1-c-g,e[7]=m-v,e[2]=y-b,e[5]=m+v,e[8]=1-c-f,e}function Iye(e,t){const i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],u=t[8],c=t[9],h=t[10],f=h*o-a*c,y=-h*s+a*u,m=c*s-o*u,g=i*f+r*y+n*m;if(!g)return null;const v=1/g;return e[0]=f*v,e[1]=(-h*r+n*c)*v,e[2]=(a*r-n*o)*v,e[3]=y*v,e[4]=(h*i-n*u)*v,e[5]=(-a*i+n*s)*v,e[6]=m*v,e[7]=(-c*i+r*u)*v,e[8]=(o*i-r*s)*v,e}function Nye(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],v=t[13],b=t[14],w=t[15],T=i*a-r*o,A=i*u-n*o,R=i*c-s*o,M=r*u-n*a,C=r*c-s*a,k=n*c-s*u,B=h*v-f*g,H=h*b-y*g,Q=h*w-m*g,ee=f*b-y*v,le=f*w-m*v,be=y*w-m*b;let oe=T*be-A*le+R*ee+M*Q-C*H+k*B;return oe?(oe=1/oe,e[0]=(a*be-u*le+c*ee)*oe,e[1]=(u*Q-o*be-c*H)*oe,e[2]=(o*le-a*Q+c*B)*oe,e[3]=(n*le-r*be-s*ee)*oe,e[4]=(i*be-n*Q+s*H)*oe,e[5]=(r*Q-i*le-s*B)*oe,e[6]=(v*k-b*C+w*M)*oe,e[7]=(b*R-g*k-w*A)*oe,e[8]=(g*C-v*R+w*T)*oe,e):null}function Rye(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Pye(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function $ye(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Dye(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function iV(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function Lye(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function Oye(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function kye(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Fye(e,t){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],f=t[0],y=t[1],m=t[2],g=t[3],v=t[4],b=t[5],w=t[6],T=t[7],A=t[8];return Math.abs(i-f)<=Te*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-y)<=Te*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-m)<=Te*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-g)<=Te*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=Te*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-b)<=Te*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(u-w)<=Te*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-T)<=Te*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(h-A)<=Te*Math.max(1,Math.abs(h),Math.abs(A))}function Bye(e){const t=Te,i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8];return Math.abs(1-(i*i+s*s+u*u))<=t&&Math.abs(1-(r*r+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const Uye=uC,Vye=iV;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:mye,copy:gye,set:QU,identity:eV,transpose:vye,invert:bye,adjoint:wye,determinant:_ye,multiply:uC,translate:iA,rotate:tV,scale:Sye,scaleByVec2:Tye,fromTranslation:Eye,fromRotation:xye,fromScaling:Aye,fromMat2d:Mye,fromQuat:Cye,normalFromMat4Legacy:Iye,normalFromMat4:Nye,projection:Rye,str:Pye,frob:$ye,add:Dye,subtract:iV,multiplyScalar:Lye,multiplyScalarAndAdd:Oye,exactEquals:kye,equals:Fye,isOrthoNormal:Bye,mul:Uye,sub:Vye},Symbol.toStringTag,{value:"Module"}));function z1(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function jye(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function zye(e,t,i,r,n,s,o,a,u){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=i,c[3]=r,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=u,c}function Hye(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:z1,clone:jye,fromValues:zye,createView:Hye},Symbol.toStringTag,{value:"Module"}));function rV(){return new Float32Array(2)}function Gye(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function up(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function qye(e,t){return new Float32Array(e,t,2)}function nV(){return rV()}function sV(){return up(1,1)}function oV(){return up(1,0)}function aV(){return up(0,1)}const Wye=nV(),Yye=sV(),Kye=oV(),Zye=aV();Object.freeze(Object.defineProperty({__proto__:null,create:rV,clone:Gye,fromValues:up,createView:qye,zeros:nV,ones:sV,unitX:oV,unitY:aV,ZEROS:Wye,ONES:Yye,UNIT_X:Kye,UNIT_Y:Zye},Symbol.toStringTag,{value:"Module"}));function Jye(e){return e instanceof Float32Array&&e.length>=2}function Xye(e){return Array.isArray(e)&&e.length>=2}function w_(e){return Jye(e)||Xye(e)}var rA;const Do=[0,0];let bl=rA=class extends j{constructor(e){super(e),this._viewpoint2D={center:Lt(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new Ue,this.id=0,this.inverseTransform=Jl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Jl(),this.transformNoRotation=Jl(),this.displayMat3=z1(),this.displayViewMat3=z1(),this.viewMat3=z1(),this.viewMat2d=lU(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Ps(i,e.viewpoint),this._set("size",Nm(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new rA({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return w_(t)?eo(e,t,this.inverseTransform):(Do[0]=t,Do[1]=i,eo(e,Do,this.inverseTransform))}toScreen(e,t,i){return w_(t)?eo(e,t,this.transform):(Do[0]=t,Do[1]=i,eo(e,Do,this.transform))}toScreenNoRotation(e,t,i){return w_(t)?eo(e,t,this.transformNoRotation):(Do[0]=t,Do[1]=i,eo(e,Do,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return aC(e,i,n,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new ao({targetGeometry:new he(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!t||!i)return;this.resolution=zp(o),this.rotation=r,this.scale=i,this.spatialReference=t,Nm(this.center,e);const a=s[0]!==0?2/s[0]:0,u=s[1]!==0?-2/s[1]:0;QU(this.displayMat3,a,0,0,0,u,0,-1,1,1);const c=eV(this.viewMat3),h=up(s[0]/2,s[1]/2),f=up(-s[0]/2,-s[1]/2),y=s3(r);iA(c,c,h),tV(c,c,y),iA(c,c,f),uC(this.displayViewMat3,this.displayMat3,c);const m=tC(this.viewMat2d,h);return Ow(m,m,y),Cm(m,m,f),Yfe(this.extent,o,s),lC(this.transform,o,s,n),QM(this.inverseTransform,this.transform),tye(this.transformNoRotation,o,s,n),this.worldScreenWidth=rye(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};l([d({readOnly:!0})],bl.prototype,"id",void 0),l([d({value:1,json:{write:!0}})],bl.prototype,"pixelRatio",null),l([d({json:{write:!0}})],bl.prototype,"size",null),l([d()],bl.prototype,"spatialReference",void 0),l([d({type:ao,json:{write:!0}})],bl.prototype,"viewpoint",null),bl=rA=l([S("esri.views.2d.ViewState")],bl);const rP=bl;var nA,sA;let la=nA=class extends ce{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new nA({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([d()],la.prototype,"left",void 0),l([d()],la.prototype,"top",void 0),l([d()],la.prototype,"right",void 0),l([d()],la.prototype,"bottom",void 0),la=nA=l([S("esri.views.2d.PaddedViewState.Padding")],la);let eh=sA=class extends rP{constructor(...e){super(...e),this.paddedViewState=new rP,this._updateContent=(()=>{const t=Lt();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;ui(t,r.left+r.right,r.top+r.bottom),Rm(t,i,t),Nm(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.own(Y(()=>[this.size,this.padding],()=>this._updateContent(),Wh)),this.padding=new la,this.size=[0,0]}set padding(e){this._set("padding",e||new la)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,sye(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new sA({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([d()],eh.prototype,"paddedViewState",void 0),l([d({type:la})],eh.prototype,"padding",null),l([d()],eh.prototype,"viewpoint",null),eh=sA=l([S("esri.views.2d.PaddedViewState")],eh);const Qye=eh;class eme{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class lV{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new Iv(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&E(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const n=new AbortController;let s=null;i&&(s=$n(i,()=>n.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),c.reject(Mt())},a=()=>{u.remove(),E(s)&&s.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},u=$A(n.signal,o),c=Sa();return this._deferreds.set(t,c),this._controllers.set(t,n),c.promise.then(a,a),this._queue.push(t),this._scheduleNext(),c.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=bp(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(O(t))return;let i;const r=new AbortController,n=new eme(t,r);this._processingItems.set(t,n);try{i=this.process(t,r.signal)}catch(s){this._processError(n,s)}Aa(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){return{update:t=>this.runTask(t)}}}function tme(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const __=new Set,bg=[],bd=new Map,nP=[0,0];let za=class extends ce{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new lV({concurrency:e,process:(i,r)=>{const n=this._keyToItem.get(i);return t(n,{signal:r})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(n,n),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(c=>{const h=this._keyToItem.get(c),f=this.tileInfoView.getTileScale(h.key);bd.has(f)||(bd.set(f,[]),i=Math.max(f,i),r=Math.min(f,r)),bd.get(f).push(h.key),__.add(f)});let n=this.state.scale;bd.has(n)||(tme(bg,__),bg.sort((c,h)=>c-h),n=bg.reduce((c,h)=>Math.abs(h-n)<Math.abs(c-n)?h:c,bg[0])),n=Math.min(n,i),n=Math.max(n,r);const s=bd.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),u=o.getRowForY(this.state.center[1]);return s.sort((c,h)=>{const f=o.denormalizeCol(c.col,c.world),y=o.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(u-c.row)*(u-c.row))-Math.sqrt((a-y)*(a-y)+(u-h.row)*(u-h.row))}),__.clear(),bd.clear(),s[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return e.forEach(s=>{const o=this._keyToItem.get(s);t.getTileCoords(nP,o.key);const a=c0(nP,i);a<r&&(r=a,n=o.key)}),n.id}};l([d({constructOnly:!0})],za.prototype,"concurrency",void 0),l([d({constructOnly:!0})],za.prototype,"process",void 0),l([d()],za.prototype,"state",void 0),l([d({constructOnly:!0})],za.prototype,"strategy",void 0),l([d({constructOnly:!0})],za.prototype,"tileInfoView",void 0),l([d({readOnly:!0})],za.prototype,"updating",null),za=l([S("esri.views.2d.tiling.PagedTileQueue")],za);class ki{constructor(t,i,r,n){this.set(t,i,r,n)}static getId(t,i,r,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${n}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,n){this.set(t,i,r,n)}contains(t){const i=t.level-this.level;return this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new ki(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,u]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(u)}else this.level=+t,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new ki(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new ki(t,i,r,n),new ki(t,i,r+1,n),new ki(t,i+1,r,n),new ki(t,i+1,r+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}ki.pool=new Is(ki,null,null,25,50);function Ha(e,t){return[e,t]}function wu(e,t,i){return e[0]=t,e[1]=i,e}function ime(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}const qn=new ki("0/0/0/0");class cC{constructor(t,i,r,n,s,o,a,u,c,h,f,y){this.level=t,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=u,this.worldStart=c,this.worldEnd=h,this.worldSize=f,this.wrap=y}static create(t,i,r=null){const n=Es(t.spatialReference),s=i.origin||Ha(t.origin.x,t.origin.y),o=Ha(t.size[0]*i.resolution,t.size[1]*i.resolution),a=Ha(-1/0,-1/0),u=Ha(1/0,1/0),c=Ha(1/0,1/0);E(r)&&(wu(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),wu(u,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),wu(c,u[0]-a[0]+1,u[1]-a[1]+1));const{cols:h,rows:f}=i;let y,m,g,v;return!r&&h&&f&&(wu(a,h[0],f[0]),wu(u,h[1],f[1]),wu(c,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(y=Ha(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/t.size[0]),c[1]),m=Ha(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),g=Ha(y[0]+m[0]-1,u[1]),v=!0):(m=a,g=u,y=c,v=!1),new cC(i.level,i.resolution,i.scale,s,a,u,c,o,m,g,y,v)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){qn.set(i);const n=r?qn.col:this.denormalizeCol(qn.col,qn.world),s=qn.row;return ime(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,i,r=!1){qn.set(i);const n=r?qn.col:this.denormalizeCol(qn.col,qn.world);return Array.isArray(t)?wu(t,this.getXForColumn(n),this.getYForRow(qn.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(qn.row)),t}}class cp{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:a,colTo:u}of r)for(let c=a;c<=u;c++)t.call(i,s,o,n.normalizeCol(c),n.getWorldForColumn(c))}}cp.pool=new Is(cp);class S_{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}}const dt=new ki("0/0/0/0");class dC{constructor(t,i,r,n,s,o,a,u){this.x=t,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=u}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,n]=t,[s,o]=i,a=s-r,u=o-n,c=u!==0?a/u:0,h=(Math.ceil(n)-n)*c,f=(Math.floor(n)-n)*c;return new dC(r,Math.floor(n),Math.ceil(o),c,a<0?h:f,a<0?f:h,a<0?s:r,a<0?r:s)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const Br=[[0,0],[0,0],[0,0],[0,0]],rme=1e-6;class nme{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort((s,o)=>o.scale-s.scale);const n=this._lodInfos=r.map(s=>cC.create(t,s,i));r.forEach((s,o)=>{this._infoByLevel[s.level]=n[o],this._infoByScale[s.scale]=n[o],this.scales[o]=s.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){dt.set(i);const n=this._infoByLevel[dt.level];return n?n.getTileBounds(t,dt,r):t}getTileCoords(t,i,r=!1){dt.set(i);const n=this._infoByLevel[dt.level];return n?n.getTileCoords(t,dt,r):t}getTileCoverage(t,i=192,r="closest"){const n=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),s=cp.pool.acquire(n),o=this._wrap;let a,u,c,h=1/0,f=-1/0;const y=s.spans;Br[0][0]=Br[0][1]=Br[1][1]=Br[3][0]=-i,Br[1][0]=Br[2][0]=t.size[0]+i,Br[2][1]=Br[3][1]=t.size[1]+i;for(const b of Br)t.toMap(b,b),b[0]=n.getColumnForX(b[0]),b[1]=n.getRowForY(b[1]);const m=[];let g=3;for(let b=0;b<4;b++){if(Br[b][1]===Br[g][1]){g=b;continue}const w=dC.create(Br[b],Br[g]);h=Math.min(w.ymin,h),f=Math.max(w.ymax,f),m[w.ymin]===void 0&&(m[w.ymin]=[]),m[w.ymin].push(w),g=b}if(h==null||f==null||f-h>100)return null;let v=[];for(a=h;a<f;){m[a]!=null&&(v=v.concat(m[a])),u=1/0,c=-1/0;for(let b=v.length-1;b>=0;b--){const w=v[b];u=Math.min(u,w.getLeftCol()),c=Math.max(c,w.getRightCol())}if(u=Math.floor(u),c=Math.floor(c),a>=n.first[1]&&a<=n.last[1])if(o)if(n.size[0]<n.worldSize[0]){const b=Math.floor(c/n.worldSize[0]);for(let w=Math.floor(u/n.worldSize[0]);w<=b;w++)y.push(new S_(a,Math.max(n.getFirstColumnForWorld(w),u),Math.min(n.getLastColumnForWorld(w),c)))}else y.push(new S_(a,u,c));else u>n.last[0]||c<n.first[0]||(u=Math.max(u,n.first[0]),c=Math.min(c,n.last[0]),y.push(new S_(a,u,c)));a+=1;for(let b=v.length-1;b>=0;b--){const w=v[b];w.ymax>=a?w.incrRow():v.splice(b,1)}}return s}getTileParentId(t){dt.set(t);const i=this._infoByLevel[dt.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(dt,this._lodInfos[r],dt),dt.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){dt.set(i);const r=this._infoByLevel[dt.level],n=t.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(dt,n,dt);const o=n.denormalizeCol(dt.col,dt.world);for(const a of t.spans)if(a.row===dt.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,a,u,c]=t.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(dt.col,dt.world),f=n.getColumnForX(r.getXForColumn(h)),y=n.getRowForY(r.getYForRow(dt.row)),m=n.getColumnForX(r.getXForColumn(h+1))-1,g=n.getRowForY(r.getYForRow(dt.row+1))-1;return!(f>c||m<u||y>a||g<o)}const s=n.denormalizeCol(dt.col,dt.world);return t.spans.some(o=>o.row===dt.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const n=Es(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+rme)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,n)=>Math.abs(n-t)<Math.abs(r-t)?n:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const n=this._infoByLevel[r.level];return t.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(t.level=i.level,t.col=Math.floor(r.col*n.resolution/i.resolution+.01),t.row=Math.floor(r.row*n.resolution/i.resolution+.01)),t)}}function sme(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const T_=new Set,wg=[],wd=new Map,sP=[0,0];let ta=class extends ce{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new lV({concurrency:e,process:(r,n)=>{const s=this._keyToItem.get(r);return t(s,{signal:n})},peeker:i==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(c=>{const h=this._keyToItem.get(c),f=this.tileInfoView.getTileScale(h.key);wd.has(f)||(wd.set(f,[]),i=Math.max(f,i),r=Math.min(f,r)),wd.get(f).push(h.key),T_.add(f)});let n=this.state.scale;wd.has(n)||(sme(wg,T_),wg.sort((c,h)=>c-h),n=wg.reduce((c,h)=>Math.abs(h-n)<Math.abs(c-n)?h:c,wg[0])),n=Math.min(n,i),n=Math.max(n,r);const s=wd.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),u=o.getRowForY(this.state.center[1]);return s.sort((c,h)=>{const f=o.denormalizeCol(c.col,c.world),y=o.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(u-c.row)*(u-c.row))-Math.sqrt((a-y)*(a-y)+(u-h.row)*(u-h.row))}),T_.clear(),wd.clear(),s[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return e.forEach(s=>{const o=this._keyToItem.get(s);t.getTileCoords(sP,o.key);const a=c0(sP,i);a<r&&(r=a,n=o.key)}),n.id}};l([d({constructOnly:!0})],ta.prototype,"concurrency",void 0),l([d({constructOnly:!0})],ta.prototype,"process",void 0),l([d()],ta.prototype,"state",void 0),l([d({constructOnly:!0})],ta.prototype,"strategy",void 0),l([d({constructOnly:!0})],ta.prototype,"tileInfoView",void 0),l([d({readOnly:!0})],ta.prototype,"updating",null),ta=l([S("esri.views.2d.tiling.TileQueue")],ta);const ixe=ta;class ome{constructor(t,i,r){this.maxSize=t,this.tileInfoView=i,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return null;const r=i.key.level,n=this._tileKeysPerLevel[r];oP(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(t,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,t))}_pruneAroundCenterTile(t,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:a}=this.tileInfoView.tileInfo,u=r*o[0],c=r*o[1],h=[0,0],f=[0,0];for(s.sort((y,m)=>(h[0]=a.x+u*(y.col+.5),h[1]=a.y-c*(y.row+.5),f[0]=a.x+u*(m.col+.5),f[1]=a.y-c*(m.row+.5),hb(h,i)-hb(f,i)));s.length>0;){const y=s.pop();if(this._removeTile(y.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(i),oP(this._tilePerId,t)}}function oP(e,t){e.delete(t)}const _u=new ki(0,0,0,0),cn=new Map,_d=[],_g=[];class rxe{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new ome(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,n=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(_g.length=0,_d.length=0,cn.clear(),!n)return;const{minScale:s,maxScale:o}=this.tileInfoView.tileInfo,{spans:a,lodInfo:u}=n,{level:c}=u,{scale:h,center:f,resolution:y}=t.state,m=!t.stationary&&h>this._previousScale;if(this._previousScale=h,this.tiles.length=0,!i&&(h>s||h<o))return this.tiles.length=0,cn.clear(),r.forEach(w=>{this.releaseTile(w)}),r.clear(),_g.length=0,_d.length=0,cn.clear(),cp.pool.release(n),!0;r.forEach(w=>w.visible=!0);let g=0,v=0;if(a.length>0)for(const{row:w,colFrom:T,colTo:A}of a)for(let R=T;R<=A;R++){g++;const M=_u.set(c,w,u.normalizeCol(R),u.getWorldForColumn(R)).id;if(r.has(M)){const C=r.get(M);C.isReady?(cn.set(M,C),v++):m||this._addParentTile(M,cn)}else{let C;if(this._tileCache&&this._tileCache.has(M)){if(C=this._tileCache.pop(M),this.tileIndex.set(M,C),C.isReady){cn.set(M,C),v++;continue}}else C=this.acquireTile(_u),this.tileIndex.set(M,C);m||this._addParentTile(M,cn)}}const b=v===g;r.forEach((w,T)=>{if(_u.set(T),cn.has(T))return;const A=this.tileInfoView.intersects(n,_u),R=this.cachePolicy==="purge"?_u.level!==c:_u.level>c;!A||!m&&b?!R&&A||_d.push(T):w.isReady?R&&this.cachePolicy==="purge"&&this._hasReadyAncestor(_u,c)?_d.push(T):_g.push(T):R&&_d.push(T)});for(const w of _g){const T=r.get(w);T&&T.isReady&&cn.set(w,T)}for(const w of _d){const T=r.get(w);this._tileCache?this._tileCache.add(T):this.releaseTile(T),r.delete(w)}return cn.forEach(w=>this.tiles.push(w)),r.forEach(w=>{cn.has(w.key.id)||(w.visible=!1)}),this._tileCache&&this._tileCache.prune(c,f,y),cp.pool.release(n),cn.clear(),b}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n&&n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n&&n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(t,i){const r=nu();this.tileInfoView.getTileBounds(r,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<t.level){const s=nu();if(this.tileInfoView.getTileBounds(s,n.key,!0),fJ(s,r))return!0}return!1}}function hC(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class aP extends hi{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){hC(t.data,"primary")&&(t.stopPropagation(),i?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class ame extends hi{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:u}=o;this._startScale=u,this._currentScale=u,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const u=1.015**s.y,c=this._startScale*u,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:u}=o,{effectiveLODs:c,snapToZoom:h}=u;if(!h||!c)return void a.end();const f=u.snapScale(this._currentScale),y=(s.y>0?Math.max(f,u.snapToPreviousScale(this._startScale)):Math.min(f,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(y);break}}}}class Uw{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this.currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class lme extends hi{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new Uw({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&hC(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class ume extends hi{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i;const n=this.view.mapViewNavigation;this.dragEventSeparator=new Uw({start:(s,o)=>{n.rotate.begin(this.view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this.view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&hC(o.data,this.pointerAction)}),this.registerIncoming("drag",r,s=>this.dragEventSeparator.handle(s))}}function Wn(e){let t=e*e;return e<0&&(t*=-1),t}function cme(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function dme(e,t,i){const r=i,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=Wn(n.axes[0]),r.translation[1]=Wn(n.axes[1]),r.translation[2]=Wn(n.buttons[7])-Wn(n.buttons[6]),r.heading=Wn(n.axes[2]),r.tilt=Wn(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Wn(n.axes[0]),r.translation[1]=1.2*Wn(n.axes[1]),r.translation[2]=2*-Wn(n.axes[2]),r.heading=1.2*Wn(n.axes[5]),r.tilt=1.2*Wn(n.axes[3])),r.tilt*=o,uL(r.translation,r.translation,a),r}function hme(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class pme extends hi{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new Mi,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([Y(()=>{var i;return(i=this.view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this.handle.resume(),this.frameTask||(this.frameTask=Gh({update:r=>this._frameUpdate(r.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},We)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,cme(this.transformation)):(this.currentDevice=t.data.device,dme(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const i=this.transformation;if(hme(i))return;const r=this.view.viewpoint.clone(),n=this.view.navigation.gamepad.velocityFactor,s=yme*n*t;Bw(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*mme*t,a=this.view.constraints.rotationEnabled?-i.heading*fme*t:0,u=this.view.size,c=[u[0]/2,u[1]];WU(r,r,o,a,c,u);const h=this.view.constraints.constrain(r,this.view.viewpoint);this.view.viewpoint=h}}const fme=.06,yme=.7,mme=6e-4;class gme extends hi{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class vme extends hi{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var bh;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(bh||(bh={}));class bme extends hi{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=bh.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=bh.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case bh.IN:o=s.zoomIn();break;case bh.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}}const wme=.6;class _me extends hi{constructor(t,i){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this.view.mapViewNavigation,{x:r,y:n,deltaY:s}=t.data,o=1/wme**(1/60*s),a=i.zoom(o,[r,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class Sme extends hi{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this.dragEventSeparator=new Uw({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function lP(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>xme(i,e.axisThreshold))}:{buttons:[],axes:[]}}function Tme(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function Eme(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function xme(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class Ame{constructor(t,i){this.element=t,this.input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,u=this.inputDevices[a];u&&(this._emitGamepadEvent(o,lP(u),!1),this.inputDevices.splice(a,1),this.latestUpdate.splice(a,1),this.input.gamepad.devices.remove(u),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const i=new rC(t);i.deviceType!=="unknown"&&(this.inputDevices[t.index]=i,this.input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=Gh({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this.element.contains(document.activeElement),r=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(n=>{const s=this.inputDevices[n.index];if(!s)return;const o=this.latestUpdate[n.index],a=lP(s),u=r||Eme(a);o&&(o.timestamp===n.timestamp||!o.active&&u||Tme(o.state,a))||this._emitGamepadEvent(n,a,!u)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const n=i[r];this._validate(n)&&t(n)}}_emitGamepadEvent(t,i,r){const n=this.latestUpdate[t.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this.callback&&this.callback({device:this.inputDevices[t.index],state:i,action:o})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const uP=F("trident"),cP=F("edge"),Mme=F("chrome"),Cme=F("ff"),Ime=F("safari"),Sd={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class Vw{constructor(t,i){this.input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Ame(t,this.input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(E_[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&E_[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(E_[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Sd.touchNone:Sd.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Sd.touchPan:Sd.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Sd.touchNone),this._element.classList.remove(Sd.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=EU(this._element,t);return Vw.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=cpe(i);r&&t==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:(uP||cP)&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}uP||cP?r*=.7:Mme||Ime?r*=.6:Cme&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,o)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}Vw.test={disableSubpixelCoordinates:!1};const E_={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class Nme extends hi{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function pC(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Rme(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function Pme(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Ar()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[A,R]=e,[M,C]=[R.x-A.x,R.y-A.y];return t.radius=Math.sqrt(M*M+C*C)/2,t.center.x=(A.x+R.x)/2,t.center.y=(A.y+R.y)/2,t}let i=0,r=0;for(let A=0;A<e.length;A++)i+=e[A].x,r+=e[A].y;i/=e.length,r/=e.length;const n=e.map(A=>A.x-i),s=e.map(A=>A.y-r);let o=0,a=0,u=0,c=0,h=0,f=0,y=0;for(let A=0;A<n.length;A++){const R=n[A],M=s[A],C=R*R,k=M*M;o+=C,a+=k,u+=R*M,c+=C*R,h+=k*M,f+=R*k,y+=M*C}const m=.5*(c+f),g=.5*(h+y),v=o*a-u*u,b=(m*a-g*u)/v,w=(o*g-u*m)/v,T=Ar(b+i,w+r);return{radius:Math.sqrt(b*b+w*w+(o+a)/e.length),center:T}}const Cn={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class $me extends hi{constructor(t=Cn.maximumDoubleClickDelay,i=Cn.maximumDoubleClickDistance,r=Cn.maximumDoubleTouchDelay,n=Cn.maximumDoubleTouchDistance,s=Bm){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=Zr(t.doubleClickTimeout))}get hasPendingInputs(){return Ub(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_handleImmediateClick(t){const i=t.data,r=this._pointerId(i),n=this._pointerState.get(r);if(n){const s=i.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;pC(n.event.data,i)>s?(this._clearDoubleClickTimeout(r,!0),this._startClick(t)):(this._clearDoubleClickTimeout(r,!1),this._doubleClick.emit(n.event.data,void 0,n.event.modifiers))}else this._startClick(t)}_startClick(t){const i=this._pointerId(t.data),r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(i,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),r)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const i=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(i,!0)}_handleDrag(t){const i=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(i,!0)}_clearDoubleClickTimeout(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimeout.remove(),r.doubleClickTimeout=null,i&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class Dme extends hi{constructor(t=Cn.maximumDoubleClickDelay,i=Cn.maximumDoubleClickDistance,r=Cn.maximumDoubleTouchDelay,n=Cn.maximumDoubleTouchDistance,s=Bm){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ar(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Uw({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return Ub(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout.remove(),i.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:n,buttons:s,pointer:o,pointers:a,pointerType:u,timestamp:c}=r;return{action:t,delta:i,button:n,buttons:s,pointer:o,pointers:a,pointerType:u,timestamp:c}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",Ar(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,s=Ar(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,i);this._doubleTapDrag.emit(o,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,s=Ar(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,i);this._doubleTapDrag.emit(o,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=this._pointerId(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(r),pC(n.event.data,i)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:i}=t,{pointerId:r,button:n,pointerType:s}=i;return s==="mouse"?`${r}:${n}`:`${s}`}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,n=this._pointerId(i),s=r==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}class Lme extends hi{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,n){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:i.buttons,timestamp:n,pointers:Ome(this.activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=Sg(this.activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(i,n);const s=H1(n,uV(this.activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this.activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=Sg(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=Sg(this.activePointerMap);this.activePointerMap.forEach(r=>{r.initialAngle=H1(r,i)-t,r.lastAngle=H1(r,i)-t})}_emitEvent(t,i,r){const n=Sg(this.activePointerMap);this.drag.emit(this._createPayload(t,i,n,r),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this.activePointerMap.get(i)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,n=t.timestamp;switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this.isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(r),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function uV(e){const t=[];return e.forEach(i=>{t.push(Ar(i.event.x,i.event.y))}),Pme(t)}function Sg(e){const t=uV(e);let i=0;return e.forEach(r=>{let n=H1(r,t),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n,i+=n-r.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function Ome(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function H1(e,t){const i=e.event,r=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,r)}var dP;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(dP||(dP={}));class kme extends hi{constructor(t=Cn.maximumDoubleClickDelay,i=Cn.maximumDoubleClickDistance,r=Cn.maximumDoubleTouchDelay,n=Cn.maximumDoubleTouchDistance,s=Bm){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",o=>{this._handlePointerLoss(o,"pointer-up")}),this.registerIncoming("pointer-capture-lost",o=>{this._handlePointerLoss(o,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",o=>{this._handlePointerLoss(o,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=this._pointerId(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerLoss(t,i){const r=t.data,n=this._pointerId(r),s=this._pointerState.get(n);if(s&&i==="pointer-up"&&s.downButton===r.native.button){const o=s.immediateDoubleClick;if(o){o.timeoutHandle.remove();const a=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;pC(o,t.data)>a?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(r))}else this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_removeState(t){const i=this._pointerId(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const ff={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class Fme extends hi{constructor(t=ff.maximumClickDelay,i=ff.movementUntilMouseDrag,r=ff.movementUntilPenDrag,n=ff.movementUntilTouchDrag,s=ff.holdDelay,o=Bm){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=r,this.movementUntilTouchDrag=n,this.holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this.holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,i),void 0,n.modifiers):Rme(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),n.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,i)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&t.timestamp-s.startTimestamp<=this.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}}const Tg={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let th=class extends ce{constructor(){super(...arguments),this._handles=new Mi}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([Ln(()=>!e(),()=>this._disconnect()),Ln(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new Vw(e,this.view.input),i=[new kme,new Fme,new $me,new Lme(this.view.navigation),new Dme],r=new yl({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new Nme],Zl.INTERNAL),r.installHandlers("navigation",[new Sme(this.view),new pme(this.view),new _me(this.view),new aP(this.view),new aP(this.view,[Tg.counter]),new lme(this.view,"primary"),new gme(this.view,Tg.pan),new bme(this.view,Tg.zoom),new vme(this.view,Tg.rotate),new ume(this.view,"secondary"),new ame(this.view,"touch")],Zl.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,Y(()=>{var n,s;return(s=(n=this.view)==null?void 0:n.navigation)==null?void 0:s.browserTouchPanEnabled},n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},We)}get test(){return{inputManager:this._inputManager}}};l([d()],th.prototype,"view",void 0),l([d()],th.prototype,"latestPointerType",null),l([d()],th.prototype,"latestPointerLocation",null),th=l([S("esri.views.2d.input.MapViewInputManager")],th);const Bme=th;var hP,pP,fP,cV={exports:{}};hP=cV,pP=function(){function e(n,s,o,a,u){t(n,s,o||0,a||n.length-1,u||r)}function t(n,s,o,a,u){for(;a>o;){if(a-o>600){var c=a-o+1,h=s-o+1,f=Math.log(c),y=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*y*(c-y)/c)*(h-c/2<0?-1:1);t(n,s,Math.max(o,Math.floor(s-h*y/c+m)),Math.min(a,Math.floor(s+(c-h)*y/c+m)),u)}var g=n[s],v=o,b=a;for(i(n,o,s),u(n[a],g)>0&&i(n,o,a);v<b;){for(i(n,v,b),v++,b--;u(n[v],g)<0;)v++;for(;u(n[b],g)>0;)b--}u(n[o],g)===0?i(n,o,b):i(n,++b,a),b<=s&&(o=b+1),s<=b&&(a=b-1)}}function i(n,s,o){var a=n[s];n[s]=n[o],n[o]=a}function r(n,s){return n<s?-1:n>s?1:0}return e},(fP=pP())!==void 0&&(hP.exports=fP);const Ume=cV.exports;function fb(e,t){if(!(this instanceof fb))return new fb(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function Vme(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function Td(e,t){my(e,0,e.children.length,t,e)}function my(e,t,i,r,n){n||(n=ih(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<i;o++)s=e.children[o],gy(n,e.leaf?r(s):s);return n}function gy(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function yP(e,t){return e.minX-t.minX}function mP(e,t){return e.minY-t.minY}function x_(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Eg(e){return e.maxX-e.minX+(e.maxY-e.minY)}function jme(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function zme(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function A_(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function xg(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function ih(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gP(e,t,i,r,n){for(var s,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=r||(s=t+Math.ceil((i-t)/r/2)*r,Ume(e,s,t,i,n),o.push(t,s,s,i))}fb.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!xg(e,t))return i;for(var n,s,o,a,u=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],xg(e,a=t.leaf?r(o):o)&&(t.leaf?i.push(o):A_(e,a)?this._all(o,i):u.push(o));t=u.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!xg(e,t))return!1;for(var r,n,s,o,a=[];t;){for(r=0,n=t.children.length;r<n;r++)if(s=t.children[r],xg(e,o=t.leaf?i(s):s)){if(t.leaf||A_(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=ih([]),this},remove:function(e,t){if(!e)return this;for(var i,r,n,s,o=this.data,a=this.toBBox(e),u=[],c=[];o||u.length;){if(o||(o=u.pop(),r=u[u.length-1],i=c.pop(),s=!0),o.leaf&&(n=Vme(e,o.children,t))!==-1)return o.children.splice(n,1),u.push(o),this._condense(u),this;s||o.leaf||!A_(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(u.push(o),c.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:yP,compareMinY:mP,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var n,s=i-t+1,o=this._maxEntries;if(s<=o)return Td(n=ih(e.slice(t,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=ih([])).leaf=!1,n.height=r;var a,u,c,h,f=Math.ceil(s/o),y=f*Math.ceil(Math.sqrt(o));for(gP(e,t,i,y,this.compareMinX),a=t;a<=i;a+=y)for(gP(e,a,c=Math.min(a+y-1,i),f,this.compareMinY),u=a;u<=c;u+=f)h=Math.min(u+f-1,c),n.children.push(this._build(e,u,h,r-1));return Td(n,this.toBBox),n},_chooseSubtree:function(e,t,i,r){for(var n,s,o,a,u,c,h,f;r.push(t),!t.leaf&&r.length-1!==i;){for(h=f=1/0,n=0,s=t.children.length;n<s;n++)u=x_(o=t.children[n]),(c=jme(e,o)-u)<f?(f=c,h=u<h?u:h,a=o):c===f&&u<h&&(h=u,a=o);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),gy(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=ih(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,Td(i,this.toBBox),Td(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=ih([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Td(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,s,o,a,u,c,h;for(u=c=1/0,r=t;r<=i-t;r++)o=zme(n=my(e,0,r,this.toBBox),s=my(e,r,i,this.toBBox)),a=x_(n)+x_(s),o<u?(u=o,h=r,c=a<c?a:c):o===u&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:yP,n=e.leaf?this.compareMinY:mP;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n,s,o=this.toBBox,a=my(e,0,t,o),u=my(e,i-t,i,o),c=Eg(a)+Eg(u);for(n=t;n<i-t;n++)s=e.children[n],gy(a,e.leaf?o(s):s),c+=Eg(a);for(n=i-t-1;n>=t;n--)s=e.children[n],gy(u,e.leaf?o(s):s),c+=Eg(u);return c},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)gy(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():Td(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class yb{constructor(t,i){this.key=new ki(0,0,0,0),this.bounds=nu(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return Ue.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=er.acquire();for(let r=0;r<t.length;r++)i[r]=new yb(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return Q7.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Su={added:[],removed:[]},M_=new Set,Hme=new ki(0,0,0,0);class Gme extends Ma{constructor(t){super(),this._tiles=new Map,this._index=fb(9,F("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const n=new yb(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of t.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:a,colTo:u}of r)for(let c=a;c<=u;c++){const h=Hme.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(M_.add(h),!this.has(h)){const f=new yb(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),Su.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];M_.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Su.removed.push(a))}(Su.added.length||Su.removed.length)&&this.emit("update",Su),cp.pool.release(i),M_.clear(),Su.added.length=0,Su.removed.length=0}}let qme=0,wl=class extends ce{constructor(){super(...arguments),this.color=new se([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return qme++}};l([d({readOnly:!0})],wl.prototype,"version",null),l([d({type:se})],wl.prototype,"color",void 0),l([d({type:se})],wl.prototype,"haloColor",void 0),l([d()],wl.prototype,"haloOpacity",void 0),l([d()],wl.prototype,"fillOpacity",void 0),wl=l([S("esri.views.2d.support.HighlightOptions")],wl);const dV=wl,Wme=e=>e.includes("Brush");class hV{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),Wme(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function Yme(e,t,i,r,n,s,o,a){let u;e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?u=[e.width,e.height]:e.width==null&&e.height!=null?u=[e.height,e.height]:e.width!=null&&e.height==null?u=[e.width,e.width]:e.width==null&&e.height==null&&(u=null);const c=i[0]-(r.left+r.right),h=i[1]-(r.top+r.bottom);let f,y,m=e.area||{x:0,y:0,width:c,height:h};if(u){const g=c/h,v=u[0]/u[1];if(v>g){const b=m.width/v;m={x:m.x,y:Math.round(m.y+(m.height-b)/2),width:m.width,height:Math.round(b)}}else{const b=m.height*v;m={x:Math.round(m.x+(m.width-b)/2),y:m.y,width:Math.round(b),height:m.height}}}else u=[m.width,m.height];return u[0]>m.width?(f=Math.min(u[0]/m.width,t),y=u[0]/m.width/f):(f=1,y=u[0]/m.width),{resolutionScale:f,cropArea:{x:Math.round((m.x+r.left)*f),y:Math.round((m.y+r.top)*f),width:Math.round(m.width*f),height:Math.round(m.height*f)},outputScale:y,format:n,quality:s,children:o,rotation:a}}function Kme(e,t,i){const{ctx:r,canvas:n}=pV(e,i),s=r.getImageData(0,0,e.width,e.height),o=Xme(n,t);return fV(n),{dataUrl:o,data:s}}function Zme(e,t){const{ctx:i,canvas:r}=pV(e,t),n=i.getImageData(0,0,e.width,e.height);return fV(r),n}function pV(e,t){const i=Jme();t.premultipliedAlpha&&n0e(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d");return r.putImageData(e,0,0),t.flipY&&r0e(r),{ctx:r,canvas:i}}function fV(e){e.width=0,e.height=0}function Jme(){return O(C_)&&(C_=document.createElement("canvas")),C_}let C_=null;function Xme(e,t){const i=s0e[t.format],r=t.quality/100;return e.toDataURL(i,r)}function Qme(e,t){const i=i0e(e),r=a0e[i];return{format:i,quality:Nr(t!=null?t:r,0,100)}}function e0e(e,t){return t/Math.max(e[0],e[1])}function nxe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(mb)try{return new ImageData(e,t)}catch{mb=!1}return yV(e,t,i)}function sxe(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(mb)try{return new ImageData(e,t,i)}catch{mb=!1}const n=yV(t,i,r);return n.data.set(e,0),n}function oxe(e,t,i,r=0,n=0,s=e.width-r,o=e.height-n,a=!1){const{data:u}=e,{width:c,height:h,data:f}=t,y=s/c,m=o/h,g=Math.ceil(y/2),v=Math.ceil(m/2),b=e.width;for(let w=0;w<h;w++)for(let T=0;T<c;T++){const A=4*(T+(a?h-w-1:w)*c);let R=0,M=0,C=0,k=0,B=0,H=0;const Q=(w+.5)*m;for(let ee=Math.floor(w*m);ee<(w+1)*m;ee++){const le=Math.abs(Q-(ee+.5))/v,be=(T+.5)*y,oe=le*le;for(let Nt=Math.floor(T*y);Nt<(T+1)*y;Nt++){const Or=Math.abs(be-(Nt+.5))/g,ft=Math.sqrt(oe+Or*Or);if(ft>=1)continue;let kr=2*ft*ft*ft-3*ft*ft+1;const Un=4*(r+Nt+(n+ee)*b);H+=kr*u[Un+3],M+=kr,!i&&u[Un+3]<255&&(kr=kr*u[Un+3]/255),C+=kr*u[Un],k+=kr*u[Un+1],B+=kr*u[Un+2],R+=kr}}f[A]=C/R,f[A+1]=k/R,f[A+2]=B/R,f[A+3]=H/M}return t}function yV(e,t,i){return i||(i=t0e()),i.getContext("2d").createImageData(e,t)}let yf=null,mb=!0;function t0e(){return yf||(yf=document.createElement("canvas"),yf.width=1,yf.height=1),yf}function i0e(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return o0e}}function r0e(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function n0e(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const n=t[r+3];if(n!==255&&n>0){const s=255/n;t[r+0]=t[r+0]*s,t[r+1]=t[r+1]*s,t[r+2]=t[r+2]*s}}}const s0e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},vP=98,o0e="png",a0e={png:100,jpg:vP,jpeg:vP};var Ut;function axe(e,t,i={}){const r=mV(e);for(;r.length>1;){const n=gb(t,r.shift(),i);if(E(n))return n}return l0e(t,r.shift(),i)}function mV(e){const t=F("esri-force-webgl");if(t===Ut.WEBGL1||t===Ut.WEBGL2)return[t];switch(e){case"2d":return F("mac")&&F("chrome")?[Ut.WEBGL1,Ut.WEBGL2]:[Ut.WEBGL2,Ut.WEBGL1];case"3d":return[Ut.WEBGL2,Ut.WEBGL1]}}function l0e(e,t,i={}){if(!window.WebGLRenderingContext)return bP(e,u0e),null;const r=gb(e,t,i);return O(r)&&bP(e,c0e),r}function gb(e,t,i={}){const r=t===Ut.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const s of r){try{n=e.getContext(s,i)}catch{}if(n)break}return n}function bP(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(Ut||(Ut={}));const u0e='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',c0e=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let I_,N_;function oA(e){const t=mV(e);for(;t.length>1;){const i=wP(t.shift());if(i.available)return i}return wP(t.shift())}function wP(e){switch(e){case Ut.WEBGL1:return d0e();case Ut.WEBGL2:return h0e()}}function d0e(){return I_||(I_=y0e()),I_}function h0e(){return N_||(N_=m0e()),N_}class gV{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class p0e extends gV{constructor(){super(...arguments),this.type=Ut.WEBGL1}}class f0e extends gV{constructor(){super(...arguments),this.type=Ut.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function vV(e,t){var s;if(e===Ut.WEBGL1&&typeof WebGLRenderingContext===void 0||e===Ut.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const i=document.createElement("canvas");if(!i)return null;let r=gb(i,e,{failIfMajorPerformanceCaveat:!0});if(O(r)&&(r=gb(i,e),E(r)&&(t.majorPerformanceCaveat=!0)),O(r))return r;if(e===Ut.WEBGL1){const o=(s=r.getParameter(r.VERSION))==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(o){const a=parseFloat(o[1]);t.available=a>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),r}function y0e(){const e=new p0e,t=vV(Ut.WEBGL1,e);return O(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function m0e(){const e=new f0e,t=vV(Ut.WEBGL2,e);return O(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function g0e(e){const t=oA(e);if(!t.available)return new P("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new P("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new P("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new P("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Ut.WEBGL1){if(!t.supportsElementIndexUint)return new P("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new P("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new P("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function v0e(e){return e&&"nodeType"in e}function b0e(e){return e&&typeof e.render=="function"}const _P={component:"esri-component"};let ec=class extends ce{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(_P.component),t&&t.classList.remove(_P.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||v0e(e)?(this._set("widget",null),G3(e)):(b0e(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};l([d({dependsOn:[]})],ec.prototype,"id",null),l([d()],ec.prototype,"node",null),l([je("node")],ec.prototype,"castNode",null),l([d({readOnly:!0})],ec.prototype,"widget",void 0),ec=l([S("esri.views.ui.Component")],ec);const G1=ec,w0e={left:0,top:0,bottom:0,right:0},bV={bottom:30,top:15,right:15,left:15},R_="manual",Hi={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function _0e(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function P_(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function $_(e,{top:t,bottom:i,left:r,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=n}let ia=class extends Ma.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new Mi,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&$_(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&$_(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([Y(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,We),Y(()=>this.padding,this._applyUIPadding,We)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Hi.ui),Bre(e),this._attachContainers(e)),t&&(t.classList.remove(Hi.ui),$_(t,{top:"",bottom:"",left:"",right:""}),w8(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...bV,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach(s=>this.add(s,t));const n=P_(e);n&&({index:i,position:t,component:e,key:r}=n),t&&typeof t=="object"&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const n=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||R_)===R_?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(Hi.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(s=>this.move(s,t)),!e)return;let i;const r=P_(e)||P_(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof G1||(e=new G1({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof G1?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||w0e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Hi.innerContainer),e.classList.add(Hi.cornerContainer);const t=document.createElement("div");t.classList.add(Hi.innerContainer),t.classList.add(Hi.manualContainer);const i=document.createElement("div");i.classList.add(Hi.topLeft),i.classList.add(Hi.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(Hi.topRight),r.classList.add(Hi.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(Hi.bottomLeft),n.classList.add(Hi.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Hi.bottomRight),s.classList.add(Hi.corner),e.appendChild(s),this._innerContainer=e,this._manualContainer=t;const o=jl();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":n,"bottom-right":s,"top-leading":o?r:i,"top-trailing":o?i:r,"bottom-leading":o?s:n,"bottom-trailing":o?n:s},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||R_,r=e.index,n=this._positionNameToContainerLookup[i],s=r>-1;if(_0e(t.widget)&&t.widget.startup(),!s)return void n.appendChild(t.node);const o=Array.prototype.slice.call(n.children);if(r===0)return void(n.firstChild?kN(t.node,n.firstChild):n.appendChild(t.node));r>=o.length?n.appendChild(t.node):kN(t.node,o[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(r=>(t=r===e,t&&(i=r),t)),i}_findById(e){let t,i=null;return this._components.some(r=>(t=r.id===e,t&&(i=r),t)),i}_findByNode(e){let t,i=null;return this._components.some(r=>(t=r.node===e,t&&(i=r),t)),i}};l([d()],ia.prototype,"container",null),l([d()],ia.prototype,"height",null),l([d({value:bV})],ia.prototype,"padding",null),l([je("padding")],ia.prototype,"castPadding",null),l([d()],ia.prototype,"view",void 0),l([d()],ia.prototype,"width",null),ia=l([S("esri.views.ui.UI")],ia);const S0e=ia;function SP(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function T0e(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function Ag(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function E0e(e){return e.type==="bing-maps"}const Ga=[];let rh=class extends sm{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new me,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>Y(()=>{var n;return[r.suspended,(n=r.layer)==null?void 0:n.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([iu(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ln(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");Ga.length=0,e?(e.forEach(t=>{var n;if(t.suspended||!((n=t.layer)!=null&&n.attributionVisible))return;const i=t.layer;if(SP(i,"user"))return void Ag(Ga,t,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(t)){const s=this._fetchedAttributionData.get(t);return void(s?Ag(Ga,t,this._getDynamicAttribution(s,this.view,i)):SP(i)&&Ag(Ga,t,i.copyright))}return void this._fetchAttributionData(t)}const r=i.get("portalItem.accessInformation");Ag(Ga,t,r||i.copyright)}),T0e(this.items,Ga)&&(this.items.removeAll(),this.items.addMany(Ga)),Ga.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await zb(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,E0e(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let n=0;n<i.length;n++){const s=i[n],o=s.coverageAreas;if(!o)return;for(const a of o){const u=a.bbox,c=a.zoomMin-(t&&a.zoomMin?1:0),h=a.zoomMax-(t&&a.zoomMax?1:0),f={xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:we.WGS84},y={extent:ga(f),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:n};for(let m=c;m<=h;m++)r[m]=r[m]||[],r[m].push(y)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:n}=t;let s=i.tileInfo.scaleToZoom(n);if(s=Math.min(e.maxKey,Math.round(s)),!r||s==null||s<=-1)return"";const o=e[s],a=Kb(r.center.clone().normalize(),t.spatialReference),u={};return o?o.filter(c=>{const h=!u[c.id]&&a&&Zb(c.extent,a);return h&&(u[c.id]=!0),h}).sort((c,h)=>h.score-c.score||c.objectId-h.objectId).map(c=>c.attribution).join(", "):""}};l([d({readOnly:!0,type:me})],rh.prototype,"items",void 0),l([d({readOnly:!0})],rh.prototype,"state",null),l([d()],rh.prototype,"view",void 0),rh=l([S("esri.widgets.Attribution.AttributionViewModel")],rh);const wV=rh,qa={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Yi=class extends Ci{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=qa.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new wV}initialize(){this.own(iu(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[qa.open]:this._isOpen};return N("div",{bind:this,class:this.classes(qa.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return N("div",{class:qa.poweredBy},"Powered by"," ",N("a",{class:qa.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:r}=this,n={[qa.sourcesOpen]:e,[qa.interactive]:t};return N("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(qa.sources,n),innerHTML:r,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:n}=e,s=n>r,o=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,o&&(t=!0),this._isOpen){const a=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([d()],Yi.prototype,"_isOpen",void 0),l([d()],Yi.prototype,"_isInteractive",null),l([d()],Yi.prototype,"_attributionTextOverflowed",void 0),l([d()],Yi.prototype,"_prevSourceNodeHeight",void 0),l([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Yi.prototype,"attributionText",null),l([d()],Yi.prototype,"iconClass",void 0),l([d()],Yi.prototype,"itemDelimiter",void 0),l([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Yi.prototype,"label",void 0),l([d(),Si("esri/widgets/Attribution/t9n/Attribution")],Yi.prototype,"messages",void 0),l([X("viewModel.view")],Yi.prototype,"view",void 0),l([d({type:wV})],Yi.prototype,"viewModel",void 0),l([Tr()],Yi.prototype,"_toggleState",null),Yi=l([S("esri.widgets.Attribution")],Yi);const x0e=Yi,A0e="esri.widgets.CompassViewModel";let tc=class extends iC(ce){constructor(e){super(e),this._handles=new Mi,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Y(()=>this.view,this._updateRotationWatcher,We))}destroy(){this._handles=Zr(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?Y(()=>e==null?void 0:e.rotation,this._updateForRotation,We):Y(()=>e==null?void 0:e.camera,this._updateForCamera,We))}};l([d({readOnly:!0})],tc.prototype,"canShowNorth",null),l([d()],tc.prototype,"orientation",void 0),l([d({readOnly:!0})],tc.prototype,"state",null),l([d()],tc.prototype,"view",void 0),tc=l([S(A0e)],tc);const _V=tc,Wa={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Zs=class extends Ci{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=Wa.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new _V}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",r=(t==="rotation"?"rotation":"compass")=="compass",n=i?-1:0,s={[Wa.disabled]:i,[Wa.interactive]:!i},o={[Wa.northIcon]:r,[Wa.rotationIcon]:!r},{messages:a}=this;return N("div",{bind:this,class:this.classes(Wa.base,s),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":a.reset,title:a.reset},N("span",{"aria-hidden":"true",class:this.classes(Wa.icon,o),styles:this._toRotationTransform(e)}),N("span",{class:Wa.text},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};l([X("viewModel.goToOverride")],Zs.prototype,"goToOverride",void 0),l([d()],Zs.prototype,"iconClass",void 0),l([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Zs.prototype,"label",void 0),l([d(),Si("esri/widgets/Compass/t9n/Compass")],Zs.prototype,"messages",void 0),l([X("viewModel.view")],Zs.prototype,"view",void 0),l([d({type:_V})],Zs.prototype,"viewModel",void 0),l([Tr()],Zs.prototype,"_reset",null),Zs=l([S("esri.widgets.Compass")],Zs);const M0e=Zs;let nh=class extends ce{constructor(e){super(e),this._handles=new Mi,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(Ln(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};l([d({readOnly:!0})],nh.prototype,"state",null),l([d()],nh.prototype,"navigationMode",void 0),l([d()],nh.prototype,"view",void 0),nh=l([S("esri.widgets.NavigationToggleViewModel")],nh);const SV=nh,dn={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Js=class extends Ci{constructor(e,t){super(e,t),this.iconClass=dn.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new SV}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[dn.disabled]:e,[dn.isLayoutHorizontal]:this.layout==="horizontal"},r={[dn.activeButton]:t},n={[dn.activeButton]:!t},s=e?-1:0,o=this.messages.toggle;return N("div",{bind:this,class:this.classes(dn.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:s,"aria-label":o,title:o},N("div",{class:this.classes(dn.button,dn.panButton,r)},N("span",{class:dn.panIcon})),N("div",{class:this.classes(dn.button,dn.rotateButton,n)},N("span",{class:dn.rotationIcon})))}_toggle(){this.toggle()}};l([d()],Js.prototype,"iconClass",void 0),l([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Js.prototype,"label",void 0),l([d({value:"vertical"})],Js.prototype,"layout",null),l([d(),Si("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Js.prototype,"messages",void 0),l([X("viewModel.view")],Js.prototype,"view",void 0),l([d({type:SV})],Js.prototype,"viewModel",void 0),l([Tr()],Js.prototype,"_toggle",null),Js=l([S("esri.widgets.NavigationToggle")],Js);const C0e=Js,mf={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let _l=class extends Ci{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[mf.disabled]:!this.enabled,[mf.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return N("div",{bind:this,class:this.classes(mf.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},N("span",{"aria-hidden":"true",role:"presentation",class:this.classes(mf.icon,i)}),N("span",{class:mf.iconText},this.title))}_triggerAction(){this.action.call(this)}};l([d()],_l.prototype,"action",void 0),l([d()],_l.prototype,"enabled",void 0),l([d()],_l.prototype,"iconClass",void 0),l([d()],_l.prototype,"title",void 0),l([Tr()],_l.prototype,"_triggerAction",null),_l=l([S("esri.widgets.IconButton")],_l);const TP=_l;let sh=class extends ce{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};l([d({readOnly:!0})],sh.prototype,"canZoomIn",null),l([d({readOnly:!0})],sh.prototype,"canZoomOut",null),l([d()],sh.prototype,"view",void 0),sh=l([S("esri.widgets.Zoom.ZoomConditions2D")],sh);const I0e=sh;let oh=class extends ce{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};l([d({readOnly:!0})],oh.prototype,"canZoomIn",null),l([d({readOnly:!0})],oh.prototype,"canZoomOut",null),l([d()],oh.prototype,"view",void 0),oh=l([S("esri.widgets.Zoom.ZoomConditions3D")],oh);const N0e=oh;let Sl=class extends ce{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new I0e({view:e}):e.type==="3d"&&(this._zoomConditions=new N0e({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Z_(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Z_(e.goTo({zoomFactor:.5}))}};l([d()],Sl.prototype,"_zoomConditions",void 0),l([d({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Sl.prototype,"canZoomIn",void 0),l([d({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Sl.prototype,"canZoomOut",void 0),l([d({readOnly:!0})],Sl.prototype,"state",null),l([d()],Sl.prototype,"view",null),Sl=l([S("esri.widgets.Zoom.ZoomViewModel")],Sl);const TV=Sl,gf={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let ra=class extends Ci{constructor(e,t){super(e,t),this.iconClass=gf.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new TV}initialize(){this._zoomInButton=new TP({action:this.zoomIn.bind(this),iconClass:gf.zoomInIcon}),this._zoomOutButton=new TP({action:this.zoomOut.bind(this),iconClass:gf.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[gf.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,N("div",{class:this.classes(gf.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};l([d()],ra.prototype,"iconClass",void 0),l([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ra.prototype,"label",void 0),l([d({value:"vertical"})],ra.prototype,"layout",null),l([d(),Si("esri/widgets/Zoom/t9n/Zoom")],ra.prototype,"messages",void 0),l([X("viewModel.view")],ra.prototype,"view",void 0),l([d({type:TV})],ra.prototype,"viewModel",void 0),ra=l([S("esri.widgets.Zoom")],ra);const EV=ra,xV="esri.views.ui.DefaultUI";function R0e(e){return e&&e.view!==void 0}W.getLogger(xV);let q1=class extends S0e{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([Y(()=>this.components,this._componentsWatcher.bind(this),We),Y(()=>this.view,this._updateViewAwareWidgets.bind(this),We)])}_add(e,t,i,r){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,r)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),r=i&&i.widget;R0e(r)&&(r.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new G1({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new x0e({view:this.view})}_createCompass(){return new M0e({view:this.view})}_createNavigationToggle(){return new C0e({view:this.view})}_createZoom(){return new EV({view:this.view})}};l([d()],q1.prototype,"components",void 0),q1=l([S(xV)],q1);const P0e=q1;let W1=class extends P0e{constructor(e){super(e),this.components=["attribution","zoom"]}};l([d()],W1.prototype,"components",void 0),W1=l([S("esri.views.ui.2d.DefaultUI2D")],W1);const AV=W1;var aA;let Y1=aA=class extends j{constructor(e){super(e),this.color=new se([0,0,0,1])}clone(){return new aA($({color:this.color}))}};l([d({type:se,json:{write:!0}})],Y1.prototype,"color",void 0),Y1=aA=l([S("esri.webmap.background.ColorBackground")],Y1);const $0e=Y1,Lo=W.getLogger("esri.views.MapView");let MV,CV,IV,NV,RV,PV;async function D0e(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,Stage:s}]=await Promise.all([V(()=>import("./webglDeps.25b576d6.js"),["webglDeps.25b576d6.js","VertexArrayObject.4de33820.js","Texture.723f1298.js","ProgramTemplate.72a295d9.js","programUtils.34c1b4a4.js"],import.meta.url),V(()=>import("./mapViewDeps.7fe11df0.js"),["mapViewDeps.7fe11df0.js","CIMSymbolHelper.b7bce5b2.js","BidiEngine.ec67919b.js","MaterialKey.e49a9339.js","Utils.0d6a4873.js","Texture.723f1298.js","utils.9f5c0c70.js","WGLContainer.150ce0ac.js","pixelUtils.a71d38d7.js","VertexArrayObject.4de33820.js","ProgramTemplate.72a295d9.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","programUtils.34c1b4a4.js","ExpandedCIM.7474bc73.js","quantizationUtils.ecebcefd.js","_commonjsHelpers.01f5fe30.js","imageutils.deac8ce4.js","Matcher.caf07c0c.js","visualVariablesUtils.b5aaf02b.js","visualVariablesUtils.af8c0332.js","tileUtils.f1f0078a.js","TileClipper.6695b533.js","devEnvironmentUtils.8c6e6b72.js","CircularArray.356e1ead.js","requestImageUtils.2e51e692.js","ComputedAttributeStorage.90440d0b.js","centroid.92e04ee9.js","BaseGraphicContainer.c01f4603.js","normalizeUtilsSync.fa852835.js","projectionSupport.bc7a22a7.js","json.d1a0fa35.js","FeatureContainer.49f22c95.js","TileContainer.6677f24d.js","schemaUtils.ac331e2c.js","createSymbolSchema.52220ac9.js","MD5.97b39efc.js","util.e93d9be3.js","vec3f32.8d37ecf5.js","GraphicContainer.02e110a8.js"],import.meta.url)]);CV=e,IV=t,NV=i,RV=r,PV=n,MV=s}const EP=160;function L0e(e){return e&&e.declaredClass==="esri.Viewpoint"}let Se=class extends dee($pe(Dpe(afe))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Yh({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new dye(this),this._pePromise=null,this.floors=new me,this.highlightOptions=new dV,this.inputManager=new Bme({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new hV,this.type="2d",this.ui=new AV,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new XU,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([Y(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(EP)},Wh),this.on("resize",t=>this._resizeHandler(t)),Y(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),IX()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Gme(this.featuresTilingScheme)}get initialExtentRequired(){var o;const{scale:e,constraints:t,center:i,viewpoint:r,extent:n}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)==null?void 0:o.viewpoint))&&!n&&(t!=null&&t.effectiveLODs||(s=-1),(!i||e===0&&s===-1)&&(!r||!E(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Zc()||(this._pePromise||(this._pePromise=Jc().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!su(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new he({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void Lo.error(new P("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;Xx(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(Y(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},Wh),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Lo.error(new P("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void Lo.error(new P("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;Kfe(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;aye(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;eP(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new P("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):O(e.targetGeometry)&&(i=new P("mapview:invalid-viewpoint","geometry not defined"))}catch(n){i=new P("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(i)return void Lo.error(i);this._scaleBeforeChangingSpatialReference=null;const r=new ao({targetGeometry:new he,scale:0,rotation:0});Ps(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;eP(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),nm(()=>this.ready,t).then(()=>{const i={animate:!0,...t},r=qfe(e,this);return this.animation.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});Lo.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=K5(e)?Y5(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,n=!1,s=null,o=null;t!=null&&t.include?AP(t.include,xP(this,h=>r.add(h),h=>{s||(s=new Set),s.add(h)},h=>r.add(h),()=>n=!0)):(n=!0,r=new Set(this.allLayerViews)),t!=null&&t.exclude&&AP(t.exclude,xP(this,h=>r.delete(h),h=>{o||(o=new Set),o.add(h)}));const a=this.allLayerViews.filter(h=>!h.suspended&&r.has(h)).reverse(),u=this.toMap(i);let c=[...n?this.graphicsView.hitTest(u).map(h=>({type:"graphic",graphic:h,layer:null,mapPoint:u})):[],...await Promise.all(a.map(h=>h.hitTest(u,i)).toArray())].filter(E).flat().filter(E);return s&&(c=c.filter(h=>!("graphic"in h)||!h.graphic||s.has(lA(h.graphic)))),o&&(c=c.filter(h=>!("graphic"in h)||!h.graphic||o.has(lA(h.graphic)))),{screenPoint:i,results:c}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return Kme(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return Zme(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,e0e(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(s=>{const o=this.allLayerViews.find(a=>a.layer.id===s.id);o&&"container"in o&&o.container&&i.push(o.container)})):i=this._stage.children;const{format:r,quality:n}=Qme(e.format,e.quality);return Yme(e,t,this.size,this.padding,r,n,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=K5(e)?Y5(this,e):e,i=[0,0],[r,n]=this.state.toMap(i,[t.x,t.y]),s=this.spatialReference;return new he({x:r,y:n,spatialReference:s})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),Ar(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return iP.hasLayerViewModule(e)}importLayerView(e){return iP.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(Lo.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=g0e(this.type);return F("safari")&&F("safari")<9&&(e=new P("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:F("safari")})),E(e)?(Lo.warn("#validate()",e.message),Promise.reject(e)):D0e()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new Zx),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,n=i.then(()=>{r()&&(this.animation=null)}).catch(o=>{throw r()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),o}),s=new Promise(o=>o(n));return t.when().catch(()=>{r()&&s.cancel&&s.cancel()}),s}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,n=e.then(s=>{if(Ct(t),i!==this._gotoTask)throw new P("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=s,r.finish()});return this._cancellableGoTo(i,r,n)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<EP&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var b,w,T,A;const{constraints:e,initialExtent:t,map:i,padding:r,size:n}=this;if(!e)return null;const s=i&&"initialViewProperties"in i&&i.initialViewProperties,o={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?o.zoom!==-1&&(o.scale=e.zoomToScale(o.zoom)):o.zoom=-1;let a=null,u=null,c=0;const h=o.viewpoint&&o.viewpoint.rotation,f=o.viewpoint&&o.viewpoint.targetGeometry;E(f)&&(f.type==="extent"?a=f:f.type==="point"&&(u=f,c=o.viewpoint.scale));const y=o.extent||a||((w=(b=s==null?void 0:s.viewpoint)==null?void 0:b.targetGeometry)==null?void 0:w.extent)||t,m=o.center||u||(y==null?void 0:y.center),g=o.scale||c||((T=s==null?void 0:s.viewpoint)==null?void 0:T.scale)||y&&Wy(y,[n[0]-r.left-r.right,n[1]-r.top-r.bottom]),v=o.rotation||h||((A=s==null?void 0:s.viewpoint)==null?void 0:A.rotation)||0;return m&&g?new ao({targetGeometry:m,scale:g,rotation:v}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation,n=e.then(s=>{if(Ct(t),i!==this._gotoTask)throw new P("view:goto-interrupted","Goto was interrupted");return r.update(s),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,n)}_project(e,t){var n;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||((n=i.spatialReference)==null?void 0:n.imageCoordinateSystem)||hr(t,i.spatialReference))return e;const r=Ip(i,t);if(!r)throw new P("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return L0e(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],oye(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var a,u;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(c){Lo.warn(new ur("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:c})),e.targetGeometry=((a=this.defaultsFromMap.extent)==null?void 0:a.center)||new he({x:0,y:0,spatialReference:this.spatialReference})}(u=this.constraints)==null||u.fit(e),this._set("state",new Qye({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new MV(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new PV,this._magnifierView.magnifier=this.magnifier;const r=new NV({view:this});this._set("labelManager",r);const n=new cye({view:this});this._set("animationManager",n);const s=new RV({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",c=>this.fatalError=c.error),Y(()=>this.stationary,c=>i.stationary=c,Al),Y(()=>this.background,c=>{i.background=c,this._magnifierView.background=c},Al),Y(()=>this.magnifier,c=>this._magnifierView.magnifier=c,Al),Y(()=>this.renderingOptions,c=>i.renderingOptions=c,Al),Y(()=>this.highlightOptions,c=>i.highlightOptions=c,Al),Y(()=>this.state.id,()=>i.state=this.state,Al)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(c=>c(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:n}=this.state.paddedViewState,s=new he({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",r),this._set("scale",n),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new nme(ca.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new CV({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new IV(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const a of this.allLayerViews)a.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(O(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}const i=t.clone(),[r,n]=t.center;let s=null;try{s=this._project(new he({x:r,y:n,spatialReference:t.spatialReference}),e)}catch(a){Zc()||Lo.warn(new ur("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:s.toJSON(),spatialReference:e,error:a}))}s||(s=new he({x:0,y:0,spatialReference:e}));const o=Xx(new ao({targetGeometry:new he,scale:0,rotation:0}),t.viewpoint,s);i.viewpoint=o;try{const u=[t.size[0]/2,t.size[1]/2],c=[u[0]+20,u[1]],h=t.toMap([0,0],c),{x:f,y}=this._project(new he({x:h[0],y:h[1],spatialReference:t.spatialReference}),e);h[0]=f,h[1]=y,i.toScreen(h,h);const m=nye(u,h,c),g=Math.hypot(h[0]-u[0],h[1]-u[1])/20;!Number.isFinite(g)||Math.abs(g)>4?(o.rotation=0,o.targetGeometry=new he({x:0,y:0,spatialReference:e})):(o.scale*=g,o.scale>F("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(m)?m:0)}catch{}this._get("constraints").constrain(o,null),this._get("state").viewpoint=o,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const a of this.allLayerViews)a.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Se.type="2d",l([d({readOnly:!0})],Se.prototype,"animationManager",void 0),l([d({constructOnly:!0})],Se.prototype,"deactivatedWebGLExtensions",void 0),l([d({constructOnly:!0})],Se.prototype,"debugWebGLExtensions",void 0),l([d({readOnly:!0})],Se.prototype,"featuresTilingScheme",void 0),l([d({readOnly:!0})],Se.prototype,"fullOpacity",void 0),l([d({readOnly:!0})],Se.prototype,"graphicsTileStore",null),l([d()],Se.prototype,"graphicsView",void 0),l([d({readOnly:!0})],Se.prototype,"state",void 0),l([d()],Se.prototype,"initialExtentRequired",null),l([d()],Se.prototype,"labelManager",void 0),l([d({readOnly:!0})],Se.prototype,"resourceManager",null),l([d({readOnly:!0})],Se.prototype,"textureManager",null),l([d({readOnly:!0})],Se.prototype,"mapViewNavigation",void 0),l([d({constructOnly:!0})],Se.prototype,"renderCanvas",void 0),l([d()],Se.prototype,"renderingOptions",void 0),l([d({readOnly:!0})],Se.prototype,"rendering",void 0),l([d({constructOnly:!0})],Se.prototype,"supersampleScreenshotsEnabled",void 0),l([d({readOnly:!0})],Se.prototype,"supportsGround",void 0),l([d()],Se.prototype,"_stationaryTimer",void 0),l([d()],Se.prototype,"_defaultsFromMapSettings",null),l([d()],Se.prototype,"_pePromise",void 0),l([d({readOnly:!0})],Se.prototype,"typeSpecificPreconditionsReady",null),l([d()],Se.prototype,"animation",null),l([d({type:$0e})],Se.prototype,"background",null),l([d({value:null,type:he,dependsOn:["state.id","ready"]})],Se.prototype,"center",null),l([d({type:XU})],Se.prototype,"constraints",null),l([d({value:null,type:Ue,dependsOn:["state.id","ready"]})],Se.prototype,"extent",null),l([d()],Se.prototype,"floors",void 0),l([d({type:dV})],Se.prototype,"highlightOptions",void 0),l([d({readOnly:!0})],Se.prototype,"inputManager",void 0),l([d()],Se.prototype,"map",void 0),l([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Se.prototype,"padding",null),l([d()],Se.prototype,"resizeAlign",void 0),l([d({readOnly:!0,dependsOn:["state.id"]})],Se.prototype,"resolution",null),l([d({value:0,type:Number,dependsOn:["state.id","ready"]})],Se.prototype,"rotation",null),l([d({value:0,type:Number,dependsOn:["state.id","ready"]})],Se.prototype,"scale",null),l([d({constructOnly:!0})],Se.prototype,"spatialReferenceLocked",void 0),l([d()],Se.prototype,"stationary",null),l([d({type:hV,readOnly:!0})],Se.prototype,"timeline",void 0),l([d({readOnly:!0})],Se.prototype,"type",void 0),l([d({readOnly:!0})],Se.prototype,"updating",null),l([d({value:null,type:ao,dependsOn:["state.id","ready"]})],Se.prototype,"viewpoint",null),l([d({value:-1,dependsOn:["state.id","ready"]})],Se.prototype,"zoom",null),l([d({type:Boolean})],Se.prototype,"navigating",null),l([d({type:AV})],Se.prototype,"ui",void 0),Se=l([S("esri.views.MapView")],Se);const O0e=Se;function lA(e){var i,r,n,s;const t=e.getObjectId();return t?`${(s=(n=(i=e.layer)==null?void 0:i.uid)!=null?n:(r=e.sourceLayer)==null?void 0:r.uid)!=null?s:"MapView"}/${t}`:`"MapView/${e.uid}`}function xP(e,t,i,r,n){return s=>{if(s instanceof zi){if(s.layer===e)n==null||n();else{const o=e.allLayerViews.find(a=>a.layer===s.layer);o&&(r==null||r(o))}i(lA(s))}else{const o=e.allLayerViews.find(a=>a.layer===s);o&&t(o)}}}function AP(e,t){if(e)if(z_(e))for(const i of e)if(z_(i))for(const r of i)t(r);else t(i);else t(e)}let kt=class extends Xb(j){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};l([d()],kt.prototype,"autoNavigate",void 0),l([d()],kt.prototype,"filter",void 0),l([d()],kt.prototype,"getResults",void 0),l([d()],kt.prototype,"getSuggestions",void 0),l([d()],kt.prototype,"maxResults",void 0),l([d()],kt.prototype,"maxSuggestions",void 0),l([d()],kt.prototype,"minSuggestCharacters",void 0),l([d()],kt.prototype,"outFields",void 0),l([d()],kt.prototype,"placeholder",void 0),l([d()],kt.prototype,"popupEnabled",void 0),l([d()],kt.prototype,"popupTemplate",void 0),l([d()],kt.prototype,"prefix",void 0),l([d()],kt.prototype,"resultGraphicEnabled",void 0),l([d()],kt.prototype,"resultSymbol",void 0),l([d()],kt.prototype,"suggestionsEnabled",void 0),l([d()],kt.prototype,"suffix",void 0),l([d()],kt.prototype,"withinViewEnabled",void 0),l([d()],kt.prototype,"zoomScale",void 0),kt=l([S("esri.widgets.Search.SearchSource")],kt);const fC=kt,$V=96;function lxe(e,t){const i=t||e.extent,r=e.width,n=pu(i&&i.spatialReference);return i&&r?i.width/r*n*ZO*$V:0}function k0e(e,t){return e/(pu(t)*ZO*$V)}function F0e(e,t){const i=e.extent,r=e.width,n=k0e(t,i.spatialReference);return i.clone().expand(n*r/i.width)}const MP=W.getLogger("esri.widgets.Search.support.geometryUtils");function B0e(e,t){var r,n;if(!t)return MP.error("missing-parameter: view is missing."),Promise.reject(new P("searchgeometryutils:missing-parameter","view is missing."));if(!e)return MP.error("missing-parameter: point is missing."),Promise.reject(new P("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||t.type==="2d")return Promise.resolve(e);const i=(r=t==null?void 0:t.map)==null?void 0:r.ground;return i&&i.layers.length?i.queryElevation(e,{cache:(n=t.basemapTerrain)==null?void 0:n.elevationQueryCache}).then(s=>s.geometry):Promise.resolve(e)}function CP(e){if(O(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function yC(e,t,i){return O(e)?null:e.type==="extent"?e:e.type==="multipoint"||e.type==="polygon"||e.type==="polyline"?e.extent:e.type==="point"?DV(e,t,i):void 0}function uA(e,t,i){return O(e)||O(t)?null:DV(e.center,t,i)}function DV(e,t,i){const r=e.hasZ?e.z:void 0;return t&&t.map?(i?F0e(t,i):t.extent).clone().centerAt(e).set({zmax:r,zmin:r}):new Ue({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:r,zmax:r})}const U0e=/https?:\/\/services.*\.arcgis\.com/i,V0e=/(?:\{([^}]+)\})/g,Bh=W.getLogger("esri.widgets.Search.support.layerSearchUtils");function j0e(e,t){const{exactMatch:i=!1,location:r,maxResults:n,spatialReference:s,source:o,sourceIndex:a,suggestResult:u,view:c}=e,{layer:h,filter:f,zoomScale:y}=o,m=c&&c.scale,g=LV(o,c),v=t&&t.signal;return kV(h).then(()=>{const b=h.popupTemplate;return b?b.getRequiredFields(h.fieldsIndex):null}).then(b=>{var ee,le,be;const{objectIdField:w,returnZ:T}=h,A=BV(o);if(!mC(h,A))throw Bh.error("invalid-field: displayField is invalid."),new P("getResults():invalid-field","displayField is invalid.");const R=b&&b.length?b:[A],M=o.outFields||R,C=OV(M);if(M.includes(w)||C||M.push(w),(ee=h.floorInfo)!=null&&ee.floorField&&M.push(h.floorInfo.floorField),!(C||vb(h,M)))throw Bh.error("invalid-field: outField is invalid."),new P("getResults():invalid-field","outField is invalid.");const k=h.createQuery(),{orderByFields:B}=o;if(B&&(k.orderByFields=B),s){k.outSpatialReference=s;const oe=1/pu(s);oe&&(k.maxAllowableOffset=oe)}const H=h.geometryType==="mesh"||h.geometryType==="multipatch",Q=((be=(le=h.capabilities)==null?void 0:le.data)==null?void 0:be.supportsZ)&&!H;if(k.returnZ=Q&&T!==!1,k.returnGeometry=!0,k.multipatchOption=H?"xyFootprint":null,M&&(k.outFields=M),r)k.geometry=r;else if(u.key)k.objectIds=[u.key];else{const oe=o.searchFields||[A];if(!vb(h,oe))throw Bh.error("invalid-field: search field is invalid."),new P("getResults():invalid-field","search field is invalid.");if(FV(h)&&(k.num=n),g&&(k.geometry=g),!u.text.trim())return[];const{prefix:Nt="",suffix:Or=""}=o,ft=VV({searchTerm:UV(`${Nt}${u.text}${Or}`),layer:h,searchFields:oe,filter:f,exactMatch:i,type:"search"});if(!ft)return[];k.where=ft}return h.queryFeatures(k,{signal:v}).then(oe=>ege(oe,c,o,a,A,m,y))})}function z0e(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a,exactMatch:u}=e,{layer:c,filter:h}=i,f=t&&t.signal,y=LV(i,n);return kV(c).then(()=>{if(!FV(c))return[];const m=BV(i),g=i.searchFields||[m],v=[];i.suggestionTemplate?i.suggestionTemplate.replace(V0e,(H,Q)=>(v.push(Q),H)):v.push(m);const b=OV(v);v.includes(c.objectIdField)||b||v.push(c.objectIdField);const w=mC(c,m),T=b||vb(c,v),A=vb(c,g);if(!w)throw Bh.error("invalid-field: displayField is invalid."),new P("getSuggestions():invalid-field","displayField is invalid.");if(!T)throw Bh.error("invalid-field: outField is invalid."),new P("getSuggestions():invalid-field","outField is invalid.");if(!A)throw Bh.error("invalid-field: search field is invalid."),new P("getSuggestions():invalid-field","search field is invalid.");const R=c.createQuery(),{orderByFields:M}=i;if(M&&(R.orderByFields=M),R.outSpatialReference=r,R.returnGeometry=!1,R.num=o,R.outFields=v,y&&(R.geometry=y),!s.trim())return[];const{prefix:C="",suffix:k=""}=i,B=VV({searchTerm:UV(`${C}${s}${k}`),layer:c,searchFields:g,filter:h,exactMatch:u,type:"suggest"});return B?(R.where=B,c.queryFeatures(R,{signal:f}).then(H=>X0e(H,i,a,m))):[]})}function LV(e,t){const{filter:i,withinViewEnabled:r}=e,n=t&&t.extent;return i&&i.geometry||(r&&n?n:void 0)}function OV(e){return e&&e.includes("*")}async function kV(e){e&&await e.load()}function FV(e){var t,i,r;return(r=(i=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:i.supportsPagination)!=null?r:!1}function H0e(e){var t,i,r,n;return(n=(r=(i=(t=e==null?void 0:e.fieldsIndex)==null?void 0:t.fields)==null?void 0:i.find(s=>s.type==="string"))==null?void 0:r.name)!=null?n:""}function BV(e){return e.displayField||e.layer.displayField||H0e(e.layer)}function vb(e,t){return!(!e||!t)&&t.every(i=>mC(e,i))}function mC(e,t){return!!e.getField(t)}function G0e(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function q0e(e,t,i){let r=null;const{codedValues:n}=e;return n&&n.some(s=>{const o=s.name,a=i?o:o.toLowerCase();return(i?t:t.toLowerCase())===a&&(r=s.code.toString(),!0)}),r}function UV(e){return e.replace(/\'/g,"''")}function Mg(e,t){const i=t&&t.where;return i?`(${e}) AND (${i})`:e}function W0e({currentTerm:e,field:t,filter:i,exactMatch:r,url:n,type:s}){const o=t.type,a=t.name;if(o==="string"||o==="date"||o==="global-id"){const u=U0e.test(n),c=u&&G0e(e)?"N":"";if(r&&s==="search")return Mg(`${a} = ${c}'${e}'`,i);const h=u?a:`UPPER(${a})`,f=u?e:e.toUpperCase();return Mg(`${h} LIKE ${c}${r?`'${f}%'`:`'%${f}%'`}`,i)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const u=Number(e);return isNaN(u)?null:Mg(`${a} = ${u}`,i)}return Mg(`${a} = ${e}`,i)}function Y0e(e,t){return e?` OR (${t})`:`(${t})`}function VV({searchTerm:e,layer:t,searchFields:i,filter:r,exactMatch:n,type:s}){const{definitionExpression:o,url:a}=t;let u="";return e&&i&&i.forEach(c=>{const h=t.getField(c),f=typeof t.getFieldDomain=="function"&&t.getFieldDomain(c),y=(f&&f.type==="coded-value"?q0e(f,e,n):null)||e||null;if(y!==null){const m=W0e({currentTerm:y,field:h,filter:r,exactMatch:n,url:a,type:s});m&&(u+=Y0e(u,m))}}),o?`(${o}) AND (${u})`:u}function K0e(e,t){let i=null;const{codedValues:r}=e;return r&&r.length&&r.some(n=>n.code===t&&(i=n.name,!0)),i}function Z0e(e,t){return e[Object.keys(e).find(i=>i.toLowerCase()===t.toLowerCase())]}function jV(e,t,i){const r=e.sourceLayer,{attributes:n}=e,s=typeof r.getFieldDomain=="function"&&r.getFieldDomain(i);if(t)return ds(t,n);if(i&&n){const o=r.getField(i),a=Z0e(n,i);return a==null?"":s&&s.type==="coded-value"?K0e(s,a):(o==null?void 0:o.type)==="date"?bo(new Date(a)):typeof a=="number"?a.toString():typeof a!="string"?"":a.trim()}return""}function J0e(e,t,i,r){const n=e.sourceLayer,{attributes:s}=e,{objectIdField:o}=n,a=s[o];return{text:jV(e,t.suggestionTemplate,r),key:a,sourceIndex:i}}function X0e(e,t,i,r){return e.features.map(n=>J0e(n,t,i,r))}function Q0e(e,t,i,r,n,s,o){const a=e.clone(),u=e.sourceLayer,c=u&&u.objectIdField,h=c&&e.attributes[c],f=jV(e,i.searchTemplate,n),y=yC(a.geometry,t,s),m=typeof o=="number"?uA($(y),t,o):y,g=e.clone();return E(m)&&(g.geometry=Rr.fromExtent(m)),{extent:m,target:g,feature:a,key:h,name:f,sourceIndex:r}}function ege(e,t,i,r,n,s,o){return e.features.map(a=>Q0e(a,t,i,r,n,s,o))}var cA;let cs=cA=class extends fC{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,i)=>j0e({source:this,...t},i),this.getSuggestions=(t,i)=>z0e({source:this,...t},i)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()||""}set name(e){e!==void 0?this._override("name",e):this._clearOverride("name")}clone(){return new cA({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?$(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?$(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return(t=(e=this.layer.fieldsIndex.fields.find(i=>i.type==="string"))==null?void 0:e.name)!=null?t:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(i=>{const r=e.getField(i);return r&&r.alias||i}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};l([d({json:{read:{source:"field.name"},write:{target:"field.name"}}})],cs.prototype,"displayField",void 0),l([d({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],cs.prototype,"exactMatch",void 0),l([d({value:null})],cs.prototype,"layer",null),l([d()],cs.prototype,"name",null),l([d({type:[String],json:{write:!0}})],cs.prototype,"orderByFields",void 0),l([d()],cs.prototype,"searchFields",void 0),l([d()],cs.prototype,"searchTemplate",void 0),l([d()],cs.prototype,"suggestionTemplate",void 0),cs=cA=l([S("esri.widgets.Search.LayerSearchSource")],cs);const ah=cs;function tge(e){return e&&typeof e.x=="number"&&typeof e.y=="number"}function ige(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let Tl=class extends j{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};l([d({type:String,json:{write:!0}})],Tl.prototype,"address",void 0),l([d({type:Object,json:{write:!0}})],Tl.prototype,"attributes",void 0),l([d({type:Ue,json:{write:!0}})],Tl.prototype,"extent",void 0),l([d({type:he,json:{write:!0}})],Tl.prototype,"location",void 0),l([d({type:Number,json:{write:!0}})],Tl.prototype,"score",void 0),Tl=l([S("esri.rest.support.AddressCandidate")],Tl);const zV=Tl,gC={type:String,json:{read:{source:"token"},write:{target:"token"}}};let gi=class extends j{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};l([d({type:Object,json:{write:!0}})],gi.prototype,"address",void 0),l([d(gC)],gi.prototype,"apiKey",void 0),l([d({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],gi.prototype,"categories",void 0),l([d({type:String,json:{write:!0}})],gi.prototype,"countryCode",void 0),l([d({type:Boolean,json:{write:!0}})],gi.prototype,"forStorage",void 0),l([d({type:he,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],gi.prototype,"location",void 0),l([d({type:String,json:{write:!0}})],gi.prototype,"locationType",void 0),l([d({type:String,json:{write:!0}})],gi.prototype,"magicKey",void 0),l([d({type:Number,json:{write:!0}})],gi.prototype,"maxLocations",void 0),l([d({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],gi.prototype,"outFields",void 0),l([d({type:we,json:{read:{source:"outSR"},write:{target:"outSR"}}})],gi.prototype,"outSpatialReference",void 0),l([d({type:Ue,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=i}}}})],gi.prototype,"searchExtent",void 0),gi=l([S("esri.rest.support.AddressToLocationsParameters")],gi),gi.from=it(gi);const HV=gi;async function rge(e,t,i){t=HV.from(t);const r=e0(e),{address:n,...s}=t.toJSON(),o={...n,...s,f:"json"},a=_w({...r.query,...o}),u=ww(a,i),c=`${r.path}/findAddressCandidates`;return ze(c,u).then(nge)}function nge({data:e}){if(!e)return[];const{candidates:t,spatialReference:i}=e;return t?t.map(r=>{if(!r)return;const{extent:n,location:s}=r,o=!n||ige(n);return tge(s)&&o?(n&&(n.spatialReference=i),s.spatialReference=i,zV.fromJSON(r)):void 0}):[]}let na=class extends j{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};l([d(gC)],na.prototype,"apiKey",void 0),l([d({type:he,json:{write:{writer:(e,t)=>{const i=e?e.clone().normalize():null,r=i!==void 0;t.location=r?i:null}}}})],na.prototype,"location",void 0),l([d({type:String,json:{write:!0}})],na.prototype,"locationType",void 0),l([d({type:we,json:{read:{source:"outSR"},write:{target:"outSR"}}})],na.prototype,"outSpatialReference",void 0),na=l([S("esri.rest.support.LocationToAddressParameters")],na),na.from=it(na);const GV=na;async function sge(e,t,i){t=GV.from(t);const r=e0(e),n={...t.toJSON(),f:"json"},s=_w({...r.query,...n}),o=ww(s,i),a=`${r.path}/reverseGeocode`;return ze(a,o).then(oge)}function oge({data:e}){if(!e)return;const{address:t,location:i}=e,r=t&&t.Match_addr||"";return zV.fromJSON({address:r,attributes:t||{},location:i,score:100})}let lh=class extends j{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};l([d({type:Boolean,json:{write:!0}})],lh.prototype,"isCollection",void 0),l([d({type:String,json:{write:!0}})],lh.prototype,"magicKey",void 0),l([d({type:String,json:{write:!0}})],lh.prototype,"text",void 0),lh=l([S("esri.rest.support.SuggestionCandidate")],lh);const age=lh;let Gr=class extends j{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};l([d(gC)],Gr.prototype,"apiKey",void 0),l([d({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],Gr.prototype,"categories",void 0),l([d({type:String,json:{write:!0}})],Gr.prototype,"countryCode",void 0),l([d({type:he,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],Gr.prototype,"location",void 0),l([d({type:Number,json:{write:!0}})],Gr.prototype,"maxSuggestions",void 0),l([d({type:we,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Gr.prototype,"outSpatialReference",void 0),l([d({type:Ue,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(i)}}}})],Gr.prototype,"searchExtent",void 0),l([d({type:String,json:{write:!0}})],Gr.prototype,"text",void 0),Gr=l([S("esri.rest.support.SuggestLocationsParameters")],Gr),Gr.from=it(Gr);const qV=Gr;async function lge(e,t,i){const r=e0(e),n={...(t=qV.from(t)).toJSON(),f:"json"},s=_w({...r.query,...n}),o=ww(s,i),a=`${r.path}/suggest`;return ze(a,o).then(uge)}function uge(e){const{data:t}=e;if(!t)return[];const{suggestions:i}=t;return i?i.map(r=>new age(r)):[]}const cge="Single Line Input",dge=3e5;function hge(e,t){return e.location?gge(e,t):vge(e,t)}function WV(e,t){if(t.localSearchDisabled)return null;const i=e==null?void 0:e.scale;return typeof i=="number"&&i<=dge?e.get("extent.center"):null}function pge(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a}=e,u=new qV,{apiKey:c,url:h}=i,f=YV(i,n),y=t&&t.signal;if(!h)return Promise.resolve(null);c&&(u.apiKey=c),i.categories&&(u.categories=i.categories),r&&(u.outSpatialReference=r);const m=WV(n,i);if(m&&(u.location=m),!s.trim())return Promise.resolve(null);const{prefix:g="",suffix:v=""}=i,b=`${g}${s}${v}`;return u.text=b,f&&(u.searchExtent=f),u.maxSuggestions=o,i.countryCode&&(u.countryCode=i.countryCode),lge(h,u,{signal:y}).then(w=>wge(w,a))}function fge(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function yge(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function IP(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const mge="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function gge(e,t){const{source:i,spatialReference:r,location:n,sourceIndex:s,view:o}=e,{apiKey:a,url:u,zoomScale:c,defaultZoomScale:h}=i,f=o&&o.scale,y=t&&t.signal,m=new GV;return m.location=n,a&&(m.apiKey=a),r&&(m.outSpatialReference=r),sge(u,m,{signal:y}).then(g=>KV([g],{sourceIndex:s,scale:f,view:o,zoomScale:c,defaultZoomScale:h})).catch(()=>[])}function YV(e,t){const{filter:i,withinViewEnabled:r}=e,n=t&&t.scale,s=t&&t.extent,o=i&&i.geometry;return yC(o,t,n)||(r&&s?s:void 0)}function vge(e,t){const{source:i,suggestResult:r,spatialReference:n,view:s,maxResults:o,sourceIndex:a}=e,u=i&&i.zoomScale,c=i&&i.defaultZoomScale;if(!r.text.trim())return Promise.resolve(null);const h=!r.key&&i.prefix?i.prefix:"",f=!r.key&&i.suffix?i.suffix:"",y=`${h}${r.text}${f}`,m=new HV,{apiKey:g,url:v}=i,b=s&&s.scale,w=YV(i,s),T=t&&t.signal;if(g&&(m.apiKey=g),!v)return Promise.resolve(null);i.categories&&(m.categories=i.categories),i.locationType&&(m.locationType=i.locationType),n&&(m.outSpatialReference=n);const A=WV(s,i);A&&(m.location=A),m.maxLocations=o,w&&(m.searchExtent=w),i.countryCode&&(m.countryCode=i.countryCode);const{key:R}=r,M=`${R}`;return R&&(m.magicKey=M),m.address={},m.address[i.singleLineFieldName||cge]=y,i.outFields&&(m.outFields=i.outFields),rge(v,m,{signal:T}).then(C=>KV(C,{key:M,scale:b,sourceIndex:a,view:s,zoomScale:u,defaultZoomScale:c}))}function bge(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function wge(e,t){return e.map(i=>bge(i,t))}function _ge(e,t){const{key:i,scale:r,sourceIndex:n,view:s,zoomScale:o,defaultZoomScale:a}=t,{attributes:u,extent:c,location:h,address:f}=e,y=new zi({geometry:h,attributes:u}),m=c||h,g=yC(m,s,r),v=typeof o=="number"?uA(g,s,o):typeof a=="number"&&m.type==="point"?uA(g,s,a):g,b=h?`${h.x},${h.y}`:"",w=f||b,T=y.clone();return E(v)&&(T.geometry=Rr.fromExtent(v)),{extent:v,feature:y,target:T,key:i,name:w,sourceIndex:n}}function KV(e,t){return e.filter(Boolean).map(i=>_ge(i,t))}var dA;const Sge="esri.widgets.Search.LocatorSearchSource";let Di=dA=class extends fC{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,i)=>hge({source:this,...t},i),this.getSuggestions=(t,i)=>pge({source:this,...t},i)}clone(){return new dA({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?$(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?$(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};l([d()],Di.prototype,"apiKey",void 0),l([d()],Di.prototype,"categories",void 0),l([d()],Di.prototype,"countryCode",void 0),l([d({json:{write:!0}})],Di.prototype,"defaultZoomScale",void 0),l([d()],Di.prototype,"localSearchDisabled",void 0),l([d()],Di.prototype,"locationType",void 0),l([d({json:{write:!0}})],Di.prototype,"name",void 0),l([d({json:{write:!0}})],Di.prototype,"placeholder",void 0),l([d()],Di.prototype,"searchTemplate",void 0),l([d({json:{write:!0}})],Di.prototype,"singleLineFieldName",void 0),l([d({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Di.prototype,"suggestionsEnabled",void 0),l([d({json:{write:!0}})],Di.prototype,"url",void 0),l([d({json:{write:!0}})],Di.prototype,"zoomScale",void 0),Di=dA=l([S(Sge)],Di);const ZV=Di;new xe({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new xe({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let Tu=class extends j{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};l([d({type:String,json:{write:!0}})],Tu.prototype,"deviationUnit",void 0),l([d({json:{read:{reader:e=>e?e.map(t=>cr(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],Tu.prototype,"geometries",void 0),l([d({type:Number,json:{write:!0}})],Tu.prototype,"maxDeviation",void 0),Tu=l([S("esri.rest.support.GeneralizeParameters")],Tu),Tu.from=it(Tu);new xe({preserveShape:"preserve-shape"});let Ya=class extends j{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};l([d({type:String,json:{write:!0}})],Ya.prototype,"calculationType",void 0),l([d({type:Boolean,json:{write:!0}})],Ya.prototype,"geodesic",void 0),l([d({json:{write:!0}})],Ya.prototype,"lengthUnit",void 0),l([d({type:[ir],json:{read:{reader:e=>e?e.map(t=>cr(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],Ya.prototype,"polylines",void 0),Ya=l([S("esri.rest.support.LengthsParameters")],Ya),Ya.from=it(Ya);new xe({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new xe({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let Oo=class extends j{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};l([d({type:Number,json:{write:!0}})],Oo.prototype,"bevelRatio",void 0),l([d({json:{read:{reader:e=>e?e.map(t=>cr(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],Oo.prototype,"geometries",void 0),l([d({type:Number,json:{write:!0}})],Oo.prototype,"offsetDistance",void 0),l([d({type:String,json:{write:!0}})],Oo.prototype,"offsetHow",void 0),l([d({type:String,json:{write:!0}})],Oo.prototype,"offsetUnit",void 0),Oo=l([S("esri.rest.support.OffsetParameters")],Oo),Oo.from=it(Oo);function Tge(e,t,i){const r=VL(t);return e.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}let ic=class extends j{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(r=>r.toJSON()),t=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:Ep(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};l([d()],ic.prototype,"geometries",void 0),l([d({json:{read:{source:"outSR"}}})],ic.prototype,"outSpatialReference",void 0),l([d()],ic.prototype,"transformation",void 0),l([d()],ic.prototype,"transformForward",void 0),ic=l([S("esri.rest.support.ProjectParameters")],ic);const JV=ic,Ege=it(JV);async function xge(e,t,i){t=Ege(t);const r=e0(e),n={...r.query,f:"json",...t.toJSON()},s=t.outSpatialReference,o=Ep(t.geometries[0]),a=ww(n,i);return ze(r.path+"/project",a).then(({data:{geometries:u}})=>Tge(u,o,s))}new xe({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Ka=class extends j{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};l([d({json:{read:{reader:e=>e?e.map(t=>cr(t)):null},write:{writer:(e,t)=>{t.geometries1=e.map(i=>i.toJSON())}}}})],Ka.prototype,"geometries1",void 0),l([d({json:{read:{reader:e=>e?e.map(t=>cr(t)):null},write:{writer:(e,t)=>{t.geometries2=e.map(i=>i.toJSON())}}}})],Ka.prototype,"geometries2",void 0),l([d({type:String,json:{write:!0}})],Ka.prototype,"relation",void 0),l([d({type:String,json:{write:!0}})],Ka.prototype,"relationParameter",void 0),Ka=l([S("esri.rest.support.RelationParameters")],Ka),Ka.from=it(Ka);new xe({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let Eu=class extends j{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};l([d({type:String,json:{write:!0}})],Eu.prototype,"extendHow",void 0),l([d({type:[ir],json:{read:{reader:e=>e?e.map(t=>cr(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],Eu.prototype,"polylines",void 0),l([d({json:{read:{reader:e=>e?cr(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],Eu.prototype,"trimExtendTo",void 0),Eu=l([S("esri.rest.support.TrimExtendParameters")],Eu),Eu.from=it(Eu);const XV=W.getLogger("esri.widgets.support.geolocationUtils"),Age={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Mge(){const e=F("esri-geolocation");return e||XV.warn("geolocation-unsupported","Geolocation unsupported."),e}function Cge(){const e=window.isSecureContext;return e||XV.warn("insecure-context","Geolocation requires a secure origin."),e}function NP(){return Mge()&&Cge()}function Ige(e){return e||(e=Age),new Promise((i,r)=>{setTimeout(()=>r(new P("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,e)})}function Nge(e,t){const{position:i,view:r}=e;return $ge(Pge(Rge(i)),r,t)}function Rge(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:i,timestamp:e.timestamp}}function Pge(e){const t=e&&e.coords;return t?new he({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function $ge(e,t,i){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(ga(e)):Dge(i).then(n=>{if(!n)throw new P("geometry-service:missing-url","Geometry service URL is missing");const s=new JV({geometries:[e],outSpatialReference:r});return xge(n,s,i).then(o=>o[0])})}function Dge(e){if(De.geometryServiceUrl)return Promise.resolve(De.geometryServiceUrl);const t=ri.getDefault();return t.load(e).catch(()=>{}).then(()=>t.get("helperServices.geometry.url"))}function Ii(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const Lge=()=>i3("esri/widgets/Search/t9n/Search"),QV="esri.widgets.Search.SearchViewModel",Yn=W.getLogger(QV),RP="highlight",K1=me.ofType({key:e=>e.layer?"layer":"locator",base:fC,typeMap:{layer:ah,locator:ZV}}),PP=we.WGS84,Oge="esri/images/search/search-symbol-32.png",kge=/<(?:.|\s)*?>/g,uh=-1;let Ce=class extends iC(Ma.EventedMixin(ce)){constructor(e){super(e),this._handles=new Mi,this._gotoController=null,this._searching=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new K1,this.defaultSymbols={point:new Wm({url:He(Oge),size:24,width:24,height:24}),polyline:new sn({color:[130,130,130,1],width:2}),polygon:new Ca({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=ri.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new K1,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const t=await Lge();this.messages=t,this.defaultPopupTemplate=new cu({title:t.searchResult,content:"{Match_addr}"})};e(),this._handles.add([Y(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),We),Y6(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:uh}set activeSourceIndex(e){e!==void 0?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:i}=this,r=typeof i=="function"?i.call(null,{sources:e,defaultSources:t}):i?t.concat(e):e,n=this._get("allSources")||new K1;return n.removeAll(),n.addMany(r.filter(Boolean)),n}get defaultSymbol(){return Y_(Yn,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(e){Y_(Yn,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",e)}get locationEnabled(){return this._get("locationEnabled")||NP()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const t=NP();if(e&&!t){const i=new P("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Yn.error(i)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:i}=this;if(t===uh)return i;const r=e.getItemAt(t);return r?r.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const i=this._createSuggestionForSearch(e),r=this.when().then(()=>this._getResultsFromSources(i,t).then(n=>{var u;if((u=t==null?void 0:t.signal)!=null&&u.aborted)return null;const s={activeSourceIndex:this.activeSourceIndex,searchTerm:i.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(s,n,i);const o=this._getFirstResult(s.results),a=(i.location&&o?o.name:i.text).replace(kge,"");return this._set("searchTerm",a),(i.key&&typeof i.sourceIndex=="number"||i.location)&&this._set("selectedSuggestion",i),this._set("results",s.results),this._set("resultCount",s.results.reduce((c,h)=>c+h.results.length,0)),this.emit("search-complete",s),this._selectFirstResult(o).then(()=>s)})).then(n=>(this._clearSearching(),n),n=>{throw this._clearSearching(),n});return this._searching=r,r}searchNearby(e){if(!this.locationEnabled){const i=new P("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Yn.error(i),Promise.reject(i)}const t=Ige().then(i=>Nge({position:i,view:this.view},e)).then(i=>this.search(i,e));return this._searching=t,t.catch(()=>{}).then(()=>this._clearSearching()),t}select(e){if(this.clearGraphics(),!e){const w=new P("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return Yn.error(w),Promise.reject(w)}const{view:t}=this,i=Ii(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),r=this.allSources.getItemAt(i);if(!r){const w=new P("select:missing-source","Cannot select without a source.",{source:r});return Yn.error(w),Promise.reject(w)}const n=r instanceof ah?this._getLayerSourcePopupTemplate(r):r.popupTemplate,s=r.resultSymbol||this._getDefaultSymbol(e),o=Ii(r,"resultGraphicEnabled")?r.resultGraphicEnabled:this.resultGraphicEnabled,a=Ii(r,"autoNavigate")?r.autoNavigate:this.autoNavigate,u=Ii(r,"popupEnabled")?r.popupEnabled:this.popupEnabled,c=u?n||this.popupTemplate||this.defaultPopupTemplate:null,{feature:h}=e;if(!h){const w=new P("select:missing-feature","Cannot select without a feature.",{feature:h});return Yn.error(w),Promise.reject(w)}const{attributes:f,geometry:y,layer:m,sourceLayer:g}=h,v=CP(y),b={layerViewQuery:this._getLayerView(h),elevationQuery:t&&E(v)?B0e(v,t).catch(()=>v):Promise.resolve(v)};return di(b).then(w=>{const T=w.layerViewQuery.value,A=w.elevationQuery.value;s instanceof ud&&(s.text=e.name);const R=t&&a?e.target||e.extent:null;return(E(R)?this._goToSearchResult(R):Promise.resolve()).then(()=>{var B;const M=T?h:new zi({geometry:y,symbol:s,attributes:f,layer:m,sourceLayer:g,popupTemplate:c}),C=u&&((B=this.view)==null?void 0:B.popup),k=C&&M.getEffectivePopupTemplate(C.defaultPopupTemplateEnabled);return k&&t.popup.open({features:[M],location:A}),T&&qx(T)&&!k&&this._highlightFeature({graphic:M,layerView:T}),!T&&o&&t&&t.graphics.push(M),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",M),this.emit("select-result",{result:e,source:r,sourceIndex:i}),e})})}suggest(e,t,i){const r=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:r}),this._suggestTimer(t,i).then(()=>this._suggestImmediate(r,i).then(n=>(this._set("suggestions",n.results),this._set("suggestionCount",n.results.reduce((s,o)=>s+o.results.length,0)),this.emit("suggest-complete",n),n)))}async when(){await nm(()=>!this.updating)}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const i=this._updatingPromise=di([e==null?void 0:e.load(),t==null?void 0:t.when()]);if(this.destroyed||(await i,i!==this._updatingPromise))return}await nm(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var t,i;const e=(i=(t=this.portal)==null?void 0:t.helperServices)==null?void 0:i.geocode;return e?e.map(r=>{if(r.placefinding===!1)return;const n=De.apiKey&&IP(r.url)?{url:mge}:null,s=ZV.fromJSON({...r,...n}),o=s.url;if(IP(o)||yge(o)||fge(o)){const a=s.outFields||["Addr_type","Match_addr","StAddr","City"],u=s.placeholder||this.messages.placeholder,c=typeof s.defaultZoomScale=="number"?s.defaultZoomScale:2500;s.set({singleLineFieldName:"SingleLine",outFields:a,placeholder:u,defaultZoomScale:c})}return s.singleLineFieldName?s:void 0}).filter(Boolean):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,t){var r;const i=(r=this.view)==null?void 0:r.map;return e.map(n=>{const s=i.findLayerById(n.id);if(!s)return;const o=this._getLayerJSON(n),a=ah.fromJSON(o);return a.placeholder=t,this._getLayer(s,o).then(u=>{a.layer=u}),a}).filter(Boolean).toArray()}_getTableSources(e,t){var r;const i=(r=this.view)==null?void 0:r.map;return e.map(n=>{const s=i.findTableById(n.id);if(!s)return;const o=this._getLayerJSON(n),a=ah.fromJSON(o);return a.placeholder=t,this._getLayer(s,o).then(u=>{a.layer=u}),a}).filter(Boolean).toArray()}_convertApplicationProperties(){var o,a,u;const e=(o=this.view)==null?void 0:o.map,t=(u=(a=e==null?void 0:e.applicationProperties)==null?void 0:a.viewing)==null?void 0:u.search;if(!t)return[];const{enabled:i,hintText:r,layers:n,tables:s}=t;return i?[...this._getLayerSources(n,r),...this._getTableSources(s,r)]:[]}async _getSubLayer(e,t){if(await e.load(),!e.allSublayers)throw new Error;const i=e.allSublayers.find(n=>n.id===t.subLayer);if(!i)throw new Error;const r=await i.createFeatureLayer();return this._createdFeatureLayers.push(r),r}async _getBuildingSubLayer(e,t){await e.load();const i=e.allSublayers.find(r=>r.id===t.subLayer);if((i==null?void 0:i.type)!=="building-component")throw new Error;if(await i.load(),i.associatedLayer==null)throw new Error;return await i.associatedLayer.load(),i}_getLayer(e,t){return e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature"?Promise.resolve(e):e.type==="map-image"?this._getSubLayer(e,t).catch(()=>{const i=new P("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Yn.error(i),null}):e.type==="building-scene"?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;this._destroyFeatureLayers(),e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var r;const e=(r=this.view)==null?void 0:r.popup,{resultGraphic:t}=this;if(!e||!t)return;const{selectedFeature:i}=e;i&&i===t&&e.close()}_suggestTimer(e,t){const i=e!=null?e:this.suggestionDelay;return Fb(i,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof zi?CP(e.geometry):e instanceof he?e:Array.isArray(e)&&e.length===2?new he({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Ii(e,"key")&&Ii(e,"text")&&Ii(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),i=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:r,selectedResult:n}=this,s=!e&&r&&n,o=s&&r.key===n.key&&r.sourceIndex===n.sourceIndex,a=s&&r.location;return o||a?r:{location:t,text:t?"":i,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some(i=>{const{results:r}=i,n=r[0],s=!!n;return s&&(t=n),s}),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then(()=>this._getSuggestionsFromSources(e,t)).then(i=>{var n;if((n=t==null?void 0:t.signal)!=null&&n.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,i),r})}_formatSourceResponse(e,t,i){const r=t&&t.value||[],n=t&&t.error,s=this.allSources.getItemAt(i);if(n){const o={sourceIndex:i,source:s,error:n};e.errors.push(o),Yn.error(n),e.numErrors++}else{const o={sourceIndex:i,source:s,results:r};e.results.push(o),e.numResults+=r.length}}_formatResponse(e,t,i){if(t)if(e.activeSourceIndex===uh){const r=i&&Ii(i,"sourceIndex")&&i.sourceIndex!==-1?i.sourceIndex:void 0;t.forEach((n,s)=>{const o=r!==void 0?r:s;this._formatSourceResponse(e,n,o)})}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:i}=this,r=!e.location&&Ii(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,n=[];if(!i.length){const s=new P("search:no-sources-defined","At least one source is required.",{allSources:i});return Yn.error(s),Promise.reject(s)}return r===uh?i.forEach((s,o)=>{n.push(this._getResultsFromSource(e,o,t))}):n.push(this._getResultsFromSource(e,r,t)),di(n)}_getSuggestionsFromSources(e,t){const{allSources:i,activeSourceIndex:r}=this,n=[];if(!i.length){const s=new P("suggest:no-sources-defined","At least one source is required.",{allSources:i});return Yn.error(s),Promise.reject(s)}return r===uh?i.forEach((s,o)=>{n.push(this._getSuggestionsFromSource(e,o,t))}):n.push(this._getSuggestionsFromSource(e,r,t)),di(n)}_getResultsFromSource(e,t,i){var c;const r=this.allSources.getItemAt(t),{location:n=null}=e,s=((c=this.view)==null?void 0:c.spatialReference)||PP,o=Ii(r,"maxResults")?r.maxResults:this.maxResults,a=!!(r instanceof ah&&Ii(r,"exactMatch"))&&r.exactMatch,{view:u}=this;return r.getResults({view:u,sourceIndex:t,location:n,suggestResult:e,spatialReference:s,exactMatch:a,maxResults:o},i)}_getSuggestionsFromSource(e,t,i){var a;const r=this.allSources.getItemAt(t),n=Ii(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,s=e.length,o=Ii(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(n&&e.trim()&&s>=o){const u=((a=this.view)==null?void 0:a.spatialReference)||PP,c=Ii(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:h}=this,f=!!(r instanceof ah&&Ii(r,"exactMatch"))&&r.exactMatch;return r.getSuggestions({view:h,sourceIndex:t,suggestTerm:e,spatialReference:u,maxSuggestions:c,exactMatch:f},i)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return Ii(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let i=null;return t.some(r=>r.results.some(n=>n===e&&(i=r.sourceIndex,!0))),i}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{animate:t,signal:i.signal}};await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var n;const{defaultSymbols:t}=this,i=(n=e.feature)==null?void 0:n.geometry;if(O(i))return null;const r=this._get("defaultSymbol");if(r&&(i.type==="point"||i.type==="multipoint"))return r;switch(i.type){case"point":case"multipoint":return t.point;case"polyline":return t.polyline;case"extent":case"polygon":return t.polygon;default:return null}}_removeHighlight(){this._handles.remove(RP)}async _getLayerView(e){const{view:t}=this;if(!e||!t||e.layer.type==="building-component"||e.layer.type==="subtype-sublayer")return null;const{layer:i}=e;return await t.when(),t.whenLayerView(i)}_highlightFeature(e){const{graphic:t,layerView:i}=e,{attributes:r,layer:n}=t,{objectIdField:s}=n,o=r&&r[s],a=i.highlight(o||t);this._handles.add(a,RP)}_setResultFloor(e){var n,s,o;const{view:t}=this,i=(n=e.feature)==null?void 0:n.attributes,r=(s=e.feature)==null?void 0:s.sourceLayer;if(r&&"floorInfo"in r&&((o=r==null?void 0:r.floorInfo)==null?void 0:o.floorField)&&i){const a=i[r.floorInfo.floorField];t.emit("select-result-floor",a)}}};Ce.ALL_INDEX=uh,l([d()],Ce.prototype,"_searching",void 0),l([d()],Ce.prototype,"_updatingPromise",void 0),l([d({readOnly:!0,value:null})],Ce.prototype,"activeSource",null),l([d()],Ce.prototype,"activeSourceIndex",null),l([d()],Ce.prototype,"allPlaceholder",null),l([d({readOnly:!0})],Ce.prototype,"allSources",null),l([d()],Ce.prototype,"autoNavigate",void 0),l([d()],Ce.prototype,"autoSelect",void 0),l([d()],Ce.prototype,"defaultPopupTemplate",void 0),l([d({readOnly:!0})],Ce.prototype,"defaultSources",void 0),l([d()],Ce.prototype,"defaultSymbol",null),l([d()],Ce.prototype,"defaultSymbols",void 0),l([d()],Ce.prototype,"includeDefaultSources",void 0),l([d()],Ce.prototype,"locationEnabled",null),l([d()],Ce.prototype,"maxInputLength",void 0),l([d()],Ce.prototype,"maxResults",void 0),l([d()],Ce.prototype,"maxSuggestions",void 0),l([d()],Ce.prototype,"messages",void 0),l([d()],Ce.prototype,"minSuggestCharacters",void 0),l([d({readOnly:!0})],Ce.prototype,"placeholder",null),l([d()],Ce.prototype,"popupEnabled",void 0),l([d({type:cu})],Ce.prototype,"popupTemplate",void 0),l([d({type:ri})],Ce.prototype,"portal",void 0),l([d()],Ce.prototype,"resultCount",void 0),l([d()],Ce.prototype,"resultGraphicEnabled",void 0),l([d({readOnly:!0})],Ce.prototype,"resultGraphic",void 0),l([d({readOnly:!0})],Ce.prototype,"results",void 0),l([d({readOnly:!0})],Ce.prototype,"selectedSuggestion",void 0),l([d()],Ce.prototype,"searchAllEnabled",void 0),l([d({readOnly:!0})],Ce.prototype,"selectedResult",void 0),l([d()],Ce.prototype,"searchTerm",null),l([d({type:K1})],Ce.prototype,"sources",void 0),l([d({readOnly:!0})],Ce.prototype,"state",null),l([d()],Ce.prototype,"suggestionDelay",void 0),l([d()],Ce.prototype,"suggestionCount",void 0),l([d({readOnly:!0})],Ce.prototype,"suggestions",void 0),l([d()],Ce.prototype,"suggestionsEnabled",void 0),l([d({readOnly:!0})],Ce.prototype,"updating",null),l([d()],Ce.prototype,"view",void 0),l([d()],Ce.prototype,"clear",null),Ce=l([S(QV)],Ce);const wh=Ce,ko={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};let El=class extends Ci{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[ko.showMoreResults]:this.showMoreResultsOpen};return N("div",{class:ko.base},N("div",{key:"esri-search-renderer__container",class:this.classes(ko.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return N("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var i;const e=(i=this.viewModel)==null?void 0:i.selectedResult,t=e&&e.name||"";return N("div",{key:"esri-search-renderer__result-name",class:ko.moreResultsItem},t)}renderMoreResultsLists(){var r;const e=(r=this.viewModel)==null?void 0:r.results,{resultCount:t}=this.viewModel;if(t<2)return null;const i=e.map(n=>this.renderMoreResultsList(n));return N("div",{key:"esri-search-renderer__more-results-container",class:ko.moreResultsList},i)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:N("div",{key:"esri-search-renderer__more-results-button",class:ko.moreResultsItem},N("a",{class:ko.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return N("div",{key:`esri-search-result-renderer__header-${t}`,class:ko.moreResultsListHeader},e)}renderMoreResultsList(e){var h,f;const{results:t}=e,i=t.length,r=!!i,n=(h=this.viewModel)==null?void 0:h.selectedResult,s=i===1&&t[0]===n,o=this._getSourceName(e.source,e.sourceIndex),a=((f=this.viewModel)==null?void 0:f.results.length)>1&&!s?this.renderMoreResultsHeader(o,e.sourceIndex):null,u=r&&t.map((y,m)=>this.renderMoreResultsListItem(y,m)),c=r&&!s?N("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},u):null;return r?N("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},a,c):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?N("li",{key:`esri-search-result-renderer__list-item-${t}`},N("a",{class:ko.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===wh.ALL_INDEX?this.messages.all:e.name}};l([d(),Si("esri/widgets/Search/t9n/Search")],El.prototype,"messages",void 0),l([d()],El.prototype,"showMoreResultsOpen",void 0),l([d()],El.prototype,"viewModel",void 0),l([Tr()],El.prototype,"_showMoreResultsClick",null),l([Tr()],El.prototype,"_selectResultClick",null),El=l([S("esri.widgets.Search.SearchResultRenderer")],El);const Fge=El,pe={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},Bge=/<[a-z/][\s\S]*>/i;let Re=class extends Ci{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new Mi,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new Fge,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=pe.widgetIcon,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new wh,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=i=>{var n;const r=i.relatedTarget;r&&((n=this._container)==null?void 0:n.contains(r))||this._clearActiveMenu()},this.own([Y(()=>this.searchTerm,i=>{(i&&this.activeMenu==="warning"||!i&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),iu(()=>{var i;return(i=this.viewModel)==null?void 0:i.allSources},"change",()=>this._watchSourceChanges()),Y(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),We),Y(()=>{var i;return(i=this.viewModel)==null?void 0:i.defaultPopupTemplate},i=>{i&&(i.content=this._renderSearchResultsContent.bind(this))},We)])}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:i}=t;return this._searchController=t,this.viewModel.search(e,{signal:i}).catch(r=>{if(this._searchController===t)return this._clearActiveMenu(),this._searchController=null,r}).then(r=>{if(this._searchController===t)return this.activeMenu=r.numResults?"none":"warning",this._searchController=null,r})}suggest(e){this._cancelSuggest();const t=new AbortController,{signal:i}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:i}).then(r=>{if(this._suggestController===t)return this._suggestController=null,r.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),r}).catch(()=>{if(this._suggestController===t)return this._suggestController=null,null})}render(){const{state:e}=this.viewModel,t={[pe.disabled]:e==="disabled",[pe.esriWidgetDisabled]:this.disabled};return N("div",{class:this.classes(pe.base,t)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e,disabled:t}=this;return N("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:t,class:this.classes(pe.submitButton,pe.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},N("span",{"aria-hidden":"true",class:pe.searchIcon}))}renderWarningMenu(){return N("div",{key:"esri-search__error-menu",class:this.classes(pe.menu,pe.warningMenu)},N("div",{class:pe.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:i,sourceMenuButtonId:r,disabled:n}=this,{activeSourceIndex:s,allSources:o}=this.viewModel;return o.length>1?N("button",{id:r,key:"esri-search__source-menu-button",bind:this,disabled:n,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(t==="source").toString(),"aria-controls":i,class:this.classes(pe.sourcesButton,pe.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:Mc,"data-node-ref":"_sourceMenuButtonNode",type:"button"},N("span",{"aria-hidden":"true",class:pe.dropdownIcon}),N("span",{"aria-hidden":"true",class:pe.dropupIcon}),N("span",{class:pe.sourceName},this._getSourceName(s))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:i,activeMenu:r,sourceMenuId:n,sourceMenuButtonId:s}=this,o=r==="source"&&i>-1?this._buildId("source-item",i):null;return e.length>1?N("ul",{"aria-activedescendant":o,"aria-labelledby":s,id:n,role:"menu",bind:this,afterCreate:Mc,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:pe.menuList,tabIndex:-1},t?this.renderSource(wh.ALL_INDEX):null,e.map((a,u)=>this.renderSource(u)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?N("div",{key:"esri-search__source-menu",class:this.classes(pe.menu,pe.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t,disabled:i}=this;return N("div",{class:pe.loader,key:"base-loader",tabIndex:i?-1:null},N("span",{"aria-hidden":"true",class:pe.loaderAnimation}),N("span",{class:pe.fallbackText},e.searchButtonTitle),N("span",{class:pe.loaderText},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:i}=this,r={[pe.hasMultipleSources]:e.length>1,[pe.isLoading]:t==="loading",[pe.isSearching]:t==="searching",[pe.showWarning]:i==="warning",[pe.showSources]:i==="source",[pe.showSuggestions]:i==="suggestion"};return N("div",{tabIndex:-1,afterCreate:n=>{this._container=n,n.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:n=>{n.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(r,pe.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?N("button",{bind:this,disabled:this.disabled,class:this.classes(pe.clearButton,pe.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},N("span",{"aria-hidden":"true",class:pe.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:i}=this,r=t&&!i,n=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return r?N("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(pe.menuList,pe.suggestionList,pe.suggestionListCurrentLocation)},N("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(pe.menuItem,n?pe.menuItemFocus:null)},N("span",{"aria-hidden":"true",class:pe.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:i,messages:r,suggestionsMenuId:n,inputId:s,_activeMenuItemIndex:o,disabled:a}=this,{maxInputLength:u,placeholder:c,searchTerm:h,suggestionCount:f}=this.viewModel,y=!(!(t&&!i)&&!f),m=e==="suggestion"&&o>-1?this._buildId("suggestion-item",o):null;return N("input",{"aria-activedescendant":m,"aria-autocomplete":"list","aria-expanded":(y&&e==="suggestion").toString(),"aria-controls":y?n:null,"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,bind:this,disabled:a,placeholder:c,maxlength:u,autocomplete:"off",type:"text",class:this.classes(pe.esriInput,pe.input),value:h,id:s,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:Mc,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:h?"":c})}renderForm(){return N("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:pe.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,i=e.results.length,r=e.results;return i?N("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(pe.menuList,pe.suggestionList)},r.map(n=>this.renderSuggestion(n,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(t=>[this.renderSuggestionHeader(t),this.renderSuggestList(t)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:i,inputId:r}=this,{suggestionCount:n}=this.viewModel,s=t&&!e||n;return this._menuItemCount=0,s?N("div",{id:i,key:"esri-search__suggestions-menu",class:this.classes(pe.menu,pe.suggestionsMenu),role:"listbox","aria-labelledby":r,bind:this,afterCreate:Mc,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return N("div",{key:"esri-search__input-container",class:pe.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:i}=this.viewModel,{sourceIndex:r}=e,n=e.results.length,s=t.length>1&&i===wh.ALL_INDEX;return n&&s?N("div",{key:`esri-search__suggestion-header-${r}`,class:pe.menuHeader},this._getSourceName(r)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:i,messages:r}=this,{searchTerm:n}=this.viewModel;if(n){const{text:s}=e,o=s||r.untitledResult,a=Bge.test(o),u=[];if(a)u.push(N("div",{innerHTML:o}));else{const h=this._splitResult(o,n),f=n.toLowerCase();h.forEach((y,m)=>{y&&y.length&&(y.toLowerCase()===f?u.push(N("strong",{key:m},y)):u.push(y))})}const c=this.activeMenu==="suggestion"&&i===t;return N("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(pe.menuItem,c?pe.menuItemFocus:null)},u)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:i}=this.viewModel,r={[pe.menuItemActive]:e===t,[pe.menuItemFocus]:this.activeMenu==="source"&&e===(i?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},n=i?e+1:e;return N("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",n),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(pe.source,pe.menuItem,r)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,i=e?ds(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return N("div",{key:"esri-search__no_results"},N("div",{class:pe.warningMenuHeader},t.noResults),N("div",{class:pe.warningMenuText},i))}renderEmptySearchWarning(){const{messages:e}=this;return N("div",{key:"esri-search__empty-search"},N("span",{"aria-hidden":"true",class:pe.noticeIcon}),N("span",{class:pe.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return N("div",{key:"esri-search__locate-error"},N("span",{"aria-hidden":"true",class:pe.noticeIcon}),N("span",{class:pe.noValueText},e.locateError))}renderWarning(){var r;const{displayedSearchTerm:e,_locateFailed:t}=this,{viewModel:i}=this;return t?this.renderLocateWarning():((r=i.selectedSuggestion)==null?void 0:r.location)||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${t===void 0?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,i="sources";e.remove(i),t.forEach(r=>e.add(Y(()=>r.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var t;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((t=this._sourceListNode)==null||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).then(i=>{this.activeMenu=i.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var i;if(!e)return;const t=e["data-source-index"];this.viewModel.activeSourceIndex=t,this._clearActiveMenu(),(i=this._sourceMenuButtonNode)==null||i.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var n;const t=ro(e);if(e.ctrlKey||e.metaKey||t==="Copy"||t==="ArrowLeft"||t==="ArrowRight"||t==="Shift")return;if(t==="Tab"||t==="Escape"||e.shiftKey&&t==="Tab")return this._cancelSuggest(),void(t==="Escape"&&this._clearActiveMenu());const i=t==="Home"||t==="End"||t==="ArrowUp"||t==="ArrowDown";if(t==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const r=(n=this._suggestionListNode)==null?void 0:n.getElementsByTagName("li");if(r!=null&&r.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),i)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(t,r,this._suggestionListNode);const s=r[this._activeMenuItemIndex];if(t==="Enter"&&s){const o=s["data-suggestion"];return void(o?(this._focus(),this.search(o)):s["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,t,i){const r=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=t.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&Ste(t[this._activeMenuItemIndex],i)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=ro(e);if(V8(t)){e.preventDefault();const i=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(i)}else t!=="ArrowUp"&&t!=="ArrowDown"&&t!=="End"&&t!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var n,s;const t=ro(e),i=t==="ArrowUp"||t==="ArrowDown"||t==="End"||t==="Home";if(i&&e.preventDefault(),t==="Escape")return this._clearActiveMenu(),void((n=this._sourceMenuButtonNode)==null?void 0:n.focus());const r=(s=this._sourceListNode)==null?void 0:s.getElementsByTagName("li");return r&&r.length!==0&&i?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(t,r,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:t}=this,i=this.viewModel,{allSources:r}=i,n=r.getItemAt(e);return e===wh.ALL_INDEX?t.all:n&&n.name||t.untitledSource}_splitResult(e,t){const i=IA(t);return e.replace(new RegExp(`(^|)(${i})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};l([d()],Re.prototype,"_activeMenuItemIndex",void 0),l([d()],Re.prototype,"displayedSearchTerm",null),l([d({readOnly:!0})],Re.prototype,"inputId",null),l([d({readOnly:!0})],Re.prototype,"suggestionsMenuId",null),l([d({readOnly:!0})],Re.prototype,"sourceMenuId",null),l([d({readOnly:!0})],Re.prototype,"sourceMenuButtonId",null),l([d()],Re.prototype,"activeMenu",void 0),l([X("viewModel.activeSource")],Re.prototype,"activeSource",void 0),l([X("viewModel.activeSourceIndex")],Re.prototype,"activeSourceIndex",void 0),l([X("viewModel.allPlaceholder")],Re.prototype,"allPlaceholder",void 0),l([X("viewModel.allSources")],Re.prototype,"allSources",void 0),l([X("viewModel.autoNavigate")],Re.prototype,"autoNavigate",void 0),l([X("viewModel.autoSelect")],Re.prototype,"autoSelect",void 0),l([X("viewModel.defaultSources")],Re.prototype,"defaultSources",void 0),l([d()],Re.prototype,"disabled",void 0),l([X("viewModel.goToOverride")],Re.prototype,"goToOverride",void 0),l([d()],Re.prototype,"iconClass",void 0),l([X("viewModel.includeDefaultSources")],Re.prototype,"includeDefaultSources",void 0),l([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Re.prototype,"label",void 0),l([X("viewModel.locationEnabled")],Re.prototype,"locationEnabled",void 0),l([X("viewModel.maxResults")],Re.prototype,"maxResults",void 0),l([X("viewModel.maxSuggestions")],Re.prototype,"maxSuggestions",void 0),l([d(),Si("esri/widgets/Search/t9n/Search")],Re.prototype,"messages",void 0),l([d(),Si("esri/t9n/common")],Re.prototype,"messagesCommon",void 0),l([X("viewModel.minSuggestCharacters")],Re.prototype,"minSuggestCharacters",void 0),l([X("viewModel.popupEnabled")],Re.prototype,"popupEnabled",void 0),l([X("viewModel.popupTemplate")],Re.prototype,"popupTemplate",void 0),l([X("viewModel.portal")],Re.prototype,"portal",void 0),l([X("viewModel.resultGraphic")],Re.prototype,"resultGraphic",void 0),l([X("viewModel.resultGraphicEnabled")],Re.prototype,"resultGraphicEnabled",void 0),l([X("viewModel.results")],Re.prototype,"results",void 0),l([X("viewModel.searchAllEnabled")],Re.prototype,"searchAllEnabled",void 0),l([X("viewModel.searchTerm")],Re.prototype,"searchTerm",void 0),l([X("viewModel.selectedResult")],Re.prototype,"selectedResult",void 0),l([X("viewModel.sources")],Re.prototype,"sources",void 0),l([X("viewModel.suggestions")],Re.prototype,"suggestions",void 0),l([X("viewModel.suggestionsEnabled")],Re.prototype,"suggestionsEnabled",void 0),l([X("viewModel.view")],Re.prototype,"view",void 0),l([I7(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d({type:wh})],Re.prototype,"viewModel",void 0),l([X("viewModel.clear")],Re.prototype,"clear",null),Re=l([S("esri.widgets.Search")],Re);const Uge=Re,Vge={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};function uxe(e){return{renderer:{type:"simple",symbol:e==="esriGeometryPoint"||e==="esriGeometryMultipoint"?kB:e==="esriGeometryPolyline"?FB:BB}}}const jge=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let zge=1;function cxe(e,t){if(F("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let i=`this.${t} = null;`;for(const n in e)i+=`this${jge.test(n)?`.${n}`:`["${n}"]`} = ${JSON.stringify(e[n])};`;const r=new Function(`
      return class AttributesClass$${zge++} {
        constructor() {
          ${i};
        }
      }
    `)();return()=>new r}catch{return()=>({[t]:null,...e})}}function dxe(e={}){return[{name:"New Feature",description:"",prototype:{attributes:$(e)}}]}function Hge(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:Vge,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}const $P=W.getLogger("esri.layers.graphics.sources.GeoJSONSource");let rc=class extends go{constructor(){super(...arguments),this.type="geojson",this.refresh=DA(async e=>{await this.load();const{extent:t,timeExtent:i}=await this._connection.invoke("refresh",e);return this.sourceJSON.extent=t,i&&(this.sourceJSON.timeInfo.timeExtent=[i.start,i.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(e){const t=E(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t)).then(i=>t0.fromJSON(i))}queryFeaturesJSON(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t))}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:Ue.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}_applyEdits(e){if(!this._connection)throw new P("geojson-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField,i=[],r=[],n=[];if(e.addFeatures)for(const s of e.addFeatures)i.push(this._serializeFeature(s));if(e.deleteFeatures)for(const s of e.deleteFeatures)"objectId"in s&&s.objectId!=null?r.push(s.objectId):"attributes"in s&&s.attributes[t]!=null&&r.push(s.attributes[t]);if(e.updateFeatures)for(const s of e.updateFeatures)n.push(this._serializeFeature(s));return this._connection.invoke("applyEdits",{adds:i,updates:n,deletes:r}).then(({extent:s,timeExtent:o,featureEditResults:a})=>(this.sourceJSON.extent=s,o&&(this.sourceJSON.timeInfo.timeExtent=[o.start,o.end]),this._createEditsResult(a)))}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new P("geojson-layer-source:edit-failure",t.description,{code:t.code}):null}}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e);return i?{geometry:i.toJSON(),attributes:t}:{attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return O(t)?null:t.type==="mesh"||t.type==="extent"?Rr.fromExtent(t.extent):t}async _startWorker(e){this._connection=await WO("GeoJSONSourceWorker",{strategy:F("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,hasZ:r,geometryType:n,objectIdField:s,url:o,timeInfo:a,customParameters:u}=this.layer,c=this.layer.originOf("spatialReference")==="defaults",h={url:o,customParameters:u,fields:t&&t.map(y=>y.toJSON()),geometryType:h3.toJSON(n),hasZ:r,objectIdField:s,timeInfo:a?a.toJSON():null,spatialReference:c?null:i&&i.toJSON()},f=await this._connection.invoke("load",h,{signal:e});for(const y of f.warnings)$P.warn(y.message,{layer:this.layer,warning:y});f.featureErrors.length&&$P.warn(`Encountered ${f.featureErrors.length} validation errors while loading features`,f.featureErrors),this.sourceJSON=f.layerDefinition,this.capabilities=Hge(this.sourceJSON.hasZ,!0)}};l([d()],rc.prototype,"capabilities",void 0),l([d()],rc.prototype,"type",void 0),l([d({constructOnly:!0})],rc.prototype,"layer",void 0),l([d()],rc.prototype,"sourceJSON",void 0),rc=l([S("esri.layers.graphics.sources.GeoJSONSource")],rc);const Gge=HB();let Oe=class extends AB(zM(vB(jM(PB(GM(NB(HM(Rw(Jh))))))))){constructor(e){super(e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new rc({layer:this}),this.spatialReference=we.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson",this.typeIdField=null,this.types=null}destroy(){var e;(e=this.source)==null||e.destroy()}load(e){return this.addResolvingPromise(this.source.load(e).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),Av(this.renderer,this.fieldsIndex),m3(this.timeInfo,this.fieldsIndex)})),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&this.geometryType==null}get parsedUrl(){return this.url?ut(this.url):null}set renderer(e){Av(e,this.fieldsIndex),this._set("renderer",e)}set url(e){if(!e)return void this._set("url",e);const t=ut(e);this._set("url",t.path),t.query&&(this.customParameters={...this.customParameters,...t.query})}async applyEdits(e,t){const i=await V(()=>import("./editingSupport.d5502ac1.js"),[],import.meta.url);await this.load();const r=await i.applyEdits(this,this.source,e,t);return this.read({extent:this.source.sourceJSON.extent,timeInfo:this.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),r}on(e,t){return super.on(e,t)}createPopupTemplate(e){return GB(this,e)}createQuery(){const e=new tr,t=this.get("capabilities.data");e.returnGeometry=!0,t&&t.supportsZ&&(e.returnZ=!0),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:i,timeExtent:r}=this;return e.timeExtent=i!=null&&r!=null?r.offset(-i.value,i.unit):r||null,e}getFieldDomain(e,t){let i,r=!1;const n=t&&t.feature,s=n&&n.attributes,o=this.typeIdField&&s&&s[this.typeIdField];return o!=null&&this.types&&(r=this.types.some(a=>a.id==o&&(i=a.domains&&a.domains[e],i&&i.type==="inherited"&&(i=this._getLayerDomain(e)),!0))),r||i||(i=this._getLayerDomain(e)),i}getField(e){return this.fieldsIndex.get(e)}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(tr.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>this.source.queryObjectIds(tr.from(e)||this.createQuery(),t))}queryFeatureCount(e,t){return this.load().then(()=>this.source.queryFeatureCount(tr.from(e)||this.createQuery(),t))}queryExtent(e,t){return this.load().then(()=>this.source.queryExtent(tr.from(e)||this.createQuery(),t))}async hasDataChanged(){try{const{dataChanged:e,updates:t}=await this.source.refresh(this.customParameters);return E(t)&&this.read(t,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}_getLayerDomain(e){if(!this.fields)return null;let t=null;return this.fields.some(i=>(i.name===e&&(t=i.domain),!!t)),t}};l([d({readOnly:!0,json:{read:!1,write:!1}})],Oe.prototype,"capabilities",null),l([d({type:String})],Oe.prototype,"copyright",void 0),l([d({readOnly:!0})],Oe.prototype,"createQueryVersion",null),l([d({readOnly:!0})],Oe.prototype,"defaultPopupTemplate",null),l([d({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Oe.prototype,"definitionExpression",void 0),l([d({type:String})],Oe.prototype,"displayField",void 0),l([d({type:Boolean})],Oe.prototype,"editingEnabled",void 0),l([d(SB)],Oe.prototype,"elevationInfo",void 0),l([d(zB)],Oe.prototype,"featureReduction",void 0),l([d({type:[Qm],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],Oe.prototype,"fields",void 0),l([d(Gge.fieldsIndex)],Oe.prototype,"fieldsIndex",void 0),l([d({type:Ue,json:{name:"extent"}})],Oe.prototype,"fullExtent",void 0),l([d({type:["point","polygon","polyline","multipoint"],json:{read:{reader:h3.read}}})],Oe.prototype,"geometryType",void 0),l([d({type:Boolean})],Oe.prototype,"hasZ",void 0),l([d(TB)],Oe.prototype,"id",void 0),l([d({type:Boolean,readOnly:!0})],Oe.prototype,"isTable",null),l([d(Dw)],Oe.prototype,"labelsVisible",void 0),l([d({type:[l0],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:Hx},write:!0}})],Oe.prototype,"labelingInfo",void 0),l([d(_B)],Oe.prototype,"legendEnabled",void 0),l([d({type:["show","hide"]})],Oe.prototype,"listMode",void 0),l([d({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],Oe.prototype,"objectIdField",void 0),l([d(jy)],Oe.prototype,"opacity",void 0),l([d({type:["GeoJSON"]})],Oe.prototype,"operationalLayerType",void 0),l([d({readOnly:!0})],Oe.prototype,"parsedUrl",null),l([d($w)],Oe.prototype,"popupEnabled",void 0),l([d({type:cu,json:{name:"popupInfo",write:!0}})],Oe.prototype,"popupTemplate",void 0),l([d({types:a0,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:nB}}}})],Oe.prototype,"renderer",null),l([d(bB)],Oe.prototype,"screenSizePerspectiveEnabled",void 0),l([d({readOnly:!0})],Oe.prototype,"source",void 0),l([d({type:we})],Oe.prototype,"spatialReference",void 0),l([d({type:[Lw]})],Oe.prototype,"templates",void 0),l([d()],Oe.prototype,"title",void 0),l([d({json:{read:!1},readOnly:!0})],Oe.prototype,"type",void 0),l([d({type:String,readOnly:!0})],Oe.prototype,"typeIdField",void 0),l([d({type:[KM]})],Oe.prototype,"types",void 0),l([d(wB)],Oe.prototype,"url",null),Oe=l([S("esri.layers.GeoJSONLayer")],Oe);const bb=Oe,hxe=Object.freeze(Object.defineProperty({__proto__:null,default:bb},Symbol.toStringTag,{value:"Module"})),qge={type:ca,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:ej}}}}};function ej(e,t,i,r){if(!e)return null;const{minScale:n,maxScale:s,minLOD:o,maxLOD:a}=t;if(o!=null&&a!=null)return r&&r.ignoreMinMaxLOD?ca.fromJSON(e):ca.fromJSON({...e,lods:e.lods.filter(({level:u})=>u!=null&&u>=o&&u<=a)});if(n!==0&&s!==0){const u=f=>Math.round(1e4*f)/1e4,c=n?u(n):1/0,h=s?u(s):-1/0;return ca.fromJSON({...e,lods:e.lods.filter(f=>{const y=u(f.scale);return y<=c&&y>=h})})}return ca.fromJSON(e)}class Uh{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(t,i){if(this._allAvailability!=="unknown")return this._allAvailability;const r=(t-this.location.top)*this.location.width+(i-this.location.left),n=r%8,s=r>>3,o=this._tileAvailabilityBitSet;return s<0||s>o.length?"unknown":o[s]&1<<n?"available":"unavailable"}_updateFromData(t){const i=this.location.width,r=this.location.height;let n=!0,s=!0;const o=Math.ceil(i*r/8),a=new Uint8Array(o);let u=0;for(let c=0;c<t.length;c++){const h=c%8;t[c]?(s=!1,a[u]|=1<<h):n=!1,h===7&&++u}s?this._allAvailability="unavailable":n?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(t,i){const r=t.service.request||ze,{row:n,col:s,width:o,height:a}=t,u={query:{f:"json"}};return i=i?{...u,...i}:u,r(Wge(t),i).then(c=>c.data).catch(c=>{if(c&&c.details&&c.details.httpStatus===422)return{location:{top:n,left:s,width:o,height:a},valid:!0,data:uH(o*a,0)};throw c}).then(c=>{if(c.location&&(c.location.top!==n||c.location.left!==s||c.location.width!==o||c.location.height!==a))throw new P("tilemap:location-mismatch","Tilemap response for different location than requested",{response:c,definition:{top:n,left:s,width:o,height:a}});return Uh.fromJSON(c)})}static fromJSON(t){Uh._validateJSON(t);const i=new Uh;return i.location=Object.freeze($(t.location)),i._updateFromData(t.data),Object.freeze(i)}static _validateJSON(t){if(!t||!t.location)throw new P("tilemap:missing-location","Location missing from tilemap response");if(t.valid===!1)throw new P("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new P("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new P("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new P("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function DP(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function Wge(e){let t;if(e.service.type==="vector-tile")t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const i=e.service.query;return i&&(t=`${t}?${i}`),t}var hc;const Yge=W.getLogger("esri.layers.support.TilemapCache");let _n=hc=class extends uu(ce){constructor(e){super(e),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*gm.MEGABYTES,this.request=ze,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new WF(this.cacheByteSize),this.own([Y(()=>{const{layer:e}=this;return[e==null?void 0:e.parsedUrl,e==null?void 0:e.tileServers,e==null?void 0:e.apiKey,e==null?void 0:e.customParameters]},()=>this._initializeTilemapDefinition()),Y(()=>{var e,t;return(t=(e=this.layer)==null?void 0:e.tileInfo)==null?void 0:t.lods},e=>this._initializeAvailableLevels(e),Al)]),this._initializeTilemapDefinition()}castLevels(e){return e<=2?(Yge.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,r){if(!this._availableLevels[e])return Promise.reject(new P("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,i,n);if(s)return Promise.resolve(s);const o=r&&r.signal;return r={...r,signal:null},new Promise((a,u)=>{$n(o,()=>u(Mt()));const c=DP(n);let h=this._pendingTilemapRequests[c];if(!h){h=Uh.fromDefinition(n,r).then(y=>(this._tilemapCache.put(c,y,y.byteSize),y));const f=()=>delete this._pendingTilemapRequests[c];this._pendingTilemapRequests[c]=h,h.then(f,f)}h.then(a,u)})}getAvailability(e,t,i){if(!this._availableLevels[e])return"unavailable";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):"unknown"}fetchAvailability(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch(n=>n).then(n=>{if(n instanceof Uh){const s=n.getAvailability(t,i);if(s==="unavailable")throw new P("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i});return s}if(lr(n))throw n;return"unknown"}):Promise.reject(new P("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,r,n){r.level=e,r.row=t,r.col=i;const s=this.layer.tileInfo;s.updateTileInfo(r);const o=this.fetchAvailability(e,t,i,n).catch(a=>{if(lr(a))throw a;if(s.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw a});return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,n,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,n,s){if(!this._prefetchingEnabled)return;const o=`prefetch-${e}`;if(this.handles.has(o))return;const a=new AbortController;s.then(()=>a.abort(),()=>a.abort());let u=!1;const c={remove(){u||(u=!0,a.abort())}};if(this.handles.add(c,o),await nG(10,a.signal).catch(()=>{}),u||(u=!0,this.handles.remove(o)),Pn(a))return;const h={id:e,level:t,row:i,col:r},f={...n,signal:a.signal},y=this.layer.tileInfo;for(let m=0;hc._prefetches.length<hc._maxPrefetch&&y.upsampleTile(h);++m){const g=this.fetchAvailability(h.level,h.row,h.col,f);hc._prefetches.push(g);const v=()=>{hc._prefetches.removeUnordered(g)};g.then(v,v)}}_initializeTilemapDefinition(){var r;if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:jc({...e.query,...i,token:t!=null?t:(r=e.query)==null?void 0:r.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const n=DP(r);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(t=>this._availableLevels[t.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};_n._maxPrefetch=4,_n._prefetches=new Hl({initialSize:hc._maxPrefetch}),l([d({constructOnly:!0,type:Number})],_n.prototype,"levels",void 0),l([je("levels")],_n.prototype,"castLevels",null),l([d({readOnly:!0,type:Number})],_n.prototype,"size",null),l([d({constructOnly:!0,type:Number})],_n.prototype,"cacheByteSize",void 0),l([d({constructOnly:!0})],_n.prototype,"layer",void 0),l([d({constructOnly:!0})],_n.prototype,"request",void 0),_n=hc=l([S("esri.layers.support.TilemapCache")],_n);const Kge=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}readMaxScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(i,r){return r.capabilities&&r.capabilities.includes("Tilemap")?new _n({layer:this}):null}};return l([d({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),l([d()],t.prototype,"minScale",void 0),l([Z("service","minScale")],t.prototype,"readMinScale",null),l([d()],t.prototype,"maxScale",void 0),l([Z("service","maxScale")],t.prototype,"readMaxScale",null),l([d({type:we})],t.prototype,"spatialReference",void 0),l([d({readOnly:!0})],t.prototype,"supportsBlankTile",null),l([d(qge)],t.prototype,"tileInfo",void 0),l([d()],t.prototype,"tilemapCache",void 0),l([Z("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),l([d()],t.prototype,"version",void 0),t=l([S("esri.layers.mixins.ArcGISCachedService")],t),t};let Cg=null;function Zge(e){if(Cg)return Cg;const t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return Cg=new Promise(i=>{const r=new Image;r.onload=()=>{r.onload=r.onerror=null,i(r.width>0&&r.height>0)},r.onerror=()=>{r.onload=r.onerror=null,i(!1)},r.src="data:image/webp;base64,"+t[e]}),Cg}const Jge=W.getLogger("esri.layers.support.SpriteSource"),Xge=1.15;class LP{constructor(t,i,r,n){this.baseURL=t,this.devicePixelRatio=i,this.maxTextureSize=r,this._spriteImageFormat=n,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}get spriteNames(){const t=[];for(const i in this._spritesData)t.push(i);return t.sort(),t}getSpriteInfo(t){return this._spritesData[t]}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}_loadSprites(t){this._isRetina=this.devicePixelRatio>Xge;const i=ut(this.baseURL),r=i.query?"?"+jc(i.query):"",n=this._isRetina?"@2x":"",s=`${i.path}${n}.${this._spriteImageFormat}${r}`,o=`${i.path}${n}.json${r}`;return Promise.all([ze(o,t),ze(s,{responseType:"image",...t})]).then(([a,u])=>{const c=Object.keys(a.data);if(!c||c.length===0||c.length===1&&c[0]==="_ssl"||!u||!u.data)return this._spritesData=this.image=null,this.width=this.height=0,null;this._spritesData=a.data;const h=u.data,f=Math.max(this.maxTextureSize,4096);if(h.width>f||h.height>f){const w=`Sprite resource for style ${i.path} is bigger than the maximum allowed of ${f} pixels}`;throw Jge.error(w),new P("SpriteSource",w)}this.width=h.width,this.height=h.height;const y=document.createElement("canvas"),m=y.getContext("2d");y.width=h.width,y.height=h.height,m.drawImage(h,0,0,h.width,h.height);const g=m.getImageData(0,0,h.width,h.height),v=new Uint8Array(g.data);let b;for(let w=0;w<v.length;w+=4)b=v[w+3]/255,v[w]=v[w]*b,v[w+1]=v[w+1]*b,v[w+2]=v[w+2]*b;this.image=v})}}class Qge{constructor(t){this.url=t}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=ze(this.url).then(t=>t.data.index)),this._tileIndexPromise}async dataKey(t,i){const r=await this.fetchTileIndex();return Ct(i),this._getIndexedDataKey(r,t)}_getIndexedDataKey(t,i){const r=[i];if(i.level<0||i.row<0||i.col<0||i.row>>i.level>0||i.col>>i.level>0)return null;let n=i;for(;n.level!==0;)n=new ki(n.level-1,n.row>>1,n.col>>1,n.world),r.push(n);let s,o,a=t,u=r.pop();if(a===1)return u;for(;r.length;)if(s=r.pop(),o=(1&s.col)+((1&s.row)<<1),a){if(a[o]===0){u=null;break}if(a[o]===1){u=s;break}u=s,a=a[o]}return u}}class e1e{constructor(t,i){this._tilemap=t,this._tileIndexUrl=i}async fetchTileIndex(t){return this._tileIndexPromise||(this._tileIndexPromise=ze(this._tileIndexUrl,{query:{...t==null?void 0:t.query}}).then(i=>i.data.index)),this._tileIndexPromise}dataKey(t,i){const{level:r,row:n,col:s}=t,o=new ki(t);return this._tilemap.fetchAvailabilityUpsample(r,n,s,o,i).then(()=>(o.world=t.world,o)).catch(a=>{if(lr(a))throw a;return null})}}const Ig=new Map;function t1e(e,t,i,r,n){return i1e(e.replace(/\{z\}/gi,t.toString()).replace(/\{y\}/gi,i.toString()).replace(/\{x\}/gi,r.toString()),n)}function i1e(e,t){const i=Ig.get(e);if(i)return i.then(n=>$(n));const r=ze(e,{responseType:"array-buffer",...t}).then(({data:n})=>(Ig.delete(e),n)).catch(n=>{throw Ig.delete(e),n});return Ig.set(e,r),r}class r1e{constructor(t,i,r){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.name=t,this.sourceUrl=i;const n=ut(this.sourceUrl),s=$(r),o=s.tiles;if(n)for(let y=0;y<o.length;y++){const m=ut(o[y]);m&&(nr(m.path)||(m.path=vo(n.path,m.path)),o[y]=ya(m.path,{...n.query,...m.query}))}this.tileServers=o;const a=r.capabilities&&r.capabilities.split(",").map(y=>y.toLowerCase().trim()),u=(r==null?void 0:r.exportTilesAllowed)===!0,c=(a==null?void 0:a.includes("tilemap"))===!0,h=u&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:u,supportsTileMap:c},exportTiles:u?{maxExportTilesCount:+h}:null},this.tileInfo=ej(s.tileInfo,s,null,{ignoreMinMaxLOD:!0});const f=r.tileMap?ya(vo(n.path,r.tileMap),n.query):null;c?(this.type="vector-tile",this.tilemap=new e1e(new _n({layer:{parsedUrl:n,tileInfo:this.tileInfo,type:"vector-tile",tileServers:this.tileServers}}),f)):f&&(this.tilemap=new Qge(f)),this.fullExtent=Ue.fromJSON(r.fullExtent)}destroy(){}async getRefKey(t,i){var r,n;return(n=(r=this.tilemap)==null?void 0:r.dataKey(t,i))!=null?n:t}requestTile(t,i,r,n){const s=this.tileServers[i%this.tileServers.length];return t1e(s,t,i,r,n)}isCompatibleWith(t){const i=this.tileInfo,r=t.tileInfo;if(!i.spatialReference.equals(r.spatialReference)||!i.origin.equals(r.origin)||Math.round(i.dpi)!==Math.round(r.dpi))return!1;const n=i.lods,s=r.lods,o=Math.min(n.length,s.length);for(let a=0;a<o;a++){const u=n[a],c=s[a];if(u.level!==c.level||Math.round(u.scale)!==Math.round(c.scale))return!1}return!0}}const D_=De.defaults&&De.defaults.io.corsEnabledServers;async function n1e(e,t){const i={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[r,n]=typeof e=="string"?[e,null]:[null,e.jsonUrl];await $c(i,"esri",e,n,t);const s={layerDefinition:i.validatedSource,url:r,serviceUrl:i.sourceUrl,style:i.style,styleUrl:i.styleUrl,spriteUrl:i.style.sprite&&id(i.styleBase,i.style.sprite),spriteFormat:i.spriteFormat,glyphsUrl:i.style.glyphs&&id(i.styleBase,i.style.glyphs),sourceNameToSource:i.sourceNameToSource,primarySourceName:i.primarySourceName};return td(s.spriteUrl),td(s.glyphsUrl),s}function td(e){if(!e)return;const t=Nn(e);D_&&!D_.includes(t)&&D_.push(t)}function id(...e){let t;for(let i=0;i<e.length;++i)Dn(e[i])?t&&(t=t.split("://")[0]+":"+e[i].trim()):t=nr(e[i])?e[i]:vo(t,e[i]);return qb(t)}async function $c(e,t,i,r,n){let s,o,a;if(Ct(n),typeof i=="string"){const c=Jr(i);td(c),a=await ze(c,{...n,responseType:"json",query:{f:"json",...n==null?void 0:n.query}}),a.ssl&&(s&&(s=s.replace(/^http:/i,"https:")),o&&(o=o.replace(/^http:/i,"https:"))),s=c,o=c}else a={data:i},s=i.jsonUrl||null,o=r;const u=a.data;if(tj(u))return e.styleUrl=s||null,o1e(e,u,o,n);if(s1e(u))return e.sourceUrl?OP(e,u,o,!1,t,n):(e.sourceUrl=s||null,OP(e,u,o,!0,t,n));throw new Error("You must specify the URL or the JSON for a service or for a style.")}function tj(e){return!!e.sources}function s1e(e){return!tj(e)}async function o1e(e,t,i,r){const n=i?P6(i):x6();e.styleBase=n,e.style=t,e.styleUrl&&td(e.styleUrl),t["sprite-format"]&&t["sprite-format"].toLowerCase()==="webp"&&(e.spriteFormat="webp");const s=[];if(t.sources&&t.sources.esri){const o=t.sources.esri;o.url?await $c(e,"esri",id(n,o.url),void 0,r):s.push($c(e,"esri",o,n,r))}for(const o of Object.keys(t.sources))o!=="esri"&&t.sources[o].type==="vector"&&(t.sources[o].url?s.push($c(e,o,id(n,t.sources[o].url),void 0,r)):t.sources[o].tiles&&s.push($c(e,o,t.sources[o],n,r)));await Promise.all(s)}async function OP(e,t,i,r,n,s){const o=i?qb(i)+"/":x6(),a=a1e(t,o),u=new r1e(n,ya(o,s==null?void 0:s.query),a);if(!r&&e.primarySourceName in e.sourceNameToSource){const c=e.sourceNameToSource[e.primarySourceName];if(!c.isCompatibleWith(u))return;u.fullExtent!=null&&(c.fullExtent!=null?c.fullExtent.union(u.fullExtent):c.fullExtent=u.fullExtent.clone()),c.tileInfo.lods.length<u.tileInfo.lods.length&&(c.tileInfo=u.tileInfo)}if(r?(e.sourceBase=o,e.source=t,e.validatedSource=a,e.primarySourceName=n,e.sourceUrl&&td(e.sourceUrl)):td(o),e.sourceNameToSource[n]=u,!e.style){if(t.defaultStyles==null)throw new Error;return typeof t.defaultStyles=="string"?$c(e,"",id(o,t.defaultStyles,"root.json"),void 0,s):$c(e,"",t.defaultStyles,id(o,"root.json"),s)}}function a1e(e,t){if(e.hasOwnProperty("tileInfo"))return e;const i={xmin:-20037507067161843e-9,ymin:-20037507067161843e-9,xmax:20037507067161843e-9,ymax:20037507067161843e-9,spatialReference:{wkid:102100}},r=512;let n=78271.51696400007,s=2958287637957775e-7;const o=[],a=e.hasOwnProperty("minzoom")?+e.minzoom:0,u=e.hasOwnProperty("maxzoom")?+e.maxzoom:22;for(let c=0;c<=u;c++)c>=a&&o.push({level:c,scale:s,resolution:n}),n/=2,s/=2;for(const c of e.tiles)td(id(t,c));return{capabilities:"TilesOnly",initialExtent:i,fullExtent:i,minScale:0,maxScale:0,tiles:e.tiles,tileInfo:{rows:r,cols:r,dpi:96,format:"pbf",origin:{x:-20037508342787e-6,y:20037508342787e-6},lods:o,spatialReference:{wkid:102100}}}}function l1e(e){return{origin:"portal-item",url:ut(e.itemUrl),portal:e.portal||ri.getDefault(),portalItem:e,readResourcePaths:[]}}function pxe(e){return{origin:"portal-item",messages:[],writtenProperties:[],url:e.itemUrl?ut(e.itemUrl):null,portal:e.portal||ri.getDefault(),portalItem:e}}const u1e=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,c1e={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function d1e(e){const t=e==null?void 0:e.match(u1e);if(!t)return null;const[,i,r,n]=t;if(!i)return null;let s=null,o=null,a=null;const{devext:u,qaext:c,www:h}=c1e;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}const Ng=1e-6;function h1e(e,t){if(e===t)return!0;if(!e&&t!=null||e!=null&&!t||!e.spatialReference.equals(t.spatialReference)||e.dpi!==t.dpi)return!1;const i=e.origin,r=t.origin;if(Math.abs(i.x-r.x)>=Ng||Math.abs(i.y-r.y)>=Ng)return!1;let n,s;e.lods[0].scale>t.lods[0].scale?(n=e,s=t):(s=e,n=t);for(let o=n.lods[0].scale;o>=s.lods[s.lods.length-1].scale-Ng;o/=2)if(Math.abs(o-s.lods[0].scale)<Ng)return!0;return!1}function p1e(e,t){if(e===t)return e;if(!e&&t!=null)return t;if(e!=null&&!t)return e;const i=e.size[0],r=e.format,n=e.dpi,s={x:e.origin.x,y:e.origin.y},o=e.spatialReference.toJSON(),a=e.lods[0].scale>t.lods[0].scale?e.lods[0]:t.lods[0],u=e.lods[e.lods.length-1].scale<=t.lods[t.lods.length-1].scale?e.lods[e.lods.length-1]:t.lods[t.lods.length-1],c=a.scale,h=a.resolution,f=u.scale,y=[];let m=c,g=h,v=0;for(;m>f;)y.push({level:v,resolution:g,scale:m}),v++,m/=2,g/=2;return new ca({size:[i,i],dpi:n,format:r||"pbf",origin:s,lods:y,spatialReference:o})}var Vh,hA,kP,FP,BP,UP,VP,jP,zP,HP,GP,qP,WP,YP,KP,ZP,JP,XP,QP,e$,t$,i$,r$,n$,s$,o$,a$,l$,u$,c$,d$,h$,p$,f$,y$,m$,g$,v$,b$,w$,_$,S$,T$,E$,x$,A$,M$,C$,I$,N$,R$,P$,$$,D$,L$,O$,k$,F$,B$,U$,V$;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(Vh||(Vh={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(hA||(hA={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(kP||(kP={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(FP||(FP={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(BP||(BP={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(UP||(UP={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(VP||(VP={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(jP||(jP={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(zP||(zP={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(HP||(HP={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(GP||(GP={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(qP||(qP={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(WP||(WP={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(YP||(YP={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(KP||(KP={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(ZP||(ZP={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(JP||(JP={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(XP||(XP={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(QP||(QP={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(e$||(e$={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(t$||(t$={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(i$||(i$={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(r$||(r$={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(n$||(n$={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(s$||(s$={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(o$||(o$={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(a$||(a$={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(l$||(l$={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(u$||(u$={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(c$||(c$={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(d$||(d$={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(h$||(h$={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(p$||(p$={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(f$||(f$={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(y$||(y$={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(m$||(m$={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(g$||(g$={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(v$||(v$={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(b$||(b$={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(w$||(w$={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(_$||(_$={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(S$||(S$={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(T$||(T$={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(E$||(E$={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(x$||(x$={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(A$||(A$={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(M$||(M$={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(C$||(C$={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(I$||(I$={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(N$||(N$={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(R$||(R$={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(P$||(P$={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}($$||($$={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(D$||(D$={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(L$||(L$={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(O$||(O$={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(k$||(k$={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(F$||(F$={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(B$||(B$={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(U$||(U$={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(V$||(V$={}));var Dt,pc,pA,lo,fA,wb,yA,fc,mA;(function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.FILL=1]="FILL",e[e.LINE=2]="LINE",e[e.SYMBOL=3]="SYMBOL",e[e.CIRCLE=4]="CIRCLE"})(Dt||(Dt={})),function(e){e[e.VISIBLE=0]="VISIBLE",e[e.NONE=1]="NONE"}(pc||(pc={})),function(e){e[e.POINT=0]="POINT",e[e.LINE=1]="LINE",e[e.LINE_CENTER=2]="LINE_CENTER"}(pA||(pA={})),function(e){e[e.MAP=0]="MAP",e[e.VIEWPORT=1]="VIEWPORT",e[e.AUTO=2]="AUTO"}(lo||(lo={})),function(e){e[e.AUTO=0]="AUTO",e[e.LEFT=1]="LEFT",e[e.CENTER=2]="CENTER",e[e.RIGHT=3]="RIGHT"}(fA||(fA={})),function(e){e[e.CENTER=0]="CENTER",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.TOP=3]="TOP",e[e.BOTTOM=4]="BOTTOM",e[e.TOP_LEFT=5]="TOP_LEFT",e[e.TOP_RIGHT=6]="TOP_RIGHT",e[e.BOTTOM_LEFT=7]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(wb||(wb={})),function(e){e[e.NONE=0]="NONE",e[e.UPPERCASE=1]="UPPERCASE",e[e.LOWERCASE=2]="LOWERCASE"}(yA||(yA={})),function(e){e[e.MAP=0]="MAP",e[e.VIEWPORT=1]="VIEWPORT"}(fc||(fc={})),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(mA||(mA={}));class Bt{}Bt.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:pc.VISIBLE}},Bt.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:pc.VISIBLE}},Bt.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:pc.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:Vh.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:hA.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},Bt.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:pc.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:pA.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:wb.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:lo.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:wb.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:fA.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:lo.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:yA.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[mA.HORIZONTAL]}},Bt.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:pc.VISIBLE}},Bt.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},Bt.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:fc.MAP}},Bt.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:fc.MAP},"line-width":{type:"number",minimum:0,default:1}},Bt.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:fc.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:fc.MAP}},Bt.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},Bt.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:fc.MAP}};var j$,z$,H$,Ea,G$;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.FILL_VERTEX=1]="FILL_VERTEX",e[e.FILL_DD_VERTEX=2]="FILL_DD_VERTEX",e[e.FILL_INDEX=3]="FILL_INDEX",e[e.OUTLINE_VERTEX=4]="OUTLINE_VERTEX",e[e.OUTLINE_DD_VERTEX=5]="OUTLINE_DD_VERTEX",e[e.OUTLINE_INDEX=6]="OUTLINE_INDEX",e[e.LINE_VERTEX=7]="LINE_VERTEX",e[e.LINE_DD_VERTEX=8]="LINE_DD_VERTEX",e[e.LINE_INDEX=9]="LINE_INDEX",e[e.ICON_VERTEX=10]="ICON_VERTEX",e[e.ICON_DD_VERTEX=11]="ICON_DD_VERTEX",e[e.ICON_INDEX=12]="ICON_INDEX",e[e.TEXT_VERTEX=13]="TEXT_VERTEX",e[e.TEXT_DD_VERTEX=14]="TEXT_DD_VERTEX",e[e.TEXT_INDEX=15]="TEXT_INDEX",e[e.CIRCLE_VERTEX=16]="CIRCLE_VERTEX",e[e.CIRCLE_INDEX=17]="CIRCLE_INDEX"})(j$||(j$={})),function(e){e[e.FILL=1]="FILL",e[e.LINE=2]="LINE",e[e.SYMBOL=3]="SYMBOL",e[e.CIRCLE=4]="CIRCLE"}(z$||(z$={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.OPAQUE=1]="OPAQUE",e[e.TRANSLUCENT=2]="TRANSLUCENT",e[e.SYMBOLS=3]="SYMBOLS",e[e.HITTEST=4]="HITTEST"}(H$||(H$={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.FILL=1]="FILL",e[e.OUTLINE=2]="OUTLINE",e[e.LINE=3]="LINE",e[e.ICON=4]="ICON",e[e.CIRCLE=5]="CIRCLE",e[e.TEXT=6]="TEXT",e[e.TILEINFO=7]="TILEINFO"}(Ea||(Ea={})),function(e){e[e.PAINTER_CHANGED=0]="PAINTER_CHANGED",e[e.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",e[e.LAYER_CHANGED=2]="LAYER_CHANGED",e[e.LAYER_REMOVED=3]="LAYER_REMOVED",e[e.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(G$||(G$={}));class f1e{constructor(t){this._array=[],t<=0&&console.error("strideInBytes must be positive!"),this._stride=t}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(t,i){return 65535&t|i<<16}static i8888to32(t,i,r,n){return 255&t|(255&i)<<8|(255&r)<<16|n<<24}static i8816to32(t,i,r){return 255&t|(255&i)<<8|r<<16}}var ue,yc;(function(e){e[e.R8_SIGNED=0]="R8_SIGNED",e[e.R8_UNSIGNED=1]="R8_UNSIGNED",e[e.R16_SIGNED=2]="R16_SIGNED",e[e.R16_UNSIGNED=3]="R16_UNSIGNED",e[e.R8G8_SIGNED=4]="R8G8_SIGNED",e[e.R8G8_UNSIGNED=5]="R8G8_UNSIGNED",e[e.R16G16_SIGNED=6]="R16G16_SIGNED",e[e.R16G16_UNSIGNED=7]="R16G16_UNSIGNED",e[e.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED",e[e.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED",e[e.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR",e[e.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY",e[e.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(ue||(ue={})),function(e){e[e.UNIFORM=0]="UNIFORM",e[e.DATA_DRIVEN=1]="DATA_DRIVEN",e[e.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN",e[e.UNUSED=3]="UNUSED"}(yc||(yc={}));var q$,W$,Y$,K$,Z$,J$,X$,$e,Q$,eD,tD,iD,rD,nD,sD,oD,aD,lD,uD,cD,dD,hD;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(q$||(q$={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(W$||(W$={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(Y$||(Y$={})),function(e){e[e.ADD=32774]="ADD",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(K$||(K$={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"}(Z$||(Z$={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(J$||(J$={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(X$||(X$={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT"}($e||($e={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(Q$||(Q$={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(eD||(eD={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(tD||(tD={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(iD||(iD={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(rD||(rD={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(nD||(nD={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(sD||(sD={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(oD||(oD={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(aD||(aD={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(lD||(lD={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(uD||(uD={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(cD||(cD={})),function(e){e[e.TEXTURE=0]="TEXTURE",e[e.RENDER_BUFFER=1]="RENDER_BUFFER",e[e.CUBEMAP=2]="CUBEMAP"}(dD||(dD={})),function(e){e[e.NONE=0]="NONE",e[e.DEPTH_RENDER_BUFFER=1]="DEPTH_RENDER_BUFFER",e[e.STENCIL_RENDER_BUFFER=2]="STENCIL_RENDER_BUFFER",e[e.DEPTH_STENCIL_RENDER_BUFFER=3]="DEPTH_STENCIL_RENDER_BUFFER",e[e.DEPTH_STENCIL_TEXTURE=4]="DEPTH_STENCIL_TEXTURE"}(hD||(hD={}));const fxe=33984;var pD,fD;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.Sync=7]="Sync",e[e.COUNT=8]="COUNT"})(pD||(pD={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(fD||(fD={}));const yxe=33306;var yD,mD,gD,vD,bD,wD,_D;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(yD||(yD={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(mD||(mD={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(gD||(gD={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(vD||(vD={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(bD||(bD={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(wD||(wD={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(_D||(_D={}));class _i{constructor(t,i,r,n,s,o=!1,a=0){this.name=t,this.count=i,this.type=r,this.offset=n,this.stride=s,this.normalized=o,this.divisor=a}}class Rs{constructor(t){this._locations=new Map,this._key=t}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return this._locations.size===0&&this._buildAttributesInfo(),this._locations}getLayoutInfo(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(t,i,r,n,s){const o=this.getUniforms();for(const a of o){const{name:u,type:c,getValue:h}=a,f=h(r,i,n,s);if(f!==null)switch(c){case"float":t.setUniform1f(u,f);break;case"vec2":t.setUniform2fv(u,f);break;case"vec4":t.setUniform4fv(u,f)}}}encodeAttributes(t,i,r,n){var h;const s=this.attributesInfo(),o=this.getEncodingInfos(),a=[];let u=0,c=0;for(const f of Object.keys(o)){const y=o[f],{type:m,precisionFactor:g,isLayout:v}=s[f],b=v?r.getLayoutProperty(f):r.getPaintProperty(f),w=(h=b.interpolator)==null?void 0:h.getInterpolationRange(i);let T=0;for(const A of y){const{offset:R,bufferElementsToAdd:M}=A;if(M>0){for(let k=0;k<M;k++)a.push(0);u+=c,c=A.bufferElementsToAdd}const C=n!=null?n:b.getValue(w?w[T]:i,t);switch(m){case ue.R8_SIGNED:case ue.R8_UNSIGNED:a[u]|=this._encodeByte(C*(g||1),8*R);break;case ue.R16_SIGNED:case ue.R16_UNSIGNED:a[u]|=this._encodeShort(C*(g||1),8*R);break;case ue.R8G8_SIGNED:case ue.R8G8_UNSIGNED:a[u]|=this._encodeByte(C*(g||1),8*R),a[u]|=this._encodeByte(C*(g||1),8*R+8);break;case ue.R16G16_SIGNED:case ue.R16G16_UNSIGNED:a[u]|=this._encodeShort(C*(g||1),8*R),a[u]|=this._encodeShort(C*(g||1),8*R+16);break;case ue.R8G8B8A8_SIGNED:case ue.R8G8B8A8_UNSIGNED:a[u]|=this._encodeByte(C*(g||1),8*R),a[u]|=this._encodeByte(C*(g||1),8*R+8),a[u]|=this._encodeByte(C*(g||1),8*R+16),a[u]|=this._encodeByte(C*(g||1),8*R+24);break;case ue.R8G8B8A8_COLOR:a[u]=this._encodeColor(C);break;case ue.R16G16B16A16_DASHARRAY:case ue.R16G16B16A16_PATTERN:this._encodePattern(u,a,C);break;default:throw new Error("Unsupported encoding type")}T++}}return a}getAtributeState(t){let i=0;const r=3+2*t;return i|=this._bit(r),i|=this._bit(r+1)<<1,i}_buildAttributesInfo(){const t=[],i={},r={};let n=-1;const s=this.attributesInfo(),o=this.attributes();let a=-1;for(const f of o){a++;const y=this.getAtributeState(a);if(y===yc.UNIFORM||y===yc.UNUSED)continue;const m=s[f],g=[];i[f]=g;const v=m.type;for(let b=0;b<y;b++){const{dataType:w,bytesPerElement:T,count:A,normalized:R}=Rs._encodingInfo[v],M=T*A,C=`${w}-${R===!0}`;let k=r[C],B=0;if(!k||k.count+A>4)n++,k={dataIndex:n,count:0,offset:0},A!==4&&(r[C]=k),t.push({location:-1,name:"a_data_"+n,count:A,type:w,normalized:R}),B=Math.ceil(Math.max(M/4,1));else{const H=t[k.dataIndex];H.count+=A,B=Math.ceil(Math.max(H.count*T/4,1))-Math.ceil(Math.max(k.offset/4,1))}g.push({dataIndex:k.dataIndex,offset:k.offset,bufferElementsToAdd:B}),k.offset+=M,k.count+=A}}for(const f of t)switch(f.type){case $e.BYTE:case $e.UNSIGNED_BYTE:f.count=4;break;case $e.SHORT:case $e.UNSIGNED_SHORT:f.count+=f.count%2}this._buildVertexBufferLayout(t);let u=0;const c=this._layoutInfo.geometry;for(const f of c)this._locations.set(f.name,u++);const h=this._layoutInfo.opacity;if(h)for(const f of h)this._locations.set(f.name,u++);this._buildShaderInfo(t,i),this._propertyEncodingInfo=i}_buildVertexBufferLayout(t){const i={},r=this.geometryInfo();let n=r[0].stride;if(t.length===0)i.geometry=r;else{const s=[];let o=n;for(const a of t)n+=SD(a.type)*a.count;for(const a of r)s.push(new _i(a.name,a.count,a.type,a.offset,n,a.normalized));for(const a of t)s.push(new _i(a.name,a.count,a.type,o,n,a.normalized)),o+=SD(a.type)*a.count;i.geometry=s}this.opacityInfo()&&(i.opacity=this.opacityInfo()),this._layoutInfo=i,this._stride=n}_buildShaderInfo(t,i){let r=`
`,n=`
`;const s=[];for(const c of t)r+=`attribute ${this._getType(c.count)} ${c.name};
`;const o=this.attributes(),a=this.attributesInfo();let u=-1;for(const c of o){u++;const{name:h,type:f,precisionFactor:y,isLayout:m}=a[c],g=y&&y!==1?" * "+1/y:"",{bytesPerElement:v,count:b}=Rs._encodingInfo[f],w=T=>`a_data_${T.dataIndex}${y1e(b,T.offset,v)}`;switch(this.getAtributeState(u)){case yc.UNIFORM:{const T=this._getType(b),A=`u_${h}`;s.push({name:A,type:T,getValue:(R,M,C,k)=>{const B=m?R.getLayoutValue(c,M):R.getPaintValue(c,M);if(f===ue.R16G16B16A16_DASHARRAY){const H=R.getDashKey(B,R.getLayoutValue("line-cap",M)),Q=k.getMosaicItemPosition(H,!1);if(O(Q))return null;const{tl:ee,br:le}=Q;return[ee[0],le[1],le[0],ee[1]]}if(f===ue.R16G16B16A16_PATTERN){const H=k.getMosaicItemPosition(B,!c.includes("line-"));if(O(H))return null;const{tl:Q,br:ee}=H;return[Q[0],ee[1],ee[0],Q[1]]}if(f===ue.R8G8B8A8_COLOR){const H=B[3];return[H*B[0],H*B[1],H*B[2],H]}return B}}),r+=`uniform ${T} ${A};
`,n+=`${T} ${h} = ${A};
`}break;case yc.DATA_DRIVEN:{const T=w(i[c][0]);n+=`${this._getType(b)} ${h} = ${T}${g};
`}break;case yc.INTERPOLATED_DATA_DRIVEN:{const T=`u_t_${h}`;s.push({name:T,type:"float",getValue:(M,C,k,B)=>(m?M.getLayoutProperty(c):M.getPaintProperty(c)).interpolator.interpolationUniformValue(k,C)}),r+=`uniform float ${T};
`;const A=w(i[c][0]),R=w(i[c][1]);n+=`${this._getType(b)} ${h} = mix(${A}${g}, ${R}${g}, ${T});
`}}}this._shaderHeader=r,this._shaderMain=n,this._uniforms=s}_bit(t){return(this._key&1<<t)>>t}_getType(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}_encodeColor(t){const i=255*t[3];return f1e.i8888to32(t[0]*i,t[1]*i,t[2]*i,i)}_encodePattern(t,i,r){if(!r||!r.rect)return;const n=2,s=r.rect,o=r.width,a=r.height;i[t]=this._encodeShort(s.x+n,0),i[t]|=this._encodeShort(s.y+n+a,16),i[t+1]=this._encodeShort(s.x+n+o,0),i[t+1]|=this._encodeShort(s.y+n,16)}_encodeByte(t,i){return(255&t)<<i}_encodeShort(t,i){return(65535&t)<<i}}Rs._encodingInfo={[ue.R8_SIGNED]:{dataType:$e.BYTE,bytesPerElement:1,count:1,normalized:!1},[ue.R8_UNSIGNED]:{dataType:$e.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[ue.R16_SIGNED]:{dataType:$e.SHORT,bytesPerElement:2,count:1,normalized:!1},[ue.R16_UNSIGNED]:{dataType:$e.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[ue.R8G8_SIGNED]:{dataType:$e.BYTE,bytesPerElement:1,count:2,normalized:!1},[ue.R8G8_UNSIGNED]:{dataType:$e.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[ue.R16G16_SIGNED]:{dataType:$e.SHORT,bytesPerElement:2,count:2,normalized:!1},[ue.R16G16_UNSIGNED]:{dataType:$e.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[ue.R8G8B8A8_SIGNED]:{dataType:$e.BYTE,bytesPerElement:1,count:4,normalized:!1},[ue.R8G8B8A8_UNSIGNED]:{dataType:$e.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[ue.R8G8B8A8_COLOR]:{dataType:$e.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[ue.R16G16B16A16_DASHARRAY]:{dataType:$e.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[ue.R16G16B16A16_PATTERN]:{dataType:$e.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const SD=e=>{switch(e){case $e.FLOAT:case $e.INT:case $e.UNSIGNED_INT:return 4;case $e.SHORT:case $e.UNSIGNED_SHORT:return 2;case $e.BYTE:case $e.UNSIGNED_BYTE:return 1}},y1e=(e,t,i)=>{const r=t/i;if(e===1)switch(r){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(e===2)switch(r){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(e===3)switch(r){case 0:return".xyz";case 1:return".yzw"}return""};class uo extends Rs{constructor(t){super(t)}geometryInfo(){return uo.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return uo.ATTRIBUTES}attributesInfo(){return uo.ATTRIBUTES_INFO}}uo.ATTRIBUTES=[],uo.GEOMETRY_LAYOUT=[new _i("a_pos",2,$e.BYTE,0,2)],uo.ATTRIBUTES_INFO={};class co extends Rs{constructor(t){super(t)}geometryInfo(){return co.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return co.ATTRIBUTES}attributesInfo(){return co.ATTRIBUTES_INFO}}co.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],co.GEOMETRY_LAYOUT=[new _i("a_pos",2,$e.SHORT,0,4)],co.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:ue.R8_UNSIGNED},"circle-color":{name:"color",type:ue.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:ue.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:ue.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:ue.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:ue.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:ue.R8_UNSIGNED,precisionFactor:32}};class ho extends Rs{constructor(t){super(t)}geometryInfo(){return ho.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return ho.ATTRIBUTES}attributesInfo(){return ho.ATTRIBUTES_INFO}}ho.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],ho.GEOMETRY_LAYOUT=[new _i("a_pos",2,$e.SHORT,0,4)],ho.ATTRIBUTES_INFO={"fill-color":{name:"color",type:ue.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:ue.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:ue.R16G16B16A16_PATTERN,isOptional:!0}};class Bi extends Rs{constructor(t,i){super(t),this.usefillColor=i}geometryInfo(){return Bi.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this.usefillColor?Bi.ATTRIBUTES_FILL:Bi.ATTRIBUTES_OUTLINE}attributesInfo(){return this.usefillColor?Bi.ATTRIBUTES_INFO_FILL:Bi.ATTRIBUTES_INFO_OUTLINE}}Bi.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],Bi.ATTRIBUTES_FILL=["fill-color","fill-opacity"],Bi.GEOMETRY_LAYOUT=[new _i("a_pos",2,$e.SHORT,0,8),new _i("a_offset",2,$e.BYTE,4,8),new _i("a_xnormal",2,$e.BYTE,6,8)],Bi.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:ue.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:ue.R8_UNSIGNED,precisionFactor:100}},Bi.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:ue.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:ue.R8_UNSIGNED,precisionFactor:100}};class po extends Rs{constructor(t){super(t)}geometryInfo(){return po.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return po.ATTRIBUTES}attributesInfo(){return po.ATTRIBUTES_INFO}}po.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],po.GEOMETRY_LAYOUT=[new _i("a_pos",2,$e.SHORT,0,16),new _i("a_extrude_offset",4,$e.BYTE,4,16),new _i("a_dir_normal",4,$e.BYTE,8,16),new _i("a_accumulatedDistance",2,$e.UNSIGNED_SHORT,12,16)],po.ATTRIBUTES_INFO={"line-width":{name:"width",type:ue.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:ue.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:ue.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:ue.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:ue.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:ue.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:ue.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:ue.R16G16B16A16_DASHARRAY,isOptional:!0}};const ij=[new _i("a_pos",2,$e.SHORT,0,16),new _i("a_vertexOffset",2,$e.SHORT,4,16),new _i("a_texAngleRange",4,$e.UNSIGNED_BYTE,8,16),new _i("a_levelInfo",4,$e.UNSIGNED_BYTE,12,16)],rj=[new _i("a_opacityInfo",1,$e.UNSIGNED_BYTE,0,1)];class Xl extends Rs{constructor(t){super(t)}geometryInfo(){return ij}opacityInfo(){return rj}attributes(){return Xl.ATTRIBUTES}attributesInfo(){return Xl.ATTRIBUTES_INFO}}Xl.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],Xl.ATTRIBUTES_INFO={"icon-color":{name:"color",type:ue.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:ue.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:ue.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:ue.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:ue.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:ue.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class Ql extends Rs{constructor(t){super(t)}geometryInfo(){return ij}opacityInfo(){return rj}attributes(){return Ql.ATTRIBUTES}attributesInfo(){return Ql.ATTRIBUTES_INFO}}Ql.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],Ql.ATTRIBUTES_INFO={"text-color":{name:"color",type:ue.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:ue.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:ue.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:ue.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:ue.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:ue.R8_UNSIGNED,isLayout:!0}};const mxe=Number.POSITIVE_INFINITY,vC=Math.PI,gxe=2*vC,m1e=128/vC,vxe=vC/180,g1e=1/Math.LN2;function v1e(e,t){return(e%=t)>=0?e:e+t}function bxe(e){return v1e(e*m1e,256)}function wxe(e){return Math.log(e)*g1e}function Ki(e,t,i){return e*(1-i)+t*i}const nj={kind:"null"},At={kind:"number"},tn={kind:"string"},xi={kind:"boolean"},xa={kind:"color"},jw={kind:"object"},ba={kind:"value"};function h0(e,t){return{kind:"array",itemType:e,n:t}}const b1e=[nj,At,tn,xi,xa,jw,h0(ba)];function dp(e){if(e.kind==="array"){const t=dp(e.itemType);return typeof e.n=="number"?`array<${t}, ${e.n}>`:e.itemType.kind==="value"?"array":`array<${t}>`}return e.kind}function zw(e){if(e===null)return nj;if(typeof e=="string")return tn;if(typeof e=="boolean")return xi;if(typeof e=="number")return At;if(e instanceof se)return xa;if(Array.isArray(e)){let t;for(const i of e){const r=zw(i);if(t){if(t!==r){t=ba;break}}else t=r}return h0(t||ba,e.length)}return typeof e=="object"?jw:ba}function gA(e,t){if(t.kind==="array")return e.kind==="array"&&(e.n===0&&e.itemType.kind==="value"||gA(e.itemType,t.itemType))&&(typeof t.n!="number"||t.n===e.n);if(t.kind==="value"){for(const i of b1e)if(gA(e,i))return!0}return t.kind===e.kind}function vA(e){if(e===null)return"";const t=typeof e;return t==="string"?e:t==="number"||t==="boolean"?String(e):e instanceof se?e.toString():JSON.stringify(e)}class Z1{constructor(t,i){this.x=t,this.y=i}clone(){return new Z1(this.x,this.y)}equals(t,i){return t===this.x&&i===this.y}isEqual(t){return t.x===this.x&&t.y===this.y}setCoords(t,i){this.x=t,this.y=i}normalize(){const t=this.x,i=this.y,r=Math.sqrt(t*t+i*i);this.x/=r,this.y/=r}rightPerpendicular(){const t=this.x;this.x=this.y,this.y=-t}move(t,i){this.x+=t,this.y+=i}assign(t){this.x=t.x,this.y=t.y}assignAdd(t,i){this.x=t.x+i.x,this.y=t.y+i.y}assignSub(t,i){this.x=t.x-i.x,this.y=t.y-i.y}rotate(t,i){const r=this.x,n=this.y;this.x=r*t-n*i,this.y=r*i+n*t}scale(t){this.x*=t,this.y*=t}length(){const t=this.x,i=this.y;return Math.sqrt(t*t+i*i)}static distance(t,i){const r=i.x-t.x,n=i.y-t.y;return Math.sqrt(r*r+n*n)}static add(t,i){return new Z1(t.x+i.x,t.y+i.y)}static sub(t,i){return new Z1(t.x-i.x,t.y-i.y)}}var Yy;(function(e){e[e.Unknown=0]="Unknown",e[e.Point=1]="Point",e[e.LineString=2]="LineString",e[e.Polygon=3]="Polygon"})(Yy||(Yy={}));class w1e{constructor(t){this.parent=t,this.vars={}}add(t,i){this.vars[t]=i}get(t){return this.vars[t]?this.vars[t]:this.parent?this.parent.get(t):null}}class bC{constructor(){this.type=ba}static parse(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new bC}evaluate(t,i){return t==null?void 0:t.id}}class wC{constructor(){this.type=tn}static parse(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new wC}evaluate(t,i){if(!t)return null;switch(t.type){case Yy.Point:return"Point";case Yy.LineString:return"LineString";case Yy.Polygon:return"Polygon";default:return null}}}class _C{constructor(){this.type=jw}static parse(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new _C}evaluate(t,i){return t==null?void 0:t.values}}class Hw{constructor(){this.type=At}static parse(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new Hw}evaluate(t,i){return i}}class Pr{constructor(t,i,r){this.lhs=t,this.rhs=i,this.compare=r,this.type=xi}static parse(t,i,r){if(t.length!==3&&t.length!==4)throw new Error(`"${t[0]}" expects 2 or 3 arguments`);if(t.length===4)throw new Error(`"${t[0]}" collator not supported`);return new Pr(Ee(t[1],i),Ee(t[2],i),r)}evaluate(t,i){return this.compare(this.lhs.evaluate(t,i),this.rhs.evaluate(t,i))}}class _1e extends Pr{static parse(t,i){return Pr.parse(t,i,(r,n)=>r===n)}}class S1e extends Pr{static parse(t,i){return Pr.parse(t,i,(r,n)=>r!==n)}}class T1e extends Pr{static parse(t,i){return Pr.parse(t,i,(r,n)=>r<n)}}class E1e extends Pr{static parse(t,i){return Pr.parse(t,i,(r,n)=>r<=n)}}class x1e extends Pr{static parse(t,i){return Pr.parse(t,i,(r,n)=>r>n)}}class A1e extends Pr{static parse(t,i){return Pr.parse(t,i,(r,n)=>r>=n)}}class SC{constructor(t){this.arg=t,this.type=xi}static parse(t,i){if(t.length!==2)throw new Error('"!" expects 1 argument');return new SC(Ee(t[1],i))}evaluate(t,i){return!this.arg.evaluate(t,i)}}class TC{constructor(t){this.args=t,this.type=xi}static parse(t,i){const r=[];for(let n=1;n<t.length;n++)r.push(Ee(t[n],i));return new TC(r)}evaluate(t,i){for(const r of this.args)if(!r.evaluate(t,i))return!1;return!0}}class EC{constructor(t){this.args=t,this.type=xi}static parse(t,i){const r=[];for(let n=1;n<t.length;n++)r.push(Ee(t[n],i));return new EC(r)}evaluate(t,i){for(const r of this.args)if(r.evaluate(t,i))return!0;return!1}}class xC{constructor(t){this.args=t,this.type=xi}static parse(t,i){const r=[];for(let n=1;n<t.length;n++)r.push(Ee(t[n],i));return new xC(r)}evaluate(t,i){for(const r of this.args)if(r.evaluate(t,i))return!1;return!0}}class AC{constructor(t,i,r){this.type=t,this.args=i,this.fallback=r}static parse(t,i,r){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');let n;const s=[];for(let a=1;a<t.length-1;a+=2){const u=Ee(t[a],i),c=Ee(t[a+1],i,r);n||(n=c.type),s.push({condition:u,output:c})}const o=Ee(t[t.length-1],i,r);return n||(n=o.type),new AC(n,s,o)}evaluate(t,i){for(const r of this.args)if(r.condition.evaluate(t,i))return r.output.evaluate(t,i);return this.fallback.evaluate(t,i)}}class MC{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');let r;const n=[];for(let s=1;s<t.length;s++){const o=Ee(t[s],i);r||(r=o.type),n.push(o)}return new MC(r,n)}evaluate(t,i){for(const r of this.args){const n=r.evaluate(t,i);if(n!==null)return n}return null}}class CC{constructor(t,i,r,n,s){this.type=t,this.input=i,this.labels=r,this.outputs=n,this.fallback=s}static parse(t,i){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');let r;const n=Ee(t[1],i),s=[],o={};let a;for(let u=2;u<t.length-1;u+=2){let c=t[u];Array.isArray(c)||(c=[c]);for(const f of c){const y=typeof f;if(y!=="string"&&y!=="number")throw new Error('"match" requires string or number literal as labels');if(a){if(y!==a)throw new Error('"match" requires labels to have the same type')}else a=y;o[f]=s.length}const h=Ee(t[u+1],i);r||(r=h.type),s.push(h)}return new CC(r,n,o,s,Ee(t[t.length-1],i))}evaluate(t,i){const r=this.input.evaluate(t,i);return(this.outputs[this.labels[r]]||this.fallback).evaluate(t,i)}}class vs{constructor(t,i,r,n,s){this.operator=t,this.type=i,this.interpolation=r,this.input=n,this.stops=s}static parse(t,i,r){const n=t[0];if(t.length<5)throw new Error(`"${n}" expects at least 4 arguments`);const s=t[1];if(!Array.isArray(s)||s.length===0)throw new Error(`"${s}" is not a valid interpolation`);switch(s[0]){case"linear":if(s.length!==1)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(s.length!==2||typeof s[1]!="number")throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(s.length!==5)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(let c=1;c<5;c++){const h=s[c];if(typeof h!="number"||h<0||h>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error(`"${t[0]}" unknown interpolation type "${s[0]}"`)}if(t.length%2!=1)throw new Error(`"${n}" expects an even number of arguments`);const o=Ee(t[2],i,At);let a;n==="interpolate-hcl"||n==="interpolate-lab"?a=xa:r&&r.kind!=="value"&&(a=r);const u=[];for(let c=3;c<t.length;c+=2){const h=t[c];if(typeof h!="number")throw new Error(`"${n}" requires stop inputs as literal numbers`);if(u.length&&u[u.length-1][0]>=h)throw new Error(`"${n}" requires strictly ascending stop inputs`);const f=Ee(t[c+1],i,a);a||(a=f.type),u.push([h,f])}if(a&&a!==xa&&a!==At&&(a.kind!=="array"||a.itemType!==At))throw new Error(`"${n}" cannot interpolate type ${dp(a)}`);return new vs(n,a,s,o,u)}evaluate(t,i){const r=this.stops;if(r.length===1)return r[0][1].evaluate(t,i);const n=this.input.evaluate(t,i);if(n<=r[0][0])return r[0][1].evaluate(t,i);if(n>=r[r.length-1][0])return r[r.length-1][1].evaluate(t,i);let s=0;for(;++s<r.length&&!(n<r[s][0]););const o=r[s-1][0],a=r[s][0],u=vs.interpolationRatio(this.interpolation,n,o,a),c=r[s-1][1].evaluate(t,i),h=r[s][1].evaluate(t,i);if(this.operator==="interpolate"){if(this.type.kind==="array"&&Array.isArray(c)&&Array.isArray(h))return c.map((f,y)=>Ki(f,h[y],u));if(this.type.kind==="color"&&c instanceof se&&h instanceof se){const f=new se(c),y=new se(h);return new se([Ki(f.r,y.r,u),Ki(f.g,y.g,u),Ki(f.b,y.b,u),Ki(f.a,y.a,u)])}if(this.type.kind==="number"&&typeof c=="number"&&typeof h=="number")return Ki(c,h,u);throw new Error(`"${this.operator}" cannot interpolate type ${dp(this.type)}`)}if(this.operator==="interpolate-hcl"){const f=E5(c),y=E5(h),m=y.h-f.h,g=Mm({h:f.h+u*(m>180||m<-180?m-360*Math.round(m/360):m),c:Ki(f.c,y.c,u),l:Ki(f.l,y.l,u)});return new se({a:Ki(c.a,h.a,u),...g})}if(this.operator==="interpolate-lab"){const f=T5(c),y=T5(h),m=Mm({l:Ki(f.l,y.l,u),a:Ki(f.a,y.a,u),b:Ki(f.b,y.b,u)});return new se({a:Ki(c.a,h.a,u),...m})}throw new Error(`Unexpected operator "${this.operator}"`)}interpolationUniformValue(t,i){const r=this.stops;if(r.length===1||t>=r[r.length-1][0])return 0;let n=0;for(;++n<r.length&&!(t<r[n][0]););const s=r[n-1][0],o=r[n][0];return vs.interpolationRatio(this.interpolation,i,s,o)}getInterpolationRange(t){const i=this.stops;if(i.length===1){const s=i[0][0];return[s,s]}const r=i[i.length-1][0];if(t>=r)return[r,r];let n=0;for(;++n<i.length&&!(t<i[n][0]););return[i[n-1][0],i[n][0]]}static interpolationRatio(t,i,r,n){let s=0;return t[0]==="linear"?s=vs._exponentialInterpolationRatio(i,1,r,n):t[0]==="exponential"?s=vs._exponentialInterpolationRatio(i,t[1],r,n):t[0]==="cubic-bezier"&&(s=Ll(t[1],t[2],t[3],t[4])(vs._exponentialInterpolationRatio(i,1,r,n),1e-5)),s<0?s=0:s>1&&(s=1),s}static _exponentialInterpolationRatio(t,i,r,n){const s=n-r;if(s===0)return 0;const o=t-r;return i===1?o/s:(i**o-1)/(i**s-1)}}class IC{constructor(t,i,r){this.type=t,this.input=i,this.stops=r}static parse(t,i){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');const r=Ee(t[1],i,At);let n;const s=[];s.push([-1/0,Ee(t[2],i)]);for(let o=3;o<t.length;o+=2){const a=t[o];if(typeof a!="number")throw new Error('"step" requires stop inputs as literal numbers');if(s.length&&s[s.length-1][0]>=a)throw new Error('"step" requires strictly ascending stop inputs');const u=Ee(t[o+1],i);n||(n=u.type),s.push([a,u])}return new IC(n,r,s)}evaluate(t,i){const r=this.stops;if(r.length===1)return r[0][1].evaluate(t,i);const n=this.input.evaluate(t,i);let s=0;for(;++s<r.length&&!(n<r[s][0]););return this.stops[s-1][1].evaluate(t,i)}}class NC{constructor(t,i){this.type=t,this.output=i}static parse(t,i,r){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');const n=new w1e(i);for(let o=1;o<t.length-1;o+=2){const a=t[o];if(typeof a!="string")throw new Error(`"let" requires a string to define variable names - found ${a}`);n.add(a,Ee(t[o+1],i))}const s=Ee(t[t.length-1],n,r);return new NC(s.type,s)}evaluate(t,i){return this.output.evaluate(t,i)}}class RC{constructor(t,i){this.type=t,this.output=i}static parse(t,i,r){if(t.length!==2||typeof t[1]!="string")throw new Error('"var" requires just one literal string argument');const n=i.get(t[1]);if(!n)throw new Error(`${t[1]} must be defined before being used in a "var" expression`);return new RC(r||ba,n)}evaluate(t,i){return this.output.evaluate(t,i)}}class PC{constructor(t,i,r){this.type=t,this.index=i,this.array=r}static parse(t,i){if(t.length!==3)throw new Error('"at" expects 2 arguments');const r=Ee(t[1],i,At),n=Ee(t[2],i);return new PC(n.type.itemType,r,n)}evaluate(t,i){const r=this.index.evaluate(t,i),n=this.array.evaluate(t,i);if(r<0||r>=n.length)throw new Error('"at" index out of bounds');if(r!==Math.floor(r))throw new Error('"at" index must be an integer');return n[r]}}class _b{constructor(t,i){this.key=t,this.obj=i,this.type=ba}static parse(t,i){let r,n;switch(t.length){case 2:return r=Ee(t[1],i),new _b(r);case 3:return r=Ee(t[1],i),n=Ee(t[2],i),new _b(r,n);default:throw new Error('"get" expects 1 or 2 arguments')}}evaluate(t,i){const r=this.key.evaluate(t,i);return this.obj?this.obj.evaluate(t,i)[r]:t==null?void 0:t.values[r]}}class Sb{constructor(t,i){this.key=t,this.obj=i,this.type=xi}static parse(t,i){let r,n;switch(t.length){case 2:return r=Ee(t[1],i),new Sb(r);case 3:return r=Ee(t[1],i),n=Ee(t[2],i),new Sb(r,n);default:throw new Error('"has" expects 1 or 2 arguments')}}evaluate(t,i){const r=this.key.evaluate(t,i);return this.obj?r in this.obj.evaluate(t,i):!!(t!=null&&t.values[r])}}class $C{constructor(t,i){this.key=t,this.vals=i,this.type=xi}static parse(t,i){if(t.length!==3)throw new Error('"in" expects 2 arguments');return new $C(Ee(t[1],i),Ee(t[2],i))}evaluate(t,i){const r=this.key.evaluate(t,i);return this.vals.evaluate(t,i).includes(r)}}class Tb{constructor(t,i,r){this.item=t,this.array=i,this.from=r,this.type=At}static parse(t,i){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');const r=Ee(t[1],i),n=Ee(t[2],i);if(t.length===4){const s=Ee(t[3],i,At);return new Tb(r,n,s)}return new Tb(r,n)}evaluate(t,i){const r=this.item.evaluate(t,i),n=this.array.evaluate(t,i);if(this.from){const s=this.from.evaluate(t,i);if(s!==Math.floor(s))throw new Error('"index-of" index must be an integer');return n.indexOf(r,s)}return n.indexOf(r)}}class DC{constructor(t){this.arg=t,this.type=At}static parse(t,i){if(t.length!==2)throw new Error('"length" expects 2 arguments');const r=Ee(t[1],i);return new DC(r)}evaluate(t,i){const r=this.arg.evaluate(t,i);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Error('"length" expects string or array')}}class Eb{constructor(t,i,r,n){this.type=t,this.array=i,this.from=r,this.to=n}static parse(t,i){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');const r=Ee(t[1],i),n=Ee(t[2],i,At);if(n.type!==At)throw new Error('"slice" index must return a number');if(t.length===4){const s=Ee(t[3],i,At);if(s.type!==At)throw new Error('"slice" index must return a number');return new Eb(r.type,r,n,s)}return new Eb(r.type,r,n)}evaluate(t,i){const r=this.array.evaluate(t,i);if(!Array.isArray(r)&&typeof r!="string")throw new Error('"slice" input must be an array or a string');const n=this.from.evaluate(t,i);if(n<0||n>=r.length)throw new Error('"slice" index out of bounds');if(n!==Math.floor(n))throw new Error('"slice" index must be an integer');if(this.to){const s=this.to.evaluate(t,i);if(s<0||s>=r.length)throw new Error('"slice" index out of bounds');if(s!==Math.floor(s))throw new Error('"slice" index must be an integer');return r.slice(n,s)}return r.slice(n)}}class LC{constructor(){this.type=xi}static parse(t){if(t.length!==1)throw new Error('"has-id" expects no arguments');return new LC}evaluate(t,i){return t&&t.id!==void 0}}class ar{constructor(t,i){this.args=t,this.calculate=i,this.type=At}static parse(t,i,r){const n=t.slice(1).map(s=>Ee(s,i));return new ar(n,r)}evaluate(t,i){let r;return this.args&&(r=this.args.map(n=>n.evaluate(t,i))),this.calculate(r)}}class M1e extends ar{static parse(t,i){switch(t.length){case 2:return ar.parse(t,i,r=>-r[0]);case 3:return ar.parse(t,i,r=>r[0]-r[1]);default:throw new Error('"-" expects 1 or 2 arguments')}}}class C1e extends ar{static parse(t,i){return ar.parse(t,i,r=>{let n=1;for(const s of r)n*=s;return n})}}class I1e extends ar{static parse(t,i){if(t.length===3)return ar.parse(t,i,r=>r[0]/r[1]);throw new Error('"/" expects 2 arguments')}}class N1e extends ar{static parse(t,i){if(t.length===3)return ar.parse(t,i,r=>r[0]%r[1]);throw new Error('"%" expects 2 arguments')}}class R1e extends ar{static parse(t,i){if(t.length===3)return ar.parse(t,i,r=>r[0]**r[1]);throw new Error('"^" expects 1 or 2 arguments')}}class P1e extends ar{static parse(t,i){return ar.parse(t,i,r=>{let n=0;for(const s of r)n+=s;return n})}}class Tt{constructor(t,i){this.args=t,this.calculate=i,this.type=At}static parse(t,i){const r=t.slice(1).map(n=>Ee(n,i));return new Tt(r,Tt.ops[t[0]])}evaluate(t,i){let r;return this.args&&(r=this.args.map(n=>n.evaluate(t,i))),this.calculate(r)}}Tt.ops={abs:e=>Math.abs(e[0]),acos:e=>Math.acos(e[0]),asin:e=>Math.asin(e[0]),atan:e=>Math.atan(e[0]),ceil:e=>Math.ceil(e[0]),cos:e=>Math.cos(e[0]),e:()=>Math.E,floor:e=>Math.floor(e[0]),ln:e=>Math.log(e[0]),ln2:()=>Math.LN2,log10:e=>Math.log(e[0])/Math.LN10,log2:e=>Math.log(e[0])/Math.LN2,max:e=>Math.max(...e),min:e=>Math.min(...e),pi:()=>Math.PI,round:e=>Math.round(e[0]),sin:e=>Math.sin(e[0]),sqrt:e=>Math.sqrt(e[0]),tan:e=>Math.tan(e[0])};class OC{constructor(t){this.args=t,this.type=tn}static parse(t,i){return new OC(t.slice(1).map(r=>Ee(r,i)))}evaluate(t,i){return this.args.map(r=>r.evaluate(t,i)).join("")}}class hp{constructor(t,i){this.arg=t,this.calculate=i,this.type=tn}static parse(t,i){if(t.length!==2)throw new Error(`${t[0]} expects 1 argument`);const r=Ee(t[1],i);return new hp(r,hp.ops[t[0]])}evaluate(t,i){return this.calculate(this.arg.evaluate(t,i))}}hp.ops={downcase:e=>e.toLowerCase(),upcase:e=>e.toUpperCase()};class kC{constructor(t){this.args=t,this.type=xa}static parse(t,i){if(t.length!==4)throw new Error('"rgb" expects 3 arguments');const r=t.slice(1).map(n=>Ee(n,i));return new kC(r)}evaluate(t,i){const r=this._validate(this.args[0].evaluate(t,i)),n=this._validate(this.args[1].evaluate(t,i)),s=this._validate(this.args[2].evaluate(t,i));return new se({r,g:n,b:s})}_validate(t){if(typeof t!="number"||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}}class FC{constructor(t){this.args=t,this.type=xa}static parse(t,i){if(t.length!==5)throw new Error('"rgba" expects 4 arguments');const r=t.slice(1).map(n=>Ee(n,i));return new FC(r)}evaluate(t,i){const r=this._validate(this.args[0].evaluate(t,i)),n=this._validate(this.args[1].evaluate(t,i)),s=this._validate(this.args[2].evaluate(t,i)),o=this._validateAlpha(this.args[3].evaluate(t,i));return new se({r,g:n,b:s,a:o})}_validate(t){if(typeof t!="number"||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}_validateAlpha(t){if(typeof t!="number"||t<0||t>1)throw new Error(`${t}: invalid alpha color component`);return t}}class BC{constructor(t){this.color=t,this.type=h0(At,4)}static parse(t,i){if(t.length!==2)throw new Error('"to-rgba" expects 1 argument');const r=Ee(t[1],i);return new BC(r)}evaluate(t,i){return new se(this.color.evaluate(t,i)).toRgba()}}class mc{constructor(t,i){this.type=t,this.args=i}static parse(t,i){const r=t[0];if(t.length<2)throw new Error(`${r} expects at least one argument`);let n,s=1;if(r==="array"){if(t.length>2){switch(t[1]){case"string":n=tn;break;case"number":n=At;break;case"boolean":n=xi;break;default:throw new Error('"array" type argument must be string, number or boolean')}s++}else n=ba;let a;if(t.length>3){if(a=t[2],a!==null&&(typeof a!="number"||a<0||a!==Math.floor(a)))throw new Error('"array" length argument must be a positive integer literal');s++}n=h0(n,a)}else switch(r){case"string":n=tn;break;case"number":n=At;break;case"boolean":n=xi;break;case"object":n=jw}const o=[];for(;s<t.length;s++){const a=Ee(t[s],i);o.push(a)}return new mc(n,o)}evaluate(t,i){let r;for(const n of this.args){const s=n.evaluate(t,i);if(r=zw(s),gA(r,this.type))return s}throw new Error(`Expected ${dp(this.type)} but got ${dp(r)}`)}}class In{constructor(t,i){this.type=t,this.args=i}static parse(t,i){const r=t[0],n=In.types[r];if(n===xi||n===tn){if(t.length!==2)throw new Error(`${r} expects one argument`)}else if(t.length<2)throw new Error(`${r} expects at least one argument`);const s=[];for(let o=1;o<t.length;o++){const a=Ee(t[o],i);s.push(a)}return new In(n,s)}evaluate(t,i){if(this.type===xi)return Boolean(this.args[0].evaluate(t,i));if(this.type===tn)return vA(this.args[0].evaluate(t,i));if(this.type===At){for(const r of this.args){const n=Number(r.evaluate(t,i));if(!isNaN(n))return n}return null}if(this.type===xa){for(const r of this.args)try{const n=In.toColor(r.evaluate(t,i));if(n instanceof se)return n}catch{}return null}}static toBoolean(t){return Boolean(t)}static toString(t){return vA(t)}static toNumber(t){const i=Number(t);if(isNaN(i))throw new Error(`"${t}" is not a number`);return i}static toColor(t){if(t instanceof se)return t;if(typeof t=="string"){const i=se.fromString(t);if(i)return i;throw new Error(`"${t}" is not a color`)}if(Array.isArray(t))return se.fromArray(t);throw new Error(`"${t}" is not a color`)}}In.types={"to-boolean":xi,"to-color":xa,"to-number":At,"to-string":tn};class UC{constructor(t){this.val=t,this.type=zw(t)}static parse(t){if(t.length!==2)throw new Error('"literal" expects 1 argument');return new UC(t[1])}evaluate(t,i){return this.val}}class VC{constructor(t){this.arg=t,this.type=tn}static parse(t,i){if(t.length!==2)throw new Error('"typeof" expects 1 argument');return new VC(Ee(t[1],i))}evaluate(t,i){return dp(zw(this.arg.evaluate(t,i)))}}function Ee(e,t,i){const r=typeof e;if(r==="string"||r==="boolean"||r==="number"||e===null){if(i)switch(i.kind){case"string":r!=="string"&&(e=In.toString(e));break;case"number":r!=="number"&&(e=In.toNumber(e));break;case"color":e=In.toColor(e)}e=["literal",e]}if(!Array.isArray(e)||e.length===0)throw new Error("Expression must be a non empty array");const n=e[0];if(typeof n!="string")throw new Error("First element of expression must be a string");const s=sj[n];if(s===void 0)throw new Error(`Invalid expression operator "${n}"`);if(!s)throw new Error(`Unimplemented expression operator "${n}"`);return s.parse(e,t,i)}const sj={array:mc,boolean:mc,collator:null,format:null,image:null,literal:UC,number:mc,"number-format":null,object:mc,string:mc,"to-boolean":In,"to-color":In,"to-number":In,"to-string":In,typeof:VC,accumulated:null,"feature-state":null,"geometry-type":wC,id:bC,"line-progress":null,properties:_C,at:PC,get:_b,has:Sb,in:$C,"index-of":Tb,length:DC,slice:Eb,"!":SC,"!=":S1e,"<":T1e,"<=":E1e,"==":_1e,">":x1e,">=":A1e,all:TC,any:EC,case:AC,coalesce:MC,match:CC,within:null,interpolate:vs,"interpolate-hcl":vs,"interpolate-lab":vs,step:IC,let:NC,var:RC,concat:OC,downcase:hp,"is-supported-script":null,"resolved-locale":null,upcase:hp,rgb:kC,rgba:FC,"to-rgba":BC,"-":M1e,"*":C1e,"/":I1e,"%":N1e,"^":R1e,"+":P1e,abs:Tt,acos:Tt,asin:Tt,atan:Tt,ceil:Tt,cos:Tt,e:Tt,floor:Tt,ln:Tt,ln2:Tt,log10:Tt,log2:Tt,max:Tt,min:Tt,pi:Tt,round:Tt,sin:Tt,sqrt:Tt,tan:Tt,zoom:Hw,"heatmap-density":null,"has-id":LC,none:xC};class wr{constructor(t){this._expression=t}filter(t,i){if(!this._expression)return!0;try{return this._expression.evaluate(t,i)}catch(r){return console.log(r.message),!0}}static createFilter(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{const i=Ee(t,null,xi);return new wr(i)}catch(i){return console.log(i.message),null}}static isLegacyFilter(t){if(!Array.isArray(t)||t.length===0)return!0;switch(t[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return t.length===3&&typeof t[1]=="string"&&!Array.isArray(t[2]);case"in":return t.length>=3&&typeof t[1]=="string"&&!Array.isArray(t[2]);case"!in":case"none":case"!has":return!0;case"any":case"all":for(let i=1;i<t.length;i++)if(this.isLegacyFilter(t[i]))return!0;return!1;case"has":return t.length===2&&(t[1]==="$id"||t[1]==="$type");default:return!1}}static convertLegacyFilter(t){if(!Array.isArray(t)||t.length===0)return!0;const i=t[0];if(t.length===1)return i!=="any";switch(i){case"==":return wr.convertComparison("==",t[1],t[2]);case"!=":return wr.negate(wr.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return wr.convertComparison(i,t[1],t[2]);case"in":return wr.convertIn(t[1],t.slice(2));case"!in":return wr.negate(wr.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return wr.convertCombining(i,t.slice(1));case"has":return wr.convertHas(t[1]);case"!has":return wr.negate(wr.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}static convertComparison(t,i,r){switch(i){case"$type":return[t,["geometry-type"],r];case"$id":return[t,["id"],r];default:return[t,["get",i],r]}}static convertIn(t,i){switch(t){case"$type":return["in",["geometry-type"],["literal",i]];case"$id":return["in",["id"],["literal",i]];default:return["in",["get",t],["literal",i]]}}static convertHas(t){switch(t){case"$type":return!0;case"$id":return["has-id"];default:return["has",t]}}static convertCombining(t,i){return[t].concat(i.map(this.convertLegacyFilter))}static negate(t){return["!",t]}}class xb{constructor(t,i){let r;switch(this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":r=!0;break;case"array":r=t.value==="number";break;default:r=!1}if(i==null&&(i=t.default),Array.isArray(i)&&i.length>0&&sj[i[0]]){const s={number:At,color:xa,string:tn,boolean:xi,enum:tn};try{const o=t.type==="array"?h0(s[t.value]||ba,t.length):s[t.type],a=Ee(i,null,o);this.getValue=this._buildExpression(a,t),this.isDataDriven=!0,a instanceof vs&&a.input instanceof Hw&&(this.interpolator=a)}catch(o){console.log(o.message),this.getValue=this._buildSimple(t.default)}return}r&&i.type==="interval"&&(r=!1);const n=i&&i.stops&&i.stops.length>0;if(n)for(const s of i.stops)s[1]=this._validate(s[1],t);if(this.isDataDriven=!!i&&!!i.property,this.isDataDriven)if(i.default!==void 0&&(i.default=this._validate(i.default,t)),n)switch(i.type){case"identity":this.getValue=this._buildIdentity(i,t);break;case"categorical":this.getValue=this._buildCategorical(i,t);break;default:this.getValue=r?this._buildInterpolate(i,t):this._buildInterval(i,t)}else this.getValue=this._buildIdentity(i,t);else n?this.getValue=r?this._buildZoomInterpolate(i):this._buildZoomInterval(i):(i=this._validate(i,t),this.getValue=this._buildSimple(i))}_validate(t,i){if(i.type==="number"){if(t<i.minimum)return i.minimum;if(t>i.maximum)return i.maximum}else i.type==="color"?t=xb._parseColor(t):i.type==="enum"?typeof t=="string"&&(t=i.values.indexOf(t)):i.type==="array"&&i.value==="enum"?t=t.map(r=>typeof r=="string"?i.values.indexOf(r):r):i.type==="string"&&(t=vA(t));return t}_buildSimple(t){return()=>t}_buildExpression(t,i){return(r,n)=>{try{const s=t.evaluate(n,r);return s===void 0?i.default:this._validate(s,i)}catch(s){return console.log(s.message),i.default}}}_buildIdentity(t,i){return(r,n)=>{let s;return n&&(s=n.values[t.property]),s!==void 0&&(s=this._validate(s,i)),s!=null?s:t.default!==void 0?t.default:i.default}}_buildCategorical(t,i){return(r,n)=>{let s;return n&&(s=n.values[t.property]),s=this._categorical(s,t.stops),s!==void 0?s:t.default!==void 0?t.default:i.default}}_buildInterval(t,i){return(r,n)=>{let s;return n&&(s=n.values[t.property]),typeof s=="number"?this._interval(s,t.stops):t.default!==void 0?t.default:i.default}}_buildInterpolate(t,i){return(r,n)=>{let s;return n&&(s=n.values[t.property]),typeof s=="number"?this._interpolate(s,t.stops,t.base||1):t.default!==void 0?t.default:i.default}}_buildZoomInterpolate(t){return i=>this._interpolate(i,t.stops,t.base||1)}_buildZoomInterval(t){return i=>this._interval(i,t.stops)}_categorical(t,i){const r=i.length;for(let n=0;n<r;n++)if(i[n][0]===t)return i[n][1]}_interval(t,i){const r=i.length;let n=0;for(let s=0;s<r&&i[s][0]<=t;s++)n=s;return i[n][1]}_interpolate(t,i,r){let n,s;const o=i.length;for(let a=0;a<o;a++){const u=i[a];if(!(u[0]<=t)){s=u;break}n=u}if(n&&s){const a=s[0]-n[0],u=t-n[0],c=r===1?u/a:(r**u-1)/(r**a-1);if(Array.isArray(n[1])){const h=n[1],f=s[1],y=[];for(let m=0;m<h.length;m++)y.push(Ki(h[m],f[m],c));return y}return Ki(n[1],s[1],c)}return n?n[1]:s?s[1]:void 0}static _isEmpty(t){for(const i in t)if(t.hasOwnProperty(i))return!1;return!0}static _parseColor(t){return Array.isArray(t)?t:(typeof t=="string"&&(t=new se(t)),t instanceof se&&!this._isEmpty(t)?se.toUnitRGBA(t):void 0)}}const _xe=1e-30,Sxe=4294967295,Txe=512,Exe=8,xxe=10,Axe=29,Mxe=24,Cxe=8,Ixe={metrics:{width:15,height:17,left:0,top:-7,advance:14}},Nxe=0,Rxe=0,Pxe=0,$xe=1,Dxe=2,Lxe=3,Oxe=4,kxe=5,Fxe=6,Bxe=12,Uxe=5,Vxe=6,jxe=5,zxe=6,Hxe=0,Gxe=1,qxe=2,Wxe=3,Yxe=4,Kxe=2,Zxe=1,Jxe=2,Xxe=4,$1e=1.05,Qxe=3,eAe=5,tAe=6,iAe=1.15,rAe=2,nAe=8,sAe=500,oAe=10,aAe=1024,lAe=2,uAe=0,cAe=1,dAe=4,hAe=8,pAe=16,fAe=4,yAe=1,mAe=4;class p0{constructor(t,i,r,n){switch(this.type=t,this.typeName=i.type,this.id=i.id,this.source=i.source,this.sourceLayer=i["source-layer"],this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,this.filter=i.filter,this.layout=i.layout,this.paint=i.paint,this.z=r,this.uid=n,t){case Dt.BACKGROUND:this._layoutDefinition=Bt.backgroundLayoutDefinition,this._paintDefinition=Bt.backgroundPaintDefinition;break;case Dt.FILL:this._layoutDefinition=Bt.fillLayoutDefinition,this._paintDefinition=Bt.fillPaintDefinition;break;case Dt.LINE:this._layoutDefinition=Bt.lineLayoutDefinition,this._paintDefinition=Bt.linePaintDefinition;break;case Dt.SYMBOL:this._layoutDefinition=Bt.symbolLayoutDefinition,this._paintDefinition=Bt.symbolPaintDefinition;break;case Dt.CIRCLE:this._layoutDefinition=Bt.circleLayoutDefinition,this._paintDefinition=Bt.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return this._featureFilter!==void 0?this._featureFilter:this._featureFilter=wr.createFilter(this.filter)}getLayoutProperty(t){return this._layoutProperties[t]}getPaintProperty(t){return this._paintProperties[t]}getLayoutValue(t,i,r){let n;const s=this._layoutProperties[t];return s&&(n=s.getValue(i,r)),n===void 0&&(n=this._layoutDefinition[t].default),n}getPaintValue(t,i,r){let n;const s=this._paintProperties[t];return s&&(n=s.getValue(i,r)),n===void 0&&(n=this._paintDefinition[t].default),n}isPainterDataDriven(){const t=this._paintProperties;if(t){for(const i in t)if(t[i].isDataDriven)return!0}return!1}_parseLayout(t){const i={};for(const r in t){const n=this._layoutDefinition[r];n&&(i[r]=new xb(n,t[r]))}return i}_parsePaint(t){const i={};for(const r in t){const n=this._paintDefinition[r];n&&(i[r]=new xb(n,t[r]))}return i}computeAttributesKey(t,i,r,n){let s=0,o=0;for(const a of i){let u=3;if(!a||a!==n){const c=r[a],{isLayout:h,isOptional:f}=c,y=h?this.getLayoutProperty(a):this.getPaintProperty(a);u=y!=null&&y.interpolator?2:y!=null&&y.isDataDriven?1:f&&!y?3:0}o|=u<<s,s+=2}return o<<3|t}}class TD extends p0{constructor(t,i,r,n){super(t,i,r,n),this.backgroundMaterial=new uo(this.computeAttributesKey(Ea.BACKGROUND,uo.ATTRIBUTES,uo.ATTRIBUTES_INFO))}}class ED extends p0{constructor(t,i,r,n){super(t,i,r,n);const s=this.getPaintProperty("fill-color"),o=this.getPaintProperty("fill-opacity"),a=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=s==null?void 0:s.isDataDriven,this.hasDataDrivenOpacity=o==null?void 0:o.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||(a==null?void 0:a.isDataDriven);const u=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!u,this.hasDataDrivenOutlineColor=u==null?void 0:u.isDataDriven,this.hasDataDrivenOutline=u?u.isDataDriven:!!s&&s.isDataDriven,this.hasDataDrivenOutline=(u?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new ho(this.computeAttributesKey(Ea.FILL,ho.ATTRIBUTES,ho.ATTRIBUTES_INFO)),this.outlineMaterial=new Bi(this.computeAttributesKey(Ea.OUTLINE,this.outlineUsesFillColor?Bi.ATTRIBUTES_FILL:Bi.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?Bi.ATTRIBUTES_INFO_FILL:Bi.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}}class xD extends p0{constructor(t,i,r,n){var o,a,u,c,h,f,y,m,g;super(t,i,r,n);const s=this.getPaintProperty("line-pattern");if(this.lineMaterial=new po(this.computeAttributesKey(Ea.LINE,po.ATTRIBUTES,po.ATTRIBUTES_INFO,s?"line-dasharray":"")),this.hasDataDrivenLine=((o=this.getPaintProperty("line-blur"))==null?void 0:o.isDataDriven)||((a=this.getPaintProperty("line-color"))==null?void 0:a.isDataDriven)||((u=this.getPaintProperty("line-gap-width"))==null?void 0:u.isDataDriven)||((c=this.getPaintProperty("line-offset"))==null?void 0:c.isDataDriven)||((h=this.getPaintProperty("line-opacity"))==null?void 0:h.isDataDriven)||((f=this.getPaintProperty("line-pattern"))==null?void 0:f.isDataDriven)||((y=this.getPaintProperty("line-dasharray"))==null?void 0:y.isDataDriven)||((m=this.getLayoutProperty("line-cap"))==null?void 0:m.isDataDriven)||((g=this.getPaintProperty("line-width"))==null?void 0:g.isDataDriven),this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const v=this.getPaintProperty("line-width");if(!v||typeof v=="number"&&.5*v<$1e){const b=this.getPaintProperty("line-offset");(!b||typeof b=="number"&&b===0)&&(this.canUseThinTessellation=!0)}}}getDashKey(t,i){let r;switch(i){case Vh.BUTT:r="Butt";break;case Vh.ROUND:r="Round";break;case Vh.SQUARE:r="Square";break;default:r="Butt"}return`dasharray-[${t.toString()}]-${r}`}}class AD extends p0{constructor(t,i,r,n){var s,o,a,u,c,h,f,y,m,g,v,b;super(t,i,r,n),this.iconMaterial=new Xl(this.computeAttributesKey(Ea.ICON,Xl.ATTRIBUTES,Xl.ATTRIBUTES_INFO)),this.textMaterial=new Ql(this.computeAttributesKey(Ea.TEXT,Ql.ATTRIBUTES,Ql.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=((s=this.getPaintProperty("icon-color"))==null?void 0:s.isDataDriven)||((o=this.getPaintProperty("icon-halo-blur"))==null?void 0:o.isDataDriven)||((a=this.getPaintProperty("icon-halo-color"))==null?void 0:a.isDataDriven)||((u=this.getPaintProperty("icon-halo-width"))==null?void 0:u.isDataDriven)||((c=this.getPaintProperty("icon-opacity"))==null?void 0:c.isDataDriven)||((h=this.getLayoutProperty("icon-size"))==null?void 0:h.isDataDriven),this.hasDataDrivenText=((f=this.getPaintProperty("text-color"))==null?void 0:f.isDataDriven)||((y=this.getPaintProperty("text-halo-blur"))==null?void 0:y.isDataDriven)||((m=this.getPaintProperty("text-halo-color"))==null?void 0:m.isDataDriven)||((g=this.getPaintProperty("text-halo-width"))==null?void 0:g.isDataDriven)||((v=this.getPaintProperty("text-opacity"))==null?void 0:v.isDataDriven)||((b=this.getLayoutProperty("text-size"))==null?void 0:b.isDataDriven)}}class MD extends p0{constructor(t,i,r,n){super(t,i,r,n),this.circleMaterial=new co(this.computeAttributesKey(Ea.CIRCLE,co.ATTRIBUTES,co.ATTRIBUTES_INFO))}}class gAe{constructor(t,i,r){let n;this.allowOverlap=t.getLayoutValue("icon-allow-overlap",i),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",i),this.keepUpright=t.getLayoutValue("icon-keep-upright",i),this.optional=t.getLayoutValue("icon-optional",i),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",i),this.rotationAlignment===lo.AUTO&&(this.rotationAlignment=r?lo.MAP:lo.VIEWPORT),n=t.getLayoutProperty("icon-anchor"),n!=null&&n.isDataDriven?this._anchorProp=n:this.anchor=t.getLayoutValue("icon-anchor",i),n=t.getLayoutProperty("icon-offset"),n!=null&&n.isDataDriven?this._offsetProp=n:this.offset=t.getLayoutValue("icon-offset",i),n=t.getLayoutProperty("icon-padding"),n!=null&&n.isDataDriven?this._paddingProp=n:this.padding=t.getLayoutValue("icon-padding",i),n=t.getLayoutProperty("icon-rotate"),n!=null&&n.isDataDriven?this._rotateProp=n:this.rotate=t.getLayoutValue("icon-rotate",i),n=t.getLayoutProperty("icon-size"),n!=null&&n.isDataDriven?this._sizeProp=n:this.size=t.getLayoutValue("icon-size",i)}update(t,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,i))}}class vAe{constructor(t,i,r){let n;this.allowOverlap=t.getLayoutValue("text-allow-overlap",i),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",i),this.keepUpright=t.getLayoutValue("text-keep-upright",i),this.optional=t.getLayoutValue("text-optional",i),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",i),this.rotationAlignment===lo.AUTO&&(this.rotationAlignment=r?lo.MAP:lo.VIEWPORT),n=t.getLayoutProperty("text-anchor"),n!=null&&n.isDataDriven?this._anchorProp=n:this.anchor=t.getLayoutValue("text-anchor",i),n=t.getLayoutProperty("text-justify"),n!=null&&n.isDataDriven?this._justifyProp=n:this.justify=t.getLayoutValue("text-justify",i),n=t.getLayoutProperty("text-letter-spacing"),n!=null&&n.isDataDriven?this._letterSpacingProp=n:this.letterSpacing=t.getLayoutValue("text-letter-spacing",i),n=t.getLayoutProperty("text-line-height"),n!=null&&n.isDataDriven?this._lineHeightProp=n:this.lineHeight=t.getLayoutValue("text-line-height",i),n=t.getLayoutProperty("text-max-angle"),n!=null&&n.isDataDriven?this._maxAngleProp=n:this.maxAngle=t.getLayoutValue("text-max-angle",i),n=t.getLayoutProperty("text-max-width"),n!=null&&n.isDataDriven?this._maxWidthProp=n:this.maxWidth=t.getLayoutValue("text-max-width",i),n=t.getLayoutProperty("text-offset"),n!=null&&n.isDataDriven?this._offsetProp=n:this.offset=t.getLayoutValue("text-offset",i),n=t.getLayoutProperty("text-padding"),n!=null&&n.isDataDriven?this._paddingProp=n:this.padding=t.getLayoutValue("text-padding",i),n=t.getLayoutProperty("text-rotate"),n!=null&&n.isDataDriven?this._rotateProp=n:this.rotate=t.getLayoutValue("text-rotate",i),n=t.getLayoutProperty("text-size"),n!=null&&n.isDataDriven?this._sizeProp=n:this.size=t.getLayoutValue("text-size",i),n=t.getLayoutProperty("text-writing-mode"),n!=null&&n.isDataDriven?this._writingModeProp=n:this.writingMode=t.getLayoutValue("text-writing-mode",i)}update(t,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,i)),this._justifyProp&&(this.justify=this._justifyProp.getValue(t,i)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(t,i)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(t,i)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(t,i)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(t,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,i)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(t,i))}}class _h{constructor(t){if(this._style=t,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,t.layers||(t.layers=[]),this.version=parseFloat(t.version),this.layers=t.layers.map((i,r,n)=>this._create(i,r,n)).filter(i=>!!i),this.layers){let i;for(let r=0;r<this.layers.length;r++)i=this.layers[r],this._layerByName[i.id]=i,this._uidToLayer.set(i.uid,i),i.type===Dt.BACKGROUND&&this.backgroundBucketIds.push(i.id)}this._identifyRefLayers()}isPainterDataDriven(t){const i=this._layerByName[t];return!!i&&i.isPainterDataDriven()}getStyleLayerId(t){return t>=this.layers.length?null:this.layers[t].id}getStyleLayerByUID(t){var i;return(i=this._uidToLayer.get(t))!=null?i:null}getStyleLayerIndex(t){const i=this._layerByName[t];return i?this.layers.indexOf(i):-1}setStyleLayer(t,i){if(!t||!t.id)return;const r=this._style;i!=null&&i>=this.layers.length&&(i=this.layers.length-1);let n,s=!0;const o=this._layerByName[t.id];if(o){const a=this.layers.indexOf(o);i||(i=a),i===a?(s=!1,n=_h._recreateLayer(t,o),this.layers[i]=n,r.layers[i]=t):(this.layers.splice(a,1),r.layers.splice(a,1),n=this._create(t,i,this.layers),this.layers.splice(i,0,n),r.layers.splice(i,0,t))}else n=this._create(t,i,this.layers),!i||i>=this.layers.length?(this.layers.push(n),r.layers.push(t)):(this.layers.splice(i,0,n),r.layers.splice(i,0,t));this._layerByName[t.id]=n,this._uidToLayer.set(n.uid,n),s&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(t){const i=this._layerByName[t];return i?{type:i.typeName,id:i.id,source:i.source,"source-layer":i.sourceLayer,minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:i.layout,paint:i.paint}:null}deleteStyleLayer(t){const i=this._layerByName[t];if(i){delete this._layerByName[t],this._uidToLayer.delete(i.uid);const r=this.layers.indexOf(i);this.layers.splice(r,1),this._style.layers.splice(r,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(t){return this._layerByName[t]}getLayoutProperties(t){const i=this._layerByName[t];return i?i.layout:null}getPaintProperties(t){const i=this._layerByName[t];return i?i.paint:null}setPaintProperties(t,i){const r=this._layerByName[t];if(!r)return;const n={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:i},s=_h._recreateLayer(n,r),o=this.layers.indexOf(r);this.layers[o]=s,this._style.layers[o].paint=i,this._layerByName[r.id]=s,this._uidToLayer.set(r.uid,s)}setLayoutProperties(t,i){const r=this._layerByName[t];if(!r)return;const n={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:i,paint:r.paint},s=_h._recreateLayer(n,r),o=this.layers.indexOf(r);this.layers[o]=s,this._style.layers[o].layout=i,this._layerByName[r.id]=s,this._uidToLayer.set(r.uid,s)}setStyleLayerVisibility(t,i){const r=this._layerByName[t];if(!r)return;const n=r.layout||{};n.visibility=i;const s={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:n,paint:r.paint},o=_h._recreateLayer(s,r),a=this.layers.indexOf(r);this.layers[a]=o,this._style.layers[a].layout=n,this._layerByName[r.id]=o,this._uidToLayer.set(r.uid,o)}getStyleLayerVisibility(t){var r,n;const i=this._layerByName[t];return i?(n=(r=i.layout)==null?void 0:r.visibility)!=null?n:"visible":"none"}_recomputeZValues(){const t=this.layers,i=1/(t.length+1);for(let r=0;r<t.length;r++)t[r].z=1-(1+r)*i}_identifyRefLayers(){const t=[],i=[];let r=0;for(const n of this.layers){const s=n.layout;if(n.type===Dt.FILL){const o=n;let a=n.source+"|"+n.sourceLayer;a+="|"+(s==null?void 0:s.visibility),a+="|"+n.minzoom,a+="|"+n.maxzoom,a+="|"+JSON.stringify(n.filter),(o.hasDataDrivenFill||o.hasDataDrivenOutline)&&(a+="|"+r),t.push({key:a,layer:n})}else if(n.type===Dt.LINE){const o=n;let a=n.source+"|"+n.sourceLayer;a+="|"+(s==null?void 0:s.visibility),a+="|"+n.minzoom,a+="|"+n.maxzoom,a+="|"+JSON.stringify(n.filter),a+="|"+(s!==void 0?s["line-cap"]:""),a+="|"+(s!==void 0?s["line-join"]:""),o.hasDataDrivenLine&&(a+="|"+r),i.push({key:a,layer:n})}++r}this._assignRefLayers(t),this._assignRefLayers(i)}_assignRefLayers(t){let i,r;t.sort((s,o)=>s.key<o.key?-1:s.key>o.key?1:0);const n=t.length;for(let s=0;s<n;s++){const o=t[s];if(o.key===i)o.layer.refLayerId=r;else if(i=o.key,r=o.layer.id,o.layer.type===Dt.FILL){if(!o.layer.getPaintProperty("fill-outline-color"))for(let a=s+1;a<n;a++){const u=t[a];if(u.key!==i)break;if(u.layer.getPaintProperty("fill-outline-color")){t[s]=u,t[a]=o,r=u.layer.id;break}}}else if(o.layer.type===Dt.LINE){let a=o.layer;for(let u=s+1;u<n;u++){const c=t[u];if(c.key!==i)break;const h=c.layer;(a.canUseThinTessellation&&!h.canUseThinTessellation||!a.canUseThinTessellation&&(h.getPaintProperty("line-pattern")||h.getPaintProperty("line-dasharray")))&&(a=h,t[s]=c,t[u]=o,r=c.layer.id)}}}}_create(t,i,r){const n=1-(1+i)*(1/(r.length+1)),s=this._runningId++;switch(t.type){case"background":return new TD(Dt.BACKGROUND,t,n,s);case"fill":return new ED(Dt.FILL,t,n,s);case"line":return new xD(Dt.LINE,t,n,s);case"symbol":return new AD(Dt.SYMBOL,t,n,s);case"raster":console.warn(`Unsupported vector tile raster layer ${t.id}`);case"circle":return new MD(Dt.CIRCLE,t,n,s)}}static _recreateLayer(t,i){switch(t.type){case"background":return new TD(Dt.BACKGROUND,t,i.z,i.uid);case"fill":return new ED(Dt.FILL,t,i.z,i.uid);case"line":return new xD(Dt.LINE,t,i.z,i.uid);case"symbol":return new AD(Dt.SYMBOL,t,i.z,i.uid);case"raster":console.warn(`Unsupported vector tile raster layer ${t.id}`);case"circle":return new MD(Dt.CIRCLE,t,i.z,i.uid)}}}let ot=class extends jM(GM(Kge(gB(HM(MB(zM(hB(Rw(Jh))))))))){constructor(...e){super(...e),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.symbolCollisionBoxesVisible=!1,this.path=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}destroy(){if(this.sourceNameToSource)for(const e of Object.values(this.sourceNameToSource))e==null||e.destroy();this._spriteSourceMap.clear()}async prefetchResources(e){await this.loadSpriteSource(globalThis.devicePixelRatio||1,e)}load(e){const t=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},e).catch(Gl).then(async()=>{if(!this.portalItem||!this.portalItem.id)return;const i=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await ze(i,{...e,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:i},l1e(this.portalItem))}).catch(Gl).then(()=>this._loadStyle(e));return this.addResolvingPromise(t),Promise.resolve(this)}get attributionDataUrl(){const e=this.currentStyleInfo,t=e&&e.serviceUrl&&ut(e.serviceUrl);if(!t)return null;const i=this._getDefaultAttribution(t.path);return i?ya(i,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const e=this.primarySource;return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){var e;return((e=this.primarySource)==null?void 0:e.fullExtent)||null}get parsedUrl(){return this.serviceUrl?ut(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(e,t){e&&Dn(e)&&(e=`https:${e}`);const i=d1e(e);t.styleUrl=I3(e,i)}get tileInfo(){var i;const e=[];for(const r in this.sourceNameToSource)e.push(this.sourceNameToSource[r]);let t=((i=this.primarySource)==null?void 0:i.tileInfo)||new ca;if(e.length>1)for(let r=0;r<e.length;r++)h1e(t,e[r].tileInfo)&&(t=p1e(t,e[r].tileInfo));return t}readVersion(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)}async loadSpriteSource(e=1,t){var i;if(!this._spriteSourceMap.has(e)){const r=oA("2d").maxTextureSize,n=(i=this.currentStyleInfo)!=null&&i.spriteUrl?ya(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,s=new LP(n,e,r,this.currentStyleInfo.spriteFormat);await s.load(t),this._spriteSourceMap.set(e,s)}return this._spriteSourceMap.get(e)}async setSpriteSource(e,t="png",i=1,r){const n=oA("2d").maxTextureSize,s=e?ya(e,{...this.customParameters,token:this.apiKey}):null;if(!s)return null;const o=new LP(s,i,n,t);try{return await o.load(r),this._spriteSourceMap.clear(),this._spriteSourceMap.set(i,o),this.currentStyleInfo.spriteUrl=s,this.emit("spriteSource-change",{spriteSource:o}),o}catch(a){Gl(a)}return null}async loadStyle(e,t){var r;const i=e||this.style||this.url;return this._loadingTask&&typeof i=="string"&&this.url===i||((r=this._loadingTask)==null||r.abort(),this._loadingTask=LA(n=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(i,{signal:n})),t)),this._loadingTask.promise}getStyleLayerId(e){return this.styleRepository.getStyleLayerId(e)}getStyleLayerIndex(e){return this.styleRepository.getStyleLayerIndex(e)}getPaintProperties(e){return $(this.styleRepository.getPaintProperties(e))}setPaintProperties(e,t){const i=this.styleRepository.isPainterDataDriven(e);this.styleRepository.setPaintProperties(e,t);const r=this.styleRepository.isPainterDataDriven(e);this.emit("paint-change",{layer:e,paint:t,isDataDriven:i||r})}getStyleLayer(e){return $(this.styleRepository.getStyleLayer(e))}setStyleLayer(e,t){this.styleRepository.setStyleLayer(e,t),this.emit("style-layer-change",{layer:e,index:t})}deleteStyleLayer(e){this.styleRepository.deleteStyleLayer(e),this.emit("delete-style-layer",{layer:e})}getLayoutProperties(e){return $(this.styleRepository.getLayoutProperties(e))}setLayoutProperties(e,t){this.styleRepository.setLayoutProperties(e,t),this.emit("layout-change",{layer:e,layout:t})}setStyleLayerVisibility(e,t){this.styleRepository.setStyleLayerVisibility(e,t),this.emit("style-layer-visibility-change",{layer:e,visibility:t})}getStyleLayerVisibility(e){return this.styleRepository.getStyleLayerVisibility(e)}write(e,t){return(t==null?void 0:t.origin)&&!this.styleUrl?(t.messages&&t.messages.push(new P("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(e,t)}getTileUrl(e,t,i){return null}async _getSourceAndStyle(e,t){if(!e)throw new Error("invalid style!");const i=await n1e(e,{...t,query:{...this.customParameters,token:this.apiKey}});i.spriteFormat==="webp"&&(await Zge("lossy")||(i.spriteFormat="png")),this._set("currentStyleInfo",{...i}),typeof e=="string"?(this.url=e,this.style=null):(this.url=null,this.style=e),this._set("sourceNameToSource",i.sourceNameToSource),this._set("primarySource",i.sourceNameToSource[i.primarySourceName]),this._set("styleRepository",new _h(i.style)),this.read(i.layerDefinition,{origin:"service"}),this.emit("load-style")}_getDefaultAttribution(e){const t=e.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),i=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!t)return;const r=t[2]&&t[2].toLowerCase();if(!r)return;const n=t[1]||"";for(const s of i)if(s.toLowerCase().includes(r))return Jr(`//static.arcgis.com/attribution/Vector${n}/${s}`)}async _loadStyle(e){var t,i;return(i=(t=this._loadingTask)==null?void 0:t.promise)!=null?i:this.loadStyle(null,e)}};l([d({readOnly:!0})],ot.prototype,"attributionDataUrl",null),l([d({type:["show","hide"]})],ot.prototype,"listMode",void 0),l([d({json:{read:!0,write:!0}})],ot.prototype,"blendMode",void 0),l([d({readOnly:!0,json:{read:!1}})],ot.prototype,"capabilities",null),l([d({readOnly:!0})],ot.prototype,"currentStyleInfo",void 0),l([d({json:{read:!1},readOnly:!0,type:Ue})],ot.prototype,"fullExtent",null),l([d()],ot.prototype,"style",void 0),l([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ot.prototype,"isReference",void 0),l([d({type:["VectorTileLayer"]})],ot.prototype,"operationalLayerType",void 0),l([d({readOnly:!0})],ot.prototype,"parsedUrl",null),l([d({readOnly:!0})],ot.prototype,"serviceUrl",null),l([d({type:we,readOnly:!0})],ot.prototype,"spatialReference",null),l([d({readOnly:!0})],ot.prototype,"styleRepository",void 0),l([d({readOnly:!0})],ot.prototype,"sourceNameToSource",void 0),l([d({readOnly:!0})],ot.prototype,"primarySource",void 0),l([d({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],ot.prototype,"styleUrl",null),l([te(["portal-item","web-document"],"styleUrl")],ot.prototype,"writeStyleUrl",null),l([d({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:ca})],ot.prototype,"tileInfo",null),l([d({json:{read:!1},readOnly:!0,value:"vector-tile"})],ot.prototype,"type",void 0),l([d({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],ot.prototype,"url",void 0),l([d({readOnly:!0})],ot.prototype,"version",void 0),l([Z("version",["version","currentVersion"])],ot.prototype,"readVersion",null),l([d({type:Boolean})],ot.prototype,"symbolCollisionBoxesVisible",void 0),l([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ot.prototype,"path",void 0),ot=l([S("esri.layers.VectorTileLayer")],ot);const J1=ot,bAe=Object.freeze(Object.defineProperty({__proto__:null,default:J1},Symbol.toStringTag,{value:"Module"})),D1e=8,L1e="https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf",O1e={esri:{type:"vector",maxzoom:16,url:"https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer",attribution:"Esri, HERE, Garmin, FAO, NOAA, USGS, \xA9 OpenStreetMap contributors, and the GIS User Community",copyrightText:"Esri, HERE, Garmin, FAO, NOAA, USGS, \xA9 OpenStreetMap contributors, and the GIS User Community"}},k1e=[{id:"background",type:"background",paint:{"background-color":"#cfd3d4"},layout:{}},{id:"Land",type:"fill",source:"esri","source-layer":"Land",filter:["in","_symbol",0,1],minzoom:0,layout:{},paint:{"fill-color":{stops:[[0,"#f4f4f4"],[7,"#efefef"]]}}},{id:"Urban area",type:"fill",source:"esri","source-layer":"Urban area",minzoom:5,maxzoom:15,layout:{},paint:{"fill-color":{stops:[[5,"#e5e8e7"],[10,"#ECEDEC"]]}}},{id:"Openspace or forest",type:"fill",source:"esri","source-layer":"Openspace or forest",minzoom:12,layout:{},paint:{"fill-color":{stops:[[6,"#ECEEEA"],[11,"#e4e8e4"]]},"fill-outline-color":"#E7EAE6"}},{id:"Admin0 forest or park",type:"fill",source:"esri","source-layer":"Admin0 forest or park",minzoom:7,layout:{},paint:{"fill-color":{stops:[[6,"#ECEEEA"],[11,"#e4e8e4"]]},"fill-outline-color":"#E7EAE6"}},{id:"Admin1 forest or park",type:"fill",source:"esri","source-layer":"Admin1 forest or park",minzoom:8,layout:{},paint:{"fill-color":{stops:[[6,"#ECEEEA"],[11,"#e4e8e4"]]},"fill-outline-color":"#E7EAE6"}},{id:"Zoo",type:"fill",source:"esri","source-layer":"Zoo",minzoom:12,layout:{},paint:{"fill-color":"#e4e8e4"}},{id:"Airport/Airport property",type:"fill",source:"esri","source-layer":"Airport",filter:["==","_symbol",1],minzoom:9,layout:{},paint:{"fill-color":{stops:[[11,"#edede9"],[15,"#efefef"]]}}},{id:"Airport/Airport runway",type:"fill",source:"esri","source-layer":"Airport",filter:["==","_symbol",0],minzoom:11,layout:{},paint:{"fill-color":"#e1e2dd"}},{id:"Pedestrian",type:"fill",source:"esri","source-layer":"Pedestrian",minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1"}},{id:"Park or farming",type:"fill",source:"esri","source-layer":"Park or farming",minzoom:12,layout:{},paint:{"fill-color":"#e4e8e4"}},{id:"Beach",type:"fill",source:"esri","source-layer":"Beach",minzoom:13,layout:{},paint:{"fill-pattern":"Special area of interest/Sand"}},{id:"Special area of interest/Garden path",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",12],minzoom:14,layout:{visibility:"none"},paint:{"fill-color":"#f7f7f7","fill-outline-color":"#EBE8E8"}},{id:"Special area of interest/Parking",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",15],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1"}},{id:"Special area of interest/Green openspace",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",11],minzoom:14,layout:{},paint:{"fill-color":"#e5eae5"}},{id:"Special area of interest/Grass",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",8],minzoom:14,layout:{},paint:{"fill-color":"#e6eae6"}},{id:"Special area of interest/Baseball field or other grounds",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",1],minzoom:14,layout:{},paint:{"fill-color":"#E2E5E2"}},{id:"Special area of interest/Groundcover",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",13],minzoom:14,layout:{},paint:{"fill-pattern":"Special area of interest/Groundcover","fill-opacity":.5}},{id:"Special area of interest/Field or court exterior",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",5],minzoom:14,layout:{},paint:{"fill-color":"#ECEEEC"}},{id:"Special area of interest/Football field or court",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",4],minzoom:14,layout:{},paint:{"fill-color":"#E2E5E2","fill-outline-color":"#efefef"}},{id:"Special area of interest/Hardcourt",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",10],minzoom:14,layout:{},paint:{"fill-color":"#d3d3d3","fill-outline-color":"#efefef"}},{id:"Special area of interest/Mulch or dirt",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",14],minzoom:14,layout:{},paint:{"fill-color":"#eaeaea"}},{id:"Special area of interest/Athletic track",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",0],minzoom:14,layout:{},paint:{"fill-color":"#e2e2e2","fill-outline-color":"#f2f2f2"}},{id:"Special area of interest/Sand",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",6],minzoom:14,layout:{},paint:{"fill-pattern":"Special area of interest/Sand"}},{id:"Special area of interest/Rock or gravel",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",16],minzoom:14,layout:{},paint:{"fill-pattern":"Special area of interest/Rock or gravel"}},{id:"Special area of interest/Water",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",7],minzoom:15,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water line small scale",type:"line",source:"esri","source-layer":"Water line small scale",minzoom:1,maxzoom:5,layout:{"line-join":"round",visibility:"none"},paint:{"line-color":"#d6dadb","line-width":.5}},{id:"Water line medium scale",type:"line",source:"esri","source-layer":"Water line medium scale",minzoom:6,maxzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#d6dadb","line-width":{base:1.2,stops:[[5,.5],[7,.7]]}}},{id:"Water line large scale",type:"line",source:"esri","source-layer":"Water line large scale",minzoom:7,maxzoom:11,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[7,.7],[11,.8]]}}},{id:"Water line/Waterfall",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",5],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#cfd3d4","line-width":.8,"line-dasharray":[5,5]}},{id:"Water line/Dam or weir",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",2],minzoom:11,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#c3c3c3","line-width":{base:1.2,stops:[[11,.7],[14,.7],[17,2]]}}},{id:"Water line/Levee/1",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",3],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[11,.7],[14,.7],[17,2]]}}},{id:"Water line/Levee/0",type:"symbol",source:"esri","source-layer":"Water line",filter:["==","_symbol",3],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"icon-image":"Water line/Levee/0","symbol-spacing":15,"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-padding":1},paint:{}},{id:"Water line/Canal or ditch",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",1],minzoom:11,layout:{"line-cap":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[11,.8],[14,.8],[17,2]]}}},{id:"Water line/Stream or river intermittent",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",4],minzoom:11,layout:{},paint:{"line-color":"#cfd3d4","line-dasharray":[7,3],"line-width":{base:1.2,stops:[[11,.8],[14,.8],[17,2]]}}},{id:"Water line/Stream or river",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",0],minzoom:11,layout:{"line-cap":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[11,.8],[14,.8],[17,2]]}}},{id:"Marine area/bathymetry depth 1",type:"fill",source:"esri","source-layer":"Marine area",minzoom:4,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area small scale",type:"fill",source:"esri","source-layer":"Water area small scale",minzoom:1,maxzoom:5,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area medium scale/Lake intermittent",type:"fill",source:"esri","source-layer":"Water area medium scale",filter:["==","_symbol",1],minzoom:5,maxzoom:7,layout:{},paint:{"fill-pattern":"Water area/Lake or river intermittent"}},{id:"Water area medium scale/Lake or river",type:"fill",source:"esri","source-layer":"Water area medium scale",filter:["==","_symbol",0],minzoom:5,maxzoom:7,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area large scale/Lake intermittent",type:"fill",source:"esri","source-layer":"Water area large scale",filter:["==","_symbol",1],minzoom:7,maxzoom:11,layout:{},paint:{"fill-pattern":"Water area/Lake or river intermittent"}},{id:"Water area large scale/Lake or river",type:"fill",source:"esri","source-layer":"Water area large scale",filter:["==","_symbol",0],minzoom:7,maxzoom:11,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area/Lake, river or bay",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",7],minzoom:11,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area/Lake or river intermittent",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",6],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Lake or river intermittent"}},{id:"Water area/Inundated area",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",4],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Inundated area"}},{id:"Water area/Swamp or marsh",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",3],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Swamp or marsh"}},{id:"Water area/Playa",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",1],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Playa"}},{id:"Water area/Dam or weir",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",5],minzoom:11,layout:{},paint:{"fill-color":"#DFE1E2","fill-outline-color":"#efefef"}},{id:"Special area of interest/Bike, walk or pedestrian",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",2],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1"}},{id:"Railroad/2",type:"line",source:"esri","source-layer":"Railroad",minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#EFEFEF","line-width":{base:1.2,stops:[[12,1.5],[14,2.5],[17,3]]}}},{id:"Railroad/1",type:"line",source:"esri","source-layer":"Railroad",minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#dcddda","line-width":{base:1.2,stops:[[12,.5],[14,1],[17,1.5]]}}},{id:"Ferry/Rail ferry/2",type:"line",source:"esri","source-layer":"Ferry",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#EFEFEF","line-width":{base:1.2,stops:[[12,1.5],[14,2.5],[17,3]]}}},{id:"Ferry/Rail ferry/1",type:"line",source:"esri","source-layer":"Ferry",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#dcddda","line-width":{base:1.2,stops:[[12,.5],[14,1],[17,1.5]]}}},{id:"Special area of interest line/Dock or pier",type:"line",source:"esri","source-layer":"Special area of interest line",filter:["==","_symbol",0],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#efefef","line-width":{base:1.2,stops:[[15,.7],[17,1.2]]}}},{id:"Special area of interest line/Sports field",type:"line",source:"esri","source-layer":"Special area of interest line",filter:["==","_symbol",6],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#efefef","line-width":{base:1.2,stops:[[15,.7],[17,1.2]]}}},{id:"Building/Shadow",type:"fill",source:"esri","source-layer":"Building",minzoom:16,layout:{},paint:{"fill-color":"#dcddde","fill-translate":{stops:[[15,[0,0]],[18,[2,2]]]},"fill-translate-anchor":"viewport"}},{id:"Building",type:"fill",source:"esri","source-layer":"Building",minzoom:15,layout:{},paint:{"fill-color":"#DFE1E2","fill-outline-color":"#efefef"}},{id:"Special area of interest line/Parking lot",type:"line",source:"esri","source-layer":"Special area of interest line",filter:["==","_symbol",5],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[15,.7],[17,1.2]]}}},{id:"Trail or path/1",type:"line",source:"esri","source-layer":"Trail or path",minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[14,1.5],[16,3.3],[18,4]]}}},{id:"Road/4WD/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-dasharray":[2,1],"line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road/Service/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road/Local/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.4,stops:[[11,1.5],[14,4],[16,6],[18,17.3]]}}},{id:"Road/Pedestrian/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[14,1.5],[16,3.3],[18,4]]}}},{id:"Road/Minor, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[11,1],[14,4],[16,9.6],[18,17.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Minor/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[11,2.6],[14,5.6],[16,9.6],[18,17.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Major, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road/Major/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road/Freeway Motorway, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1,stops:[[9,.3],[14,8.3],[16,12.3],[18,26]]}}},{id:"Road/Highway/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[8,.3],[14,8.3],[16,12.3],[18,26]]}}},{id:"Road/Freeway Motorway/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[5,.3],[14,8.3],[16,12.3],[18,26]]}}},{id:"Trail or path/0",type:"line",source:"esri","source-layer":"Trail or path",minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-dasharray":[3,1.5],"line-width":{base:1.2,stops:[[14,1.3],[16,2],[18,2.3]]}}},{id:"Road/Pedestrian/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-dasharray":[3,1.5],"line-width":{base:1.2,stops:[[14,1.3],[16,2],[18,2.3]]}}},{id:"Road/4WD/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road/Service/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road/Local/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{stops:[[12,"#FAFAFA"],[13,"#ffffff"]]},"line-width":{base:1.4,stops:[[11,1.1],[14,2],[16,4],[18,15.3]]}}},{id:"Road/Minor, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,.75],[14,2],[16,7.65],[18,15.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Minor/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,1.3],[14,3.65],[16,7.65],[18,15.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Major, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ffffff","line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road/Major/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road/Freeway Motorway, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffffff","line-width":{base:1.2,stops:[[9,.3],[14,6.3],[16,10.3],[18,24]]}}},{id:"Road/Highway/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-width":{base:1.2,stops:[[8,.3],[14,6.3],[16,10.3],[18,24]]}}},{id:"Road/Freeway Motorway/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:6,layout:{"line-join":"round"},paint:{"line-color":{stops:[[6,"#FAFAFA"],[7,"#ffffff"]]},"line-width":{base:1.2,stops:[[5,.3],[14,6.3],[16,10.3],[18,24]]}}},{id:"Road tunnel/4WD/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-dasharray":[2,1],"line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road tunnel/Service/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road tunnel/Local/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.4,stops:[[11,1.5],[14,4],[16,6],[18,17.3]]}}},{id:"Road tunnel/Pedestrian/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[14,1.5],[16,3.3],[18,4]]}}},{id:"Road tunnel/Minor, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[11,1],[14,4],[16,9.65],[18,17.3]]}}},{id:"Road tunnel/Minor/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[11,2.6],[14,5.65],[16,9.65],[18,17.3]]}}},{id:"Road tunnel/Major, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road tunnel/Major/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road tunnel/Freeway Motorway, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.3],[14,8.3],[16,14.3],[18,28]]}}},{id:"Road tunnel/Highway/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[8,.3],[14,8.3],[16,14.3],[18,28]]}}},{id:"Road tunnel/Freeway Motorway/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[5,.3],[14,8.3],[16,14.3],[18,28]]}}},{id:"Road tunnel/Pedestrian/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-dasharray":[3,1.5],"line-width":{base:1.2,stops:[[14,1.3],[16,2],[18,2.3]]}}},{id:"Road tunnel/4WD/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road tunnel/Service/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road tunnel/Local/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":{stops:[[12,"#FAFAFA"],[13,"#ffffff"]]},"line-opacity":.5,"line-width":{base:1.4,stops:[[11,1.1],[14,2],[16,4],[18,15.3]]}}},{id:"Road tunnel/Minor, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,.75],[14,2],[16,7.65],[18,15.3]]}}},{id:"Road tunnel/Minor/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,1.3],[14,3.65],[16,7.65],[18,15.3]]}}},{id:"Road tunnel/Major, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road tunnel/Major/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road tunnel/Freeway Motorway, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.3],[14,6.3],[16,12.3],[18,26]]}}},{id:"Road tunnel/Highway/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[8,.3],[14,6.3],[16,12.3],[18,26]]}}},{id:"Road tunnel/Freeway Motorway/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:6,layout:{"line-join":"round"},paint:{"line-color":{stops:[[6,"#FAFAFA"],[7,"#ffffff"]]},"line-opacity":.5,"line-width":{base:1.2,stops:[[5,.3],[14,6.3],[16,12.3],[18,26]]}}},{id:"Special area of interest/Gutter",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",9],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1","fill-outline-color":"#efefef"}},{id:"Special area of interest/Curb",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",3],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1","fill-outline-color":"#ebebeb"}},{id:"Boundary line/Disputed admin2/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#dddedb","line-opacity":.95,"line-width":{base:1,stops:[[4,.65],[14,7],[17,7]]}}},{id:"Boundary line/Disputed admin2/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":{stops:[[1,"#FAFAFA"],[3,"#ffffff"]]},"line-width":{base:1.2,stops:[[1,.65],[14,1.3],[17,2.65]]},"line-dasharray":[7,5]}},{id:"Boundary line/Disputed admin1/1",type:"line",source:"esri","source-layer":"Boundary line",minzoom:4,filter:["all",["==","_symbol",7],["!in","Viz",3]],layout:{"line-join":"round"},paint:{"line-color":"#dddedb","line-opacity":.95,"line-width":{base:1,stops:[[4,.65],[14,7]]}}},{id:"Boundary line/Disputed admin0/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",6],["!in","Viz",3],["!in","DisputeID",8,16,90,96,0]],minzoom:1,layout:{"line-join":"round"},paint:{"line-color":"#dddedb","line-opacity":.95,"line-width":{base:1,stops:[[1,.65],[14,9.3]]}}},{id:"Boundary line/Disputed admin1/0",type:"line",source:"esri","source-layer":"Boundary line",minzoom:4,filter:["all",["==","_symbol",7],["!in","Viz",3]],layout:{"line-join":"round"},paint:{"line-color":{stops:[[1,"#FAFAFA"],[3,"#ffffff"]]},"line-width":{base:1.2,stops:[[1,.65],[14,1.3],[17,2.65]]},"line-dasharray":[7,5]}},{id:"Boundary line/Disputed admin0/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",6],["!in","Viz",3],["!in","DisputeID",8,16,90,96,0]],minzoom:1,layout:{"line-join":"round"},paint:{"line-color":{stops:[[1,"#FAFAFA"],[3,"#ffffff"]]},"line-width":{base:1.2,stops:[[1,.65],[14,1.3],[17,2.65]]},"line-dasharray":[7,5]}},{id:"Boundary line/Admin2/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:10,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#dfe0dd","line-opacity":.6,"line-width":{base:1.2,stops:[[8,1.3],[14,2.65]]}}},{id:"Boundary line/Admin1/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:4,layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":"#dfe0dd","line-width":{base:1,stops:[[4,.65],[14,7]]}}},{id:"Boundary line/Admin0/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:1,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#dddedb","line-width":{base:1,stops:[[1,.65],[14,9.3]]}}},{id:"Boundary line/Admin5",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:16,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[5,3]}},{id:"Boundary line/Admin4",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:16,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[5,3]}},{id:"Boundary line/Admin3",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:16,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[5,3]}},{id:"Boundary line/Admin2/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[6,4],"line-width":{base:1.2,stops:[[8,.5],[14,1]]}}},{id:"Boundary line/Admin1/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:7,layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":{stops:[[7,"#c8c8c8"],[12,"#b9b9b9"]]},"line-dasharray":[7,5.3],"line-width":{base:1,stops:[[7,.3],[14,1.3]]}}},{id:"Boundary line/Admin0/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:5,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{stops:[[5,"#cccccc"],[7,"#9C9C9C"]]},"line-dasharray":[7,5.3],"line-width":{base:1.2,stops:[[5,.7],[14,1.3]]}}},{id:"Water point/Sea or ocean",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",0],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,15.5]]},"text-letter-spacing":.3,"text-line-height":1.6,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water point/Island",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",7],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water point/Dam or weir",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",5],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":.7,"text-halo-blur":1}},{id:"Water point/Playa",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",6],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":.7,"text-halo-blur":1}},{id:"Water point/Canal or ditch",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",4],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water point/Stream or river",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",3],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water point/Lake or reservoir",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",2],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water point/Bay or inlet",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",1],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water line/label/Default",type:"symbol",source:"esri","source-layer":"Water line/label",minzoom:11,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":9,"text-letter-spacing":.07,"text-max-width":6,"text-max-angle":18,"text-field":"{_name_global}","text-padding":1,"text-offset":[0,-.5],"symbol-spacing":800},paint:{"text-color":"#A0A6A8","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Marine park/label/Default",type:"symbol",source:"esri","source-layer":"Marine park/label",minzoom:16,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91"}},{id:"Water area/label/Dam or weir",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",8],minzoom:11,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Water area/label/Playa",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",9],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Water area/label/Canal or ditch",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",2],minzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.13,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":5},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Small river",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",7],minzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.13,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":8},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Large river",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",4],minzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":10,"text-letter-spacing":.13,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":8},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Small lake or reservoir",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",6],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Large lake or reservoir",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",3],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":10,"text-letter-spacing":.13,"text-line-height":1.15,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Bay or inlet",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",1],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":11,"text-letter-spacing":.13,"text-line-height":1.15,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Small island",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",0],minzoom:11,layout:{"text-size":9.5,"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"]},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water area/label/Large island",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",5],minzoom:11,layout:{"text-size":10,"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"]},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water area large scale/label/River",type:"symbol",source:"esri","source-layer":"Water area large scale/label",filter:["==","_label_class",1],minzoom:7,maxzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":9,"text-letter-spacing":.1,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":4},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area large scale/label/Lake or lake intermittent",type:"symbol",source:"esri","source-layer":"Water area large scale/label",filter:["==","_label_class",0],minzoom:7,maxzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area medium scale/label/Default",type:"symbol",source:"esri","source-layer":"Water area medium scale/label",minzoom:5,maxzoom:7,layout:{"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-letter-spacing":.08,"text-font":["Ubuntu Italic"],"text-size":9},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area small scale/label/Default",type:"symbol",source:"esri","source-layer":"Water area small scale/label",minzoom:1,maxzoom:5,layout:{"text-font":["Ubuntu Italic"],"text-size":9,"text-letter-spacing":.08,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Marine area/label/Default",type:"symbol",source:"esri","source-layer":"Marine area/label",minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":10,"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Marine waterbody/label/small",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",4],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.12,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,9],[6,11]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/medium",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",3],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.15,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,9],[6,11]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/large",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",2],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.18,"text-line-height":1.5,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,9],[6,12]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/x large",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",1],minzoom:3,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.2,"text-line-height":1.5,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,10],[6,13]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/2x large",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",0],minzoom:2,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.3,"text-line-height":1.6,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,11],[4,14]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Ferry/label/Rail ferry",type:"symbol",source:"esri","source-layer":"Ferry/label",filter:["all",["==","_label_class",1],["!in","Viz",3]],minzoom:16,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.6],"symbol-spacing":1e3},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1}},{id:"Railroad/label/Default",type:"symbol",source:"esri","source-layer":"Railroad/label",minzoom:16,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.6],"symbol-spacing":1e3},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1}},{id:"Road tunnel/label/Pedestrian",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",6],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.3,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Local, service, 4WD",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",5],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Minor",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",4],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Major, alt name",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",3],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Major",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",2],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Highway",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",7],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Freeway Motorway, alt name",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",1],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Freeway Motorway",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",0],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Building/label/Default",type:"symbol",source:"esri","source-layer":"Building/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":.7,"text-halo-blur":1}},{id:"Trail or path/label/Default",type:"symbol",source:"esri","source-layer":"Trail or path/label",minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.3,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Pedestrian",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",6],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.3,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Local",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",5],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Minor",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",4],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Major, alt name",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",3],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Major",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",2],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Highway",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",75],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":10},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Freeway Motorway, alt name",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",1],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Freeway Motorway",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",0],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Rectangle white black (Alt)",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["in","_label_class",8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-spacing":800,"text-max-angle":25,"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-max-width":6,"text-field":"{_name}","icon-image":"Road/Rectangle white black (Alt)/{_len}","icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport","text-offset":[0,.2],"text-padding":30},paint:{"text-color":"#666666"}},{id:"Road/label/Rectangle white black",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["in","_label_class",7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-spacing":800,"text-max-angle":25,"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-max-width":6,"text-field":"{_name}","icon-image":"Road/Rectangle white black/{_len}","icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport","text-offset":[0,.2],"text-padding":30},paint:{"text-color":"#666666"}},{id:"Cemetery/label/Default",type:"symbol",source:"esri","source-layer":"Cemetery/label",minzoom:16,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Freight/label/Default",type:"symbol",source:"esri","source-layer":"Freight/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Water and wastewater/label/Default",type:"symbol",source:"esri","source-layer":"Water and wastewater/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Port/label/Default",type:"symbol",source:"esri","source-layer":"Port/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Industry/label/Default",type:"symbol",source:"esri","source-layer":"Industry/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Government/label/Default",type:"symbol",source:"esri","source-layer":"Government/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Finance/label/Default",type:"symbol",source:"esri","source-layer":"Finance/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Emergency/label/Default",type:"symbol",source:"esri","source-layer":"Emergency/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Indigenous/label/Default",type:"symbol",source:"esri","source-layer":"Indigenous/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Military/label/Default",type:"symbol",source:"esri","source-layer":"Military/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Transportation/label/Default",type:"symbol",source:"esri","source-layer":"Transportation/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Pedestrian/label/Default",type:"symbol",source:"esri","source-layer":"Pedestrian/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Beach/label/Default",type:"symbol",source:"esri","source-layer":"Beach/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Golf course/label/Default",type:"symbol",source:"esri","source-layer":"Golf course/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Zoo/label/Default",type:"symbol",source:"esri","source-layer":"Zoo/label",minzoom:15,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Retail/label/Default",type:"symbol",source:"esri","source-layer":"Retail/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Landmark/label/Default",type:"symbol",source:"esri","source-layer":"Landmark/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Openspace or forest/label/Default",type:"symbol",source:"esri","source-layer":"Openspace or forest/label",minzoom:14,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Park or farming/label/Default",type:"symbol",source:"esri","source-layer":"Park or farming/label",minzoom:14,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Point of interest/Park",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_label_class",1],minzoom:14,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#939d8c","text-halo-width":1,"text-halo-color":"#EBEDEB","text-halo-blur":1}},{id:"Education/label/Default",type:"symbol",source:"esri","source-layer":"Education/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Medical/label/Default",type:"symbol",source:"esri","source-layer":"Medical/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 forest or park/label/Default",type:"symbol",source:"esri","source-layer":"Admin1 forest or park/label",minzoom:9,layout:{"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[12,9.5]]},"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 forest or park/label/Default",type:"symbol",source:"esri","source-layer":"Admin0 forest or park/label",minzoom:9,layout:{"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[12,9.5]]},"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Airport/label/Airport property",type:"symbol",source:"esri","source-layer":"Airport/label",minzoom:9,layout:{"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[12,9.5]]},"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin2 area/label/small",type:"symbol",source:"esri","source-layer":"Admin2 area/label",filter:["==","_label_class",1],minzoom:9,maxzoom:11,layout:{"text-letter-spacing":.2,"text-font":["Ubuntu Regular"],"text-size":9,"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase"},paint:{"text-color":"#b1b2ad","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin2 area/label/large",type:"symbol",source:"esri","source-layer":"Admin2 area/label",filter:["==","_label_class",0],minzoom:9,maxzoom:11,layout:{"text-letter-spacing":.2,"text-font":["Ubuntu Regular"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase"},paint:{"text-color":"#b1b2ad","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/x small",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",5],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,9],[5,9],[6,9.5],[9,10]]},"text-letter-spacing":{stops:[[4,.1],[8,.18]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/small",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",4],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,9],[5,9],[6,9.5],[9,11.5]]},"text-letter-spacing":{stops:[[4,.1],[8,.18]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/medium",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",3],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,10],[5,10],[6,10.5],[9,12]]},"text-letter-spacing":{stops:[[4,.1],[8,.18]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/large",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",2],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,10],[5,10.5],[6,11],[9,15]]},"text-letter-spacing":{stops:[[4,.1],[8,.2]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/x large",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",1],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,10.5],[5,11],[6,11.5],[9,17]]},"text-letter-spacing":{stops:[[4,.13],[8,.3]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/2x large",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",0],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,11],[5,11.5],[6,12],[9,17.5]]},"text-letter-spacing":{stops:[[4,.13],[8,.4]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Point of interest/General",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_label_class",0],minzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-width":1,"text-halo-color":"#efefef","text-halo-blur":1}},{id:"Point of interest/Bus station",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_symbol",2],minzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9,"text-letter-spacing":.04,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.9]},paint:{"text-color":"#808080","text-halo-width":1,"text-halo-color":"#efefef","text-halo-blur":1}},{id:"Point of interest/Rail station",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_symbol",3],minzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9,"text-letter-spacing":.04,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.9]},paint:{"text-color":"#808080","text-halo-width":1,"text-halo-color":"#efefef","text-halo-blur":1}},{id:"Neighborhood",type:"symbol",source:"esri","source-layer":"Neighborhood",minzoom:15,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":{stops:[[10,10],[16,13]]},"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/town small",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",5],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":{stops:[[10,10],[16,13]]},"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/town large",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",4],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":{stops:[[10,10],[16,15]]},"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":1},paint:{"text-halo-color":"#efefef","text-color":"#353635","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/small",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",3],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,11],[16,16]]}},paint:{"text-halo-color":"#efefef","text-color":"#353635","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/medium",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",2],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,11],[16,18.5]]}},paint:{"text-halo-color":"#efefef","text-color":"#353635","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/large",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",1],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,14],[16,22]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/x large",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",0],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,15],[16,25]]},visibility:"none"},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town small non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",17],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town large non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",15],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/small non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",12],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/medium non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",9],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"text-letter-spacing":.05,"text-size":10},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",18],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town large other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",14],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/small other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",11],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/medium other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",8],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":10},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/x small",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",5],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[5,.13],[8,.5]]},"text-size":{stops:[[5,10],[10,12.5]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/small",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",4],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[4,.13],[8,.5]]},"text-size":{stops:[[4,10],[10,12.5]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/medium",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",3],minzoom:2,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[2,.13],[8,.5]]},"text-size":{stops:[[2,8],[4,10],[10,16]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/large",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",2],minzoom:2,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[2,.13],[8,.5]]},"text-size":{stops:[[2,9],[4,10],[6,16]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/x large",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",1],minzoom:2,maxzoom:8,layout:{"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-font":["Ubuntu Bold"],"text-line-height":1.5,"text-letter-spacing":{stops:[[2,.15],[6,.5]]},"text-size":{stops:[[2,9],[4,10],[6,16]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town small admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",16],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town large admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",13],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/small admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",10],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/medium admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",7],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/large other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",5],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,11],[8,14]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large admin2 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",2],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/large non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",6],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,11],[8,14]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/large admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",4],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,11],[8,14]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",3],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large admin1 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",1],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",0],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/2x large",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",0],minzoom:2,maxzoom:6,layout:{"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-font":["Ubuntu Bold"],"text-line-height":1.7,"text-letter-spacing":{stops:[[2,.3],[5,.5]]},"text-size":{stops:[[2,12],[4,15.5],[5,18]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Disputed label point/Island",type:"symbol",source:"esri","source-layer":"Disputed label point",filter:["all",["==","_label_class",1],["in","DisputeID",0]],minzoom:6,layout:{"icon-image":"Disputed label point","icon-allow-overlap":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[6,7],[15,10]]},"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Disputed label point/Waterbody",type:"symbol",source:"esri","source-layer":"Disputed label point",filter:["all",["==","_label_class",0],["in","DisputeID",1006]],minzoom:2,maxzoom:10,layout:{"icon-image":"Disputed label point","icon-allow-overlap":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[2,8],[6,9.3]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Disputed label point/Admin0",type:"symbol",source:"esri","source-layer":"Disputed label point",filter:["all",["==","_label_class",2],["in","DisputeID",1021]],minzoom:2,layout:{"icon-image":"Disputed label point","icon-allow-overlap":!0,"text-font":["Ubuntu Bold"],"text-size":{stops:[[2,8],[4,10],[10,16]]},"text-transform":"uppercase","text-letter-spacing":{stops:[[2,.13],[8,.5]]},"text-max-width":6,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}}],F1e={arcgisStyleUrl:"https://www.arcgis.com/sharing/rest/content/items/96ed54f1daf24a6992b7e7317bebd744/resources/styles/root.json",arcgisOriginalItemTitle:"Light Gray Canvas (for Developers)",arcgisQuickEditorWarning:!0},B1e={version:D1e,glyphs:L1e,sources:O1e,layers:k1e,metadata:F1e},U1e=8,V1e="https://tiles.arcgis.com/tiles/at3rDjch5X7i9Bag/arcgis/rest/services/Moderate_SLR_eraseOB_VTile2/VectorTileServer/resources/sprites/sprite",j1e="https://tiles.arcgis.com/tiles/at3rDjch5X7i9Bag/arcgis/rest/services/Moderate_SLR_eraseOB_VTile2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf",z1e={stormwater:{type:"vector",bounds:[-180,-85.0511,180,85.0511],minzoom:0,maxzoom:20,scheme:"xyz",url:"https://tiles.arcgis.com/tiles/at3rDjch5X7i9Bag/arcgis/rest/services/Moderate_SLR_eraseOB_VTile2/VectorTileServer/"},sandy:{type:"vector",bounds:[-74.2556,40.4961,-73.725,40.9155],minzoom:0,maxzoom:23,scheme:"xyz",url:"https://vectortileservices6.arcgis.com/QBTLpj07hLeyQqJB/arcgis/rest/services/Sandy_Inundation_Zone_/VectorTileServer"}},H1e=[{id:"Area not included in analysis:1",type:"fill",source:"stormwater","source-layer":"Area not included in analysis:1",layout:{},paint:{"fill-color":"rgba(189, 189, 189, 0.7)"}},{id:"Area under analysis",type:"fill",source:"stormwater","source-layer":"Area under analysis",layout:{},paint:{"fill-color":"rgba(189, 189, 189, 0.7)"}},{id:"Area not included in analysis:2",type:"fill",source:"stormwater","source-layer":"Area not included in analysis:2",layout:{},paint:{"fill-color":"rgba(189, 189, 189, 0.7)"}},{id:"National Wetlands Inventory/1",type:"fill",source:"stormwater","source-layer":"National Wetlands Inventory",layout:{},paint:{"fill-color":"rgba(189, 189, 189, 0.7)"}},{id:"Sandy Inundation Zone",type:"fill",source:"sandy","source-layer":"NYC_large_polygon_split_up(1)",layout:{},paint:{"fill-color":"rgba(76,129,205,0.75)","fill-outline-color":"rgba(0,0,0,0.2)"}},{id:"Nuisance Flooding (greater or equal to 4 in and less than 1ft)/1",type:"fill",source:"stormwater","source-layer":"Nuisance Flooding (greater or equal to 4 in and less than 1ft)",layout:{},paint:{"fill-color":"#73B2FF"}},{id:"Deep and Contiguous Flooding (1ft and greater)/1",type:"fill",source:"stormwater","source-layer":"Deep and Contiguous Flooding (1ft and greater)",layout:{},paint:{"fill-color":"#005CE6"}},{id:"Future High Tides 2050",type:"fill",source:"stormwater","source-layer":"Future High Tides 2050 ",layout:{},paint:{"fill-color":"#FFAA00"}}],G1e={version:U1e,sprite:V1e,glyphs:j1e,sources:z1e,layers:H1e},q1e=8,W1e="https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf",Y1e={subway:{type:"vector",url:"https://vectortileservices6.arcgis.com/QBTLpj07hLeyQqJB/arcgis/rest/services/NYC_Subway_Station_Points/VectorTileServer"}},K1e=[{id:"NYC_Subway_Station_Points",type:"circle",source:"subway","source-layer":"main.subway_stations2",minzoom:8,paint:{"circle-color":"rgba(255, 255, 255, 1)","circle-opacity":{stops:[[11,0],[12,1]]},"circle-stroke-opacity":{stops:[[11,0],[12,1]]},"circle-radius":{stops:[[10,2],[14,5]]},"circle-stroke-width":1,"circle-pitch-scale":"map"}},{id:"subway_stations_labels",minzoom:13,source:"subway","source-layer":"main.subway_stations2",type:"symbol",layout:{"text-field":"{_name}","symbol-placement":"point","symbol-spacing":250,"symbol-avoid-edges":!1,"text-size":14,"text-anchor":"center","text-font":["Ubuntu Italic"]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1,"text-translate":[1,20],"text-opacity":{stops:[[12,0],[15,1]]}}}],Z1e={version:q1e,glyphs:W1e,sources:Y1e,layers:K1e},J1e="FeatureCollection",X1e="ida",Q1e={type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},eve=[{type:"Feature",properties:{"Unique Key":51718789,"Created Date":"09/01/2021 06:35:00 PM","Closed Date":"09/01/2021 08:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10027,"Incident Address":"11 WEST  129 STREET","Street Name":"WEST  129 STREET","Cross Street 1":"5 AVE","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 08:30:00 PM","Community Board":"10 MANHATTAN",BBL:1017270028,Borough:"MANHATTAN","X Coordinate (State Plane)":1000434,"Y Coordinate (State Plane)":234185,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80944473216209,Longitude:-73.9415372004145,Location:"(40.80944473216209, -73.9415372004145)"},geometry:{type:"Point",coordinates:[-73.9415372004145,40.80944473216209]}},{type:"Feature",properties:{"Unique Key":51728874,"Created Date":"09/01/2021 08:08:00 PM","Closed Date":"09/01/2021 08:55:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10034,"Incident Address":"557 ISHAM STREET","Street Name":"ISHAM STREET","Cross Street 1":"VERMILYEA AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 08:55:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1006574,"Y Coordinate (State Plane)":255307,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.86740508013353,Longitude:-73.91928687783799,Location:"(40.86740508013353, -73.91928687783799)"},geometry:{type:"Point",coordinates:[-73.91928687783799,40.86740508013353]}},{type:"Feature",properties:{"Unique Key":51722197,"Created Date":"09/01/2021 08:54:00 PM","Closed Date":"09/04/2021 11:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Other Sewer Problem (Use Comments) (SZZ)","Location Type":null,"Incident Zip":10036,"Incident Address":"663 9 AVENUE","Street Name":"9 AVENUE","Cross Street 1":"W 45 ST","Cross Street 2":"W 46 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and resolved the issue.","Resolution Action Updated Date":"09/04/2021 11:45:00 AM","Community Board":"04 MANHATTAN",BBL:1010550036,Borough:"MANHATTAN","X Coordinate (State Plane)":986788,"Y Coordinate (State Plane)":216493,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.760899370879606,Longitude:-73.99083845589195,Location:"(40.760899370879606, -73.99083845589195)"},geometry:{type:"Point",coordinates:[-73.99083845589195,40.760899370879606]}},{type:"Feature",properties:{"Unique Key":51728984,"Created Date":"09/01/2021 08:54:00 PM","Closed Date":"09/05/2021 04:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10025,"Incident Address":"255 WEST   93 STREET","Street Name":"WEST   93 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"WEST END AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/05/2021 04:40:00 PM","Community Board":"07 MANHATTAN",BBL:1012410108,Borough:"MANHATTAN","X Coordinate (State Plane)":991496,"Y Coordinate (State Plane)":228190,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.793001949931174,Longitude:-73.97383114235681,Location:"(40.793001949931174, -73.97383114235681)"},geometry:{type:"Point",coordinates:[-73.97383114235681,40.793001949931174]}},{type:"Feature",properties:{"Unique Key":51723871,"Created Date":"09/01/2021 09:02:00 PM","Closed Date":"09/01/2021 09:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10128,"Incident Address":"1120 PARK AVENUE","Street Name":"PARK AVENUE","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 09:45:00 PM","Community Board":"08 MANHATTAN",BBL:1015020033,Borough:"MANHATTAN","X Coordinate (State Plane)":996515,"Y Coordinate (State Plane)":224549,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78300284092864,Longitude:-73.95571172396143,Location:"(40.78300284092864, -73.95571172396143)"},geometry:{type:"Point",coordinates:[-73.95571172396143,40.78300284092864]}},{type:"Feature",properties:{"Unique Key":51715388,"Created Date":"09/01/2021 09:11:00 PM","Closed Date":"09/01/2021 09:11:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10019,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"11 AVENUE","Intersection Street 2":"WEST 59 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 09:55:00 AM","Community Board":"04 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":986894,"Y Coordinate (State Plane)":220396,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77161206451384,Longitude:-73.99045428715185,Location:"(40.77161206451384, -73.99045428715185)"},geometry:{type:"Point",coordinates:[-73.99045428715185,40.77161206451384]}},{type:"Feature",properties:{"Unique Key":51722195,"Created Date":"09/01/2021 09:15:00 PM","Closed Date":"09/01/2021 09:16:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Other Sewer Problem (Use Comments) (SZZ)","Location Type":null,"Incident Zip":10009,"Incident Address":"5 AVENUE A","Street Name":"AVENUE A","Cross Street 1":"E 1 ST","Cross Street 2":"E 2 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and resolved the issue.","Resolution Action Updated Date":"09/01/2021 09:16:00 PM","Community Board":"03 MANHATTAN",BBL:1004290042,Borough:"MANHATTAN","X Coordinate (State Plane)":988095,"Y Coordinate (State Plane)":202505,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72250532442226,Longitude:-73.98612850928905,Location:"(40.72250532442226, -73.98612850928905)"},geometry:{type:"Point",coordinates:[-73.98612850928905,40.72250532442226]}},{type:"Feature",properties:{"Unique Key":51724889,"Created Date":"09/01/2021 09:18:00 PM","Closed Date":"09/01/2021 09:35:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10009,"Incident Address":"9 AVENUE A","Street Name":"AVENUE A","Cross Street 1":"E 1 ST","Cross Street 2":"E 2 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/01/2021 09:35:00 PM","Community Board":"03 MANHATTAN",BBL:1004290040,Borough:"MANHATTAN","X Coordinate (State Plane)":988111,"Y Coordinate (State Plane)":202534,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.722584915439576,Longitude:-73.98607076993538,Location:"(40.722584915439576, -73.98607076993538)"},geometry:{type:"Point",coordinates:[-73.98607076993538,40.722584915439576]}},{type:"Feature",properties:{"Unique Key":51717574,"Created Date":"09/01/2021 09:24:00 PM","Closed Date":"09/05/2021 12:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Other Sewer Problem (Use Comments) (SZZ)","Location Type":null,"Incident Zip":10029,"Incident Address":"2165 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 111 ST","Cross Street 2":"E 112 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and resolved the issue.","Resolution Action Updated Date":"09/05/2021 12:50:00 PM","Community Board":"11 MANHATTAN",BBL:1016830030,Borough:"MANHATTAN","X Coordinate (State Plane)":1001601,"Y Coordinate (State Plane)":228333,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79338038300756,Longitude:-73.93733667375174,Location:"(40.79338038300756, -73.93733667375174)"},geometry:{type:"Point",coordinates:[-73.93733667375174,40.79338038300756]}},{type:"Feature",properties:{"Unique Key":51728845,"Created Date":"09/01/2021 09:27:00 PM","Closed Date":"09/03/2021 10:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10075,"Incident Address":"20 EAST   80 STREET","Street Name":"EAST   80 STREET","Cross Street 1":"5 AVE","Cross Street 2":"MADISON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 10:45:00 AM","Community Board":"08 MANHATTAN",BBL:1014910060,Borough:"MANHATTAN","X Coordinate (State Plane)":994685,"Y Coordinate (State Plane)":222465,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77728516288154,Longitude:-73.962322994457,Location:"(40.77728516288154, -73.962322994457)"},geometry:{type:"Point",coordinates:[-73.962322994457,40.77728516288154]}},{type:"Feature",properties:{"Unique Key":51712916,"Created Date":"09/01/2021 09:36:00 PM","Closed Date":"09/05/2021 09:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10065,"Incident Address":"44 EAST   68 STREET","Street Name":"EAST   68 STREET","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/05/2021 09:30:00 AM","Community Board":"08 MANHATTAN",BBL:1013820043,Borough:"MANHATTAN","X Coordinate (State Plane)":993427,"Y Coordinate (State Plane)":219457,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.769030386183736,Longitude:-73.96686928409133,Location:"(40.769030386183736, -73.96686928409133)"},geometry:{type:"Point",coordinates:[-73.96686928409133,40.769030386183736]}},{type:"Feature",properties:{"Unique Key":51726569,"Created Date":"09/01/2021 09:41:00 PM","Closed Date":"09/01/2021 09:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10011,"Incident Address":"429 WEST   24 STREET","Street Name":"WEST   24 STREET","Cross Street 1":"9 AVE","Cross Street 2":"10 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/01/2021 09:50:00 PM","Community Board":"04 MANHATTAN",BBL:1007220020,Borough:"MANHATTAN","X Coordinate (State Plane)":983741,"Y Coordinate (State Plane)":211639,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74757672344629,Longitude:-74.0018369950305,Location:"(40.74757672344629, -74.0018369950305)"},geometry:{type:"Point",coordinates:[-74.0018369950305,40.74757672344629]}},{type:"Feature",properties:{"Unique Key":51722823,"Created Date":"09/01/2021 09:41:00 PM","Closed Date":"09/02/2021 08:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10013,"Incident Address":"17 THOMPSON STREET","Street Name":"THOMPSON STREET","Cross Street 1":"BEND","Cross Street 2":"GRAND ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:10:00 AM","Community Board":"02 MANHATTAN",BBL:1002270055,Borough:"MANHATTAN","X Coordinate (State Plane)":982976,"Y Coordinate (State Plane)":202527,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7225664529733,Longitude:-74.00459617563315,Location:"(40.7225664529733, -74.00459617563315)"},geometry:{type:"Point",coordinates:[-74.00459617563315,40.7225664529733]}},{type:"Feature",properties:{"Unique Key":51717735,"Created Date":"09/01/2021 09:45:00 PM","Closed Date":"09/02/2021 01:05:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10019,"Incident Address":"641 WEST   51 STREET","Street Name":"WEST   51 STREET","Cross Street 1":"11 AVE","Cross Street 2":"12 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:05:00 AM","Community Board":"04 MANHATTAN",BBL:1010990010,Borough:"MANHATTAN","X Coordinate (State Plane)":985618,"Y Coordinate (State Plane)":218672,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76688042241679,Longitude:-73.99506141928606,Location:"(40.76688042241679, -73.99506141928606)"},geometry:{type:"Point",coordinates:[-73.99506141928606,40.76688042241679]}},{type:"Feature",properties:{"Unique Key":51713336,"Created Date":"09/01/2021 09:48:00 PM","Closed Date":"09/02/2021 01:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10065,"Incident Address":"342 EAST   67 STREET","Street Name":"EAST   67 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:00:00 AM","Community Board":"08 MANHATTAN",BBL:1014410031,Borough:"MANHATTAN","X Coordinate (State Plane)":995433,"Y Coordinate (State Plane)":218047,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76515799198971,Longitude:-73.9596295893541,Location:"(40.76515799198971, -73.9596295893541)"},geometry:{type:"Point",coordinates:[-73.9596295893541,40.76515799198971]}},{type:"Feature",properties:{"Unique Key":51712536,"Created Date":"09/01/2021 09:49:00 PM","Closed Date":"09/01/2021 10:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10010,"Incident Address":"1107 BROADWAY","Street Name":"BROADWAY","Cross Street 1":"BEND","Cross Street 2":"W 25 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The status of this Service Request is currently not available online. Please call 311 for further assistance. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/01/2021 10:40:00 PM","Community Board":"05 MANHATTAN",BBL:1008267501,Borough:"MANHATTAN","X Coordinate (State Plane)":987239,"Y Coordinate (State Plane)":209878,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.742742728974946,Longitude:-73.98921339926879,Location:"(40.742742728974946, -73.98921339926879)"},geometry:{type:"Point",coordinates:[-73.98921339926879,40.742742728974946]}},{type:"Feature",properties:{"Unique Key":51727252,"Created Date":"09/01/2021 09:50:00 PM","Closed Date":"09/05/2021 06:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"362 WEST  121 STREET","Street Name":"WEST  121 STREET","Cross Street 1":"MANHATTAN AVE","Cross Street 2":"MORNINGSIDE AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 06:20:00 PM","Community Board":"10 MANHATTAN",BBL:1019470060,Borough:"MANHATTAN","X Coordinate (State Plane)":996658,"Y Coordinate (State Plane)":233838,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.808498423505284,Longitude:-73.95517819566254,Location:"(40.808498423505284, -73.95517819566254)"},geometry:{type:"Point",coordinates:[-73.95517819566254,40.808498423505284]}},{type:"Feature",properties:{"Unique Key":51729745,"Created Date":"09/01/2021 09:54:00 PM","Closed Date":"09/02/2021 08:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10075,"Incident Address":"2 EAST END AVENUE","Street Name":"EAST END AVENUE","Cross Street 1":"E 79 ST","Cross Street 2":"E 80 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:30:00 AM","Community Board":"08 MANHATTAN",BBL:1015760023,Borough:"MANHATTAN","X Coordinate (State Plane)":998651,"Y Coordinate (State Plane)":219995,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77050008929813,Longitude:-73.94800850105914,Location:"(40.77050008929813, -73.94800850105914)"},geometry:{type:"Point",coordinates:[-73.94800850105914,40.77050008929813]}},{type:"Feature",properties:{"Unique Key":51728980,"Created Date":"09/01/2021 09:54:00 PM","Closed Date":"09/02/2021 02:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"347 EAST  104 STREET","Street Name":"EAST  104 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:45:00 AM","Community Board":"11 MANHATTAN",BBL:1016760022,Borough:"MANHATTAN","X Coordinate (State Plane)":1000240,"Y Coordinate (State Plane)":226679,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78884316674628,Longitude:-73.94225587634332,Location:"(40.78884316674628, -73.94225587634332)"},geometry:{type:"Point",coordinates:[-73.94225587634332,40.78884316674628]}},{type:"Feature",properties:{"Unique Key":51713321,"Created Date":"09/01/2021 09:55:00 PM","Closed Date":"09/02/2021 02:15:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10025,"Incident Address":"255 WEST   93 STREET","Street Name":"WEST   93 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"WEST END AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:15:00 AM","Community Board":"07 MANHATTAN",BBL:1012410108,Borough:"MANHATTAN","X Coordinate (State Plane)":991496,"Y Coordinate (State Plane)":228190,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.793001949931174,Longitude:-73.97383114235681,Location:"(40.793001949931174, -73.97383114235681)"},geometry:{type:"Point",coordinates:[-73.97383114235681,40.793001949931174]}},{type:"Feature",properties:{"Unique Key":51720064,"Created Date":"09/01/2021 09:59:00 PM","Closed Date":"09/04/2021 09:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10014,"Incident Address":"68 JANE STREET","Street Name":"JANE STREET","Cross Street 1":"GREENWICH ST","Cross Street 2":"WASHINGTON ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 09:55:00 AM","Community Board":"02 MANHATTAN",BBL:1006410052,Borough:"MANHATTAN","X Coordinate (State Plane)":982387,"Y Coordinate (State Plane)":208198,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73813185551251,Longitude:-74.00672266526844,Location:"(40.73813185551251, -74.00672266526844)"},geometry:{type:"Point",coordinates:[-74.00672266526844,40.73813185551251]}},{type:"Feature",properties:{"Unique Key":51715790,"Created Date":"09/01/2021 10:02:00 PM","Closed Date":"09/02/2021 02:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10128,"Incident Address":"1724 2 AVENUE","Street Name":"2 AVENUE","Cross Street 1":"E 89 ST","Cross Street 2":"E 90 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:00:00 AM","Community Board":"08 MANHATTAN",BBL:1015527501,Borough:"MANHATTAN","X Coordinate (State Plane)":998076,"Y Coordinate (State Plane)":223511,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.780151502574405,Longitude:-73.95007717156378,Location:"(40.780151502574405, -73.95007717156378)"},geometry:{type:"Point",coordinates:[-73.95007717156378,40.780151502574405]}},{type:"Feature",properties:{"Unique Key":51726619,"Created Date":"09/01/2021 10:02:00 PM","Closed Date":"09/02/2021 12:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10019,"Incident Address":"363 WEST   51 STREET","Street Name":"WEST   51 STREET","Cross Street 1":"8 AVE","Cross Street 2":"9 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 12:35:00 AM","Community Board":"04 MANHATTAN",BBL:1010420005,Borough:"MANHATTAN","X Coordinate (State Plane)":987642,"Y Coordinate (State Plane)":217554,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76381125651034,Longitude:-73.98775519452555,Location:"(40.76381125651034, -73.98775519452555)"},geometry:{type:"Point",coordinates:[-73.98775519452555,40.76381125651034]}},{type:"Feature",properties:{"Unique Key":51717914,"Created Date":"09/01/2021 10:06:00 PM","Closed Date":"09/05/2021 05:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"210 WEST  138 STREET","Street Name":"WEST  138 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 05:20:00 PM","Community Board":"10 MANHATTAN",BBL:1020230140,Borough:"MANHATTAN","X Coordinate (State Plane)":1000028,"Y Coordinate (State Plane)":237123,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.817509455144986,Longitude:-73.94299692089366,Location:"(40.817509455144986, -73.94299692089366)"},geometry:{type:"Point",coordinates:[-73.94299692089366,40.817509455144986]}},{type:"Feature",properties:{"Unique Key":51719482,"Created Date":"09/01/2021 10:06:00 PM","Closed Date":"09/01/2021 10:35:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10013,"Incident Address":"4 CENTRE MARKET PLACE","Street Name":"CENTRE MARKET PLACE","Cross Street 1":"BAXTER ST","Cross Street 2":"BROOME ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 10:35:00 PM","Community Board":"02 MANHATTAN",BBL:1004710004,Borough:"MANHATTAN","X Coordinate (State Plane)":984838,"Y Coordinate (State Plane)":201535,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71984372456594,Longitude:-73.9978787748311,Location:"(40.71984372456594, -73.9978787748311)"},geometry:{type:"Point",coordinates:[-73.9978787748311,40.71984372456594]}},{type:"Feature",properties:{"Unique Key":51718250,"Created Date":"09/01/2021 10:11:00 PM","Closed Date":"09/05/2021 06:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"537 WEST  217 STREET","Street Name":"WEST  217 STREET","Cross Street 1":"PARK TER E","Cross Street 2":"PARK TER W","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 06:00:00 PM","Community Board":"12 MANHATTAN",BBL:1022430300,Borough:"MANHATTAN","X Coordinate (State Plane)":1007411,"Y Coordinate (State Plane)":256717,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.87127294149584,Longitude:-73.91625580623466,Location:"(40.87127294149584, -73.91625580623466)"},geometry:{type:"Point",coordinates:[-73.91625580623466,40.87127294149584]}},{type:"Feature",properties:{"Unique Key":51726864,"Created Date":"09/01/2021 10:11:00 PM","Closed Date":"09/05/2021 04:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"152 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"ACADEMY ST","Cross Street 2":"W 204 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 04:45:00 PM","Community Board":"12 MANHATTAN",BBL:1022250038,Borough:"MANHATTAN","X Coordinate (State Plane)":1005496,"Y Coordinate (State Plane)":254294,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.86462736420933,Longitude:-73.92318763020528,Location:"(40.86462736420933, -73.92318763020528)"},geometry:{type:"Point",coordinates:[-73.92318763020528,40.86462736420933]}},{type:"Feature",properties:{"Unique Key":51716015,"Created Date":"09/01/2021 10:12:00 PM","Closed Date":"09/02/2021 01:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10014,"Incident Address":"180 CHRISTOPHER STREET","Street Name":"CHRISTOPHER STREET","Cross Street 1":"WASHINGTON ST","Cross Street 2":"WEEHAWKEN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:00:00 AM","Community Board":"02 MANHATTAN",BBL:1006040003,Borough:"MANHATTAN","X Coordinate (State Plane)":981500,"Y Coordinate (State Plane)":206122,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73243351620026,Longitude:-74.00992257034451,Location:"(40.73243351620026, -74.00992257034451)"},geometry:{type:"Point",coordinates:[-74.00992257034451,40.73243351620026]}},{type:"Feature",properties:{"Unique Key":51718316,"Created Date":"09/01/2021 10:15:00 PM","Closed Date":"09/02/2021 01:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10023,"Incident Address":"55 WEST   69 STREET","Street Name":"WEST   69 STREET","Cross Street 1":"CENTRAL PARK W","Cross Street 2":"COLUMBUS AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:40:00 AM","Community Board":"07 MANHATTAN",BBL:1011220007,Borough:"MANHATTAN","X Coordinate (State Plane)":989926,"Y Coordinate (State Plane)":221702,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.775195265693874,Longitude:-73.97950666341458,Location:"(40.775195265693874, -73.97950666341458)"},geometry:{type:"Point",coordinates:[-73.97950666341458,40.775195265693874]}},{type:"Feature",properties:{"Unique Key":51720241,"Created Date":"09/01/2021 10:15:00 PM","Closed Date":"09/02/2021 12:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10065,"Incident Address":"333 EAST   66 STREET","Street Name":"EAST   66 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 12:30:00 AM","Community Board":"08 MANHATTAN",BBL:1014410017,Borough:"MANHATTAN","X Coordinate (State Plane)":995262,"Y Coordinate (State Plane)":217850,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76461749257886,Longitude:-73.9602472186511,Location:"(40.76461749257886, -73.9602472186511)"},geometry:{type:"Point",coordinates:[-73.9602472186511,40.76461749257886]}},{type:"Feature",properties:{"Unique Key":51714811,"Created Date":"09/01/2021 10:18:00 PM","Closed Date":"09/01/2021 10:25:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10033,"Incident Address":"554 WEST  181 STREET","Street Name":"WEST  181 STREET","Cross Street 1":"AUDUBON AVE","Cross Street 2":"ST NICHOLAS AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 10:25:00 PM","Community Board":"12 MANHATTAN",BBL:1021530068,Borough:"MANHATTAN","X Coordinate (State Plane)":1002821,"Y Coordinate (State Plane)":248581,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.84895292564862,Longitude:-73.93287459602605,Location:"(40.84895292564862, -73.93287459602605)"},geometry:{type:"Point",coordinates:[-73.93287459602605,40.84895292564862]}},{type:"Feature",properties:{"Unique Key":51713862,"Created Date":"09/01/2021 10:18:00 PM","Closed Date":"09/02/2021 11:23:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"347 EAST  104 STREET","Street Name":"EAST  104 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has determined that this issue was previously reported by another customer The original complaint is being addressed. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 11:23:00 PM","Community Board":"11 MANHATTAN",BBL:1016760022,Borough:"MANHATTAN","X Coordinate (State Plane)":1000240,"Y Coordinate (State Plane)":226679,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78884316674628,Longitude:-73.94225587634332,Location:"(40.78884316674628, -73.94225587634332)"},geometry:{type:"Point",coordinates:[-73.94225587634332,40.78884316674628]}},{type:"Feature",properties:{"Unique Key":51729796,"Created Date":"09/01/2021 10:18:00 PM","Closed Date":"09/02/2021 11:23:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10014,"Incident Address":"180 CHRISTOPHER STREET","Street Name":"CHRISTOPHER STREET","Cross Street 1":"WASHINGTON ST","Cross Street 2":"WEEHAWKEN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has determined that this issue was previously reported by another customer The original complaint is being addressed. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 11:23:00 PM","Community Board":"02 MANHATTAN",BBL:1006040003,Borough:"MANHATTAN","X Coordinate (State Plane)":981500,"Y Coordinate (State Plane)":206122,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73243351620026,Longitude:-74.00992257034451,Location:"(40.73243351620026, -74.00992257034451)"},geometry:{type:"Point",coordinates:[-74.00992257034451,40.73243351620026]}},{type:"Feature",properties:{"Unique Key":51716344,"Created Date":"09/01/2021 10:23:00 PM","Closed Date":"09/02/2021 08:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10009,"Incident Address":"158 EAST    7 STREET","Street Name":"EAST    7 STREET","Cross Street 1":"AVENUE A","Cross Street 2":"AVENUE B","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:50:00 AM","Community Board":"03 MANHATTAN",BBL:1004020023,Borough:"MANHATTAN","X Coordinate (State Plane)":989143,"Y Coordinate (State Plane)":203612,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7255432534672,Longitude:-73.98234686650702,Location:"(40.7255432534672, -73.98234686650702)"},geometry:{type:"Point",coordinates:[-73.98234686650702,40.7255432534672]}},{type:"Feature",properties:{"Unique Key":51720330,"Created Date":"09/01/2021 10:24:00 PM","Closed Date":"09/02/2021 03:05:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"65 EAST  112 STREET","Street Name":"EAST  112 STREET","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 03:05:00 AM","Community Board":"11 MANHATTAN",BBL:1016200023,Borough:"MANHATTAN","X Coordinate (State Plane)":999309,"Y Coordinate (State Plane)":229648,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79699390401083,Longitude:-73.94561130581198,Location:"(40.79699390401083, -73.94561130581198)"},geometry:{type:"Point",coordinates:[-73.94561130581198,40.79699390401083]}},{type:"Feature",properties:{"Unique Key":51728422,"Created Date":"09/01/2021 10:31:00 PM","Closed Date":"09/01/2021 10:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10029,"Incident Address":"88 EAST  111 STREET","Street Name":"EAST  111 STREET","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 10:45:00 PM","Community Board":"11 MANHATTAN",BBL:1016160039,Borough:"MANHATTAN","X Coordinate (State Plane)":999217,"Y Coordinate (State Plane)":229384,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79626945215548,Longitude:-73.94594417115646,Location:"(40.79626945215548, -73.94594417115646)"},geometry:{type:"Point",coordinates:[-73.94594417115646,40.79626945215548]}},{type:"Feature",properties:{"Unique Key":51723058,"Created Date":"09/01/2021 10:44:00 PM","Closed Date":"09/02/2021 09:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10025,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"AMSTERDAM AVENUE","Intersection Street 2":"WEST 107 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 09:30:00 AM","Community Board":"07 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":993881,"Y Coordinate (State Plane)":231145,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.801110343737164,Longitude:-73.96521350110491,Location:"(40.801110343737164, -73.96521350110491)"},geometry:{type:"Point",coordinates:[-73.96521350110491,40.801110343737164]}},{type:"Feature",properties:{"Unique Key":51724379,"Created Date":"09/01/2021 10:48:00 PM","Closed Date":"09/02/2021 10:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10027,"Incident Address":"17 WEST  123 STREET","Street Name":"WEST  123 STREET","Cross Street 1":"MT MORRIS PARK W","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 10:30:00 AM","Community Board":"10 MANHATTAN",BBL:1017210044,Borough:"MANHATTAN","X Coordinate (State Plane)":999417,"Y Coordinate (State Plane)":232913,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80595524891542,Longitude:-73.94521386633252,Location:"(40.80595524891542, -73.94521386633252)"},geometry:{type:"Point",coordinates:[-73.94521386633252,40.80595524891542]}},{type:"Feature",properties:{"Unique Key":51713028,"Created Date":"09/01/2021 10:48:00 PM","Closed Date":"09/04/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10029,"Incident Address":"172 EAST  108 STREET","Street Name":"EAST  108 STREET","Cross Street 1":"LEXINGTON AVE","Cross Street 2":"3 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 01:30:00 PM","Community Board":"11 MANHATTAN",BBL:1016350044,Borough:"MANHATTAN","X Coordinate (State Plane)":999620,"Y Coordinate (State Plane)":228262,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79318917480376,Longitude:-73.94449123736395,Location:"(40.79318917480376, -73.94449123736395)"},geometry:{type:"Point",coordinates:[-73.94449123736395,40.79318917480376]}},{type:"Feature",properties:{"Unique Key":51714222,"Created Date":"09/01/2021 10:49:00 PM","Closed Date":"09/02/2021 09:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10007,"Incident Address":"275 GREENWICH STREET","Street Name":"GREENWICH STREET","Cross Street 1":"MURRAY ST","Cross Street 2":"WARREN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 09:50:00 AM","Community Board":"01 MANHATTAN",BBL:1001327501,Borough:"MANHATTAN","X Coordinate (State Plane)":981134,"Y Coordinate (State Plane)":199851,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71522101949389,Longitude:-74.01124027078625,Location:"(40.71522101949389, -74.01124027078625)"},geometry:{type:"Point",coordinates:[-74.01124027078625,40.71522101949389]}},{type:"Feature",properties:{"Unique Key":51715838,"Created Date":"09/01/2021 10:51:00 PM","Closed Date":"09/02/2021 02:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10128,"Incident Address":"305 EAST   95 STREET","Street Name":"EAST   95 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:20:00 AM","Community Board":"08 MANHATTAN",BBL:1015580005,Borough:"MANHATTAN","X Coordinate (State Plane)":998885,"Y Coordinate (State Plane)":224694,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78339722067606,Longitude:-73.947153463463,Location:"(40.78339722067606, -73.947153463463)"},geometry:{type:"Point",coordinates:[-73.947153463463,40.78339722067606]}},{type:"Feature",properties:{"Unique Key":51716277,"Created Date":"09/01/2021 11:07:00 PM","Closed Date":"09/02/2021 10:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10019,"Incident Address":"714 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 49 ST","Cross Street 2":"W 50 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 10:10:00 AM","Community Board":"04 MANHATTAN",BBL:1010590001,Borough:"MANHATTAN","X Coordinate (State Plane)":986443,"Y Coordinate (State Plane)":217716,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76425628344515,Longitude:-73.99208342046582,Location:"(40.76425628344515, -73.99208342046582)"},geometry:{type:"Point",coordinates:[-73.99208342046582,40.76425628344515]}},{type:"Feature",properties:{"Unique Key":51715949,"Created Date":"09/01/2021 11:07:00 PM","Closed Date":"09/03/2021 11:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"236 WEST  138 STREET","Street Name":"WEST  138 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 11:30:00 AM","Community Board":"10 MANHATTAN",BBL:1020230053,Borough:"MANHATTAN","X Coordinate (State Plane)":999744,"Y Coordinate (State Plane)":237281,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81794362336055,Longitude:-73.94402259680882,Location:"(40.81794362336055, -73.94402259680882)"},geometry:{type:"Point",coordinates:[-73.94402259680882,40.81794362336055]}},{type:"Feature",properties:{"Unique Key":51713386,"Created Date":"09/01/2021 11:15:00 PM","Closed Date":"09/03/2021 02:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"23 EAST  109 STREET","Street Name":"EAST  109 STREET","Cross Street 1":"5 AVE","Cross Street 2":"MADISON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 02:30:00 PM","Community Board":"11 MANHATTAN",BBL:1016150014,Borough:"MANHATTAN","X Coordinate (State Plane)":998487,"Y Coordinate (State Plane)":229196,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79575464954403,Longitude:-73.9485810864412,Location:"(40.79575464954403, -73.9485810864412)"},geometry:{type:"Point",coordinates:[-73.9485810864412,40.79575464954403]}},{type:"Feature",properties:{"Unique Key":51718502,"Created Date":"09/01/2021 11:17:00 PM","Closed Date":"09/02/2021 10:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10013,"Incident Address":"26 THOMPSON STREET","Street Name":"THOMPSON STREET","Cross Street 1":"GRAND ST","Cross Street 2":"WATTS ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 10:30:00 AM","Community Board":"02 MANHATTAN",BBL:1004760054,Borough:"MANHATTAN","X Coordinate (State Plane)":983067,"Y Coordinate (State Plane)":202654,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.722915049889664,Longitude:-74.0042678996973,Location:"(40.722915049889664, -74.0042678996973)"},geometry:{type:"Point",coordinates:[-74.0042678996973,40.722915049889664]}},{type:"Feature",properties:{"Unique Key":51713383,"Created Date":"09/01/2021 11:21:00 PM","Closed Date":"09/03/2021 09:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10031,"Incident Address":"551 WEST  149 STREET","Street Name":"WEST  149 STREET","Cross Street 1":"AMSTERDAM AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:45:00 AM","Community Board":"09 MANHATTAN",BBL:1020810010,Borough:"MANHATTAN","X Coordinate (State Plane)":998881,"Y Coordinate (State Plane)":241079,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8283695267462,Longitude:-73.94713219888115,Location:"(40.8283695267462, -73.94713219888115)"},geometry:{type:"Point",coordinates:[-73.94713219888115,40.8283695267462]}},{type:"Feature",properties:{"Unique Key":51721620,"Created Date":"09/01/2021 11:29:00 PM","Closed Date":"09/03/2021 01:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10034,"Incident Address":"132 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"DYCKMAN ST","Cross Street 2":"ACADEMY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:35:00 AM","Community Board":"12 MANHATTAN",BBL:1022240031,Borough:"MANHATTAN","X Coordinate (State Plane)":1005174,"Y Coordinate (State Plane)":254136,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.864194471327956,Longitude:-73.92435227538378,Location:"(40.864194471327956, -73.92435227538378)"},geometry:{type:"Point",coordinates:[-73.92435227538378,40.864194471327956]}},{type:"Feature",properties:{"Unique Key":51713050,"Created Date":"09/01/2021 11:30:00 PM","Closed Date":"09/02/2021 04:15:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10030,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"FREDERICK DOUGLAS BOULEVARD","Intersection Street 2":"WEST 145 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 04:15:00 AM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1000326,"Y Coordinate (State Plane)":239064,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.822836414306245,Longitude:-73.94191565088148,Location:"(40.822836414306245, -73.94191565088148)"},geometry:{type:"Point",coordinates:[-73.94191565088148,40.822836414306245]}},{type:"Feature",properties:{"Unique Key":51722530,"Created Date":"09/01/2021 11:34:00 PM","Closed Date":"09/03/2021 03:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"132 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"DYCKMAN ST","Cross Street 2":"ACADEMY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 03:30:00 PM","Community Board":"12 MANHATTAN",BBL:1022240031,Borough:"MANHATTAN","X Coordinate (State Plane)":1005174,"Y Coordinate (State Plane)":254136,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.864194471327956,Longitude:-73.92435227538378,Location:"(40.864194471327956, -73.92435227538378)"},geometry:{type:"Point",coordinates:[-73.92435227538378,40.864194471327956]}},{type:"Feature",properties:{"Unique Key":51728851,"Created Date":"09/01/2021 11:35:00 PM","Closed Date":"09/02/2021 05:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10009,"Incident Address":"368 EAST   10 STREET","Street Name":"EAST   10 STREET","Cross Street 1":"AVENUE B","Cross Street 2":"AVENUE C","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:15:00 PM","Community Board":"03 MANHATTAN",BBL:1003920017,Borough:"MANHATTAN","X Coordinate (State Plane)":990147,"Y Coordinate (State Plane)":203911,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72636332342909,Longitude:-73.97872433894062,Location:"(40.72636332342909, -73.97872433894062)"},geometry:{type:"Point",coordinates:[-73.97872433894062,40.72636332342909]}},{type:"Feature",properties:{"Unique Key":51728630,"Created Date":"09/01/2021 11:35:00 PM","Closed Date":"09/04/2021 09:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10034,"Incident Address":"132 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"DYCKMAN ST","Cross Street 2":"ACADEMY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 09:10:00 AM","Community Board":"12 MANHATTAN",BBL:1022240031,Borough:"MANHATTAN","X Coordinate (State Plane)":1005174,"Y Coordinate (State Plane)":254136,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.864194471327956,Longitude:-73.92435227538378,Location:"(40.864194471327956, -73.92435227538378)"},geometry:{type:"Point",coordinates:[-73.92435227538378,40.864194471327956]}},{type:"Feature",properties:{"Unique Key":51721821,"Created Date":"09/01/2021 11:39:00 PM","Closed Date":"09/03/2021 03:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10039,"Incident Address":"210 WEST  150 STREET","Street Name":"WEST  150 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 03:00:00 AM","Community Board":"10 MANHATTAN",BBL:1020350001,Borough:"MANHATTAN","X Coordinate (State Plane)":1001574,"Y Coordinate (State Plane)":239877,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8250655085719,Longitude:-73.9374043925822,Location:"(40.8250655085719, -73.9374043925822)"},geometry:{type:"Point",coordinates:[-73.9374043925822,40.8250655085719]}},{type:"Feature",properties:{"Unique Key":51713303,"Created Date":"09/01/2021 11:42:00 PM","Closed Date":"09/03/2021 12:25:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10001,"Incident Address":"427 WEST   26 STREET","Street Name":"WEST   26 STREET","Cross Street 1":"9 AVE","Cross Street 2":"10 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 12:25:00 PM","Community Board":"04 MANHATTAN",BBL:1007240015,Borough:"MANHATTAN","X Coordinate (State Plane)":983840,"Y Coordinate (State Plane)":212178,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.749056147946476,Longitude:-74.00147973416202,Location:"(40.749056147946476, -74.00147973416202)"},geometry:{type:"Point",coordinates:[-74.00147973416202,40.749056147946476]}},{type:"Feature",properties:{"Unique Key":51723331,"Created Date":"09/01/2021 11:43:00 PM","Closed Date":"09/03/2021 03:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10021,"Incident Address":"321 EAST   69 STREET","Street Name":"EAST   69 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 03:40:00 AM","Community Board":"08 MANHATTAN",BBL:1014440013,Borough:"MANHATTAN","X Coordinate (State Plane)":995721,"Y Coordinate (State Plane)":218491,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.766376288022975,Longitude:-73.9585891574314,Location:"(40.766376288022975, -73.9585891574314)"},geometry:{type:"Point",coordinates:[-73.9585891574314,40.766376288022975]}},{type:"Feature",properties:{"Unique Key":51729222,"Created Date":"09/01/2021 11:45:00 PM","Closed Date":"09/03/2021 12:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10027,"Incident Address":"316 WEST  121 STREET","Street Name":"WEST  121 STREET","Cross Street 1":"8 AVE","Cross Street 2":"MANHATTAN AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection inspected your complaint and cleaned the catch basin or inlet. If the condition returns, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:15:00 PM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":997015,"Y Coordinate (State Plane)":233641,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.807957204492084,Longitude:-73.95388896829371,Location:"(40.807957204492084, -73.95388896829371)"},geometry:{type:"Point",coordinates:[-73.95388896829371,40.807957204492084]}},{type:"Feature",properties:{"Unique Key":51727346,"Created Date":"09/01/2021 11:53:00 PM","Closed Date":"09/03/2021 10:15:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10031,"Incident Address":"611 WEST  148 STREET","Street Name":"WEST  148 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"RIVERSIDE DR","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:15:00 AM","Community Board":"09 MANHATTAN",BBL:1020950023,Borough:"MANHATTAN","X Coordinate (State Plane)":998139,"Y Coordinate (State Plane)":241193,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.82868362208559,Longitude:-73.94981311246337,Location:"(40.82868362208559, -73.94981311246337)"},geometry:{type:"Point",coordinates:[-73.94981311246337,40.82868362208559]}},{type:"Feature",properties:{"Unique Key":51719915,"Created Date":"09/01/2021 11:54:00 PM","Closed Date":"09/03/2021 11:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10027,"Incident Address":"15 WEST  123 STREET","Street Name":"WEST  123 STREET","Cross Street 1":"MT MORRIS PARK W","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection inspected your complaint and cleaned the catch basin or inlet. If the condition returns, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:40:00 AM","Community Board":"10 MANHATTAN",BBL:1017210045,Borough:"MANHATTAN","X Coordinate (State Plane)":999429,"Y Coordinate (State Plane)":232906,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80593601524096,Longitude:-73.9451705358527,Location:"(40.80593601524096, -73.9451705358527)"},geometry:{type:"Point",coordinates:[-73.9451705358527,40.80593601524096]}},{type:"Feature",properties:{"Unique Key":51716520,"Created Date":"09/02/2021 12:02:00 AM","Closed Date":"09/03/2021 10:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10031,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"RIVERSIDE DRIVE","Intersection Street 2":"WEST 150 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 10:50:00 AM","Community Board":"09 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":998173,"Y Coordinate (State Plane)":241761,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.830242565707835,Longitude:-73.94968907717427,Location:"(40.830242565707835, -73.94968907717427)"},geometry:{type:"Point",coordinates:[-73.94968907717427,40.830242565707835]}},{type:"Feature",properties:{"Unique Key":51715442,"Created Date":"09/02/2021 12:05:00 AM","Closed Date":"09/03/2021 11:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10019,"Incident Address":"714 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 49 ST","Cross Street 2":"W 50 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:10:00 AM","Community Board":"04 MANHATTAN",BBL:1010590001,Borough:"MANHATTAN","X Coordinate (State Plane)":986443,"Y Coordinate (State Plane)":217716,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76425628344515,Longitude:-73.99208342046582,Location:"(40.76425628344515, -73.99208342046582)"},geometry:{type:"Point",coordinates:[-73.99208342046582,40.76425628344515]}},{type:"Feature",properties:{"Unique Key":51720213,"Created Date":"09/02/2021 12:06:00 AM","Closed Date":"09/04/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10014,"Incident Address":"31 CORNELIA STREET","Street Name":"CORNELIA STREET","Cross Street 1":"W 4 ST","Cross Street 2":"BLEECKER ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/04/2021 01:30:00 PM","Community Board":"02 MANHATTAN",BBL:1005900047,Borough:"MANHATTAN","X Coordinate (State Plane)":983580,"Y Coordinate (State Plane)":205721,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73133327170276,Longitude:-74.0024174590359,Location:"(40.73133327170276, -74.0024174590359)"},geometry:{type:"Point",coordinates:[-74.0024174590359,40.73133327170276]}},{type:"Feature",properties:{"Unique Key":51727333,"Created Date":"09/02/2021 12:14:00 AM","Closed Date":"09/03/2021 11:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10039,"Incident Address":"255 WEST  148 STREET","Street Name":"WEST  148 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:10:00 AM","Community Board":"10 MANHATTAN",BBL:1020347501,Borough:"MANHATTAN","X Coordinate (State Plane)":1001071,"Y Coordinate (State Plane)":239571,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8242265979182,Longitude:-73.93922261412608,Location:"(40.8242265979182, -73.93922261412608)"},geometry:{type:"Point",coordinates:[-73.93922261412608,40.8242265979182]}},{type:"Feature",properties:{"Unique Key":51724821,"Created Date":"09/02/2021 12:14:00 AM","Closed Date":"09/03/2021 10:25:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"304 WEST  140 STREET","Street Name":"WEST  140 STREET","Cross Street 1":"FREDERICK DOUGLASS BLVD","Cross Street 2":"EDGECOMBE AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:25:00 AM","Community Board":"10 MANHATTAN",BBL:1020420020,Borough:"MANHATTAN","X Coordinate (State Plane)":999589,"Y Coordinate (State Plane)":237961,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81981030212251,Longitude:-73.94458103319248,Location:"(40.81981030212251, -73.94458103319248)"},geometry:{type:"Point",coordinates:[-73.94458103319248,40.81981030212251]}},{type:"Feature",properties:{"Unique Key":51715604,"Created Date":"09/02/2021 12:17:00 AM","Closed Date":"09/03/2021 10:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10037,"Incident Address":"2301 5 AVENUE","Street Name":"5 AVENUE","Cross Street 1":"HARLEM RIVER DRV NB EN E 139 ST","Cross Street 2":"W 141 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:45:00 AM","Community Board":"11 MANHATTAN",BBL:1017640001,Borough:"MANHATTAN","X Coordinate (State Plane)":1002072,"Y Coordinate (State Plane)":236393,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.815501923082124,Longitude:-73.93561425716618,Location:"(40.815501923082124, -73.93561425716618)"},geometry:{type:"Point",coordinates:[-73.93561425716618,40.815501923082124]}},{type:"Feature",properties:{"Unique Key":51726831,"Created Date":"09/02/2021 12:45:00 AM","Closed Date":"09/03/2021 05:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10013,"Incident Address":"137 WEST BROADWAY","Street Name":"WEST BROADWAY","Cross Street 1":"DUANE ST","Cross Street 2":"THOMAS ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 05:40:00 PM","Community Board":"01 MANHATTAN",BBL:1001470013,Borough:"MANHATTAN","X Coordinate (State Plane)":981978,"Y Coordinate (State Plane)":200428,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71680500334347,Longitude:-74.00819592493981,Location:"(40.71680500334347, -74.00819592493981)"},geometry:{type:"Point",coordinates:[-74.00819592493981,40.71680500334347]}},{type:"Feature",properties:{"Unique Key":51719800,"Created Date":"09/02/2021 12:45:00 AM","Closed Date":"09/02/2021 01:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10014,"Incident Address":"561 WEST STREET","Street Name":"WEST STREET","Cross Street 1":"GANSEVOORT ST","Cross Street 2":"LITTLE WEST 12 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 01:15:00 PM","Community Board":"02 MANHATTAN",BBL:1006440001,Borough:"MANHATTAN","X Coordinate (State Plane)":981694,"Y Coordinate (State Plane)":208934,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.740151819776095,Longitude:-74.00922364647828,Location:"(40.740151819776095, -74.00922364647828)"},geometry:{type:"Point",coordinates:[-74.00922364647828,40.740151819776095]}},{type:"Feature",properties:{"Unique Key":51713592,"Created Date":"09/02/2021 01:16:00 AM","Closed Date":"09/03/2021 09:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10031,"Incident Address":"511 WEST  152 STREET","Street Name":"WEST  152 STREET","Cross Street 1":"AMSTERDAM AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:30:00 AM","Community Board":"09 MANHATTAN",BBL:1020840124,Borough:"MANHATTAN","X Coordinate (State Plane)":999459,"Y Coordinate (State Plane)":241651,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.829938526400326,Longitude:-73.94504235172789,Location:"(40.829938526400326, -73.94504235172789)"},geometry:{type:"Point",coordinates:[-73.94504235172789,40.829938526400326]}},{type:"Feature",properties:{"Unique Key":51713564,"Created Date":"09/02/2021 03:52:00 AM","Closed Date":"09/03/2021 09:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"319 EAST  105 STREET","Street Name":"EAST  105 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:10:00 AM","Community Board":"11 MANHATTAN",BBL:1016777503,Borough:"MANHATTAN","X Coordinate (State Plane)":1000352,"Y Coordinate (State Plane)":226920,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78950444356466,Longitude:-73.94185083707163,Location:"(40.78950444356466, -73.94185083707163)"},geometry:{type:"Point",coordinates:[-73.94185083707163,40.78950444356466]}},{type:"Feature",properties:{"Unique Key":51719673,"Created Date":"09/02/2021 04:51:00 AM","Closed Date":"09/04/2021 11:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10009,"Incident Address":"24 AVENUE D","Street Name":"AVENUE D","Cross Street 1":"E 3 ST","Cross Street 2":"E 4 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/04/2021 11:40:00 AM","Community Board":"03 MANHATTAN",BBL:1003560001,Borough:"MANHATTAN","X Coordinate (State Plane)":990311,"Y Coordinate (State Plane)":201880,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72078860967276,Longitude:-73.97813447592229,Location:"(40.72078860967276, -73.97813447592229)"},geometry:{type:"Point",coordinates:[-73.97813447592229,40.72078860967276]}},{type:"Feature",properties:{"Unique Key":51727464,"Created Date":"09/02/2021 05:04:00 AM","Closed Date":"09/03/2021 11:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10018,"Incident Address":"465 12 AVENUE","Street Name":"12 AVENUE","Cross Street 1":"W 40 ST","Cross Street 2":"W 41 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:30:00 AM","Community Board":"04 MANHATTAN",BBL:1011070005,Borough:"MANHATTAN","X Coordinate (State Plane)":983670,"Y Coordinate (State Plane)":216500,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76091892934369,Longitude:-74.00209365529308,Location:"(40.76091892934369, -74.00209365529308)"},geometry:{type:"Point",coordinates:[-74.00209365529308,40.76091892934369]}},{type:"Feature",properties:{"Unique Key":51727072,"Created Date":"09/02/2021 05:52:00 AM","Closed Date":"12/24/2021 02:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10027,"Incident Address":"WEST  124 STREET","Street Name":"WEST  124 STREET","Cross Street 1":"FREDERICK DOUGLASS BOULEVARD","Cross Street 2":"MANHATTAN AVENUE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"BLOCKFACE",City:"MANHATTAN",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and has performed repair work.","Resolution Action Updated Date":"12/24/2021 02:20:00 PM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":997434,"Y Coordinate (State Plane)":234309,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80979006390317,Longitude:-73.95237410222053,Location:"(40.80979006390317, -73.95237410222053)"},geometry:{type:"Point",coordinates:[-73.95237410222053,40.80979006390317]}},{type:"Feature",properties:{"Unique Key":51713685,"Created Date":"09/02/2021 06:31:00 AM","Closed Date":"09/02/2021 08:25:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10039,"Incident Address":"2987 8 AVENUE","Street Name":"8 AVENUE","Cross Street 1":"HARLEM RIVER DRIVE SERVICE RD W","Cross Street 2":"HARLEM RIVER DRIVE SERVICE RD W","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Surcharge conditions have been confirmed due to rain intensity or volume.","Resolution Action Updated Date":"09/02/2021 08:25:00 AM","Community Board":"10 MANHATTAN",BBL:1021060050,Borough:"MANHATTAN","X Coordinate (State Plane)":1001924,"Y Coordinate (State Plane)":241941,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.830729904331186,Longitude:-73.93613432501654,Location:"(40.830729904331186, -73.93613432501654)"},geometry:{type:"Point",coordinates:[-73.93613432501654,40.830729904331186]}},{type:"Feature",properties:{"Unique Key":51713670,"Created Date":"09/02/2021 06:37:00 AM","Closed Date":"09/03/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"1425 AMSTERDAM AVENUE","Street Name":"AMSTERDAM AVENUE","Cross Street 1":"W 130 ST","Cross Street 2":"W 131 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:30:00 PM","Community Board":"09 MANHATTAN",BBL:1019700002,Borough:"MANHATTAN","X Coordinate (State Plane)":996868,"Y Coordinate (State Plane)":236535,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.815900639148985,Longitude:-73.95441453630735,Location:"(40.815900639148985, -73.95441453630735)"},geometry:{type:"Point",coordinates:[-73.95441453630735,40.815900639148985]}},{type:"Feature",properties:{"Unique Key":51714435,"Created Date":"09/02/2021 07:15:00 AM","Closed Date":"09/03/2021 04:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10023,"Incident Address":"114 WEST   74 STREET","Street Name":"WEST   74 STREET","Cross Street 1":"COLUMBUS AVE","Cross Street 2":"AMSTERDAM AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 04:20:00 AM","Community Board":"07 MANHATTAN",BBL:1011450138,Borough:"MANHATTAN","X Coordinate (State Plane)":990226,"Y Coordinate (State Plane)":223077,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77896908082277,Longitude:-73.97842228324052,Location:"(40.77896908082277, -73.97842228324052)"},geometry:{type:"Point",coordinates:[-73.97842228324052,40.77896908082277]}},{type:"Feature",properties:{"Unique Key":51722884,"Created Date":"09/02/2021 08:03:00 AM","Closed Date":"09/03/2021 11:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10037,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"EAST 138 STREET","Intersection Street 2":"MADISON AVENUE","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:50:00 AM","Community Board":"11 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1002289,"Y Coordinate (State Plane)":235866,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8140550153757,Longitude:-73.93483171548912,Location:"(40.8140550153757, -73.93483171548912)"},geometry:{type:"Point",coordinates:[-73.93483171548912,40.8140550153757]}},{type:"Feature",properties:{"Unique Key":51729156,"Created Date":"09/02/2021 08:20:00 AM","Closed Date":"09/03/2021 10:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10030,"Incident Address":"297 WEST  137 STREET","Street Name":"WEST  137 STREET","Cross Street 1":"NEW YORK RENS CT","Cross Street 2":"8 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/03/2021 10:10:00 AM","Community Board":"10 MANHATTAN",BBL:1020237503,Borough:"MANHATTAN","X Coordinate (State Plane)":999435,"Y Coordinate (State Plane)":237161,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81761479370668,Longitude:-73.94513923679516,Location:"(40.81761479370668, -73.94513923679516)"},geometry:{type:"Point",coordinates:[-73.94513923679516,40.81761479370668]}},{type:"Feature",properties:{"Unique Key":51715157,"Created Date":"09/02/2021 08:34:00 AM","Closed Date":"09/03/2021 11:05:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10027,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"8 AVENUE","Intersection Street 2":"WEST 131 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/03/2021 11:05:00 AM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":998528,"Y Coordinate (State Plane)":235821,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81393838213159,Longitude:-73.9484189199214,Location:"(40.81393838213159, -73.9484189199214)"},geometry:{type:"Point",coordinates:[-73.9484189199214,40.81393838213159]}},{type:"Feature",properties:{"Unique Key":51722376,"Created Date":"09/02/2021 08:34:00 AM","Closed Date":"09/03/2021 12:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"227 WEST  137 STREET","Street Name":"WEST  137 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 12:30:00 PM","Community Board":"10 MANHATTAN",BBL:1020230118,Borough:"MANHATTAN","X Coordinate (State Plane)":999818,"Y Coordinate (State Plane)":236949,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81703224667031,Longitude:-73.94375601658022,Location:"(40.81703224667031, -73.94375601658022)"},geometry:{type:"Point",coordinates:[-73.94375601658022,40.81703224667031]}},{type:"Feature",properties:{"Unique Key":51718481,"Created Date":"09/02/2021 08:46:00 AM","Closed Date":"09/03/2021 12:10:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10013,"Incident Address":"340 WEST BROADWAY","Street Name":"WEST BROADWAY","Cross Street 1":"GRAND ST","Cross Street 2":"BROOME ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:10:00 PM","Community Board":"02 MANHATTAN",BBL:1004760081,Borough:"MANHATTAN","X Coordinate (State Plane)":983246,"Y Coordinate (State Plane)":202529,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72257197725354,Longitude:-74.00362210417377,Location:"(40.72257197725354, -74.00362210417377)"},geometry:{type:"Point",coordinates:[-74.00362210417377,40.72257197725354]}},{type:"Feature",properties:{"Unique Key":51722899,"Created Date":"09/02/2021 09:07:00 AM","Closed Date":"09/02/2021 12:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10035,"Incident Address":"2262 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 116 ST","Cross Street 2":"E 117 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 12:00:00 PM","Community Board":"11 MANHATTAN",BBL:1017100102,Borough:"MANHATTAN","X Coordinate (State Plane)":1002181,"Y Coordinate (State Plane)":229369,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.796222763838294,Longitude:-73.93523923204485,Location:"(40.796222763838294, -73.93523923204485)"},geometry:{type:"Point",coordinates:[-73.93523923204485,40.796222763838294]}},{type:"Feature",properties:{"Unique Key":51727462,"Created Date":"09/02/2021 09:07:00 AM","Closed Date":"09/03/2021 12:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10034,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"NAGLE AVENUE","Intersection Street 2":"ACADEMY STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:30:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1005689,"Y Coordinate (State Plane)":253487,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.862411927499416,Longitude:-73.92249244372366,Location:"(40.862411927499416, -73.92249244372366)"},geometry:{type:"Point",coordinates:[-73.92249244372366,40.862411927499416]}},{type:"Feature",properties:{"Unique Key":51724999,"Created Date":"09/02/2021 09:30:00 AM","Closed Date":"09/02/2021 01:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"201 LENOX AVENUE","Street Name":"LENOX AVENUE","Cross Street 1":"W 120 ST","Cross Street 2":"W 121 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:40:00 PM","Community Board":"10 MANHATTAN",BBL:1019050029,Borough:"MANHATTAN","X Coordinate (State Plane)":998715,"Y Coordinate (State Plane)":232450,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.804685618836274,Longitude:-73.94775062288356,Location:"(40.804685618836274, -73.94775062288356)"},geometry:{type:"Point",coordinates:[-73.94775062288356,40.804685618836274]}},{type:"Feature",properties:{"Unique Key":51724312,"Created Date":"09/02/2021 09:36:00 AM","Closed Date":"09/04/2021 03:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10034,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"ACADEMY STREET","Intersection Street 2":"10 AVENUE","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 03:00:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1005957,"Y Coordinate (State Plane)":252940,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.860909923099676,Longitude:-73.92152532619549,Location:"(40.860909923099676, -73.92152532619549)"},geometry:{type:"Point",coordinates:[-73.92152532619549,40.860909923099676]}},{type:"Feature",properties:{"Unique Key":51726481,"Created Date":"09/02/2021 09:36:00 AM","Closed Date":"09/04/2021 11:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10002,"Incident Address":"442 EAST HOUSTON STREET","Street Name":"EAST HOUSTON STREET","Cross Street 1":"LILLIAN WALD DR","Cross Street 2":"BARUCH DR","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 11:00:00 AM","Community Board":"03 MANHATTAN",BBL:1003560100,Borough:"MANHATTAN","X Coordinate (State Plane)":990375,"Y Coordinate (State Plane)":201446,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71959734020397,Longitude:-73.97790398594327,Location:"(40.71959734020397, -73.97790398594327)"},geometry:{type:"Point",coordinates:[-73.97790398594327,40.71959734020397]}},{type:"Feature",properties:{"Unique Key":51716469,"Created Date":"09/02/2021 09:40:00 AM","Closed Date":"09/03/2021 12:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10034,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"ACADEMY STREET","Intersection Street 2":"10 AVENUE","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:50:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1005957,"Y Coordinate (State Plane)":252940,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.860909923099676,Longitude:-73.92152532619549,Location:"(40.860909923099676, -73.92152532619549)"},geometry:{type:"Point",coordinates:[-73.92152532619549,40.860909923099676]}},{type:"Feature",properties:{"Unique Key":51718202,"Created Date":"09/02/2021 09:41:00 AM","Closed Date":"09/03/2021 12:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10001,"Incident Address":"313 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 28 ST","Cross Street 2":"W 29 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 12:00:00 PM","Community Board":"04 MANHATTAN",BBL:1007000029,Borough:"MANHATTAN","X Coordinate (State Plane)":983744,"Y Coordinate (State Plane)":212859,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.75092531614621,Longitude:-74.00182625974348,Location:"(40.75092531614621, -74.00182625974348)"},geometry:{type:"Point",coordinates:[-74.00182625974348,40.75092531614621]}},{type:"Feature",properties:{"Unique Key":51718333,"Created Date":"09/02/2021 09:52:00 AM","Closed Date":"09/03/2021 08:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10035,"Incident Address":"408 EAST  120 STREET","Street Name":"EAST  120 STREET","Cross Street 1":"1 AVE","Cross Street 2":"PLEASANT AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 08:30:00 AM","Community Board":"11 MANHATTAN",BBL:1018070044,Borough:"MANHATTAN","X Coordinate (State Plane)":1002770,"Y Coordinate (State Plane)":230164,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79840360723411,Longitude:-73.93310976954378,Location:"(40.79840360723411, -73.93310976954378)"},geometry:{type:"Point",coordinates:[-73.93310976954378,40.79840360723411]}},{type:"Feature",properties:{"Unique Key":51720568,"Created Date":"09/02/2021 09:53:00 AM","Closed Date":"09/02/2021 06:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10010,"Incident Address":"321 EAST   22 STREET","Street Name":"EAST   22 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 06:15:00 PM","Community Board":"06 MANHATTAN",BBL:1009280009,Borough:"MANHATTAN","X Coordinate (State Plane)":989603,"Y Coordinate (State Plane)":207762,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73693371969191,Longitude:-73.98068396117158,Location:"(40.73693371969191, -73.98068396117158)"},geometry:{type:"Point",coordinates:[-73.98068396117158,40.73693371969191]}},{type:"Feature",properties:{"Unique Key":51722637,"Created Date":"09/02/2021 09:59:00 AM","Closed Date":"09/04/2021 01:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10026,"Incident Address":"70 WEST  119 STREET","Street Name":"WEST  119 STREET","Cross Street 1":"5 AVE","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 01:00:00 PM","Community Board":"10 MANHATTAN",BBL:1017170063,Borough:"MANHATTAN","X Coordinate (State Plane)":998901,"Y Coordinate (State Plane)":231998,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80344469681812,Longitude:-73.94707975429094,Location:"(40.80344469681812, -73.94707975429094)"},geometry:{type:"Point",coordinates:[-73.94707975429094,40.80344469681812]}},{type:"Feature",properties:{"Unique Key":51715341,"Created Date":"09/02/2021 10:00:00 AM","Closed Date":"09/03/2021 12:55:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10065,"Incident Address":"416 EAST   65 STREET","Street Name":"EAST   65 STREET","Cross Street 1":"1 AVE","Cross Street 2":"YORK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:55:00 PM","Community Board":"08 MANHATTAN",BBL:1014590030,Borough:"MANHATTAN","X Coordinate (State Plane)":995790,"Y Coordinate (State Plane)":217253,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76297820824683,Longitude:-73.95834218965943,Location:"(40.76297820824683, -73.95834218965943)"},geometry:{type:"Point",coordinates:[-73.95834218965943,40.76297820824683]}},{type:"Feature",properties:{"Unique Key":51726617,"Created Date":"09/02/2021 10:02:00 AM","Closed Date":"09/02/2021 10:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10032,"Incident Address":"625 WEST  164 STREET","Street Name":"WEST  164 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"FT WASHINGTON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 10:50:00 AM","Community Board":"12 MANHATTAN",BBL:1021370152,Borough:"MANHATTAN","X Coordinate (State Plane)":1000210,"Y Coordinate (State Plane)":244845,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.83870380788671,Longitude:-73.94232101803048,Location:"(40.83870380788671, -73.94232101803048)"},geometry:{type:"Point",coordinates:[-73.94232101803048,40.83870380788671]}},{type:"Feature",properties:{"Unique Key":51729397,"Created Date":"09/02/2021 10:06:00 AM","Closed Date":"09/03/2021 01:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"120 WEST  127 STREET","Street Name":"WEST  127 STREET","Cross Street 1":"LENOX AVE","Cross Street 2":"ADAM CLAYTON POWELL JR BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:15:00 PM","Community Board":"10 MANHATTAN",BBL:1019110042,Borough:"MANHATTAN","X Coordinate (State Plane)":999366,"Y Coordinate (State Plane)":234177,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.809424666237135,Longitude:-73.94539524198386,Location:"(40.809424666237135, -73.94539524198386)"},geometry:{type:"Point",coordinates:[-73.94539524198386,40.809424666237135]}},{type:"Feature",properties:{"Unique Key":51719930,"Created Date":"09/02/2021 10:06:00 AM","Closed Date":"09/02/2021 10:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"198 NAGLE AVENUE","Street Name":"NAGLE AVENUE","Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 10:20:00 AM","Community Board":"12 MANHATTAN",BBL:1022170039,Borough:"MANHATTAN","X Coordinate (State Plane)":1005433,"Y Coordinate (State Plane)":253367,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.862083181837846,Longitude:-73.92341832905083,Location:"(40.862083181837846, -73.92341832905083)"},geometry:{type:"Point",coordinates:[-73.92341832905083,40.862083181837846]}},{type:"Feature",properties:{"Unique Key":51722163,"Created Date":"09/02/2021 10:14:00 AM","Closed Date":"09/03/2021 09:25:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10031,"Incident Address":"558 WEST  149 STREET","Street Name":"WEST  149 STREET","Cross Street 1":"AMSTERDAM AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 09:25:00 AM","Community Board":"09 MANHATTAN",BBL:1020800054,Borough:"MANHATTAN","X Coordinate (State Plane)":998834,"Y Coordinate (State Plane)":241098,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.82842175403897,Longitude:-73.94730198780587,Location:"(40.82842175403897, -73.94730198780587)"},geometry:{type:"Point",coordinates:[-73.94730198780587,40.82842175403897]}},{type:"Feature",properties:{"Unique Key":51722363,"Created Date":"09/02/2021 10:14:00 AM","Closed Date":"09/02/2021 06:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10010,"Incident Address":"121 EAST   24 STREET","Street Name":"EAST   24 STREET","Cross Street 1":"PARK AVE S","Cross Street 2":"LEXINGTON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 06:45:00 PM","Community Board":"05 MANHATTAN",BBL:1008800014,Borough:"MANHATTAN","X Coordinate (State Plane)":988436,"Y Coordinate (State Plane)":209042,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74044763163026,Longitude:-73.98489422703423,Location:"(40.74044763163026, -73.98489422703423)"},geometry:{type:"Point",coordinates:[-73.98489422703423,40.74044763163026]}},{type:"Feature",properties:{"Unique Key":51722292,"Created Date":"09/02/2021 10:15:00 AM","Closed Date":"09/03/2021 11:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10023,"Incident Address":"55 WEST END AVENUE","Street Name":"WEST END AVENUE","Cross Street 1":"W 62 ST","Cross Street 2":"THELONIOUS MONK CIR","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 11:00:00 AM","Community Board":"07 MANHATTAN",BBL:1011710063,Borough:"MANHATTAN","X Coordinate (State Plane)":987385,"Y Coordinate (State Plane)":221287,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77405746597447,Longitude:-73.9886811994225,Location:"(40.77405746597447, -73.9886811994225)"},geometry:{type:"Point",coordinates:[-73.9886811994225,40.77405746597447]}},{type:"Feature",properties:{"Unique Key":51713652,"Created Date":"09/02/2021 10:32:00 AM","Closed Date":"09/02/2021 05:05:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10009,"Incident Address":"111 EAST    7 STREET","Street Name":"EAST    7 STREET","Cross Street 1":"1 AVE","Cross Street 2":"AVENUE A","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:05:00 PM","Community Board":"03 MANHATTAN",BBL:1004350045,Borough:"MANHATTAN","X Coordinate (State Plane)":988474,"Y Coordinate (State Plane)":203988,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72657562678744,Longitude:-73.98476027163207,Location:"(40.72657562678744, -73.98476027163207)"},geometry:{type:"Point",coordinates:[-73.98476027163207,40.72657562678744]}},{type:"Feature",properties:{"Unique Key":51720132,"Created Date":"09/02/2021 10:33:00 AM","Closed Date":"09/03/2021 01:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10065,"Incident Address":"429 EAST   64 STREET","Street Name":"EAST   64 STREET","Cross Street 1":"1 AVE","Cross Street 2":"YORK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:15:00 PM","Community Board":"08 MANHATTAN",BBL:1014590022,Borough:"MANHATTAN","X Coordinate (State Plane)":995716,"Y Coordinate (State Plane)":217003,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.762292118946036,Longitude:-73.95860974584663,Location:"(40.762292118946036, -73.95860974584663)"},geometry:{type:"Point",coordinates:[-73.95860974584663,40.762292118946036]}},{type:"Feature",properties:{"Unique Key":51713711,"Created Date":"09/02/2021 10:38:00 AM","Closed Date":"09/03/2021 12:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"273 WEST  136 STREET","Street Name":"WEST  136 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Surcharge conditions have been confirmed due to rain intensity or volume.","Resolution Action Updated Date":"09/03/2021 12:45:00 PM","Community Board":"10 MANHATTAN",BBL:1019427501,Borough:"MANHATTAN","X Coordinate (State Plane)":999440,"Y Coordinate (State Plane)":236861,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8167913694731,Longitude:-73.94512185168155,Location:"(40.8167913694731, -73.94512185168155)"},geometry:{type:"Point",coordinates:[-73.94512185168155,40.8167913694731]}},{type:"Feature",properties:{"Unique Key":51723062,"Created Date":"09/02/2021 10:45:00 AM","Closed Date":"09/03/2021 08:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10035,"Incident Address":"2385 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 120 ST","Cross Street 2":"PALADINO AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 08:50:00 AM","Community Board":"11 MANHATTAN",BBL:1017970001,Borough:"MANHATTAN","X Coordinate (State Plane)":1002927,"Y Coordinate (State Plane)":230726,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.799945813070316,Longitude:-73.93254115658634,Location:"(40.799945813070316, -73.93254115658634)"},geometry:{type:"Point",coordinates:[-73.93254115658634,40.799945813070316]}},{type:"Feature",properties:{"Unique Key":51718705,"Created Date":"09/02/2021 10:53:00 AM","Closed Date":"09/03/2021 01:10:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10009,"Incident Address":"532 EAST   12 STREET","Street Name":"EAST   12 STREET","Cross Street 1":"AVENUE A","Cross Street 2":"AVENUE B","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:10:00 PM","Community Board":"03 MANHATTAN",BBL:1004050024,Borough:"MANHATTAN","X Coordinate (State Plane)":989669,"Y Coordinate (State Plane)":204765,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7287076510075,Longitude:-73.98044821721834,Location:"(40.7287076510075, -73.98044821721834)"},geometry:{type:"Point",coordinates:[-73.98044821721834,40.7287076510075]}},{type:"Feature",properties:{"Unique Key":51716384,"Created Date":"09/02/2021 10:57:00 AM","Closed Date":"09/03/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10048,"Incident Address":"138 WEST STREET","Street Name":"WEST STREET","Cross Street 1":"LIBERTY ST","Cross Street 2":"VESEY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:30:00 PM","Community Board":"01 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":980412,"Y Coordinate (State Plane)":199294,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71369190380233,Longitude:-74.01384440617939,Location:"(40.71369190380233, -74.01384440617939)"},geometry:{type:"Point",coordinates:[-74.01384440617939,40.71369190380233]}},{type:"Feature",properties:{"Unique Key":51727094,"Created Date":"09/02/2021 11:09:00 AM","Closed Date":"09/03/2021 09:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"2201 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 112 ST","Cross Street 2":"E 114 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:55:00 AM","Community Board":"11 MANHATTAN",BBL:1016840001,Borough:"MANHATTAN","X Coordinate (State Plane)":1001762,"Y Coordinate (State Plane)":228623,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79417603681146,Longitude:-73.93675446451017,Location:"(40.79417603681146, -73.93675446451017)"},geometry:{type:"Point",coordinates:[-73.93675446451017,40.79417603681146]}},{type:"Feature",properties:{"Unique Key":51720225,"Created Date":"09/02/2021 11:11:00 AM","Closed Date":"09/02/2021 05:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10003,"Incident Address":"328 EAST   19 STREET","Street Name":"EAST   19 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:50:00 PM","Community Board":"06 MANHATTAN",BBL:1009240050,Borough:"MANHATTAN","X Coordinate (State Plane)":989350,"Y Coordinate (State Plane)":207043,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73496039174205,Longitude:-73.98159744432803,Location:"(40.73496039174205, -73.98159744432803)"},geometry:{type:"Point",coordinates:[-73.98159744432803,40.73496039174205]}},{type:"Feature",properties:{"Unique Key":51712590,"Created Date":"09/02/2021 11:12:00 AM","Closed Date":"09/02/2021 05:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10128,"Incident Address":"210 EAST   95 STREET","Street Name":"EAST   95 STREET","Cross Street 1":"3 AVE","Cross Street 2":"2 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 05:40:00 PM","Community Board":"08 MANHATTAN",BBL:1015400042,Borough:"MANHATTAN","X Coordinate (State Plane)":998383,"Y Coordinate (State Plane)":224966,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7841446051619,Longitude:-73.94896559743964,Location:"(40.7841446051619, -73.94896559743964)"},geometry:{type:"Point",coordinates:[-73.94896559743964,40.7841446051619]}},{type:"Feature",properties:{"Unique Key":51715909,"Created Date":"09/02/2021 11:33:00 AM","Closed Date":"09/03/2021 12:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10011,"Incident Address":"243 WEST   24 STREET","Street Name":"WEST   24 STREET","Cross Street 1":"7 AVE","Cross Street 2":"8 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 12:45:00 PM","Community Board":"04 MANHATTAN",BBL:1007740014,Borough:"MANHATTAN","X Coordinate (State Plane)":985229,"Y Coordinate (State Plane)":210816,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74531775541729,Longitude:-73.99646688181572,Location:"(40.74531775541729, -73.99646688181572)"},geometry:{type:"Point",coordinates:[-73.99646688181572,40.74531775541729]}},{type:"Feature",properties:{"Unique Key":51718342,"Created Date":"09/02/2021 11:40:00 AM","Closed Date":"09/03/2021 11:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10017,"Incident Address":"424 MADISON AVENUE","Street Name":"MADISON AVENUE","Cross Street 1":"E 48 ST","Cross Street 2":"E 49 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 11:35:00 AM","Community Board":"05 MANHATTAN",BBL:1012840056,Borough:"MANHATTAN","X Coordinate (State Plane)":990828,"Y Coordinate (State Plane)":215059,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.75696132515915,Longitude:-73.97625647167831,Location:"(40.75696132515915, -73.97625647167831)"},geometry:{type:"Point",coordinates:[-73.97625647167831,40.75696132515915]}},{type:"Feature",properties:{"Unique Key":51720822,"Created Date":"09/02/2021 11:40:00 AM","Closed Date":"09/02/2021 11:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10040,"Incident Address":"112 NAGLE AVENUE","Street Name":"NAGLE AVENUE","Cross Street 1":"SICKLES ST","Cross Street 2":"ARDEN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 11:55:00 AM","Community Board":"12 MANHATTAN",BBL:1021740088,Borough:"MANHATTAN","X Coordinate (State Plane)":1004472,"Y Coordinate (State Plane)":252906,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.860820129878626,Longitude:-73.9268939658624,Location:"(40.860820129878626, -73.9268939658624)"},geometry:{type:"Point",coordinates:[-73.9268939658624,40.860820129878626]}},{type:"Feature",properties:{"Unique Key":51725504,"Created Date":"09/02/2021 11:43:00 AM","Closed Date":"09/03/2021 05:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Other Water Problem (Use Comments) (WZZ)","Location Type":null,"Incident Zip":10003,"Incident Address":"246 EAST   15 STREET","Street Name":"EAST   15 STREET","Cross Street 1":"RUTHERFORD PL","Cross Street 2":"2 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The status of this Service Request is currently not available online. Please call 311 for further assistance. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 05:40:00 PM","Community Board":"06 MANHATTAN",BBL:1008960026,Borough:"MANHATTAN","X Coordinate (State Plane)":988401,"Y Coordinate (State Plane)":206427,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73327011970919,Longitude:-73.9850221430027,Location:"(40.73327011970919, -73.9850221430027)"},geometry:{type:"Point",coordinates:[-73.9850221430027,40.73327011970919]}},{type:"Feature",properties:{"Unique Key":51713821,"Created Date":"09/02/2021 11:47:00 AM","Closed Date":"09/03/2021 09:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"241 EAST  115 STREET","Street Name":"EAST  115 STREET","Cross Street 1":"3 AVE","Cross Street 2":"2 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:35:00 AM","Community Board":"11 MANHATTAN",BBL:1016650022,Borough:"MANHATTAN","X Coordinate (State Plane)":1001150,"Y Coordinate (State Plane)":229507,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.796603568220654,Longitude:-73.93896251029072,Location:"(40.796603568220654, -73.93896251029072)"},geometry:{type:"Point",coordinates:[-73.93896251029072,40.796603568220654]}},{type:"Feature",properties:{"Unique Key":51727673,"Created Date":"09/02/2021 12:00:00 PM","Closed Date":"09/03/2021 01:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10003,"Incident Address":"313 EAST   14 STREET","Street Name":"EAST   14 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:40:00 AM","Community Board":"06 MANHATTAN",BBL:1009210009,Borough:"MANHATTAN","X Coordinate (State Plane)":988589,"Y Coordinate (State Plane)":206004,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73210899839949,Longitude:-73.98434406429587,Location:"(40.73210899839949, -73.98434406429587)"},geometry:{type:"Point",coordinates:[-73.98434406429587,40.73210899839949]}},{type:"Feature",properties:{"Unique Key":51716085,"Created Date":"09/02/2021 12:56:00 PM","Closed Date":"09/03/2021 11:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10022,"Incident Address":"168 EAST   57 STREET","Street Name":"EAST   57 STREET","Cross Street 1":"LEXINGTON AVE","Cross Street 2":"3 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 11:10:00 AM","Community Board":"06 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":993026,"Y Coordinate (State Plane)":216377,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.760576989314245,Longitude:-73.96832099151027,Location:"(40.760576989314245, -73.96832099151027)"},geometry:{type:"Point",coordinates:[-73.96832099151027,40.760576989314245]}},{type:"Feature",properties:{"Unique Key":51720304,"Created Date":"09/02/2021 01:03:00 PM","Closed Date":"09/03/2021 02:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10024,"Incident Address":"122 WEST   90 STREET","Street Name":"WEST   90 STREET","Cross Street 1":"COLUMBUS AVE","Cross Street 2":"AMSTERDAM AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 02:00:00 PM","Community Board":"07 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":992152,"Y Coordinate (State Plane)":226925,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.789529303513305,Longitude:-73.97146349326695,Location:"(40.789529303513305, -73.97146349326695)"},geometry:{type:"Point",coordinates:[-73.97146349326695,40.789529303513305]}},{type:"Feature",properties:{"Unique Key":51718779,"Created Date":"09/02/2021 01:06:00 PM","Closed Date":"09/03/2021 05:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10022,"Incident Address":"320 PARK AVENUE","Street Name":"PARK AVENUE","Cross Street 1":"E 50 ST","Cross Street 2":"E 51 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 05:10:00 AM","Community Board":"05 MANHATTAN",BBL:1012860035,Borough:"MANHATTAN","X Coordinate (State Plane)":991509,"Y Coordinate (State Plane)":215237,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.75744935684442,Longitude:-73.97379818556702,Location:"(40.75744935684442, -73.97379818556702)"},geometry:{type:"Point",coordinates:[-73.97379818556702,40.75744935684442]}},{type:"Feature",properties:{"Unique Key":51725222,"Created Date":"09/02/2021 01:37:00 PM","Closed Date":"09/03/2021 11:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10018,"Incident Address":"335 WEST   38 STREET","Street Name":"WEST   38 STREET","Cross Street 1":"8 AVE","Cross Street 2":"9 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 11:35:00 AM","Community Board":"04 MANHATTAN",BBL:1007620014,Borough:"MANHATTAN","X Coordinate (State Plane)":986261,"Y Coordinate (State Plane)":214412,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.755187693204796,Longitude:-73.99274141630195,Location:"(40.755187693204796, -73.99274141630195)"},geometry:{type:"Point",coordinates:[-73.99274141630195,40.755187693204796]}},{type:"Feature",properties:{"Unique Key":51719919,"Created Date":"09/02/2021 01:44:00 PM","Closed Date":"09/03/2021 10:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10030,"Incident Address":"138 WEST  135 STREET","Street Name":"WEST  135 STREET","Cross Street 1":"BASIL A PATERSON WAY","Cross Street 2":"7 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection inspected your complaint and cleaned the catch basin or inlet. If the condition returns, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 10:45:00 AM","Community Board":"10 MANHATTAN",BBL:1019190006,Borough:"MANHATTAN","X Coordinate (State Plane)":1000199,"Y Coordinate (State Plane)":236115,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8147424710932,Longitude:-73.94238152419612,Location:"(40.8147424710932, -73.94238152419612)"},geometry:{type:"Point",coordinates:[-73.94238152419612,40.8147424710932]}},{type:"Feature",properties:{"Unique Key":51720504,"Created Date":"09/02/2021 01:49:00 PM","Closed Date":"09/03/2021 10:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10128,"Incident Address":"327 EAST   93 STREET","Street Name":"EAST   93 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:20:00 AM","Community Board":"08 MANHATTAN",BBL:1015560016,Borough:"MANHATTAN","X Coordinate (State Plane)":998817,"Y Coordinate (State Plane)":224134,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78186028203478,Longitude:-73.94740022356223,Location:"(40.78186028203478, -73.94740022356223)"},geometry:{type:"Point",coordinates:[-73.94740022356223,40.78186028203478]}},{type:"Feature",properties:{"Unique Key":51718520,"Created Date":"09/02/2021 01:58:00 PM","Closed Date":"09/03/2021 01:05:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10014,"Incident Address":"51 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 13 ST","Cross Street 2":"W 14 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 01:05:00 PM","Community Board":"02 MANHATTAN",BBL:1006540031,Borough:"MANHATTAN","X Coordinate (State Plane)":981948,"Y Coordinate (State Plane)":209619,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74203204407016,Longitude:-74.00830729006049,Location:"(40.74203204407016, -74.00830729006049)"},geometry:{type:"Point",coordinates:[-74.00830729006049,40.74203204407016]}},{type:"Feature",properties:{"Unique Key":51718515,"Created Date":"09/02/2021 02:35:00 PM","Closed Date":"09/03/2021 04:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10038,"Incident Address":"10 CATHERINE SLIP","Street Name":"CATHERINE SLIP","Cross Street 1":"CATHERINE ST","Cross Street 2":"UNNAMED ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 04:40:00 PM","Community Board":"03 MANHATTAN",BBL:1001110100,Borough:"MANHATTAN","X Coordinate (State Plane)":985241,"Y Coordinate (State Plane)":197900,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.709866482366486,Longitude:-73.99642547704416,Location:"(40.709866482366486, -73.99642547704416)"},geometry:{type:"Point",coordinates:[-73.99642547704416,40.709866482366486]}},{type:"Feature",properties:{"Unique Key":51720245,"Created Date":"09/02/2021 02:51:00 PM","Closed Date":"09/03/2021 09:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10030,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"8 AVENUE","Intersection Street 2":"WEST 141 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 09:45:00 AM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":999812,"Y Coordinate (State Plane)":238138,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.820295727069976,Longitude:-73.94377493616386,Location:"(40.820295727069976, -73.94377493616386)"},geometry:{type:"Point",coordinates:[-73.94377493616386,40.820295727069976]}},{type:"Feature",properties:{"Unique Key":51729997,"Created Date":"09/02/2021 03:03:00 PM","Closed Date":"09/03/2021 09:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10030,"Incident Address":"66 EDGECOMBE AVENUE","Street Name":"EDGECOMBE AVENUE","Cross Street 1":"W 137 ST","Cross Street 2":"W 138 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:50:00 AM","Community Board":"10 MANHATTAN",BBL:1020410130,Borough:"MANHATTAN","X Coordinate (State Plane)":999019,"Y Coordinate (State Plane)":237603,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8188286645206,Longitude:-73.94664119933147,Location:"(40.8188286645206, -73.94664119933147)"},geometry:{type:"Point",coordinates:[-73.94664119933147,40.8188286645206]}},{type:"Feature",properties:{"Unique Key":51715489,"Created Date":"09/02/2021 03:07:00 PM","Closed Date":"09/02/2021 06:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10023,"Incident Address":"1855 BROADWAY","Street Name":"BROADWAY","Cross Street 1":"W 60 ST","Cross Street 2":"W 61 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and referred it to another agency or utility for further action.","Resolution Action Updated Date":"09/02/2021 06:20:00 PM","Community Board":"07 MANHATTAN",BBL:1011130047,Borough:"MANHATTAN","X Coordinate (State Plane)":989202,"Y Coordinate (State Plane)":219632,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76951409202482,Longitude:-73.98212220834499,Location:"(40.76951409202482, -73.98212220834499)"},geometry:{type:"Point",coordinates:[-73.98212220834499,40.76951409202482]}},{type:"Feature",properties:{"Unique Key":51718720,"Created Date":"09/02/2021 03:11:00 PM","Closed Date":"09/03/2021 01:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10007,"Incident Address":"187 BROADWAY","Street Name":"BROADWAY","Cross Street 1":"CORTLANDT ST","Cross Street 2":"JOHN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:50:00 PM","Community Board":"01 MANHATTAN",BBL:1000630015,Borough:"MANHATTAN","X Coordinate (State Plane)":981573,"Y Coordinate (State Plane)":198025,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.710209228233666,Longitude:-74.00965595072891,Location:"(40.710209228233666, -74.00965595072891)"},geometry:{type:"Point",coordinates:[-74.00965595072891,40.710209228233666]}},{type:"Feature",properties:{"Unique Key":51724327,"Created Date":"09/02/2021 03:12:00 PM","Closed Date":"09/04/2021 08:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10034,"Incident Address":"600 WEST  218 STREET","Street Name":"WEST  218 STREET","Cross Street 1":"SEAMAN AVE","Cross Street 2":"INDIAN RD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/04/2021 08:55:00 AM","Community Board":"12 MANHATTAN",BBL:1022500058,Borough:"MANHATTAN","X Coordinate (State Plane)":1006878,"Y Coordinate (State Plane)":257309,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.87289918174896,Longitude:-73.91818099611028,Location:"(40.87289918174896, -73.91818099611028)"},geometry:{type:"Point",coordinates:[-73.91818099611028,40.87289918174896]}},{type:"Feature",properties:{"Unique Key":51714059,"Created Date":"09/02/2021 03:43:00 PM","Closed Date":"09/02/2021 05:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10039,"Incident Address":"210 WEST  146 STREET","Street Name":"WEST  146 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:20:00 PM","Community Board":"10 MANHATTAN",BBL:1020310038,Borough:"MANHATTAN","X Coordinate (State Plane)":1001053,"Y Coordinate (State Plane)":238977,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.82259627095684,Longitude:-73.93928913892134,Location:"(40.82259627095684, -73.93928913892134)"},geometry:{type:"Point",coordinates:[-73.93928913892134,40.82259627095684]}},{type:"Feature",properties:{"Unique Key":51719758,"Created Date":"09/02/2021 04:21:00 PM","Closed Date":"09/03/2021 08:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10035,"Incident Address":"319 EAST  119 STREET","Street Name":"EAST  119 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/03/2021 08:45:00 AM","Community Board":"11 MANHATTAN",BBL:1017960111,Borough:"MANHATTAN","X Coordinate (State Plane)":1002107,"Y Coordinate (State Plane)":230228,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79858063446484,Longitude:-73.93550421093074,Location:"(40.79858063446484, -73.93550421093074)"},geometry:{type:"Point",coordinates:[-73.93550421093074,40.79858063446484]}},{type:"Feature",properties:{"Unique Key":51718424,"Created Date":"09/02/2021 04:31:00 PM","Closed Date":"09/02/2021 06:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"106 EDGECOMBE AVENUE","Street Name":"EDGECOMBE AVENUE","Cross Street 1":"W 139 ST","Cross Street 2":"W 140 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 06:50:00 PM","Community Board":"10 MANHATTAN",BBL:1020427504,Borough:"MANHATTAN","X Coordinate (State Plane)":999235,"Y Coordinate (State Plane)":237992,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8198959959834,Longitude:-73.94585994624946,Location:"(40.8198959959834, -73.94585994624946)"},geometry:{type:"Point",coordinates:[-73.94585994624946,40.8198959959834]}},{type:"Feature",properties:{"Unique Key":51725096,"Created Date":"09/02/2021 04:31:00 PM","Closed Date":"09/02/2021 07:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10025,"Incident Address":"86 WEST  100 STREET","Street Name":"WEST  100 STREET","Cross Street 1":"MANHATTAN AVE","Cross Street 2":"COLUMBUS AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 07:30:00 PM","Community Board":"07 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":993875,"Y Coordinate (State Plane)":229010,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79525035702049,Longitude:-73.96523823287524,Location:"(40.79525035702049, -73.96523823287524)"},geometry:{type:"Point",coordinates:[-73.96523823287524,40.79525035702049]}},{type:"Feature",properties:{"Unique Key":51727148,"Created Date":"09/02/2021 05:29:00 PM","Closed Date":"09/03/2021 12:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10037,"Incident Address":"59 WEST  137 STREET","Street Name":"WEST  137 STREET","Cross Street 1":"5 AVE","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Surcharge conditions have been confirmed due to rain intensity or volume.","Resolution Action Updated Date":"09/03/2021 12:00:00 PM","Community Board":"10 MANHATTAN",BBL:1017350010,Borough:"MANHATTAN","X Coordinate (State Plane)":1001285,"Y Coordinate (State Plane)":236137,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81480082752887,Longitude:-73.93845810985339,Location:"(40.81480082752887, -73.93845810985339)"},geometry:{type:"Point",coordinates:[-73.93845810985339,40.81480082752887]}},{type:"Feature",properties:{"Unique Key":51713916,"Created Date":"09/02/2021 05:34:00 PM","Closed Date":"09/02/2021 05:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"565 ACADEMY STREET","Street Name":"ACADEMY STREET","Cross Street 1":"NAGLE AVE","Cross Street 2":"POST AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 05:45:00 PM","Community Board":"12 MANHATTAN",BBL:1022180054,Borough:"MANHATTAN","X Coordinate (State Plane)":1005548,"Y Coordinate (State Plane)":253782,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.863221954379064,Longitude:-73.92300125763721,Location:"(40.863221954379064, -73.92300125763721)"},geometry:{type:"Point",coordinates:[-73.92300125763721,40.863221954379064]}},{type:"Feature",properties:{"Unique Key":51726549,"Created Date":"09/02/2021 07:26:00 PM","Closed Date":"09/02/2021 08:35:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10038,"Incident Address":"25 FULTON STREET","Street Name":"FULTON STREET","Cross Street 1":"FRONT ST","Cross Street 2":"WATER ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:35:00 PM","Community Board":"01 MANHATTAN",BBL:1000960005,Borough:"MANHATTAN","X Coordinate (State Plane)":983174,"Y Coordinate (State Plane)":196928,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.70719856251937,Longitude:-74.00388096141931,Location:"(40.70719856251937, -74.00388096141931)"},geometry:{type:"Point",coordinates:[-74.00388096141931,40.70719856251937]}},{type:"Feature",properties:{"Unique Key":51720210,"Created Date":"09/02/2021 07:29:00 PM","Closed Date":"09/05/2021 10:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10128,"Incident Address":"1120 PARK AVENUE","Street Name":"PARK AVENUE","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/05/2021 10:30:00 AM","Community Board":"08 MANHATTAN",BBL:1015020033,Borough:"MANHATTAN","X Coordinate (State Plane)":996515,"Y Coordinate (State Plane)":224549,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78300284092864,Longitude:-73.95571172396143,Location:"(40.78300284092864, -73.95571172396143)"},geometry:{type:"Point",coordinates:[-73.95571172396143,40.78300284092864]}},{type:"Feature",properties:{"Unique Key":51729256,"Created Date":"09/02/2021 08:19:00 PM","Closed Date":"09/05/2021 10:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Culvert Blocked/Needs Cleaning (SE)","Location Type":null,"Incident Zip":10028,"Incident Address":"509 EAST   81 STREET","Street Name":"EAST   81 STREET","Cross Street 1":"YORK AVE","Cross Street 2":"EAST END AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/05/2021 10:00:00 AM","Community Board":"08 MANHATTAN",BBL:1015780006,Borough:"MANHATTAN","X Coordinate (State Plane)":998381,"Y Coordinate (State Plane)":220727,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.772509673647185,Longitude:-73.94898173458112,Location:"(40.772509673647185, -73.94898173458112)"},geometry:{type:"Point",coordinates:[-73.94898173458112,40.772509673647185]}},{type:"Feature",properties:{"Unique Key":51717698,"Created Date":"09/02/2021 08:57:00 PM","Closed Date":"07/12/2022 11:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10075,"Incident Address":"555 EAST   78 STREET","Street Name":"EAST   78 STREET","Cross Street 1":"E 78 STREET PEDESTRIAN OVPS","Cross Street 2":"FDR DRIVE SB ENTRANCE E 78 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and has performed repair work.","Resolution Action Updated Date":"07/12/2022 11:40:00 AM","Community Board":"08 MANHATTAN",BBL:1014900122,Borough:"MANHATTAN","X Coordinate (State Plane)":998363,"Y Coordinate (State Plane)":219784,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76992141383538,Longitude:-73.94904870168055,Location:"(40.76992141383538, -73.94904870168055)"},geometry:{type:"Point",coordinates:[-73.94904870168055,40.76992141383538]}},{type:"Feature",properties:{"Unique Key":51721623,"Created Date":"09/02/2021 09:34:00 PM","Closed Date":"09/02/2021 09:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10036,"Incident Address":"535 WEST   43 STREET","Street Name":"WEST   43 STREET","Cross Street 1":"AMTRAK-NORTHEAST LINE","Cross Street 2":"11 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 09:50:00 PM","Community Board":"04 MANHATTAN",BBL:1010720050,Borough:"MANHATTAN","X Coordinate (State Plane)":985225,"Y Coordinate (State Plane)":216509,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.760943597297086,Longitude:-73.99648049195326,Location:"(40.760943597297086, -73.99648049195326)"},geometry:{type:"Point",coordinates:[-73.99648049195326,40.760943597297086]}},{type:"Feature",properties:{"Unique Key":51716596,"Created Date":"09/02/2021 10:19:00 PM","Closed Date":"09/03/2021 01:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10009,"Incident Address":"102 AVENUE C","Street Name":"AVENUE C","Cross Street 1":"E 6 ST","Cross Street 2":"E 7 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:00:00 AM","Community Board":"03 MANHATTAN",BBL:1003760007,Borough:"MANHATTAN","X Coordinate (State Plane)":990087,"Y Coordinate (State Plane)":203032,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72395072171022,Longitude:-73.97894157404646,Location:"(40.72395072171022, -73.97894157404646)"},geometry:{type:"Point",coordinates:[-73.97894157404646,40.72395072171022]}},{type:"Feature",properties:{"Unique Key":51715615,"Created Date":"09/02/2021 10:43:00 PM","Closed Date":"09/02/2021 11:05:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10033,"Incident Address":"718 WEST  178 STREET","Street Name":"WEST  178 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"CBE NB EXIT 1 A UPPERDECK","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and referred it to another agency or utility for further action.","Resolution Action Updated Date":"09/02/2021 11:05:00 PM","Community Board":"12 MANHATTAN",BBL:1021760011,Borough:"MANHATTAN","X Coordinate (State Plane)":1001276,"Y Coordinate (State Plane)":248425,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.848527866176525,Longitude:-73.93845943637704,Location:"(40.848527866176525, -73.93845943637704)"},geometry:{type:"Point",coordinates:[-73.93845943637704,40.848527866176525]}}],tve={type:J1e,name:X1e,crs:Q1e,features:eve},ive=""+new URL("ida_311_heatmap.8f0465e0.png",import.meta.url).href,rve=""+new URL("mod_stormwater.df1cfcc4.png",import.meta.url).href,nve=""+new URL("sandy_inundation.0ba60b31.png",import.meta.url).href;var CD={},L_={},O_=34,vf=10,k_=13;function oj(e){return new Function("d","return {"+e.map(function(t,i){return JSON.stringify(t)+": d["+i+'] || ""'}).join(",")+"}")}function sve(e,t){var i=oj(e);return function(r,n){return t(i(r),n,e)}}function ID(e){var t=Object.create(null),i=[];return e.forEach(function(r){for(var n in r)n in t||i.push(t[n]=n)}),i}function Sr(e,t){var i=e+"",r=i.length;return r<t?new Array(t-r+1).join(0)+i:i}function ove(e){return e<0?"-"+Sr(-e,6):e>9999?"+"+Sr(e,6):Sr(e,4)}function ave(e){var t=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),n=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":ove(e.getUTCFullYear())+"-"+Sr(e.getUTCMonth()+1,2)+"-"+Sr(e.getUTCDate(),2)+(n?"T"+Sr(t,2)+":"+Sr(i,2)+":"+Sr(r,2)+"."+Sr(n,3)+"Z":r?"T"+Sr(t,2)+":"+Sr(i,2)+":"+Sr(r,2)+"Z":i||t?"T"+Sr(t,2)+":"+Sr(i,2)+"Z":"")}function lve(e){var t=new RegExp('["'+e+`
\r]`),i=e.charCodeAt(0);function r(f,y){var m,g,v=n(f,function(b,w){if(m)return m(b,w-1);g=b,m=y?sve(b,y):oj(b)});return v.columns=g||[],v}function n(f,y){var m=[],g=f.length,v=0,b=0,w,T=g<=0,A=!1;f.charCodeAt(g-1)===vf&&--g,f.charCodeAt(g-1)===k_&&--g;function R(){if(T)return L_;if(A)return A=!1,CD;var C,k=v,B;if(f.charCodeAt(k)===O_){for(;v++<g&&f.charCodeAt(v)!==O_||f.charCodeAt(++v)===O_;);return(C=v)>=g?T=!0:(B=f.charCodeAt(v++))===vf?A=!0:B===k_&&(A=!0,f.charCodeAt(v)===vf&&++v),f.slice(k+1,C-1).replace(/""/g,'"')}for(;v<g;){if((B=f.charCodeAt(C=v++))===vf)A=!0;else if(B===k_)A=!0,f.charCodeAt(v)===vf&&++v;else if(B!==i)continue;return f.slice(k,C)}return T=!0,f.slice(k,g)}for(;(w=R())!==L_;){for(var M=[];w!==CD&&w!==L_;)M.push(w),w=R();y&&(M=y(M,b++))==null||m.push(M)}return m}function s(f,y){return f.map(function(m){return y.map(function(g){return h(m[g])}).join(e)})}function o(f,y){return y==null&&(y=ID(f)),[y.map(h).join(e)].concat(s(f,y)).join(`
`)}function a(f,y){return y==null&&(y=ID(f)),s(f,y).join(`
`)}function u(f){return f.map(c).join(`
`)}function c(f){return f.map(h).join(e)}function h(f){return f==null?"":f instanceof Date?ave(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:n,format:o,formatBody:a,formatRows:u,formatRow:c,formatValue:h}}var uve=lve(","),cve=uve.parse;function dve(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var rd=1,nd=2,X1=3,hve=4,bA=5,ND=6378137,pve=6356752314e-3,RD=.0066943799901413165,Ky=484813681109536e-20,K=Math.PI/2,fve=.16666666666666666,yve=.04722222222222222,mve=.022156084656084655,re=1e-10,vi=.017453292519943295,oo=57.29577951308232,et=Math.PI/4,Pm=Math.PI*2,Vt=3.14159265359,Lr={};Lr.greenwich=0;Lr.lisbon=-9.131906111111;Lr.paris=2.337229166667;Lr.bogota=-74.080916666667;Lr.madrid=-3.687938888889;Lr.rome=12.452333333333;Lr.bern=7.439583333333;Lr.jakarta=106.807719444444;Lr.ferro=-17.666666666667;Lr.brussels=4.367975;Lr.stockholm=18.058277777778;Lr.athens=23.7163375;Lr.oslo=10.722916666667;const gve={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var PD=/[\s_\-\/\(\)]/g;function au(e,t){if(e[t])return e[t];for(var i=Object.keys(e),r=t.toLowerCase().replace(PD,""),n=-1,s,o;++n<i.length;)if(s=i[n],o=s.toLowerCase().replace(PD,""),o===r)return e[s]}function wA(e){var t={},i=e.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,u){var c=u.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,n,s,o={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*vi},lat_1:function(a){t.lat1=a*vi},lat_2:function(a){t.lat2=a*vi},lat_ts:function(a){t.lat_ts=a*vi},lon_0:function(a){t.long0=a*vi},lon_1:function(a){t.long1=a*vi},lon_2:function(a){t.long2=a*vi},alpha:function(a){t.alpha=parseFloat(a)*vi},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*vi},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(u){return parseFloat(u)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var u=au(gve,a);u&&(t.to_meter=u.to_meter)},from_greenwich:function(a){t.from_greenwich=a*vi},pm:function(a){var u=au(Lr,a);t.from_greenwich=(u||parseFloat(a))*vi},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var u="ewnsud";a.length===3&&u.indexOf(a.substr(0,1))!==-1&&u.indexOf(a.substr(1,1))!==-1&&u.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(r in i)n=i[r],r in o?(s=o[r],typeof s=="function"?s(n):t[s]=n):t[r]=n;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var $m=1,aj=2,lj=3,Ab=4,uj=5,jC=-1,vve=/\s/,bve=/[A-Za-z]/,wve=/[A-Za-z84_]/,Gw=/[,\]]/,cj=/[\d\.E\-\+]/;function Ra(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=$m}Ra.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Ab)for(;vve.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case $m:return this.neutral(e);case aj:return this.keyword(e);case Ab:return this.quoted(e);case uj:return this.afterquote(e);case lj:return this.number(e);case jC:return}};Ra.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Ab;return}if(Gw.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Ra.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=$m;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=$m,this.currentObject=this.stack.pop(),this.currentObject||(this.state=jC);return}};Ra.prototype.number=function(e){if(cj.test(e)){this.word+=e;return}if(Gw.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Ra.prototype.quoted=function(e){if(e==='"'){this.state=uj;return}this.word+=e};Ra.prototype.keyword=function(e){if(wve.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=$m;return}if(Gw.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Ra.prototype.neutral=function(e){if(bve.test(e)){this.word=e,this.state=aj;return}if(e==='"'){this.word="",this.state=Ab;return}if(cj.test(e)){this.word=e,this.state=lj;return}if(Gw.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Ra.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===jC)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function _ve(e){var t=new Ra(e);return t.output()}function $D(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var r=t?{}:e,n=i.reduce(function(s,o){return Sh(o,s),s},r);t&&(e[t]=n)}function Sh(e,t){if(!Array.isArray(e)){t[e]=!0;return}var i=e.shift();if(i==="PARAMETER"&&(i=e.shift()),e.length===1){if(Array.isArray(e[0])){t[i]={},Sh(e[0],t[i]);return}t[i]=e[0];return}if(!e.length){t[i]=!0;return}if(i==="TOWGS84"){t[i]=e;return}if(i==="AXIS"){i in t||(t[i]=[]),t[i].push(e);return}Array.isArray(i)||(t[i]={});var r;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[i]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Sh(e[2],t[i]);return;case"SPHEROID":case"ELLIPSOID":t[i]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Sh(e[3],t[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],$D(t,i,e);return;default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return Sh(e,t[i]);return $D(t,i,e)}}var Sve=.017453292519943295;function Tve(e,t){var i=t[0],r=t[1];!(i in e)&&r in e&&(e[i]=e[r],t.length===3&&(e[i]=t[2](e[i])))}function Fo(e){return e*Sve}function Eve(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",i=0,r=e.AXIS.length;i<r;++i){var n=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];n[0].indexOf("north")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="north"?t+="n":n[0].indexOf("south")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="south"?t+="s":n[0].indexOf("east")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="east"?t+="e":(n[0].indexOf("west")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;e.type==="GEOGCS"&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function o(c){var h=e.to_meter||1;return c*h}var a=function(c){return Tve(e,c)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Fo],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Fo],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Fo],["lat0","latitude_of_origin",Fo],["lat0","standard_parallel_1",Fo],["lat1","standard_parallel_1",Fo],["lat2","standard_parallel_2",Fo],["azimuth","Azimuth"],["alpha","azimuth",Fo],["srsCode","name"]];u.forEach(a),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")&&(e.lat0=Fo(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function dj(e){var t=_ve(e),i=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",i]);var n={};return Sh(t,n),Eve(n),n}function Ji(e){var t=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?Ji[e]=wA(arguments[1]):Ji[e]=dj(arguments[1]):Ji[e]=i}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(r){Array.isArray(r)?Ji.apply(t,r):Ji(r)});if(typeof e=="string"){if(e in Ji)return Ji[e]}else"EPSG"in e?Ji["EPSG:"+e.EPSG]=e:"ESRI"in e?Ji["ESRI:"+e.ESRI]=e:"IAU2000"in e?Ji["IAU2000:"+e.IAU2000]=e:console.log(e);return}}dve(Ji);function xve(e){return typeof e=="string"}function Ave(e){return e in Ji}var Mve=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Cve(e){return Mve.some(function(t){return e.indexOf(t)>-1})}var Ive=["3857","900913","3785","102113"];function Nve(e){var t=au(e,"authority");if(!!t){var i=au(t,"epsg");return i&&Ive.indexOf(i)>-1}}function Rve(e){var t=au(e,"extension");if(!!t)return au(t,"proj4")}function Pve(e){return e[0]==="+"}function $ve(e){if(xve(e)){if(Ave(e))return Ji[e];if(Cve(e)){var t=dj(e);if(Nve(t))return Ji["EPSG:3857"];var i=Rve(t);return i?wA(i):t}if(Pve(e))return wA(e)}else return e}function DD(e,t){e=e||{};var i,r;if(!t)return e;for(r in t)i=t[r],i!==void 0&&(e[r]=i);return e}function To(e,t,i){var r=e*t;return i/Math.sqrt(1-r*r)}function f0(e){return e<0?-1:1}function ae(e){return Math.abs(e)<=Vt?e:e-f0(e)*Pm}function Ms(e,t,i){var r=e*i,n=.5*e;return r=Math.pow((1-r)/(1+r),n),Math.tan(.5*(K-t))/r}function Dm(e,t){for(var i=.5*e,r,n,s=K-2*Math.atan(t),o=0;o<=15;o++)if(r=e*Math.sin(s),n=K-2*Math.atan(t*Math.pow((1-r)/(1+r),i))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function Dve(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=To(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Lve(e){var t=e.x,i=e.y;if(i*oo>90&&i*oo<-90&&t*oo>180&&t*oo<-180)return null;var r,n;if(Math.abs(Math.abs(i)-K)<=re)return null;if(this.sphere)r=this.x0+this.a*this.k0*ae(t-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(et+.5*i));else{var s=Math.sin(i),o=Ms(this.e,i,s);r=this.x0+this.a*this.k0*ae(t-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return e.x=r,e.y=n,e}function Ove(e){var t=e.x-this.x0,i=e.y-this.y0,r,n;if(this.sphere)n=K-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var s=Math.exp(-i/(this.a*this.k0));if(n=Dm(this.e,s),n===-9999)return null}return r=ae(this.long0+t/(this.a*this.k0)),e.x=r,e.y=n,e}var kve=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Fve={init:Dve,forward:Lve,inverse:Ove,names:kve};function Bve(){}function LD(e){return e}var Uve=["longlat","identity"];const Vve={init:Bve,forward:LD,inverse:LD,names:Uve};var jve=[Fve,Vve],Q1={},Mb=[];function hj(e,t){var i=Mb.length;return e.names?(Mb[i]=e,e.names.forEach(function(r){Q1[r.toLowerCase()]=i}),this):(console.log(t),!0)}function zve(e){if(!e)return!1;var t=e.toLowerCase();if(typeof Q1[t]<"u"&&Mb[Q1[t]])return Mb[Q1[t]]}function Hve(){jve.forEach(hj)}const Gve={start:Hve,add:hj,get:zve};var Ie={};Ie.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ie.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ie.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ie.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ie.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ie.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ie.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ie.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ie.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ie.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ie.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ie.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ie.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ie.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ie.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ie.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ie.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ie.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ie.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ie.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ie.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ie.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ie.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ie.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ie.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ie.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ie.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ie.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ie.hough={a:6378270,rf:297,ellipseName:"Hough"};Ie.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ie.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ie.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ie.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ie.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ie.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ie.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ie.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ie.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ie.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ie.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ie.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var qve=Ie.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ie.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Wve(e,t,i,r){var n=e*e,s=t*t,o=(n-s)/n,a=0;r?(e*=1-o*(fve+o*(yve+o*mve)),n=e*e,o=0):a=Math.sqrt(o);var u=(n-s)/s;return{es:o,e:a,ep2:u}}function Yve(e,t,i,r,n){if(!e){var s=au(Ie,r);s||(s=qve),e=s.a,t=s.b,i=s.rf}return i&&!t&&(t=(1-1/i)*e),(i===0||Math.abs(e-t)<re)&&(n=!0,t=e),{a:e,b:t,rf:i,sphere:n}}var pi={};pi.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};pi.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};pi.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};pi.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};pi.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};pi.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};pi.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};pi.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};pi.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};pi.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};pi.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};pi.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};pi.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};pi.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};pi.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};pi.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};pi.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function Kve(e,t,i,r,n,s,o){var a={};return e===void 0||e==="none"?a.datum_type=bA:a.datum_type=hve,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=rd),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=nd,a.datum_params[3]*=Ky,a.datum_params[4]*=Ky,a.datum_params[5]*=Ky,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=X1,a.grids=o),a.a=i,a.b=r,a.es=n,a.ep2=s,a}var pj={};function Zve(e,t){var i=new DataView(t),r=Qve(i),n=ebe(i,r);n.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s=tbe(i,n,r),o={header:n,subgrids:s};return pj[e]=o,o}function Jve(e){if(e===void 0)return null;var t=e.split(",");return t.map(Xve)}function Xve(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:pj[e]||null,isNull:!1}}function Th(e){return e/3600*Math.PI/180}function Qve(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function ebe(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:_A(e,56,56+8).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function _A(e,t,i){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,i)))}function tbe(e,t,i){for(var r=176,n=[],s=0;s<t.nSubgrids;s++){var o=rbe(e,r,i),a=nbe(e,r,o,i),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[Th(o.lowerLongitude),Th(o.lowerLatitude)],del:[Th(o.longitudeInterval),Th(o.latitudeInterval)],lim:[u,c],count:o.gridNodeCount,cvs:ibe(a)})}return n}function ibe(e){return e.map(function(t){return[Th(t.longitudeShift),Th(t.latitudeShift)]})}function rbe(e,t,i){return{name:_A(e,t+8,t+16).trim(),parent:_A(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,i),upperLatitude:e.getFloat64(t+88,i),lowerLongitude:e.getFloat64(t+104,i),upperLongitude:e.getFloat64(t+120,i),latitudeInterval:e.getFloat64(t+136,i),longitudeInterval:e.getFloat64(t+152,i),gridNodeCount:e.getInt32(t+168,i)}}function nbe(e,t,i,r){for(var n=t+176,s=16,o=[],a=0;a<i.gridNodeCount;a++){var u={latitudeShift:e.getFloat32(n+a*s,r),longitudeShift:e.getFloat32(n+a*s+4,r),latitudeAccuracy:e.getFloat32(n+a*s+8,r),longitudeAccuracy:e.getFloat32(n+a*s+12,r)};o.push(u)}return o}function fo(e,t){if(!(this instanceof fo))return new fo(e);t=t||function(c){if(c)throw c};var i=$ve(e);if(typeof i!="object"){t(e);return}var r=fo.projections.get(i.projName);if(!r){t(e);return}if(i.datumCode&&i.datumCode!=="none"){var n=au(pi,i.datumCode);n&&(i.datum_params=i.datum_params||(n.towgs84?n.towgs84.split(","):null),i.ellps=n.ellipse,i.datumName=n.datumName?n.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var s=Yve(i.a,i.b,i.rf,i.ellps,i.sphere),o=Wve(s.a,s.b,s.rf,i.R_A),a=Jve(i.nadgrids),u=i.datum||Kve(i.datumCode,i.datum_params,s.a,s.b,o.es,o.ep2,a);DD(this,i),DD(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=u,this.init(),t(null,this)}fo.projections=Gve;fo.projections.start();function sbe(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===rd?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===nd?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function fj(e,t,i){var r=e.x,n=e.y,s=e.z?e.z:0,o,a,u,c;if(n<-K&&n>-1.001*K)n=-K;else if(n>K&&n<1.001*K)n=K;else{if(n<-K)return{x:-1/0,y:-1/0,z:e.z};if(n>K)return{x:1/0,y:1/0,z:e.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(n),c=Math.cos(n),u=a*a,o=i/Math.sqrt(1-t*u),{x:(o+s)*c*Math.cos(r),y:(o+s)*c*Math.sin(r),z:(o*(1-t)+s)*a}}function yj(e,t,i,r){var n=1e-12,s=n*n,o=30,a,u,c,h,f,y,m,g,v,b,w,T,A,R=e.x,M=e.y,C=e.z?e.z:0,k,B,H;if(a=Math.sqrt(R*R+M*M),u=Math.sqrt(R*R+M*M+C*C),a/i<n){if(k=0,u/i<n)return B=K,H=-r,{x:e.x,y:e.y,z:e.z}}else k=Math.atan2(M,R);c=C/u,h=a/u,f=1/Math.sqrt(1-t*(2-t)*h*h),g=h*(1-t)*f,v=c*f,A=0;do A++,m=i/Math.sqrt(1-t*v*v),H=a*g+C*v-m*(1-t*v*v),y=t*m/(m+H),f=1/Math.sqrt(1-y*(2-y)*h*h),b=h*(1-y)*f,w=c*f,T=w*g-b*v,g=b,v=w;while(T*T>s&&A<o);return B=Math.atan(w/Math.abs(b)),{x:k,y:B,z:H}}function obe(e,t,i){if(t===rd)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===nd){var r=i[0],n=i[1],s=i[2],o=i[3],a=i[4],u=i[5],c=i[6];return{x:c*(e.x-u*e.y+a*e.z)+r,y:c*(u*e.x+e.y-o*e.z)+n,z:c*(-a*e.x+o*e.y+e.z)+s}}}function abe(e,t,i){if(t===rd)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===nd){var r=i[0],n=i[1],s=i[2],o=i[3],a=i[4],u=i[5],c=i[6],h=(e.x-r)/c,f=(e.y-n)/c,y=(e.z-s)/c;return{x:h+u*f-a*y,y:-u*h+f+o*y,z:a*h-o*f+y}}}function Rg(e){return e===rd||e===nd}function lbe(e,t,i){if(sbe(e,t)||e.datum_type===bA||t.datum_type===bA)return i;var r=e.a,n=e.es;if(e.datum_type===X1){var s=OD(e,!1,i);if(s!==0)return;r=ND,n=RD}var o=t.a,a=t.b,u=t.es;if(t.datum_type===X1&&(o=ND,a=pve,u=RD),n===u&&r===o&&!Rg(e.datum_type)&&!Rg(t.datum_type))return i;if(i=fj(i,n,r),Rg(e.datum_type)&&(i=obe(i,e.datum_type,e.datum_params)),Rg(t.datum_type)&&(i=abe(i,t.datum_type,t.datum_params)),i=yj(i,u,o,a),t.datum_type===X1){var c=OD(t,!0,i);if(c!==0)return}return i}function OD(e,t,i){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var r={x:-i.x,y:i.y},n={x:Number.NaN,y:Number.NaN},s=[],o=0;o<e.grids.length;o++){var a=e.grids[o];if(s.push(a.name),a.isNull){n=r;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}var u=a.grid.subgrids[0],c=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,h=u.ll[0]-c,f=u.ll[1]-c,y=u.ll[0]+(u.lim[0]-1)*u.del[0]+c,m=u.ll[1]+(u.lim[1]-1)*u.del[1]+c;if(!(f>r.y||h>r.x||m<r.y||y<r.x)&&(n=ube(r,t,u),!isNaN(n.x)))break}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*oo+" "+r.y*oo+" tried: '"+s+"'"),-1):(i.x=-n.x,i.y=n.y,0)}function ube(e,t,i){var r={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return r;var n={x:e.x,y:e.y};n.x-=i.ll[0],n.y-=i.ll[1],n.x=ae(n.x-Math.PI)+Math.PI;var s=kD(n,i);if(t){if(isNaN(s.x))return r;s.x=n.x-s.x,s.y=n.y-s.y;var o=9,a=1e-12,u,c;do{if(c=kD(s,i),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:n.x-(c.x+s.x),y:n.y-(c.y+s.y)},s.x+=u.x,s.y+=u.y}while(o--&&Math.abs(u.x)>a&&Math.abs(u.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=ae(s.x+i.ll[0]),r.y=s.y+i.ll[1]}else isNaN(s.x)||(r.x=e.x+s.x,r.y=e.y+s.y);return r}function kD(e,t){var i={x:e.x/t.del[0],y:e.y/t.del[1]},r={x:Math.floor(i.x),y:Math.floor(i.y)},n={x:i.x-1*r.x,y:i.y-1*r.y},s={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=t.lim[0]||r.y<0||r.y>=t.lim[1])return s;o=r.y*t.lim[0]+r.x;var a={x:t.cvs[o][0],y:t.cvs[o][1]};o++;var u={x:t.cvs[o][0],y:t.cvs[o][1]};o+=t.lim[0];var c={x:t.cvs[o][0],y:t.cvs[o][1]};o--;var h={x:t.cvs[o][0],y:t.cvs[o][1]},f=n.x*n.y,y=n.x*(1-n.y),m=(1-n.x)*(1-n.y),g=(1-n.x)*n.y;return s.x=m*a.x+y*u.x+g*h.x+f*c.x,s.y=m*a.y+y*u.y+g*h.y+f*c.y,s}function FD(e,t,i){var r=i.x,n=i.y,s=i.z||0,o,a,u,c={};for(u=0;u<3;u++)if(!(t&&u===2&&i.z===void 0))switch(u===0?(o=r,"ew".indexOf(e.axis[u])!==-1?a="x":a="y"):u===1?(o=n,"ns".indexOf(e.axis[u])!==-1?a="y":a="x"):(o=s,a="z"),e.axis[u]){case"e":c[a]=o;break;case"w":c[a]=-o;break;case"n":c[a]=o;break;case"s":c[a]=-o;break;case"u":i[a]!==void 0&&(c.z=o);break;case"d":i[a]!==void 0&&(c.z=-o);break;default:return null}return c}function mj(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function cbe(e){BD(e.x),BD(e.y)}function BD(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function dbe(e,t){return(e.datum.datum_type===rd||e.datum.datum_type===nd)&&t.datumCode!=="WGS84"||(t.datum.datum_type===rd||t.datum.datum_type===nd)&&e.datumCode!=="WGS84"}function Cb(e,t,i,r){var n;if(Array.isArray(i)&&(i=mj(i)),cbe(i),e.datum&&t.datum&&dbe(e,t)&&(n=new fo("WGS84"),i=Cb(e,n,i,r),e=n),r&&e.axis!=="enu"&&(i=FD(e,!1,i)),e.projName==="longlat")i={x:i.x*vi,y:i.y*vi,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),i=e.inverse(i),!i)return;if(e.from_greenwich&&(i.x+=e.from_greenwich),i=lbe(e.datum,t.datum,i),!!i)return t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),t.projName==="longlat"?i={x:i.x*oo,y:i.y*oo,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),r&&t.axis!=="enu"?FD(t,!0,i):i}var UD=fo("WGS84");function F_(e,t,i,r){var n,s,o;return Array.isArray(i)?(n=Cb(e,t,i,r)||{x:NaN,y:NaN},i.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(i.splice(3)):[n.x,n.y,i[2]].concat(i.splice(3)):[n.x,n.y].concat(i.splice(2)):[n.x,n.y]):(s=Cb(e,t,i,r),o=Object.keys(i),o.length===2||o.forEach(function(a){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=i[a]}),s)}function VD(e){return e instanceof fo?e:e.oProj?e.oProj:fo(e)}function rn(e,t,i){e=VD(e);var r=!1,n;return typeof t>"u"?(t=e,e=UD,r=!0):(typeof t.x<"u"||Array.isArray(t))&&(i=t,t=e,e=UD,r=!0),t=VD(t),i?F_(e,t,i):(n={forward:function(s,o){return F_(e,t,s,o)},inverse:function(s,o){return F_(t,e,s,o)}},r&&(n.oProj=t),n)}var jD=6,gj="AJSAJS",vj="AFAFAF",Eh=65,_r=73,Sn=79,vy=86,by=90;const hbe={forward:bj,inverse:pbe,toPoint:wj};function bj(e,t){return t=t||5,mbe(fbe({lat:e[1],lon:e[0]}),t)}function pbe(e){var t=zC(Sj(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function wj(e){var t=zC(Sj(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function B_(e){return e*(Math.PI/180)}function zD(e){return 180*(e/Math.PI)}function fbe(e){var t=e.lat,i=e.lon,r=6378137,n=.00669438,s=.9996,o,a,u,c,h,f,y,m=B_(t),g=B_(i),v,b;b=Math.floor((i+180)/6)+1,i===180&&(b=60),t>=56&&t<64&&i>=3&&i<12&&(b=32),t>=72&&t<84&&(i>=0&&i<9?b=31:i>=9&&i<21?b=33:i>=21&&i<33?b=35:i>=33&&i<42&&(b=37)),o=(b-1)*6-180+3,v=B_(o),a=n/(1-n),u=r/Math.sqrt(1-n*Math.sin(m)*Math.sin(m)),c=Math.tan(m)*Math.tan(m),h=a*Math.cos(m)*Math.cos(m),f=Math.cos(m)*(g-v),y=r*((1-n/4-3*n*n/64-5*n*n*n/256)*m-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*m)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*m)-35*n*n*n/3072*Math.sin(6*m));var w=s*u*(f+(1-c+h)*f*f*f/6+(5-18*c+c*c+72*h-58*a)*f*f*f*f*f/120)+5e5,T=s*(y+u*Math.tan(m)*(f*f/2+(5-c+9*h+4*h*h)*f*f*f*f/24+(61-58*c+c*c+600*h-330*a)*f*f*f*f*f*f/720));return t<0&&(T+=1e7),{northing:Math.round(T),easting:Math.round(w),zoneNumber:b,zoneLetter:ybe(t)}}function zC(e){var t=e.northing,i=e.easting,r=e.zoneLetter,n=e.zoneNumber;if(n<0||n>60)return null;var s=.9996,o=6378137,a=.00669438,u,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),h,f,y,m,g,v,b,w,T,A=i-5e5,R=t;r<"N"&&(R-=1e7),b=(n-1)*6-180+3,u=a/(1-a),v=R/s,w=v/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),T=w+(3*c/2-27*c*c*c/32)*Math.sin(2*w)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*w)+151*c*c*c/96*Math.sin(6*w),h=o/Math.sqrt(1-a*Math.sin(T)*Math.sin(T)),f=Math.tan(T)*Math.tan(T),y=u*Math.cos(T)*Math.cos(T),m=o*(1-a)/Math.pow(1-a*Math.sin(T)*Math.sin(T),1.5),g=A/(h*s);var M=T-h*Math.tan(T)/m*(g*g/2-(5+3*f+10*y-4*y*y-9*u)*g*g*g*g/24+(61+90*f+298*y+45*f*f-252*u-3*y*y)*g*g*g*g*g*g/720);M=zD(M);var C=(g-(1+2*f+y)*g*g*g/6+(5-2*y+28*f-3*y*y+8*u+24*f*f)*g*g*g*g*g/120)/Math.cos(T);C=b+zD(C);var k;if(e.accuracy){var B=zC({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});k={top:B.lat,right:B.lon,bottom:M,left:C}}else k={lat:M,lon:C};return k}function ybe(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function mbe(e,t){var i="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+gbe(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+r.substr(r.length-5,t)}function gbe(e,t,i){var r=_j(i),n=Math.floor(e/1e5),s=Math.floor(t/1e5)%20;return vbe(n,s,r)}function _j(e){var t=e%jD;return t===0&&(t=jD),t}function vbe(e,t,i){var r=i-1,n=gj.charCodeAt(r),s=vj.charCodeAt(r),o=n+e-1,a=s+t,u=!1;o>by&&(o=o-by+Eh-1,u=!0),(o===_r||n<_r&&o>_r||(o>_r||n<_r)&&u)&&o++,(o===Sn||n<Sn&&o>Sn||(o>Sn||n<Sn)&&u)&&(o++,o===_r&&o++),o>by&&(o=o-by+Eh-1),a>vy?(a=a-vy+Eh-1,u=!0):u=!1,(a===_r||s<_r&&a>_r||(a>_r||s<_r)&&u)&&a++,(a===Sn||s<Sn&&a>Sn||(a>Sn||s<Sn)&&u)&&(a++,a===_r&&a++),a>vy&&(a=a-vy+Eh-1);var c=String.fromCharCode(o)+String.fromCharCode(a);return c}function Sj(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,i=null,r="",n,s=0;!/[A-Z]/.test(n=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;r+=n,s++}var o=parseInt(r,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+e;i=e.substring(s,s+=2);for(var u=_j(o),c=bbe(i.charAt(0),u),h=wbe(i.charAt(1),u);h<_be(a);)h+=2e6;var f=t-s;if(f%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var y=f/2,m=0,g=0,v,b,w,T,A;return y>0&&(v=1e5/Math.pow(10,y),b=e.substring(s,s+y),m=parseFloat(b)*v,w=e.substring(s+y),g=parseFloat(w)*v),T=m+c,A=g+h,{easting:T,northing:A,zoneLetter:a,zoneNumber:o,accuracy:v}}function bbe(e,t){for(var i=gj.charCodeAt(t-1),r=1e5,n=!1;i!==e.charCodeAt(0);){if(i++,i===_r&&i++,i===Sn&&i++,i>by){if(n)throw"Bad character: "+e;i=Eh,n=!0}r+=1e5}return r}function wbe(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=vj.charCodeAt(t-1),r=0,n=!1;i!==e.charCodeAt(0);){if(i++,i===_r&&i++,i===Sn&&i++,i>vy){if(n)throw"Bad character: "+e;i=Eh,n=!0}r+=1e5}return r}function _be(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function pp(e,t,i){if(!(this instanceof pp))return new pp(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}pp.fromMGRS=function(e){return new pp(wj(e))};pp.prototype.toMGRS=function(e){return bj([this.x,this.y],e)};var Sbe=1,Tbe=.25,HD=.046875,GD=.01953125,qD=.01068115234375,Ebe=.75,xbe=.46875,Abe=.013020833333333334,Mbe=.007120768229166667,Cbe=.3645833333333333,Ibe=.005696614583333333,Nbe=.3076171875;function Tj(e){var t=[];t[0]=Sbe-e*(Tbe+e*(HD+e*(GD+e*qD))),t[1]=e*(Ebe-e*(HD+e*(GD+e*qD)));var i=e*e;return t[2]=i*(xbe-e*(Abe+e*Mbe)),i*=e,t[3]=i*(Cbe-e*Ibe),t[4]=i*e*Nbe,t}function qw(e,t,i,r){return i*=t,t*=t,r[0]*e-i*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))}var Rbe=20;function Ej(e,t,i){for(var r=1/(1-t),n=e,s=Rbe;s;--s){var o=Math.sin(n),a=1-t*o*o;if(a=(qw(n,o,Math.cos(n),i)-e)*(a*Math.sqrt(a))*r,n-=a,Math.abs(a)<re)return n}return n}function Pbe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Tj(this.es),this.ml0=qw(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function $be(e){var t=e.x,i=e.y,r=ae(t-this.long0),n,s,o,a=Math.sin(i),u=Math.cos(i);if(this.es){var h=u*r,f=Math.pow(h,2),y=this.ep2*Math.pow(u,2),m=Math.pow(y,2),g=Math.abs(u)>re?Math.tan(i):0,v=Math.pow(g,2),b=Math.pow(v,2);n=1-this.es*Math.pow(a,2),h=h/Math.sqrt(n);var w=qw(i,a,u,this.en);s=this.a*(this.k0*h*(1+f/6*(1-v+y+f/20*(5-18*v+b+14*y-58*v*y+f/42*(61+179*b-b*v-479*v)))))+this.x0,o=this.a*(this.k0*(w-this.ml0+a*r*h/2*(1+f/12*(5-v+9*y+4*m+f/30*(61+b-58*v+270*y-330*v*y+f/56*(1385+543*b-b*v-3111*v))))))+this.y0}else{var c=u*Math.sin(r);if(Math.abs(Math.abs(c)-1)<re)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,o=u*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(o),c>=1){if(c-1>re)return 93;o=0}else o=Math.acos(o);i<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return e.x=s,e.y=o,e}function Dbe(e){var t,i,r,n,s=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,i=Ej(t,this.es,this.en),Math.abs(i)<K){var f=Math.sin(i),y=Math.cos(i),m=Math.abs(y)>re?Math.tan(i):0,g=this.ep2*Math.pow(y,2),v=Math.pow(g,2),b=Math.pow(m,2),w=Math.pow(b,2);t=1-this.es*Math.pow(f,2);var T=s*Math.sqrt(t)/this.k0,A=Math.pow(T,2);t=t*m,r=i-t*A/(1-this.es)*.5*(1-A/12*(5+3*b-9*g*b+g-4*v-A/30*(61+90*b-252*g*b+45*w+46*g-A/56*(1385+3633*b+4095*w+1574*w*b)))),n=ae(this.long0+T*(1-A/6*(1+2*b+g-A/20*(5+28*b+24*w+8*g*b+6*g-A/42*(61+662*b+1320*w+720*w*b))))/y)}else r=K*f0(o),n=0;else{var a=Math.exp(s/this.k0),u=.5*(a-1/a),c=this.lat0+o/this.k0,h=Math.cos(c);t=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(u,2))),r=Math.asin(t),o<0&&(r=-r),u===0&&h===0?n=0:n=ae(Math.atan2(u,h)+this.long0)}return e.x=n,e.y=r,e}var Lbe=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const ev={init:Pbe,forward:$be,inverse:Dbe,names:Lbe};function xj(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function bs(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),r=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(r,2))}function Obe(e){var t=1+e,i=t-1;return i===0?e:e*Math.log(t)/i}function kbe(e){var t=Math.abs(e);return t=Obe(t*(1+t/(bs(1,t)+1))),e<0?-t:t}function HC(e,t){for(var i=2*Math.cos(2*t),r=e.length-1,n=e[r],s=0,o;--r>=0;)o=-s+i*n+e[r],s=n,n=o;return t+o*Math.sin(2*t)}function Fbe(e,t){for(var i=2*Math.cos(t),r=e.length-1,n=e[r],s=0,o;--r>=0;)o=-s+i*n+e[r],s=n,n=o;return Math.sin(t)*o}function Bbe(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function Aj(e,t,i){for(var r=Math.sin(t),n=Math.cos(t),s=xj(i),o=Bbe(i),a=2*n*o,u=-2*r*s,c=e.length-1,h=e[c],f=0,y=0,m=0,g,v;--c>=0;)g=y,v=f,y=h,f=m,h=-g+a*y-u*f+e[c],m=-v+u*y+a*f;return a=r*o,u=n*s,[a*h-u*m,a*m+u*h]}function Ube(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(ev.init.apply(this),this.forward=ev.forward,this.inverse=ev.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i=i*t,this.cgb[1]=i*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i=i*t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),i=i*t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-12/5+t*(-24832/14175))),i=i*t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i=i*t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i=i*t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i=i*t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i=i*t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i=i*t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var r=HC(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Fbe(this.gtu,2*r))}function Vbe(e){var t=ae(e.x-this.long0),i=e.y;i=HC(this.cbg,i);var r=Math.sin(i),n=Math.cos(i),s=Math.sin(t),o=Math.cos(t);i=Math.atan2(r,o*n),t=Math.atan2(s*n,bs(r,n*o)),t=kbe(Math.tan(t));var a=Aj(this.gtu,2*i,2*t);i=i+a[0],t=t+a[1];var u,c;return Math.abs(t)<=2.623395162778?(u=this.a*(this.Qn*t)+this.x0,c=this.a*(this.Qn*i+this.Zb)+this.y0):(u=1/0,c=1/0),e.x=u,e.y=c,e}function jbe(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t=t/this.Qn;var r,n;if(Math.abs(t)<=2.623395162778){var s=Aj(this.utg,2*i,2*t);i=i+s[0],t=t+s[1],t=Math.atan(xj(t));var o=Math.sin(i),a=Math.cos(i),u=Math.sin(t),c=Math.cos(t);i=Math.atan2(o*c,bs(u,c*a)),t=Math.atan2(u,c*a),r=ae(t+this.long0),n=HC(this.cgb,i)}else r=1/0,n=1/0;return e.x=r,e.y=n,e}var zbe=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const tv={init:Ube,forward:Vbe,inverse:jbe,names:zbe};function Hbe(e,t){if(e===void 0){if(e=Math.floor((ae(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var Gbe="etmerc";function qbe(){var e=Hbe(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*vi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,tv.init.apply(this),this.forward=tv.forward,this.inverse=tv.inverse}var Wbe=["Universal Transverse Mercator System","utm"];const Ybe={init:qbe,names:Wbe,dependsOn:Gbe};function GC(e,t){return Math.pow((1-e)/(1+e),t)}var Kbe=20;function Zbe(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+et)/(Math.pow(Math.tan(.5*this.lat0+et),this.C)*GC(this.e*e,this.ratexp))}function Jbe(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+et),this.C)*GC(this.e*Math.sin(i),this.ratexp))-K,e.x=this.C*t,e}function Xbe(e){for(var t=1e-14,i=e.x/this.C,r=e.y,n=Math.pow(Math.tan(.5*r+et)/this.K,1/this.C),s=Kbe;s>0&&(r=2*Math.atan(n*GC(this.e*Math.sin(e.y),-.5*this.e))-K,!(Math.abs(r-e.y)<t));--s)e.y=r;return s?(e.x=i,e.y=r,e):null}var Qbe=["gauss"];const qC={init:Zbe,forward:Jbe,inverse:Xbe,names:Qbe};function ewe(){qC.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function twe(e){var t,i,r,n;return e.x=ae(e.x-this.long0),qC.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),r=Math.cos(e.x),n=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*r),e.x=n*i*Math.sin(e.x),e.y=n*(this.cosc0*t-this.sinc0*i*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function iwe(e){var t,i,r,n,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=Math.sqrt(e.x*e.x+e.y*e.y)){var o=2*Math.atan2(s,this.R2);t=Math.sin(o),i=Math.cos(o),n=Math.asin(i*this.sinc0+e.y*t*this.cosc0/s),r=Math.atan2(e.x*t,s*this.cosc0*i-e.y*this.sinc0*t)}else n=this.phic0,r=0;return e.x=r,e.y=n,qC.inverse.apply(this,[e]),e.x=ae(e.x+this.long0),e}var rwe=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const nwe={init:ewe,forward:twe,inverse:iwe,names:rwe};function swe(e,t,i){return t*=i,Math.tan(.5*(K+e))*Math.pow((1-t)/(1+t),.5*i)}function owe(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=re&&(this.k0=.5*(1+f0(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=re&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=re&&(this.k0=.5*this.cons*To(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ms(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=To(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-K,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function awe(e){var t=e.x,i=e.y,r=Math.sin(i),n=Math.cos(i),s,o,a,u,c,h,f=ae(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=re&&Math.abs(i+this.lat0)<=re?(e.x=NaN,e.y=NaN,e):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*n*Math.cos(f)),e.x=this.a*s*n*Math.sin(f)+this.x0,e.y=this.a*s*(this.coslat0*r-this.sinlat0*n*Math.cos(f))+this.y0,e):(o=2*Math.atan(this.ssfn_(i,r,this.e))-K,u=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=re?(c=Ms(this.e,i*this.con,this.con*r),h=2*this.a*this.k0*c/this.cons,e.x=this.x0+h*Math.sin(t-this.long0),e.y=this.y0-this.con*h*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<re?(s=2*this.a*this.k0/(1+u*Math.cos(f)),e.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*u*Math.cos(f))),e.y=s*(this.cosX0*a-this.sinX0*u*Math.cos(f))+this.y0),e.x=s*u*Math.sin(f)+this.x0,e))}function lwe(e){e.x-=this.x0,e.y-=this.y0;var t,i,r,n,s,o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,i=this.lat0,o<=re?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<re?this.lat0>0?t=ae(this.long0+Math.atan2(e.x,-1*e.y)):t=ae(this.long0+Math.atan2(e.x,e.y)):t=ae(this.long0+Math.atan2(e.x*Math.sin(a),o*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a))),e.x=t,e.y=i,e)}else if(Math.abs(this.coslat0)<=re){if(o<=re)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,r=o*this.cons/(2*this.a*this.k0),i=this.con*Dm(this.e,r),t=this.con*ae(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=re?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+e.y*Math.sin(n)*this.cosX0/o),t=ae(this.long0+Math.atan2(e.x*Math.sin(n),o*this.cosX0*Math.cos(n)-e.y*this.sinX0*Math.sin(n)))),i=-1*Dm(this.e,Math.tan(.5*(K+s)));return e.x=t,e.y=i,e}var uwe=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const cwe={init:owe,forward:awe,inverse:lwe,names:uwe,ssfn_:swe};function dwe(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,r=this.rf,n=1/r,s=2*n-Math.pow(n,2),o=this.e=Math.sqrt(s);this.R=this.k0*i*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+e/2)),c=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*u+this.alpha*o/2*c}function hwe(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=-this.alpha*(t+i)+this.K,n=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(e.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*o+this.x0,e}function pwe(e){for(var t=e.x-this.x0,i=e.y-this.y0,r=t/this.R,n=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+o/this.alpha,u=0,c=s,h=-1e3,f=0;Math.abs(c-h)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),h=c,c=2*Math.atan(Math.exp(u))-Math.PI/2}return e.x=a,e.y=c,e}var fwe=["somerc"];const ywe={init:dwe,forward:hwe,inverse:pwe,names:fwe};var ch=1e-7;function mwe(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(i)!==-1}function gwe(){var e,t,i,r,n,s,o,a,u,c,h=0,f,y=0,m=0,g=0,v=0,b=0,w=0;this.no_off=mwe(this),this.no_rot="no_rot"in this;var T=!1;"alpha"in this&&(T=!0);var A=!1;if("rectified_grid_angle"in this&&(A=!0),T&&(w=this.alpha),A&&(h=this.rectified_grid_angle*vi),T||A)y=this.longc;else if(m=this.long1,v=this.lat1,g=this.long2,b=this.lat2,Math.abs(v-b)<=ch||(e=Math.abs(v))<=ch||Math.abs(e-K)<=ch||Math.abs(Math.abs(this.lat0)-K)<=ch||Math.abs(Math.abs(b)-K)<=ch)throw new Error;var R=1-this.es;t=Math.sqrt(R),Math.abs(this.lat0)>re?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),e=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/R),this.A=this.B*this.k0*t/e,r=this.B*t/(i*Math.sqrt(e)),n=r*r-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=r,this.E*=Math.pow(Ms(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=r=n=1),T||A?(T?(f=Math.asin(Math.sin(w)/r),A||(h=w)):(f=h,w=Math.asin(r*Math.sin(f))),this.lam0=y-Math.asin(.5*(n-1/n)*Math.tan(f))/this.B):(s=Math.pow(Ms(this.e,v,Math.sin(v)),this.B),o=Math.pow(Ms(this.e,b,Math.sin(b)),this.B),n=this.E/s,u=(o-s)/(o+s),c=this.E*this.E,c=(c-o*s)/(c+o*s),e=m-g,e<-Math.pi?g-=Pm:e>Math.pi&&(g+=Pm),this.lam0=ae(.5*(m+g)-Math.atan(c*Math.tan(.5*this.B*(m-g))/u)/this.B),f=Math.atan(2*Math.sin(this.B*ae(m-this.lam0))/(n-1/n)),h=w=Math.asin(r*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(w))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(et-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(et+n))}function vwe(e){var t={},i,r,n,s,o,a,u,c;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-K)>re){if(o=this.E/Math.pow(Ms(this.e,e.y,Math.sin(e.y)),this.B),a=1/o,i=.5*(o-a),r=.5*(o+a),s=Math.sin(this.B*e.x),n=(i*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(n)-1)<re)throw new Error;c=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*e.x),Math.abs(a)<ch?u=this.A*e.x:u=this.ArB*Math.atan2(i*this.cosgam+s*this.singam,a)}else c=e.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*e.y;return this.no_rot?(t.x=u,t.y=c):(u-=this.u_0,t.x=c*this.cosrot+u*this.sinrot,t.y=u*this.cosrot-c*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function bwe(e){var t,i,r,n,s,o,a,u={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(i=e.y,t=e.x):(i=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*i),n=.5*(r-1/r),s=.5*(r+1/r),o=Math.sin(this.BrA*t),a=(o*this.cosgam+n*this.singam)/s,Math.abs(Math.abs(a)-1)<re)u.x=0,u.y=a<0?-K:K;else{if(u.y=this.E/Math.sqrt((1+a)/(1-a)),u.y=Dm(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(n*this.cosgam-o*this.singam,Math.cos(this.BrA*t))}return u.x+=this.lam0,u}var wwe=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const _we={init:gwe,forward:vwe,inverse:bwe,names:wwe};function Swe(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<re)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),r=To(this.e,t,i),n=Ms(this.e,this.lat1,t),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=To(this.e,s,o),u=Ms(this.e,this.lat2,s),c=Ms(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>re?this.ns=Math.log(r/a)/Math.log(n/u):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Twe(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=re&&(i=f0(i)*(K-2*re));var r=Math.abs(Math.abs(i)-K),n,s;if(r>re)n=Ms(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(r=i*this.ns,r<=0)return null;s=0}var o=this.ns*ae(t-this.long0);return e.x=this.k0*(s*Math.sin(o))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,e}function Ewe(e){var t,i,r,n,s,o=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),i=1):(t=-Math.sqrt(o*o+a*a),i=-1);var u=0;if(t!==0&&(u=Math.atan2(i*o,i*a)),t!==0||this.ns>0){if(i=1/this.ns,r=Math.pow(t/(this.a*this.f0),i),n=Dm(this.e,r),n===-9999)return null}else n=-K;return s=ae(u/this.ns+this.long0),e.x=s,e.y=n,e}var xwe=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Awe={init:Swe,forward:Twe,inverse:Ewe,names:xwe};function Mwe(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Cwe(e){var t,i,r,n,s,o,a,u=e.x,c=e.y,h=ae(u-this.long0);return t=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/t)-this.s45),r=-h*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),s=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(n)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),e.y=a*Math.cos(o)/1,e.x=a*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e}function Iwe(e){var t,i,r,n,s,o,a,u,c=e.x;e.x=e.y,e.y=c,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x),n=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(t)),e.x=this.long0-i/this.alfa,a=t,u=0;var h=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(u=1),a=e.y,h+=1;while(u===0&&h<15);return h>=15?null:e}var Nwe=["Krovak","krovak"];const Rwe={init:Mwe,forward:Cwe,inverse:Iwe,names:Nwe};function rr(e,t,i,r,n){return e*n-t*Math.sin(2*n)+i*Math.sin(4*n)-r*Math.sin(6*n)}function y0(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function m0(e){return .375*e*(1+.25*e*(1+.46875*e))}function g0(e){return .05859375*e*e*(1+.75*e)}function v0(e){return e*e*e*(35/3072)}function fp(e,t,i){var r=t*i;return e/Math.sqrt(1-r*r)}function Hp(e){return Math.abs(e)<K?e:e-f0(e)*Math.PI}function Ib(e,t,i,r,n){var s,o;s=e/t;for(var a=0;a<15;a++)if(o=(e-(t*s-i*Math.sin(2*s)+r*Math.sin(4*s)-n*Math.sin(6*s)))/(t-2*i*Math.cos(2*s)+4*r*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function Pwe(){this.sphere||(this.e0=y0(this.es),this.e1=m0(this.es),this.e2=g0(this.es),this.e3=v0(this.es),this.ml0=this.a*rr(this.e0,this.e1,this.e2,this.e3,this.lat0))}function $we(e){var t,i,r=e.x,n=e.y;if(r=ae(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(n)*Math.sin(r)),i=this.a*(Math.atan2(Math.tan(n),Math.cos(r))-this.lat0);else{var s=Math.sin(n),o=Math.cos(n),a=fp(this.a,this.e,s),u=Math.tan(n)*Math.tan(n),c=r*Math.cos(n),h=c*c,f=this.es*o*o/(1-this.es),y=this.a*rr(this.e0,this.e1,this.e2,this.e3,n);t=a*c*(1-h*u*(1/6-(8-u+8*f)*h/120)),i=y-this.ml0+a*s/o*h*(.5+(5-u+6*f)*h/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function Dwe(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,r,n;if(this.sphere){var s=i+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(t)),n=Math.atan2(Math.tan(t),Math.cos(s))}else{var o=this.ml0/this.a+i,a=Ib(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-K)<=re)return e.x=this.long0,e.y=K,i<0&&(e.y*=-1),e;var u=fp(this.a,this.e,Math.sin(a)),c=u*u*u/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(a),2),f=t*this.a/u,y=f*f;r=a-u*Math.tan(a)/c*f*f*(.5-(1+3*h)*f*f/24),n=f*(1-y*(h/3+(1+3*h)*h*y/15))/Math.cos(a)}return e.x=ae(n+this.long0),e.y=Hp(r),e}var Lwe=["Cassini","Cassini_Soldner","cass"];const Owe={init:Pwe,forward:$we,inverse:Dwe,names:Lwe};function eu(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t}var kwe=1,Fwe=2,Bwe=3,Uwe=4;function Vwe(){var e=Math.abs(this.lat0);if(Math.abs(e-K)<re?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<re?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=eu(this.e,1),this.mmf=.5/(1-this.es),this.apa=Zwe(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=eu(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function jwe(e){var t,i,r,n,s,o,a,u,c,h,f=e.x,y=e.y;if(f=ae(f-this.long0),this.sphere){if(s=Math.sin(y),h=Math.cos(y),r=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+h*r:1+this.sinph0*s+this.cosph0*h*r,i<=re)return null;i=Math.sqrt(2/i),t=i*h*Math.sin(f),i*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(y+this.lat0)<re)return null;i=et-y*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(f),i*=r}}else{switch(a=0,u=0,c=0,r=Math.cos(f),n=Math.sin(f),s=Math.sin(y),o=eu(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,u=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*u*r;break;case this.EQUIT:c=1+u*r;break;case this.N_POLE:c=K+y,o=this.qp-o;break;case this.S_POLE:c=y-K,o=this.qp+o;break}if(Math.abs(c)<re)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?i=this.ymf*c*(this.cosb1*a-this.sinb1*u*r):i=(c=Math.sqrt(2/(1+u*r)))*a*this.ymf,t=this.xmf*c*u*n;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(c=Math.sqrt(o))*n,i=r*(this.mode===this.S_POLE?c:-c)):t=i=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function zwe(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,r,n,s,o,a,u,c;if(this.sphere){var h=0,f,y=0;if(f=Math.sqrt(t*t+i*i),n=f*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(f)<=re?0:Math.asin(i*y/f),t*=y,i=h*f;break;case this.OBLIQ:n=Math.abs(f)<=re?this.lat0:Math.asin(h*this.sinph0+i*y*this.cosph0/f),t*=y*this.cosph0,i=(h-Math.sin(n)*this.sinph0)*f;break;case this.N_POLE:i=-i,n=K-n;break;case this.S_POLE:n-=K;break}r=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,i)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,i*=this.dd,u=Math.sqrt(t*t+i*i),u<re)return e.x=this.long0,e.y=this.lat0,e;o=2*Math.asin(.5*u/this.rq),s=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(c=s*this.sinb1+i*o*this.cosb1/u,a=this.qp*c,i=u*this.cosb1*s-i*this.sinb1*o):(c=i*o/u,a=this.qp*c,i=u*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),a=t*t+i*i,!a)return e.x=this.long0,e.y=this.lat0,e;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(t,i),n=Jwe(Math.asin(c),this.apa)}return e.x=ae(this.long0+r),e.y=n,e}var Hwe=.3333333333333333,Gwe=.17222222222222222,qwe=.10257936507936508,Wwe=.06388888888888888,Ywe=.0664021164021164,Kwe=.016415012942191543;function Zwe(e){var t,i=[];return i[0]=e*Hwe,t=e*e,i[0]+=t*Gwe,i[1]=t*Wwe,t*=e,i[0]+=t*qwe,i[1]+=t*Ywe,i[2]=t*Kwe,i}function Jwe(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var Xwe=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Qwe={init:Vwe,forward:jwe,inverse:zwe,names:Xwe,S_POLE:kwe,N_POLE:Fwe,EQUIT:Bwe,OBLIQ:Uwe};function lu(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function e2e(){Math.abs(this.lat1+this.lat2)<re||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=To(this.e3,this.sin_po,this.cos_po),this.qs1=eu(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=To(this.e3,this.sin_po,this.cos_po),this.qs2=eu(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=eu(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>re?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function t2e(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var r=eu(this.e3,this.sin_phi,this.cos_phi),n=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*ae(t-this.long0),o=n*Math.sin(s)+this.x0,a=this.rh-n*Math.cos(s)+this.y0;return e.x=o,e.y=a,e}function i2e(e){var t,i,r,n,s,o;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),r=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),r=-1),n=0,t!==0&&(n=Math.atan2(r*e.x,r*e.y)),r=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(i=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,i)),s=ae(n/this.ns0+this.long0),e.x=s,e.y=o,e}function r2e(e,t){var i,r,n,s,o,a=lu(.5*t);if(e<re)return a;for(var u=e*e,c=1;c<=25;c++)if(i=Math.sin(a),r=Math.cos(a),n=e*i,s=1-n*n,o=.5*s*s/r*(t/(1-u)-i/s+.5/e*Math.log((1-n)/(1+n))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var n2e=["Albers_Conic_Equal_Area","Albers","aea"];const s2e={init:e2e,forward:t2e,inverse:i2e,names:n2e,phi1z:r2e};function o2e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function a2e(e){var t,i,r,n,s,o,a,u,c=e.x,h=e.y;return r=ae(c-this.long0),t=Math.sin(h),i=Math.cos(h),n=Math.cos(r),o=this.sin_p14*t+this.cos_p14*i*n,s=1,o>0||Math.abs(o)<=re?(a=this.x0+this.a*s*i*Math.sin(r)/o,u=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*i*n)/o):(a=this.x0+this.infinity_dist*i*Math.sin(r),u=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*n)),e.x=a,e.y=u,e}function l2e(e){var t,i,r,n,s,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(n=Math.atan2(t,this.rc),i=Math.sin(n),r=Math.cos(n),o=lu(r*this.sin_p14+e.y*i*this.cos_p14/t),s=Math.atan2(e.x*i,t*this.cos_p14*r-e.y*this.sin_p14*i),s=ae(this.long0+s)):(o=this.phic0,s=0),e.x=s,e.y=o,e}var u2e=["gnom"];const c2e={init:o2e,forward:a2e,inverse:l2e,names:u2e};function d2e(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*K:K;for(var r=Math.asin(.5*t),n,s,o,a,u=0;u<30;u++)if(s=Math.sin(r),o=Math.cos(r),a=e*s,n=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-s/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),r+=n,Math.abs(n)<=1e-10)return r;return NaN}function h2e(){this.sphere||(this.k0=To(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function p2e(e){var t=e.x,i=e.y,r,n,s=ae(t-this.long0);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=eu(this.e,Math.sin(i));r=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return e.x=r,e.y=n,e}function f2e(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=ae(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=d2e(this.e,2*e.y*this.k0/this.a),t=ae(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e}var y2e=["cea"];const m2e={init:h2e,forward:p2e,inverse:f2e,names:y2e};function g2e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function v2e(e){var t=e.x,i=e.y,r=ae(t-this.long0),n=Hp(i-this.lat0);return e.x=this.x0+this.a*r*this.rc,e.y=this.y0+this.a*n,e}function b2e(e){var t=e.x,i=e.y;return e.x=ae(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Hp(this.lat0+(i-this.y0)/this.a),e}var w2e=["Equirectangular","Equidistant_Cylindrical","eqc"];const _2e={init:g2e,forward:v2e,inverse:b2e,names:w2e};var WD=20;function S2e(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=y0(this.es),this.e1=m0(this.es),this.e2=g0(this.es),this.e3=v0(this.es),this.ml0=this.a*rr(this.e0,this.e1,this.e2,this.e3,this.lat0)}function T2e(e){var t=e.x,i=e.y,r,n,s,o=ae(t-this.long0);if(s=o*Math.sin(i),this.sphere)Math.abs(i)<=re?(r=this.a*o,n=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(i),n=this.a*(Hp(i-this.lat0)+(1-Math.cos(s))/Math.tan(i)));else if(Math.abs(i)<=re)r=this.a*o,n=-1*this.ml0;else{var a=fp(this.a,this.e,Math.sin(i))/Math.tan(i);r=a*Math.sin(s),n=this.a*rr(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*(1-Math.cos(s))}return e.x=r+this.x0,e.y=n+this.y0,e}function E2e(e){var t,i,r,n,s,o,a,u,c;if(r=e.x-this.x0,n=e.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=re)t=ae(r/this.a+this.long0),i=0;else{o=this.lat0+n/this.a,a=r*r/this.a/this.a+o*o,u=o;var h;for(s=WD;s;--s)if(h=Math.tan(u),c=-1*(o*(u*h+1)-u-.5*(u*u+a)*h)/((u-o)/h-1),u+=c,Math.abs(c)<=re){i=u;break}t=ae(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(i))}else if(Math.abs(n+this.ml0)<=re)i=0,t=ae(this.long0+r/this.a);else{o=(this.ml0+n)/this.a,a=r*r/this.a/this.a+o*o,u=o;var f,y,m,g,v;for(s=WD;s;--s)if(v=this.e*Math.sin(u),f=Math.sqrt(1-v*v)*Math.tan(u),y=this.a*rr(this.e0,this.e1,this.e2,this.e3,u),m=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),g=y/this.a,c=(o*(f*g+1)-g-.5*f*(g*g+a))/(this.es*Math.sin(2*u)*(g*g+a-2*o*g)/(4*f)+(o-g)*(f*m-2/Math.sin(2*u))-m),u-=c,Math.abs(c)<=re){i=u;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=ae(this.long0+Math.asin(r*f/this.a)/Math.sin(i))}return e.x=t,e.y=i,e}var x2e=["Polyconic","poly"];const A2e={init:S2e,forward:T2e,inverse:E2e,names:x2e};function M2e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function C2e(e){var t,i=e.x,r=e.y,n=r-this.lat0,s=i-this.long0,o=n/Ky*1e-5,a=s,u=1,c=0;for(t=1;t<=10;t++)u=u*o,c=c+this.A[t]*u;var h=c,f=a,y=1,m=0,g,v,b=0,w=0;for(t=1;t<=6;t++)g=y*h-m*f,v=m*h+y*f,y=g,m=v,b=b+this.B_re[t]*y-this.B_im[t]*m,w=w+this.B_im[t]*y+this.B_re[t]*m;return e.x=w*this.a+this.x0,e.y=b*this.a+this.y0,e}function I2e(e){var t,i=e.x,r=e.y,n=i-this.x0,s=r-this.y0,o=s/this.a,a=n/this.a,u=1,c=0,h,f,y=0,m=0;for(t=1;t<=6;t++)h=u*o-c*a,f=c*o+u*a,u=h,c=f,y=y+this.C_re[t]*u-this.C_im[t]*c,m=m+this.C_im[t]*u+this.C_re[t]*c;for(var g=0;g<this.iterations;g++){var v=y,b=m,w,T,A=o,R=a;for(t=2;t<=6;t++)w=v*y-b*m,T=b*y+v*m,v=w,b=T,A=A+(t-1)*(this.B_re[t]*v-this.B_im[t]*b),R=R+(t-1)*(this.B_im[t]*v+this.B_re[t]*b);v=1,b=0;var M=this.B_re[1],C=this.B_im[1];for(t=2;t<=6;t++)w=v*y-b*m,T=b*y+v*m,v=w,b=T,M=M+t*(this.B_re[t]*v-this.B_im[t]*b),C=C+t*(this.B_im[t]*v+this.B_re[t]*b);var k=M*M+C*C;y=(A*M+R*C)/k,m=(R*M-A*C)/k}var B=y,H=m,Q=1,ee=0;for(t=1;t<=9;t++)Q=Q*B,ee=ee+this.D[t]*Q;var le=this.lat0+ee*Ky*1e5,be=this.long0+H;return e.x=be,e.y=le,e}var N2e=["New_Zealand_Map_Grid","nzmg"];const R2e={init:M2e,forward:C2e,inverse:I2e,names:N2e};function P2e(){}function $2e(e){var t=e.x,i=e.y,r=ae(t-this.long0),n=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=n,e.y=s,e}function D2e(e){e.x-=this.x0,e.y-=this.y0;var t=ae(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}var L2e=["Miller_Cylindrical","mill"];const O2e={init:P2e,forward:$2e,inverse:D2e,names:L2e};var k2e=20;function F2e(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Tj(this.es)}function B2e(e){var t,i,r=e.x,n=e.y;if(r=ae(r-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),o=k2e;o;--o){var a=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<re)break}t=this.a*this.C_x*r*(this.m+Math.cos(n)),i=this.a*this.C_y*n}else{var u=Math.sin(n),c=Math.cos(n);i=this.a*qw(n,u,c,this.en),t=this.a*r*c/Math.sqrt(1-this.es*u*u)}return e.x=t,e.y=i,e}function U2e(e){var t,i,r,n;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(t))),this.m?t=lu((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=lu(Math.sin(t)/this.n)),r=ae(r+this.long0),t=Hp(t)):(t=Ej(e.y/this.a,this.es,this.en),n=Math.abs(t),n<K?(n=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)),r=ae(i)):n-re<K&&(r=this.long0)),e.x=r,e.y=t,e}var V2e=["Sinusoidal","sinu"];const j2e={init:F2e,forward:B2e,inverse:U2e,names:V2e};function z2e(){}function H2e(e){for(var t=e.x,i=e.y,r=ae(t-this.long0),n=i,s=Math.PI*Math.sin(i);;){var o=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=o,Math.abs(o)<re)break}n/=2,Math.PI/2-Math.abs(i)<re&&(r=0);var a=.900316316158*this.a*r*Math.cos(n)+this.x0,u=1.4142135623731*this.a*Math.sin(n)+this.y0;return e.x=a,e.y=u,e}function G2e(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var r=ae(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var n=Math.asin(i);return e.x=r,e.y=n,e}var q2e=["Mollweide","moll"];const W2e={init:z2e,forward:H2e,inverse:G2e,names:q2e};function Y2e(){Math.abs(this.lat1+this.lat2)<re||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=y0(this.es),this.e1=m0(this.es),this.e2=g0(this.es),this.e3=v0(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=To(this.e,this.sinphi,this.cosphi),this.ml1=rr(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<re?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=To(this.e,this.sinphi,this.cosphi),this.ml2=rr(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=rr(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function K2e(e){var t=e.x,i=e.y,r;if(this.sphere)r=this.a*(this.g-i);else{var n=rr(this.e0,this.e1,this.e2,this.e3,i);r=this.a*(this.g-n)}var s=this.ns*ae(t-this.long0),o=this.x0+r*Math.sin(s),a=this.y0+this.rh-r*Math.cos(s);return e.x=o,e.y=a,e}function Z2e(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,r,n;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var s=0;if(i!==0&&(s=Math.atan2(t*e.x,t*e.y)),this.sphere)return n=ae(this.long0+s/this.ns),r=Hp(this.g-i/this.a),e.x=n,e.y=r,e;var o=this.g-i/this.a;return r=Ib(o,this.e0,this.e1,this.e2,this.e3),n=ae(this.long0+s/this.ns),e.x=n,e.y=r,e}var J2e=["Equidistant_Conic","eqdc"];const X2e={init:Y2e,forward:K2e,inverse:Z2e,names:J2e};function Q2e(){this.R=this.a}function e_e(e){var t=e.x,i=e.y,r=ae(t-this.long0),n,s;Math.abs(i)<=re&&(n=this.x0+this.R*r,s=this.y0);var o=lu(2*Math.abs(i/Math.PI));(Math.abs(r)<=re||Math.abs(Math.abs(i)-K)<=re)&&(n=this.x0,i>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),u=a*a,c=Math.sin(o),h=Math.cos(o),f=h/(c+h-1),y=f*f,m=f*(2/c-1),g=m*m,v=Math.PI*this.R*(a*(f-g)+Math.sqrt(u*(f-g)*(f-g)-(g+u)*(y-g)))/(g+u);r<0&&(v=-v),n=this.x0+v;var b=u+f;return v=Math.PI*this.R*(m*b-a*Math.sqrt((g+u)*(u+1)-b*b))/(g+u),i>=0?s=this.y0+v:s=this.y0-v,e.x=n,e.y=s,e}function t_e(e){var t,i,r,n,s,o,a,u,c,h,f,y,m;return e.x-=this.x0,e.y-=this.y0,f=Math.PI*this.R,r=e.x/f,n=e.y/f,s=r*r+n*n,o=-Math.abs(n)*(1+s),a=o-2*n*n+r*r,u=-2*o+1+2*n*n+s*s,m=n*n/u+(2*a*a*a/u/u/u-9*o*a/u/u)/27,c=(o-a*a/3/u)/u,h=2*Math.sqrt(-c/3),f=3*m/c/h,Math.abs(f)>1&&(f>=0?f=1:f=-1),y=Math.acos(f)/3,e.y>=0?i=(-h*Math.cos(y+Math.PI/3)-a/3/u)*Math.PI:i=-(-h*Math.cos(y+Math.PI/3)-a/3/u)*Math.PI,Math.abs(r)<re?t=this.long0:t=ae(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-n*n)+s*s))/2/r),e.x=t,e.y=i,e}var i_e=["Van_der_Grinten_I","VanDerGrinten","vandg"];const r_e={init:Q2e,forward:e_e,inverse:t_e,names:i_e};function n_e(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function s_e(e){var t=e.x,i=e.y,r=Math.sin(e.y),n=Math.cos(e.y),s=ae(t-this.long0),o,a,u,c,h,f,y,m,g,v,b,w,T,A,R,M,C,k,B,H,Q,ee,le;return this.sphere?Math.abs(this.sin_p12-1)<=re?(e.x=this.x0+this.a*(K-i)*Math.sin(s),e.y=this.y0-this.a*(K-i)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=re?(e.x=this.x0+this.a*(K+i)*Math.sin(s),e.y=this.y0+this.a*(K+i)*Math.cos(s),e):(k=this.sin_p12*r+this.cos_p12*n*Math.cos(s),M=Math.acos(k),C=M?M/Math.sin(M):1,e.x=this.x0+this.a*C*n*Math.sin(s),e.y=this.y0+this.a*C*(this.cos_p12*r-this.sin_p12*n*Math.cos(s)),e):(o=y0(this.es),a=m0(this.es),u=g0(this.es),c=v0(this.es),Math.abs(this.sin_p12-1)<=re?(h=this.a*rr(o,a,u,c,K),f=this.a*rr(o,a,u,c,i),e.x=this.x0+(h-f)*Math.sin(s),e.y=this.y0-(h-f)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=re?(h=this.a*rr(o,a,u,c,K),f=this.a*rr(o,a,u,c,i),e.x=this.x0+(h+f)*Math.sin(s),e.y=this.y0+(h+f)*Math.cos(s),e):(y=r/n,m=fp(this.a,this.e,this.sin_p12),g=fp(this.a,this.e,r),v=Math.atan((1-this.es)*y+this.es*m*this.sin_p12/(g*n)),b=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(s)),b===0?B=Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(b)-Math.PI)<=re?B=-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):B=Math.asin(Math.sin(s)*Math.cos(v)/Math.sin(b)),w=this.e*this.sin_p12/Math.sqrt(1-this.es),T=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es),A=w*T,R=T*T,H=B*B,Q=H*B,ee=Q*B,le=ee*B,M=m*B*(1-H*R*(1-R)/6+Q/8*A*(1-2*R)+ee/120*(R*(4-7*R)-3*w*w*(1-7*R))-le/48*A),e.x=this.x0+M*Math.sin(b),e.y=this.y0+M*Math.cos(b),e))}function o_e(e){e.x-=this.x0,e.y-=this.y0;var t,i,r,n,s,o,a,u,c,h,f,y,m,g,v,b,w,T,A,R,M,C,k,B;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*K*this.a?void 0:(i=t/this.a,r=Math.sin(i),n=Math.cos(i),s=this.long0,Math.abs(t)<=re?o=this.lat0:(o=lu(n*this.sin_p12+e.y*r*this.cos_p12/t),a=Math.abs(this.lat0)-K,Math.abs(a)<=re?this.lat0>=0?s=ae(this.long0+Math.atan2(e.x,-e.y)):s=ae(this.long0-Math.atan2(-e.x,e.y)):s=ae(this.long0+Math.atan2(e.x*r,t*this.cos_p12*n-e.y*this.sin_p12*r))),e.x=s,e.y=o,e)):(u=y0(this.es),c=m0(this.es),h=g0(this.es),f=v0(this.es),Math.abs(this.sin_p12-1)<=re?(y=this.a*rr(u,c,h,f,K),t=Math.sqrt(e.x*e.x+e.y*e.y),m=y-t,o=Ib(m/this.a,u,c,h,f),s=ae(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=o,e):Math.abs(this.sin_p12+1)<=re?(y=this.a*rr(u,c,h,f,K),t=Math.sqrt(e.x*e.x+e.y*e.y),m=t-y,o=Ib(m/this.a,u,c,h,f),s=ae(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=o,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),b=Math.atan2(e.x,e.y),g=fp(this.a,this.e,this.sin_p12),w=Math.cos(b),T=this.e*this.cos_p12*w,A=-T*T/(1-this.es),R=3*this.es*(1-A)*this.sin_p12*this.cos_p12*w/(1-this.es),M=t/g,C=M-A*(1+A)*Math.pow(M,3)/6-R*(1+3*A)*Math.pow(M,4)/24,k=1-A*C*C/2-M*C*C*C/6,v=Math.asin(this.sin_p12*Math.cos(C)+this.cos_p12*Math.sin(C)*w),s=ae(this.long0+Math.asin(Math.sin(b)*Math.sin(C)/Math.cos(v))),B=Math.sin(v),o=Math.atan2((B-this.es*k*this.sin_p12)*Math.tan(v),B*(1-this.es)),e.x=s,e.y=o,e))}var a_e=["Azimuthal_Equidistant","aeqd"];const l_e={init:n_e,forward:s_e,inverse:o_e,names:a_e};function u_e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function c_e(e){var t,i,r,n,s,o,a,u,c=e.x,h=e.y;return r=ae(c-this.long0),t=Math.sin(h),i=Math.cos(h),n=Math.cos(r),o=this.sin_p14*t+this.cos_p14*i*n,s=1,(o>0||Math.abs(o)<=re)&&(a=this.a*s*i*Math.sin(r),u=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*i*n)),e.x=a,e.y=u,e}function d_e(e){var t,i,r,n,s,o,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=lu(t/this.a),r=Math.sin(i),n=Math.cos(i),o=this.long0,Math.abs(t)<=re?(a=this.lat0,e.x=o,e.y=a,e):(a=lu(n*this.sin_p14+e.y*r*this.cos_p14/t),s=Math.abs(this.lat0)-K,Math.abs(s)<=re?(this.lat0>=0?o=ae(this.long0+Math.atan2(e.x,-e.y)):o=ae(this.long0-Math.atan2(-e.x,e.y)),e.x=o,e.y=a,e):(o=ae(this.long0+Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r)),e.x=o,e.y=a,e))}var h_e=["ortho"];const p_e={init:u_e,forward:c_e,inverse:d_e,names:h_e};var Et={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},tt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function f_e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=K-et/2?this.face=Et.TOP:this.lat0<=-(K-et/2)?this.face=Et.BOTTOM:Math.abs(this.long0)<=et?this.face=Et.FRONT:Math.abs(this.long0)<=K+et?this.face=this.long0>0?Et.RIGHT:Et.LEFT:this.face=Et.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function y_e(e){var t={x:0,y:0},i,r,n,s,o,a,u={value:0};if(e.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):i=e.y,r=e.x,this.face===Et.TOP)s=K-i,r>=et&&r<=K+et?(u.value=tt.AREA_0,n=r-K):r>K+et||r<=-(K+et)?(u.value=tt.AREA_1,n=r>0?r-Vt:r+Vt):r>-(K+et)&&r<=-et?(u.value=tt.AREA_2,n=r+K):(u.value=tt.AREA_3,n=r);else if(this.face===Et.BOTTOM)s=K+i,r>=et&&r<=K+et?(u.value=tt.AREA_0,n=-r+K):r<et&&r>=-et?(u.value=tt.AREA_1,n=-r):r<-et&&r>=-(K+et)?(u.value=tt.AREA_2,n=-r-K):(u.value=tt.AREA_3,n=r>0?-r+Vt:-r-Vt);else{var c,h,f,y,m,g,v;this.face===Et.RIGHT?r=jh(r,+K):this.face===Et.BACK?r=jh(r,+Vt):this.face===Et.LEFT&&(r=jh(r,-K)),y=Math.sin(i),m=Math.cos(i),g=Math.sin(r),v=Math.cos(r),c=m*v,h=m*g,f=y,this.face===Et.FRONT?(s=Math.acos(c),n=Pg(s,f,h,u)):this.face===Et.RIGHT?(s=Math.acos(h),n=Pg(s,f,-c,u)):this.face===Et.BACK?(s=Math.acos(-c),n=Pg(s,f,-h,u)):this.face===Et.LEFT?(s=Math.acos(-h),n=Pg(s,f,c,u)):(s=n=0,u.value=tt.AREA_0)}return a=Math.atan(12/Vt*(n+Math.acos(Math.sin(n)*Math.cos(et))-K)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===tt.AREA_1?a+=K:u.value===tt.AREA_2?a+=Vt:u.value===tt.AREA_3&&(a+=1.5*Vt),t.x=o*Math.cos(a),t.y=o*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function m_e(e){var t={lam:0,phi:0},i,r,n,s,o,a,u,c,h,f={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),i=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?f.value=tt.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(f.value=tt.AREA_1,i-=K):e.x<0&&-e.x>=Math.abs(e.y)?(f.value=tt.AREA_2,i=i<0?i+Vt:i-Vt):(f.value=tt.AREA_3,i+=K),h=Vt/12*Math.tan(i),o=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),a=Math.atan(o),n=Math.cos(i),s=Math.tan(r),u=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),u<-1?u=-1:u>1&&(u=1),this.face===Et.TOP)c=Math.acos(u),t.phi=K-c,f.value===tt.AREA_0?t.lam=a+K:f.value===tt.AREA_1?t.lam=a<0?a+Vt:a-Vt:f.value===tt.AREA_2?t.lam=a-K:t.lam=a;else if(this.face===Et.BOTTOM)c=Math.acos(u),t.phi=c-K,f.value===tt.AREA_0?t.lam=-a+K:f.value===tt.AREA_1?t.lam=-a:f.value===tt.AREA_2?t.lam=-a-K:t.lam=a<0?-a-Vt:-a+Vt;else{var y,m,g;y=u,h=y*y,h>=1?g=0:g=Math.sqrt(1-h)*Math.sin(a),h+=g*g,h>=1?m=0:m=Math.sqrt(1-h),f.value===tt.AREA_1?(h=m,m=-g,g=h):f.value===tt.AREA_2?(m=-m,g=-g):f.value===tt.AREA_3&&(h=m,m=g,g=-h),this.face===Et.RIGHT?(h=y,y=-m,m=h):this.face===Et.BACK?(y=-y,m=-m):this.face===Et.LEFT&&(h=y,y=m,m=-h),t.phi=Math.acos(-g)-K,t.lam=Math.atan2(m,y),this.face===Et.RIGHT?t.lam=jh(t.lam,-K):this.face===Et.BACK?t.lam=jh(t.lam,-Vt):this.face===Et.LEFT&&(t.lam=jh(t.lam,+K))}if(this.es!==0){var v,b,w;v=t.phi<0?1:0,b=Math.tan(t.phi),w=this.b/Math.sqrt(b*b+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-w*w)/(this.one_minus_f*w)),v&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function Pg(e,t,i,r){var n;return e<re?(r.value=tt.AREA_0,n=0):(n=Math.atan2(t,i),Math.abs(n)<=et?r.value=tt.AREA_0:n>et&&n<=K+et?(r.value=tt.AREA_1,n-=K):n>K+et||n<=-(K+et)?(r.value=tt.AREA_2,n=n>=0?n-Vt:n+Vt):(r.value=tt.AREA_3,n+=K)),n}function jh(e,t){var i=e+t;return i<-Vt?i+=Pm:i>+Vt&&(i-=Pm),i}var g_e=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const v_e={init:f_e,forward:y_e,inverse:m_e,names:g_e};var SA=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],wy=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Mj=.8487,Cj=1.3523,Ij=oo/5,b_e=1/Ij,xh=18,Nb=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},w_e=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function __e(e,t,i,r){for(var n=t;r;--r){var s=e(n);if(n-=s,Math.abs(s)<i)break}return n}function S_e(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function T_e(e){var t=ae(e.x-this.long0),i=Math.abs(e.y),r=Math.floor(i*Ij);r<0?r=0:r>=xh&&(r=xh-1),i=oo*(i-b_e*r);var n={x:Nb(SA[r],i)*t,y:Nb(wy[r],i)};return e.y<0&&(n.y=-n.y),n.x=n.x*this.a*Mj+this.x0,n.y=n.y*this.a*Cj+this.y0,n}function E_e(e){var t={x:(e.x-this.x0)/(this.a*Mj),y:Math.abs(e.y-this.y0)/(this.a*Cj)};if(t.y>=1)t.x/=SA[xh][0],t.y=e.y<0?-K:K;else{var i=Math.floor(t.y*xh);for(i<0?i=0:i>=xh&&(i=xh-1);;)if(wy[i][0]>t.y)--i;else if(wy[i+1][0]<=t.y)++i;else break;var r=wy[i],n=5*(t.y-r[0])/(wy[i+1][0]-r[0]);n=__e(function(s){return(Nb(r,s)-t.y)/w_e(r,s)},n,re,100),t.x/=Nb(SA[i],n),t.y=(5*i+n)*vi,e.y<0&&(t.y=-t.y)}return t.x=ae(t.x+this.long0),t}var x_e=["Robinson","robin"];const A_e={init:S_e,forward:T_e,inverse:E_e,names:x_e};function M_e(){this.name="geocent"}function C_e(e){var t=fj(e,this.es,this.a);return t}function I_e(e){var t=yj(e,this.es,this.a,this.b);return t}var N_e=["Geocentric","geocentric","geocent","Geocent"];const R_e={init:M_e,forward:C_e,inverse:I_e,names:N_e};var Li={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},bf={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function P_e(){if(Object.keys(bf).forEach(function(i){if(typeof this[i]>"u")this[i]=bf[i].def;else{if(bf[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);bf[i].num&&(this[i]=parseFloat(this[i]))}bf[i].degrees&&(this[i]=this[i]*vi)}.bind(this)),Math.abs(Math.abs(this.lat0)-K)<re?this.mode=this.lat0<0?Li.S_POLE:Li.N_POLE:Math.abs(this.lat0)<re?this.mode=Li.EQUIT:(this.mode=Li.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function $_e(e){e.x-=this.long0;var t=Math.sin(e.y),i=Math.cos(e.y),r=Math.cos(e.x),n,s;switch(this.mode){case Li.OBLIQ:s=this.sinph0*t+this.cosph0*i*r;break;case Li.EQUIT:s=i*r;break;case Li.S_POLE:s=-t;break;case Li.N_POLE:s=t;break}switch(s=this.pn1/(this.p-s),n=s*i*Math.sin(e.x),this.mode){case Li.OBLIQ:s*=this.cosph0*t-this.sinph0*i*r;break;case Li.EQUIT:s*=t;break;case Li.N_POLE:s*=-(i*r);break;case Li.S_POLE:s*=i*r;break}var o,a;return o=s*this.cg+n*this.sg,a=1/(o*this.sw*this.h1+this.cw),n=(n*this.cg-s*this.sg)*this.cw*a,s=o*a,e.x=n*this.a,e.y=s*this.a,e}function D_e(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},i,r,n;n=1/(this.pn1-e.y*this.sw),i=this.pn1*e.x*n,r=this.pn1*e.y*this.cw*n,e.x=i*this.cg+r*this.sg,e.y=r*this.cg-i*this.sg;var s=bs(e.x,e.y);if(Math.abs(s)<re)t.x=0,t.y=e.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case Li.OBLIQ:t.y=Math.asin(o*this.sinph0+e.y*a*this.cosph0/s),e.y=(o-this.sinph0*Math.sin(t.y))*s,e.x*=a*this.cosph0;break;case Li.EQUIT:t.y=Math.asin(e.y*a/s),e.y=o*s,e.x*=a;break;case Li.N_POLE:t.y=Math.asin(o),e.y=-e.y;break;case Li.S_POLE:t.y=-Math.asin(o);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var L_e=["Tilted_Perspective","tpers"];const O_e={init:P_e,forward:$_e,inverse:D_e,names:L_e};function k_e(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function F_e(e){var t=e.x,i=e.y,r,n,s,o;if(t=t-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var a=this.radius_p/bs(this.radius_p*Math.cos(i),Math.sin(i));if(n=a*Math.cos(t)*Math.cos(i),s=a*Math.sin(t)*Math.cos(i),o=a*Math.sin(i),(this.radius_g-n)*n-s*s-o*o*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;r=this.radius_g-n,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/bs(o,r)),e.y=this.radius_g_1*Math.atan(o/r)):(e.x=this.radius_g_1*Math.atan(s/r),e.y=this.radius_g_1*Math.atan(o/bs(s,r)))}else this.shape==="sphere"&&(r=Math.cos(i),n=Math.cos(t)*r,s=Math.sin(t)*r,o=Math.sin(i),r=this.radius_g-n,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/bs(o,r)),e.y=this.radius_g_1*Math.atan(o/r)):(e.x=this.radius_g_1*Math.atan(s/r),e.y=this.radius_g_1*Math.atan(o/bs(s,r))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function B_e(e){var t=-1,i=0,r=0,n,s,o,a;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*bs(1,r)):(i=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*bs(1,i));var u=r/this.radius_p;if(n=i*i+u*u+t*t,s=2*this.radius_g*t,o=s*s-4*n*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-s-Math.sqrt(o))/(2*n),t=this.radius_g+a*t,i*=a,r*=a,e.x=Math.atan2(i,t),e.y=Math.atan(r*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+r*r)):(i=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+i*i)),n=i*i+r*r+t*t,s=2*this.radius_g*t,o=s*s-4*n*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-s-Math.sqrt(o))/(2*n),t=this.radius_g+a*t,i*=a,r*=a,e.x=Math.atan2(i,t),e.y=Math.atan(r*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var U_e=["Geostationary Satellite View","Geostationary_Satellite","geos"];const V_e={init:k_e,forward:F_e,inverse:B_e,names:U_e};function j_e(e){e.Proj.projections.add(ev),e.Proj.projections.add(tv),e.Proj.projections.add(Ybe),e.Proj.projections.add(nwe),e.Proj.projections.add(cwe),e.Proj.projections.add(ywe),e.Proj.projections.add(_we),e.Proj.projections.add(Awe),e.Proj.projections.add(Rwe),e.Proj.projections.add(Owe),e.Proj.projections.add(Qwe),e.Proj.projections.add(s2e),e.Proj.projections.add(c2e),e.Proj.projections.add(m2e),e.Proj.projections.add(_2e),e.Proj.projections.add(A2e),e.Proj.projections.add(R2e),e.Proj.projections.add(O2e),e.Proj.projections.add(j2e),e.Proj.projections.add(W2e),e.Proj.projections.add(X2e),e.Proj.projections.add(r_e),e.Proj.projections.add(l_e),e.Proj.projections.add(p_e),e.Proj.projections.add(v_e),e.Proj.projections.add(A_e),e.Proj.projections.add(R_e),e.Proj.projections.add(O_e),e.Proj.projections.add(V_e)}rn.defaultDatum="WGS84";rn.Proj=fo;rn.WGS84=new rn.Proj("WGS84");rn.Point=pp;rn.toPoint=mj;rn.defs=Ji;rn.nadgrid=Zve;rn.transform=Cb;rn.mgrs=hbe;rn.version="__VERSION__";j_e(rn);const z_e="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",H_e="+proj=lcc +lat_1=41.03333333333333 +lat_2=40.66666666666666 +lat_0=40.16666666666666 +lon_0=-74 +x_0=300000.0000000001 +y_0=0 +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs";let YD=null,Ed=null,KD=null,$g=null,Dg=null,TA=null;async function G_e(e){const r=cve(await(await fetch("https://corsproxy.io/?https://maps.nyc.gov/hurricane/data/center.csv")).text()).map(o=>({type:"Feature",properties:o,geometry:{type:"Point",coordinates:rn(H_e,z_e,[+o.X,+o.Y])}}));console.log(r);const n=new Blob([JSON.stringify({type:"FeatureCollection",features:r})],{type:"application/json"}),s=new bb({url:URL.createObjectURL(n),popupTemplate:{title:"{OEM_LABEL}",content:"{BLDG_ADD} - {ACC_FEAT}",fieldInfos:[{fieldName:"Created Date",format:{dateFormat:"short-date-short-time"}}]},renderer:{type:"simple",symbol:{type:"simple-marker",style:"diamond",color:"lightblue",size:13,outline:{width:2,color:"red"}}},spatialReference:{wkid:4326},title:"Hurricane Evacuation Center"});e.add(s),s.visible=!1,TA=s}function q_e(e){YD=new J1({style:B1e}),Ed=new J1({style:G1e}),KD=new J1({style:Z1e});const t=new Blob([JSON.stringify(tve)],{type:"application/json"});$g=new bb({url:URL.createObjectURL(t),renderer:{type:"heatmap",colorStops:[{color:"rgba(241,238,246, 0)",ratio:0},{color:"rgba(251,106,74, 0.4)",ratio:.1},{color:"rgba(222,45,38, 0.5)",ratio:.3},{color:"rgba(165,15,21, 0.7)",ratio:.6}],maxDensity:.01,minDensity:0},title:"Hurricane Ida - 311 DEP Flooding Related Requests",minScale:3e5,maxScale:9e3}),Dg=new bb({url:URL.createObjectURL(t),popupTemplate:{title:"{Complaint Type} {Descriptor}",content:"Created {Created Date} at {Incident Address}. Resoluted with {Resolution Description}",fieldInfos:[{fieldName:"Created Date",format:{dateFormat:"short-date-short-time"}}]},renderer:{type:"simple",symbol:{type:"simple-marker",color:"rgba(255,0,0, 0.8)",size:13,outline:{color:"white"}}},title:"Hurricane Ida - 311 DEP Flooding Related Requests",minScale:9e3,maxScale:0}),G_e(e),e.add(KD),e.add(YD),e.add(Ed),e.add($g),e.add(Dg);const i=["Area not included in analysis:1","Area under analysis","Area not included in analysis:2","National Wetlands Inventory/1","Nuisance Flooding (greater or equal to 4 in and less than 1ft)/1","Deep and Contiguous Flooding (1ft and greater)/1","Future High Tides 2050"];return[{name:"Moderate Stormwater Flood with 2050 Sea Levels",description:"Heavy rain events that overwhelm our stormwater management system.",legendElements:['<div><span class="fill" style="background-color: #73B2FF;"></span>Nuisance Flooding (greater or equal to 4 in and less than 1ft)</div>','<div><span class="fill" style="background-color: #005CE6;"></span>Deep and Contiguous Flooding (1ft and greater)</div>','<div><span class="fill" style="background-color: rgba(255, 167, 29,1);"></span>Future High Tides in 2050</div>','<div><span class="fill" style="background-color: #CCCCCC;"></span>Area not included in analysis or National Wetlands Inventory</div>'],visible:!0,src:rve,on:r=>{i.forEach(n=>{Ed.setStyleLayerVisibility(n,"visible")})},off:r=>{i.forEach(n=>{Ed.setStyleLayerVisibility(n,"none")})}},{name:"311 DEP Flood Service Requests (Hur. Ida: Sept 1-2 2021)",description:"Complaints of Sewer Backup, Catch Basin Clogged/Flooding, and Basement Flooding. These show us issues that happen in buildings and sidewalks that the stormwater layer can miss. Zoom in to view more details.",legendElements:['<div><span class="circle" style="background-color: rgba(255,0,0,0.8);outline: 1px solid rgba(200,200,200,0.7);"></span>311 DEP Flood Service Requests</div>'],visible:!0,src:ive,on:r=>{$g.visible=!0,Dg.visible=!0},off:r=>{$g.visible=!1,Dg.visible=!1}},{name:"Sandy Inundation Zone",legendElements:['<div><span class="fill" style="background-color: #446589;"></span>Inundation Zone - Areas that were flooded as a result of Hurricane Sandy.</div>'],visible:!0,src:nve,on:r=>{Ed.setStyleLayerVisibility("Sandy Inundation Zone","visible")},off:r=>{Ed.setStyleLayerVisibility("Sandy Inundation Zone","none")}},{name:"Resources and Evacuation Centers",legendElements:['<div><span class="diamond" style="background-color: lightblue; outline-color: red"></span>Hurricane Evacuation Centers</div>'],visible:!1,src:"",on:r=>{TA.visible=!0},off:r=>{TA.visible=!1}}]}const xd=[];function Nj(e,t=Ui){let i;const r=new Set;function n(a){if(sd(e,a)&&(e=a,i)){const u=!xd.length;for(const c of r)c[1](),xd.push(c,e);if(u){for(let c=0;c<xd.length;c+=2)xd[c][0](xd[c+1]);xd.length=0}}}function s(a){n(a(e))}function o(a,u=Ui){const c=[a,u];return r.add(c),r.size===1&&(i=t(n)||Ui),a(e),()=>{r.delete(c),r.size===0&&(i(),i=null)}}return{set:n,update:s,subscribe:o}}const Rj=Nj(),Lm=Nj([]);function W_e(e){let t,i,r;return{c(){t=Cs("div"),vt(t,"id","map"),vt(t,"class","flex-1 h-full")},m(n,s){kn(n,t,s),i||(r=Uz(e[0].call(null,t)),i=!0)},p:Ui,i:Ui,o:Ui,d(n){n&&nn(t),i=!1,r()}}}function Y_e(e){function t(i){const r=new zL,n=new O0e({map:r,container:i,center:[-73.98255,40.75925],zoom:12});n.ui.components=["attribution"];const s=new Uge({view:n});n.ui.add(s,"top-right");const o=new EV({view:n});return n.ui.add(o,"bottom-right"),Lm.set(q_e(r)),Rj.set(r),n.when(()=>{console.log("Map is loaded")}),{destroy:()=>{r.destroy()}}}return[t]}class K_e extends mp{constructor(t){super(),yp(this,t,Y_e,W_e,sd,{})}}function Z_e(e){let t,i;return{c(){t=U_("svg"),i=U_("path"),vt(i,"fill-rule","evenodd"),vt(i,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"),vt(i,"clip-rule","evenodd"),vt(t,"xmlns","http://www.w3.org/2000/svg"),vt(t,"class","h-5 w-5"),vt(t,"viewBox","0 0 20 20"),vt(t,"fill","currentColor")},m(r,n){kn(r,t,n),no(t,i)},p:Ui,i:Ui,o:Ui,d(r){r&&nn(t)}}}class J_e extends mp{constructor(t){super(),yp(this,t,null,Z_e,sd,{})}}function ZD(e){let t,i,r;return{c(){t=Cs("img"),rI(t.src,i=e[0].src)||vt(t,"src",i),vt(t,"alt",r=e[0].name+" Thumbnail for Toggle")},m(n,s){kn(n,t,s)},p(n,s){s&1&&!rI(t.src,i=n[0].src)&&vt(t,"src",i),s&1&&r!==(r=n[0].name+" Thumbnail for Toggle")&&vt(t,"alt",r)},d(n){n&&nn(t)}}}function JD(e){let t,i,r,n;return i=new J_e({}),{c(){t=Cs("div"),Jy(i.$$.fragment),vt(t,"class","absolute bottom-0 right-0"),vt(t,"title",r=e[0].description)},m(s,o){kn(s,t,o),zh(i,t,null),n=!0},p(s,o){(!n||o&1&&r!==(r=s[0].description))&&vt(t,"title",r)},i(s){n||(Ts(i.$$.fragment,s),n=!0)},o(s){wa(i.$$.fragment,s),n=!1},d(s){s&&nn(t),Hh(i)}}}function X_e(e){let t,i,r,n=e[0].name+"",s,o,a,u,c,h,f=e[0].src&&ZD(e),y=e[0].description&&JD(e);return{c(){t=Cs("button"),f&&f.c(),i=Zy(),r=Cs("div"),s=EA(n),o=Zy(),y&&y.c(),vt(t,"class",a="w-32 min-h-24 bg-white pointer-events-auto drop-shadow-md cursor-pointer text-center "+(e[0].visible?"outline outline-2 outline-blue-500":"")+" flex flex-col items-center p-2 mb-3 text-xs hover:bg-slate-100 focus:bg-slate-100")},m(m,g){kn(m,t,g),f&&f.m(t,null),no(t,i),no(t,r),no(r,s),no(t,o),y&&y.m(t,null),u=!0,c||(h=jz(t,"click",e[1]),c=!0)},p(m,[g]){m[0].src?f?f.p(m,g):(f=ZD(m),f.c(),f.m(t,i)):f&&(f.d(1),f=null),(!u||g&1)&&n!==(n=m[0].name+"")&&Hz(s,n),m[0].description?y?(y.p(m,g),g&1&&Ts(y,1)):(y=JD(m),y.c(),Ts(y,1),y.m(t,null)):y&&(y9(),wa(y,1,1,()=>{y=null}),m9()),(!u||g&1&&a!==(a="w-32 min-h-24 bg-white pointer-events-auto drop-shadow-md cursor-pointer text-center "+(m[0].visible?"outline outline-2 outline-blue-500":"")+" flex flex-col items-center p-2 mb-3 text-xs hover:bg-slate-100 focus:bg-slate-100"))&&vt(t,"class",a)},i(m){u||(Ts(y),u=!0)},o(m){wa(y),u=!1},d(m){m&&nn(t),f&&f.d(),y&&y.d(),c=!1,h()}}}function Q_e(e,t,i){let r,n;iv(e,Lm,a=>i(2,r=a)),iv(e,Rj,a=>i(3,n=a));let{layer:s={name:"Layer Name",description:"Layer Description",visible:!0,src:"http://graphics8.nytimes.com/newsgraphics/2012/1120-sandy/_assets/city_thumb.png",on:a=>{},off:a=>{}}}=t;function o(){s.visible?s.off(n):s.on(n),i(0,s.visible=!s.visible,s),Lm.set(r)}return e.$$set=a=>{"layer"in a&&i(0,s=a.layer)},[s,o]}class eSe extends mp{constructor(t){super(),yp(this,t,Q_e,X_e,sd,{layer:0})}}function XD(e,t,i){const r=e.slice();return r[2]=t[i],r}function QD(e){let t,i,r,n=e[0],s=[];for(let o=0;o<n.length;o+=1)s[o]=e9(XD(e,n,o));return{c(){t=Cs("div"),i=Cs("h3"),i.textContent="Legend",r=Zy();for(let o=0;o<s.length;o+=1)s[o].c();vt(i,"class","text-lg font-medium mb-2"),vt(t,"id","legend"),vt(t,"class","w-52 bg-white p-2 drop-shadow-sm flex flex-col h-fit leading-5")},m(o,a){kn(o,t,a),no(t,i),no(t,r);for(let u=0;u<s.length;u+=1)s[u].m(t,null)},p(o,a){if(a&1){n=o[0];let u;for(u=0;u<n.length;u+=1){const c=XD(o,n,u);s[u]?s[u].p(c,a):(s[u]=e9(c),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}},d(o){o&&nn(t),Vz(s,o)}}}function e9(e){let t,i=e[2]+"",r;return{c(){t=new Gz(!1),r=xA(),t.a=r},m(n,s){t.m(i,n,s),kn(n,r,s)},p(n,s){s&1&&i!==(i=n[2]+"")&&t.p(i)},d(n){n&&nn(r),n&&t.d()}}}function tSe(e){let t,i=e[0].length&&QD(e);return{c(){i&&i.c(),t=xA()},m(r,n){i&&i.m(r,n),kn(r,t,n)},p(r,[n]){r[0].length?i?i.p(r,n):(i=QD(r),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Ui,o:Ui,d(r){i&&i.d(r),r&&nn(t)}}}function iSe(e,t,i){let r,n;return iv(e,Lm,s=>i(1,n=s)),e.$$.update=()=>{e.$$.dirty&2&&i(0,r=n.filter(({visible:s})=>s).reduce((s,o)=>o.legendElements?[...s,...o.legendElements]:s,[]))},[r,n]}class rSe extends mp{constructor(t){super(),yp(this,t,iSe,tSe,sd,{})}}function t9(e,t,i){const r=e.slice();return r[1]=t[i],r}function i9(e,t){let i,r,n;return r=new eSe({props:{layer:t[1]}}),{key:e,first:null,c(){i=xA(),Jy(r.$$.fragment),this.first=i},m(s,o){kn(s,i,o),zh(r,s,o),n=!0},p(s,o){t=s;const a={};o&1&&(a.layer=t[1]),r.$set(a)},i(s){n||(Ts(r.$$.fragment,s),n=!0)},o(s){wa(r.$$.fragment,s),n=!1},d(s){s&&nn(i),Hh(r,s)}}}function nSe(e){let t,i,r=[],n=new Map,s,o,a,u=e[0];const c=h=>h[1].name;for(let h=0;h<u.length;h+=1){let f=t9(e,u,h),y=c(f);n.set(y,r[h]=i9(y,f))}return o=new rSe({}),{c(){t=Cs("div"),i=Cs("div");for(let h=0;h<r.length;h+=1)r[h].c();s=Zy(),Jy(o.$$.fragment),vt(i,"class","mr-4"),vt(t,"class","absolute top-3 left-3 z-10 flex flex-row")},m(h,f){kn(h,t,f),no(t,i);for(let y=0;y<r.length;y+=1)r[y].m(i,null);no(t,s),zh(o,t,null),a=!0},p(h,[f]){f&1&&(u=h[0],y9(),r=Zz(r,f,c,1,h,u,n,i,Kz,i9,null,t9),m9())},i(h){if(!a){for(let f=0;f<u.length;f+=1)Ts(r[f]);Ts(o.$$.fragment,h),a=!0}},o(h){for(let f=0;f<r.length;f+=1)wa(r[f]);wa(o.$$.fragment,h),a=!1},d(h){h&&nn(t);for(let f=0;f<r.length;f+=1)r[f].d();Hh(o)}}}function sSe(e,t,i){let r;return iv(e,Lm,n=>i(0,r=n)),[r]}class oSe extends mp{constructor(t){super(),yp(this,t,sSe,nSe,sd,{})}}function aSe(e){let t,i,r,n,s;return i=new oSe({}),n=new K_e({}),{c(){t=Cs("main"),Jy(i.$$.fragment),r=Zy(),Jy(n.$$.fragment),vt(t,"class","flex flex-col md:flex-row h-full absolute bottom-0 left-0 right-0")},m(o,a){kn(o,t,a),zh(i,t,null),no(t,r),zh(n,t,null),s=!0},p:Ui,i(o){s||(Ts(i.$$.fragment,o),Ts(n.$$.fragment,o),s=!0)},o(o){wa(i.$$.fragment,o),wa(n.$$.fragment,o),s=!1},d(o){o&&nn(t),Hh(i),Hh(n)}}}class lSe extends mp{constructor(t){super(),yp(this,t,null,aSe,sd,{})}}new lSe({target:document.getElementById("app")});export{z1 as $,Z$ as A,aD as B,$e as C,iD as D,W$ as E,lD as F,oD as G,uD as H,ASe as I,lr as J,Ct as K,tD as L,rD as M,lV as N,De as O,nD as P,ui as Q,Y$ as R,Rxe as S,Ea as T,sD as U,hD as V,Nxe as W,pO as X,dD as Y,rV as Z,Eo as _,bH as a,Nm as a$,eD as a0,Q$ as a1,sL as a2,Eye as a3,Sye as a4,tV as a5,iA as a6,d0 as a7,s3 as a8,Gxe as a9,Nr as aA,ii as aB,LF as aC,Jxe as aD,Xxe as aE,uu as aF,K3 as aG,l as aH,d as aI,S as aJ,ce as aK,Zl as aL,Ar as aM,o3 as aN,uL as aO,ao as aP,he as aQ,Ln as aR,Bw as aS,mTe as aT,qU as aU,RU as aV,WU as aW,Lt as aX,Wfe as aY,exe as aZ,nye as a_,$xe as aa,Dxe as ab,Vxe as ac,Uxe as ad,_i as ae,Qxe as af,qxe as ag,Ma as ah,K$ as ai,J$ as aj,X$ as ak,Sp as al,q$ as am,fxe as an,to as ao,Rb as ap,wD as aq,bD as ar,Fb as as,hV as at,Gh as au,Ob as av,Y as aw,We as ax,oxe as ay,nxe as az,_Se as b,m$ as b$,txe as b0,V as b1,Mi as b2,LA as b3,DSe as b4,Es as b5,nu as b6,Rr as b7,Ep as b8,lEe as b9,KEe as bA,eV as bB,uC as bC,up as bD,$ as bE,s$ as bF,e$ as bG,t$ as bH,g$ as bI,i$ as bJ,l$ as bK,x$ as bL,BP as bM,A$ as bN,ms as bO,M$ as bP,C$ as bQ,lU as bR,dU as bS,cU as bT,Whe as bU,eo as bV,Cm as bW,Ow as bX,vTe as bY,Mxe as bZ,Axe as b_,Dc as ba,qK as bb,y3 as bc,hk as bd,yEe as be,BR as bf,ck as bg,p3 as bh,ETe as bi,or as bj,fb as bk,tEe as bl,xTe as bm,gTe as bn,eTe as bo,Xb as bp,oA as bq,hJ as br,pJ as bs,we as bt,Gl as bu,UL as bv,JSe as bw,f3 as bx,ZEe as by,JEe as bz,O as c,Cce as c$,w$ as c0,Is as c1,ZP as c2,VP as c3,jP as c4,zP as c5,u$ as c6,O$ as c7,B$ as c8,JP as c9,Vg as cA,MN as cB,nAe as cC,ki as cD,sAe as cE,Txe as cF,bEe as cG,cEe as cH,qe as cI,kP as cJ,oAe as cK,Cxe as cL,tC as cM,cAe as cN,uAe as cO,lAe as cP,dAe as cQ,hAe as cR,Sxe as cS,Yy as cT,$1e as cU,yAe as cV,fAe as cW,pAe as cX,mAe as cY,Mce as cZ,jEe as c_,k$ as ca,wo as cb,mxe as cc,_Te as cd,HSe as ce,aAe as cf,se as cg,L7 as ch,one as ci,ane as cj,XH as ck,Exe as cl,LEe as cm,xxe as cn,Vh as co,hA as cp,Hc as cq,W0 as cr,H7 as cs,XSe as ct,Ic as cu,dh as cv,xy as cw,jTe as cx,ji as cy,hr as cz,yxe as d,xe as d$,UEe as d0,ri as d1,ut as d2,Ap as d3,VEe as d4,Fde as d5,Bde as d6,Ude as d7,Pn as d8,WF as d9,Tye as dA,Pxe as dB,Lxe as dC,Oxe as dD,kxe as dE,Fxe as dF,jxe as dG,zxe as dH,eAe as dI,iAe as dJ,fc as dK,lo as dL,pA as dM,tAe as dN,eoe as dO,yk as dP,QU as dQ,Bxe as dR,_f as dS,Hxe as dT,Yxe as dU,pu as dV,Iv as dW,He as dX,Z1 as dY,NA as dZ,jm as d_,nTe as da,Ixe as db,te as dc,jF as dd,mh as de,Mue as df,$ce as dg,toe as dh,cr as di,mk as dj,hEe as dk,uEe as dl,gse as dm,vEe as dn,UR as dp,Kxe as dq,Sce as dr,Zxe as ds,Wxe as dt,_xe as du,ySe as dv,mSe as dw,qde as dx,Ufe as dy,mD as dz,cD as e,Zc as e$,od as e0,N6 as e1,je as e2,j as e3,di as e4,ehe as e5,Sv as e6,me as e7,l1e as e8,xf as e9,WEe as eA,HL as eB,sTe as eC,Y_ as eD,tr as eE,Ta as eF,dTe as eG,oTe as eH,lTe as eI,aTe as eJ,uTe as eK,om as eL,Rn as eM,$Z as eN,DA as eO,t0 as eP,nm as eQ,cTe as eR,ca as eS,cu as eT,zEe as eU,kM as eV,y6 as eW,Wh as eX,sm as eY,qy as eZ,NK as e_,Ip as ea,wTe as eb,TTe as ec,Kb as ed,bTe as ee,ZH as ef,zb as eg,Tp as eh,ir as ei,fJ as ej,Ue as ek,nme as el,ixe as em,rxe as en,Ir as eo,Vc as ep,Al as eq,iu as er,jb as es,zi as et,vv as eu,Z_ as ev,WO as ew,cp as ex,sde as ey,nde as ez,fD as f,Jq as f$,Jc as f0,su as f1,VT as f2,pt as f3,UT as f4,zT as f5,Ov as f6,BQ as f7,iye as f8,B6 as f9,Dr as fA,Lc as fB,ye as fC,z$ as fD,jye as fE,pc as fF,Dt as fG,_h as fH,G$ as fI,_ce as fJ,gp as fK,dH as fL,Kge as fM,gB as fN,HM as fO,MB as fP,Rw as fQ,fSe as fR,Pw as fS,wB as fT,Jh as fU,vo as fV,g9 as fW,LSe as fX,lp as fY,Qce as fZ,$Se as f_,A6 as fa,e0 as fb,jc as fc,xt as fd,ya as fe,x3 as ff,lN as fg,tTe as fh,CTe as fi,LTe as fj,lxe as fk,ad as fl,Ao as fm,kA as fn,Z as fo,tN as fp,q7 as fq,_w as fr,ww as fs,k0e as ft,Fe as fu,VTe as fv,H6 as fw,J9 as fx,Yh as fy,Ai as fz,pSe as g,s8 as g$,FEe as g0,yce as g1,$r as g2,wue as g3,_ue as g4,Dle as g5,_Z as g6,cxe as g7,So as g8,Xq as g9,pk as gA,ak as gB,Hl as gC,vSe as gD,Ume as gE,IA as gF,TY as gG,SS as gH,SSe as gI,TSe as gJ,_S as gK,pL as gL,qSe as gM,KY as gN,DY as gO,oL as gP,cL as gQ,jSe as gR,nK as gS,SL as gT,iQ as gU,XX as gV,ZX as gW,WX as gX,BY as gY,BTe as gZ,GTe as g_,uxe as ga,ATe as gb,DTe as gc,mEe as gd,k7 as ge,Vge as gf,eEe as gg,Zr as gh,En as gi,bJ as gj,wU as gk,v9 as gl,w9 as gm,Nne as gn,hTe as go,FL as gp,iTe as gq,QSe as gr,PW as gs,BW as gt,Zb as gu,USe as gv,VX as gw,O6 as gx,gEe as gy,oEe as gz,bSe as h,cX as h$,Km as h0,MQ as h1,WY as h2,AQ as h3,hY as h4,mye as h5,vye as h6,UY as h7,BSe as h8,OSe as h9,pEe as hA,J7 as hB,gm as hC,kse as hD,XTe as hE,QTe as hF,STe as hG,Sa as hH,Rh as hI,RB as hJ,ise as hK,dxe as hL,aEe as hM,v3 as hN,fTe as hO,yTe as hP,pTe as hQ,WSe as hR,p8 as hS,Qm as hT,ZSe as hU,Ty as hV,Dse as hW,Cse as hX,CR as hY,X7 as hZ,fEe as h_,Wb as ha,Yb as hb,Nye as hc,Bye as hd,JX as he,ip as hf,gn as hg,Te as hh,rK as hi,sK as hj,dK as hk,mK as hl,_L as hm,bL as hn,wL as ho,yK as hp,_K as hq,SK as hr,tK as hs,Fl as ht,CSe as hu,MA as hv,mB as hw,Fse as hx,Lse as hy,rEe as hz,gH as i,S9 as i$,BEe as i0,JH as i1,k2 as i2,F2 as i3,nH as i4,ct as i5,iEe as i6,gSe as i7,Gme as i8,dEe as i9,uSe as iA,Oq as iB,tm as iC,KA as iD,cSe as iE,h3 as iF,vxe as iG,vC as iH,wb as iI,v1e as iJ,bxe as iK,gxe as iL,f1e as iM,er as iN,yA as iO,gAe as iP,vAe as iQ,mA as iR,fA as iS,wxe as iT,Ki as iU,Si as iV,Ci as iW,N as iX,ds as iY,Mc as iZ,P7 as i_,Sw as ia,ESe as ib,VY as ic,st as id,Fh as ie,Wre as ig,Vl as ih,QEe as ii,T5 as ij,E5 as ik,Mm as il,dL as im,LY as io,RY as ip,hL as iq,Nw as ir,Vp as is,rQ as it,YSe as iu,lv as iv,Bfe as iw,fY as ix,nce as iy,hH as iz,F as j,eue as j$,Ih as j0,RSe as j1,Jr as j2,Hb as j3,vp as j4,ws as j5,kSe as j6,P6 as j7,$Ee as j8,tp as j9,Zle as jA,qle as jB,Gle as jC,ed as jD,Kr as jE,EF as jF,Aa as jG,Aoe as jH,Ble as jI,jle as jJ,eb as jK,TF as jL,Xr as jM,iue as jN,Jle as jO,yS as jP,hd as jQ,l3 as jR,nue as jS,sue as jT,oue as jU,CM as jV,lue as jW,aue as jX,uue as jY,Sm as jZ,Lle as j_,Ry as ja,xT as jb,JTe as jc,YTe as jd,KTe as je,qTe as jf,X8 as jg,eie as jh,ZTe as ji,WTe as jj,JV as jk,xge as jl,Xi as jm,Qi as jn,bi as jo,Mo as jp,w1 as jq,Tm as jr,NM as js,tb as jt,St as ju,rue as jv,Yl as jw,Oi as jx,tue as jy,On as jz,P as k,C3 as k$,Xle as k0,Wle as k1,vue as k2,yue as k3,fue as k4,IEe as k5,mue as k6,gue as k7,Yle as k8,Kle as k9,r3 as kA,wSe as kB,WB as kC,VSe as kD,jM as kE,GM as kF,NB as kG,qEe as kH,H4 as kI,GB as kJ,dde as kK,nB as kL,$w as kM,HB as kN,ur as kO,vq as kP,fO as kQ,Dte as kR,hB as kS,S6 as kT,YEe as kU,SB as kV,TB as kW,ede as kX,VM as kY,ide as kZ,rde as k_,Qle as ka,hue as kb,vM as kc,PEe as kd,Vle as ke,Ule as kf,zle as kg,Hle as kh,NTe as ki,OTe as kj,kTe as kk,ISe as kl,FSe as km,qie as kn,W7 as ko,iE as kp,ME as kq,wE as kr,Y0 as ks,ys as kt,Gse as ku,go as kv,Wce as kw,Cr as kx,Ose as ky,pxe as kz,zSe as l,O5 as l$,Kc as l0,Hge as l1,dZ as l2,uZ as l3,FK as l4,GI as l5,Vi as l6,im as l7,_B as l8,sn as l9,ej as lA,_n as lB,zTe as lC,Vm as lD,r6 as lE,$b as lF,Gm as lG,dm as lH,kl as lI,nr as lJ,PJ as lK,Gb as lL,FTe as lM,it as lN,xSe as lO,sH as lP,dN as lQ,A3 as lR,ITe as lS,MTe as lT,OA as lU,Ud as lV,Jde as lW,l0 as lX,a0 as lY,KM as lZ,sv as l_,Wm as la,hu as lb,Ca as lc,X as ld,jy as le,J_ as lf,O2 as lg,NG as lh,xn as li,PB as lj,zM as lk,Qde as ll,Up as lm,IF as ln,$F as lo,zne as lp,Uue as lq,Hne as lr,BF as ls,qF as lt,nb as lu,FM as lv,MSe as lw,CF as lx,sb as ly,tde as lz,dSe as m,GSe as m$,ud as m0,vB as m1,AB as m2,Av as m3,m3 as m4,zB as m5,Hx as m6,Dw as m7,bB as m8,H3 as m9,bo as mA,ru as mB,DB as mC,_3 as mD,CEe as mE,T4 as mF,wEe as mG,S4 as mH,due as mI,MEe as mJ,REe as mK,ek as mL,NEe as mM,SEe as mN,_Ee as mO,TEe as mP,EEe as mQ,AEe as mR,Fle as mS,x4 as mT,xEe as mU,cue as mV,Cw as mW,AF as mX,MF as mY,fH as mZ,rW as m_,Dn as ma,yo as mb,lO as mc,qb as md,gC as me,hSe as mf,sB as mg,Kl as mh,l5 as mi,rm as mj,fde as mk,pde as ml,wp as mm,jO as mn,HEe as mo,bp as mp,hde as mq,GEe as mr,cq as ms,bI as mt,_ as mu,UTe as mv,kEe as mw,OEe as mx,YM as my,rTe as mz,axe as n,RTe as n0,PTe as n1,CQ as n2,yY as n3,hw as n4,db as n5,pY as n6,$Te as n7,lL as n8,NSe as n9,nQ as na,sxe as nb,HTe as nc,WA as nd,nL as ne,PSe as nf,KSe as ng,vW as nh,nEe as ni,sEe as nj,DEe as nk,XEe as nl,hxe as nm,bAe as nn,Ut as o,K_ as p,ze as q,E as r,W as s,pD as t,yD as u,kc as v,$n as w,Mt as x,rAe as y,GP as z};
