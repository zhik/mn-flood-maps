(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function Pr(){}function s4(e){return e()}function _C(){return Object.create(null)}function Py(e){e.forEach(s4)}function a4(e){return typeof e=="function"}function $y(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ym;function SC(e,t){return ym||(ym=document.createElement("a")),ym.href=t,e===ym.href}function dV(e){return Object.keys(e).length===0}function pV(e,...t){if(e==null)return Pr;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function l4(e,t,i){e.$$.on_destroy.push(pV(t,i))}function hV(e){return e&&a4(e.destroy)?e.destroy:Pr}function Th(e,t){e.appendChild(t)}function pv(e,t,i){e.insertBefore(t,i||null)}function Dy(e){e.parentNode.removeChild(e)}function fV(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function Bd(e){return document.createElement(e)}function u4(e){return document.createTextNode(e)}function c4(){return u4(" ")}function yV(e,t,i,r){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function No(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function mV(e){return Array.from(e.childNodes)}function gV(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}let ZE;function Tf(e){ZE=e}const Eh=[],TC=[],A0=[],EC=[],vV=Promise.resolve();let g_=!1;function wV(){g_||(g_=!0,vV.then(d4))}function v_(e){A0.push(e)}const Pw=new Set;let mm=0;function d4(){const e=ZE;do{for(;mm<Eh.length;){const t=Eh[mm];mm++,Tf(t),bV(t.$$)}for(Tf(null),Eh.length=0,mm=0;TC.length;)TC.pop()();for(let t=0;t<A0.length;t+=1){const i=A0[t];Pw.has(i)||(Pw.add(i),i())}A0.length=0}while(Eh.length);for(;EC.length;)EC.pop()();g_=!1,Pw.clear(),Tf(e)}function bV(e){if(e.fragment!==null){e.update(),Py(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(v_)}}const x0=new Set;let ku;function _V(){ku={r:0,c:[],p:ku}}function SV(){ku.r||Py(ku.c),ku=ku.p}function ec(e,t){e&&e.i&&(x0.delete(e),e.i(t))}function Jf(e,t,i,r){if(e&&e.o){if(x0.has(e))return;x0.add(e),ku.c.push(()=>{x0.delete(e),r&&(i&&e.d(1),r())}),e.o(t)}else r&&r()}function w_(e){e&&e.c()}function jg(e,t,i,r){const{fragment:n,on_mount:o,on_destroy:s,after_update:a}=e.$$;n&&n.m(t,i),r||v_(()=>{const u=o.map(s4).filter(a4);s?s.push(...u):Py(u),e.$$.on_mount=[]}),a.forEach(v_)}function zg(e,t){const i=e.$$;i.fragment!==null&&(Py(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function TV(e,t){e.$$.dirty[0]===-1&&(Eh.push(e),wV(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function hv(e,t,i,r,n,o,s,a=[-1]){const u=ZE;Tf(e);const d=e.$$={fragment:null,ctx:null,props:o,update:Pr,not_equal:n,bound:_C(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:_C(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};s&&s(d.root);let h=!1;if(d.ctx=i?i(e,t.props||{},(f,y,...m)=>{const g=m.length?m[0]:y;return d.ctx&&n(d.ctx[f],d.ctx[f]=g)&&(!d.skip_bound&&d.bound[f]&&d.bound[f](g),h&&TV(e,f)),y}):[],d.update(),h=!0,Py(d.before_update),d.fragment=r?r(d.ctx):!1,t.target){if(t.hydrate){const f=mV(t.target);d.fragment&&d.fragment.l(f),f.forEach(Dy)}else d.fragment&&d.fragment.c();t.intro&&ec(e.$$.fragment),jg(e,t.target,t.anchor,t.customElement),d4()}Tf(u)}class fv{$destroy(){zg(this,1),this.$destroy=Pr}$on(t,i){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(i),()=>{const n=r.indexOf(i);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!dV(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function l(e,t,i,r){var n,o=arguments.length,s=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}const EV="modulepreload",AV=function(e,t){return new URL(e,t).href},AC={},B=function(t,i,r){return!i||i.length===0?t():Promise.all(i.map(n=>{if(n=AV(n,r),n in AC)return;AC[n]=!0;const o=n.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":EV,o||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),o)return new Promise((u,d)=>{a.addEventListener("load",u),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};function xV(e){return e&&e.release&&typeof e.release=="function"}function CV(e){return e&&e.acquire&&typeof e.acquire=="function"}class no{constructor(t,i,r,n=1,o=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=r,this.allocationSize=n,this._pool=new Array(o),this._initialSize=o,this.ctor)for(let s=0;s<o;s++)this._pool[s]=new this.ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let i;if(no.test.disabled)i=new this.ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this.ctor}i=this._pool.pop()}return this.acquireFunction?this.acquireFunction(i,...t):CV(i)&&i.acquire(...t),i}release(t){t&&!no.test.disabled&&(this.releaseFunction?this.releaseFunction(t):xV(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}no.test={disabled:!1};function IV(e){e.length=0}class Ui{constructor(t=50,i=50){this._pool=new no(Array,void 0,IV,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return $w.acquire()}static release(t){return $w.release(t)}static prune(){$w.prune()}}const $w=new Ui(100);function z0e(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function H0e(e,t){for(const i of e)if(i!=null&&t(i))return i}function b_(e){return e!=null&&typeof e[Symbol.iterator]=="function"}const MV=null;function T(e){return e!=null}function O(e){return e==null}function Po(e,t){return T(e)?t(e):MV}function G0e(e){return e}function NV(e,t){if(O(e))throw new Error(t);return e}function yv(e,t){return T(e)?e:typeof t=="function"?t():t}function W0e(e,t){return T(e)?e:t}function nn(e){return T(e)&&e.destroy(),null}function q0e(e){return T(e)&&e.dispose(),null}function $r(e){return T(e)&&e.remove(),null}function __(e){return T(e)&&e.abort(),null}function Y0e(e){return T(e)&&e.release(),null}function RV(e,t,i){return T(e)&&T(t)?T(i)?i(e,t):e.equals(t):e===t}function PV(e){return null}function K0e(e,t){const i=new Array;for(const r of e)i.push(Ah(r,null,t));return i}function Z0e(e,t){for(const i of e)Po(i,t)}function Ah(e,t,i){return T(e)?i(e):t}function J0e(e){return e.filter(t=>T(t))}function p4(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function X0e(e){return e}function mv(e){return Ep(()=>e.forEach(t=>T(t)&&t.remove()))}function Ep(e){return{remove:()=>{e&&(e(),e=void 0)}}}class Kn{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*Kn._m:t}getInt(){return this._seed=(Kn._a*this._seed+Kn._c)%Kn._m,this._seed}getFloat(){return this.getInt()/(Kn._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Kn._m*r}}Kn._m=2147483647,Kn._a=48271,Kn._c=0;function $V(e,t){return t?e.filter((i,r,n)=>n.findIndex(t.bind(null,i))===r):e.filter((i,r,n)=>n.indexOf(i)===r)}function JE(e,t,i){if(O(e)&&O(t))return!0;if(O(e)||O(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Q0e(e,t){let i=e.length!==t.length;e.length=t.length;for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function ege(e,t,i){let r,n;return i?(r=t.filter(o=>!e.some(s=>i(s,o))),n=e.filter(o=>!t.some(s=>i(s,o)))):(r=t.filter(o=>!e.includes(o)),n=e.filter(o=>!t.includes(o))),{added:r,removed:n}}function tge(e){return e&&typeof e.length=="number"}const DV=!!Array.prototype.fill;function LV(e,t){if(DV)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function ige(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class h4{constructor(){this.last=0}}const f4=new h4;function y4(e,t,i,r){r=r||f4;const n=Math.max(0,r.last-10);for(let s=n;s<i;++s)if(e[s]===t)return r.last=s,s;const o=Math.min(n,i);for(let s=0;s<o;++s)if(e[s]===t)return r.last=s,s;return-1}function m4(e,t,i,r){const n=i==null?e.length:i,o=y4(e,t,n,r);if(o!==-1)return e[o]=e[n-1],i==null&&e.pop(),t}const bn=new Set;function OV(e,t,i=e.length,r=t.length,n,o){if(r===0||i===0)return i;bn.clear();for(let a=0;a<r;++a)bn.add(t[a]);n=n||f4;const s=Math.max(0,n.last-10);for(let a=s;a<i;++a)if(bn.has(e[a])&&(o&&o.push(e[a]),bn.delete(e[a]),e[a]=e[i-1],--i,--a,bn.size===0||i===0))return bn.clear(),i;for(let a=0;a<s;++a)if(bn.has(e[a])&&(o&&o.push(e[a]),bn.delete(e[a]),e[a]=e[i-1],--i,--a,bn.size===0||i===0))return bn.clear(),i;return bn.clear(),i}new Kn;function kV(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}let ol;function k(e){return typeof ol[e]=="function"?ol[e]=ol[e](globalThis):ol[e]}var JD,XD,QD,e4;ol=((JD=globalThis.dojoConfig)==null?void 0:JD.has)||((XD=globalThis.esriConfig)==null?void 0:XD.has)?{...(QD=globalThis.dojoConfig)==null?void 0:QD.has,...(e4=globalThis.esriConfig)==null?void 0:e4.has}:{},k.add=(e,t,i,r)=>((r||ol[e]===void 0)&&(ol[e]=t),i&&k(e)),k.cache=ol,k.add("esri-deprecation-warnings",!0),(()=>{var t;k.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(k.add("host-browser",e),k.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),k.add("dom",e),k("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,o=parseFloat(n);if(k.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),k.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),k.add("khtml",n.includes("Konqueror")?o:void 0),k.add("edge",parseFloat(r.split("Edge/")[1])||void 0),k.add("opr",parseFloat(r.split("OPR/")[1])||void 0),k.add("webkit",!k("wp")&&!k("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),k.add("chrome",!k("edge")&&!k("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),k.add("android",!k("wp")&&parseFloat(r.split("Android ")[1])||void 0),k.add("safari",!n.includes("Safari")||k("wp")||k("chrome")||k("android")||k("edge")||k("opr")?void 0:parseFloat(n.split("Version/")[1])),k.add("mac",n.includes("Macintosh")),!k("wp")&&r.match(/(iPhone|iPod|iPad)/)){const s=RegExp.$1.replace(/P/,"p"),a=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",u=parseFloat(a.replace(/_/,".").replace(/_/g,""));k.add(s,u),k.add("ios",u)}k.add("trident",parseFloat(n.split("Trident/")[1])||void 0),k("webkit")||(!r.includes("Gecko")||k("wp")||k("khtml")||k("trident")||k("edge")||k.add("mozilla",o),k("mozilla")&&k.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&k.add("esri-mobile",t),i&&k.add("esri-iPhone",i),k.add("esri-geolocation",!!navigator.geolocation)}k.add("esri-canvas-svg-support",!k("trident")),k.add("esri-wasm","WebAssembly"in globalThis),k.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),k.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),k.add("esri-atomics","Atomics"in globalThis),k.add("esri-workers","Worker"in globalThis),k.add("web-feat:cache","caches"in globalThis),k.add("esri-workers-arraybuffer-transfer",!k("safari")||Number(k("safari"))>=12),k.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),k.add("featurelayer-simplify-payload-size-factors",[1,1,4]),k.add("featurelayer-snapshot-enabled",!0),k.add("featurelayer-snapshot-point-min-threshold",8e4),k.add("featurelayer-snapshot-point-max-threshold",4e5),k.add("featurelayer-snapshot-point-coverage",.1),k.add("featurelayer-advanced-symbols",!1),k.add("featurelayer-pbf",!0),k.add("featurelayer-pbf-statistics",!1),k.add("feature-layers-workers",!0),k.add("feature-polyline-generalization-factor",1),k.add("mapview-transitions-duration",200),k.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),k.add("mapserver-pbf-enabled",!1),k.add("mapimagelayer-popup-identify-max-tolerance",20),k.add("heatmap-allow-raster-fallback",!0),k.add("heatmap-force-raster",!1),k("host-webworker")||k("host-browser")&&(k.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),k.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{k.add("esri-image-decode",!0,!0,!0)}).catch(()=>{k.add("esri-image-decode",!1,!0,!0)})}return!1}),k.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function rge(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function FV(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const r=Math.max(0,i-t),n=new e.constructor(r);for(let o=0;o<r;o++)n[o]=e[t+o];return n}function nge(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function BV(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function UV(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function VV(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function jV(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function zV(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function HV(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function GV(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function WV(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function qV(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function g4(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&g4(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function R(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=_4(e);if(T(t))return t;if(v4(e))return e.clone();if(w4(e))return e.map(R);if(b4(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=R(e[r]);return i}function S_(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=_4(e);if(T(t))return t;if(w4(e)){let i=!0;const r=e.map(n=>{const o=S_(n);return n!=null&&o==null&&(i=!1),o});return i?r:null}if(v4(e))return e.clone();if(!b4(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const n=e[r],o=S_(n);if(n!=null&&o==null)return null;i[r]=o}return i}return null}function v4(e){return typeof e.clone=="function"}function w4(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function b4(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function xC(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function _4(e){if(BV(e)||UV(e)||VV(e)||jV(e)||zV(e)||HV(e)||GV(e)||WV(e)||qV(e))return FV(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((i,r)=>{t.set(r,R(i))}),t}if(e instanceof Set){const t=new Set;return e.forEach(i=>{t.add(R(i))}),t}return null}function XE(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function YV(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&JE(e,t):e instanceof Set?t instanceof Set&&ZV(e,t):e instanceof Map?t instanceof Map&&JV(e,t):!!xC(e)&&xC(t)&&KV(e,t))}function KV(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function ZV(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function JV(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const n=t.get(i);if(n!==r||n===void 0&&!t.has(i))return!1}return!0}function Ii(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function XV(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function C0(e,t,i){return i?Hg(e,t,{policy:i,path:""}):Hg(e,t,null)}function Hg(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let o=null,s="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,s=i.policy(o)),s==="replace")return r[n]=t[n],r;if(r[n]===void 0)return r[n]=R(t[n]),r;let a=r[n],u=t[n];if(a===u)return r;if(Array.isArray(u)||Array.isArray(r))a=a?Array.isArray(a)?r[n]=a.concat():r[n]=[a]:r[n]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(d=>{a.includes(d)||a.push(d)}));else if(u&&typeof u=="object")if(i){const d=i.path;i.path=o,r[n]=Hg(a,u,i),i.path=d}else r[n]=Hg(a,u,null);else r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=u);return r},e||{}):e}function S4(e){return Array.isArray(e)?e:e.split(".")}function CC(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function QV(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...CC(i));return t}return CC(e)}function T4(e,t,i,r){const n=QV(t);if(n.length!==1){const o=n.map(s=>r(e,s,i));return mv(o)}return r(e,n[0],i)}function E4(e){let t=!1;return()=>{t||(t=!0,e())}}function A4(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const r=Ii(t);return XV(r,i)?r.get(i):t[i]}function x4(e,t,i){if(e==null)return e;const r=A4(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:x4(r,t,i+1)}function Ly(e,t,i=0){return typeof t!="string"||t.includes(".")?x4(e,S4(t),i):A4(t,e)}function Gg(e,t){return Ly(e,t)}function IC(e,t){return Ly(t,e)!==void 0}var $o;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})($o||($o={}));class MC{constructor(t){this.autoDestroy=!1,this.properties=t}}function Oy(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const r=Object.create(t.properties),n=t.autoDestroy;for(const o in r)r[o]=R(r[o]);t=new MC(r),t.autoDestroy=n,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new MC({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function ej(e){return Oy(e).properties}function gv(e,t){const i=ej(e);let r=i[t];return r||(r=i[t]={}),r}function tj(e,t){return C0(e,t,rj)}const ij=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function rj(e){return ij.test(e)?"replace":"merge"}function C4(e,t,i=!1){return M4(e,t,i)}function Ap(e,t){if(t!=null)return t[e]||I4(e.split("."),!1,t)}function dr(e,t,i){const r=e.split("."),n=r.pop(),o=I4(r,!0,i);o&&n&&(o[n]=t)}function I4(e,t,i){let r=i;for(const n of e){if(r==null)return;if(!(n in r)){if(!t)return;r[n]={}}r=r[n]}return r}function M4(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let o=r[n],s=t[n];return o===s?r:o===void 0?(r[n]=R(s),r):(Array.isArray(s)||Array.isArray(r)?(o=o?Array.isArray(o)?r[n]=o.concat():r[n]=[o]:r[n]=[],s&&(Array.isArray(s)||(s=[s]),i?s.forEach(a=>{o.includes(a)||o.push(a)}):r[n]=s.concat())):s&&typeof s=="object"?r[n]=M4(o,s,i):r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=s),r)},e||{}):e}var t4;const Ne={apiKey:void 0,applicationUrl:(t4=globalThis.location)==null?void 0:t4.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(C4(Ne,globalThis.esriConfig,!0),delete Ne.has),!Ne.assetsPath){const e="4.24.7";Ne.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Ne.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Ne,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Ne.request.corsEnabledServers=[],Ne.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const nj=/\{([^\}]+)\}/g;function NC(e){return e==null?"":e}function jo(e,t){return e.replace(nj,typeof t=="object"?(i,r)=>NC(Ap(r,t)):(i,r)=>NC(t(r)))}function QE(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function eA(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function oge(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const RC={info:0,warn:1,error:2,none:3};class W{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,W._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=W.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=W._loggers;return W._loggers=t,i},set throttlingDisabled(t){W._throttlingDisabled=t}}}static getLogger(t){let i=W._loggers[t];return i||(i=new W({module:t})),i}_log(t,i,...r){if(!!this._matchLevel(t)){if(i!=="always"&&!W._throttlingDisabled){const n=this._argsToKey(r),o=this._loggedMessages[t].get(n);if(i==="once"&&o!=null||i==="oncePerTick"&&o&&o>=W._tickCounter)return;this._loggedMessages[t].set(n,W._tickCounter),W._scheduleTickCounterIncrement()}for(const n of Ne.log.interceptors)if(n(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;T(r);){const n=r[t];if(T(n))return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=Ne.log.level?Ne.log.level:"warn";return RC[this._parentWithMember("level",i)]<=RC[t]}_argsToKey(...t){const i=(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]";return eA(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){W._tickCounterScheduled||(W._tickCounterScheduled=!0,Promise.resolve().then(()=>{W._tickCounter++,W._tickCounterScheduled=!1}))}}W._loggers={},W._tickCounter=0,W._tickCounterScheduled=!1,W._throttlingDisabled=!1;var De;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(De||(De={}));const T_=De.USER+1;function sl(e){switch(e){case"defaults":return De.DEFAULTS;case"service":return De.SERVICE;case"portal-item":return De.PORTAL_ITEM;case"web-scene":return De.WEB_SCENE;case"web-map":return De.WEB_MAP;case"user":return De.USER}}function Wg(e){switch(e){case De.DEFAULTS:return"defaults";case De.SERVICE:return"service";case De.PORTAL_ITEM:return"portal-item";case De.WEB_SCENE:return"web-scene";case De.WEB_MAP:return"web-map";case De.USER:return"user"}return void 0}function oj(e){return Wg(e)}var qe;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(qe||(qe={}));let qg,xh=[];const sj=W.getLogger("esri.core.Accessor");function Ee(e){qg!==void 0&&qg.onObservableAccessed(e)}let I0=!1,M0=!1;function Gs(e,t,i){if(I0)return tA(e,t,i);N4(e);const r=t.call(i);return R4(),r}function aj(e,t){return Gs(void 0,e,t)}function tA(e,t,i){const r=I0;I0=!0,N4(e);let n=null;try{n=t.call(i)}catch(o){M0&&sj.error(o)}return R4(),I0=r,n}function N4(e){qg=e,xh.push(e)}function R4(){const e=xh.pop();qg=xh.length>0?xh[xh.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function P4(e,t){if(t.flags&qe.DepTrackingInitialized)return;const i=M0;M0=!1,t.flags&qe.AutoTracked?tA(t,t.metadata.get,e):$4(e,t),M0=i}const lj=[];function $4(e,t){t.flags&qe.ExplicitlyTracking||(t.flags|=qe.ExplicitlyTracking,tA(t,()=>{const i=t.metadata.dependsOn||lj;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=S4(r);for(let o=0,s=e;o<n.length&&s!=null&&typeof s=="object";++o)s=PC(s,n[o],o!==n.length-1)}else PC(e,r,!1)}),t.flags&=~qe.ExplicitlyTracking)}function PC(e,t,i){var o;const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.getItemAt(s)}const n=(o=Ii(e))==null?void 0:o.properties.get(r);return n&&(Ee(n),P4(e,n)),i?e[r]:void 0}class D4{constructor(t,i){this._observers=t,this._observer=i}remove(){kV(this._observers,this._observer)}}class $C{constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=qe.Dirty|(r.nonNullable?qe.NonNullable:0)|(r.hasOwnProperty("value")?qe.HasDefaultValue:0)|(r.get===void 0?qe.DepTrackingInitialized:0)|(r.dependsOn===void 0?qe.AutoTracked:0)}destroy(){if(this.flags&qe.Dirty&&this._observers){const t=this._observers.slice();for(const i of t)i.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Ee(this);const t=this.properties.store,i=this.propertyName,r=this.flags,n=t.get(i);if(r&qe.Computing||~r&qe.Dirty&&t.has(i))return n;this.flags|=qe.Computing;const o=this.properties.host;let s;r&qe.AutoTracked?s=Gs(this,this.metadata.get,o):($4(o,this),s=this.metadata.get.call(o)),t.set(i,s,De.COMPUTED);const a=t.get(i);return a===n?this.flags&=~qe.Dirty:aj(this.commit,this),this.flags&=~qe.Computing,a}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=qe.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let r=0;r<t.length;++r)i.push(t[r].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new D4(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&qe.Overriden&&(this.flags|=qe.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~qe.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class iA{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new iA;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,R(r))}),i}get(t){return this._values.get(t)}originOf(){return De.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function gm(e,t,i){return e!==void 0}function DC(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&qe.NonNullable)||(r.lifecycle,$o.INITIALIZING,!1))}function uj(e){return e&&typeof e.destroy=="function"}W.getLogger("esri.core.accessorSupport.Properties");class cj{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=$o.INITIALIZING,this.store=new iA,this._origin=De.USER;const i=this.host.constructor.__accessorMetadata__,r=i.properties;for(const n in r){const o=new $C(this,n,r[n]);this.properties.set(n,o)}this.metadatas=r,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=$o.CONSTRUCTING}constructed(){this.lifecycle=$o.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const r=this.internalGet(t);r&&uj(r)&&(r.destroy(),~i.flags&qe.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==$o.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();Ee(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.flags&qe.HasDefaultValue)return"defaults"}return Wg(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(gm(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);gm(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const n=this.properties.get(i);if(!gm(n))return"";const o=new Set,s=Gs({onObservableAccessed:u=>o.add(u),onTrackingEnd:()=>{}},()=>{var u;return(u=n.metadata.get)==null?void 0:u.call(t)});let a=`${r}${t.declaredClass.split(".").pop()}.${i}: ${s}
`;if(o.size===0)return a;r+="  ";for(const u of o){if(!(u instanceof $C))continue;const d=u.properties.host,h=u.propertyName,f=Ii(d);a+=f?f.getDependsInfo(d,h,r):`${r}${h}: undefined
`}return a}setAtOrigin(t,i,r){const n=this.properties.get(t);if(gm(n))return this._setAtOrigin(n,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&qe.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&qe.Overriden&&(i.flags&=~qe.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!DC(r,t,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:s,value:a}=o;if(Dw.release(o),!s)return;i=a}r.flags|=qe.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!DC(r,t,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:a,value:u}=s;if(Dw.release(s),!a)return;i=u}const o=r.metadata.set;o?o.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=sl(t)}getDefaultOrigin(){return Wg(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==$o.INITIALIZING?this._origin:De.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const n=this.store,o=t.propertyName;n.has(o,r)&&XE(i,n.get(o))&&~t.flags&qe.Overriden&&r===n.originOf(o)||(t.invalidate(),n.set(o,i,r),t.commit(),P4(this.host,t))}_cast(t,i){const r=Dw.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}}class dj{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const Dw=new no(dj);function pj(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const n=Ap(r,t),o=n==null?"":n;if(o===void 0)throw new Error(`could not find key "${r}" in template`);return o.toString()})}class vv{constructor(t,i,r){this.name=t,this.details=r,this.message=void 0,this instanceof vv&&(this.message=i&&pj(i,r)||"")}toString(){return"["+this.name+"]: "+this.message}}class I extends vv{constructor(t,i,r){if(super(t,i,r),!(this instanceof I))return new I(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return R(i)}catch{return"[object]"}}))}}catch(t){throw W.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new I(t.name,t.message,t.details)}}I.prototype.type="error";function Yg(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))Yg(e,r,t[r]);else{if(t.includes(".")){const n=t.split("."),o=n.splice(n.length-1,1)[0];return void Yg(Gg(e,n),o,i)}const r=e.__accessor__;r!=null&&hj(t,r),e[t]=i}}function hj(e,t){if(k("esri-unknown-property-errors")&&!fj(e,t))throw new I("set:unknown-property",yj(e,t))}function fj(e,t){return t.metadatas[e]!=null}function yj(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}W.getLogger("esri.core.accessorSupport.set");class L4 extends no{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=PV(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const vm=[];function Kg(e){vm.push(e),vm.length===1&&queueMicrotask(()=>{const t=vm.slice();vm.length=0;for(const i of t)i()})}const mj=29;class Ef{constructor(t,i=mj){this.name=t,this._counter=0,this._items=new Array(i)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,i)=>t-i)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,i)=>t+i,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var E_;(function(e){const t=(o,s,a,u)=>{let d=s,h=s;const f=a>>>1,y=o[d-1];for(;h<=f;){h=d<<1,h<a&&u(o[h-1],o[h])<0&&++h;const m=o[h-1];if(u(m,y)<=0)break;o[d-1]=m,d=h}o[d-1]=y},i=(o,s)=>o<s?-1:o>s?1:0;function r(o,s,a,u){s===void 0&&(s=0),a===void 0&&(a=o.length),u===void 0&&(u=i);for(let h=a>>>1;h>s;h--)t(o,h,a,u);const d=s+1;for(let h=a-1;h>s;h--){const f=o[s];o[s]=o[h],o[h]=f,t(o,d,h,u)}}function*n(o,s,a,u){s===void 0&&(s=0),a===void 0&&(a=o.length),u===void 0&&(u=i);for(let h=a>>>1;h>s;h--)t(o,h,a,u),yield;const d=s+1;for(let h=a-1;h>s;h--){const f=o[s];o[s]=o[h],o[h]=f,t(o,d,h,u),yield}}e.sort=r,e.iterableSort=n})(E_||(E_={}));const LC=E_,gj=1.5,vj=1.1;class hl{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new h4,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>OC(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];t(n)&&i.push(n)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,OC(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=y4(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const i=m4(this.data,t,this.length,this._hint);return i!==void 0&&(this.length=this.length-1),this._shrink(),i}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=OV(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){t>=this.length||i>=this.length||t===i||([this.data[t],this.data[i]]=[this.data[i],this.data[t]])}sort(t){LC.sort(this.data,0,this.length,t)}iterableSort(t){return LC.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}filterInPlace(t,i){let r=0;for(let n=0;n<this._length;++n){const o=this.data[n];t.call(i,o,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=o,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,n=this.data;for(let o=0;o<r;++o)t.call(i,n[o],o,n)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=t.call(i,this.data[n],n,this.data);return r}reduce(t,i){let r=i;for(let n=0;n<this.length;++n)r=t(r,this.data[n],n,this.data);return r}has(t){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===t)return!0;return!1}}function OC(e){e.data.length>gj*e.length&&(e.data.length=Math.floor(e.length*vj))}function wj(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const ky=wj(globalThis),kC=new Set;function bj(e,t,i=!1){i&&kC.has(t)||(i&&kC.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function A_(e,t,i={}){if(k("esri-deprecation-warnings")){const{moduleName:r}=i;O4(e,`Property: ${(r?r+"::":"")+t}`,i)}}function O4(e,t,i={}){if(k("esri-deprecation-warnings")){const{replacement:r,version:n,see:o,warnOnce:s}=i;let a=t;r&&(a+=`
	\u{1F6E0}\uFE0F Replacement: ${r}`),n&&(a+=`
	\u2699\uFE0F Version: ${n}`),o&&(a+=`
	\u{1F517} See ${o} for more details.`),bj(e,a,s)}}function wv(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function bv(e,t,i){if(!wv(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const n of r)e.addEventListener(n,i);return{remove(){for(const n of r)e.removeEventListener(n,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function k4(e,t,i){if(!wv(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=bv(e,t,n=>{r.remove(),i.call(e,n)});return{remove(){r.remove()}}}const _j={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Do({key:e}){return _j[e]||e}function wt(e="Aborted"){return new I("AbortError",e)}function bt(e,t="Aborted"){if(pn(e))throw wt(t)}function _v(e){return T(e)?"aborted"in e?e:e.signal:e}function pn(e){const t=_v(e);return T(t)&&t.aborted}function fl(e){if(qi(e))throw e}function x_(e){if(!qi(e))throw e}function hn(e,t){const i=_v(e);if(!O(i)){if(!i.aborted)return k4(i,"abort",()=>t());t()}}function rA(e,t){const i=_v(e);if(!O(i))return bt(i),k4(i,"abort",()=>t(wt()))}function Sj(e,t){const i=_v(t);return O(i)?e:new Promise((r,n)=>{let o=hn(t,()=>n(wt()));const s=()=>o=$r(o);e.then(s,s),e.then(r,n)})}function qi(e){return e&&e.name==="AbortError"}async function C_(e){try{return await e}catch(t){if(!qi(t))throw t}}function Ws(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}async function ii(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(s=>e[s]),n=await ii(r),o={};return i.map((s,a)=>o[s]=n[a]),o}const t=e;return new Promise(i=>{const r=[];let n=t.length;n===0&&i(r),t.forEach(o=>{const s={promise:o||Promise.resolve(o)};r.push(s),s.promise.then(a=>{s.value=a}).catch(a=>{s.error=a}).then(()=>{--n,n===0&&i(r)})})})}async function Tj(e){return(await ii(e)).filter(t=>!!t.value).map(t=>t.value)}function Sv(e,t,i){const r=new AbortController;return hn(i,()=>r.abort()),new Promise((n,o)=>{let s=setTimeout(()=>{s=0,n(t)},e);hn(r,()=>{s&&(clearTimeout(s),o(wt()))})})}function Zs(e){return e&&typeof e.then=="function"}function I_(e){return Zs(e)?e:Promise.resolve(e)}function nA(e,t=-1){let i,r,n,o,s=null;const a=(...u)=>{if(i){r=u,o&&o.reject(wt()),o=Ws();const y=o.promise;if(s){const m=s;s=null,m.abort()}return y}if(n=o||Ws(),o=null,t>0){const y=new AbortController;i=I_(e(...u,y.signal));const m=i;Sv(t).then(()=>{i===m&&(o?y.abort():s=y)})}else i=1,i=I_(e(...u));const d=()=>{const y=r;r=n=i=s=null,y!=null&&a(...y)},h=i,f=n;return h.then(d,d),h.then(f.resolve,f.reject),f.promise};return a}function Ej(){let e,t;const i=new Promise((n,o)=>{e=n,t=o}),r=n=>{e(n)};return r.resolve=n=>e(n),r.reject=n=>t(n),r.timeout=(n,o)=>ky.setTimeout(()=>r.reject(o),n),r.promise=i,r}function oA(e,t){let i,r=new AbortController;const n=e(r.signal);let o={promise:n,finished:!1,abort:()=>{r&&(r.abort(),r=null)}};const s=()=>{o&&(o.finished=!0,o=null),T(i)&&(i.remove(),i=null),r=null};return n.then(s,s),i=hn(t,()=>{T(o)&&o.abort()}),o}async function FC(e){await Promise.resolve(),bt(e)}function sge(e){return e}class Aj{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class xj{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let M_=0;const Xp={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},N_=["prepare","preRender","render","postRender","update","finish"],R_=[],ac=new hl;class Cj{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const Zg={frameTasks:ac,willDispatch:!1,clearFrameTasks:Ij,dispatch:U4,executeFrameTasks:Mj};function xp(e){const t=new xj(e);return R_.push(t),Zg.willDispatch||(Zg.willDispatch=!0,Kg(U4)),t}function ip(e){const t=new Aj(e);return ac.push(t),Jg==null&&(M_=performance.now(),Jg=requestAnimationFrame(F4)),new Cj(t)}let Jg=null;function Ij(e=!1){ac.forAll(t=>{t.removed=!0}),e&&B4()}function F4(){const e=performance.now();Jg=null,Jg=ac.length>0?requestAnimationFrame(F4):null,Zg.executeFrameTasks(e)}function Mj(e){const t=e-M_;M_=e;const i=1e3/60,r=Math.max(0,t-i);for(let n=0;n<N_.length;n++){const o=performance.now(),s=N_[n];ac.forAll(a=>{var u;a.paused||a.removed||(n===0&&a.ticks++,a.phases[s]&&(Xp.time=e,Xp.deltaTime=a.ticks===0?0:t,Xp.elapsedFrameTime=performance.now()-e,Xp.frameDuration=i-r,(u=a.phases[s])==null||u.call(a,Xp)))}),Rj[n].record(performance.now()-o)}B4(),Pj.record(performance.now()-e)}const wm=new hl;function B4(){ac.forAll(e=>{e.removed&&wm.push(e)}),ac.removeUnorderedMany(wm.data,wm.length),wm.clear()}function U4(){for(;R_.length;){const e=R_.shift();e.isActive&&e.callback()}Zg.willDispatch=!1}function Nj(e=1,t){const i=Ej(),r=()=>{pn(t)?i.reject(wt()):e===0?i():(--e,Kg(()=>r()))};return r(),i.promise}const Rj=N_.map(e=>new Ef(e)),Pj=new Ef("total");function $j(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let Dj=0;function Af(){return++Dj}class Tv{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let r=0;r<i.length;++r)t.push(i[r].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let Ud=!1;const Xg=[];function V4(e,t){let i=new Tv(o),r=null,n=!1;function o(){if(!i||n)return;if(Ud)return void H4(o);const a=r;i.clear(),Ud=!0,n=!0,r=Gs(i,e),n=!1,Ud=!1,t(r,a),G4()}function s(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Gs(i,e),n=!1,{remove:s}}function j4(e,t){let i=new Tv(n),r=null;function n(){t(r,s)}function o(){i&&(i.destroy(),i=null),r=null}function s(){return i?(i.clear(),r=Gs(i,e),r):null}return s(),{remove:o}}function z4(e){let t=new Tv(r),i=!1;function r(){t&&!i&&(Ud?H4(r):(t.clear(),Ud=!0,i=!0,Gs(t,e),i=!1,Ud=!1,G4()))}function n(){t&&(t.destroy(),t=null)}return i=!0,Gs(t,e),i=!1,{remove:n}}function H4(e){Xg.includes(e)||Xg.unshift(e)}function G4(){for(;Xg.length;)Xg.pop()()}var xf;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(xf||(xf={}));class Xf{constructor(){this.uid=Af(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,n,o){return this.pool.acquire(xf.Untracked,t,i,r,n,o,XE)}static acquireTracked(t,i,r,n){return this.pool.acquire(xf.Tracked,t,i,r,null,null,n)}notify(t,i){this.type===xf.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,n,o,s,a){this.uid=Af(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=n,this.target=o,this.path=s,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Af(),this.removed=!0}}Xf.pool=new L4(Xf);const N0=new Ui,Bs=new Set;let Qg;function e1(e){Bs.delete(e),Bs.add(e),Qg||(Qg=xp(kj))}function Lj(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Oj(e){for(const t of Bs.values())t.target===e&&(t.removed=!0)}function kj(){let e=10;for(;Qg&&e--;){Qg=null;const t=Fj(),i=N0.acquire();for(const r of t){const n=r.uid;Lj(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Bs)r.removed&&(i.push(r),Bs.delete(r));for(const r of i)Xf.pool.release(r);N0.release(i),N0.release(t),P_.forEach(r=>r())}}function Fj(){const e=N0.acquire();e.length=Bs.size;let t=0;for(const i of Bs)e[t]=i,++t;return Bs.clear(),e}const P_=new Set;function Bj(e){return P_.add(e),{remove(){P_.delete(e)}}}function Uj(e,t,i){let r=T4(e,t,i,(n,o,s)=>{let a,u,d=j4(()=>Ly(n,o),(h,f)=>{n.__accessor__.destroyed||a&&a.uid!==u?r.remove():(a||(a=Xf.acquireUntracked(h,s,f,n,o),u=a.uid),e1(a))});return{remove:E4(()=>{d.remove(),a&&(a.uid!==u||a.removed||(a.removed=!0,e1(a)),a=null),r=d=null})}});return r}function Vj(e,t,i){const r=T4(e,t,i,(n,o,s)=>{let a=!1;return V4(()=>Ly(n,o),(u,d)=>{n.__accessor__.destroyed?r.remove():a||(a=!0,XE(d,u)||s.call(n,u,d,o,n),a=!1)})});return r}function jj(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?Vj(e,t,i):Uj(e,t,i)}function zj(e,t,i){let r,n,o=j4(e,(s,a)=>{r&&r.uid!==n?o.remove():(r||(r=Xf.acquireTracked(s,t,a,i),n=r.uid),e1(r))});return{remove:E4(()=>{o.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,e1(r)),r=null),o=null})}}function Hj(e,t,i){let r=!1;return V4(e,(n,o)=>{r||(r=!0,i(o,n)||t(n,o),r=!1)})}function Gj(e,t,i=!1,r=YV){return i?Hj(e,t,r):zj(e,t,r)}function BC(e){return $j(Bs,t=>t.oldValue===e)}function Ev(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function W4(e,t,i){const r=e.get(t);if(r!==void 0)return r;const n=i();return e.set(t,n),n}const Vd=W.getLogger("esri.core.Accessor");function Wj(e){return e==null?e:new Date(e)}function qj(e){return e==null?e:!!e}function Fy(e){return e==null?e:e.toString()}function on(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function sA(e){return e==null?e:Math.round(parseFloat(e))}function q4(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function t1(e,t){return t!=null&&e&&!(t instanceof e)}function Y4(e){return e&&"isCollection"in e}function UC(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Yj(e,t){if(!t||!t.constructor||!Y4(t.constructor))return $_(e,t)?t:new e(t);const i=UC(e.prototype.itemType),r=UC(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):($_(e,t),t):new e(t):t}function $_(e,t){return!!q4(t)&&(Vd.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Av(e)+"'"),!0)}function aA(e,t){return t==null?t:Y4(e)?Yj(e,t):t1(e,t)?$_(e,t)?t:new e(t):t}function Av(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const Kj=new WeakMap;function Zj(e){switch(e){case Number:return on;case Qe:return sA;case Boolean:return qj;case String:return Fy;case Date:return Wj;default:return W4(Kj,e,()=>aA.bind(null,e))}}function Ze(e,t){const i=Zj(e);return arguments.length===1?i:i(t)}function Qf(e,t,i){return arguments.length===1?Qf.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function Jj(e,t){return arguments.length===1?Qf(Ze.bind(null,e)):Qf(Ze.bind(null,e),t)}function K4(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>K4(e,t-1,r)):e(i)}function i1(e,t,i){if(arguments.length===2)return i1.bind(null,e,t);if(!i)return i;let r=t,n=i=K4(e,t,i);for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let o=0;o<r;o++)i=[i];return i}function Xj(e,t,i){return arguments.length===2?i1(Ze.bind(null,e),t):i1(Ze.bind(null,e),t,i)}function Z4(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function D_(e,t){if(arguments.length===2)return D_(e).call(null,t);const i=new Set,r=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||i.add(a);let o=null,s=null;return(a,u)=>{if(a==null)return a;const d=typeof a,h=d==="string"||d==="number";return h&&(i.has(a)||n.some(f=>d==="string"&&f===String||d==="number"&&f===Number))||d==="object"&&n.some(f=>!t1(a,f))?a:(h&&r.length?(o||(o=r.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Vd.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof a=="object"&&n.length?(s||(s=n.map(f=>Av(f)).join(", ")),Vd.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${s}`)):Vd.error("Accessor#set",`'${a}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function zo(e,t){if(arguments.length===2)return zo(e).call(null,t);const i={},r=[],n=[];for(const u in e.typeMap){const d=e.typeMap[u];i[u]=Ze(d),r.push(Av(d)),n.push(u)}const o=()=>`'${r.join("', '")}'`,s=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?u=>u[e.key]:e.key;return u=>{if(e.base&&!t1(e.base,u)||u==null)return u;const d=a(u)||e.defaultKeyValue,h=i[d];if(!h)return Vd.error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${s()})`),null;if(!t1(e.typeMap[d],u))return u;if(typeof e.key=="string"&&!q4(u)){const f={};for(const y in u)y!==e.key&&(f[y]=u[y]);return h(f)}return h(u)}}class Qe{}const age={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Qj(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function J4(e){switch(e.type){case"native":return Ze(e.value);case"array":return Qf(J4(e.value));case"one-of":return ez(e);default:return null}}function ez(e){let t=null;return(i,r)=>O_(i,e)?i:(t==null&&(t=L_(e)),Vd.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function L_(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Qe:return"integer";case Date:return"date";default:return Av(e.value)}case"array":return`array of ${L_(e.value)}`;case"one-of":{const t=e.values.map(i=>L_(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function O_(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Qe:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!O_(i,t.value));case"one-of":return t.values.some(i=>O_(e,i))}}function c(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),n=gv(t,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in e&&W.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=r.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const o=e.aliasOf;if(o){const u=typeof o=="string"?o:o.source,d=typeof o=="string"?null:o.overridable===!0;let h;n.dependsOn=[u],n.get=function(){let f=Gg(this,u);if(typeof f=="function"){h||(h=u.split(".").slice(0,-1).join("."));const y=Gg(this,h);y&&(f=f.bind(y))}return f},n.readOnly||(n.set=d?function(f){f!==void 0?this._override(i,f):this._clearOverride(i)}:function(f){Yg(this,u,f)})}const s=e.type,a=e.types;n.cast||(s?n.cast=tz(s):a&&(Array.isArray(a)?n.cast=Qf(zo(a[0])):n.cast=zo(a))),e.range&&(n.cast=iz(n.cast,e.range)),tj(n,e)}}function X4(e,t,i){const r=gv(e,i);r.json||(r.json={});let n=r.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function tz(e){let t=0,i=e;if(Qj(e))return J4(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(Z4(r))return t===0?D_(r):i1(D_(r),t);if(t===1)return Jj(r);if(t>1)return Xj(r,t);const n=e;return n.from?n.from:Ze(n)}function iz(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function rz(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const n=t[r];i[r].forEach(o=>{t[o]=n}),delete t[r]}}}class Yi extends vv{constructor(t,i,r){if(super(t,i,r),!(this instanceof Yi))return new Yi(t,i,r)}}Yi.prototype.type="warning";function Q4(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const k_=W.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function VC(e,t,i){var r,n;e&&(!i&&!t.read||((r=t.read)==null?void 0:r.reader)||((n=t.read)==null?void 0:n.enabled)===!1||sz(e)&&dr("read.reader",Cp(e),t))}function Cp(e){var i,r,n;const t=(i=e.ndimArray)!=null?i:0;if(t>1)return oz(e);if(t===1)return jC(e);if("type"in e&&t5(e.type)){const o=(n=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:n.Type,s=jC(typeof o=="function"?{type:o}:{types:o});return(a,u,d)=>{const h=s(a,u,d);return h&&new e.type(h)}}return lA(e)}function lA(e){return"type"in e?nz(e.type):az(e.types)}function nz(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void k_.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const o=new e;return o.read(t,r),o}:e.fromJSON}function e5(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(n=>e5(e,n,i,r-1)):e(t,void 0,i)}function oz(e){var n;const t=lA(e),i=e5.bind(null,t),r=(n=e.ndimArray)!=null?n:0;return(o,s,a)=>{if(o==null)return o;o=i(o,a,r);let u=r,d=o;for(;u>0&&Array.isArray(d);)u--,d=d[0];if(d!==void 0)for(let h=0;h<u;h++)o=[o];return o}}function jC(e){const t=lA(e);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const s=[];for(const a of i){const u=t(a,void 0,n);u!==void 0&&s.push(u)}return s}const o=t(i,void 0,n);return o!==void 0?[o]:void 0}}function t5(e){if(!Q4(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?uA(t.Type):i5(t.Type))}function sz(e){return"types"in e?i5(e.types):uA(e.type)}function uA(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||t5(e))}function i5(e){for(const t in e.typeMap)if(!uA(e.typeMap[t]))return!1;return!0}function az(e){var r;let t=null;const i=(r=e.errorContext)!=null?r:"type";return(n,o,s)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void k_.error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=lz(e));const u=e.key;if(typeof u!="string")return;const d=n[u],h=d?t[d]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const y=`Type '${d||"unknown"}' is not supported`;return s&&s.messages&&n&&s.messages.push(new Yi(`${i}:unsupported`,y,{definition:n,context:s})),void k_.error(y)}const f=new h;return f.read(n,s),f}}function lz(e){var i,r;const t={};for(const n in e.typeMap){const o=e.typeMap[n],s=Oy(o.prototype);if(typeof e.key=="function")continue;const a=s.properties[e.key];if(!a)continue;((i=a.json)==null?void 0:i.type)&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(t[a.json.type[0]]=o);const u=(r=a.json)==null?void 0:r.write;if(!u||!u.writer){t[n]=o;continue}const d=u.target,h=typeof d=="string"?d:e.key,f={};u.writer(n,f,h),f[h]&&(t[f[h]]=o)}return t}function uz(e){if(e.json||(e.json={}),HC(e.json),GC(e.json),zC(e.json),e.json.origins)for(const t in e.json.origins)HC(e.json.origins[t]),GC(e.json.origins[t]),zC(e.json.origins[t]);return!0}function zC(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function HC(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function GC(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const cz=W.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function WC(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(i===1||"type"in e&&Q4(e.type))?t.write.writer=hz:i>1?t.write.writer=fz(i):t.types?Array.isArray(t.types)?t.write.writer=pz(t.types[0]):t.write.writer=dz(t.types):t.write.writer=ey}function dz(e){return(t,i,r,n)=>t?r5(t,e,n)?ey(t,i,r,n):void 0:ey(t,i,r,n)}function r5(e,t,i){var r,n;for(const o in t.typeMap)if(e instanceof t.typeMap[o])return!0;if(i!=null&&i.messages){const o=(r=t.errorContext)!=null?r:"type",s=`Values of type '${(n=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?n:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new I(`${o}:unsupported`,s,{definition:e,context:i})),cz.error(s)}return!1}function pz(e){return(t,i,r,n)=>!t||!Array.isArray(t)?ey(t,i,r,n):ey(t.filter(o=>r5(o,e,n)),i,r,n)}function ey(e,t,i,r){dr(i,r1(e,r),t)}function r1(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?n1(e):e}function n1(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function hz(e,t,i,r){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(o=>r1(o,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[r1(e,r)],dr(i,n,t)}function n5(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>n5(r,t,i-1)):r1(e,t)}function fz(e){return(t,i,r,n)=>{let o;if(t===null)o=null;else{o=n5(t,n,e);let s=e,a=o;for(;s>0&&Array.isArray(a);)s--,a=a[0];if(a!==void 0)for(let u=0;u<s;u++)o=[o]}dr(r,o,i)}}function F_(e,t){return cA(e,"read",t)}function o5(e,t){return cA(e,"write",t)}function cA(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const n=e.json.origins[i.origin];n&&(t==="any"||t in n)&&(r=n)}return r}function yz(e){const t=mz(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],n=r.types?gz(r):t;VC(n,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),WC(n,r)}VC(t,e.json,!0),WC(t,e.json)}function mz(e){return e.json.types?B_(e.json):e.type?s5(e):B_(e)}function gz(e){return e.type?s5(e):B_(e)}function s5(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!Z4(i);)i=i[0],t++;return{type:i,ndimArray:t}}function B_(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function vz(e){uz(e)&&(rz(e),yz(e))}const Lw=new Set,Ow=new Set;function S(e){return t=>{t.prototype.declaredClass=e,bz(t);const i=[],r=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!Lw.has(n.initialize)&&(Lw.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!Ow.has(n.destroy)&&(Ow.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);Lw.clear(),Ow.clear();class o extends t{constructor(...a){if(super(...a),this.constructor===o&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let u=i.length-1;u>=0;u--)i[u].call(this)}}),r.length){let u=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!u){u=!0;for(let d=0;d<r.length;d++)r[d].call(this)}}})}this.postscript(...a)}}}return o.__accessorMetadata__=Oy(t.prototype),o.prototype.declaredClass=e,o}}function wz(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;Ee(i);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function bz(e){const t=e.prototype,i=Oy(t).properties,r={};for(const n of Object.getOwnPropertyNames(i)){const o=i[n];vz(o),r[n]={enumerable:!0,configurable:!0,get:wz(n,o),set(s){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&o.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===$o.CONSTRUCTED&&o.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,s)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:s})}}}Object.defineProperties(e.prototype,r)}var a5;function _z(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Ch=Symbol("Accessor-Handles");class se{constructor(...t){if(this[a5]=null,this.constructor===se)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new cj(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const o=this;class s extends o{constructor(...u){super(...u),this.inherited=null,n&&n.apply(this,u)}}Oy(s.prototype);for(const a in t){const u=t[a];s.prototype[a]=typeof u=="function"?function(...d){const h=this.inherited;let f;this.inherited=function(...y){if(o.prototype[a])return o.prototype[a].apply(this,y)};try{f=u.apply(this,d)}catch(y){throw this.inherited=h,y}return this.inherited=h,f}:t[a]}for(const a in i){const u=_z(i[a]);c(u)(s.prototype,a)}return S(r)(s)}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(Po(this[Ch],t=>{t.forEach(i=>i.remove())}),this[Ch]=null,Oj(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===$o.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Gg(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return Yg(this,t,i),this}watch(t,i,r){return jj(this,t,i,r)}own(t){let i=this[Ch];if(O(i)&&(i=this[Ch]=new Set),b_(t))for(const r of t)i.add(r);else i.add(t)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,i){return this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}a5=Ch;class jd{constructor(){this._emitter=new jd.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(n=null){this.target=n,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(n,o){const s=this._listenersMap&&this._listenersMap.get(n);if(!s)return!1;const a=this.target||this;return[...s].forEach(u=>{u.call(a,o)}),s.length>0}on(n,o){if(Array.isArray(n)){const a=n.map(u=>this.on(u,o));return mv(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const s=this._listenersMap.get(n)||[];return s.push(o),this._listenersMap.set(n,s),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(n)||[],u=a.indexOf(o);u>=0&&a.splice(u,1)}}}once(n,o){const s=this.on(n,a=>{s.remove(),o.call(null,a)});return s}hasEventListener(n){const o=this._listenersMap&&this._listenersMap.get(n);return o!=null&&o.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(o,s){return this._emitter.emit(o,s)}on(o,s){return this._emitter.on(o,s)}once(o,s){return this._emitter.once(o,s)}hasEventListener(o){return this._emitter.hasEventListener(o)}};return n=l([S("esri.core.Evented")],n),n};let i=class extends se{constructor(){super(...arguments),this._emitter=new jd.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=l([S("esri.core.Evented")],i),e.EventedAccessor=i})(jd||(jd={}));const Js=jd;var Ge;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Ge||(Ge={}));function dA(e){return(t,i)=>{t[i]=e}}class l5{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new D4(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const r=t[i];r.onInvalidated(),r.onCommitted()}}}var Ps;class Sz{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const jr=new no(Sz,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),Tz=()=>{};function kw(e){return e?e instanceof Eu?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Fw(e){if(e&&e.length)return e[0]}function Ez(e,t,i,r){const n=Math.min(e.length-i,t.length-r);let o=0;for(;o<n&&e[i+o]===t[r+o];)o++;return o}function u5(e,t,i,r){t&&t.forEach((n,o,s)=>{e.push(n),u5(e,i.call(r,n,o,s),i,r)})}const ia=new Set,ra=new Set,na=new Set,Bw=new Map;let Az=0,Eu=Ps=class extends Js.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new l5,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Az++})}static isCollection(e){return e!=null&&e instanceof Ps}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Ps?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Ee(this._observable),this._items}set items(e){this._emitBeforeChanges(Ge.ADD)||(this._splice(0,this.length,kw(e)),this._emitAfterChanges(Ge.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Tz,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(Ee(this._observable),this._emitBeforeChanges(Ge.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(Ge.ADD),this}addMany(e,t=this._items.length){if(Ee(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Ge.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,kw(e)),this._emitAfterChanges(Ge.ADD),this}at(e){if(Ee(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Ge.REMOVE),e}clone(){return Ee(this._observable),this._createNewInstance({items:this._items.map(R)})}concat(...e){Ee(this._observable);const t=e.map(kw);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)e.call(t,i[n],n,i);this._emitAfterChanges(Ge.REMOVE)}every(e,t){return Ee(this._observable),this._items.every(e,t)}filter(e,t){let i;return Ee(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return Ee(this._observable),this._items.find(e,t)}findIndex(e,t){return Ee(this._observable),this._items.findIndex(e,t)}flatten(e,t){Ee(this._observable);const i=[];return u5(i,this,e,t),new Ps(i)}forEach(e,t){return Ee(this._observable),this._items.forEach(e,t)}getItemAt(e){return Ee(this._observable),this._items[e]}getNextIndex(e){Ee(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Ee(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Ee(this._observable),this._items.indexOf(e,t)}join(e=","){return Ee(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Ee(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Ee(this._observable);const i=this._items.map(e,t);return new Ps({items:i})}reorder(e,t=this.length-1){Ee(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Ge.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Ge.MOVE)}return e}}pop(){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.REMOVE))return;const e=Fw(this._splice(this.length-1,1));return this._emitAfterChanges(Ge.REMOVE),e}push(...e){return Ee(this._observable),this._emitBeforeChanges(Ge.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Ge.ADD)),this.length}reduce(e,t){Ee(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Ee(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Ee(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Ee(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Ge.REMOVE))return;const t=Fw(this._splice(e,1));return this._emitAfterChanges(Ge.REMOVE),t}removeMany(e){if(Ee(this._observable),!e||!e.length||this._emitBeforeChanges(Ge.REMOVE))return[];const t=e instanceof Ps?e.toArray():e,i=this._items,r=[],n=t.length;for(let o=0;o<n;o++){const s=t[o],a=i.indexOf(s);if(a>-1){const u=1+Ez(t,i,o+1,a+1),d=this._splice(a,u);d&&d.length>0&&r.push.apply(r,d),o+=u-1}}return this._emitAfterChanges(Ge.REMOVE),r}reverse(){if(Ee(this._observable),this._emitBeforeChanges(Ge.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Ge.MOVE),this}shift(){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.REMOVE))return;const e=Fw(this._splice(0,1));return this._emitAfterChanges(Ge.REMOVE),e}slice(e=0,t=this.length){return Ee(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Ee(this._observable),this._items.some(e,t)}sort(e){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Ge.MOVE),this}splice(e,t,...i){Ee(this._observable);const r=(t?Ge.REMOVE:0)|(i.length?Ge.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(e,t,i)||[];return this._emitAfterChanges(r),n}toArray(){return Ee(this._observable),this._items.slice()}toJSON(){return Ee(this._observable),this.toArray()}toLocaleString(){return Ee(this._observable),this._items.toLocaleString()}toString(){return Ee(this._observable),this._items.toString()}unshift(...e){return Ee(this._observable),!e.length||this._emitBeforeChanges(Ge.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Ge.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,n=this.itemType;let o,s;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=xp(()=>this._dispatchChange())),t){if(s=r.splice(e,t),this.hasEventListener("before-remove")){const a=jr.acquire();a.target=this,a.cancellable=!0;for(let u=0,d=s.length;u<d;u++)o=s[u],a.reset(o),this.emit("before-remove",a),a.defaultPrevented&&(s.splice(u,1),r.splice(e,0,o),e+=1,u-=1,d-=1);jr.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=jr.acquire();a.target=this,a.cancellable=!1;const u=s.length;for(let d=0;d<u;d++)a.reset(s[d]),this.emit("after-remove",a);jr.release(a)}}if(i&&i.length){if(n){const h=[];for(const f of i){const y=n.ensureType(f);y==null&&f!=null||h.push(y)}i=h}const a=this.hasEventListener("before-add"),u=this.hasEventListener("after-add"),d=e===this.length;if(a||u){const h=jr.acquire();h.target=this,h.cancellable=!0;const f=jr.acquire();f.target=this,f.cancellable=!1;for(const y of i)a?(h.reset(y),this.emit("before-add",h),h.defaultPrevented||(d?r.push(y):r.splice(e++,0,y),this._set("length",r.length),u&&(f.reset(y),this.emit("after-add",f)))):(d?r.push(y):r.splice(e++,0,y),this._set("length",r.length),f.reset(y),this.emit("after-add",f));jr.release(f),jr.release(h)}else{if(d)for(const h of i)r.push(h);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||s&&s.length)&&this._notifyChangeEvent(i,s),s}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=jr.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,jr.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=jr.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),jr.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;ia.clear(),ra.clear(),na.clear();for(const{added:u,removed:d}of i){if(u)if(na.size===0&&ra.size===0)for(const h of u)ia.add(h);else for(const h of u)ra.has(h)?(na.add(h),ra.delete(h)):na.has(h)||ia.add(h);if(d)if(na.size===0&&ia.size===0)for(const h of d)ra.add(h);else for(const h of d)ia.has(h)?ia.delete(h):(na.delete(h),ra.add(h))}const r=Ui.acquire();ia.forEach(u=>{r.push(u)});const n=Ui.acquire();ra.forEach(u=>{n.push(u)});const o=this._items,s=t.items,a=Ui.acquire();if(na.forEach(u=>{s.indexOf(u)!==o.indexOf(u)&&a.push(u)}),t.listeners&&(r.length||n.length||a.length)){const u={target:this,added:r,removed:n,moved:a},d=t.listeners.length;for(let h=0;h<d;h++){const f=t.listeners[h];f.removed||f.callback.call(this,u)}}Ui.release(r),Ui.release(n),Ui.release(a)}ia.clear(),ra.clear(),na.clear()}};Eu.ofType=e=>{if(!e)return Ps;if(Bw.has(e))return Bw.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const n=e.typeMap[r].prototype.declaredClass;t?t+=` | ${n}`:t=n}let i=class extends Ps{};return l([dA({Type:e,ensureType:typeof e=="function"?Ze(e):zo(e)})],i.prototype,"itemType",void 0),i=l([S(`esri.core.Collection<${t}>`)],i),Bw.set(e,i),i},l([c()],Eu.prototype,"length",void 0),l([c()],Eu.prototype,"items",null),Eu=Ps=l([S("esri.core.Collection")],Eu);const he=Eu;function lc(e,t,i=he){return t||(t=new i),t===e||(t.removeAll(),xz(e)?t.addMany(e):e&&t.add(e)),t}function c5(e){return e}function xz(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}class pA{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new pA;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,R(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i,r;return(r=(i=this._values.get(t))==null?void 0:i.origin)!=null?r:De.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===De.DEFAULTS){const n=this._values.get(t);if(n&&n.origin!=null&&n.origin>r)return}this._values.set(t,new Cz(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===De.DEFAULTS?t:De.USER}}class Cz{constructor(t,i){this.value=t,this.origin=i}}function d5(e,t,i){t.keys().forEach(n=>{i.set(n,t.get(n),De.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(n=>{e.internalGet(n)&&i.set(n,e.internalGet(n),De.DEFAULTS)})}function Iz(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&IC(r,i))return!0}else for(const n of r)if(n===t||n.includes(".")&&n.indexOf(t)===0&&IC(n,i))return!0;return!1}function Mz(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Nz(e,t,i,r,n){let o=F_(t[i],n);Mz(o)&&(e[i]=!0);for(const s of Object.getOwnPropertyNames(t))o=F_(t[s],n),Iz(o,i,r)&&(e[s]=!0)}function Rz(e,t,i,r){const n=i.metadatas,o=cA(n[t],"any",r),s=o&&o.default;if(s===void 0)return;const a=typeof s=="function"?s.call(e,t,r):s;a!==void 0&&i.set(t,a)}const p5={origin:"service"};function h5(e,t,i=p5){if(!t||typeof t!="object")return;const r=Ii(e),n=r.metadatas,o={};for(const s of Object.getOwnPropertyNames(t))Nz(o,n,s,t,i);r.setDefaultOrigin(i.origin);for(const s of Object.getOwnPropertyNames(o)){const a=F_(n[s],i).read,u=a&&a.source;let d;d=u&&typeof u=="string"?Ly(t,u):t[s],a&&a.reader&&(d=a.reader.call(e,d,t,i)),d!==void 0&&r.set(s,d)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const s of Object.getOwnPropertyNames(n))o[s]||Rz(e,s,r,i)}r.setDefaultOrigin("user")}function Pz(e,t,i,r=p5){var o;const n={...r,messages:[]};i(n),(o=n.messages)==null||o.forEach(s=>{s.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(s):e.loadWarnings.push(s)})}const $z=W.getLogger("esri.core.accessorSupport.write");function Dz(e,t,i,r,n){var s,a;const o={};return(a=(s=t.write)==null?void 0:s.writer)==null||a.call(e,r,o,i,n),o}function f5(e,t,i,r,n,o){if(!r||!r.write)return!1;const s=e.get(i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(e,s,i,o);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1)return!1;if((s===null&&!n.allowNull&&!n.writerEnsuresNonNull||s===void 0)&&n.isRequired){const a=new I("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return a&&o&&o.messages?o.messages.push(a):a&&!o&&$z.error(a.name,a.message),!1}return!(s===void 0||s===null&&!n.allowNull&&!n.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===De.DEFAULTS)&&Lz(e,i,o,r,s)||!n.ignoreOrigin&&o&&o.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<sl(o.origin))}function Lz(e,t,i,r,n){const o=r.default;if(o===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof o=="function"){if(Array.isArray(n)){const s=o.call(e,t,i);return JE(s,n)}return!1}return o===n}function Oz(e,t,i,r){const n=Ii(e),o=n.metadatas,s=o5(o[t],r);return!!s&&f5(e,n,t,s,i,r)}function y5(e,t,i){var o,s;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return C0(t,e.toJSON(i));const r=Ii(e),n=r.metadatas;for(const a in n){const u=o5(n[a],i);if(!f5(e,r,a,u,void 0,i))continue;const d=e.get(a),h=Dz(e,u,u.write&&typeof u.write.target=="string"?u.write.target:a,d,i);Object.keys(h).length>0&&(t=C0(t,h),(s=(o=i==null?void 0:i.resources)==null?void 0:o.pendingOperations)!=null&&s.length&&Promise.all(i.resources.pendingOperations).then(()=>C0(t,h)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:a,oldOrigin:oj(r.store.originOf(a)),newOrigin:i.origin}))}return t}const By=e=>{let t=class extends e{constructor(...i){super(...i);const r=Ii(this),n=r.store,o=new pA;r.store=o,d5(r,n,o)}read(i,r){h5(this,i,r)}write(i={},r){return y5(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return kz.call(this,i,r)}};return t=l([S("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function kz(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let U=class extends By(se){};U=l([S("esri.core.JSONSupport")],U);var Ya;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Ya||(Ya={}));class Fz{constructor(t){this.instance=t,this._resolver=Ws(),this._status=Ya.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Ya.RESOLVED,this._cleanUp()},()=>{this._status=Ya.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Ya.RESOLVED}isRejected(){return this._status===Ya.REJECTED}isFulfilled(){return this._status!==Ya.PENDING}abort(){this._resolver.reject(wt())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=Ws(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},n=>{this.isFulfilled()||this._allPromise!==r||qi(n)||this._resolver.reject(n)}),t.resolve()}}const xv=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new Fz(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((n,o)=>{this._promiseProps.when(n,o)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=l([S("esri.core.Promise")],t),t};let o1=class extends xv(se){};o1=l([S("esri.core.Promise")],o1);const Bz="not-loaded",Uz="loading",Vz="failed",qC="loaded",m5=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=o=>{const s=new Promise((a,u)=>{const d=rA(o,u);this.destroyed&&u(new I("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,u).finally(()=>{d&&d.remove()})});if(this.loadStatus===Bz){this._set("loadStatus",Uz);const a=this._loadController=new AbortController;n({signal:a.signal}),hn(a.signal,()=>{this._promiseProps.abort()})}return r(),s}})),this.when(()=>{this._set("loadStatus",qC),this._loadController=null},r=>{this._set("loadStatus",Vz),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===qC}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new I("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return l([c({readOnly:!0})],t.prototype,"loaded",null),l([c({readOnly:!0})],t.prototype,"loadError",void 0),l([c({clonable:!1})],t.prototype,"loadStatus",void 0),l([c({type:[Yi],readOnly:!0})],t.prototype,"loadWarnings",null),t=l([S("esri.core.Loadable")],t),t};let Ih=class extends m5(o1){};Ih=l([S("esri.core.Loadable")],Ih),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=m5,e.isLoadable=t}(Ih||(Ih={}));const Ho=Ih;function jz(e,t,i){return ii(e.map((r,n)=>t.apply(i,[r,n])))}async function zz(e,t,i){return(await ii(e.map((r,n)=>t.apply(i,[r,n])))).map(r=>r.value)}async function Cv(e){if(O(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function lge(e){try{return{ok:!0,value:await e}}catch(t){return fl(t),{ok:!1,error:t}}}async function g5(e,t){return await e.load(),Hz(e,t)}async function Hz(e,t){const i=[],r=(...o)=>{for(const s of o)O(s)||(Array.isArray(s)?r(...s):he.isCollection(s)?s.forEach(a=>r(a)):Ho.isLoadable(s)&&i.push(s))};t(r);let n=null;if(await zz(i,async o=>{(await Cv(Gz(o)?o.loadAll():o.load())).ok!==!1||n||(n=o)}),n)throw n.loadError;return e}function Gz(e){return"loadAll"in e&&typeof e.loadAll=="function"}const Wz=W.getLogger("esri.core.urlUtils"),Ip=Ne.request,YC="esri/config: esriConfig.request.proxyUrl is not set.",v5=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,w5=/^\s*http:/i,qz=/^\s*https:/i,Yz=/^\s*file:/i,Kz=/:\d+$/,Zz=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Jz=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Xz=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class zd{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(Jz);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Xz),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const bm={},Qz=new zd(Ne.applicationUrl);let xi=Qz;const eH=tH();let hA=eH;const fA=()=>xi,b5=()=>hA;function tH(){const e=xi.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${xi.scheme}://${xi.host}${xi.port!=null?`:${xi.port}`:""}`}${t}`}function rt(e){const t={path:null,query:null},i=new zd(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=_5(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function _5(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const n=r.indexOf("=");let o,s;n<0?(o=decodeURIComponent(r),s=""):(o=decodeURIComponent(r.slice(0,n)),s=decodeURIComponent(r.slice(n+1)));let a=i[o];typeof a=="string"&&(a=i[o]=[a]),Array.isArray(a)?a.push(s):i[o]=s}return i}function KC(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function uc(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",o=t&&t[i];return o?n+encodeURIComponent(o(r)):Array.isArray(r)?r.map(s=>KC(s)?n+encodeURIComponent(JSON.stringify(s)):n+encodeURIComponent(s)).join("&"):KC(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function iH(e=!1){let t,i=Ip.proxyUrl;if(typeof e=="string"){t=lH(e);const r=Iv(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw Wz.warn(YC),new I("urlutils:proxy-not-set",YC);return t&&U_()&&(i=wA(i)),rt(i)}function uge(e){const t=Iv(e);let i,r;if(t){const n=yA(t.proxyUrl);i=n.path,r=n.query?_5(n.query):null}if(i){const n=rt(e);e=i+"?"+n.path;const o=uc({...r,...n.query});o&&(e=`${e}?${o}`)}return e}const Qp={path:"",query:""};function yA(e){const t=e.indexOf("?");return t!==-1?(Qp.path=e.slice(0,t),Qp.query=e.slice(t+1)):(Qp.path=e,Qp.query=null),Qp}function S5(e){return e=(e=s1(e=hH(e=yA(e).path),!0)).toLowerCase()}function rH(e){const t={proxyUrl:e.proxyUrl,urlPrefix:S5(e.urlPrefix)},i=Ip.proxyRules,r=t.urlPrefix;let n=i.length;for(let o=0;o<i.length;o++){const s=i[o].urlPrefix;if(r.indexOf(s)===0){if(r.length===s.length)return-1;n=o;break}s.indexOf(r)===0&&(n=o+1)}return i.splice(n,0,t),n}function Iv(e){const t=Ip.proxyRules,i=S5(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function T5(e,t){return e=ZC(e),t=ZC(t),s1(e)===s1(t)}function ZC(e){const t=(e=Dr(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function E5(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=Ip.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function ty(e,t,i=!1){const r=j_(e),n=j_(t);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function mA(e){if(typeof e=="string"){if(!zi(e))return!0;e=j_(e)}if(ty(e,xi))return!0;const t=Ip.trustedServers||[];for(let i=0;i<t.length;i++){const r=nH(t[i]);for(let n=0;n<r.length;n++)if(ty(e,r[n]))return!0}return!1}function nH(e){return bm[e]||(vA(e)||fn(e)?bm[e]=[new zd(Xn(e))]:bm[e]=[new zd(`http://${e}`),new zd(`https://${e}`)]),bm[e]}function Xn(e,t=hA,i){return fn(e)?i&&i.preserveProtocolRelative?e:xi.scheme==="http"&&xi.authority===cn(e).slice(2)?`http:${e}`:`https:${e}`:vA(e)?e:Go(e[0]==="/"?pH(t):t,e)}function gA(e,t=hA,i){if(!zi(e))return e;const r=Dr(e),n=r.toLowerCase(),o=Dr(t).toLowerCase().replace(/\/+$/,""),s=i?Dr(i).toLowerCase().replace(/\/+$/,""):null;if(s&&o.indexOf(s)!==0)return e;const a=(f,y,m)=>(m=f.indexOf(y,m))===-1?f.length:m;let u=a(n,"/",n.indexOf("//")+2),d=-1;for(;n.slice(0,u+1)===o.slice(0,u)+"/"&&(d=u+1,u!==n.length);)u=a(n,"/",u+1);if(d===-1||s&&d<s.length)return e;e=r.slice(d);const h=o.slice(d-1).replace(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function Dr(e){return e=mH(e=yH(e=fH(e=Xn(e=e.trim()))))}function Go(...e){const t=e.filter(T);if(!t||!t.length)return;const i=[];if(zi(t[0])){const n=t[0],o=n.indexOf("//");o!==-1&&(i.push(n.slice(0,o+1)),cH(t[0])&&(i[0]+="/"),t[0]=n.slice(o+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((n,o)=>o?n.concat(o.split("/")):n,[]);for(let n=0;n<r.length;n++){const o=r[n];o===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!o&&n===r.length-1||o&&(o!=="."||i.length===0))&&i.push(o)}return i.join("/")}function cn(e,t=!1){if(Mv(e)||Ec(e))return null;let i=e.indexOf("://");if(i===-1&&fn(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=s1(e,!0)),e}function zi(e){return fn(e)||vA(e)}function Mv(e){return e!=null&&e.slice(0,5)==="blob:"}function Ec(e){return e.slice(0,5)==="data:"}function cge(e){const t=A5(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let n=0;n<i.length;n++)r[n]=i.charCodeAt(n);return r.buffer}function dge(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const oH=/^data:(.*?)(;base64)?,(.*)$/;function A5(e){const t=e.match(oH);if(!t)return null;const[,i,r,n]=t;return{mediaType:i,isBase64:!!r,data:n}}function x5(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function pge(e,t){sH(e,t)||aH(e,t)}function sH(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function aH(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function fn(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function vA(e){return v5.test(e)}function lH(e){return qz.test(e)||xi.scheme==="https"&&fn(e)}function uH(e){return w5.test(e)||xi.scheme==="http"&&fn(e)}function cH(e){return Yz.test(e)}function wA(e){return fn(e)?`https:${e}`:e.replace(w5,"https:")}function dH(){return xi.scheme==="http"}function U_(){return xi.scheme==="https"}function s1(e,t=!1){return fn(e)?e.slice(2):(e=e.replace(v5,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function pH(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function C5(e){let t=0;if(zi(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function hge(e,t){if(!e)return"";const i=rt(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const n=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(n,"")}function hH(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function Nv(e){return e.replace(/\/+$/,"")}function fH(e){if(/^https?:\/\//i.test(e)){const t=yA(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function yH(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function mH(e){const t=Ip.httpsDomains;if(!uH(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),Kz.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return dH()&&r===xi.authority&&!Zz.test(e)||(U_()&&r===xi.authority||t&&t.some(n=>r===n||r.endsWith(`.${n}`))||U_()&&!Iv(e))&&(e=wA(e)),e}function V_(e,t,i){if(!(t&&i&&e&&zi(e)))return e;const r=e.indexOf("//"),n=e.indexOf("/",r+2),o=e.indexOf(":",r+2),s=Math.min(n<0?e.length:n,o<0?e.length:o);return e.slice(r+2,s).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(s)}`}function j_(e){return typeof e=="string"?new zd(Xn(e)):(e.scheme||(e.scheme=xi.scheme),e)}function fge(e){return vH.test(e)}function I5(e,t){const i=rt(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function M5(e,t,i){const r=rt(e),n=r.query||{};return n[t]=String(i),`${r.path}?${uc(n)}`}function Us(e,t){const i=rt(e),r=i.query||{};for(const o in t)r[o]=t[o];const n=uc(r);return n?`${i.path}?${n}`:i.path}function yge(e){if(O(e))return null;const t=e.match(gH);return t?t[1]:null}const gH=/.*?\.([^\/]*)$/,vH=/(^data:image\/svg|\.svg$)/i;function X(e,t,i){let r,n;return t===void 0?(n=e,r=[void 0]):typeof t!="string"?(n=e,r=[void 0],i=t):(n=t,r=Array.isArray(e)?e:[e]),(o,s)=>{const a=o.constructor.prototype;for(const u of r){const d=X4(o,u,n);d.write&&typeof d.write=="object"||(d.write={}),i&&(d.write.target=i),d.write.writer=a[s]}}}var cc;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(cc||(cc={}));let p;const b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(p=2e3;p<=2045;p++)b[p]=0;for(p=2056;p<=2065;p++)b[p]=0;for(p=2067;p<=2135;p++)b[p]=0;for(p=2137;p<=2154;p++)b[p]=0;for(p=2161;p<=2170;p++)b[p]=0;for(p=2172;p<=2193;p++)b[p]=0;for(p=2195;p<=2198;p++)b[p]=0;for(p=2200;p<=2203;p++)b[p]=0;for(p=2205;p<=2217;p++)b[p]=0;for(p=2222;p<=2224;p++)b[p]=1;for(p=2225;p<=2250;p++)b[p]=2;for(p=2251;p<=2253;p++)b[p]=1;for(p=2257;p<=2264;p++)b[p]=2;for(p=2274;p<=2279;p++)b[p]=2;for(p=2280;p<=2282;p++)b[p]=1;for(p=2283;p<=2289;p++)b[p]=2;for(p=2290;p<=2292;p++)b[p]=0;for(p=2308;p<=2313;p++)b[p]=0;for(p=2315;p<=2491;p++)b[p]=0;for(p=2494;p<=2866;p++)b[p]=0;for(p=2867;p<=2869;p++)b[p]=1;for(p=2870;p<=2888;p++)b[p]=2;for(p=2891;p<=2895;p++)b[p]=2;for(p=2896;p<=2898;p++)b[p]=1;for(p=2902;p<=2908;p++)b[p]=2;for(p=2915;p<=2920;p++)b[p]=2;for(p=2921;p<=2923;p++)b[p]=1;for(p=2924;p<=2930;p++)b[p]=2;for(p=2931;p<=2962;p++)b[p]=0;for(p=2964;p<=2968;p++)b[p]=2;for(p=2969;p<=2973;p++)b[p]=0;for(p=2975;p<=2991;p++)b[p]=0;for(p=2995;p<=3051;p++)b[p]=0;for(p=3054;p<=3079;p++)b[p]=0;for(p=3081;p<=3088;p++)b[p]=0;for(p=3092;p<=3101;p++)b[p]=0;for(p=3106;p<=3138;p++)b[p]=0;for(p=3146;p<=3151;p++)b[p]=0;for(p=3153;p<=3166;p++)b[p]=0;for(p=3168;p<=3172;p++)b[p]=0;for(p=3174;p<=3203;p++)b[p]=0;for(p=3294;p<=3358;p++)b[p]=0;for(p=3367;p<=3403;p++)b[p]=0;for(p=3408;p<=3416;p++)b[p]=0;for(p=3417;p<=3438;p++)b[p]=2;for(p=3441;p<=3446;p++)b[p]=2;for(p=3447;p<=3450;p++)b[p]=0;for(p=3451;p<=3459;p++)b[p]=2;for(p=3460;p<=3478;p++)b[p]=0;for(p=3554;p<=3559;p++)b[p]=0;for(p=3560;p<=3570;p++)b[p]=2;for(p=3571;p<=3581;p++)b[p]=0;for(p=3594;p<=3597;p++)b[p]=0;for(p=3601;p<=3604;p++)b[p]=0;for(p=3637;p<=3639;p++)b[p]=0;for(p=3665;p<=3667;p++)b[p]=0;for(p=3693;p<=3695;p++)b[p]=0;for(p=3701;p<=3727;p++)b[p]=0;for(p=3728;p<=3739;p++)b[p]=2;for(p=3740;p<=3751;p++)b[p]=0;for(p=3753;p<=3760;p++)b[p]=2;for(p=3761;p<=3773;p++)b[p]=0;for(p=3775;p<=3777;p++)b[p]=0;for(p=3779;p<=3781;p++)b[p]=0;for(p=3783;p<=3785;p++)b[p]=0;for(p=3788;p<=3791;p++)b[p]=0;for(p=3797;p<=3802;p++)b[p]=0;for(p=3814;p<=3816;p++)b[p]=0;for(p=3825;p<=3829;p++)b[p]=0;for(p=3832;p<=3841;p++)b[p]=0;for(p=3844;p<=3852;p++)b[p]=0;for(p=3873;p<=3885;p++)b[p]=0;for(p=3890;p<=3893;p++)b[p]=0;for(p=3907;p<=3912;p++)b[p]=0;for(p=3942;p<=3950;p++)b[p]=0;for(p=3968;p<=3970;p++)b[p]=0;for(p=3973;p<=3976;p++)b[p]=0;for(p=3986;p<=3989;p++)b[p]=0;for(p=3994;p<=3997;p++)b[p]=0;for(p=4048;p<=4051;p++)b[p]=0;for(p=4056;p<=4063;p++)b[p]=0;for(p=4093;p<=4096;p++)b[p]=0;for(p=4390;p<=4398;p++)b[p]=0;for(p=4399;p<=4413;p++)b[p]=2;for(p=4418;p<=4433;p++)b[p]=2;for(p=4455;p<=4457;p++)b[p]=2;for(p=4484;p<=4489;p++)b[p]=0;for(p=4491;p<=4554;p++)b[p]=0;for(p=4568;p<=4589;p++)b[p]=0;for(p=4652;p<=4656;p++)b[p]=0;for(p=4766;p<=4800;p++)b[p]=0;for(p=5014;p<=5016;p++)b[p]=0;for(p=5069;p<=5072;p++)b[p]=0;for(p=5105;p<=5130;p++)b[p]=0;for(p=5173;p<=5188;p++)b[p]=0;for(p=5253;p<=5259;p++)b[p]=0;for(p=5269;p<=5275;p++)b[p]=0;for(p=5292;p<=5311;p++)b[p]=0;for(p=5329;p<=5331;p++)b[p]=0;for(p=5343;p<=5349;p++)b[p]=0;for(p=5355;p<=5357;p++)b[p]=0;for(p=5387;p<=5389;p++)b[p]=0;for(p=5459;p<=5463;p++)b[p]=0;for(p=5479;p<=5482;p++)b[p]=0;for(p=5518;p<=5520;p++)b[p]=0;for(p=5530;p<=5539;p++)b[p]=0;for(p=5550;p<=5552;p++)b[p]=0;for(p=5562;p<=5583;p++)b[p]=0;for(p=5623;p<=5625;p++)b[p]=2;for(p=5631;p<=5639;p++)b[p]=0;for(p=5649;p<=5653;p++)b[p]=0;for(p=5663;p<=5680;p++)b[p]=0;for(p=5682;p<=5685;p++)b[p]=0;for(p=5875;p<=5877;p++)b[p]=0;for(p=5896;p<=5899;p++)b[p]=0;for(p=5921;p<=5940;p++)b[p]=0;for(p=6050;p<=6125;p++)b[p]=0;for(p=6244;p<=6275;p++)b[p]=0;for(p=6328;p<=6348;p++)b[p]=0;for(p=6350;p<=6356;p++)b[p]=0;for(p=6366;p<=6372;p++)b[p]=0;for(p=6381;p<=6387;p++)b[p]=0;for(p=6393;p<=6404;p++)b[p]=0;for(p=6480;p<=6483;p++)b[p]=0;for(p=6511;p<=6514;p++)b[p]=0;for(p=6579;p<=6581;p++)b[p]=0;for(p=6619;p<=6624;p++)b[p]=0;for(p=6625;p<=6627;p++)b[p]=2;for(p=6628;p<=6632;p++)b[p]=0;for(p=6634;p<=6637;p++)b[p]=0;for(p=6669;p<=6692;p++)b[p]=0;for(p=6707;p<=6709;p++)b[p]=0;for(p=6720;p<=6723;p++)b[p]=0;for(p=6732;p<=6738;p++)b[p]=0;for(p=6931;p<=6933;p++)b[p]=0;for(p=6956;p<=6959;p++)b[p]=0;for(p=7005;p<=7007;p++)b[p]=0;for(p=7057;p<=7070;p++)b[p]=2;for(p=7074;p<=7082;p++)b[p]=0;for(p=7109;p<=7118;p++)b[p]=0;for(p=7119;p<=7127;p++)b[p]=1;for(p=7374;p<=7376;p++)b[p]=0;for(p=7528;p<=7586;p++)b[p]=0;for(p=7587;p<=7645;p++)b[p]=2;for(p=7692;p<=7696;p++)b[p]=0;for(p=7755;p<=7787;p++)b[p]=0;for(p=7791;p<=7795;p++)b[p]=0;for(p=7799;p<=7801;p++)b[p]=0;for(p=7803;p<=7805;p++)b[p]=0;for(p=7825;p<=7831;p++)b[p]=0;for(p=7845;p<=7859;p++)b[p]=0;for(p=8013;p<=8032;p++)b[p]=0;for(p=8065;p<=8068;p++)b[p]=1;for(p=8518;p<=8529;p++)b[p]=2;for(p=8533;p<=8536;p++)b[p]=2;for(p=8538;p<=8540;p++)b[p]=2;for(p=8677;p<=8679;p++)b[p]=0;for(p=8836;p<=8840;p++)b[p]=0;for(p=8857;p<=8859;p++)b[p]=0;for(p=8908;p<=8910;p++)b[p]=0;for(p=9154;p<=9159;p++)b[p]=0;for(p=9205;p<=9218;p++)b[p]=0;for(p=9271;p<=9273;p++)b[p]=0;for(p=9295;p<=9297;p++)b[p]=0;for(p=9356;p<=9360;p++)b[p]=0;for(p=9404;p<=9407;p++)b[p]=0;for(p=9476;p<=9482;p++)b[p]=0;for(p=9487;p<=9494;p++)b[p]=0;for(p=9697;p<=9699;p++)b[p]=0;for(p=20002;p<=20032;p++)b[p]=0;for(p=20062;p<=20092;p++)b[p]=0;for(p=20135;p<=20138;p++)b[p]=0;for(p=20248;p<=20258;p++)b[p]=0;for(p=20348;p<=20358;p++)b[p]=0;for(p=20436;p<=20440;p++)b[p]=0;for(p=20822;p<=20824;p++)b[p]=0;for(p=20904;p<=20932;p++)b[p]=0;for(p=20934;p<=20936;p++)b[p]=0;for(p=21004;p<=21032;p++)b[p]=0;for(p=21035;p<=21037;p++)b[p]=0;for(p=21095;p<=21097;p++)b[p]=0;for(p=21148;p<=21150;p++)b[p]=0;for(p=21207;p<=21264;p++)b[p]=0;for(p=21307;p<=21364;p++)b[p]=0;for(p=21413;p<=21423;p++)b[p]=0;for(p=21453;p<=21463;p++)b[p]=0;for(p=21473;p<=21483;p++)b[p]=0;for(p=21780;p<=21782;p++)b[p]=0;for(p=21891;p<=21894;p++)b[p]=0;for(p=21896;p<=21899;p++)b[p]=0;for(p=22171;p<=22177;p++)b[p]=0;for(p=22181;p<=22187;p++)b[p]=0;for(p=22191;p<=22197;p++)b[p]=0;for(p=22234;p<=22236;p++)b[p]=0;for(p=22521;p<=22525;p++)b[p]=0;for(p=22991;p<=22994;p++)b[p]=0;for(p=23028;p<=23038;p++)b[p]=0;for(p=23830;p<=23853;p++)b[p]=0;for(p=23866;p<=23872;p++)b[p]=0;for(p=23877;p<=23884;p++)b[p]=0;for(p=23886;p<=23894;p++)b[p]=0;for(p=23946;p<=23948;p++)b[p]=0;for(p=24311;p<=24313;p++)b[p]=0;for(p=24342;p<=24347;p++)b[p]=0;for(p=24370;p<=24374;p++)b[p]=10;for(p=24375;p<=24381;p++)b[p]=0;for(p=24718;p<=24721;p++)b[p]=0;for(p=24817;p<=24821;p++)b[p]=0;for(p=24877;p<=24882;p++)b[p]=0;for(p=24891;p<=24893;p++)b[p]=0;for(p=25391;p<=25395;p++)b[p]=0;for(p=25828;p<=25838;p++)b[p]=0;for(p=26191;p<=26195;p++)b[p]=0;for(p=26391;p<=26393;p++)b[p]=0;for(p=26701;p<=26722;p++)b[p]=0;for(p=26729;p<=26799;p++)b[p]=2;for(p=26801;p<=26803;p++)b[p]=2;for(p=26811;p<=26813;p++)b[p]=2;for(p=26847;p<=26870;p++)b[p]=2;for(p=26891;p<=26899;p++)b[p]=0;for(p=26901;p<=26923;p++)b[p]=0;for(p=26929;p<=26946;p++)b[p]=0;for(p=26948;p<=26998;p++)b[p]=0;for(p=27037;p<=27040;p++)b[p]=0;for(p=27205;p<=27232;p++)b[p]=0;for(p=27258;p<=27260;p++)b[p]=0;for(p=27391;p<=27398;p++)b[p]=0;for(p=27561;p<=27564;p++)b[p]=0;for(p=27571;p<=27574;p++)b[p]=0;for(p=27581;p<=27584;p++)b[p]=0;for(p=27591;p<=27594;p++)b[p]=0;for(p=28191;p<=28193;p++)b[p]=0;for(p=28348;p<=28358;p++)b[p]=0;for(p=28402;p<=28432;p++)b[p]=0;for(p=28462;p<=28492;p++)b[p]=0;for(p=29118;p<=29122;p++)b[p]=0;for(p=29168;p<=29172;p++)b[p]=0;for(p=29177;p<=29185;p++)b[p]=0;for(p=29187;p<=29195;p++)b[p]=0;for(p=29900;p<=29903;p++)b[p]=0;for(p=30161;p<=30179;p++)b[p]=0;for(p=30491;p<=30494;p++)b[p]=0;for(p=30729;p<=30732;p++)b[p]=0;for(p=31251;p<=31259;p++)b[p]=0;for(p=31265;p<=31268;p++)b[p]=0;for(p=31275;p<=31279;p++)b[p]=0;for(p=31281;p<=31297;p++)b[p]=0;for(p=31461;p<=31469;p++)b[p]=0;for(p=31491;p<=31495;p++)b[p]=0;for(p=31917;p<=31922;p++)b[p]=0;for(p=31965;p<=32e3;p++)b[p]=0;for(p=32001;p<=32003;p++)b[p]=2;for(p=32005;p<=32031;p++)b[p]=2;for(p=32033;p<=32060;p++)b[p]=2;for(p=32064;p<=32067;p++)b[p]=2;for(p=32074;p<=32077;p++)b[p]=2;for(p=32081;p<=32086;p++)b[p]=0;for(p=32107;p<=32130;p++)b[p]=0;for(p=32133;p<=32158;p++)b[p]=0;for(p=32164;p<=32167;p++)b[p]=2;for(p=32180;p<=32199;p++)b[p]=0;for(p=32201;p<=32260;p++)b[p]=0;for(p=32301;p<=32360;p++)b[p]=0;for(p=32601;p<=32662;p++)b[p]=0;for(p=32664;p<=32667;p++)b[p]=2;for(p=32701;p<=32761;p++)b[p]=0;for(p=53001;p<=53004;p++)b[p]=0;for(p=53008;p<=53019;p++)b[p]=0;for(p=53021;p<=53032;p++)b[p]=0;for(p=53034;p<=53037;p++)b[p]=0;for(p=53042;p<=53046;p++)b[p]=0;for(p=53074;p<=53080;p++)b[p]=0;for(p=54001;p<=54004;p++)b[p]=0;for(p=54008;p<=54019;p++)b[p]=0;for(p=54021;p<=54032;p++)b[p]=0;for(p=54034;p<=54037;p++)b[p]=0;for(p=54042;p<=54046;p++)b[p]=0;for(p=54048;p<=54053;p++)b[p]=0;for(p=54074;p<=54080;p++)b[p]=0;for(p=54098;p<=54101;p++)b[p]=0;for(p=102001;p<=102040;p++)b[p]=0;for(p=102042;p<=102063;p++)b[p]=0;for(p=102065;p<=102067;p++)b[p]=0;for(p=102070;p<=102117;p++)b[p]=0;for(p=102122;p<=102216;p++)b[p]=0;for(p=102221;p<=102377;p++)b[p]=0;for(p=102382;p<=102388;p++)b[p]=0;for(p=102389;p<=102398;p++)b[p]=2;for(p=102399;p<=102444;p++)b[p]=0;for(p=102445;p<=102447;p++)b[p]=2;for(p=102448;p<=102458;p++)b[p]=0;for(p=102459;p<=102468;p++)b[p]=2;for(p=102469;p<=102499;p++)b[p]=0;for(p=102500;p<=102519;p++)b[p]=1;for(p=102520;p<=102524;p++)b[p]=0;for(p=102525;p<=102529;p++)b[p]=2;for(p=102530;p<=102588;p++)b[p]=0;for(p=102590;p<=102598;p++)b[p]=0;for(p=102601;p<=102603;p++)b[p]=0;for(p=102605;p<=102628;p++)b[p]=0;for(p=102629;p<=102646;p++)b[p]=2;for(p=102648;p<=102700;p++)b[p]=2;for(p=102701;p<=102703;p++)b[p]=0;for(p=102707;p<=102730;p++)b[p]=2;for(p=102733;p<=102758;p++)b[p]=2;for(p=102767;p<=102900;p++)b[p]=0;for(p=102901;p<=102933;p++)b[p]=2;for(p=102934;p<=102950;p++)b[p]=13;for(p=102951;p<=102955;p++)b[p]=0;for(p=102961;p<=102963;p++)b[p]=0;for(p=102965;p<=102969;p++)b[p]=0;for(p=102971;p<=102973;p++)b[p]=0;for(p=102975;p<=102989;p++)b[p]=0;for(p=102990;p<=102992;p++)b[p]=1;for(p=102997;p<=103002;p++)b[p]=0;for(p=103003;p<=103008;p++)b[p]=2;for(p=103009;p<=103011;p++)b[p]=0;for(p=103012;p<=103014;p++)b[p]=2;for(p=103019;p<=103021;p++)b[p]=0;for(p=103022;p<=103024;p++)b[p]=2;for(p=103029;p<=103031;p++)b[p]=0;for(p=103032;p<=103034;p++)b[p]=2;for(p=103065;p<=103068;p++)b[p]=0;for(p=103074;p<=103076;p++)b[p]=0;for(p=103077;p<=103079;p++)b[p]=1;for(p=103080;p<=103082;p++)b[p]=0;for(p=103083;p<=103085;p++)b[p]=2;for(p=103090;p<=103093;p++)b[p]=0;for(p=103097;p<=103099;p++)b[p]=0;for(p=103100;p<=103102;p++)b[p]=2;for(p=103107;p<=103109;p++)b[p]=0;for(p=103110;p<=103112;p++)b[p]=2;for(p=103113;p<=103116;p++)b[p]=0;for(p=103117;p<=103120;p++)b[p]=2;for(p=103153;p<=103157;p++)b[p]=0;for(p=103158;p<=103162;p++)b[p]=2;for(p=103163;p<=103165;p++)b[p]=0;for(p=103166;p<=103168;p++)b[p]=1;for(p=103169;p<=103171;p++)b[p]=2;for(p=103186;p<=103188;p++)b[p]=0;for(p=103189;p<=103191;p++)b[p]=2;for(p=103192;p<=103195;p++)b[p]=0;for(p=103196;p<=103199;p++)b[p]=2;for(p=103200;p<=103224;p++)b[p]=0;for(p=103225;p<=103227;p++)b[p]=1;for(p=103232;p<=103237;p++)b[p]=0;for(p=103238;p<=103243;p++)b[p]=2;for(p=103244;p<=103246;p++)b[p]=0;for(p=103247;p<=103249;p++)b[p]=2;for(p=103254;p<=103256;p++)b[p]=0;for(p=103257;p<=103259;p++)b[p]=2;for(p=103264;p<=103266;p++)b[p]=0;for(p=103267;p<=103269;p++)b[p]=2;for(p=103300;p<=103375;p++)b[p]=0;for(p=103381;p<=103383;p++)b[p]=0;for(p=103384;p<=103386;p++)b[p]=1;for(p=103387;p<=103389;p++)b[p]=0;for(p=103390;p<=103392;p++)b[p]=2;for(p=103397;p<=103399;p++)b[p]=0;for(p=103400;p<=103471;p++)b[p]=2;for(p=103476;p<=103478;p++)b[p]=0;for(p=103479;p<=103481;p++)b[p]=2;for(p=103486;p<=103488;p++)b[p]=0;for(p=103489;p<=103491;p++)b[p]=2;for(p=103492;p<=103495;p++)b[p]=0;for(p=103496;p<=103499;p++)b[p]=2;for(p=103528;p<=103543;p++)b[p]=0;for(p=103544;p<=103548;p++)b[p]=2;for(p=103549;p<=103551;p++)b[p]=0;for(p=103552;p<=103554;p++)b[p]=1;for(p=103555;p<=103557;p++)b[p]=2;for(p=103558;p<=103560;p++)b[p]=0;for(p=103571;p<=103573;p++)b[p]=0;for(p=103574;p<=103576;p++)b[p]=2;for(p=103577;p<=103580;p++)b[p]=0;for(p=103581;p<=103583;p++)b[p]=2;for(p=103595;p<=103694;p++)b[p]=0;for(p=103696;p<=103699;p++)b[p]=0;for(p=103700;p<=103793;p++)b[p]=2;for(p=103794;p<=103887;p++)b[p]=0;for(p=103900;p<=103971;p++)b[p]=2;const wH={102113:!0,102100:!0,3857:!0,3785:!0},bH={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},JC='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',_m=[-20037508342788905e-9,20037508342788905e-9],Sm=[-20037508342787e-6,20037508342787e-6],N5={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:_m,origin:Sm,dx:1e-5},102100:{wkTemplate:JC,valid:_m,origin:Sm,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:_m,origin:Sm,dx:1e-5},3857:{wkTemplate:JC,valid:_m,origin:Sm,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Ji(e,t){return!O(e)&&!O(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||dc(e)&&dc(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function to(e){return Mi(e)&&e.wkid&&N5[e.wkid]||null}function R5(e){return!!Mi(e)&&(e.wkid?b[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function _H(e){return!(Rv(e)||Pv(e))}function iy(e){return Mi(e)&&e.wkid===4326}function mge(e){return Mi(e)&&e.wkid===cc.CGCS2000}function dc(e){return Mi(e)&&e.wkid!=null&&wH[e.wkid]===!0}function SH(e){return Mi(e)&&e.wkid===32662}function bA(e){return e===cc.GCSMARS2000||e===cc.GCSMARS2000_SPHERE}function Rv(e){return Mi(e)&&e.wkid!=null&&bA(e.wkid)}function _A(e){return e===cc.GCSMOON2000}function Pv(e){return Mi(e)&&e.wkid!=null&&_A(e.wkid)}function TH(e){return Mi(e)&&e.wkid!=null&&bH[e.wkid]===!0}function Mi(e){return T(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const EH={wkid:4326,wkt:jo(N5[4326].wkTemplate,{Central_Meridian:"0.0"})},AH={wkid:102100,latestWkid:3857},xH={wkid:32662};var po;let Ke=po=class extends U{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return po.WebMercator;if(e.wkid===4326)return po.WGS84}const t=new po;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return iy(this)}get isWebMercator(){return dc(this)}get isGeographic(){return R5(this)}get isWrappable(){return TH(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===po.WGS84)return po.WGS84;if(this===po.WebMercator)return po.WebMercator;const e=new po;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=R(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||r?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===t&&n.referenceServiceName===i:n.id===t}return Ji(this,e)}toJSON(e){return this.write(void 0,e)}};Ke.GCS_NAD_1927=null,Ke.WGS84=null,Ke.WebMercator=null,Ke.PlateCarree=null,l([c({readOnly:!0})],Ke.prototype,"isWGS84",null),l([c({readOnly:!0})],Ke.prototype,"isWebMercator",null),l([c({readOnly:!0})],Ke.prototype,"isGeographic",null),l([c({readOnly:!0})],Ke.prototype,"isWrappable",null),l([c({type:Qe,json:{write:!0}})],Ke.prototype,"latestWkid",void 0),l([c({type:Qe,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Ke.prototype,"wkid",void 0),l([c({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Ke.prototype,"wkt",void 0),l([X("wkt"),X("web-scene","wkt")],Ke.prototype,"writeWkt",null),l([c({type:Qe,json:{write:!0}})],Ke.prototype,"vcsWkid",void 0),l([c({type:Qe,json:{write:!0}})],Ke.prototype,"latestVcsWkid",void 0),l([c()],Ke.prototype,"imageCoordinateSystem",void 0),Ke=po=l([S("esri.geometry.SpatialReference")],Ke),Ke.prototype.toJSON.isDefaultToJSON=!0,Ke.GCS_NAD_1927=new Ke({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Ke.WGS84=new Ke(EH),Ke.WebMercator=new Ke(AH),Ke.PlateCarree=new Ke(xH),Object.freeze&&(Object.freeze(Ke.GCS_NAD_1927),Object.freeze(Ke.WGS84),Object.freeze(Ke.WebMercator));const me=Ke,P5="20220708",$5="7fd01dbc0e83d753fcf101c8ff2a8d215430252d",D5="4.24",CH={async request(e,t){var a;const{default:i}=await B(()=>Promise.resolve().then(()=>HH),void 0,import.meta.url),r=e.options,n=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=n==="native"||n==="native-request-init"?"native-request-init":["blob","json","text"].includes(n)&&((a=E5(e.url))==null?void 0:a.after)?n:"array-buffer";const o=await i(e.url,r),s={data:o.data,ssl:o.ssl};switch(o.requestOptions.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let gt;function gge(e){gt=e}function vge(e){const t=gt&&gt.findCredential(e);return t&&t.token?M5(e,"token",t.token):e}k("host-webworker")||(k("edge")||k("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const IH=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function L5(e){const t=cn(e,!0);return t&&t.endsWith(".arcgis.com")&&!IH.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function MH(e,t,i=!1,r){return new Promise((n,o)=>{if(pn(r))return void o(XC());let s=()=>{d(),o(new Error(`Unable to load ${t}`))},a=()=>{const h=e;d(),n(h)},u=()=>{if(!e)return;const h=e;d(),h.src="",o(XC())};const d=()=>{k("esri-image-decode")||(e.removeEventListener("error",s),e.removeEventListener("load",a)),s=null,a=null,e=null,T(r)&&r.removeEventListener("abort",u),u=null,i&&URL.revokeObjectURL(t)};T(r)&&r.addEventListener("abort",u),k("esri-image-decode")?e.decode().then(a,s):(e.addEventListener("error",s),e.addEventListener("load",a))})}function XC(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function NH(e){Ne.request.crossOriginNoCorsDomains||(Ne.request.crossOriginNoCorsDomains={});const t=Ne.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[cn(i)]=0:(t[cn("http://"+i)]=0,t[cn("https://"+i)]=0)}function RH(e){const t=Ne.request.crossOriginNoCorsDomains;if(t){let i=cn(e);if(i)return i=i.toLowerCase(),!ty(i,fA())&&t[i]<Date.now()-36e5}return!1}async function PH(e){var r;const t=Ne.request.crossOriginNoCorsDomains;t&&(t[cn(e).toLowerCase()]=Date.now());const i=rt(e);e=i.path,((r=i.query)==null?void 0:r.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Be(e,t){var d;const i=Ec(e),r=Mv(e);r||i||(e=Dr(e));const n={url:e,requestOptions:{...t}};let o=E5(e);if(o){const h=await UH(o,n);if(h!=null)return{data:h,getHeader:SA,requestOptions:n.requestOptions,url:n.url};o.after||o.error||(o=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"){if(k("host-webworker")||k("host-node"))throw Qn("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(i)throw Qn("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),n);if(t.method==="head"){if(t.body)throw Qn("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Qn("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await kH(),a1)return a1.execute(e,t);const s=new AbortController;hn(t,()=>s.abort());const a={controller:s,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:o,params:n,redoRequest:!1,useIdentity:Wn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},u=await jH(a);return(d=o==null?void 0:o.after)==null||d.call(o,u),u}let a1;const Wn=Ne.request,O5="FormData"in globalThis,$H=[499,498,403,401],DH=["COM_0056","COM_0057","SB_0008"],LH=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],SA=()=>null,z_=Symbol();function OH(e){const t=cn(e);t&&!Be._corsServers.includes(t)&&Be._corsServers.push(t)}function QC(e){const t=cn(e);return!t||t.endsWith(".arcgis.com")||Be._corsServers.includes(t)||mA(t)}function Qn(e,t,i,r){let n="Error";const o={url:i.url,requestOptions:i.requestOptions,getHeader:SA,ssl:!1};if(t instanceof I)return t.details?(t.details=R(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=o,t;if(t){const s=r&&(d=>r.headers.get(d)),a=r&&r.status,u=t.message;u&&(n=u),s&&(o.getHeader=s),o.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,o.subCode=t.subcode,o.messageCode=t.messageCode,typeof t.details=="string"?o.messages=[t.details]:o.messages=t.details,o.raw=z_ in t?t[z_]:t}return qi(t)?wt():new I(e,n,o)}async function kH(){k("host-webworker")?a1||(a1=await B(()=>import("./request.39f07b7a.js"),[],import.meta.url)):Be._abortableFetch||(Be._abortableFetch=globalThis.fetch.bind(globalThis))}async function H_(){gt||await B(()=>import("./IdentityManager.60699602.js"),[],import.meta.url)}async function FH(e){var a;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,n=i.body;let o=null,s=null;if(O5&&"HTMLFormElement"in globalThis&&(n instanceof FormData?o=n:n instanceof HTMLFormElement&&(o=new FormData(n))),typeof n=="string"&&(s=n),e.fetchOptions={cache:i.cacheBust&&!Be._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Wn.priority,redirect:"follow",signal:r},(o||s)&&(e.fetchOptions.body=o||s),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((a=i.query)==null?void 0:a.token)||(o==null?void 0:o.get("token"))),!e.hasToken&&Ne.apiKey&&L5(t)&&(i.query||(i.query={}),i.query.token=Ne.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!k5(t)&&!pn(r)){let u;i.authMode==="immediate"?(await H_(),u=await gt.getCredential(t,{signal:r}),e.credential=u):i.authMode==="no-prompt"?(await H_(),u=await gt.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=u):gt&&(u=gt.findCredential(t)),u&&(e.credentialToken=u.token,e.useSSL=!!u.ssl)}}function k5(e){return LH.some(t=>t.test(e))}async function BH(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions,n=Mv(t)||Ec(t),o=i.responseType||"json",s=n?0:i.timeout!=null?i.timeout:Wn.timeout;let a=!1;if(!n){e.useSSL&&(t=wA(t)),i.cacheBust&&r.cache==="default"&&(t=M5(t,"request.preventCache",Date.now()));let y={...i.query};e.credentialToken&&(y.token=e.credentialToken);let m=uc(y);k("esri-url-encodes-apostrophe")&&(m=m.replace(/'/g,"%27"));const g=t.length+1+m.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||g>Wn.maxUrlLength;const w=i.useProxy||!!Iv(t);if(w){const _=iH(t);v=_.path,!a&&v.length+1+g>Wn.maxUrlLength&&(a=!0),_.query&&(y={..._.query,...y})}if(r.method==="HEAD"&&(a||w)){if(a)throw g>Wn.maxUrlLength?Qn("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Qn("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw Qn("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=Us(t,y):(r.body=uc(y),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Us(t,y),w&&(e.useProxy=!0,t=`${v}?${t}`),y.token&&O5&&r.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)&&r.body.set("token",y.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!ty(t,fA())){if(mA(t))e.withCredentials=!0;else if(gt){const _=gt.findServerInfo(t);_&&_.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",RH(t)&&await PH(a?Us(t,y):t))}let u,d,h=0,f=!1;s>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},s));try{if(i.responseType==="native-request-init")d=r,d.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||VH(i.headers)||!n&&!e.useProxy&&Wn.proxyUrl&&!QC(t)){if(u=await Be._abortableFetch(t,r),e.useProxy||OH(t),i.responseType==="native")d=u;else if(r.method!=="HEAD")if(u.ok){switch(o){case"array-buffer":d=await u.arrayBuffer();break;case"blob":case"image":d=await u.blob();break;default:d=await u.text()}if(h&&(clearTimeout(h),h=0),o==="json"||o==="xml"||o==="document")if(d)switch(o){case"json":d=JSON.parse(d);break;case"xml":d=eI(d,"application/xml");break;case"document":d=eI(d,"text/html")}else d=null;if(d){if(o==="array-buffer"||o==="blob"){const y=u.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(y)&&d[o==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(d).json();m.error&&(d=m)}catch{}}o==="image"&&d instanceof Blob&&(d=await tI(URL.createObjectURL(d),e,!0))}}else d=await u.text()}else d=await tI(t,e)}catch(y){if(y.name==="AbortError")throw f?new Error("Timeout exceeded"):wt("Request canceled");if(!(!u&&y instanceof TypeError&&Wn.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||QC(t))throw y;e.redoRequest=!0,rH({proxyUrl:Wn.proxyUrl,urlPrefix:cn(t)})}finally{h&&clearTimeout(h)}return[u,d]}async function UH(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(n){i=Qn("request:interceptor",n,t)}if((r instanceof Error||r instanceof I)&&(i=Qn("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function VH(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function eI(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function jH(e){var o;let t,i;await FH(e);try{do[t,i]=await BH(e);while(!await zH(e,t,i))}catch(s){const a=Qn("request:server",s,e.params,t);throw a.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(a),a}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((o=i.user)==null?void 0:o.username)&&!mA(r)){const s=cn(r,!0);s&&Wn.trustedServers.push(s)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&NH(i.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&gt){const s=gt.findServerInfo(n.server);let a=s&&s.owningSystemUrl;if(a){a=a.replace(/\/?$/,"/sharing");const u=gt.findCredential(a,n.userId);u&&gt._getIdenticalSvcIdx(a,u)===-1&&u.resources.unshift(a)}}return{data:i,getHeader:t?s=>t.headers.get(s):SA,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function zH(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,o,s,a;if(!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[z_]=i,n;i!=null&&i.error&&(n=i.error),n&&(o=Number(n.code),s=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a&&a.toUpperCase());const u=r.authMode;if(o===403&&(s===4||n.message&&n.message.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(u!=="no-prompt"||o===498)&&$H.includes(o)&&!k5(e.params.url)&&(o!==403||!DH.includes(a)&&(s==null||s===2&&e.credentialToken))){await H_();try{const d=await gt.getCredential(e.params.url,{error:Qn("request:server",n,e.params),prompt:u!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=d,e.credentialToken=d.token,e.useSSL=e.useSSL||d.ssl,!1}catch(d){if(u==="no-prompt")return e.credential=null,e.credentialToken=null,!1;n=d}}if(n)throw n;return!0}function tI(e,t,i=!1){const r=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Wn.priority,n.src=e,MH(n,e,i,r)}Be._abortableFetch=null,Be._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const HH=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"}));function Y(e,t,i){let r,n;return t===void 0||Array.isArray(t)?(n=e,i=t,r=[void 0]):(n=t,r=Array.isArray(e)?e:[e]),(o,s)=>{const a=o.constructor.prototype;r.forEach(u=>{const d=X4(o,u,n);d.read&&typeof d.read=="object"||(d.read={}),d.read.reader=a[s],i&&(d.read.source=(d.read.source||[]).concat(i))})}}let ho=class extends U{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=me.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof me)return e;if(e!=null){const i=new me;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};l([c()],ho.prototype,"type",void 0),l([c({readOnly:!0})],ho.prototype,"cache",null),l([c({readOnly:!0})],ho.prototype,"extent",null),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ho.prototype,"hasM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ho.prototype,"hasZ",void 0),l([c({type:me,json:{write:!0}})],ho.prototype,"spatialReference",void 0),l([Y("spatialReference")],ho.prototype,"readSpatialReference",null),ho=l([S("esri.geometry.Geometry")],ho);const pr=ho,GH=Object.prototype.toString;function WH(e){const t="__accessorMetadata__"in e?Ze(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return qH.apply(this,i)}}function qH(e,t,i,r){gv(e,t).cast=r}function YH(e){return(t,i)=>{gv(t,e).cast=t[i]}}function Fe(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&GH.call(e[0])==="[object Function]"?WH(e[0]):e.length===1&&typeof e[0]=="string"?YH(e[0]):void 0}function KH(e,t,i,r){var n;return e.x=e.x+t,e.y=e.y+i,r!=null&&(e.z=((n=e.z)!=null?n:0)+r),e}function ZH(e,t){const i=e.x-t.x,r=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+n*n)}class TA{constructor(t,i,r,n){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const nt=new TA(6378137,1/298.257223563,3e5,.006694379990137799),Vs=new TA(3396190,1/169.8944472236118,23e4),Tl=new TA(1737400,0,0),JH=57.29577951308232,XH=.017453292519943;function iI(e){return e*JH}function rI(e){return e*XH}function wge(e){return Math.PI/2-2*Math.atan(Math.exp(-e/nt.radius))}function G_(e){return e.wkid!=null||e.wkt!=null}const Uw=[0,0];function l1(e,t,i,r,n){const o=e,s=n;if(s.spatialReference=i,"x"in o&&"x"in s)[s.x,s.y]=t(o.x,o.y,Uw,r);else if("xmin"in o&&"xmin"in s)[s.xmin,s.ymin]=t(o.xmin,o.ymin,Uw,r),[s.xmax,s.ymax]=t(o.xmax,o.ymax,Uw,r);else if("paths"in o&&"paths"in s||"rings"in o&&"rings"in s){const a="paths"in o?o.paths:o.rings,u=[];let d;for(let h=0;h<a.length;h++){const f=a[h];d=[],u.push(d);for(let y=0;y<f.length;y++)d.push(t(f[y][0],f[y][1],[0,0],r)),f[y].length>2&&d[y].push(f[y][2]),f[y].length>3&&d[y].push(f[y][3])}"paths"in s?s.paths=u:s.rings=u}else if("points"in o&&"points"in s){const a=o.points,u=[];for(let d=0;d<a.length;d++)u[d]=t(a[d][0],a[d][1],[0,0],r),a[d].length>2&&u[d].push(a[d][2]),a[d].length>3&&u[d].push(a[d][3]);s.points=u}return n}function R0(e,t){const i=e&&(G_(e)?e:e.spatialReference),r=t&&(G_(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!Ji(r,i)||dc(r)&&iy(i)||dc(i)&&iy(r))}function $v(e,t){if(O(e))return null;const i=e.spatialReference,r=t&&(G_(t)?t:t.spatialReference);return R0(i,r)?Ji(i,r)?R(e):dc(r)?l1(e,Id,me.WebMercator,!1,R(e)):iy(r)?l1(e,Cf,me.WGS84,!1,R(e)):null:null}function Id(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=rI(t);return i[0]=rI(e)*nt.radius,i[1]=nt.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Cf(e,t,i=[0,0],r=!1){const n=iI(e/nt.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=iI(Math.PI/2-2*Math.atan(Math.exp(-t/nt.radius))),i}function js(e,t=!1,i=R(e)){return l1(e,Id,me.WebMercator,t,i)}function Mh(e,t=!1,i=R(e)){return l1(e,Cf,me.WGS84,t,i)}var P0;const eh=[0,0];function nI(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const Tm=W.getLogger("esri.geometry.Point");let Pi=P0=class extends pr{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,r,n){let o;if(Array.isArray(e))o=e,n=t,e=o[0],t=o[1],i=o[2],r=o[3];else if(e&&typeof e=="object"){if(o=e,e=o.x!=null?o.x:o.longitude,t=o.y!=null?o.y:o.latitude,i=o.z,r=o.m,(n=o.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new me(n)),o.longitude!=null||o.latitude!=null){if(o.longitude==null)Tm.warn(".longitude=","Latitude was defined without longitude");else if(o.latitude==null)Tm.warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&n&&n.isWebMercator){const a=Id(o.longitude,o.latitude,eh);e=a[0],t=a[1]}}}else nI(i)?(n=i,i=null):nI(r)&&(n=r,r=null);const s={x:e,y:t};return s.x==null&&s.y!=null?Tm.warn(".y=","Y coordinate was defined without an X coordinate"):s.y==null&&s.x!=null&&Tm.warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(s.spatialReference=n),i!=null&&(s.z=i),r!=null&&(s.m=r),s}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return Cf(t,i,eh)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;t&&(t.isWebMercator?this._set("y",Id(i,e,eh)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return Cf(e,t,eh)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;i&&(i.isWebMercator?this._set("x",Id(e,t,eh)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new P0;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return P0.copy(e,this),this}equals(e){if(O(e))return!1;const{x:t,y:i,z:r,m:n,spatialReference:o}=this,{z:s,m:a}=e;let{x:u,y:d,spatialReference:h}=e;if(!o.equals(h))if(o.isWebMercator&&h.isWGS84)[u,d]=Id(u,d),h=o;else{if(!o.isWGS84||!h.isWebMercator)return!1;[u,d]=Cf(u,d),h=o}return t===u&&i===d&&r===s&&n===a&&o.wkid===h.wkid}offset(e,t,i){return KH(this,e,t,i)}normalize(){if(!this.spatialReference)return this;const e=to(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,n=2*r;let o;return t>r?(o=Math.ceil(Math.abs(t-r)/n),t-=o*n):t<i&&(o=Math.ceil(Math.abs(t-i)/n),t+=o*n),this._set("x",t),this}distance(e){return ZH(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};l([c({readOnly:!0})],Pi.prototype,"cache",null),l([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Pi.prototype,"hasM",null),l([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Pi.prototype,"hasZ",null),l([c({type:Number})],Pi.prototype,"latitude",null),l([c({type:Number})],Pi.prototype,"longitude",null),l([c({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Fe(e=>isNaN(e)?e:on(e))],Pi.prototype,"x",void 0),l([X("x")],Pi.prototype,"writeX",null),l([Y("x")],Pi.prototype,"readX",null),l([c({type:Number,json:{write:!0}})],Pi.prototype,"y",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Pi.prototype,"z",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Pi.prototype,"m",void 0),Pi=P0=l([S("esri.geometry.Point")],Pi),Pi.prototype.toJSON.isDefaultToJSON=!0;const le=Pi,Vw=[0,0];function Dv(e,t){return!!T(t)&&ki(e,t.x,t.y,t.z)}function bge(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!rp(e,i))return!1;return!0}function QH(e,t){const{xmin:i,ymin:r,zmin:n,xmax:o,ymax:s,zmax:a}=t;return e.hasZ&&t.hasZ?ki(e,i,r,n)&&ki(e,i,s,n)&&ki(e,o,s,n)&&ki(e,o,r,n)&&ki(e,i,r,a)&&ki(e,i,s,a)&&ki(e,o,s,a)&&ki(e,o,r,a):ki(e,i,r)&&ki(e,i,s)&&ki(e,o,s)&&ki(e,o,r)}function rp(e,t){return ki(e,t[0],t[1])}function eG(e,t){return ki(e,t[0],t[1],t[2])}function ki(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function F5(e,t){return Vw[1]=t.y,Vw[0]=t.x,tG(e,Vw)}function tG(e,t){return B5(e.rings,t)}function B5(e,t){if(!e)return!1;if(iG(e))return oI(!1,e,t);let i=!1;for(let r=0,n=e.length;r<n;r++)i=oI(i,e[r],t);return i}function iG(e){return!Array.isArray(e[0][0])}function oI(e,t,i){const[r,n]=i;let o=e,s=0;for(let a=0,u=t.length;a<u;a++){s++,s===u&&(s=0);const[d,h]=t[a],[f,y]=t[s];(h<n&&y>=n||y<n&&h>=n)&&d+(n-h)/(y-h)*(f-d)<r&&(o=!o)}return o}function rG(e,t){return Dv(e,t)}function nG(e,t){const i=e.hasZ&&t.hasZ;let r,n,o;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(o=t.zmin,e.zmax<o)return!1}else if(o=e.zmin,t.zmax<o)return!1}return!0}function oG(e,t){const{points:i,hasZ:r}=t,n=r?eG:rp;for(const o of i)if(n(e,o))return!0;return!1}const pc=[0,0],hc=[0,0],fc=[0,0],yc=[0,0],sG=[pc,hc,fc,yc],U5=[[fc,pc],[pc,hc],[hc,yc],[yc,fc]];function aG(e,t){return lG(e,t.rings)}function lG(e,t){pc[0]=e.xmin,pc[1]=e.ymax,hc[0]=e.xmax,hc[1]=e.ymax,fc[0]=e.xmin,fc[1]=e.ymin,yc[0]=e.xmax,yc[1]=e.ymin;for(const i of sG)if(B5(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(rp(e,r))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(rp(e,o)||V5(r,o,U5))return!0;r=o}}return!1}function uG(e,t){pc[0]=e.xmin,pc[1]=e.ymax,hc[0]=e.xmax,hc[1]=e.ymax,fc[0]=e.xmin,fc[1]=e.ymin,yc[0]=e.xmax,yc[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(rp(e,n))return!0;for(let o=1;o<r.length;o++){const s=r[o];if(rp(e,s)||V5(n,s,U5))return!0;n=s}}return!1}const Jt=[0,0];function cG(e){for(let t=0;t<e.length;t++){const i=e[t];for(let n=0;n<i.length-1;n++){const o=i[n],s=i[n+1];for(let a=t+1;a<e.length;a++)for(let u=0;u<e[a].length-1;u++){const d=e[a][u],h=e[a][u+1];if(W_(o,s,d,h,Jt)&&!(Jt[0]===o[0]&&Jt[1]===o[1]||Jt[0]===d[0]&&Jt[1]===d[1]||Jt[0]===s[0]&&Jt[1]===s[1]||Jt[0]===h[0]&&Jt[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let o=r-1;n===0&&(o=r-2);const s=i[n],a=i[n+1];for(let u=n+2;u<o;u++){const d=i[u],h=i[u+1];if(W_(s,a,d,h,Jt)&&!(Jt[0]===s[0]&&Jt[1]===s[1]||Jt[0]===d[0]&&Jt[1]===d[1]||Jt[0]===a[0]&&Jt[1]===a[1]||Jt[0]===h[0]&&Jt[1]===h[1]))return!0}}}return!1}function V5(e,t,i){for(let r=0;r<i.length;r++)if(W_(e,t,i[r][0],i[r][1]))return!0;return!1}function W_(e,t,i,r,n){const[o,s]=e,[a,u]=t,[d,h]=i,[f,y]=r,m=f-d,g=o-d,v=a-o,w=y-h,_=s-h,A=u-s,M=w*v-m*A;if(M===0)return!1;const $=(m*_-w*g)/M,N=(v*_-A*g)/M;return $>=0&&$<=1&&N>=0&&N<=1&&(n&&(n[0]=o+$*(a-o),n[1]=s+$*(u-s)),!0)}function dG(e){switch(e){case"esriGeometryEnvelope":case"extent":return nG;case"esriGeometryMultipoint":case"multipoint":return oG;case"esriGeometryPoint":case"point":return rG;case"esriGeometryPolygon":case"polygon":return aG;case"esriGeometryPolyline":case"polyline":return uG}}var Wr;function pG(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function oa(e,t,i){return t==null?i:i==null?t:e(t,i)}let Vt=Wr=class extends pr{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,n){return pG(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?me.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:n==null?me.WGS84:n}}static fromBounds(e,t){return new Wr({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Wr({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new le({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Wr;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&R0(t,i)&&(e=t.isWebMercator?js(e):Mh(e,!0)),e.type==="point"?Dv(this,e):e.type==="extent"&&QH(this,e)}equals(e){if(this===e)return!0;if(O(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&R0(t,i)&&(e=t.isWebMercator?js(e):Mh(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(O(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&R0(t,i)&&(e=t.isWebMercator?js(e):Mh(e,!0)),dG(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=oa(Math.min,this.zmin,e.zmin),this.zmax=oa(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=oa(Math.min,this.mmin,e.mmin),this.mmax=oa(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:O(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=oa(Math.max,this.zmin,e.zmin),this.zmax=oa(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=oa(Math.max,this.mmin,e.mmin),this.mmax=oa(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=to(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?Mh(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new me(jo(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,n=this.xmin,o=this.xmax;return n>=i&&n<=r&&o>=i&&o<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;if(!(i=i||to(r)))return this;const n=this._getParts(i).map(a=>a.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return n;let o=!0,s=!0;return n.forEach(a=>{a.hasZ||(o=!1),a.hasM||(s=!1)}),{rings:n.map(a=>{const u=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(o){const d=(a.zmax-a.zmin)/2;for(let h=0;h<u.length;h++)u[h].push(d)}if(s){const d=(a.mmax-a.mmin)/2;for(let h=0;h<u.length;h++)u[h].push(d)}return u}),hasZ:o,hasM:s,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:o,spatialReference:s}=this,a=this.width,u=this.xmin,d=this.xmax;let h;e=e||to(s);const[f,y]=e.valid;h=this._normalizeX(this.xmin,e);const m=h.x,g=h.frameId;h=this._normalizeX(this.xmax,e);const v=h.x,w=h.frameId,_=m===v&&a>0;if(a>2*y){const A=new Wr(u<d?m:v,n,y,o,s),M=new Wr(f,n,u<d?v:m,o,s),$=new Wr(0,n,y,o,s),N=new Wr(f,n,0,o,s),D=[],V=[];A.contains($)&&D.push(g),A.contains(N)&&V.push(g),M.contains($)&&D.push(w),M.contains(N)&&V.push(w);for(let G=g+1;G<w;G++)D.push(G),V.push(G);t.push({extent:A,frameIds:[g]},{extent:M,frameIds:[w]},{extent:$,frameIds:D},{extent:N,frameIds:V})}else m>v||_?t.push({extent:new Wr(m,n,y,o,s),frameIds:[g]},{extent:new Wr(f,n,v,o,s),frameIds:[w]}):t.push({extent:new Wr(m,n,v,o,s),frameIds:[g]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let o=0;o<t.length;o++)t[o].extent.set(n)}return t}_normalizeX(e,t){const[i,r]=t.valid,n=2*r;let o,s=0;return e>r?(o=Math.ceil(Math.abs(e-r)/n),e-=o*n,s=o):e<i&&(o=Math.ceil(Math.abs(e-i)/n),e+=o*n,s=-o),{x:e,frameId:s}}};l([c({readOnly:!0})],Vt.prototype,"cache",null),l([c({readOnly:!0})],Vt.prototype,"center",null),l([c({readOnly:!0})],Vt.prototype,"extent",null),l([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Vt.prototype,"hasM",null),l([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Vt.prototype,"hasZ",null),l([c({readOnly:!0})],Vt.prototype,"height",null),l([c({readOnly:!0})],Vt.prototype,"width",null),l([c({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Vt.prototype,"xmin",void 0),l([c({type:Number,json:{write:!0}})],Vt.prototype,"ymin",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Vt.prototype,"mmin",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Vt.prototype,"zmin",void 0),l([c({type:Number,json:{write:!0}})],Vt.prototype,"xmax",void 0),l([c({type:Number,json:{write:!0}})],Vt.prototype,"ymax",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Vt.prototype,"mmax",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Vt.prototype,"zmax",void 0),Vt=Wr=l([S("esri.geometry.Extent")],Vt),Vt.prototype.toJSON.isDefaultToJSON=!0;const Oe=Vt;let If;var i4,r4,n4;const jw=(n4=(i4=globalThis.esriConfig)==null?void 0:i4.locale)!=null?n4:(r4=globalThis.dojoConfig)==null?void 0:r4.locale;function j5(){var e,t;return(t=jw!=null?jw:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function Lr(){return If===void 0&&(If=j5()),If}const Mf=[];function z5(e){return Mf.push(e),{remove(){Mf.splice(Mf.indexOf(e),1)}}}const q_=[];function EA(e){return q_.push(e),{remove(){Mf.splice(q_.indexOf(e),1)}}}function hG(){const e=j5();If!==e&&(If=e,[...q_].forEach(t=>{t.call(null,e)}),[...Mf].forEach(t=>{t.call(null,e)}))}var o4;(o4=globalThis.addEventListener)==null||o4.call(globalThis,"languagechange",hG);class Se{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=i,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,o)=>{const s=this.toJSON(r);s!==void 0&&dr(o,s,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const i=this.apiToJSON[t];return this.options.useNumericKeys?+i:i}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}}function yi(){return function(e,t){return new Se(e,{ignoreUnknown:!0,...t})}}var Y_;const fG=new Se({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let qr=Y_=class extends se{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new Y_({categories:this.categories?R(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,r;if(this.categories&&(i=this.categories.map(s=>Array.isArray(s)?JSON.stringify(s):s)),this.extent){const s=$v(this.extent,me.WGS84);T(s)&&(r=`${s.xmin},${s.ymin},${s.xmax},${s.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const o={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map(s=>fG.toJSON(s.trim())).join(","),o.sortOrder=this.sortOrder),{query:{...t,...o}}}};l([c()],qr.prototype,"categories",void 0),l([c()],qr.prototype,"disableExtraQuery",void 0),l([c({type:Oe})],qr.prototype,"extent",void 0),l([c()],qr.prototype,"filter",void 0),l([c()],qr.prototype,"num",void 0),l([c()],qr.prototype,"query",void 0),l([c()],qr.prototype,"sortField",void 0),l([c()],qr.prototype,"sortOrder",null),l([c()],qr.prototype,"start",void 0),qr=Y_=l([S("esri.portal.PortalQueryParams")],qr);const Ds=qr;let Gl=class extends se{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};l([c()],Gl.prototype,"nextQueryParams",void 0),l([c()],Gl.prototype,"queryParams",void 0),l([c()],Gl.prototype,"results",void 0),l([c()],Gl.prototype,"total",void 0),Gl=l([S("esri.portal.PortalQueryResult")],Gl);const yG=Gl;let cs=class extends U{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new I("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};l([c({type:Date})],cs.prototype,"created",void 0),l([c()],cs.prototype,"id",void 0),l([c()],cs.prototype,"portal",void 0),l([c()],cs.prototype,"title",void 0),l([c({readOnly:!0})],cs.prototype,"url",null),l([c()],cs.prototype,"username",void 0),cs=l([S("esri.portal.PortalFolder")],cs);const mG=cs;let jt=class extends U{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new I("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=Ze(Ds,e);return parseFloat(this.portal.currentVersion)>5?(i=i||new Ds,this.portal._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new Ds,i.query="group:"+this.id+(i.query?" "+i.query:""),this.portal.queryItems(i,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(i=>{const r=i.contentCategorySetsGroupQuery;if(r){const n=new Ds;return n.disableExtraQuery=!0,n.num=1,n.query=r,this.portal.queryGroups(n,t)}throw new I("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const r=i.results[0],n=new Ds;return n.num=1,n.query=`typekeywords:"${e}"`,r.queryItems(n,t)}throw new I("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(r=>{const n=r&&r.categorySchema;return n&&n.length?n:[]}):[])}};l([c()],jt.prototype,"access",void 0),l([c({type:Date})],jt.prototype,"created",void 0),l([c()],jt.prototype,"description",void 0),l([c()],jt.prototype,"id",void 0),l([c()],jt.prototype,"isInvitationOnly",void 0),l([c({type:Date})],jt.prototype,"modified",void 0),l([c()],jt.prototype,"owner",void 0),l([c()],jt.prototype,"portal",void 0),l([c()],jt.prototype,"snippet",void 0),l([c()],jt.prototype,"sortField",void 0),l([c()],jt.prototype,"sortOrder",void 0),l([c()],jt.prototype,"tags",void 0),l([c()],jt.prototype,"thumbnail",void 0),l([c({readOnly:!0})],jt.prototype,"thumbnailUrl",null),l([c()],jt.prototype,"title",void 0),l([c({readOnly:!0})],jt.prototype,"url",null),jt=l([S("esri.portal.PortalGroup")],jt);const K_=jt,gG=Object.freeze(Object.defineProperty({__proto__:null,default:K_},Symbol.toStringTag,{value:"Module"}));var Z_;let tt=Z_=class extends U{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let o=this.userContentUrl;return r&&(o+="/"+(typeof r=="string"?r:r.id)),this.portal._request(o+"/addItem",n).then(s=>(t.id=s.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal._request(t,r).then(()=>{e.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const n=mG.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=K_.fromJSON(i);return r.portal=this.portal,r}):[],t})}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),B(()=>Promise.resolve().then(()=>H5),void 0,import.meta.url).then(({default:r})=>{t=r;const n={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:n})}).then(r=>{let n;return r&&r.items?(n=r.items.map(o=>{const s=t.fromJSON(o);return s.portal=this.portal,s}),Promise.all(n.map(o=>o.load())).catch(o=>o).then(()=>({items:n,nextStart:r.nextStart,total:r.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new K_({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new I("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new I("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new Z_;return t.sourceJSON=e,t.read(e),t}};l([c()],tt.prototype,"access",void 0),l([c({type:Date})],tt.prototype,"created",void 0),l([c()],tt.prototype,"culture",void 0),l([c()],tt.prototype,"description",void 0),l([c()],tt.prototype,"email",void 0),l([c()],tt.prototype,"favGroupId",void 0),l([c()],tt.prototype,"fullName",void 0),l([c({type:Date})],tt.prototype,"modified",void 0),l([c()],tt.prototype,"orgId",void 0),l([c()],tt.prototype,"portal",void 0),l([c()],tt.prototype,"preferredView",void 0),l([c()],tt.prototype,"privileges",void 0),l([c()],tt.prototype,"region",void 0),l([c()],tt.prototype,"role",void 0),l([c()],tt.prototype,"roleId",void 0),l([c()],tt.prototype,"sourceJSON",void 0),l([c()],tt.prototype,"thumbnail",void 0),l([c({readOnly:!0})],tt.prototype,"thumbnailUrl",null),l([c()],tt.prototype,"units",void 0),l([c({readOnly:!0})],tt.prototype,"userContentUrl",null),l([c({readOnly:!0})],tt.prototype,"url",null),l([c()],tt.prototype,"username",void 0),l([c()],tt.prototype,"userType",void 0),tt=Z_=l([S("esri.portal.PortalUser")],tt);const AA=tt,vG=Object.freeze(Object.defineProperty({__proto__:null,default:AA},Symbol.toStringTag,{value:"Module"}));var Sr;let zw;const sI={PortalGroup:()=>B(()=>Promise.resolve().then(()=>gG),void 0,import.meta.url),PortalItem:()=>B(()=>Promise.resolve().then(()=>H5),void 0,import.meta.url),PortalUser:()=>B(()=>Promise.resolve().then(()=>vG),void 0,import.meta.url)};let K=Sr=class extends By(Ho){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ne.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Ne.request.trustedServers.includes(t)||Ne.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=AA.fromJSON(e),t.portal=this),t}load(e){const t=B(()=>Promise.resolve().then(()=>LG),void 0,import.meta.url).then(({default:i})=>{bt(e),zw=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(gt){const r=gt;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==Sr.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await B(()=>import("./ElevationLayer.94f17214.js"),[],import.meta.url)).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new Ds;return i.query=e||(Ne.apiKey&&L5(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const n=r.results[0];return i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc",n.queryItems(i,t)}return null}).then(r=>{let n;return n=r&&r.total?r.results.filter(o=>o.type==="Web Map").map(o=>new zw({portalItem:o})):[],n})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):pn(e)?Promise.reject(wt()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new Ds;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const n of t)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(n=>n.results)}return pn(e)?Promise.reject(wt()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Lr();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Lr();return this._request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return Sr._default&&!Sr._default.destroyed||(Sr._default=new Sr),Sr._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new I("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Sr({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new I("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new I("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Lr().toLowerCase()},...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this._request(r,n)}_queryPortal(e,t,i,r){const n=Ze(Ds,t),o=s=>this._request(this.restUrl+e,{...n.toRequestOptions(this),...r}).then(a=>{const u=n.clone();return u.start=a.nextStart,new yG({nextQueryParams:u,queryParams:n,total:a.total,results:Sr._resultsToTypedArray(s,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(u=>typeof u.when=="function"?u.when():a)).then(()=>a,u=>(fl(u),a)));return i&&sI[i]?sI[i]().then(({default:s})=>(bt(r),o(s))):o()}_signIn(){if(this.authMode===Sr.AUTH_MODE_ANONYMOUS)return Promise.reject(new I("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return gt?gt.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(r=>{const n=Sr._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(o=>typeof o.when=="function"?o.when():r)).then(()=>n,()=>n)})}_readBasemap(e){if(e){const t=zw.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===Sr.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:o=!1,method:s="auto",responseType:a="json",signal:u}=t,d={authMode:r,body:n,cacheBust:o,method:s,query:i,responseType:a,timeout:0,signal:u};return Be(this._normalizeSSL(e),d).then(h=>h.data)}static _resultsToTypedArray(e,t,i,r){let n;if(i){const o=T(r)?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(n=n.map(s=>{const a=Object.assign(e?e.fromJSON(s):s,t);return typeof a.load=="function"&&a.load(o),a}))}else n=[];return n}};K.AUTH_MODE_ANONYMOUS="anonymous",K.AUTH_MODE_AUTO="auto",K.AUTH_MODE_IMMEDIATE="immediate",l([c()],K.prototype,"access",void 0),l([c()],K.prototype,"allSSL",void 0),l([c()],K.prototype,"authMode",void 0),l([c()],K.prototype,"authorizedCrossOriginDomains",void 0),l([Y("authorizedCrossOriginDomains")],K.prototype,"readAuthorizedCrossOriginDomains",null),l([c()],K.prototype,"basemapGalleryGroupQuery",void 0),l([c()],K.prototype,"bingKey",void 0),l([c()],K.prototype,"canListApps",void 0),l([c()],K.prototype,"canListData",void 0),l([c()],K.prototype,"canListPreProvisionedItems",void 0),l([c()],K.prototype,"canProvisionDirectPurchase",void 0),l([c()],K.prototype,"canSearchPublic",void 0),l([c()],K.prototype,"canShareBingPublic",void 0),l([c()],K.prototype,"canSharePublic",void 0),l([c()],K.prototype,"canSignInArcGIS",void 0),l([c()],K.prototype,"canSignInIDP",void 0),l([c()],K.prototype,"colorSetsGroupQuery",void 0),l([c()],K.prototype,"commentsEnabled",void 0),l([c({type:Date})],K.prototype,"created",void 0),l([c()],K.prototype,"credential",void 0),l([c()],K.prototype,"culture",void 0),l([c()],K.prototype,"currentVersion",void 0),l([c()],K.prototype,"customBaseUrl",void 0),l([c()],K.prototype,"defaultBasemap",void 0),l([Y("defaultBasemap")],K.prototype,"readDefaultBasemap",null),l([c()],K.prototype,"defaultDevBasemap",void 0),l([Y("defaultDevBasemap")],K.prototype,"readDefaultDevBasemap",null),l([c({type:Oe})],K.prototype,"defaultExtent",void 0),l([c()],K.prototype,"defaultVectorBasemap",void 0),l([Y("defaultVectorBasemap")],K.prototype,"readDefaultVectorBasemap",null),l([c()],K.prototype,"description",void 0),l([c()],K.prototype,"devBasemapGalleryGroupQuery",void 0),l([c()],K.prototype,"eueiEnabled",void 0),l([c({readOnly:!0})],K.prototype,"extraQuery",null),l([c()],K.prototype,"featuredGroups",void 0),l([c()],K.prototype,"featuredItemsGroupQuery",void 0),l([c()],K.prototype,"galleryTemplatesGroupQuery",void 0),l([c()],K.prototype,"livingAtlasGroupQuery",void 0),l([c()],K.prototype,"hasCategorySchema",void 0),l([c()],K.prototype,"helpBase",void 0),l([c()],K.prototype,"helperServices",void 0),l([c()],K.prototype,"helpMap",void 0),l([c()],K.prototype,"homePageFeaturedContent",void 0),l([c()],K.prototype,"homePageFeaturedContentCount",void 0),l([c()],K.prototype,"httpPort",void 0),l([c()],K.prototype,"httpsPort",void 0),l([c()],K.prototype,"id",void 0),l([c()],K.prototype,"ipCntryCode",void 0),l([c({readOnly:!0})],K.prototype,"isOrganization",null),l([c()],K.prototype,"isPortal",void 0),l([c()],K.prototype,"isReadOnly",void 0),l([c()],K.prototype,"layerTemplatesGroupQuery",void 0),l([c()],K.prototype,"maxTokenExpirationMinutes",void 0),l([c({type:Date})],K.prototype,"modified",void 0),l([c()],K.prototype,"name",void 0),l([c()],K.prototype,"portalHostname",void 0),l([c()],K.prototype,"portalMode",void 0),l([c()],K.prototype,"portalProperties",void 0),l([c()],K.prototype,"region",void 0),l([c({readOnly:!0})],K.prototype,"restUrl",null),l([c()],K.prototype,"rotatorPanels",void 0),l([c()],K.prototype,"showHomePageDescription",void 0),l([c()],K.prototype,"sourceJSON",void 0),l([c()],K.prototype,"staticImagesUrl",void 0),l([c({json:{name:"2DStylesGroupQuery"}})],K.prototype,"stylesGroupQuery2d",void 0),l([c({json:{name:"stylesGroupQuery"}})],K.prototype,"stylesGroupQuery3d",void 0),l([c()],K.prototype,"supportsHostedServices",void 0),l([c()],K.prototype,"symbolSetsGroupQuery",void 0),l([c()],K.prototype,"templatesGroupQuery",void 0),l([c()],K.prototype,"thumbnail",void 0),l([c({readOnly:!0})],K.prototype,"thumbnailUrl",null),l([c()],K.prototype,"units",void 0),l([c()],K.prototype,"url",void 0),l([c()],K.prototype,"urlKey",void 0),l([Y("urlKey")],K.prototype,"readUrlKey",null),l([c()],K.prototype,"user",void 0),l([Y("user")],K.prototype,"readUser",null),l([c()],K.prototype,"useStandardizedQuery",void 0),l([c()],K.prototype,"useVectorBasemaps",void 0),l([c()],K.prototype,"vectorBasemapGalleryGroupQuery",void 0),K=Sr=l([S("esri.portal.Portal")],K);const Yt=K,wG=W.getLogger("esri.assets");function Ue(e){if(!Ne.assetsPath)throw wG.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new I("assets:path-not-set","config.assetsPath is not set");return Go(Ne.assetsPath,e)}const bG=W.getLogger("esri.portal.PortalItemResource");let wa=class extends se{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){T(e)&&zi(e)?bG.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(O(i))throw new I("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:p4(t,"signal")})}async update(e,t){return(await B(()=>import("./resourceUtils.844ae2dd.js"),[],import.meta.url)).addOrUpdateResource(this,"update",e,t)}hasPath(){return T(this.path)}_normalizePath(e,t){return O(e)?e:(e=e.replace(/^\/+/,""),T(t)&&zi(e)&&(e=gA(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};l([c()],wa.prototype,"portalItem",void 0),l([c({type:String,value:null})],wa.prototype,"path",null),l([Fe("path")],wa.prototype,"_castPath",null),l([c({type:String,readOnly:!0})],wa.prototype,"url",null),l([c({type:String,readOnly:!0})],wa.prototype,"itemRelativeUrl",null),wa=l([S("esri.portal.PortalItemResource")],wa);const _G=wa;let Nh=class extends se{constructor(e){super(e),this.created=null,this.rating=null}};l([c()],Nh.prototype,"created",void 0),l([c()],Nh.prototype,"rating",void 0),Nh=l([S("esri.portal.PortalRating")],Nh);const Hw=Nh;var Hc;let xe=Hc=class extends By(Ho){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return aA(Hc,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(i="Instant App"),i}readExtent(e){return e&&e.length?new Oe(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,o=!1,s=!1,a=!1,u=!1,d=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(o=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(s=t.includes("Table"),a=t.includes("Route Layer"),u=t.includes("Markup"),d=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),n=d&&s?"spatiotemporaltable":s?"table":a?"routelayer":u?"markup":d?"spatiotemporal":o?"featureshosted":h?"utilitynetwork":"features"):n=e==="map service"||e==="wms"||e==="wmts"?o||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):n=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":"maps",n?Ue(i+n+r+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const e=this.get("portal.restUrl");return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=Yt.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:T(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof Hw&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new Hw({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:R(this.applicationProxies),avgRating:this.avgRating,categories:R(this.categories),created:R(this.created),culture:this.culture,description:this.description,extent:R(this.extent),groupCategories:R(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:R(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:R(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:R(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:R(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new Hc({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then(t=>t.rating!=null?(t.created=new Date(t.created),new Hw(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Hc)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new I("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")Ec(t)?r.query={data:t}:r.query={url:Xn(t)},T(i)&&(r.query.filename=i);else{const n=new FormData;T(i)?n.append("file",t,i):n.append("file",t),r.body=n}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new I("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await B(()=>import("./resourceUtils.844ae2dd.js"),[],import.meta.url)).fetchResources(this,e,t)}async addResource(e,t,i){const r=await B(()=>import("./resourceUtils.844ae2dd.js"),[],import.meta.url);return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await B(()=>import("./resourceUtils.844ae2dd.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new I("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await B(()=>import("./resourceUtils.844ae2dd.js"),[],import.meta.url)).removeAllResources(this,e)}resourceFromPath(e){return new _G({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:R(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:R(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:R(this.typeKeywords),url:this.url};return g4(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Hc({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};l([c({type:["private","shared","org","public"]})],xe.prototype,"access",void 0),l([c()],xe.prototype,"accessInformation",void 0),l([c({type:String})],xe.prototype,"apiKey",void 0),l([c({json:{read:{source:"appProxies"}}})],xe.prototype,"applicationProxies",void 0),l([c()],xe.prototype,"avgRating",void 0),l([c()],xe.prototype,"categories",void 0),l([c({type:Date})],xe.prototype,"created",void 0),l([c()],xe.prototype,"culture",void 0),l([c()],xe.prototype,"description",void 0),l([c({readOnly:!0})],xe.prototype,"displayName",null),l([c({type:Oe})],xe.prototype,"extent",void 0),l([Y("extent")],xe.prototype,"readExtent",null),l([c()],xe.prototype,"groupCategories",void 0),l([c({readOnly:!0})],xe.prototype,"iconUrl",null),l([c()],xe.prototype,"id",void 0),l([c({readOnly:!0})],xe.prototype,"isLayer",null),l([c()],xe.prototype,"itemControl",void 0),l([c({readOnly:!0})],xe.prototype,"itemUrl",null),l([c()],xe.prototype,"licenseInfo",void 0),l([c({type:Date})],xe.prototype,"modified",void 0),l([c()],xe.prototype,"name",void 0),l([c()],xe.prototype,"numComments",void 0),l([c()],xe.prototype,"numRatings",void 0),l([c()],xe.prototype,"numViews",void 0),l([c()],xe.prototype,"owner",void 0),l([c()],xe.prototype,"ownerFolder",void 0),l([c({type:Yt})],xe.prototype,"portal",void 0),l([c()],xe.prototype,"screenshots",void 0),l([c()],xe.prototype,"size",void 0),l([c()],xe.prototype,"snippet",void 0),l([c()],xe.prototype,"sourceJSON",void 0),l([c({type:String})],xe.prototype,"spatialReference",void 0),l([c()],xe.prototype,"tags",void 0),l([c()],xe.prototype,"thumbnail",void 0),l([c({readOnly:!0})],xe.prototype,"thumbnailUrl",null),l([c()],xe.prototype,"title",void 0),l([c()],xe.prototype,"type",void 0),l([c()],xe.prototype,"typeKeywords",void 0),l([c({type:String,json:{read(e,t){var r;if(t.type!=="KML")return e;const i=(r=this.portal)==null?void 0:r.restUrl;return e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null),e}}})],xe.prototype,"url",void 0),l([c({readOnly:!0})],xe.prototype,"userItemUrl",null),xe=Hc=l([S("esri.portal.PortalItem")],xe);const u1=xe,H5=Object.freeze(Object.defineProperty({__proto__:null,default:u1},Symbol.toStringTag,{value:"Module"})),aI=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,SG={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function lI(e){var t;return(t=SG[e])!=null?t:!1}const Rh=[],Hd=new Map;function uI(e){for(const t of Hd.keys())G5(e.pattern,t)&&Hd.delete(t)}function TG(e){return Rh.includes(e)||(uI(e),Rh.unshift(e)),{remove(){const t=Rh.indexOf(e);t>-1&&(Rh.splice(t,1),uI(e))}}}async function xA(e){const t=Lr();Hd.has(e)||Hd.set(e,AG(e,t));const i=Hd.get(e);return await xG.add(i),i}function EG(e){if(!aI.test(e))return null;const[,t,i]=aI.exec(e),r=t+(i?"-"+i.toUpperCase():"");return lI(r)?r:lI(t)?t:null}async function AG(e,t){const i=[];for(const r of Rh)if(G5(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(n){i.push(n)}throw i.length?new I("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new I("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function G5(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}EA(()=>{Hd.clear()});const xG=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Ws())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function CG(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await xA("esri/t9n/basemaps");return i[e]||i[t]}const J_={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Ue("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ue("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ue("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ue("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ue("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ue("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ue("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ue("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ue("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ue("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};function CA(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function _ge(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}const IG=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),MG=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function NG(e){return e.layerContainerType==="basemap"?IG:e.layerContainerType==="operational-layers"?MG:null}function RG(e,t){if(t.restrictedWebMapWriting){const i=NG(t);return!T(i)||i.has(e.type)&&!CA(e)}return!0}function PG(e,t){if(CA(e)){const i=Ap("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&Gw(e,r)}else e.type==="stream"?Gw(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&Gw(e,t)}function Gw(e,t){"maxScale"in e&&(t.maxScale=n1(e.maxScale)),"minScale"in e&&(t.minScale=n1(e.minScale))}function $G(e,t){if(PG(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=n1(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(CA(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function cI(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new I("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(RG(e,i)){const r={};return e.write(r,i)?r:null}return T(t)&&$G(e,t=R(t)),t}var $0;let DG=0;const Ww=W.getLogger("esri.Basemap");let Yr=$0=class extends By(Ho){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+DG++,this.baseLayers=new he,this.referenceLayers=new he;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Ww.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{Ww.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",lc(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const o=cI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);T(o)&&r.push(o)}),this.referenceLayers.forEach(n=>{const o=cI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);T(o)&&(o.isReference=!0,r.push(o))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",lc(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return g5(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new $0({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=R(i);return r.url&&fn(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&fn(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;bt(e);const r=[];if(t){const n=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;r.push(CG(o).then(s=>{s&&this.read({title:s},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||r&&r.portal||null,o=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:s}=await B(()=>import("./layersCreator.501feec9.js"),["layersCreator.501feec9.js","lazyLayerLoader.d554f446.js","portalLayers.c1c1c437.js","layersLoader.71c8e16c.js","portalItemUtils.5719ecc2.js"],import.meta.url),a=[];if(bt(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const u={context:{origin:o,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},d=s(this.baseLayers,e.baseMapLayers.filter(f=>!f.isReference),u);a.push(d);const h=s(this.referenceLayers,e.baseMapLayers.filter(f=>f.isReference),u);a.push(h)}await ii(a)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),n=rt(e.itemUrl);return this._set("resourceInfo",{data:r.baseMap,context:{origin:"web-map",portal:e.portal||Yt.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Yt.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=J_[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),O4(Ww,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return $0.fromJSON(t)}return null}};l([c({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:he}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],Yr.prototype,"baseLayers",null),l([c({type:String,json:{origins:{"web-scene":{write:!0}}}})],Yr.prototype,"id",void 0),l([c({type:u1})],Yr.prototype,"portalItem",void 0),l([c()],Yr.prototype,"referenceLayers",null),l([c({readOnly:!0})],Yr.prototype,"resourceInfo",void 0),l([c({type:me})],Yr.prototype,"spatialReference",void 0),l([c()],Yr.prototype,"thumbnailUrl",void 0),l([c({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Yr.prototype,"title",void 0),l([X("title")],Yr.prototype,"writeTitle",null),Yr=$0=l([S("esri.Basemap")],Yr);const c1=Yr,LG=Object.freeze(Object.defineProperty({__proto__:null,default:c1},Symbol.toStringTag,{value:"Module"})),d1={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function W5(e){return d1[e]||d1[e.toLowerCase()]}function IA(e){var t;return(t=d1[e])!=null?t:d1[e.toLowerCase()]}function OG(e){return[...IA(e)]}function qw(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function q5(e,t,i,r=1){const n=(e%360+360)%360/360,o=i<=.5?i*(t+1):i+t-i*t,s=2*i-o;return[Math.round(255*qw(s,o,n+1/3)),Math.round(255*qw(s,o,n)),Math.round(255*qw(s,o,n-1/3)),r]}function kG(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,n=t?1:17,o=t?e.length===9:e.length===5;let s=Number("0x"+e.substr(1));if(isNaN(s))return null;const a=[0,0,0,1];let u;return o&&(u=s&r,s>>=i,a[3]=n*u/255),u=s&r,s>>=i,a[2]=n*u,u=s&r,s>>=i,a[1]=n*u,u=s&r,s>>=i,a[0]=n*u,a}function Zo(){return[0,0,0]}function FG(e){return[e[0],e[1],e[2]]}function Mp(e,t,i){return[e,t,i]}function BG(e){const t=Zo(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function UG(e,t){return new Float64Array(e,t,3)}function Y5(){return Zo()}function K5(){return Mp(1,1,1)}function Z5(){return Mp(1,0,0)}function J5(){return Mp(0,1,0)}function X5(){return Mp(0,0,1)}const VG=Y5(),Q5=K5(),jG=Z5(),zG=J5(),HG=X5();Object.freeze(Object.defineProperty({__proto__:null,create:Zo,clone:FG,fromValues:Mp,fromArray:BG,createView:UG,zeros:Y5,ones:K5,unitX:Z5,unitY:J5,unitZ:X5,ZEROS:VG,ONES:Q5,UNIT_X:jG,UNIT_Y:zG,UNIT_Z:HG},Symbol.toStringTag,{value:"Module"}));const be=1e-6,al=Math.random,GG=Math.PI/180,WG=180/Math.PI;function MA(e){return e*GG}function qG(e){return e*WG}function YG(e,t){return Math.abs(e-t)<=be*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:be,RANDOM:al,toRadian:MA,toDegree:qG,equals:YG},Symbol.toStringTag,{value:"Module"}));function NA(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function X_(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function eL(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function KG(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function tL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function iL(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function rL(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function ZG(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function JG(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function XG(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function QG(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function eW(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function tW(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function iW(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function nL(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function rW(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function oL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}function sL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function aL(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function nW(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function oW(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Q_(e,t){const i=t[0],r=t[1],n=t[2];let o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function lL(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function sW(e,t,i){const r=t[0],n=t[1],o=t[2],s=i[0],a=i[1],u=i[2];return e[0]=n*u-o*a,e[1]=o*s-r*u,e[2]=r*a-n*s,e}function aW(e,t,i,r){const n=t[0],o=t[1],s=t[2];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=s+r*(i[2]-s),e}function lW(e,t,i,r,n,o){const s=o*o,a=s*(2*o-3)+1,u=s*(o-2)+o,d=s*(o-1),h=s*(3-2*o);return e[0]=t[0]*a+i[0]*u+r[0]*d+n[0]*h,e[1]=t[1]*a+i[1]*u+r[1]*d+n[1]*h,e[2]=t[2]*a+i[2]*u+r[2]*d+n[2]*h,e}function uW(e,t,i,r,n,o){const s=1-o,a=s*s,u=o*o,d=a*s,h=3*o*a,f=3*u*s,y=u*o;return e[0]=t[0]*d+i[0]*h+r[0]*f+n[0]*y,e[1]=t[1]*d+i[1]*h+r[1]*f+n[1]*y,e[2]=t[2]*d+i[2]*h+r[2]*f+n[2]*y,e}function cW(e,t){t=t||1;const i=2*al()*Math.PI,r=2*al()-1,n=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=r*t,e}function dW(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12],e[1]=i[1]*r+i[5]*n+i[9]*o+i[13],e[2]=i[2]*r+i[6]*n+i[10]*o+i[14],e}function pW(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=r*i[0]+n*i[3]+o*i[6],e[1]=r*i[1]+n*i[4]+o*i[7],e[2]=r*i[2]+n*i[5]+o*i[8],e}function hW(e,t,i){const r=i[0],n=i[1],o=i[2],s=i[3],a=t[0],u=t[1],d=t[2];let h=n*d-o*u,f=o*a-r*d,y=r*u-n*a,m=n*y-o*f,g=o*h-r*y,v=r*f-n*h;const w=2*s;return h*=w,f*=w,y*=w,m*=2,g*=2,v*=2,e[0]=a+h+m,e[1]=u+f+g,e[2]=d+y+v,e}function fW(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0],o[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),o[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function yW(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),o[1]=n[1],o[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function mW(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),o[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),o[2]=n[2],e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function gW(e,t){X_(Em,e),X_(Am,t),Q_(Em,Em),Q_(Am,Am);const i=lL(Em,Am);return i>1?0:i<-1?Math.PI:Math.acos(i)}const Em=Zo(),Am=Zo();function vW(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function wW(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function bW(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=t[0],s=t[1],a=t[2];return Math.abs(i-o)<=be*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-s)<=be*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=be*Math.max(1,Math.abs(n),Math.abs(a))}function _W(e,t,i){const r=i[0]-t[0],n=i[1]-t[1],o=i[2]-t[2];let s=r*r+n*n+o*o;return s>0?(s=1/Math.sqrt(s),e[0]=r*s,e[1]=n*s,e[2]=o*s,e):(e[0]=0,e[1]=0,e[2]=0,e)}const SW=tL,TW=iL,EW=rL,AW=oL,xW=sL,CW=NA,IW=aL;Object.freeze(Object.defineProperty({__proto__:null,length:NA,copy:X_,set:eL,add:KG,subtract:tL,multiply:iL,divide:rL,ceil:ZG,floor:JG,abs:XG,sign:QG,min:eW,max:tW,round:iW,scale:nL,scaleAndAdd:rW,distance:oL,squaredDistance:sL,squaredLength:aL,negate:nW,inverse:oW,normalize:Q_,dot:lL,cross:sW,lerp:aW,hermite:lW,bezier:uW,random:cW,transformMat4:dW,transformMat3:pW,transformQuat:hW,rotateX:fW,rotateY:yW,rotateZ:mW,angle:gW,str:vW,exactEquals:wW,equals:bW,direction:_W,sub:SW,mul:TW,div:EW,dist:AW,sqrDist:xW,len:CW,sqrLen:IW},Symbol.toStringTag,{value:"Module"}));function MW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function NW(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function RW(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function uL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function cL(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function dL(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function PW(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function $W(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function DW(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function LW(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function OW(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function kW(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function FW(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function pL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(i*i+r*r+n*n+o*o)}function hL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return i*i+r*r+n*n+o*o}function fL(e){const t=e[0],i=e[1],r=e[2],n=e[3];return Math.sqrt(t*t+i*i+r*r+n*n)}function yL(e){const t=e[0],i=e[1],r=e[2],n=e[3];return t*t+i*i+r*r+n*n}function BW(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function UW(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function VW(e,t){const i=t[0],r=t[1],n=t[2],o=t[3];let s=i*i+r*r+n*n+o*o;return s>0&&(s=1/Math.sqrt(s),e[0]=i*s,e[1]=r*s,e[2]=n*s,e[3]=o*s),e}function jW(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function mL(e,t,i,r){const n=t[0],o=t[1],s=t[2],a=t[3];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=s+r*(i[2]-s),e[3]=a+r*(i[3]-a),e}function zW(e,t){let i,r,n,o,s,a;t=t||1;do i=2*al()-1,r=2*al()-1,s=i*i+r*r;while(s>=1);do n=2*al()-1,o=2*al()-1,a=n*n+o*o;while(a>=1);const u=Math.sqrt((1-s)/a);return e[0]=t*i,e[1]=t*r,e[2]=t*n*u,e[3]=t*o*u,e}function HW(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*s,e[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*s,e[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*s,e[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*s,e}function GW(e,t,i){const r=t[0],n=t[1],o=t[2],s=i[0],a=i[1],u=i[2],d=i[3],h=d*r+a*o-u*n,f=d*n+u*r-s*o,y=d*o+s*n-a*r,m=-s*r-a*n-u*o;return e[0]=h*d+m*-s+f*-u-y*-a,e[1]=f*d+m*-a+y*-s-h*-u,e[2]=y*d+m*-u+h*-a-f*-s,e[3]=t[3],e}function WW(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function qW(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function YW(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],s=t[0],a=t[1],u=t[2],d=t[3];return Math.abs(i-s)<=be*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-a)<=be*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-u)<=be*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-d)<=be*Math.max(1,Math.abs(o),Math.abs(d))}const KW=uL,ZW=cL,JW=dL,XW=pL,QW=hL,eq=fL,tq=yL;Object.freeze(Object.defineProperty({__proto__:null,copy:MW,set:NW,add:RW,subtract:uL,multiply:cL,divide:dL,ceil:PW,floor:$W,min:DW,max:LW,round:OW,scale:kW,scaleAndAdd:FW,distance:pL,squaredDistance:hL,length:fL,squaredLength:yL,negate:BW,inverse:UW,normalize:VW,dot:jW,lerp:mL,random:zW,transformMat4:HW,transformQuat:GW,str:WW,exactEquals:qW,equals:YW,sub:KW,mul:ZW,div:JW,dist:XW,sqrDist:QW,len:eq,sqrLen:tq},Symbol.toStringTag,{value:"Module"}));const dI=new Float32Array(1);function Sge(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function hr(e,t,i){return Math.min(Math.max(e,t),i)}function Tge(e){return(e&e-1)==0}function Ege(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Age(e,t,i){return e+(t-e)*i}function iq(e){return e*Math.PI/180}function gL(e){return 180*e/Math.PI}function xge(e){return Math.acos(hr(e,-1,1))}function vL(e){return Math.asin(hr(e,-1,1))}function Yw(e,t,i=1e-6){return isNaN(e)||isNaN(t)?!1:(e>t?e-t:t-e)<=i}function Cge(e){return wL(Math.max(-pI,Math.min(e,pI)))}function wL(e){return dI[0]=e,dI[0]}function Ige(e,t){const i=NA(e),r=vL(e[2]/i),n=Math.atan2(e[1]/i,e[0]/i);return eL(t,i,r,n),t}function Mge(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Yw(t,1)&&Yw(i,1)&&Yw(r,1))}const pI=wL(34028234663852886e22);function xm(e){return hr(sA(e),0,255)}function Cm(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class Nt{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,r,n=new Nt){return n.r=Math.round(t.r+(i.r-t.r)*r),n.g=Math.round(t.g+(i.g-t.g)*r),n.b=Math.round(t.b+(i.b-t.b)*r),n.a=t.a+(i.a-t.a)*r,n._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),o=r[1];if(o==="rgb"&&n.length===3||o==="rgba"&&n.length===4){const s=n[0];if(s.charAt(s.length-1)==="%"){const a=n.map(u=>2.56*parseFloat(u));return n.length===4&&(a[3]=parseFloat(n[3])),Nt.fromArray(a,i)}return Nt.fromArray(n.map(a=>parseFloat(a)),i)}if(o==="hsl"&&n.length===3||o==="hsla"&&n.length===4)return Nt.fromArray(q5(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(t,i=new Nt){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,n=(1<<r)-1;let o=Number("0x"+t.substr(1));return isNaN(o)?null:(["b","g","r"].forEach(s=>{const a=o&n;o>>=r,i[s]=r===4?17*a:a}),i.a=1,i)}static fromArray(t,i=new Nt){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=W5(t)?IA(t):null;return r&&Nt.fromArray(r,i)||Nt.fromRgb(t,i)||Nt.fromHex(t,i)}static fromJSON(t){return t&&new Nt([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return T(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return T(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var i,r,n,o;return typeof t=="string"?Nt.fromString(t,this):Array.isArray(t)?Nt.fromArray(t,this):(this._set((i=t.r)!=null?i:0,(r=t.g)!=null?r:0,(n=t.b)!=null?n:0,(o=t.a)!=null?o:1),t instanceof Nt||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Nt.AlphaMode.ALWAYS){const i=xm(this.r),r=xm(this.g),n=xm(this.b);return t===Nt.AlphaMode.ALWAYS||this.a!==1?[i,r,n,xm(255*this.a)]:[i,r,n]}clone(){return new Nt(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return T(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(Cm(this.r,0,255)),this.g=Math.round(Cm(this.g,0,255)),this.b=Math.round(Cm(this.b,0,255)),this.a=Cm(this.a,0,1),this}_set(t,i,r,n){this.r=t,this.g=i,this.b=r,this.a=n}}Nt.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Nt||(Nt={}));const ie=Nt;function Nge(e){}function rq(e){return()=>e}function pe(e,t={}){var n;const i=e instanceof Se?e:new Se(e,t),r={type:(n=t==null?void 0:t.ignoreUnknown)==null||n?i.apiValues:String,json:{type:i.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),c(r)}var e2;let D0=e2=class extends U{constructor(e){super(e),this.type="none"}clone(){return new e2({type:this.type})}};l([pe({none:"none",stayAbove:"stay-above"})],D0.prototype,"type",void 0),D0=e2=l([S("esri.ground.NavigationConstraint")],D0);function Lv(e){const t=sA(100*(1-e));return Math.max(0,Math.min(t,100))}function ry(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var t2;const hI=W.getLogger("esri.Ground");let ds=t2=class extends By(Ho){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new he;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&hI.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{hI.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",lc(e,this._get("layers")))}writeLayers(e,t,i,r){const n=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(o=>{if("write"in o){const s={};rq(o)().write(s,r)&&n.push(s)}else r&&r.messages&&r.messages.push(new I("layer:unsupported",`Layers (${o.title}, ${o.id}) of type '${o.declaredClass}' cannot be persisted in the ground`,{layer:o}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return g5(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await B(()=>import("./ElevationQuery.d3dfcf6a.js"),[],import.meta.url);bt(t);const r=new i,n=this.layers.filter(fI).toArray();return r.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await B(()=>import("./ElevationQuery.d3dfcf6a.js"),[],import.meta.url);bt(t);const r=new i,n=this.layers.filter(fI).toArray();return r.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:R(this.surfaceColor),navigationConstraint:R(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new t2({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",n=t&&t.portal||null,o=t&&t.url||null;return B(()=>import("./layersCreator.501feec9.js"),["layersCreator.501feec9.js","lazyLayerLoader.d554f446.js","portalLayers.c1c1c437.js","layersLoader.71c8e16c.js","portalItemUtils.5719ecc2.js"],import.meta.url).then(({populateOperationalLayers:s})=>{bt(i);const a=[];if(e.layers&&Array.isArray(e.layers)){const u={context:{origin:r,url:o,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(s(this.layers,e.layers,u))}return ii(a)}).then(()=>{})}};function nq(e){return e&&"createElevationSampler"in e}function fI(e){return e.type==="elevation"||nq(e)}l([c({json:{read:!1}})],ds.prototype,"layers",null),l([X("layers")],ds.prototype,"writeLayers",null),l([c({readOnly:!0})],ds.prototype,"resourceInfo",void 0),l([c({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Qe,read:{reader:ry,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Lv(e)},target:"transparency"}}})],ds.prototype,"opacity",void 0),l([c({type:ie,json:{type:[Qe],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],ds.prototype,"surfaceColor",void 0),l([c({type:D0,json:{write:!0}})],ds.prototype,"navigationConstraint",void 0),ds=t2=l([S("esri.Ground")],ds);const p1=ds;let L0=class extends se{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!he.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||he.isCollection(e)?e.forEach(r=>this._isHandle(r)&&i.push(r)):i.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(i=>i.forEach(e));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||he.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let i=0;i<t.length;i++)t[i].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};l([c({readOnly:!0})],L0.prototype,"size",null),L0=l([S("esri.core.Handles")],L0);const mi=L0;function q(e,t,i={}){return RA(e,t,i,bL)}function yn(e,t,i={}){return RA(e,t,i,_L)}function RA(e,t,i={},r){let n=null;const o=i.once?(s,a)=>{r(s)&&($r(n),t(s,a))}:(s,a)=>{r(s)&&t(s,a)};if(n=Gj(e,o,i.sync,i.equals),i.initial){const s=e();o(s,s)}return n}function El(e,t,i,r={}){let n=null,o=null,s=null;function a(){var h;n&&o&&(o.remove(),(h=r.onListenerRemove)==null||h.call(r,n),n=null,o=null)}function u(h){r.once&&r.once&&$r(s),i(h)}const d=q(e,(h,f)=>{var y;a(),wv(h)&&(n=h,o=bv(h,t,u),(y=r.onListenerAdd)==null||y.call(r,h))},{sync:r.sync,initial:!0});return s=Ep(()=>{d.remove(),a()}),s}function ny(e,t){return oq(e,_L,t)}function oq(e,t,i){if(pn(i))return Promise.reject(wt());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let n=null;function o(){n=$r(n)}return new Promise((s,a)=>{n=mv([hn(i,()=>{o(),a(wt())}),RA(e,u=>{o(),s(u)},{sync:!1,once:!0},t!=null?t:bL)])})}function bL(e){return!0}function _L(e){return!!e}const np={sync:!0},ze={initial:!0},Ka={sync:!0,initial:!0};let Gd=class extends se{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new mi,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,q)}addWhen(e,t,i={}){return this._installWatch(e,t,i,yn)}addOnCollectionChange(e,t,{initial:i=!1,final:r=!1}={}){const n=++this.handleId;return this.handles.add([El(e,"after-changes",this._createSyncUpdatingCallback(),np),El(e,"change",t,{onListenerAdd:i?o=>t({added:o.toArray(),removed:[]}):void 0,onListenerRemove:r?o=>t({added:[],removed:o.toArray()}):void 0})],n),{remove:()=>this.handles.remove(n)}}addPromise(e){if(O(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(Im)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const n=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,n);const o=r(e,t,i);return this.handles.add(o,n),{remove:()=>this.handles.remove(n)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=q(e,i,{sync:!0,equals:()=>!1});return this.handles.add(r,t),r}_createSyncUpdatingCallback(){return()=>{this.handles.remove(Im),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(xp(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(Im))}),Im)}}};l([c({readOnly:!0})],Gd.prototype,"updating",void 0),Gd=l([S("esri.core.support.WatchUpdatingTracking")],Gd);const Im=-42;var yI;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(yI||(yI={}));const Ml=e=>{let t=class extends e{destroy(){var i,r;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(r=this._get("updatingHandles"))==null||r.destroy())}get handles(){return this._get("handles")||new mi}get updatingHandles(){return this._get("updatingHandles")||new Gd}};return l([c({readOnly:!0})],t.prototype,"handles",null),l([c({readOnly:!0})],t.prototype,"updatingHandles",null),t=l([S("esri.core.HandleOwner")],t),t};let oy=class extends Ml(se){};oy=l([S("esri.core.HandleOwner")],oy);let Gc=class extends Ml(he){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(z4(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=T(this.getCollections)?this.getCollections():null;if(O(e))return void this.removeAll();let t=0;for(const i of e)T(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new he(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of t)if(r){if(i(r)){const n=this.indexOf(r,e);n>=0?n!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(r);if(Array.isArray(n))for(const o of n)e=this._processCollection(e,o);else e=this._processCollection(e,n)}}return e}};l([c()],Gc.prototype,"getCollections",void 0),l([c()],Gc.prototype,"getChildrenFunction",void 0),l([c()],Gc.prototype,"itemFilterFunction",void 0),Gc=l([S("esri.core.CollectionFlattener")],Gc);const op=Gc;function sq(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&((t=e==null?void 0:e.capabilities)==null?void 0:t.operations)&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const mI=W.getLogger("esri.support.basemapUtils");function aq(){return{}}function lq(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function uq(e,t){let i;if(typeof e=="string"){if(!(e in J_)){const r=Object.entries(J_).filter(([n,o])=>Ne.apiKey&&!o.classic||!Ne.apiKey&&o.classic&&!o.deprecated).map(([n])=>`"${n}"`).join(", ");return mI.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=c1.fromId(e),t&&(t[e]=i))}else i=Ze(c1,e);return i!=null&&i.destroyed&&(mI.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function cq(e){return new op({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}})}const dq=W.getLogger("esri.support.groundUtils"),gI={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function pq(e){let t=null;if(typeof e=="string")if(e in gI){const i=gI[e];t=new p1({resourceInfo:{data:{layers:[i]}}})}else dq.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Ze(p1,e);return t}function sp(e,t,i=!1){let{hasM:r,hasZ:n}=e;Array.isArray(t)?t.length!==4||r||n?t.length===3&&i&&!r?(n=!0,r=!1):t.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=r}var i2;function vI(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function hq(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let ba=i2=class extends pr{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):hq(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Oe,i=this.hasZ,r=this.hasM,n=i?3:2,o=e[0],s=vI(Math.min),a=vI(Math.max);let u,d,h,f,[y,m]=o,[g,v]=o;for(let w=0,_=e.length;w<_;w++){const A=e[w],[M,$]=A;if(y=s(y,M),m=s(m,$),g=a(g,M),v=a(v,$),i&&A.length>2){const N=A[2];u=s(u,N),h=a(h,N)}if(r&&A.length>n){const N=A[n];d=s(d,N),f=a(f,N)}}return t.xmin=y,t.ymin=m,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,i?(t.zmin=u,t.zmax=h):(t.zmin=null,t.zmax=null),r?(t.mmin=d,t.mmax=f):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=R(this.points)}addPoint(e){return sp(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:R(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new i2(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new le(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new le(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(sp(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};l([c({readOnly:!0})],ba.prototype,"cache",null),l([c()],ba.prototype,"extent",null),l([c({type:[[Number]],json:{write:{isRequired:!0}}})],ba.prototype,"points",void 0),l([X("points")],ba.prototype,"writePoints",null),ba=i2=l([S("esri.geometry.Multipoint")],ba),ba.prototype.toJSON.isDefaultToJSON=!0;const Np=ba;function fq(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function yq(e,t,i){const r=e[0]+i*(t[0]-e[0]),n=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,n,e[2]+i*(t[2]-e[2])]:[r,n]}function mq(e,t,i,r){const[n,o]=t,[s,a]=i[r],[u,d]=i[r+1],h=u-s,f=d-a,y=h*h+f*f,m=(n-s)*h+(o-a)*f,g=Math.min(1,Math.max(0,m/y));return e[0]=s+h*g,e[1]=a+f*g,e}function gq(e,t){return yq(e,t,.5)}function PA(e,t,i){const r=e.length;let n=0,o=0,s=0;for(let a=0;a<r;a++){const u=e[a],d=e[(a+1)%r];let h=2;n+=u[0]*d[1]-d[0]*u[1],u.length>2&&d.length>2&&i&&(o+=u[0]*d[2]-d[0]*u[2],h=3),u.length>h&&d.length>h&&t&&(s+=u[0]*d[h]-d[0]*u[h])}return n<=0&&o<=0&&s<=0}function Rge(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!PA(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function Pge(e){if("rings"in e)for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]])}function $ge(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function vq(e){return e?wq(e.rings,e.hasZ):null}function wq(e,t){if(!e||!e.length)return null;const i=[],r=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let o=0,s=e.length;o<s;o++){const a=bq(e[o],t,n);a&&r.push(a)}if(r.sort((o,s)=>{let a=o[2]-s[2];return a===0&&t&&(a=o[4]-s[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const o=e[0]&&e[0].length?_q(e[0],t):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function bq(e,t,i){let r=0,n=0,o=0,s=0,a=0;const u=e.length?e[0][0]:0,d=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let y=0;y<e.length;y++){const m=e[y],g=e[(y+1)%e.length],[v,w,_]=m,A=v-u,M=w-d,$=t?_-h:void 0,[N,D,V]=g,G=N-u,Z=D-d,ee=t?V-h:void 0,re=A*Z-G*M;if(s+=re,r+=(A+G)*re,n+=(M+Z)*re,t&&m.length>2&&g.length>2){const ue=A*ee-G*$;o+=($+ee)*ue,a+=ue}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),w<i[2]&&(i[2]=w),w>i[3]&&(i[3]=w),t&&(_<i[4]&&(i[4]=_),_>i[5]&&(i[5]=_))}if(s>0&&(s*=-1),a>0&&(a*=-1),!s)return null;s*=.5,a*=.5;const f=[r/(6*s)+u,n/(6*s)+d,s];return t&&(i[4]===i[5]||a===0?(f[3]=(i[4]+i[5])/2,f[4]=0):(f[3]=o/(6*a)+h,f[4]=a)),f}function _q(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let n=0,o=0,s=0,a=0;for(let u=0,d=e.length;u<d-1;u++){const h=e[u],f=e[u+1];if(h&&f){i[0]=h[0],i[1]=h[1],r[0]=f[0],r[1]=f[1],t&&h.length>2&&f.length>2&&(i[2]=h[2],r[2]=f[2]);const y=fq(i,r);if(y){n+=y;const m=gq(h,f);o+=y*m[0],s+=y*m[1],t&&m.length>2&&(a+=y*m[2])}}}return n>0?t?[o/n,s/n,a/n]:[o/n,s/n]:e.length?e[0]:null}function SL(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function TL(e){return e.points!==void 0}function EL(e){return e.x!==void 0&&e.y!==void 0}function AL(e){return e.paths!==void 0}function xL(e){return e.rings!==void 0}function CL(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}const ll=CL(Math.min),ul=CL(Math.max);function Dge(e,t){return AL(t)?ap(e,t.paths,!1,!1):xL(t)?ap(e,t.rings,!1,!1):TL(t)?$A(e,t.points,!1,!1,!1,!1):SL(t)?IL(e,t):(EL(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function Lge(e,t){return AL(t)?ap(e,t.paths,!0,!1):xL(t)?ap(e,t.rings,!0,!1):TL(t)?$A(e,t.points,!0,!1,!0,!1):SL(t)?IL(e,t,!0,!1,!0,!1):(EL(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function ap(e,t,i,r){const n=i?3:2;if(!t.length||!t[0].length)return null;let o,s,a,u,[d,h]=t[0][0],[f,y]=t[0][0];for(let m=0;m<t.length;m++){const g=t[m];for(let v=0;v<g.length;v++){const w=g[v],[_,A]=w;if(d=ll(d,_),h=ll(h,A),f=ul(f,_),y=ul(y,A),i&&w.length>2){const M=w[2];o=ll(o,M),s=ul(s,M)}if(r&&w.length>n){const M=w[n];a=ll(o,M),u=ul(s,M)}}}return i?r?(e[0]=d,e[1]=h,e[2]=o,e[3]=a,e[4]=f,e[5]=y,e[6]=s,e[7]=u,e.length=8,e):(e[0]=d,e[1]=h,e[2]=o,e[3]=f,e[4]=y,e[5]=s,e.length=6,e):r?(e[0]=d,e[1]=h,e[2]=a,e[3]=f,e[4]=y,e[5]=u,e.length=6,e):(e[0]=d,e[1]=h,e[2]=f,e[3]=y,e.length=4,e)}function IL(e,t,i,r,n,o){const s=t.xmin,a=t.xmax,u=t.ymin,d=t.ymax;let h=t.zmin,f=t.zmax,y=t.mmin,m=t.mmax;return n?(h=h||0,f=f||0,o?(y=y||0,m=m||0,e[0]=s,e[1]=u,e[2]=h,e[3]=y,e[4]=a,e[5]=d,e[6]=f,e[7]=m,e):(e[0]=s,e[1]=u,e[2]=h,e[3]=a,e[4]=d,e[5]=f,e)):o?(y=y||0,m=m||0,e[0]=s,e[1]=u,e[2]=y,e[3]=a,e[4]=d,e[5]=m,e):(e[0]=s,e[1]=u,e[2]=a,e[3]=d,e)}function $A(e,t,i,r,n,o){const s=i?3:2,a=r&&o,u=i&&n;if(!t.length||!t[0].length)return null;let d,h,f,y,[m,g]=t[0],[v,w]=t[0];for(let _=0;_<t.length;_++){const A=t[_],[M,$]=A;if(m=ll(m,M),g=ll(g,$),v=ul(v,M),w=ul(w,$),u&&A.length>2){const N=A[2];d=ll(d,N),h=ul(h,N)}if(a&&A.length>s){const N=A[s];f=ll(d,N),y=ul(h,N)}}return n?(d=d||0,h=h||0,o?(f=f||0,y=y||0,e[0]=m,e[1]=g,e[2]=d,e[3]=f,e[4]=v,e[5]=w,e[6]=h,e[7]=y,e):(e[0]=m,e[1]=g,e[2]=d,e[3]=v,e[4]=w,e[5]=h,e)):o?(f=f||0,y=y||0,e[0]=m,e[1]=g,e[2]=f,e[3]=v,e[4]=w,e[5]=y,e):(e[0]=m,e[1]=g,e[2]=v,e[3]=w,e)}function Sq(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Tq(e){return e.points!==void 0}function Eq(e){return e.x!==void 0&&e.y!==void 0}function Aq(e){return e.paths!==void 0}function xq(e){return e.rings!==void 0}const DA=[];function ML(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function NL(e,t,i,r,n,o){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:n,zmax:o}}function RL(e,t,i,r,n,o){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:n,mmax:o}}function PL(e,t,i,r,n,o,s,a){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:n,ymax:o,zmax:s,mmax:a}}function LA(e,t=!1,i=!1){return t?i?PL(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):NL(e[0],e[1],e[2],e[3],e[4],e[5]):i?RL(e[0],e[1],e[2],e[3],e[4],e[5]):ML(e[0],e[1],e[2],e[3])}function Oge(e){return e?Sq(e)?e:Eq(e)?Iq(e):xq(e)?$L(e):Aq(e)?DL(e):Tq(e)?Cq(e):null:null}function Cq(e){const{hasZ:t,hasM:i,points:r}=e;return LA($A(DA,r,t,i),t,i)}function Iq(e){const{x:t,y:i,z:r,m:n}=e,o=n!=null;return r!=null?o?PL(t,i,r,n,t,i,r,n):NL(t,i,r,t,i,r):o?RL(t,i,n,t,i,n):ML(t,i,t,i)}function $L(e){const{hasZ:t,hasM:i,rings:r}=e,n=ap(DA,r,t,i);return n?LA(n,t,i):null}function DL(e){const{hasZ:t,hasM:i,paths:r}=e,n=ap(DA,r,t,i);return n?LA(n,t,i):null}var O0;function wI(e){return!Array.isArray(e[0])}let fo=O0=class extends pr{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,n=!1;for(const s of t)s.hasZ&&(r=!0),s.hasM&&(n=!0);const o={rings:t.map(s=>{const a=[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]];if(r&&s.hasZ){const u=s.zmin+.5*(s.zmax-s.zmin);for(let d=0;d<a.length;d++)a[d].push(u)}if(n&&s.hasM){const u=s.mmin+.5*(s.mmax-s.mmin);for(let d=0;d<a.length;d++)a[d].push(u)}return a}),spatialReference:i};return r&&(o.hasZ=!0),n&&(o.hasM=!0),new O0(o)}normalizeCtorArgs(e,t){let i,r,n=null,o=null;return e&&!Array.isArray(e)?(n=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||me.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),o=n[0]&&n[0][0],o&&(i===void 0&&r===void 0?(i=o.length>2,r=o.length>3):i===void 0?i=r?o.length>3:o.length>2:r===void 0&&(r=i?o.length>3:o.length>2)),{rings:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=vq(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new le;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=$L(this);if(!t)return null;const i=new Oe(t);return i.spatialReference=e,i}get isSelfIntersecting(){return cG(this.rings)}writeRings(e,t){t.rings=R(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(wI(e)){const r=[];for(let n=0,o=e.length;n<o;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new O0;return e.spatialReference=this.spatialReference,e.rings=R(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(O(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(T(t)!==T(i)||T(t)&&T(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([n,o,s,a],[u,d,h,f])=>n===u&&o===d&&(s==null&&h==null||s===h)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const o=this.rings[n],s=e.rings[n];if(!JE(o,s,r))return!1}return!0}contains(e){if(!e)return!1;const t=$v(e,this.spatialReference);return F5(this,T(t)?t:e)}isClockwise(e){let t;return t=wI(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,PA(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new le(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new le(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new le(i[0],i[1],i[2],i[3],this.spatialReference):new le(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(sp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new le(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new le(n,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(sp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([c({readOnly:!0})],fo.prototype,"cache",null),l([c({readOnly:!0})],fo.prototype,"centroid",null),l([c({readOnly:!0})],fo.prototype,"extent",null),l([c({readOnly:!0})],fo.prototype,"isSelfIntersecting",null),l([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],fo.prototype,"rings",void 0),l([X("rings")],fo.prototype,"writeRings",null),fo=O0=l([S("esri.geometry.Polygon")],fo),fo.prototype.toJSON.isDefaultToJSON=!0;const fr=fo;var r2;function Mq(e){return!Array.isArray(e[0])}let _a=r2=class extends pr{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,n=null,o=null;return e&&!Array.isArray(e)?(n=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||me.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),o=n[0]&&n[0][0],o&&(i===void 0&&r===void 0?(i=o.length>2,r=!1):i===void 0?i=!r&&o.length>3:r===void 0&&(r=!i&&o.length>3)),{paths:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=DL(this);if(!t)return null;const i=new Oe(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=R(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(Mq(e)){const r=[];for(let n=0,o=e.length;n<o;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new r2;return e.spatialReference=this.spatialReference,e.paths=R(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new le(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new le(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new le(i[0],i[1],i[2],i[3],this.spatialReference):new le(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(sp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new le(n,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new le(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(sp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([c({readOnly:!0})],_a.prototype,"cache",null),l([c({readOnly:!0})],_a.prototype,"extent",null),l([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],_a.prototype,"paths",void 0),l([X("paths")],_a.prototype,"writePaths",null),_a=r2=l([S("esri.geometry.Polyline")],_a),_a.prototype.toJSON.isDefaultToJSON=!0;const ji=_a,OA=yi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),bI=yi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function LL(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function kA(e){return e.points!==void 0}function FA(e){return e.x!==void 0&&e.y!==void 0}function BA(e){return e.paths!==void 0}function tc(e){return e.rings!==void 0}function Ki(e){return O(e)?null:e instanceof pr?e:FA(e)?le.fromJSON(e):BA(e)?ji.fromJSON(e):tc(e)?fr.fromJSON(e):kA(e)?Np.fromJSON(e):LL(e)?Oe.fromJSON(e):null}function Rp(e){return e?FA(e)?"esriGeometryPoint":BA(e)?"esriGeometryPolyline":tc(e)?"esriGeometryPolygon":LL(e)?"esriGeometryEnvelope":kA(e)?"esriGeometryMultipoint":null:null}const Nq={esriGeometryPoint:le,esriGeometryPolyline:ji,esriGeometryPolygon:fr,esriGeometryEnvelope:Oe,esriGeometryMultipoint:Np};function OL(e){return e&&Nq[e]||null}const Ac={base:pr,key:"type",typeMap:{extent:Oe,multipoint:Np,point:le,polyline:ji,polygon:fr}};zo(Ac);let Rq=0;const Ov=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Rq++})}};return t=l([S("esri.core.Identifiable")],t),t};let _I=class extends Ov(class{}){};_I=l([S("esri.core.Identifiable")],_I);const Pq=W.getLogger("esri.layers.support.fromPortalItem");async function $q(e){const t="portalItem"in e?e:{portalItem:e},i=await B(()=>import("./portalLayers.c1c1c437.js"),["portalLayers.c1c1c437.js","lazyLayerLoader.d554f446.js","layersLoader.71c8e16c.js","portalItemUtils.5719ecc2.js"],import.meta.url);try{return await i.fromItem(t)}catch(r){const n=t&&t.portalItem,o=n&&n.id||"unset",s=n&&n.portal&&n.portal.url||Ne.portalUrl;throw Pq.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+s+"', id: '"+o+"')",r),r}}let Dq=0,zt=class extends Js.EventedMixin(Ov(Ho)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Oe(-180,-90,180,90,me.WGS84),this.id=Date.now().toString(16)+"-layer-"+Dq++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=me.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await B(()=>import("./arcgisLayers.9b5bf59b.js"),["arcgisLayers.9b5bf59b.js","lazyLayerLoader.d554f446.js"],import.meta.url)).fromUrl(t)}static fromPortalItem(e){return $q(e)}initialize(){this.when().catch(e=>{var t,i;qi(e)||W.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?rt(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Be(e,{query:{f:"json"},responseType:"json"})).data;throw new I("layer:no-attribution-data","Layer does not have attribution data")}};l([c({type:String})],zt.prototype,"attributionDataUrl",void 0),l([c({type:Oe})],zt.prototype,"fullExtent",void 0),l([c({readOnly:!0})],zt.prototype,"hasAttributionData",null),l([c({type:String,clonable:!1})],zt.prototype,"id",void 0),l([c({type:Boolean,nonNullable:!0})],zt.prototype,"legendEnabled",void 0),l([c({type:["show","hide","hide-children"]})],zt.prototype,"listMode",void 0),l([c({type:Number,range:{min:0,max:1},nonNullable:!0})],zt.prototype,"opacity",void 0),l([c({clonable:!1})],zt.prototype,"parent",void 0),l([c({readOnly:!0})],zt.prototype,"parsedUrl",null),l([c({type:Boolean})],zt.prototype,"popupEnabled",void 0),l([c({type:Boolean})],zt.prototype,"attributionVisible",void 0),l([c({type:me})],zt.prototype,"spatialReference",void 0),l([c({type:String})],zt.prototype,"title",void 0),l([c({readOnly:!0,json:{read:!1}})],zt.prototype,"type",void 0),l([c()],zt.prototype,"url",void 0),l([c({type:Boolean,nonNullable:!0})],zt.prototype,"visible",void 0),zt=l([S("esri.layers.Layer")],zt);const lp=zt;function n2(e,t,i){let r,n;if(e)for(let o=0,s=e.length;o<s;o++){if(r=e.getItemAt(o),r[t]===i)return r;if((r==null?void 0:r.type)==="group"&&(n=n2(r.layers,t,i),n))return n}}const SI=W.getLogger("esri.support.LayersMixin"),Lq=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new he;const r=s=>{s.parent&&"remove"in s.parent&&s.parent.remove(s)},n=s=>{s.parent=this,this.layerAdded(s),s.type!=="elevation"&&s.type!=="base-elevation"||SI.error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as an operational layer and will therefore be ignored.`)},o=s=>{s.parent=null,this.layerRemoved(s)};this.layers.on("before-add",s=>r(s.item)),this.layers.on("after-add",s=>n(s.item)),this.layers.on("after-remove",s=>o(s.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",lc(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof lp){const o=i;o.parent===this?this.reorder(o,r):n.add(o,r)}else Zs(i)?i.then(o=>{this.destroyed||this.add(o,r)}):SI.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;r=n.getNextIndex(r),i.slice().forEach(o=>{o.parent!==this?(n.add(o,r),r+=1):this.reorder(o,r)})}findLayerById(i){return n2(this.layers,"id",i)}findLayerByUid(i){return n2(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return l([c()],t.prototype,"layers",null),t=l([S("esri.support.LayersMixin")],t),t},kL="esri.support.TablesMixin",Oq=W.getLogger(kL);function o2(e,t,i){if(e)for(let r=0,n=e.length;r<n;r++){const o=e.getItemAt(r);if(o[t]===i)return o;if((o==null?void 0:o.type)==="group"){const s=o2(o.tables,t,i);if(s)return s}}}const kq=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new he,this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&Oq.error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",lc(i,this._get("tables")))}findTableById(i){return o2(this.tables,"id",i)}findTableByUid(i){return o2(this.tables,"uid",i)}};return l([c()],t.prototype,"tables",null),t=l([S(kL)],t),t};let yo=class extends kq(Lq(Js.EventedMixin(se))){constructor(e){super(e),this.allLayers=new op({getCollections:()=>{var t,i,r;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=cq(this),this.basemap=null,this.editableLayers=new op({getCollections:()=>[this.allLayers],itemFilterFunction:sq}),this.ground=new p1,this._basemapCache=aq()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),lq(this._basemapCache),this._basemapCache=null}castBasemap(e){return uq(e,this._basemapCache)}castGround(e){const t=pq(e);return O(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};l([c({readOnly:!0,dependsOn:[]})],yo.prototype,"allLayers",void 0),l([c({readOnly:!0})],yo.prototype,"allTables",void 0),l([c({type:c1})],yo.prototype,"basemap",void 0),l([Fe("basemap")],yo.prototype,"castBasemap",null),l([c({readOnly:!0})],yo.prototype,"editableLayers",void 0),l([c({type:p1,nonNullable:!0})],yo.prototype,"ground",void 0),l([Fe("ground")],yo.prototype,"castGround",null),yo=l([S("esri.Map")],yo);const FL=yo;var up;function Fq(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>r)return up.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return up.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(up||(up={}));let Kw;function qs(){return Kw||(Kw=(async()=>{const e=await B(()=>import("./arcadeUtils.bcaadecc.js").then(t=>t.t),[],import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),Kw}const kge=(e,t,i)=>Uy.create(e,t,i,null,["$feature"]),Fge=(e,t,i)=>Uy.create(e,t,i,null,["$feature","$view"]),Bq=(e,t,i,r)=>Uy.create(e,t,i,r,["$feature","$view"]);class Uy{constructor(t,i,r,n,o,s,a,u){this.script=t,this.evaluate=o;const d=Array.isArray(a)?a:a.fields;this.fields=d,this._syntaxTree=n,this._arcade=i,this._arcadeDictionary=r,this._arcadeFeature=s,this._spatialReference=u,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,n,o,s){const{arcade:a,Feature:u,Dictionary:d}=await qs(),h=me.fromJSON(i),f=a.parseScript(t,s),y=o.reduce((N,D)=>({...N,[D]:null}),{});let m=null;T(n)&&(m=new d(n),m.immutable=!0,y.$config=null);const g=a.scriptUsesGeometryEngine(f)&&a.enableGeometrySupport(),v=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),w=a.scriptIsAsync(f)&&a.enableAsyncSupport(),_={vars:y,spatialReference:h,useAsync:!!w},A=new d;A.immutable=!1,A.setField("scale",0);const M=a.compileScript(f,_),$=N=>("$view"in N&&N.$view&&(A.setField("scale",N.$view.scale),N.$view=A),m&&(N.$config=m),M({vars:N,spatialReference:h}));return await Promise.all([g,v,w]),new Uy(t,a,d,f,$,new u,r,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const Uq=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Vq=["field","normalizationField"];function h1(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(TI(Uq,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)TI(Vq,r,t)}}function TI(e,t,i){if(e)for(const r of e){const n=Ap(r,t),o=n&&typeof n!="function"&&i.get(n);o&&dr(r,o.name,t)}}function UA(e,t){if(e!=null&&(t==null?void 0:t.fields.length))if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const Zw=new Set;function BL(e,t){return e&&t?(Zw.clear(),sy(Zw,e,t),Array.from(Zw).sort()):[]}function sy(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of i)dn(e,t,n);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const n of i)e.add(n)}}function dn(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function Bge(e,t){return O(t)||O(e)?[]:t.includes("*")?e.fields.map(i=>i.name):t}async function Zi(e,t,i){var o;if(!i)return;const{arcadeUtils:r}=await qs(),n=r.extractFieldNames(i,(o=t==null?void 0:t.fields)==null?void 0:o.map(s=>s.name));for(const s of n)dn(e,t,s)}async function UL(e,t,i){if(i&&i!=="1=1"){const r=(await B(()=>import("./WhereClause.443cc7a7.js"),[],import.meta.url)).WhereClause.create(i,t);if(!r.isStandardized)throw new I("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});sy(e,t,r.fieldNames)}}function jq({displayField:e,fields:t}){return e||(t&&t.length?Jw(t,"name-or-title")||Jw(t,"unique-identifier")||Jw(t,"type-or-category")||zq(t):null)}function zq(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function Jw(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function Uge(e,t){if(!t)return;const i=Ap("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function Hq(e,t,i){i.outStatistic.onStatisticValueExpression?Zi(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}async function Vge(e,t,i){var n,o;if(!t||!i||!("fields"in i))return;const r=[];if((n=i.popupTemplate)!=null&&n.expressionInfos&&r.push(...i.popupTemplate.expressionInfos.map(s=>Zi(e,t.fieldsIndex,s.expression))),Array.isArray((o=i.popupTemplate)==null?void 0:o.content)){const s=i.popupTemplate.content;for(const a of s)a.type==="expression"&&a.expressionInfo&&r.push(Zi(e,t.fieldsIndex,a.expressionInfo.expression))}i.fields&&r.push(...i.fields.map(s=>Hq(e,t.fieldsIndex,s))),await Promise.all(r)}async function jge(e,t,i){t&&(t.timeInfo&&T(i)&&i.timeExtent&&sy(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&sy(e,t.fieldsIndex,[t.floorInfo.floorField]),T(i)&&T(i.where)&&await UL(e,t.fieldsIndex,i.where))}async function zge(e,t,i){t&&i&&await Promise.all(i.map(r=>Gq(e,t,r)))}async function Gq(e,t,i){t&&i&&(i.valueExpression?await Zi(e,t.fieldsIndex,i.valueExpression):i.field&&dn(e,t.fieldsIndex,i.field))}function Hge(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?BL(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function Gge(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(n=>Wq(e,r,n)))}async function Wq(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Zi(e,t,r.expression);else{const o=r.expression.match(/{[^}]*}/g);o&&o.forEach(s=>{dn(e,t,s.slice(1,-1))})}await UL(e,t,n)}function qq(e){const t=e.defaultValue;return t!==void 0&&zL(e,t)?t:e.nullable?null:void 0}function VL(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Yq(e){return e===null||VL(e)}const VA="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function Kq(e){return e===null||VA(e)}function jL(e){return e!=null&&typeof e=="string"}function Zq(e){return e===null||jL(e)}function Jq(){return!0}function zL(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?Kq:VA;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?Yq:VL;break;case"string":case"esriFieldTypeString":i=e.nullable?Zq:jL;break;default:i=Jq}return arguments.length===1?i:i(t)}const Xq=["integer","small-integer","single","double"],Qq=new Set([...Xq,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function jA(e){return e!=null&&Qq.has(e.type)}function Wge(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var f1,y1;function qge(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Yge(e,t){return e.nullable&&t===null?null:jA(e)&&!eY(e.type,Number(t))?f1.OUT_OF_RANGE:zL(e,t)?e.domain?Fq(e.domain,t):null:y1.INVALID_TYPE}function eY(e,t){const i=typeof e=="string"?HL(e):e;return!!i&&(i.isInteger?VA(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}function HL(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return tY;case"esriFieldTypeInteger":case"integer":return iY;case"esriFieldTypeSingle":case"single":return rY;case"esriFieldTypeDouble":case"double":return nY}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(f1||(f1={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(y1||(y1={}));const tY={min:-32768,max:32767,isInteger:!0},iY={min:-2147483648,max:2147483647,isInteger:!0},rY={min:-34e37,max:12e37,isInteger:!1},nY={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Kge(e,t,i){switch(e){case up.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case up.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case y1.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case f1.OUT_OF_RANGE:{const{min:r,max:n}=HL(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${n}`}}}function oY(e,t){return!sY(e,t,null)}function sY(e,t,i){if(!t||!t.attributes||!e){if(T(i))for(const o of e)i.add(o);return!0}const r=t.attributes;let n=!1;for(const o of e)if(!(o in r)){if(n=!0,!T(i))break;i.add(o)}return n}function GL(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let k0=class extends U{constructor(e){super(e),this.type=null}};l([c({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],k0.prototype,"type",void 0),k0=l([S("esri.popup.content.Content")],k0);const xc=k0;var s2;let Wl=s2=class extends xc{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new s2({description:this.description,displayType:this.displayType,title:this.title})}};l([c({type:String,json:{write:!0}})],Wl.prototype,"description",void 0),l([c({type:["auto","preview","list"],json:{write:!0}})],Wl.prototype,"displayType",void 0),l([c({type:String,json:{write:!0}})],Wl.prototype,"title",void 0),l([c({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Wl.prototype,"type",void 0),Wl=s2=l([S("esri.popup.content.AttachmentsContent")],Wl);const ay=Wl;var a2;let ql=a2=class extends xc{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new a2({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?R(this.outFields):null})}};l([c()],ql.prototype,"creator",void 0),l([c()],ql.prototype,"destroyer",void 0),l([c()],ql.prototype,"outFields",void 0),l([c({type:["custom"],readOnly:!0})],ql.prototype,"type",void 0),ql=a2=l([S("esri.popup.content.CustomContent")],ql);const aY=ql;var l2;let Wc=l2=class extends U{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new l2({title:this.title,expression:this.expression})}};l([c({type:String,json:{write:!0}})],Wc.prototype,"title",void 0),l([c({type:String,json:{write:!0}})],Wc.prototype,"expression",void 0),l([c({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Wc.prototype,"returnType",void 0),Wc=l2=l([S("esri.popup.ElementExpressionInfo")],Wc);const WL=Wc;var u2;let Ph=u2=class extends xc{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new u2({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};l([c({type:WL,json:{write:!0}})],Ph.prototype,"expressionInfo",void 0),l([c({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Ph.prototype,"type",void 0),Ph=u2=l([S("esri.popup.content.ExpressionContent")],Ph);const zA=Ph,ly=yi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});ly.toJSON.bind(ly);ly.fromJSON.bind(ly);const uo={year:"numeric",month:"numeric",day:"numeric"},th={year:"numeric",month:"long",day:"numeric"},ih={year:"numeric",month:"short",day:"numeric"},rh={year:"numeric",month:"long",weekday:"long",day:"numeric"},Kr={hour:"numeric",minute:"numeric"},_n={...Kr,second:"numeric"},HA={"short-date":uo,"short-date-short-time":{...uo,...Kr},"short-date-short-time-24":{...uo,...Kr,hour12:!1},"short-date-long-time":{...uo,..._n},"short-date-long-time-24":{...uo,..._n,hour12:!1},"short-date-le":uo,"short-date-le-short-time":{...uo,...Kr},"short-date-le-short-time-24":{...uo,...Kr,hour12:!1},"short-date-le-long-time":{...uo,..._n},"short-date-le-long-time-24":{...uo,..._n,hour12:!1},"long-month-day-year":th,"long-month-day-year-short-time":{...th,...Kr},"long-month-day-year-short-time-24":{...th,...Kr,hour12:!1},"long-month-day-year-long-time":{...th,..._n},"long-month-day-year-long-time-24":{...th,..._n,hour12:!1},"day-short-month-year":ih,"day-short-month-year-short-time":{...ih,...Kr},"day-short-month-year-short-time-24":{...ih,...Kr,hour12:!1},"day-short-month-year-long-time":{...ih,..._n},"day-short-month-year-long-time-24":{...ih,..._n,hour12:!1},"long-date":rh,"long-date-short-time":{...rh,...Kr},"long-date-short-time-24":{...rh,...Kr,hour12:!1},"long-date-long-time":{...rh,..._n},"long-date-long-time-24":{...rh,..._n,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Kr,"long-time":_n},uy=yi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});uy.apiValues;uy.toJSON.bind(uy);uy.fromJSON.bind(uy);const lY={ar:"ar-u-nu-latn-ca-gregory"};let F0=new WeakMap,qL=HA["short-date-short-time"];function uY(e){const t=e||qL;if(!F0.has(t)){const i=Lr(),r=lY[Lr()]||i;F0.set(t,new Intl.DateTimeFormat(r,t))}return F0.get(t)}function GA(e){return HA[e]||null}function Wo(e,t){return uY(t).format(e)}EA(()=>{F0=new WeakMap,qL=HA["short-date-short-time"]});const cY={ar:"ar-u-nu-latn"};let B0=new WeakMap,YL={};function dY(e){const t=e||YL;if(!B0.has(t)){const i=Lr(),r=cY[Lr()]||i;B0.set(t,new Intl.NumberFormat(r,e))}return B0.get(t)}function KL(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Al(e,t){return e===-0&&(e=0),dY(t).format(e)}EA(()=>{B0=new WeakMap,YL={}});var c2;let Yl=c2=class extends U{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new c2({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?Wo(e,{...GA(this.dateFormat),...this.dateTimeFormatOptions}):Al(e,KL(this))}formatRasterPixelValue(e){let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map(n=>this.format(Number(n))).join(i):e}};l([pe(ly)],Yl.prototype,"dateFormat",void 0),l([c({type:Object,json:{read:!1}})],Yl.prototype,"dateTimeFormatOptions",void 0),l([c({type:Boolean,json:{write:!0}})],Yl.prototype,"digitSeparator",void 0),l([c({type:Qe,json:{write:!0}})],Yl.prototype,"places",void 0),Yl=c2=l([S("esri.popup.support.FieldInfoFormat")],Yl);const Md=Yl;var d2;let In=d2=class extends U{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new d2({fieldName:this.fieldName,format:this.format?R(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};l([c({type:String,json:{write:!0}})],In.prototype,"fieldName",void 0),l([c({type:Md,json:{write:!0}})],In.prototype,"format",void 0),l([c({type:Boolean,json:{write:!0,default:!1}})],In.prototype,"isEditable",void 0),l([c({type:String,json:{write:!0}})],In.prototype,"label",void 0),l([pe(new Se({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],In.prototype,"stringFieldOption",void 0),l([c({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],In.prototype,"statisticType",void 0),l([c({type:String,json:{write:!0}})],In.prototype,"tooltip",void 0),l([c({type:Boolean,json:{write:!0}})],In.prototype,"visible",void 0),In=d2=l([S("esri.popup.FieldInfo")],In);const Vy=In;var p2;let ps=p2=class extends xc{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new p2(R({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};l([c({type:Object,json:{write:!0}})],ps.prototype,"attributes",void 0),l([c({type:String,json:{write:!0}})],ps.prototype,"description",void 0),l([c({type:[Vy]})],ps.prototype,"fieldInfos",void 0),l([X("fieldInfos")],ps.prototype,"writeFieldInfos",null),l([c({type:String,json:{write:!0}})],ps.prototype,"title",void 0),l([c({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],ps.prototype,"type",void 0),ps=p2=l([S("esri.popup.content.FieldsContent")],ps);const cp=ps;let Kl=class extends U{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};l([c({type:String,json:{write:!0}})],Kl.prototype,"altText",void 0),l([c({type:String,json:{write:!0}})],Kl.prototype,"caption",void 0),l([c({type:String,json:{write:!0}})],Kl.prototype,"title",void 0),l([c({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Kl.prototype,"type",void 0),Kl=l([S("esri.popup.content.mixins.MediaInfo")],Kl);const WA=Kl;var h2;let qc=h2=class extends se{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new h2({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};l([c()],qc.prototype,"fieldName",void 0),l([c()],qc.prototype,"tooltip",void 0),l([c()],qc.prototype,"value",void 0),qc=h2=l([S("esri.popup.content.support.ChartMediaInfoValueSeries")],qc);const ZL=qc;var f2;let Zl=f2=class extends U{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new f2({fields:R(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};l([c({type:[String],json:{write:!0}})],Zl.prototype,"fields",void 0),l([c({type:String,json:{write:!0}})],Zl.prototype,"normalizeField",void 0),l([c({type:[ZL],json:{read:!1}})],Zl.prototype,"series",void 0),l([c({type:String,json:{write:!0}})],Zl.prototype,"tooltipField",void 0),Zl=f2=l([S("esri.popup.content.support.ChartMediaInfoValue")],Zl);const pY=Zl;let $h=class extends WA{constructor(e){super(e),this.type=null,this.value=null}};l([c({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],$h.prototype,"type",void 0),l([c({type:pY,json:{write:!0}})],$h.prototype,"value",void 0),$h=l([S("esri.popup.content.mixins.ChartMediaInfo")],$h);const kv=$h,Fv=yi()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var y2;let U0=y2=class extends kv{constructor(e){super(e),this.type="bar-chart"}clone(){return new y2({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([c({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Fv.write}})],U0.prototype,"type",void 0),U0=y2=l([S("esri.popup.content.BarChartMediaInfo")],U0);const JL=U0;var m2;let V0=m2=class extends kv{constructor(e){super(e),this.type="column-chart"}clone(){return new m2({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([c({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Fv.write}})],V0.prototype,"type",void 0),V0=m2=l([S("esri.popup.content.ColumnChartMediaInfo")],V0);const XL=V0;var g2;let Dh=g2=class extends U{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new g2({linkURL:this.linkURL,sourceURL:this.sourceURL})}};l([c({type:String,json:{write:!0}})],Dh.prototype,"linkURL",void 0),l([c({type:String,json:{write:!0}})],Dh.prototype,"sourceURL",void 0),Dh=g2=l([S("esri.popup.content.support.ImageMediaInfoValue")],Dh);const hY=Dh;var v2;let Yc=v2=class extends WA{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new v2({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};l([c({type:Number,json:{write:!0}})],Yc.prototype,"refreshInterval",void 0),l([c({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Yc.prototype,"type",void 0),l([c({type:hY,json:{write:!0}})],Yc.prototype,"value",void 0),Yc=v2=l([S("esri.popup.content.ImageMediaInfo")],Yc);const QL=Yc;var w2;let j0=w2=class extends kv{constructor(e){super(e),this.type="line-chart"}clone(){return new w2({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([c({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Fv.write}})],j0.prototype,"type",void 0),j0=w2=l([S("esri.popup.content.LineChartMediaInfo")],j0);const e9=j0;var b2;let z0=b2=class extends kv{constructor(e){super(e),this.type="pie-chart"}clone(){return new b2({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([c({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Fv.write}})],z0.prototype,"type",void 0),z0=b2=l([S("esri.popup.content.PieChartMediaInfo")],z0);const t9=z0,i9={base:WA,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":JL,"column-chart":XL,"line-chart":e9,"pie-chart":t9,image:QL}};var _2;let Mn=_2=class extends xc{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?QL.fromJSON(t):t.type==="barchart"?JL.fromJSON(t):t.type==="columnchart"?XL.fromJSON(t):t.type==="linechart"?e9.fromJSON(t):t.type==="piechart"?t9.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new _2(R({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};l([c()],Mn.prototype,"activeMediaInfoIndex",void 0),l([c({type:Object,json:{write:!0}})],Mn.prototype,"attributes",void 0),l([c({type:String,json:{write:!0}})],Mn.prototype,"description",void 0),l([c({types:[i9]})],Mn.prototype,"mediaInfos",void 0),l([Y("mediaInfos")],Mn.prototype,"readMediaInfos",null),l([X("mediaInfos")],Mn.prototype,"writeMediaInfos",null),l([c({type:String,json:{write:!0}})],Mn.prototype,"title",void 0),l([c({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Mn.prototype,"type",void 0),Mn=_2=l([S("esri.popup.content.MediaContent")],Mn);const cy=Mn;var S2;let Lh=S2=class extends xc{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new S2({text:this.text})}};l([c({type:String,json:{write:!0}})],Lh.prototype,"text",void 0),l([c({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Lh.prototype,"type",void 0),Lh=S2=l([S("esri.popup.content.TextContent")],Lh);const dp=Lh,fY={base:null,key:"type",typeMap:{attachment:ay,media:cy,text:dp,expression:zA,field:cp}};var T2;let Jl=T2=class extends U{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new T2({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([c({type:String,json:{write:!0}})],Jl.prototype,"name",void 0),l([c({type:String,json:{write:!0}})],Jl.prototype,"title",void 0),l([c({type:String,json:{write:!0}})],Jl.prototype,"expression",void 0),l([c({type:["string","number"],json:{write:!0}})],Jl.prototype,"returnType",void 0),Jl=T2=l([S("esri.popup.ExpressionInfo")],Jl);const r9=Jl;var E2;let Oh=E2=class extends U{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new E2({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};l([c({type:Boolean,json:{write:!0}})],Oh.prototype,"returnTopmostRaster",void 0),l([c({type:Boolean,json:{write:!0}})],Oh.prototype,"showNoDataRecords",void 0),Oh=E2=l([S("esri.popup.LayerOptions")],Oh);const yY=Oh;var A2;let kh=A2=class extends U{constructor(e){super(e),this.field=null,this.order=null}clone(){return new A2({field:this.field,order:this.order})}};l([c({type:String,json:{write:!0}})],kh.prototype,"field",void 0),l([c({type:["asc","desc"],json:{write:!0}})],kh.prototype,"order",void 0),kh=A2=l([S("esri.popup.support.RelatedRecordsInfoFieldOrder")],kh);const n9=kh;var x2;let Fh=x2=class extends U{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new x2({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?R(this.orderByFields):null})}};l([c({type:Boolean,json:{write:!0}})],Fh.prototype,"showRelatedRecords",void 0),l([c({type:[n9],json:{write:!0}})],Fh.prototype,"orderByFields",void 0),Fh=x2=l([S("esri.popup.RelatedRecordsInfo")],Fh);const mY=Fh;var C2;let Nn=C2=class extends Ov(se){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new C2({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};l([c()],Nn.prototype,"active",void 0),l([c()],Nn.prototype,"className",void 0),l([c()],Nn.prototype,"disabled",void 0),l([c()],Nn.prototype,"id",void 0),l([c()],Nn.prototype,"indicator",void 0),l([c()],Nn.prototype,"title",void 0),l([c()],Nn.prototype,"type",void 0),l([c()],Nn.prototype,"visible",void 0),Nn=C2=l([S("esri.support.actions.ActionBase")],Nn);const Bv=Nn;var I2;let H0=I2=class extends Bv{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new I2({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};l([c()],H0.prototype,"image",void 0),H0=I2=l([S("esri.support.Action.ActionButton")],H0);const Pp=H0;var M2;let Bh=M2=class extends Bv{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new M2({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};l([c()],Bh.prototype,"image",void 0),l([c()],Bh.prototype,"value",void 0),Bh=M2=l([S("esri.support.Action.ActionToggle")],Bh);const o9=Bh;var N2;const gY=he.ofType({key:"type",defaultKeyValue:"button",base:Bv,typeMap:{button:Pp,toggle:o9}}),vY={base:xc,key:"type",typeMap:{media:cy,custom:aY,text:dp,attachments:ay,fields:cp,expression:zA}},s9="esri.PopupTemplate",wY=W.getLogger(s9),bY=["attachments","fields","media","text","expression"];let $t=N2=class extends U{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>zo(vY,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Zs(e)?e:(wY.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,i,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(n=>bY.includes(n.type)).map(n=>n&&n.toJSON(r)),t.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(t):n.type==="media"?this._writeMediaContent(n,t):n.type==="text"&&this._writeTextContent(n,t)})):t.description=e}writeFieldInfos(e,t,i,r){const{content:n}=this,o=Array.isArray(n)?n:null;if(e){const s=o?o.filter(u=>u.type==="fields"):[],a=s.length&&s.every(u=>{var d;return(d=u.fieldInfos)==null?void 0:d.length});t.fieldInfos=e.filter(Boolean).map(u=>{const d=u.toJSON(r);return a&&(d.visible=!1),d})}if(o)for(const s of o)s.type==="fields"&&this._writeFieldsContent(s,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?R(e.toArray()):[];return new N2({actions:t,content:Array.isArray(this.content)?R(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?R(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?R(this.fieldInfos):null,layerOptions:this.layerOptions?R(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?R(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?R(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),sy(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=R(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const n=t.fieldInfos.find(o=>o.fieldName.toLowerCase()===r.fieldName.toLowerCase());n?n.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=R(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:i}){const r={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!t||r.mediaInfos||(n.mediaInfos=t,r.mediaInfos=!0),cy.fromJSON(n)):n.type==="text"?(n.text||!e||r.description||(n.text=e,r.description=!0),dp.fromJSON(n)):n.type==="attachments"?ay.fromJSON(n):n.type==="fields"?cp.fromJSON(n):n.type==="expression"?zA.fromJSON(n):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i}){const r=[];return e?r.push(new dp({text:e})):r.push(new cp),Array.isArray(t)&&t.length&&r.push(cy.fromJSON({mediaInfos:t})),i&&r.push(ay.fromJSON({displayType:"auto"})),r.length?r:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((r,n)=>[...r,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,n=r||{},{fields:o=[],normalizeField:s,tooltipField:a,sourceURL:u,linkURL:d}=n,h=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(u),...this._extractFieldNames(d),...o];return s&&h.push(s),a&&h.push(a),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>Zi(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.includes("relationships/")&&!t.includes("expression/")):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,n=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const r=/\{(\w+):.+\}/,n=i.filter(o=>!(o.indexOf("{relationships/")===0||o.indexOf("{expression/")===0)).map(o=>o.replace(r,"{$1}"));return n?n.map(o=>o.slice(1,-1)):[]}};l([c({type:gY})],$t.prototype,"actions",void 0),l([c()],$t.prototype,"content",void 0),l([Fe("content")],$t.prototype,"castContent",null),l([Y("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],$t.prototype,"readContent",null),l([X("content",{popupElements:{type:he.ofType(fY)},showAttachments:{type:Boolean},mediaInfos:{type:he.ofType(i9)},description:{type:String}})],$t.prototype,"writeContent",null),l([c({type:[r9],json:{write:!0}})],$t.prototype,"expressionInfos",void 0),l([c({type:[Vy]})],$t.prototype,"fieldInfos",void 0),l([X("fieldInfos")],$t.prototype,"writeFieldInfos",null),l([c({type:yY})],$t.prototype,"layerOptions",void 0),l([X("layerOptions")],$t.prototype,"writeLayerOptions",null),l([c({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],$t.prototype,"lastEditInfoEnabled",void 0),l([c()],$t.prototype,"outFields",void 0),l([c()],$t.prototype,"overwriteActions",void 0),l([c()],$t.prototype,"returnGeometry",void 0),l([c({json:{type:String}})],$t.prototype,"title",void 0),l([X("title")],$t.prototype,"writeTitle",null),l([c({type:mY,json:{write:!0}})],$t.prototype,"relatedRecordsInfo",void 0),$t=N2=l([S(s9)],$t);const Nl=$t,EI=new Se({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let _Y=0,Kc=class extends U{constructor(e){super(e),this.id="sym"+_Y++,this.type=null,this.color=new ie([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};l([c({type:EI.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:EI.write}}})],Kc.prototype,"type",void 0),l([c({type:ie,json:{write:{allowNull:!0}}})],Kc.prototype,"color",void 0),l([Y("color")],Kc.prototype,"readColor",null),Kc=l([S("esri.symbols.Symbol")],Kc);const mr=Kc;var R2;let Sa=R2=class extends mr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(n=>{const o=n.valueExpressionInfo;return Zi(e,t,o.expression)});await Promise.all(r)}}}clone(){return new R2({data:R(this.data)})}hash(){return eA(JSON.stringify(this.data)).toString()}};l([c({json:{write:!1}})],Sa.prototype,"color",void 0),l([c({json:{write:!0}})],Sa.prototype,"data",void 0),l([Y("data",["symbol"])],Sa.prototype,"readData",null),l([X("data",{})],Sa.prototype,"writeData",null),l([pe({CIMSymbolReference:"cim"},{readOnly:!0})],Sa.prototype,"type",void 0),Sa=R2=l([S("esri.symbols.CIMSymbol")],Sa);const jy=Sa;let Zc=class extends U{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};l([c({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Zc.prototype,"enabled",void 0),l([X("enabled")],Zc.prototype,"writeEnabled",null),l([c({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Zc.prototype,"type",void 0),Zc=l([S("esri.symbols.Symbol3DLayer")],Zc);const Jo=Zc,SY=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,TY="screenUtils.toPt: input not recognized!",a9=96;function l9(e){return e?e/72*a9:0}function qo(e){return e?72*e/a9:0}function je(e){if(typeof e=="string"){const t=e.match(SY);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",o=r==="px"?qo(i):i;return n?-o:o}return console.warn(TY),null}return e}function ur(e=0,t=0){return{x:e,y:t}}function Zge(e=0,t=0){return[e,t]}function EY(e,t){const i=t.transparency!=null?ry(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new ie([r[0]||0,r[1]||0,r[2]||0,i]):null}function AY(e,t){t.color=e.toJSON().slice(0,3);const i=Lv(e.a);i!==0&&(t.transparency=i)}const Rl={type:ie,json:{type:[Qe],default:null,read:{source:["color","transparency"],reader:EY},write:{target:{color:{type:[Qe]},transparency:{type:Qe}},writer:AY}}},Yo={type:Number,cast:je,json:{write:!0}};let Xl=class extends U{constructor(e){super(e),this.color=new ie([0,0,0,1]),this.extensionLength=0,this.size=qo(1)}clone(){}cloneProperties(){return{color:R(this.color),size:this.size,extensionLength:this.extensionLength}}};l([c({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Xl.prototype,"type",void 0),l([c(Rl)],Xl.prototype,"color",void 0),l([c({...Yo,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Xl.prototype,"extensionLength",void 0),l([c(Yo)],Xl.prototype,"size",void 0),Xl=l([S("esri.symbols.edges.Edges3D")],Xl);const qA=Xl;var P2;let G0=P2=class extends qA{constructor(e){super(e),this.type="sketch"}clone(){return new P2(this.cloneProperties())}};l([pe({sketch:"sketch"},{readOnly:!0})],G0.prototype,"type",void 0),G0=P2=l([S("esri.symbols.edges.SketchEdges3D")],G0);const xY=G0;var $2;let W0=$2=class extends qA{constructor(e){super(e),this.type="solid"}clone(){return new $2(this.cloneProperties())}};l([pe({solid:"solid"},{readOnly:!0})],W0.prototype,"type",void 0),W0=$2=l([S("esri.symbols.support.SolidEdges3D")],W0);const CY=W0,u9={types:{key:"type",base:qA,typeMap:{solid:CY,sketch:xY}},json:{write:!0}};var D2;let Or=D2=class extends U{constructor(e){super(e),this.color=null}clone(){const e={color:T(this.color)?this.color.clone():null};return new D2(e)}};l([c(Rl)],Or.prototype,"color",void 0),Or=D2=l([S("esri.symbols.support.Symbol3DMaterial")],Or);var L2;let Ta=L2=class extends Jo{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new L2({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:T(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};l([pe({Extrude:"extrude"},{readOnly:!0})],Ta.prototype,"type",void 0),l([c({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ta.prototype,"size",void 0),l([c({type:Or,json:{write:!0}})],Ta.prototype,"material",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ta.prototype,"castShadows",void 0),l([c(u9)],Ta.prototype,"edges",void 0),Ta=L2=l([S("esri.symbols.ExtrudeSymbol3DLayer")],Ta);const c9=Ta;let Uh=class extends mr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};l([pe({esriSLS:"simple-line"},{readOnly:!0})],Uh.prototype,"type",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Uh.prototype,"width",void 0),Uh=l([S("esri.symbols.LineSymbol")],Uh);const IY=Uh,MY=["begin","end","begin-end"],d9=["arrow","circle","square","diamond","cross","x"];var O2;let mo=O2=class extends U{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new O2({color:R(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};l([c({type:["begin","end","begin-end"],json:{write:!0}})],mo.prototype,"placement",void 0),l([pe({"line-marker":"line-marker"},{readOnly:!0}),c({json:{origins:{"web-map":{write:!1}}}})],mo.prototype,"type",void 0),l([c({type:d9})],mo.prototype,"style",void 0),l([X("style")],mo.prototype,"writeStyle",null),l([c({type:ie,value:null,json:{write:{allowNull:!0}}})],mo.prototype,"color",null),l([Y("color")],mo.prototype,"readColor",null),l([X("color")],mo.prototype,"writeColor",null),mo=O2=l([S("esri.symbols.LineSymbolMarker")],mo);const NY=mo;var k2;const Xw=new Se({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let hs=k2=class extends IY{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,n,o){if(e&&typeof e!="string")return e;const s={};return e!=null&&(s.style=e),t!=null&&(s.color=t),i!=null&&(s.width=je(i)),r!=null&&(s.cap=r),n!=null&&(s.join=n),o!=null&&(s.miterLimit=je(o)),s}clone(){var e;return new k2({color:R(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};l([pe({esriSLS:"simple-line"},{readOnly:!0})],hs.prototype,"type",void 0),l([c({type:Xw.apiValues,json:{read:Xw.read,write:Xw.write}})],hs.prototype,"style",void 0),l([c({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],hs.prototype,"cap",void 0),l([c({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],hs.prototype,"join",void 0),l([c({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":NY}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],hs.prototype,"marker",void 0),l([c({type:Number,json:{read:!1,write:!1}})],hs.prototype,"miterLimit",void 0),hs=k2=l([S("esri.symbols.SimpleLineSymbol")],hs);const Br=hs;let Vh=class extends mr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};l([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Br}},json:{default:null,write:!0}})],Vh.prototype,"outline",void 0),l([c({type:["simple-fill","picture-fill"],readOnly:!0})],Vh.prototype,"type",void 0),Vh=l([S("esri.symbols.FillSymbol")],Vh);const p9=Vh;let q0=class extends U{constructor(e){super(e)}clone(){}};l([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],q0.prototype,"type",void 0),q0=l([S("esri.symbols.patterns.LinePattern3D")],q0);const h9=q0,RY=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var F2;const PY=yi()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let jh=F2=class extends h9{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new F2(e)}};l([c({type:["style"]})],jh.prototype,"type",void 0),l([pe(PY),c({type:RY})],jh.prototype,"style",void 0),jh=F2=l([S("esri.symbols.patterns.LineStylePattern3D")],jh);const YA=jh;let Y0=class extends U{constructor(e){super(e)}clone(){}};l([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Y0.prototype,"type",void 0),Y0=l([S("esri.symbols.patterns.Pattern3D")],Y0);const f9=Y0,$Y=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var B2;let zh=B2=class extends f9{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new B2(e)}};l([c({type:["style"]})],zh.prototype,"type",void 0),l([c({type:$Y,json:{read:!0,write:!0}})],zh.prototype,"style",void 0),zh=B2=l([S("esri.symbols.patterns.StylePattern3D")],zh);const y9=zh,DY={types:{key:"type",base:f9,typeMap:{style:y9}},json:{write:!0}},m9={types:{key:"type",base:h9,typeMap:{style:YA}},json:{write:!0}},Nf=new ie("white");new ie("black");const LY=new ie([255,255,255,0]);function OY(e){return e.r===0&&e.g===0&&e.b===0}var U2;let Rf=U2=class extends Or{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:T(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new U2(e)}};l([pe({multiply:"multiply",replace:"replace",tint:"tint"})],Rf.prototype,"colorMixMode",void 0),Rf=U2=l([S("esri.symbols.support.Symbol3DFillMaterial")],Rf);function xl(e=VY){return[e[0],e[1],e[2],e[3]]}function Jge(e){return[e[0],e[1],e[2],e[3]]}function kY(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Xge(e,t,i,r,n=xl()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function Qge(e,t=xl()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function e1e(e,t){return new Oe({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function t1e(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function FY(e){return O(e)||e[0]>=e[2]?0:e[2]-e[0]}function BY(e){return e[1]>=e[3]?0:e[3]-e[1]}function i1e(e){return FY(e)*BY(e)}function r1e(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function n1e(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function o1e(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function UY(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function s1e(e){return e?kY(e,AI):xl(AI)}const AI=[1/0,1/0,-1/0,-1/0],VY=[0,0,0,0];function KA(e=WY){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function ZA(e,t,i,r,n,o,s=KA()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s[4]=n,s[5]=o,s}function a1e(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Oe(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function l1e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function u1e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function jY(e){return e[0]>=e[3]?0:e[3]-e[0]}function zY(e){return e[1]>=e[4]?0:e[4]-e[1]}function HY(e){return e[2]>=e[5]?0:e[5]-e[2]}function c1e(e,t=[0,0,0]){return t[0]=jY(e),t[1]=zY(e),t[2]=HY(e),t}function d1e(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function p1e(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function GY(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function h1e(e){return e?GY(e,CI):KA(CI)}function f1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function xI(e){return e.length===6}function y1e(e,t,i){if(O(e)||O(t))return e===t;if(!xI(e)||!xI(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const CI=[1/0,1/0,1/0,-1/0,-1/0,-1/0],WY=[0,0,0,0,0,0];KA();function m1e(e,{isPrimitive:t,width:i,depth:r,height:n}){const o=t?10:1;if(i==null&&n==null&&r==null)return[o*e[0],o*e[1],o*e[2]];const s=Mp(i,r,n);let a;for(let u=0;u<3;u++){const d=s[u];if(d!=null){a=d/e[u];break}}for(let u=0;u<3;u++)s[u]==null&&(s[u]=e[u]*a);return s}const qY=ZA(-.5,-.5,-.5,.5,.5,.5),YY=ZA(-.5,-.5,0,.5,.5,1),KY=ZA(-.5,-.5,0,.5,.5,.5);function g1e(e){switch(e){case"sphere":case"cube":case"diamond":return qY;case"cylinder":case"cone":case"inverted-cone":return YY;case"tetrahedron":return KY;default:return}}const JA=["butt","square","round"],ZY=[...JA,"none"],g9=["miter","bevel","round"];var V2;let Ql=V2=class extends U{constructor(e){super(e),this.color=new ie([0,0,0,1]),this.size=qo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:T(this.color)?this.color.clone():null,size:this.size,pattern:T(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new V2(e)}};l([c(Rl)],Ql.prototype,"color",void 0),l([c(Yo)],Ql.prototype,"size",void 0),l([c(m9)],Ql.prototype,"pattern",void 0),l([c({type:JA,json:{default:"butt",write:{overridePolicy(){return{enabled:T(this.pattern)}}}}})],Ql.prototype,"patternCap",void 0),Ql=V2=l([S("esri.symbols.support.Symbol3DOutline")],Ql);var K0;let fs=K0=class extends Jo{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:T(this.edges)?this.edges.clone():null,enabled:this.enabled,material:T(this.material)?this.material.clone():null,pattern:T(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:T(this.outline)?this.outline.clone():null};return new K0(e)}static fromSimpleFillSymbol(e){var r,n,o,s,a,u;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new YA({style:e.outline.style}):null,i={size:(n=(r=e.outline)==null?void 0:r.width)!=null?n:0,color:((s=(o=e.outline)==null?void 0:o.color)!=null?s:Nf).clone(),pattern:t};return t&&((a=e.outline)==null?void 0:a.cap)&&(i.patternCap=e.outline.cap),new K0({material:new Rf({color:((u=e.color)!=null?u:LY).clone()}),pattern:e.style&&e.style!=="solid"?new y9({style:e.style}):null,outline:i})}};l([pe({Fill:"fill"},{readOnly:!0})],fs.prototype,"type",void 0),l([c({type:Rf,json:{write:!0}})],fs.prototype,"material",void 0),l([c(DY)],fs.prototype,"pattern",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],fs.prototype,"castShadows",void 0),l([c({type:Ql,json:{write:!0}})],fs.prototype,"outline",void 0),l([c(u9)],fs.prototype,"edges",void 0),fs=K0=l([S("esri.symbols.FillSymbol3DLayer")],fs);const Uv=fs,JY=["none","underline","line-through"],XY=["normal","italic","oblique"],QY=["normal","lighter","bold","bolder"],v9={type:Number,cast:e=>{const t=on(e);return t===0?1:hr(t,.1,4)},nonNullable:!0},eK=["left","right","center"],tK=["baseline","top","middle","bottom"],w9={type:eK,nonNullable:!0},b9={type:tK,nonNullable:!0};var j2;let ys=j2=class extends U{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return je(e)}clone(){return new j2({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};l([c({type:JY,json:{default:"none",write:!0}})],ys.prototype,"decoration",void 0),l([c({type:String,json:{write:!0}})],ys.prototype,"family",void 0),l([c({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],ys.prototype,"size",void 0),l([Fe("size")],ys.prototype,"castSize",null),l([c({type:XY,json:{default:"normal",write:!0}})],ys.prototype,"style",void 0),l([c({type:QY,json:{default:"normal",write:!0}})],ys.prototype,"weight",void 0),ys=j2=l([S("esri.symbols.Font")],ys);const Vv=ys;function $p(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=Xn(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=gA(e,t.portalItem.itemUrl);rK.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return z2(e,t&&t.portal)}function zy(e,t,i=dy.YES){if(!e)return e;!zi(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=Xn(e);if(t){const n=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(n){const o=z2(n,t.portal);r=gA(z2(r,t.portal),o,o),r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=QA(r,t&&t.portal),zi(r)&&(r=Dr(r)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!zi(r)&&!Ec(r)&&i===dy.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function XA(e,t,i){return $p(e,i)}function mc(e,t,i,r){const n=zy(e,r);n!==void 0&&(t[i]=n)}const iK=/\/items\/([^\/]+)\/resources\//,rK=/^\.\/resources\//;function nK(e){const t=T(e)?e.match(iK):null;return T(t)?t[1]:null}function QA(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?V_(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function z2(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=fA();return ty(r,`${r.scheme}://${i}`)?V_(e,t.portalHostname,i):V_(e,i,t.portalHostname)}var dy;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(dy||(dy={}));const v1e=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:$p,toJSON:zy,read:XA,write:mc,itemIdFromResourceUrl:nK,ensureMainOnlineDomain:QA,get MarkKeep(){return dy}},Symbol.toStringTag,{value:"Module"}));var H2;const oK=yi()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let eu=H2=class extends U{constructor(e){super(e)}readHref(e,t,i){return e?$p(e,i):t.dataURI}writeHref(e,t,i,r){e&&(Ec(e)?t.dataURI=e:(t.href=zy(e,r),zi(t.href)&&(t.href=Dr(t.href))))}clone(){return new H2({href:this.href,primitive:this.primitive})}};l([c({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],eu.prototype,"href",void 0),l([Y("href")],eu.prototype,"readHref",null),l([X("href",{href:{type:String},dataURI:{type:String}})],eu.prototype,"writeHref",null),l([pe(oK)],eu.prototype,"primitive",void 0),eu=H2=l([S("esri.symbols.support.IconSymbol3DLayerResource")],eu);var G2;let Nd=G2=class extends se{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new G2({x:this.x,y:this.y})}};l([c({type:Number})],Nd.prototype,"x",void 0),l([c({type:Number})],Nd.prototype,"y",void 0),Nd=G2=l([S("esri.symbols.support.Symbol3DAnchorPosition2D")],Nd);var W2;let Hh=W2=class extends U{constructor(e){super(e),this.color=new ie([0,0,0,1]),this.size=qo(1)}clone(){const e={color:T(this.color)?this.color.clone():null,size:this.size};return new W2(e)}};l([c(Rl)],Hh.prototype,"color",void 0),l([c(Yo)],Hh.prototype,"size",void 0),Hh=W2=l([S("esri.symbols.support.Symbol3DIconOutline")],Hh);var Jc;const sK=W.getLogger("esri.symbols.IconSymbol3DLayer");let go=Jc=class extends Jo{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new Jc({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:T(this.material)?this.material.clone():null,outline:T(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Nf,i=II(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Nf).clone()}:null;return new Jc({size:e.size,resource:{primitive:lK(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||OY(e.color)?Nf:e.color,i=II(e);return new Jc({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new Jc({resource:{href:x5({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function II(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=MI(e.xoffset),n=MI(e.yoffset);return(r||n)&&t&&i?{x:-r/t,y:n/i}:null}function MI(e){return isFinite(e)?e:0}l([c({type:Or,json:{write:!0}})],go.prototype,"material",void 0),l([c({type:eu,json:{write:!0}})],go.prototype,"resource",void 0),l([pe({Icon:"icon"},{readOnly:!0})],go.prototype,"type",void 0),l([c(Yo)],go.prototype,"size",void 0),l([pe({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),c({json:{default:"center"}})],go.prototype,"anchor",void 0),l([c({type:Nd,json:{type:[Number],read:{reader:e=>new Nd({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],go.prototype,"anchorPosition",void 0),l([c({type:Hh,json:{write:!0}})],go.prototype,"outline",void 0),go=Jc=l([S("esri.symbols.IconSymbol3DLayer")],go);const aK={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function lK(e){return aK[e]||(sK.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Fu=go;W.getLogger("esri.core.Clonable");const gr=e=>{let t=class extends e{clone(){var u;const i=NV(Ii(this),"unable to clone instance of non-accessor class"),r=i.metadatas,n=i.store,o={},s=new Map;for(const d in r){const h=r[d],f=n==null?void 0:n.originOf(d),y=h.clonable;if(h.readOnly||y===!1||f!==De.USER&&f!==De.DEFAULTS&&f!==De.WEB_MAP&&f!==De.WEB_SCENE)continue;const m=this[d];let g=null;g=typeof y=="function"?y(m):y==="reference"?m:S_(m),m!=null&&g==null||(f===De.DEFAULTS?s.set(d,g):o[d]=g)}const a=new(Object.getPrototypeOf(this)).constructor(o);if(s.size){const d=(u=Ii(a))==null?void 0:u.store;if(d)for(const[h,f]of s)d.set(h,f,De.DEFAULTS)}return a}};return t=l([S("esri.core.Clonable")],t),t};let NI=class extends gr(se){};NI=l([S("esri.core.Clonable")],NI);let tu=class extends gr(U){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return T(e)&&e.placement===this.placement&&e.style===this.style&&(O(this.color)&&O(e.color)||T(this.color)&&T(e.color)&&this.color.toJSON()===e.color.toJSON())}};l([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],tu.prototype,"type",void 0),l([c({type:MY,json:{default:"begin-end",write:!0}})],tu.prototype,"placement",void 0),l([c({type:d9,json:{default:"arrow",write:!0}})],tu.prototype,"style",void 0),l([c({type:ie,json:{type:[Qe],default:null,write:!0}})],tu.prototype,"color",void 0),tu=l([S("esri.symbols.LineStyleMarker3D")],tu);const q2=tu;var Z0;let vo=Z0=class extends Jo{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=qo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:T(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:T(this.pattern)?this.pattern.clone():null,marker:T(this.marker)?this.marker.clone():null};return new Z0(e)}static fromSimpleLineSymbol(e){var i,r,n;const t={enabled:!0,size:(i=e.width)!=null?i:qo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new YA({style:e.style}):null,material:new Or({color:(e.color||Nf).clone()}),marker:e.marker?new q2({placement:e.marker.placement,style:e.marker.style,color:(n=(r=e.marker.color)==null?void 0:r.clone())!=null?n:null}):null};return new Z0(t)}};l([c({type:Or,json:{write:!0}})],vo.prototype,"material",void 0),l([pe({Line:"line"},{readOnly:!0})],vo.prototype,"type",void 0),l([c({type:g9,json:{write:!0,default:"miter"}})],vo.prototype,"join",void 0),l([c({type:JA,json:{write:!0,default:"butt"}})],vo.prototype,"cap",void 0),l([c(Yo)],vo.prototype,"size",void 0),l([c(m9)],vo.prototype,"pattern",void 0),l([c({types:{key:"type",base:q2,typeMap:{style:q2}},json:{write:!0}})],vo.prototype,"marker",void 0),vo=Z0=l([S("esri.symbols.LineSymbol3DLayer")],vo);const Hy=vo;var Y2;const uK=yi()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Gh=Y2=class extends U{clone(){return new Y2({href:this.href,primitive:this.primitive})}};l([c({type:String,json:{read:XA,write:mc}})],Gh.prototype,"href",void 0),l([pe(uK)],Gh.prototype,"primitive",void 0),Gh=Y2=l([S("esri.symbols.support.ObjectSymbol3DLayerResource")],Gh);var K2;let Au=K2=class extends se{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new K2({x:this.x,y:this.y,z:this.z})}};l([c({type:Number})],Au.prototype,"x",void 0),l([c({type:Number})],Au.prototype,"y",void 0),l([c({type:Number})],Au.prototype,"z",void 0),Au=K2=l([S("esri.symbols.support.Symbol3DAnchorPosition3D")],Au);var Z2;let wi=Z2=class extends Jo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new Z2({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:T(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};l([c({type:Or,json:{write:!0}})],wi.prototype,"material",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],wi.prototype,"castShadows",void 0),l([c({type:Gh,json:{write:!0}})],wi.prototype,"resource",void 0),l([pe({Object:"object"},{readOnly:!0})],wi.prototype,"type",void 0),l([c({type:Number,json:{write:!0}})],wi.prototype,"width",void 0),l([c({type:Number,json:{write:!0}})],wi.prototype,"height",void 0),l([c({type:Number,json:{write:!0}})],wi.prototype,"depth",void 0),l([pe({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),c({json:{default:"origin"}})],wi.prototype,"anchor",void 0),l([c({type:Au,json:{type:[Number],read:{reader:e=>new Au({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],wi.prototype,"anchorPosition",void 0),l([c({type:Number,json:{write:!0}})],wi.prototype,"heading",void 0),l([c({type:Number,json:{write:!0}})],wi.prototype,"tilt",void 0),l([c({type:Number,json:{write:!0}})],wi.prototype,"roll",void 0),l([c({readOnly:!0})],wi.prototype,"isPrimitive",null),wi=Z2=l([S("esri.symbols.ObjectSymbol3DLayer")],wi);const ex=wi;var J2;let $i=J2=class extends Jo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new J2({enabled:this.enabled,material:T(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};l([c({type:Or,json:{write:!0}})],$i.prototype,"material",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],$i.prototype,"castShadows",void 0),l([pe({Path:"path"},{readOnly:!0})],$i.prototype,"type",void 0),l([c({type:["circle","quad"],json:{write:!0,default:"circle"}})],$i.prototype,"profile",void 0),l([c({type:g9,json:{write:!0,default:"miter"}})],$i.prototype,"join",void 0),l([c({type:ZY,json:{write:!0,default:"butt"}})],$i.prototype,"cap",void 0),l([c({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],$i.prototype,"width",void 0),l([Y("width",["width","size","height"])],$i.prototype,"readWidth",null),l([c({type:Number,json:{write:!0}})],$i.prototype,"height",void 0),l([Y("height",["height","size","width"])],$i.prototype,"readHeight",null),l([c({type:["center","bottom","top"],json:{write:!0,default:"center"}})],$i.prototype,"anchor",void 0),l([c({type:["heading","all"],json:{write:!0,default:"all"}})],$i.prototype,"profileRotation",void 0),$i=J2=l([S("esri.symbols.PathSymbol3DLayer")],$i);const tx=$i;var X2;let Rd=X2=class extends U{constructor(){super(...arguments),this.color=new ie([0,0,0,1]),this.size=0}clone(){const e={color:R(this.color),size:this.size};return new X2(e)}};l([c(Rl)],Rd.prototype,"color",void 0),l([c(Yo)],Rd.prototype,"size",void 0),Rd=X2=l([S("esri.symbols.support.Symbol3DHalo")],Rd);let Pf=class extends gr(U){constructor(e){super(e),this.color=null}};l([c(Rl)],Pf.prototype,"color",void 0),Pf=l([S("esri.symbols.support.Symbol3DTextBackground")],Pf);var J0;let Xi=J0=class extends Jo{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){T(e)&&T(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const n={...r,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return T(this._userSize)?this._userSize:T(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,T(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new J0({enabled:this.enabled,font:this.font&&R(this.font),halo:this.halo&&R(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:T(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:R(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new J0({font:T(e.font)?e.font.clone():new Vv,halo:cK(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Or({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Pf({color:e.backgroundColor.clone()}):null})}};function cK(e,t){return e&&t>0?new Rd({color:R(e),size:t}):null}l([c({type:Vv,json:{write:!0}})],Xi.prototype,"font",null),l([X("font")],Xi.prototype,"writeFont",null),l([c({type:Rd,json:{write:!0}})],Xi.prototype,"halo",void 0),l([c({...w9,json:{default:"center",write:!0}})],Xi.prototype,"horizontalAlignment",void 0),l([c({...v9,json:{default:1,write:!0}})],Xi.prototype,"lineHeight",void 0),l([c({type:Or,json:{write:!0}})],Xi.prototype,"material",void 0),l([c({type:Pf,json:{write:!0}})],Xi.prototype,"background",void 0),l([c(Yo)],Xi.prototype,"size",null),l([c({type:String,json:{write:!0}})],Xi.prototype,"text",void 0),l([pe({Text:"text"},{readOnly:!0})],Xi.prototype,"type",void 0),l([c({...b9,json:{default:"baseline",write:!0}})],Xi.prototype,"verticalAlignment",void 0),Xi=J0=l([S("esri.symbols.TextSymbol3DLayer")],Xi);const Dp=Xi;var Q2;let Ea=Q2=class extends Jo{constructor(e){super(e),this.color=eS.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Q2({color:R(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};l([c({type:ie,nonNullable:!0,json:{type:[Qe],write:(e,t,i)=>t[i]=e.toArray(ie.AlphaMode.UNLESS_OPAQUE),default:()=>eS.clone(),defaultEquals:e=>e.toCss(!0)===eS.toCss(!0)}})],Ea.prototype,"color",void 0),l([pe({Water:"water"},{readOnly:!0})],Ea.prototype,"type",void 0),l([c({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Ea.prototype,"waterbodySize",void 0),l([c({type:Number,json:{write:!0,default:null}})],Ea.prototype,"waveDirection",void 0),l([c({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Ea.prototype,"waveStrength",void 0),Ea=Q2=l([S("esri.symbols.WaterSymbol3DLayer")],Ea);const eS=new ie([0,119,190]),_9=Ea;var tS;let iu=tS=class extends se{constructor(){super(...arguments),this.portal=null}clone(){return new tS({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};l([c({type:String})],iu.prototype,"name",void 0),l([c({type:String})],iu.prototype,"styleUrl",void 0),l([c({type:String})],iu.prototype,"styleName",void 0),l([c({type:Yt})],iu.prototype,"portal",void 0),iu=tS=l([S("esri.symbols.support.StyleOrigin")],iu);const iS=iu;var rS;let $f=rS=class extends se{clone(){return new rS({url:this.url})}};l([c({type:String})],$f.prototype,"url",void 0),$f=rS=l([S("esri.symbols.support.Thumbnail")],$f);const S9={icon:Fu,object:ex,line:Hy,path:tx,fill:Uv,extrude:c9,text:Dp,water:_9},dK=he.ofType({base:Jo,key:"type",typeMap:S9,errorContext:"symbol-layer"}),pK=W.getLogger("esri.symbols.Symbol3D");let wo=class extends mr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||he;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.initialized&&pK.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){lc(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const r=$p(e.styleUrl,i);return new iS({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new iS({portal:i&&i.portal||Yt.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new Yi("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let n=zy(e.styleUrl,r);zi(n)&&(n=Dr(n)),t.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!T5(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new Yi("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Jo||e&&S9[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};l([c({json:{read:!1,write:!1}})],wo.prototype,"color",null),l([c({type:dK,nonNullable:!0,json:{write:!0}}),Fe(c5)],wo.prototype,"symbolLayers",null),l([c({type:iS})],wo.prototype,"styleOrigin",void 0),l([Y("styleOrigin")],wo.prototype,"readStyleOrigin",null),l([X("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],wo.prototype,"writeStyleOrigin",null),l([c({type:$f,json:{read:!1}})],wo.prototype,"thumbnail",void 0),l([c({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],wo.prototype,"type",void 0),wo=l([S("esri.symbols.Symbol3D")],wo);const Lp=wo;let Wh=class extends U{constructor(e){super(e),this.visible=!0}clone(){}};l([c({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Wh.prototype,"type",void 0),l([c({readOnly:!0})],Wh.prototype,"visible",void 0),Wh=l([S("esri.symbols.callouts.Callout3D")],Wh);const T9=Wh;var nS;let X0=nS=class extends U{constructor(){super(...arguments),this.color=new ie("white")}clone(){return new nS({color:R(this.color)})}};l([c(Rl)],X0.prototype,"color",void 0),X0=nS=l([S("esri.symbols.callouts.LineCallout3DBorder")],X0);const E9=X0;Object.freeze(Object.defineProperty({__proto__:null,default:E9},Symbol.toStringTag,{value:"Module"}));var oS;let Aa=oS=class extends T9{constructor(e){super(e),this.type="line",this.color=new ie([0,0,0,1]),this.size=qo(1),this.border=null}get visible(){return this.size>0&&T(this.color)&&this.color.a>0}clone(){return new oS({color:R(this.color),size:this.size,border:R(this.border)})}};l([pe({line:"line"},{readOnly:!0})],Aa.prototype,"type",void 0),l([c(Rl)],Aa.prototype,"color",void 0),l([c(Yo)],Aa.prototype,"size",void 0),l([c({type:E9,json:{write:!0}})],Aa.prototype,"border",void 0),l([c({readOnly:!0})],Aa.prototype,"visible",null),Aa=oS=l([S("esri.symbols.callouts.LineCallout3D")],Aa);const hK=Aa;function ix(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function A9(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!ix(e)}const x9={types:{key:"type",base:T9,typeMap:{line:hK}},json:{write:!0}};var sS;let xu=sS=class extends U{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new sS({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};l([c(Yo)],xu.prototype,"screenLength",void 0),l([c({type:Number,json:{write:!0,default:0}})],xu.prototype,"minWorldLength",void 0),l([c({type:Number,json:{write:!0}})],xu.prototype,"maxWorldLength",void 0),xu=sS=l([S("esri.symbols.support.Symbol3DVerticalOffset")],xu);var Q0;const C9=he.ofType({base:null,key:"type",typeMap:{text:Dp}});let xa=Q0=class extends Lp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new C9,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return A9(this)}hasVisibleVerticalOffset(){return ix(this)}clone(){return new Q0({styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail),callout:R(this.callout),verticalOffset:R(this.verticalOffset)})}static fromTextSymbol(e){return new Q0({symbolLayers:[Dp.fromTextSymbol(e)]})}};l([c({type:xu,json:{write:!0}})],xa.prototype,"verticalOffset",void 0),l([c(x9)],xa.prototype,"callout",void 0),l([c({json:{read:!1,write:!1}})],xa.prototype,"styleOrigin",void 0),l([c({type:C9})],xa.prototype,"symbolLayers",void 0),l([pe({LabelSymbol3D:"label-3d"},{readOnly:!0})],xa.prototype,"type",void 0),xa=Q0=l([S("esri.symbols.LabelSymbol3D")],xa);const jv=xa;var eg;const I9=he.ofType({base:null,key:"type",typeMap:{line:Hy,path:tx}}),fK=he.ofType({base:null,key:"type",typeMap:{line:Hy,path:tx}});let qh=eg=class extends Lp{constructor(e){super(e),this.symbolLayers=new I9,this.type="line-3d"}clone(){return new eg({styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail)})}static fromSimpleLineSymbol(e){return new eg({symbolLayers:[Hy.fromSimpleLineSymbol(e)]})}};l([c({type:I9,json:{type:fK}})],qh.prototype,"symbolLayers",void 0),l([pe({LineSymbol3D:"line-3d"},{readOnly:!0})],qh.prototype,"type",void 0),qh=eg=l([S("esri.symbols.LineSymbol3D")],qh);const zv=qh;let Ca=class extends mr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};l([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ca.prototype,"angle",void 0),l([c({type:["simple-marker","picture-marker"],readOnly:!0})],Ca.prototype,"type",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Ca.prototype,"xoffset",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Ca.prototype,"yoffset",void 0),l([c({type:Number,cast:e=>e==="auto"?e:je(e),json:{write:!0}})],Ca.prototype,"size",void 0),Ca=l([S("esri.symbols.MarkerSymbol")],Ca);const M9=Ca;var aS;const N9=he.ofType({base:null,key:"type",typeMap:{fill:Uv}});let Yh=aS=class extends Lp{constructor(e){super(e),this.symbolLayers=new N9,this.type="mesh-3d"}clone(){return new aS({styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail)})}};l([c({type:N9})],Yh.prototype,"symbolLayers",void 0),l([pe({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Yh.prototype,"type",void 0),Yh=aS=l([S("esri.symbols.MeshSymbol3D")],Yh);const rx=Yh;function yK(e,t,i){return t.imageData?x5({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):R9(t.url,i)}function R9(e,t){return gK(t)&&!zi(e)&&t.layer.parsedUrl?Go(t.layer.parsedUrl.path,"images",e):$p(e,t)}function mK(e,t,i,r){if(Ec(e)){const n=A5(e);t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&mc(i.url,t,"url",r)}else mc(e,t,"url",r)}const P9={json:{read:{source:["imageData","url"],reader:yK},write:{writer(e,t,i,r){mK(e,t,this.source,r)}}}},$9={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=R9(t.url,i)),r}}}};function gK(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var lS;let Zr=lS=class extends p9{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),i!=null&&(n.width=je(i)),r!=null&&(n.height=je(r)),n}clone(){const e=new lS({color:R(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",R(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};l([pe({esriPFS:"picture-fill"},{readOnly:!0})],Zr.prototype,"type",void 0),l([c(P9)],Zr.prototype,"url",void 0),l([c({type:Number,json:{write:!0}})],Zr.prototype,"xscale",void 0),l([c({type:Number,json:{write:!0}})],Zr.prototype,"yscale",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Zr.prototype,"width",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Zr.prototype,"height",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Zr.prototype,"xoffset",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Zr.prototype,"yoffset",void 0),l([c($9)],Zr.prototype,"source",void 0),Zr=lS=l([S("esri.symbols.PictureFillSymbol")],Zr);const D9=Zr;var uS;let Rn=uS=class extends M9{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=je(t)),i!=null&&(r.height=je(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new uS({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",R(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};l([c({json:{write:!1}})],Rn.prototype,"color",void 0),l([pe({esriPMS:"picture-marker"},{readOnly:!0})],Rn.prototype,"type",void 0),l([c(P9)],Rn.prototype,"url",void 0),l([c($9)],Rn.prototype,"source",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Rn.prototype,"height",void 0),l([Y("height",["height","size"])],Rn.prototype,"readHeight",null),l([c({type:Number,cast:je,json:{write:!0}})],Rn.prototype,"width",void 0),l([c({json:{write:!1}})],Rn.prototype,"size",void 0),Rn=uS=l([S("esri.symbols.PictureMarkerSymbol")],Rn);const Gy=Rn;var Ia;const L9=he.ofType({base:null,key:"type",typeMap:{icon:Fu,object:ex,text:Dp}});let ru=Ia=class extends Lp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new L9,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return A9(this)}hasVisibleVerticalOffset(){return ix(this)}clone(){return new Ia({verticalOffset:R(this.verticalOffset),callout:R(this.callout),styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Ia({symbolLayers:[Fu.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Ia({symbolLayers:[Fu.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var i,r;return((r=(i=e.data)==null?void 0:i.symbol)==null?void 0:r.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new Ia({symbolLayers:[Fu.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new Ia({symbolLayers:[Fu.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Ia({symbolLayers:[Dp.fromTextSymbol(e)]})}};l([c({type:xu,json:{write:!0}})],ru.prototype,"verticalOffset",void 0),l([c(x9)],ru.prototype,"callout",void 0),l([c({type:L9,json:{origins:{"web-scene":{write:!0}}}})],ru.prototype,"symbolLayers",void 0),l([pe({PointSymbol3D:"point-3d"},{readOnly:!0})],ru.prototype,"type",void 0),ru=Ia=l([S("esri.symbols.PointSymbol3D")],ru);const Bu=ru;var Kh;const O9=he.ofType({base:null,key:"type",typeMap:{extrude:c9,fill:Uv,icon:Fu,line:Hy,object:ex,text:Dp,water:_9}});let Zh=Kh=class extends Lp{constructor(e){super(e),this.symbolLayers=new O9,this.type="polygon-3d"}clone(){return new Kh({styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail)})}static fromJSON(e){const t=new Kh;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:T(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Kh({symbolLayers:[Uv.fromSimpleFillSymbol(e)]})}};l([c({type:O9,json:{write:!0}})],Zh.prototype,"symbolLayers",void 0),l([pe({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Zh.prototype,"type",void 0),Zh=Kh=l([S("esri.symbols.PolygonSymbol3D")],Zh);const Wy=Zh;var cS;const Qw=new Se({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let nu=cS=class extends p9{constructor(...e){super(...e),this.color=new ie([0,0,0,.25]),this.outline=new Br,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new cS({color:R(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};l([c()],nu.prototype,"color",void 0),l([c()],nu.prototype,"outline",void 0),l([pe({esriSFS:"simple-fill"},{readOnly:!0})],nu.prototype,"type",void 0),l([c({type:Qw.apiValues,json:{read:Qw.read,write:Qw.write}})],nu.prototype,"style",void 0),nu=cS=l([S("esri.symbols.SimpleFillSymbol")],nu);const Xs=nu;var dS;const eb=new Se({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let bo=dS=class extends M9{constructor(...e){super(...e),this.color=new ie([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Br}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=je(t)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new dS({angle:this.angle,color:R(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};l([c()],bo.prototype,"color",void 0),l([X("color")],bo.prototype,"writeColor",null),l([pe({esriSMS:"simple-marker"},{readOnly:!0})],bo.prototype,"type",void 0),l([c()],bo.prototype,"size",void 0),l([c({type:eb.apiValues,json:{read:eb.read,write:eb.write}})],bo.prototype,"style",void 0),l([c({type:String,json:{write:!0}})],bo.prototype,"path",null),l([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Br}},json:{default:null,write:!0}})],bo.prototype,"outline",void 0),bo=dS=l([S("esri.symbols.SimpleMarkerSymbol")],bo);const Pl=bo;var pS;let st=pS=class extends mr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Vv,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return je(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new pS({angle:this.angle,backgroundColor:R(this.backgroundColor),borderLineColor:R(this.borderLineColor),borderLineSize:this.borderLineSize,color:R(this.color),font:this.font&&this.font.clone(),haloColor:R(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};l([c({type:ie,json:{write:!0}})],st.prototype,"backgroundColor",void 0),l([c({type:ie,json:{write:!0}})],st.prototype,"borderLineColor",void 0),l([c({type:Number,json:{write:!0}})],st.prototype,"borderLineSize",void 0),l([c({type:Vv,json:{write:!0}})],st.prototype,"font",void 0),l([c({...w9,json:{write:!0}})],st.prototype,"horizontalAlignment",void 0),l([c({type:Boolean,json:{write:!0}})],st.prototype,"kerning",void 0),l([c({type:ie,json:{write:!0}})],st.prototype,"haloColor",void 0),l([c({type:Number,cast:je,json:{write:!0}})],st.prototype,"haloSize",void 0),l([c({type:Boolean,json:{write:!0}})],st.prototype,"rightToLeft",void 0),l([c({type:Boolean,json:{write:!0}})],st.prototype,"rotated",void 0),l([c({type:String,json:{write:!0}})],st.prototype,"text",void 0),l([pe({esriTS:"text"},{readOnly:!0})],st.prototype,"type",void 0),l([c({...b9,json:{write:!0}})],st.prototype,"verticalAlignment",void 0),l([c({type:Number,cast:je,json:{write:!0}})],st.prototype,"xoffset",void 0),l([c({type:Number,cast:je,json:{write:!0}})],st.prototype,"yoffset",void 0),l([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],st.prototype,"angle",void 0),l([c({type:Number,json:{write:!0}})],st.prototype,"width",void 0),l([c({type:Number})],st.prototype,"lineWidth",void 0),l([X("lineWidth")],st.prototype,"writeLineWidth",null),l([Fe("lineWidth")],st.prototype,"castLineWidth",null),l([c(v9)],st.prototype,"lineHeight",void 0),l([X("lineHeight")],st.prototype,"writeLineHeight",null),st=pS=l([S("esri.symbols.TextSymbol")],st);const Cc=st;var hS;const vK=W.getLogger("esri.symbols.WebStyleSymbol");let Pn=hS=class extends mr{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const e=T(this.portal)?this.portal:Yt.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new hS({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=T(t)?t.cache:null,r=i?this.fetchCacheKey:null;if(T(i)){const a=i.get(r);if(a)return a.clone()}const n=await wK();bt(t);const o=n.resolveWebStyleSymbol(this,{portal:this.portal},e,t);o.catch(a=>{vK.error("#fetchSymbol()","Failed to create symbol from style",a)});const s=await o;return e==="webRef"&&s.type==="point-3d"||e==="cimRef"&&s.type==="cim"?(T(i)&&i.set(r,s.clone()),s):null}};function wK(){return B(()=>import("./webStyleSymbolUtils.1e1a14bc.js"),["webStyleSymbolUtils.1e1a14bc.js","devEnvironmentUtils.8c6e6b72.js"],import.meta.url)}l([c({json:{write:!1}})],Pn.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],Pn.prototype,"styleName",void 0),l([c({type:Yt,json:{write:!1}})],Pn.prototype,"portal",void 0),l([c({type:String,json:{read:XA,write:mc}})],Pn.prototype,"styleUrl",void 0),l([c({type:$f,json:{read:!1}})],Pn.prototype,"thumbnail",void 0),l([c({type:String,json:{write:!0}})],Pn.prototype,"name",void 0),l([pe({styleSymbolReference:"web-style"},{readOnly:!0})],Pn.prototype,"type",void 0),l([c()],Pn.prototype,"fetchCacheKey",null),Pn=hS=l([S("esri.symbols.WebStyleSymbol")],Pn);const Ic=Pn;function Hv(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function pp(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const ic={base:mr,key:"type",typeMap:{"simple-fill":Xs,"picture-fill":D9,"picture-marker":Gy,"simple-line":Br,"simple-marker":Pl,text:Cc,"label-3d":jv,"line-3d":zv,"mesh-3d":rx,"point-3d":Bu,"polygon-3d":Wy,"web-style":Ic,cim:jy},errorContext:"symbol"},bK={base:mr,key:"type",typeMap:{"picture-marker":Gy,"simple-marker":Pl,text:Cc,"web-style":Ic,cim:jy},errorContext:"symbol"},_K=Cp({types:ic}),k9={base:mr,key:"type",typeMap:{"simple-fill":Xs,"picture-fill":D9,"picture-marker":Gy,"simple-line":Br,"simple-marker":Pl,text:Cc,"line-3d":zv,"mesh-3d":rx,"point-3d":Bu,"polygon-3d":Wy,"web-style":Ic,cim:jy},errorContext:"symbol"},SK={base:mr,key:"type",typeMap:{text:Cc,"label-3d":jv},errorContext:"symbol"},RI={base:mr,key:"type",typeMap:{"line-3d":zv,"mesh-3d":rx,"point-3d":Bu,"polygon-3d":Wy,"web-style":Ic,cim:jy},errorContext:"symbol"},TK={base:mr,key:"type",typeMap:{"label-3d":jv},errorContext:"symbol"},F9=zo(ic);function EK(e){if(!e)return null;const t={};for(const i in e){const r=Ki(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function AK(e){if(!T(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let Qi=class extends gr(U){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Af(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&T(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:AK(this.aggregateGeometries),geometry:T(this.geometry)?this.geometry.toJSON():null,symbol:T(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){T(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}};l([c({value:null,json:{read:EK}})],Qi.prototype,"aggregateGeometries",null),l([c({value:null})],Qi.prototype,"attributes",null),l([c({value:null,types:Ac,json:{read:Ki}})],Qi.prototype,"geometry",null),l([c({type:Boolean})],Qi.prototype,"isAggregate",void 0),l([c({clonable:"reference"})],Qi.prototype,"layer",void 0),l([c({type:Nl})],Qi.prototype,"popupTemplate",void 0),l([c({clonable:"reference"})],Qi.prototype,"sourceLayer",void 0),l([c({value:null,types:ic})],Qi.prototype,"symbol",null),l([c({type:Boolean,value:!0})],Qi.prototype,"visible",null),Qi=l([S("esri.Graphic")],Qi),function(e){e.generateUID=Af}(Qi||(Qi={}));const Ni=Qi;class nx{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,n=0,o=!1){return(r-=n)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),o&&r===i&&(r=t),r+n}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return hr(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,n=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(n)?r:n}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}}function ox(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}ox(new nx(0,2*Math.PI));ox(new nx(-Math.PI,Math.PI));const xK=ox(new nx(0,360));let ms=class extends gr(U){constructor(...e){super(...e),this.position=new le([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return t!=null&&(n.heading=t),i!=null&&(n.tilt=i),r!=null&&(n.fov=r),n}return e}writePosition(e,t,i,r){const n=e.clone();n.x=on(e.x||0),n.y=on(e.y||0),n.z=e.hasZ?on(e.z||0):e.z,t[i]=n.write({},r)}readPosition(e,t){const i=new le;return i.read(e,t),i.x=on(i.x||0),i.y=on(i.y||0),i.z=i.hasZ?on(i.z||0):i.z,i}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};l([c({type:le,json:{write:{isRequired:!0}}})],ms.prototype,"position",void 0),l([X("position")],ms.prototype,"writePosition",null),l([Y("position")],ms.prototype,"readPosition",null),l([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Fe(e=>xK.normalize(on(e)))],ms.prototype,"heading",void 0),l([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Fe(e=>hr(on(e),-180,180))],ms.prototype,"tilt",void 0),l([c({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ms.prototype,"fov",void 0),ms=l([S("esri.Camera")],ms);const CK=ms;var fS;let Ma=fS=class extends U{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new fS({rotation:this.rotation,scale:this.scale,targetGeometry:T(this.targetGeometry)?this.targetGeometry.clone():null,camera:T(this.camera)?this.camera.clone():null})}};function tb(){return{enabled:!this.camera}}l([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:tb}}}}})],Ma.prototype,"rotation",void 0),l([Fe("rotation")],Ma.prototype,"castRotation",null),l([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:tb}}}}})],Ma.prototype,"scale",void 0),l([c({types:Ac,json:{read:Ki,write:!0,origins:{"web-scene":{read:Ki,write:{overridePolicy:tb}}}}})],Ma.prototype,"targetGeometry",void 0),l([c({type:CK,json:{write:!0}})],Ma.prototype,"camera",void 0),Ma=fS=l([S("esri.Viewpoint")],Ma);const Oo=Ma;class m1{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}var Hi;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Hi||(Hi={}));let IK=0;function B9(){return IK++}function MK(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function g1(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function U9(e,t,i,r){if(t.type===Hi.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Hi.INVOKE&&t.type!==Hi.RESPONSE)return void e.postMessage(t);let n;MK(i)?(n=PI(i.transferList),t.data=i.result):(n=PI(r),t.data=i),n?e.postMessage(t,n):e.postMessage(t)}function py(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function PI(e){if(!e||!e.length)return null;if(k("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!NK(i));return t.length?t:null}function NK(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const RK={statsWorker:()=>B(()=>import("./statsWorker.94696ee5.js"),["statsWorker.94696ee5.js","quantizationUtils.504677c0.js","utils.b988e9ba.js","ClassBreaksDefinition.7a4f2265.js"],import.meta.url),geometryEngineWorker:()=>B(()=>import("./geometryEngineWorker.dfc67929.js"),["geometryEngineWorker.dfc67929.js","geometryEngineJSON.a34a7363.js","geometryEngineBase.cf4f989f.js","json.d1a0fa35.js"],import.meta.url),CSVSourceWorker:()=>B(()=>import("./CSVSourceWorker.37ce36a3.js"),["CSVSourceWorker.37ce36a3.js","json.d1a0fa35.js","FeatureStore.24e92b93.js","PooledRBush.b1e7ac60.js","centroid.7e9e1950.js","projectionSupport.179b2c07.js","QueryEngine.e70470ff.js","QueryEngineResult.9118bf1e.js","quantizationUtils.504677c0.js","WhereClause.443cc7a7.js","utils.b988e9ba.js","ClassBreaksDefinition.7a4f2265.js","utils.685193b6.js","timeSupport.4e1e9033.js"],import.meta.url),EdgeProcessingWorker:()=>B(()=>import("./EdgeProcessingWorker.40d17ce4.js"),["EdgeProcessingWorker.40d17ce4.js","deduplicate.840a07a2.js","InterleavedLayout.06f0aea9.js","BufferView.ce01291a.js","types.c001a273.js","VertexAttribute.5551e0d8.js"],import.meta.url),ElevationSamplerWorker:()=>B(()=>import("./ElevationSamplerWorker.a13bc6c2.js"),["ElevationSamplerWorker.a13bc6c2.js","PooledRBush.b1e7ac60.js","georeference.d878f3fd.js","quatf64.ddec7ef6.js","mat4f64.a79dd289.js","quat.678aab73.js","BufferView.ce01291a.js","vec33.dbb8545c.js"],import.meta.url),FeatureServiceSnappingSourceWorker:()=>B(()=>import("./FeatureServiceSnappingSourceWorker.b0336fc1.js"),["FeatureServiceSnappingSourceWorker.b0336fc1.js","FeatureStore.24e92b93.js","PooledRBush.b1e7ac60.js","centroid.7e9e1950.js","QueryEngine.e70470ff.js","QueryEngineResult.9118bf1e.js","quantizationUtils.504677c0.js","WhereClause.443cc7a7.js","utils.b988e9ba.js","ClassBreaksDefinition.7a4f2265.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","utils.685193b6.js","timeSupport.4e1e9033.js"],import.meta.url),GeoJSONSourceWorker:()=>B(()=>import("./GeoJSONSourceWorker.07de2233.js"),["GeoJSONSourceWorker.07de2233.js","FeatureStore.24e92b93.js","PooledRBush.b1e7ac60.js","centroid.7e9e1950.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","QueryEngine.e70470ff.js","QueryEngineResult.9118bf1e.js","quantizationUtils.504677c0.js","WhereClause.443cc7a7.js","utils.b988e9ba.js","ClassBreaksDefinition.7a4f2265.js","utils.685193b6.js","timeSupport.4e1e9033.js","geojson.8cfcff4a.js","sourceUtils.c6b115be.js"],import.meta.url),LercWorker:()=>B(()=>import("./LercWorker.c3195f31.js"),[],import.meta.url),MemorySourceWorker:()=>B(()=>import("./MemorySourceWorker.2395b9fd.js"),["MemorySourceWorker.2395b9fd.js","objectIdUtils.773397d7.js","FeatureStore.24e92b93.js","PooledRBush.b1e7ac60.js","centroid.7e9e1950.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","QueryEngine.e70470ff.js","QueryEngineResult.9118bf1e.js","quantizationUtils.504677c0.js","WhereClause.443cc7a7.js","utils.b988e9ba.js","ClassBreaksDefinition.7a4f2265.js","utils.685193b6.js","timeSupport.4e1e9033.js","sourceUtils.c6b115be.js"],import.meta.url),PBFDecoderWorker:()=>B(()=>import("./PBFDecoderWorker.53d6c512.js"),[],import.meta.url),Pipeline:()=>B(()=>import("./Pipeline.2aa092e0.js"),["Pipeline.2aa092e0.js","QueryEngine.e70470ff.js","QueryEngineResult.9118bf1e.js","quantizationUtils.504677c0.js","WhereClause.443cc7a7.js","utils.b988e9ba.js","ClassBreaksDefinition.7a4f2265.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","utils.685193b6.js","timeSupport.4e1e9033.js","FeatureStore2D.7eb6ff8d.js","CircularArray.0dc82e32.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","visualVariablesUtils.0da211a7.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","visualVariablesUtils.e9b6c4c3.js","ogcFeatureUtils.9a6f41e3.js","geojson.8cfcff4a.js"],import.meta.url),PointCloudWorker:()=>B(()=>import("./PointCloudWorker.371f144b.js"),["PointCloudWorker.371f144b.js","quat.678aab73.js","quatf64.ddec7ef6.js","vec3f32.8d37ecf5.js","PointCloudUniqueValueRenderer.8c9ffa73.js","VertexAttribute.5551e0d8.js"],import.meta.url),RasterWorker:()=>B(()=>import("./RasterWorker.10831a83.js"),["RasterWorker.10831a83.js","pixelUtils.af09ba54.js","RasterSymbolizer.d12148a2.js","rasterProjectionHelper.89a91399.js","dataUtils.d155936b.js","utils.4a2943ff.js"],import.meta.url),SceneLayerSnappingSourceWorker:()=>B(()=>import("./SceneLayerSnappingSourceWorker.b0332092.js"),["SceneLayerSnappingSourceWorker.b0332092.js","lineSegment.5fc2dfcd.js","vectorStacks.964e571a.js","quatf64.ddec7ef6.js","mat4f64.a79dd289.js","sphere.0fb59b47.js","QueryEngineResult.9118bf1e.js","quantizationUtils.504677c0.js","WhereClause.443cc7a7.js","utils.b988e9ba.js","ClassBreaksDefinition.7a4f2265.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","utils.685193b6.js","Util.cd8835fc.js","EdgeProcessingWorker.40d17ce4.js","deduplicate.840a07a2.js","InterleavedLayout.06f0aea9.js","BufferView.ce01291a.js","types.c001a273.js","VertexAttribute.5551e0d8.js"],import.meta.url),SceneLayerWorker:()=>B(()=>import("./SceneLayerWorker.f70c2a5a.js"),["SceneLayerWorker.f70c2a5a.js","sphere.0fb59b47.js","vectorStacks.964e571a.js","quatf64.ddec7ef6.js","mat4f64.a79dd289.js"],import.meta.url),WFSSourceWorker:()=>B(()=>import("./WFSSourceWorker.0abd97d4.js"),["WFSSourceWorker.0abd97d4.js","FeatureStore.24e92b93.js","PooledRBush.b1e7ac60.js","centroid.7e9e1950.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","QueryEngine.e70470ff.js","QueryEngineResult.9118bf1e.js","quantizationUtils.504677c0.js","WhereClause.443cc7a7.js","utils.b988e9ba.js","ClassBreaksDefinition.7a4f2265.js","utils.685193b6.js","timeSupport.4e1e9033.js","geojson.8cfcff4a.js","sourceUtils.c6b115be.js","wfsUtils.26c55bb1.js","xmlUtils.986ddba5.js"],import.meta.url),WorkerTileHandler:()=>B(()=>import("./WorkerTileHandler.8497350c.js"),["WorkerTileHandler.8497350c.js","BidiEngine.ec67919b.js","config.40d47db8.js","TileClipper.751deb6d.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js"],import.meta.url)},{CLOSE:$I,ABORT:DI,INVOKE:LI,RESPONSE:nh,OPEN_PORT:OI,ON:PK}=Hi,$K=2;class DK{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Hi.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class lr{constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new DK(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new lr(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=n),lr.clients.set(n,r),i.port2}static loadWorker(t){const i=RK[t];return i?i():Promise.resolve(null)}close(){this._post({type:$I}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const n=r&&r.signal,o=r&&r.transferList;if(!this._port)return Promise.reject(new I("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const s=B9();return new Promise((a,u)=>{if(pn(n))return this._processWork(),void u(wt());const d=hn(n,()=>{const f=this._outJobs.get(s);f&&(this._outJobs.delete(s),this._processWork(),$r(f.abortHandle),this._post({type:DI,jobId:s}),u(wt()))}),h={resolve:a,reject:u,abortHandle:d,debugInfo:t};this._outJobs.set(s,h),this._post({type:LI,jobId:s,methodName:t,abortable:n!=null},i,o)})}on(t,i){const r=new MessageChannel;function n(o){i(o.data)}return this._port.postMessage({type:Hi.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove(){r.port1.postMessage({type:Hi.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:OI,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=$K)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:n,deferred:o}=t;this.invoke(i,r,n).then(s=>o.resolve(s)).catch(s=>o.reject(s))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{$r(t.abortHandle),t.reject(wt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){T(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=py(t);if(i)switch(i.type){case nh:this._onResponseMessage(i);break;case LI:this._invokeQueue.push(i);break;case DI:this._onAbortMessage(i);break;case $I:this._onCloseMessage();break;case OI:this._onOpenPortMessage(i);break;case PK:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&lr.clients.get(this)===t&&t.destroy(),lr.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:o}=t,s=o?new AbortController:null,a=this._inJobs;let u,d=this._client,h=d[i];try{if(!h&&i&&i.includes(".")){const f=i.split(".");for(let y=0;y<f.length-1;y++)d=d[f[y]],h=d[f[y+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);u=h.call(d,n,{client:this,signal:s?s.signal:null})}catch(f){return void this._post({type:nh,jobId:r,error:g1(f)})}Zs(u)?(a.set(r,{controller:s,promise:u}),u.then(f=>{a.has(r)&&(a.delete(r),this._post({type:nh,jobId:r},f))},f=>{a.has(r)&&(a.delete(r),qi(f)||this._post({type:nh,jobId:r,error:g1(f||{message:`Error encountered at method ${i}`})}))})):this._post({type:nh,jobId:r},u)}_onOpenPortMessage(t){new lr(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,o=>{i.postMessage(o)}),n=bv(t.port,"message",o=>{py(o).type===Hi.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,o=this._outJobs;if(!o.has(i))return;const s=o.get(i);this._processWork(),o.delete(i),$r(s.abortHandle),r?s.reject(I.fromJSON(JSON.parse(r))):s.resolve(n)}_post(t,i,r){return U9(this._port,t,i,r)}}lr.kernelInfo={revision:$5,version:D5,buildDate:P5},lr.clients=new Map;const LK=W.getLogger("esri.core.workers.Connection");class OK{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new m1}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,n)=>{let o=!0;const s=a=>{bt(i.signal),o&&(o=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const u=t[a];Zs(u)?this._clientPromises[a]=u.then(d=>(this._clients[a]=new lr(d,i,()=>this._ongoingJobsQueue.pop()),s(r),this._clients[a]),()=>(s(n),null)):(this._clients[a]=new lr(u,i,()=>this._ongoingJobsQueue.pop()),this._clientPromises[a]=Promise.resolve(this._clients[a]),s(r))}})}broadcast(t,i,r){const n=new Array(this._clientPromises.length);for(let o=0;o<this._clientPromises.length;++o){const s=this._clientPromises[o];n[o]=s.then(a=>a.invoke(t,i,r))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(wt(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,r){let n=null;Array.isArray(r)?(LK.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r;const o=Ws();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:n,deferred:o});for(let s=0;s<this._clientPromises.length;s++){const a=this._clients[s];a?a.jobAdded():this._clientPromises[s].then(u=>u.jobAdded())}return o.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>mv(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(o=>{i[n]=o.openPort(),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const V9=W.getLogger("esri.intl");function Hn(e,t,i={}){const{format:r={}}=i;return jo(e,n=>kK(n,t,r))}function kK(e,t,i){let r,n;const o=e.indexOf(":");if(o===-1?r=e.trim():(r=e.slice(0,o).trim(),n=e.slice(o+1).trim()),!r)return"";const s=Ap(r,t);if(s==null)return"";const a=i[n]||i[r];return a?FK(s,a):n?BK(s,n):sx(s)}function FK(e,t){switch(t.type){case"date":return Wo(e,t.intlOptions);case"number":return Al(e,t.intlOptions);default:return V9.warn("missing format descriptor for key {key}"),sx(e)}}function BK(e,t){switch(t.toLowerCase()){case"dateformat":return Wo(e);case"numberformat":return Al(e);default:return V9.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Wo(e):/^numberformat/i.test(t)?Al(e):sx(e)}}function sx(e){switch(typeof e){case"string":return e;case"number":return Al(e);case"boolean":return""+e;default:return e instanceof Date?Wo(e):""}}async function UK(e,t,i,r){const n=t.exec(i);if(!n)throw new I("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const o=n[1]?`${n[1]}/`:"",s=n[2],a=EG(r),u=`${o}${s}.json`,d=a?`${o}${s}_${a}.json`:u;let h;try{h=await kI(e(d))}catch(f){if(d===u)throw new I("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f});try{h=await kI(e(u))}catch(y){throw new I("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:y})}}return h}async function kI(e){if(T(FI.fetchBundleAsset))return FI.fetchBundleAsset(e);const t=await Be(e,{responseType:"text"});return JSON.parse(t.data)}class VK{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?o=>new URL(o,new URL(r,window.location.href)).href:r instanceof URL?o=>new URL(o,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return UK(this.getAssetUrl,this.matcher,t,i)}}function jK(e){return new VK(e)}const FI={};TG(jK({pattern:"esri/",location:Ue}));const BI={};function zK(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function HK(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=BI.baseUrl),(i=BI.packages)==null||i.forEach(r=>{zK(t.packages,r)}),t}class GK{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}}class tg{constructor(){this._dispatcher=new GK,this._workerPostMessage({type:Hi.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Kg(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){Kg(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=py(t);if(i&&i.type===Hi.OPEN){const{modulePath:r,jobId:n}=i;let o=await lr.loadWorker(r);o||(o=await B(()=>import(r),[],import.meta.url));const s=lr.connect(o);this._workerPostMessage({type:Hi.OPENED,jobId:n,data:s})}}}const yS=W.getLogger("esri.core.workers"),{HANDSHAKE:WK}=Hi,qK='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Mm,Nm;const UI="Failed to create Worker. Fallback to execute module in main thread";async function YK(){if(!k("esri-workers")||(k("mozilla"),0))return VI(new tg);if(!Mm&&!Nm)try{const t=qK.replace('"{CONFIGURATION}"',`'${KK()}'`);Mm=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Nm=t||{}}let e;if(Mm)try{e=new Worker(Mm,{name:"esri-worker-"+ZK++})}catch{yS.warn(UI,Nm),e=new tg}else yS.warn(UI,Nm),e=new tg;return VI(e)}async function VI(e){return new Promise(t=>{function i(n){const o=py(n);o&&o.type===WK&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(n){n.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),yS.warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new tg).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function KK(){let e;if(Ne.default!=null){const n={...Ne};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Ne));e.assetsPath=Xn(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Lr(),e.has={"esri-csp-restrictions":k("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":k("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":k("esri-2d-query-centroid-enabled"),"featurelayer-pbf":k("featurelayer-pbf"),"featurelayer-simplify-thresholds":k("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":k("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":k("featurelayer-simplify-mobile-factor"),"esri-atomics":k("esri-atomics"),"esri-shared-array-buffer":k("esri-shared-array-buffer"),"esri-tiles-debug":k("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":k("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":k("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Xn(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Xn(e.workers.workerPath):e.workers.workerPath=Xn(Ue("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Ne.workers.loaderConfig,i=HK({baseUrl:t==null?void 0:t.baseUrl,locale:Lr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]}),r={version:D5,buildDate:P5,revision:$5};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}let ZK=0;const JK=W.getLogger("esri.core.workers"),{ABORT:jI,INVOKE:XK,OPEN:QK,OPENED:eZ,RESPONSE:oh}=Hi;class ax{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),JK.error(r)})}static async create(t){const i=await YK();return new ax(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,n=B9();return new Promise((o,s)=>{const a={resolve:o,reject:s,abortHandle:rA(r,()=>{this._outJobs.delete(n),this._post({type:jI,jobId:n})})};this._outJobs.set(n,a),this._post({type:QK,jobId:n,modulePath:t})})}_onMessage(t){const i=py(t);if(i)switch(i.type){case eZ:this._onOpenedMessage(i);break;case oh:this._onResponseMessage(i);break;case jI:this._onAbortMessage(i);break;case XK:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:o}=t,s=o?new AbortController:null,a=this._inJobs,u=CH[i];let d;try{if(typeof u!="function")throw new TypeError(`${i} is not a function`);d=u.call(null,n,{signal:s?s.signal:null})}catch(h){return void this._post({type:oh,jobId:r,error:g1(h)})}Zs(d)?(a.set(r,{controller:s,promise:d}),d.then(h=>{a.has(r)&&(a.delete(r),this._post({type:oh,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),qi(h)||this._post({type:oh,jobId:r,error:g1(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:oh,jobId:r},d)}_onOpenedMessage(t){const{jobId:i,data:r}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),$r(n.abortHandle),n.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,o=this._outJobs.get(i);o&&(this._outJobs.delete(i),$r(o.abortHandle),r?o.reject(I.fromJSON(JSON.parse(r))):o.resolve(n))}_post(t,i,r){return U9(this.worker,t,i,r)}}let Uu=k("esri-workers-debug")?1:k("host-browser")?navigator.hardwareConcurrency-1:0;Uu||(Uu=k("safari")&&k("mac")||k("trident")?7:2);let zI=0;const ig=[];function tZ(){z9()}async function Rm(e,t){const i=new OK;return await i.open(e,t),i}async function j9(e,t={}){if(typeof e!="string")throw new I("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(k("host-webworker")&&!k("esri-workers")&&(i="local"),i==="local"){let r=await lr.loadWorker(e);r||(r=await B(()=>import(e),[],import.meta.url)),bt(t.signal);const n=t.client||r;return Rm([lr.connect(r)],{...t,client:n})}if(await z9(),bt(t.signal),i==="dedicated"){const r=zI++%Uu;return Rm([await ig[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,Uu);if(r<Uu){const n=new Array(r);for(let o=0;o<r;++o){const s=zI++%Uu;n[o]=ig[s].open(e,t)}return Rm(n,t)}}return Rm(ig.map(r=>r.open(e,t)),t)}let Pm=null;async function z9(){if(Pm)return Pm;new AbortController;const e=[];for(let t=0;t<Uu;t++){const i=ax.create(t).then(r=>(ig[t]=r,r));e.push(i)}return Pm=Promise.all(e),Pm}function lx(e){return new me({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const H9=lx(nt),v1=lx(Vs),w1=lx(Tl),iZ=new me({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${nt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function w1e(e){return e&&(Rv(e)||e===v1)?v1:e&&(Pv(e)||e===w1)?w1:H9}function rZ(e){return e&&(Rv(e)||e===v1)?Vs:e&&(Pv(e)||e===w1)?Tl:nt}function b1e(e){return bA(e)?Vs:_A(e)?Tl:nt}const G9=39.37,nZ=nt.radius*Math.PI/200,W9=/UNIT\[([^\]]+)\]\]$/i,rc=b,q9=/UNIT\[([^\]]+)\]/i,oZ=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),sZ=yi()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),co=e=>e*e,sa=e=>e*e*e,hy={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:co(.001)},"square-centimeters":{inBaseUnits:co(.01)},"square-decimeters":{inBaseUnits:co(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:co(1e3)},"square-inches":{inBaseUnits:co(.0254)},"square-feet":{inBaseUnits:co(.3048)},"square-yards":{inBaseUnits:co(.9144)},"square-miles":{inBaseUnits:co(1609.344)},"square-us-feet":{inBaseUnits:co(1200/3937)},acres:{inBaseUnits:.0015625*co(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*sa(.001)},"cubic-centimeters":{inBaseUnits:1e3*sa(.01)},"cubic-decimeters":{inBaseUnits:1e3*sa(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*sa(1e3)},"cubic-inches":{inBaseUnits:1e3*sa(.0254)},"cubic-feet":{inBaseUnits:1e3*sa(.3048)},"cubic-yards":{inBaseUnits:1e3*sa(.9144)},"cubic-miles":{inBaseUnits:1e3*sa(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},aZ=(()=>{const e={};for(const t in hy)for(const i in hy[t].units)e[i]=t;return e})();function lZ(e,t,i){return e*hy[i].units[t].inBaseUnits}function uZ(e,t,i){return e/hy[i].units[t].inBaseUnits}function mS(e){const t=aZ[e];if(!t)throw new Error("unknown type");return t}function HI(e,t=null){return t=t||mS(e),hy[t].baseUnit===e}function Jr(e,t,i){if(t===i)return e;const r=mS(t);if(r!==mS(i))throw new Error("incompatible units");const n=HI(t,r)?e:lZ(e,t,r);return HI(i,r)?n:uZ(n,i,r)}function cZ(e,t,i){return Jr(e,t,"meters")/(i*Math.PI/180)}function Y9(e){return sZ.fromJSON(e.toLowerCase())||null}function hp(e){if(e&&typeof e=="object"&&!_H(e))return 1;const t=$l(e);return t>1e5?1:t}function dZ(e){return $l(e)>=(e instanceof me?rZ(e).metersPerDegree:1e5)?"meters":hZ(e)}function $l(e,t=nt.metersPerDegree){return yv(pZ(e,!0),t)}function pZ(e,t=!1){let i,r,n=null;if(e!=null&&(typeof e=="object"?(i=e.wkid,r=e.wkt):typeof e=="number"?i=e:typeof e=="string"&&(r=e)),i){if(bA(i))return Vs.metersPerDegree;if(_A(i))return Tl.metersPerDegree;n=rc.values[rc[i]],!n&&t&&oZ.has(i)&&(n=nZ)}else r&&(J9(r)?n=GI(W9.exec(r),n):Z9(r)&&(n=GI(q9.exec(r),n)));return n}function GI(e,t){return e&&e[1]?K9(e[1]):t}function K9(e){return parseFloat(e.split(",")[1])}function hZ(e){let t,i,r=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,i=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(i=e)),t)r=rc.units[rc[t]];else if(i){const n=J9(i)?W9:Z9(i)?q9:null;if(n){const o=n.exec(i);o&&o[1]&&(r=yZ(o[1]))}}return T(r)?Y9(r):null}function Z9(e){return/^GEOCCS/i.test(e)}function J9(e){return/^PROJCS/i.test(e)}const fZ=1e-7;function yZ(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!rc.units.includes(i)){const r=K9(e);i=null;const n=rc.values;for(let o=0;o<n.length;++o)if(Math.abs(r-n[o])<fZ){i=rc.units[o];break}}return i}const X9={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Q9={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},mZ=yi()(X9),gZ=yi()(Q9);yi()({...X9,...Q9});function vZ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Dl(e,t,i,r,n,o,s,a,u,d,h,f,y,m,g,v,w){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=s,e[6]=a,e[7]=u,e[8]=d,e[9]=h,e[10]=f,e[11]=y,e[12]=m,e[13]=g,e[14]=v,e[15]=w,e}function ux(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Qs(e,t){if(e===t){const i=t[1],r=t[2],n=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=n,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function wZ(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],v=t[13],w=t[14],_=t[15],A=i*a-r*s,M=i*u-n*s,$=i*d-o*s,N=r*u-n*a,D=r*d-o*a,V=n*d-o*u,G=h*v-f*g,Z=h*w-y*g,ee=h*_-m*g,re=f*w-y*v,ue=f*_-m*v,ge=y*_-m*w;let ne=A*ge-M*ue+$*re+N*ee-D*Z+V*G;return ne?(ne=1/ne,e[0]=(a*ge-u*ue+d*re)*ne,e[1]=(n*ue-r*ge-o*re)*ne,e[2]=(v*V-w*D+_*N)*ne,e[3]=(y*D-f*V-m*N)*ne,e[4]=(u*ee-s*ge-d*Z)*ne,e[5]=(i*ge-n*ee+o*Z)*ne,e[6]=(w*$-g*V-_*M)*ne,e[7]=(h*V-y*$+m*M)*ne,e[8]=(s*ue-a*ee+d*G)*ne,e[9]=(r*ee-i*ue-o*G)*ne,e[10]=(g*D-v*$+_*A)*ne,e[11]=(f*$-h*D-m*A)*ne,e[12]=(a*Z-s*re-u*G)*ne,e[13]=(i*re-r*Z+n*G)*ne,e[14]=(v*M-g*N-w*A)*ne,e[15]=(h*N-f*M+y*A)*ne,e):null}function bZ(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],v=t[13],w=t[14],_=t[15];return e[0]=a*(y*_-m*w)-f*(u*_-d*w)+v*(u*m-d*y),e[1]=-(r*(y*_-m*w)-f*(n*_-o*w)+v*(n*m-o*y)),e[2]=r*(u*_-d*w)-a*(n*_-o*w)+v*(n*d-o*u),e[3]=-(r*(u*m-d*y)-a*(n*m-o*y)+f*(n*d-o*u)),e[4]=-(s*(y*_-m*w)-h*(u*_-d*w)+g*(u*m-d*y)),e[5]=i*(y*_-m*w)-h*(n*_-o*w)+g*(n*m-o*y),e[6]=-(i*(u*_-d*w)-s*(n*_-o*w)+g*(n*d-o*u)),e[7]=i*(u*m-d*y)-s*(n*m-o*y)+h*(n*d-o*u),e[8]=s*(f*_-m*v)-h*(a*_-d*v)+g*(a*m-d*f),e[9]=-(i*(f*_-m*v)-h*(r*_-o*v)+g*(r*m-o*f)),e[10]=i*(a*_-d*v)-s*(r*_-o*v)+g*(r*d-o*a),e[11]=-(i*(a*m-d*f)-s*(r*m-o*f)+h*(r*d-o*a)),e[12]=-(s*(f*w-y*v)-h*(a*w-u*v)+g*(a*y-u*f)),e[13]=i*(f*w-y*v)-h*(r*w-n*v)+g*(r*y-n*f),e[14]=-(i*(a*w-u*v)-s*(r*w-n*v)+g*(r*u-n*a)),e[15]=i*(a*y-u*f)-s*(r*y-n*f)+h*(r*u-n*a),e}function _Z(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],s=e[5],a=e[6],u=e[7],d=e[8],h=e[9],f=e[10],y=e[11],m=e[12],g=e[13],v=e[14],w=e[15];return(t*s-i*o)*(f*w-y*v)-(t*a-r*o)*(h*w-y*g)+(t*u-n*o)*(h*v-f*g)+(i*a-r*s)*(d*w-y*m)-(i*u-n*s)*(d*v-f*m)+(r*u-n*a)*(d*g-h*m)}function eO(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],y=t[9],m=t[10],g=t[11],v=t[12],w=t[13],_=t[14],A=t[15];let M=i[0],$=i[1],N=i[2],D=i[3];return e[0]=M*r+$*a+N*f+D*v,e[1]=M*n+$*u+N*y+D*w,e[2]=M*o+$*d+N*m+D*_,e[3]=M*s+$*h+N*g+D*A,M=i[4],$=i[5],N=i[6],D=i[7],e[4]=M*r+$*a+N*f+D*v,e[5]=M*n+$*u+N*y+D*w,e[6]=M*o+$*d+N*m+D*_,e[7]=M*s+$*h+N*g+D*A,M=i[8],$=i[9],N=i[10],D=i[11],e[8]=M*r+$*a+N*f+D*v,e[9]=M*n+$*u+N*y+D*w,e[10]=M*o+$*d+N*m+D*_,e[11]=M*s+$*h+N*g+D*A,M=i[12],$=i[13],N=i[14],D=i[15],e[12]=M*r+$*a+N*f+D*v,e[13]=M*n+$*u+N*y+D*w,e[14]=M*o+$*d+N*m+D*_,e[15]=M*s+$*h+N*g+D*A,e}function SZ(e,t,i){const r=i[0],n=i[1],o=i[2];if(t===e)e[12]=t[0]*r+t[4]*n+t[8]*o+t[12],e[13]=t[1]*r+t[5]*n+t[9]*o+t[13],e[14]=t[2]*r+t[6]*n+t[10]*o+t[14],e[15]=t[3]*r+t[7]*n+t[11]*o+t[15];else{const s=t[0],a=t[1],u=t[2],d=t[3],h=t[4],f=t[5],y=t[6],m=t[7],g=t[8],v=t[9],w=t[10],_=t[11];e[0]=s,e[1]=a,e[2]=u,e[3]=d,e[4]=h,e[5]=f,e[6]=y,e[7]=m,e[8]=g,e[9]=v,e[10]=w,e[11]=_,e[12]=s*r+h*n+g*o+t[12],e[13]=a*r+f*n+v*o+t[13],e[14]=u*r+y*n+w*o+t[14],e[15]=d*r+m*n+_*o+t[15]}return e}function TZ(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function EZ(e,t,i,r){let n,o,s,a,u,d,h,f,y,m,g,v,w,_,A,M,$,N,D,V,G,Z,ee,re,ue=r[0],ge=r[1],ne=r[2],St=Math.sqrt(ue*ue+ge*ge+ne*ne);return St<be?null:(St=1/St,ue*=St,ge*=St,ne*=St,n=Math.sin(i),o=Math.cos(i),s=1-o,a=t[0],u=t[1],d=t[2],h=t[3],f=t[4],y=t[5],m=t[6],g=t[7],v=t[8],w=t[9],_=t[10],A=t[11],M=ue*ue*s+o,$=ge*ue*s+ne*n,N=ne*ue*s-ge*n,D=ue*ge*s-ne*n,V=ge*ge*s+o,G=ne*ge*s+ue*n,Z=ue*ne*s+ge*n,ee=ge*ne*s-ue*n,re=ne*ne*s+o,e[0]=a*M+f*$+v*N,e[1]=u*M+y*$+w*N,e[2]=d*M+m*$+_*N,e[3]=h*M+g*$+A*N,e[4]=a*D+f*V+v*G,e[5]=u*D+y*V+w*G,e[6]=d*D+m*V+_*G,e[7]=h*D+g*V+A*G,e[8]=a*Z+f*ee+v*re,e[9]=u*Z+y*ee+w*re,e[10]=d*Z+m*ee+_*re,e[11]=h*Z+g*ee+A*re,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function AZ(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[4],s=t[5],a=t[6],u=t[7],d=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+d*r,e[5]=s*n+h*r,e[6]=a*n+f*r,e[7]=u*n+y*r,e[8]=d*n-o*r,e[9]=h*n-s*r,e[10]=f*n-a*r,e[11]=y*n-u*r,e}function xZ(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],s=t[1],a=t[2],u=t[3],d=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-d*r,e[1]=s*n-h*r,e[2]=a*n-f*r,e[3]=u*n-y*r,e[8]=o*r+d*n,e[9]=s*r+h*n,e[10]=a*r+f*n,e[11]=u*r+y*n,e}function CZ(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],s=t[1],a=t[2],u=t[3],d=t[4],h=t[5],f=t[6],y=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+d*r,e[1]=s*n+h*r,e[2]=a*n+f*r,e[3]=u*n+y*r,e[4]=d*n-o*r,e[5]=h*n-s*r,e[6]=f*n-a*r,e[7]=y*n-u*r,e}function tO(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function IZ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function MZ(e,t,i){let r,n,o,s=i[0],a=i[1],u=i[2],d=Math.sqrt(s*s+a*a+u*u);return d<be?null:(d=1/d,s*=d,a*=d,u*=d,r=Math.sin(t),n=Math.cos(t),o=1-n,e[0]=s*s*o+n,e[1]=a*s*o+u*r,e[2]=u*s*o-a*r,e[3]=0,e[4]=s*a*o-u*r,e[5]=a*a*o+n,e[6]=u*a*o+s*r,e[7]=0,e[8]=s*u*o+a*r,e[9]=a*u*o-s*r,e[10]=u*u*o+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function NZ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function RZ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function PZ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function iO(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=r+r,u=n+n,d=o+o,h=r*a,f=r*u,y=r*d,m=n*u,g=n*d,v=o*d,w=s*a,_=s*u,A=s*d;return e[0]=1-(m+v),e[1]=f+A,e[2]=y-_,e[3]=0,e[4]=f-A,e[5]=1-(h+v),e[6]=g+w,e[7]=0,e[8]=y+_,e[9]=g-w,e[10]=1-(h+m),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function $Z(e,t){const i=DZ,r=-t[0],n=-t[1],o=-t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=r*r+n*n+o*o+s*s;return f>0?(i[0]=2*(a*s+h*r+u*o-d*n)/f,i[1]=2*(u*s+h*n+d*r-a*o)/f,i[2]=2*(d*s+h*o+a*n-u*r)/f):(i[0]=2*(a*s+h*r+u*o-d*n),i[1]=2*(u*s+h*n+d*r-a*o),i[2]=2*(d*s+h*o+a*n-u*r)),iO(e,t,i),e}const DZ=Zo();function LZ(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function OZ(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],s=t[5],a=t[6],u=t[8],d=t[9],h=t[10];return e[0]=Math.sqrt(i*i+r*r+n*n),e[1]=Math.sqrt(o*o+s*s+a*a),e[2]=Math.sqrt(u*u+d*d+h*h),e}function kZ(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function FZ(e,t,i,r){const n=t[0],o=t[1],s=t[2],a=t[3],u=n+n,d=o+o,h=s+s,f=n*u,y=n*d,m=n*h,g=o*d,v=o*h,w=s*h,_=a*u,A=a*d,M=a*h,$=r[0],N=r[1],D=r[2];return e[0]=(1-(g+w))*$,e[1]=(y+M)*$,e[2]=(m-A)*$,e[3]=0,e[4]=(y-M)*N,e[5]=(1-(f+w))*N,e[6]=(v+_)*N,e[7]=0,e[8]=(m+A)*D,e[9]=(v-_)*D,e[10]=(1-(f+g))*D,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function BZ(e,t,i,r,n){const o=t[0],s=t[1],a=t[2],u=t[3],d=o+o,h=s+s,f=a+a,y=o*d,m=o*h,g=o*f,v=s*h,w=s*f,_=a*f,A=u*d,M=u*h,$=u*f,N=r[0],D=r[1],V=r[2],G=n[0],Z=n[1],ee=n[2],re=(1-(v+_))*N,ue=(m+$)*N,ge=(g-M)*N,ne=(m-$)*D,St=(1-(y+_))*D,vr=(w+A)*D,lt=(g+M)*V,wr=(w-A)*V,wn=(1-(y+v))*V;return e[0]=re,e[1]=ue,e[2]=ge,e[3]=0,e[4]=ne,e[5]=St,e[6]=vr,e[7]=0,e[8]=lt,e[9]=wr,e[10]=wn,e[11]=0,e[12]=i[0]+G-(re*G+ne*Z+lt*ee),e[13]=i[1]+Z-(ue*G+St*Z+wr*ee),e[14]=i[2]+ee-(ge*G+vr*Z+wn*ee),e[15]=1,e}function UZ(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=i+i,a=r+r,u=n+n,d=i*s,h=r*s,f=r*a,y=n*s,m=n*a,g=n*u,v=o*s,w=o*a,_=o*u;return e[0]=1-f-g,e[1]=h+_,e[2]=y-w,e[3]=0,e[4]=h-_,e[5]=1-d-g,e[6]=m+v,e[7]=0,e[8]=y+w,e[9]=m-v,e[10]=1-d-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function VZ(e,t,i,r,n,o,s){const a=1/(i-t),u=1/(n-r),d=1/(o-s);return e[0]=2*o*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(n+r)*u,e[10]=(s+o)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*d,e[15]=0,e}function jZ(e,t,i,r,n){const o=1/Math.tan(t/2);let s;return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(s=1/(r-n),e[10]=(n+r)*s,e[14]=2*n*r*s):(e[10]=-1,e[14]=-2*r),e}function zZ(e,t,i,r){const n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),u=2/(s+a),d=2/(n+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=-(s-a)*u*.5,e[9]=(n-o)*d*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function HZ(e,t,i,r,n,o,s){const a=1/(t-i),u=1/(r-n),d=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+i)*a,e[13]=(n+r)*u,e[14]=(s+o)*d,e[15]=1,e}function GZ(e,t,i,r){let n,o,s,a,u,d,h,f,y,m;const g=t[0],v=t[1],w=t[2],_=r[0],A=r[1],M=r[2],$=i[0],N=i[1],D=i[2];return Math.abs(g-$)<be&&Math.abs(v-N)<be&&Math.abs(w-D)<be?ux(e):(h=g-$,f=v-N,y=w-D,m=1/Math.sqrt(h*h+f*f+y*y),h*=m,f*=m,y*=m,n=A*y-M*f,o=M*h-_*y,s=_*f-A*h,m=Math.sqrt(n*n+o*o+s*s),m?(m=1/m,n*=m,o*=m,s*=m):(n=0,o=0,s=0),a=f*s-y*o,u=y*n-h*s,d=h*o-f*n,m=Math.sqrt(a*a+u*u+d*d),m?(m=1/m,a*=m,u*=m,d*=m):(a=0,u=0,d=0),e[0]=n,e[1]=a,e[2]=h,e[3]=0,e[4]=o,e[5]=u,e[6]=f,e[7]=0,e[8]=s,e[9]=d,e[10]=y,e[11]=0,e[12]=-(n*g+o*v+s*w),e[13]=-(a*g+u*v+d*w),e[14]=-(h*g+f*v+y*w),e[15]=1,e)}function WZ(e,t,i,r){const n=t[0],o=t[1],s=t[2],a=r[0],u=r[1],d=r[2];let h=n-i[0],f=o-i[1],y=s-i[2],m=h*h+f*f+y*y;m>0&&(m=1/Math.sqrt(m),h*=m,f*=m,y*=m);let g=u*y-d*f,v=d*h-a*y,w=a*f-u*h;return m=g*g+v*v+w*w,m>0&&(m=1/Math.sqrt(m),g*=m,v*=m,w*=m),e[0]=g,e[1]=v,e[2]=w,e[3]=0,e[4]=f*w-y*v,e[5]=y*g-h*w,e[6]=h*v-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=y,e[11]=0,e[12]=n,e[13]=o,e[14]=s,e[15]=1,e}function qZ(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function YZ(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function KZ(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function rO(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function ZZ(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function JZ(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function XZ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function QZ(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6],d=e[7],h=e[8],f=e[9],y=e[10],m=e[11],g=e[12],v=e[13],w=e[14],_=e[15],A=t[0],M=t[1],$=t[2],N=t[3],D=t[4],V=t[5],G=t[6],Z=t[7],ee=t[8],re=t[9],ue=t[10],ge=t[11],ne=t[12],St=t[13],vr=t[14],lt=t[15];return Math.abs(i-A)<=be*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(r-M)<=be*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(n-$)<=be*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(o-N)<=be*Math.max(1,Math.abs(o),Math.abs(N))&&Math.abs(s-D)<=be*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(a-V)<=be*Math.max(1,Math.abs(a),Math.abs(V))&&Math.abs(u-G)<=be*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(d-Z)<=be*Math.max(1,Math.abs(d),Math.abs(Z))&&Math.abs(h-ee)<=be*Math.max(1,Math.abs(h),Math.abs(ee))&&Math.abs(f-re)<=be*Math.max(1,Math.abs(f),Math.abs(re))&&Math.abs(y-ue)<=be*Math.max(1,Math.abs(y),Math.abs(ue))&&Math.abs(m-ge)<=be*Math.max(1,Math.abs(m),Math.abs(ge))&&Math.abs(g-ne)<=be*Math.max(1,Math.abs(g),Math.abs(ne))&&Math.abs(v-St)<=be*Math.max(1,Math.abs(v),Math.abs(St))&&Math.abs(w-vr)<=be*Math.max(1,Math.abs(w),Math.abs(vr))&&Math.abs(_-lt)<=be*Math.max(1,Math.abs(_),Math.abs(lt))}function eJ(e){const t=be,i=e[0],r=e[1],n=e[2],o=e[4],s=e[5],a=e[6],u=e[8],d=e[9],h=e[10];return Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(r*r+s*s+d*d))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const tJ=eO,iJ=rO;Object.freeze(Object.defineProperty({__proto__:null,copy:vZ,set:Dl,identity:ux,transpose:Qs,invert:wZ,adjoint:bZ,determinant:_Z,multiply:eO,translate:SZ,scale:TZ,rotate:EZ,rotateX:AZ,rotateY:xZ,rotateZ:CZ,fromTranslation:tO,fromScaling:IZ,fromRotation:MZ,fromXRotation:NZ,fromYRotation:RZ,fromZRotation:PZ,fromRotationTranslation:iO,fromQuat2:$Z,getTranslation:LZ,getScaling:OZ,getRotation:kZ,fromRotationTranslationScale:FZ,fromRotationTranslationScaleOrigin:BZ,fromQuat:UZ,frustum:VZ,perspective:jZ,perspectiveFromFieldOfView:zZ,ortho:HZ,lookAt:GZ,targetTo:WZ,str:qZ,frob:YZ,add:KZ,subtract:rO,multiplyScalar:ZZ,multiplyScalarAndAdd:JZ,exactEquals:XZ,equals:QZ,isOrthoNormal:eJ,mul:tJ,sub:iJ},Symbol.toStringTag,{value:"Module"}));let ib,P=null;function nO(){return!!P}function rJ(){return!!k("esri-wasm")}function oO(){return ib||(ib=B(()=>import("./pe-wasm.41ba155b.js"),[],import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Ue(`esri/geometry/support/${t}`)})).then(e=>{aO(e)}),ib)}var gS,at,vS;(function(e){function t(o,s,a){P.ensureCache.prepare();const u=Cu(a),d=a===u,h=P.ensureFloat64(u),f=P._pe_geog_to_proj(P.getPointer(o),s,h);return f&&il(a,s,h,d),f}function i(o,s,a,u){switch(u){case at.PE_TRANSFORM_P_TO_G:return r(o,s,a);case at.PE_TRANSFORM_G_TO_P:return t(o,s,a)}return 0}function r(o,s,a){return n(o,s,a,0)}function n(o,s,a,u){P.ensureCache.prepare();const d=Cu(a),h=a===d,f=P.ensureFloat64(d),y=P._pe_proj_to_geog_center(P.getPointer(o),s,f,u);return y&&il(a,s,f,h),y}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=n})(gS||(gS={})),function(e){function t(){e.PE_BUFFER_MAX=P.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=P.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=P.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=P.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=P.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=P.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=P.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=P.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=P.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=P.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=P.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=P.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=P.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=P.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=P.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=P.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=P.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=P.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=P.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=P.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=P.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=P.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=P.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=P.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=P.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=P.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=P.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=P.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=P.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=P.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(at||(at={})),function(e){const t={},i={},r=m=>{if(m){const g=m.getType();switch(g){case at.PE_TYPE_GEOGCS:m=P.castObject(m,P.PeGeogcs);break;case at.PE_TYPE_PROJCS:m=P.castObject(m,P.PeProjcs);break;case at.PE_TYPE_GEOGTRAN:m=P.castObject(m,P.PeGeogtran);break;default:g&at.PE_TYPE_UNIT&&(m=P.castObject(m,P.PeUnit))}}return m};function n(){P.PeFactory.prototype.initialize(null)}function o(m){return s(at.PE_TYPE_COORDSYS,m)}function s(m,g){let v=null,w=t[m];if(w||(w={},t[m]=w),w.hasOwnProperty(String(g)))v=w[g];else{const _=P.PeFactory.prototype.factoryByType(m,g);P.compare(_,P.NULL)||(v=_,w[g]=v)}return v=r(v),v}function a(m,g){let v=null,w=i[m];if(w||(w={},i[m]=w),w.hasOwnProperty(g))v=w[g];else{const _=P.PeFactory.prototype.fromString(m,g);P.compare(_,P.NULL)||(v=_,w[g]=v)}return v=r(v),v}function u(m){return s(at.PE_TYPE_GEOGCS,m)}function d(m){return s(at.PE_TYPE_GEOGTRAN,m)}function h(m){return P.PeFactory.prototype.getCode(m)}function f(m){return s(at.PE_TYPE_PROJCS,m)}function y(m){return s(at.PE_TYPE_UNIT,m)}e.initialize=n,e.coordsys=o,e.factoryByType=s,e.fromString=a,e.geogcs=u,e.geogtran=d,e.getCode=h,e.projcs=f,e.unit=y}(vS||(vS={}));let sO=null;var b1,wS,bS,_S,_1,SS,S1,T1,TS;function aO(e){function t(o,s,a){o[s]=a(o[s])}P=e,at.init(),b1.init(),_1.init(),S1.init(),T1.init(),sO=class extends P.PeGCSExtent{destroy(){P.destroy(this)}};const i=[P.PeDatum,P.PeGeogcs,P.PeGeogtran,P.PeObject,P.PeParameter,P.PePrimem,P.PeProjcs,P.PeSpheroid,P.PeUnit];for(const o of i)t(o.prototype,"getName",s=>function(){return s.call(this,new Array(at.PE_NAME_MAX))});for(const o of[P.PeGeogtran,P.PeProjcs])t(o.prototype,"getParameters",s=>function(){const a=new Array(at.PE_PARM_MAX);let u=s.call(this);for(let d=0;d<a.length;d++){const h=P.getValue(u,"*");a[d]=h?P.wrapPointer(h,P.PeParameter):null,u+=Int32Array.BYTES_PER_ELEMENT}return a});t(P.PeHorizon.prototype,"getCoord",o=>function(){const s=this.getSize();if(!s)return null;const a=[];return il(a,s,o.call(this)),a}),t(P.PeGTlistExtendedEntry.prototype,"getEntries",o=>{const s=P._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const u=o.call(this);if(!P.compare(u,P.NULL)){a=[u];const d=this.getSteps();if(d>1){const h=P.getPointer(u);for(let f=1;f<d;f++)a.push(P.wrapPointer(h+s*f,P.PeGTlistExtendedGTs))}}return a}});const r=P._pe_getPeHorizonSize(),n=o=>function(){let s=this._cache;if(s||(s=new Map,this._cache=s),s.has(o))return s.get(o);let a=null;const u=o.call(this);if(!P.compare(u,P.NULL)){a=[u];const d=u.getNump();if(d>1){const h=P.getPointer(u);for(let f=1;f<d;f++)a.push(P.wrapPointer(h+r*f,P.PeHorizon))}}return s.set(o,a),a};t(P.PeProjcs.prototype,"horizonGcsGenerate",n),t(P.PeProjcs.prototype,"horizonPcsGenerate",n),P.PeObject.prototype.toString=function(o=at.PE_STR_OPTS_NONE){P.ensureCache.prepare();const s=P.getPointer(this),a=P.ensureInt8(new Array(at.PE_BUFFER_MAX));return P.UTF8ToString(P._pe_object_to_string_ext(s,o,a))}}function is(e){if(!e)return;const t=P.getClass(e);if(!t)return;const i=P.getCache(t);if(!i)return;const r=P.getPointer(e);r&&delete i[r]}function $m(e,t){const i=[],r=new Array(t);for(let n=0;n<e;n++)i.push(P.ensureInt8(r));return i}function Cu(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function il(e,t,i,r=!1){if(r)for(let n=0;n<2*t;n++)e[n]=P.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let o=0;o<t;o++)n&&(e[o]=new Array(2)),e[o][0]=P.getValue(i,"double"),e[o][1]=P.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=P.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=P._pe_getPeGTlistExtendedEntrySize()}function r(n,o,s,a,u,d){let h=null;const f=new P.PeInteger(d);try{const y=P.PeGTlistExtended.prototype.getGTlist(n,o,s,a,u,f);if((d=f.val)&&(h=[y],d>1)){const m=P.getPointer(y);for(let g=1;g<d;g++)h.push(P.wrapPointer(m+t*g,P.PeGTlistExtendedEntry))}}finally{P.destroy(f)}return h}e.init=i,e.getGTlist=r})(b1||(b1={})),function(e){function t(i){if(i&&i.length){for(const r of i)is(r),r.getEntries().forEach(n=>{is(n);const o=n.getGeogtran();is(o),o.getParameters().forEach(is),[o.getGeogcs1(),o.getGeogcs2()].forEach(s=>{is(s);const a=s.getDatum();is(a),is(a.getSpheroid()),is(s.getPrimem()),is(s.getUnit())})});P.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(wS||(wS={})),function(e){function t(i,r,n,o,s){P.ensureCache.prepare();const a=Cu(n),u=n===a,d=P.ensureFloat64(a);let h=0;o&&(h=P.ensureFloat64(o));const f=P._pe_geog_to_geog(P.getPointer(i),r,d,h,s);return f&&il(n,r,d,u),f}e.geogToGeog=t}(bS||(bS={})),function(e){const t=(d,h,f,y,m,g)=>{let v,w;switch(P.ensureCache.prepare(),d){case"dd":v=P._pe_geog_to_dd,w=at.PE_DD_MAX;break;case"ddm":v=P._pe_geog_to_ddm,w=at.PE_DDM_MAX;break;case"dms":v=P._pe_geog_to_dms,w=at.PE_DMS_MAX}let _=0;h&&(_=P.getPointer(h));const A=Cu(y),M=P.ensureFloat64(A),$=$m(f,w),N=v(_,f,M,m,P.ensureInt32($));if(N)for(let D=0;D<f;D++)g[D]=P.UTF8ToString($[D]);return N},i=(d,h,f,y,m)=>{let g;switch(P.ensureCache.prepare(),d){case"dd":g=P._pe_dd_to_geog;break;case"ddm":g=P._pe_ddm_to_geog;break;case"dms":g=P._pe_dms_to_geog}let v=0;h&&(v=P.getPointer(h));const w=y.map($=>P.ensureString($)),_=P.ensureInt32(w),A=P.ensureFloat64(new Array(2*f)),M=g(v,f,_,A);return M&&il(m,f,A),M};function r(d,h,f,y,m){return t("dms",d,h,f,y,m)}function n(d,h,f,y){return i("dms",d,h,f,y)}function o(d,h,f,y,m){return t("ddm",d,h,f,y,m)}function s(d,h,f,y){return i("ddm",d,h,f,y)}function a(d,h,f,y,m){return t("dd",d,h,f,y,m)}function u(d,h,f,y){return i("dd",d,h,f,y)}e.geogToDms=r,e.dmsToGeog=n,e.geogToDdm=o,e.ddmToGeog=s,e.geogToDd=a,e.ddToGeog=u}(_S||(_S={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=P.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=P.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=P.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=P.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=P.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,o,s,a,u,d,h){P.ensureCache.prepare();let f=0;n&&(f=P.getPointer(n));const y=Cu(s),m=P.ensureFloat64(y),g=$m(o,at.PE_MGRS_MAX),v=P.ensureInt32(g),w=P._pe_geog_to_mgrs_extended(f,o,m,a,u,d,v);if(w)for(let _=0;_<o;_++)h[_]=P.UTF8ToString(g[_]);return w}function r(n,o,s,a,u){P.ensureCache.prepare();let d=0;n&&(d=P.getPointer(n));const h=s.map(g=>P.ensureString(g)),f=P.ensureInt32(h),y=P.ensureFloat64(new Array(2*o)),m=P._pe_mgrs_to_geog_extended(d,o,f,a,y);return m&&il(u,o,y),m}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(_1||(_1={})),function(e){function t(r,n,o,s,a,u,d){P.ensureCache.prepare();let h=0;r&&(h=P.getPointer(r));const f=Cu(o),y=P.ensureFloat64(f),m=$m(n,at.PE_MGRS_MAX),g=P.ensureInt32(m),v=P._pe_geog_to_usng(h,n,y,s,a,u,g);if(v)for(let w=0;w<n;w++)d[w]=P.UTF8ToString(m[w]);return v}function i(r,n,o,s){P.ensureCache.prepare();let a=0;r&&(a=P.getPointer(r));const u=o.map(y=>P.ensureString(y)),d=P.ensureInt32(u),h=P.ensureFloat64(new Array(2*n)),f=P._pe_usng_to_geog(a,n,d,h);return f&&il(s,n,h),f}e.geogToUsng=t,e.usngToGeog=i}(SS||(SS={})),function(e){function t(){e.PE_UTM_OPTS_NONE=P.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=P.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=P.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,o,s,a,u){P.ensureCache.prepare();let d=0;n&&(d=P.getPointer(n));const h=Cu(s),f=P.ensureFloat64(h),y=$m(o,at.PE_UTM_MAX),m=P.ensureInt32(y),g=P._pe_geog_to_utm(d,o,f,a,m);if(g)for(let v=0;v<o;v++)u[v]=P.UTF8ToString(y[v]);return g}function r(n,o,s,a,u){P.ensureCache.prepare();let d=0;n&&(d=P.getPointer(n));const h=s.map(g=>P.ensureString(g)),f=P.ensureInt32(h),y=P.ensureFloat64(new Array(2*o)),m=P._pe_utm_to_geog(d,o,f,a,y);return m&&il(u,o,y),m}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(S1||(S1={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=P.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=P.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=P.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=P.PePCSInfo.prototype.PE_POLE_POINT}function r(n,o=e.PE_PCSINFO_OPTION_DOMAIN){let s,a;return t.has(n)&&(a=t.get(n),a[o]&&(s=a[o])),s||(s=P.PePCSInfo.prototype.generate(n,o),a||(a=[],t.set(n,a)),a[o]=s),s}e.init=i,e.generate=r}(T1||(T1={})),function(e){function t(){return P.PeVersion.prototype.version_string()}e.versionString=t}(TS||(TS={}));const nJ=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return P},isLoaded:nO,isSupported:rJ,load:oO,get PeCSTransformations(){return gS},get PeDefs(){return at},get PeFactory(){return vS},get PeGCSExtent(){return sO},get PeGTlistExtended(){return b1},get PeGTlistExtendedEntry(){return wS},get PeGTTransformations(){return bS},get PeNotationDms(){return _S},get PeNotationMgrs(){return _1},get PeNotationUsng(){return SS},get PeNotationUtm(){return S1},get PePCSInfo(){return T1},get PeVersion(){return TS},_init:aO},Symbol.toStringTag,{value:"Module"})),aa=nt.radius,Sn=nt.eccentricitySquared,oJ={a1:aa*Sn,a2:aa*Sn*aa*Sn,a3:aa*Sn*Sn/2,a4:aa*Sn*aa*Sn*2.5,a5:aa*Sn+aa*Sn*Sn/2,a6:1-Sn};1/294.9786982,1/298.257222101,nt.radius,nt.flattening,Tl.radius,Tl.flattening,1/192.0430107526882,Vs.radius,Vs.flattening,1/10.2079945799458,1/43.61604095563141,Vs.radius;let Dm=0;class Wd{constructor(t=null){this.uid=Dm++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new Wd;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Dm++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Dm++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Dm++}getInverse(){const t=new Wd;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class cl{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof Wd?this.steps.push(i):this.steps.push(new Wd({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new cl;let r="";for(const n of t.steps){const o=Wd.fromGE(n);i.steps.push(o),r+=o.uid.toString()+","}return i._cached_projection={},i._gtlistentry=null,i._chain=r,i}getInverse(){const t=new cl;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cached_projection[cl.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const o of this.steps)r+=o.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);const n=this._cached_projection[cl.cacheKey(t,i)];return n===void 0?null:n}}function lO(e,t,i){if(O(t)||O(i)||i.vcsWkid||Ji(t,i))return null;const r=hp(t)/hp(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>sJ(n,r);case"polyline":case"esriGeometryPolyline":return n=>lJ(n,r);case"polygon":case"esriGeometryPolygon":return n=>aJ(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>uJ(n,r);case"extent":case"esriGeometryExtent":return n=>cJ(n,r);default:return null}}function sJ(e,t){e&&e.z!=null&&(e.z*=t)}function aJ(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function lJ(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function uJ(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function cJ(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let yl=null,E1=null,rb=null,nb={};const uO=new l5;function gc(){return!!yl&&nO()}function vc(e){return O(rb)&&(rb=Promise.all([oO(),B(()=>import("./geometryEngineBase.cf4f989f.js"),[],import.meta.url).then(t=>t.g),B(()=>import("./hydrated.a7601d99.js"),[],import.meta.url)])),rb.then(([,t,{hydratedAdapter:i}])=>{bt(e),E1=i,yl=t.default,yl._enableProjection(nJ),uO.notify()})}function Op(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:WI(E1,e,e[0].spatialReference,t,i,r):WI(E1,[e],e.spatialReference,t,i,r)[0]}function WI(e,t,i,r,n=null,o=null){if(O(i)||O(r))return t;if(Cl(i,r,n))return t.map(s=>hJ(s,i,r));if(O(n)){const s=cl.cacheKey(i,r);nb[s]!==void 0?n=nb[s]:(n=dJ(i,r,null),O(n)&&(n=new cl),nb[s]=n)}if(O(yl))throw new cx;return T(o)?yl._project(e,t,i,r,n,o):yl._project(e,t,i,r,n)}function _1e(e,t){return O(e)?{pending:null,geometry:null}:Ji(e.spatialReference,t)?{pending:null,geometry:e}:Mi(e.spatialReference)&&Mi(t)?Cl(e.spatialReference,t)||gc()?{pending:null,geometry:pJ(e,t)}:(Ee(uO),{pending:vc(),geometry:null}):{pending:null,geometry:null}}function dJ(e,t,i=null){if(O(yl))throw new cx;if(O(e)||O(t))return null;const r=yl._getTransformation(E1,e,t,i,i==null?void 0:i.spatialReference);return r!==null?cl.fromGE(r):null}class cx extends I{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var x;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(x||(x={}));function pJ(e,t){try{const i=Op(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=lO(i.type,e.spatialReference,t);return T(r)&&r(i),i}catch(i){if(!(i instanceof cx))throw i;return null}}function Cl(e,t,i){return!i&&(!!Ji(e,t)||Mi(e)&&Mi(t)&&!!hO(e,t,fO))}async function S1e(e,t,i,r){if(gc())return FC(r);if(Array.isArray(e)){for(const{source:n,dest:o,geographicTransformation:s}of e)if(!Cl(n,o,s))return vc(r)}else if(!Cl(e,t,i))return vc(r);return FC(r)}function hJ(e,t,i){return e?"x"in e?fJ(e,t,new le,i,0):"xmin"in e?gJ(e,t,new Oe,i,0):"rings"in e?cO(e,t,new fr,i,0):"paths"in e?mJ(e,t,new ji,i,0):"points"in e?yJ(e,t,new Np,i,0):null:null}function fJ(e,t,i,r,n){Bt[0]=e.x,Bt[1]=e.y;const o=e.z;return Bt[2]=o!==void 0?o:n,qy(Bt,t,0,Bt,r,0,1)?(i.x=Bt[0],i.y=Bt[1],i.spatialReference=r,o===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Bt[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function yJ(e,t,i,r,n){const{points:o,hasZ:s,hasM:a}=e,u=[],d=o.length,h=[];for(const f of o)h.push(f[0],f[1],s?f[2]:n);if(!qy(h,t,0,h,r,0,d))return null;for(let f=0;f<d;++f){const y=3*f,m=h[y],g=h[y+1];s&&a?u.push([m,g,h[y+2],o[f][3]]):s?u.push([m,g,h[y+2]]):a?u.push([m,g,o[f][2]]):u.push([m,g])}return i.points=u,i.spatialReference=r,i.hasZ=s,i.hasM=a,i}function mJ(e,t,i,r,n){const{paths:o,hasZ:s,hasM:a}=e,u=[];return dO(o,s,a,t,u,r,n)?(i.paths=u,i.spatialReference=r,i.hasZ=s,i.hasM=a,i):null}function T1e(e,t,i=t.spatialReference,r=0){return T(i)&&T(cO(e,e.spatialReference,t,i,r))}function cO(e,t,i,r,n){const{rings:o,hasZ:s,hasM:a}=e,u=[];return dO(o,s,a,t,u,r,n)?(i.rings=u,i.spatialReference=r,i.hasZ=s,i.hasM=a,i):null}function gJ(e,t,i,r,n){const{xmin:o,ymin:s,xmax:a,ymax:u,hasZ:d,hasM:h}=e;return qI(o,s,d?e.zmin:n,t,Bt,r)?(i.xmin=Bt[0],i.ymin=Bt[1],d&&(i.zmin=Bt[2]),qI(a,u,d?e.zmax:n,t,Bt,r)?(i.xmax=Bt[0],i.ymax=Bt[1],d&&(i.zmax=Bt[2]),h&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function E1e(e,t,i,r=0){Bt[0]=e.x,Bt[1]=e.y;const n=e.z;return Bt[2]=n!==void 0?n:r,qy(Bt,e.spatialReference,0,t,i,0,1)}function qI(e,t,i,r,n,o){return Lm[0]=e,Lm[1]=t,Lm[2]=i,qy(Lm,r,0,n,o,0,1)}function qy(e,t,i,r,n,o,s=1){const a=hO(t,n,fO);if(O(a))return!1;if(a===Xe){if(e===r&&i===o)return!0;const d=i+3*s;for(let h=i,f=o;h<d;h++,f++)r[f]=e[h];return!0}const u=i+3*s;for(let d=i,h=o;d<u;d+=3,h+=3)a(e,d,r,h);return!0}function dO(e,t,i,r,n,o,s=0){const a=new Array;for(const d of e)for(const h of d)a.push(h[0],h[1],t?h[2]:s);if(!qy(a,r,0,a,o,0,a.length/3))return!1;let u=0;n.length=0;for(const d of e){const h=new Array;for(const f of d)t&&i?h.push([a[u++],a[u++],a[u++],f[3]]):t?h.push([a[u++],a[u++],a[u++]]):i?(h.push([a[u++],a[u++],f[2]]),u++):(h.push([a[u++],a[u++]]),u++);n.push(h)}return!0}function A1e(e,t,i,r){if(O(e)||O(r))return!1;const n=A1(e,DJ),o=A1(r,LJ);if(n===o&&!YI(o)&&(n!==x.UNKNOWN||Ji(e,r)))return tO(i,t),!0;if(YI(o)){const s=Jh[n][x.LON_LAT],a=Jh[x.LON_LAT][o];return!O(s)&&!O(a)&&(s(t,0,la,0),a(la,0,ua,0),pO(Lo*la[0],Lo*la[1],i),i[12]=ua[0],i[13]=ua[1],i[14]=ua[2],!0)}if((o===x.WEB_MERCATOR||o===x.PLATE_CARREE)&&(n===x.WGS84||n===x.CGCS2000&&o===x.PLATE_CARREE||n===x.SPHERICAL_ECEF||n===x.WEB_MERCATOR)){const s=Jh[n][x.LON_LAT],a=Jh[x.LON_LAT][o];return!O(s)&&!O(a)&&(s(t,0,la,0),a(la,0,ua,0),n===x.SPHERICAL_ECEF?vJ(Lo*la[0],Lo*la[1],i):ux(i),i[12]=ua[0],i[13]=ua[1],i[14]=ua[2],!0)}return!1}function YI(e){return e===x.SPHERICAL_ECEF||e===x.SPHERICAL_MARS_PCPF||e===x.SPHERICAL_MOON_PCPF}function pO(e,t,i){const r=Math.sin(e),n=Math.cos(e),o=Math.sin(t),s=Math.cos(t),a=i;return a[0]=-r,a[4]=-o*n,a[8]=s*n,a[12]=0,a[1]=n,a[5]=-o*r,a[9]=s*r,a[13]=0,a[2]=0,a[6]=s,a[10]=o,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function vJ(e,t,i){return pO(e,t,i),Qs(i,i),i}function A1(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=$l(e,1)),e.wkt===H9.wkt?t.spatialReferenceId=x.SPHERICAL_ECEF:iy(e)?t.spatialReferenceId=x.WGS84:dc(e)?t.spatialReferenceId=x.WEB_MERCATOR:SH(e)?t.spatialReferenceId=x.PLATE_CARREE:e.wkt===iZ.wkt?t.spatialReferenceId=x.WGS84_ECEF:e.wkid===cc.CGCS2000?t.spatialReferenceId=x.CGCS2000:e.wkt===v1.wkt?t.spatialReferenceId=x.SPHERICAL_MARS_PCPF:e.wkt===w1.wkt?t.spatialReferenceId=x.SPHERICAL_MOON_PCPF:Rv(e)?t.spatialReferenceId=x.GCSMARS2000:Pv(e)?t.spatialReferenceId=x.GCSMOON2000:t.spatialReferenceId=x.UNKNOWN)}function Xe(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function qd(e,t,i,r){i[r++]=fp*(e[t++]/nt.radius),i[r++]=fp*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/nt.radius))),i[r]=e[t]}function wJ(e,t,i,r){qd(e,t,i,r),zu(i,r,i,r)}function bJ(e,t,i,r){qd(e,t,i,r),Gu(i,r,i,r)}function _J(e,t,i,r,n){const o=.4999999*Math.PI,s=hr(Lo*e[t+1],-o,o),a=Math.sin(s);i[r++]=Lo*e[t]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=e[t+2]}function fy(e,t,i,r){_J(e,t,i,r,nt)}const KI=nt.radius*Math.PI/180,ZI=180/(nt.radius*Math.PI);function Vu(e,t,i,r){i[r]=e[t]*KI,i[r+1]=e[t+1]*KI,i[r+2]=e[t+2]}function ju(e,t,i,r){i[r]=e[t]*ZI,i[r+1]=e[t+1]*ZI,i[r+2]=e[t+2]}function SJ(e,t,i,r){qd(e,t,i,r),Vu(i,r,i,r)}function TJ(e,t,i,r){Wu(e,t,i,r),Vu(i,r,i,r)}function EJ(e,t,i,r){Hu(e,t,i,r),Vu(i,r,i,r)}function AJ(e,t,i,r){ju(e,t,i,r),zu(i,r,i,r)}function xJ(e,t,i,r){ju(e,t,i,r),fy(i,r,i,r)}function CJ(e,t,i,r){ju(e,t,i,r),Gu(i,r,i,r)}function dx(e,t,i,r,n){const o=n+e[t+2],s=Lo*e[t+1],a=Lo*e[t],u=Math.cos(s);i[r++]=Math.cos(a)*u*o,i[r++]=Math.sin(a)*u*o,i[r]=Math.sin(s)*o}function JI(e,t,i,r){dx(e,t,i,r,Tl.radius)}function XI(e,t,i,r){dx(e,t,i,r,Vs.radius)}function zu(e,t,i,r){dx(e,t,i,r,nt.radius)}function px(e,t,i,r,n){const o=e[t],s=e[t+1],a=e[t+2],u=Math.sqrt(o*o+s*s+a*a),d=vL(a/(u===0?1:u)),h=Math.atan2(s,o);i[r++]=fp*h,i[r++]=fp*d,i[r]=u-n}function QI(e,t,i,r){px(e,t,i,r,Tl.radius)}function eM(e,t,i,r){px(e,t,i,r,Vs.radius)}function Hu(e,t,i,r){px(e,t,i,r,nt.radius)}function IJ(e,t,i,r){Hu(e,t,i,r),fy(i,r,i,r)}function MJ(e,t,i,r){Hu(e,t,i,r),Gu(i,r,i,r)}function NJ(e,t,i,r,n){const o=Lo*e[t],s=Lo*e[t+1],a=e[t+2],u=Math.sin(s),d=Math.cos(s),h=n.radius/Math.sqrt(1-n.eccentricitySquared*u*u);i[r++]=(h+a)*d*Math.cos(o),i[r++]=(h+a)*d*Math.sin(o),i[r++]=(h*(1-n.eccentricitySquared)+a)*u}function Gu(e,t,i,r){NJ(e,t,i,r,nt)}function Wu(e,t,i,r){const n=oJ,o=e[t],s=e[t+1],a=e[t+2];let u,d,h,f,y,m,g,v,w,_,A,M,$,N,D,V,G,Z,ee,re,ue;u=Math.abs(a),d=o*o+s*s,h=Math.sqrt(d),f=d+a*a,y=Math.sqrt(f),re=Math.atan2(s,o),m=a*a/f,g=d/f,N=n.a2/y,D=n.a3-n.a4/y,g>.3?(v=u/y*(1+g*(n.a1+N+m*D)/y),ee=Math.asin(v),_=v*v,w=Math.sqrt(1-_)):(w=h/y*(1-m*(n.a5-N-g*D)/y),ee=Math.acos(w),_=1-w*w,v=Math.sqrt(_)),A=1-nt.eccentricitySquared*_,M=nt.radius/Math.sqrt(A),$=n.a6*M,N=h-M*w,D=u-$*v,G=w*N+v*D,V=w*D-v*N,Z=V/($/A+G),ee+=Z,ue=G+V*Z/2,a<0&&(ee=-ee),i[r++]=fp*re,i[r++]=fp*ee,i[r]=ue}function RJ(e,t,i,r){Wu(e,t,i,r),zu(i,r,i,r)}function PJ(e,t,i,r){Wu(e,t,i,r),fy(i,r,i,r)}const Jh={[x.WGS84]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:Xe,[x.SPHERICAL_ECEF]:zu,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:fy,[x.PLATE_CARREE]:Vu,[x.WGS84]:Xe,[x.WGS84_ECEF]:Gu},[x.CGCS2000]:{[x.CGCS2000]:Xe,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:Xe,[x.SPHERICAL_ECEF]:zu,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:Vu,[x.WGS84]:null,[x.WGS84_ECEF]:Gu},[x.GCSMARS2000]:{[x.CGCS2000]:null,[x.GCSMARS2000]:Xe,[x.GCSMOON2000]:null,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:XI,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.GCSMOON2000]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:Xe,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:JI,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.WEB_MERCATOR]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:qd,[x.WGS84_COMPARABLE_LON_LAT]:qd,[x.SPHERICAL_ECEF]:wJ,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Xe,[x.PLATE_CARREE]:SJ,[x.WGS84]:qd,[x.WGS84_ECEF]:bJ},[x.WGS84_ECEF]:{[x.CGCS2000]:Wu,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Wu,[x.WGS84_COMPARABLE_LON_LAT]:Wu,[x.SPHERICAL_ECEF]:RJ,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:PJ,[x.PLATE_CARREE]:TJ,[x.WGS84]:Wu,[x.WGS84_ECEF]:Xe},[x.SPHERICAL_ECEF]:{[x.CGCS2000]:Hu,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Hu,[x.WGS84_COMPARABLE_LON_LAT]:Hu,[x.SPHERICAL_ECEF]:Xe,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:IJ,[x.PLATE_CARREE]:EJ,[x.WGS84]:Hu,[x.WGS84_ECEF]:MJ},[x.SPHERICAL_MARS_PCPF]:{[x.CGCS2000]:null,[x.GCSMARS2000]:eM,[x.GCSMOON2000]:null,[x.LON_LAT]:eM,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:Xe,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.SPHERICAL_MOON_PCPF]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:QI,[x.LON_LAT]:QI,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:Xe,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.UNKNOWN]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:null,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:Xe,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.LON_LAT]:{[x.CGCS2000]:Xe,[x.GCSMARS2000]:Xe,[x.GCSMOON2000]:Xe,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:Xe,[x.SPHERICAL_ECEF]:zu,[x.SPHERICAL_MARS_PCPF]:XI,[x.SPHERICAL_MOON_PCPF]:JI,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:fy,[x.PLATE_CARREE]:Vu,[x.WGS84]:Xe,[x.WGS84_ECEF]:Gu},[x.WGS84_COMPARABLE_LON_LAT]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:Xe,[x.SPHERICAL_ECEF]:zu,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:Vu,[x.WGS84]:Xe,[x.WGS84_ECEF]:Gu},[x.PLATE_CARREE]:{[x.CGCS2000]:ju,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:ju,[x.WGS84_COMPARABLE_LON_LAT]:ju,[x.SPHERICAL_ECEF]:AJ,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:xJ,[x.PLATE_CARREE]:Xe,[x.WGS84]:ju,[x.WGS84_ECEF]:CJ}};function hO(e,t,i=hx()){return O(e)||O(t)?null:$J(e,t,i).projector}function $J(e,t,i){if(O(e)||O(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=A1(e,i.source),n=A1(t,i.dest);return r===x.UNKNOWN&&n===x.UNKNOWN?Ji(e,t)?i.projector=Xe:i.projector=null:i.projector=Jh[r][n],i}function hx(){return{source:{spatialReference:null,spatialReferenceId:x.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:x.UNKNOWN,metersPerUnit:1},projector:Xe}}const DJ={spatialReference:null,spatialReferenceId:x.UNKNOWN},LJ={spatialReference:null,spatialReferenceId:x.UNKNOWN},fO=hx();hx();const Lo=iq(1),fp=gL(1),Lm=Zo(),la=Zo(),ua=Zo(),Bt=Zo();var ES;let _o=ES=class extends U{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new ES({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};l([c({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_o.prototype,"cols",void 0),l([c({type:Qe,json:{write:!0}})],_o.prototype,"level",void 0),l([c({type:String,json:{write:!0}})],_o.prototype,"levelValue",void 0),l([c({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_o.prototype,"origin",void 0),l([c({type:Number,json:{write:!0}})],_o.prototype,"resolution",void 0),l([c({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_o.prototype,"rows",void 0),l([c({type:Number,json:{write:!0}})],_o.prototype,"scale",void 0),_o=ES=l([S("esri.layers.support.LOD")],_o);const fx=_o;var Na;const tM=new Se({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Ht=Na=class extends U{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:n=me.WebMercator,numLODs:o=24}=e;if(!Mi(n)){const f=[];if(i)for(let y=0;y<i.length;y++){const m=i[y];f.push({level:y,scale:m,resolution:m})}else{let y=5e-4;for(let m=o-1;m>=0;m--)f.unshift({level:m,scale:y,resolution:y}),y*=2}return new Na({dpi:96,lods:f,origin:new le(0,0,n),size:[r,r],spatialReference:n})}const s=to(n),a=e.origin?new le({x:e.origin.x,y:e.origin.y,spatialReference:n}):new le(s?{x:s.origin[0],y:s.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),u=96,d=1/($l(n)*39.37*u),h=[];if(i)for(let f=0;f<i.length;f++){const y=i[f],m=y*d;h.push({level:f,scale:y,resolution:m})}else{let f=R5(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const y=Math.ceil(o/t);h.push({level:0,scale:f,resolution:f*d});for(let m=1;m<y;m++){const g=f/2**t,v=g*d;h.push({level:m,scale:g,resolution:v}),f=g}}return new Na({dpi:u,lods:h,origin:a,size:[r,r],spatialReference:n})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=to(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return le.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach(n=>{r.push(n.scale),t=n.scale>t?n.scale:t,i=n.scale<i?n.scale:i,this._levelToLOD[n.level]=n})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const n=t[r],o=t[r+1];if(n<=e)return r;if(o===e)return r+1;if(n>e&&o<e)return r+Math.log(n/e)/Math.log(n/o)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let o,s;if(typeof t=="number")o=t,s=i;else if(Ji(t.spatialReference,this.spatialReference))o=t.x,s=t.y,r=i;else{const d=$v(t,this.spatialReference);if(O(d))return null;o=d.x,s=d.y,r=i}const a=n.resolution*this.size[0],u=n.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:xl()}),r.level=e,r.row=Math.floor((this.origin.y-s)/u+.001),r.col=Math.floor((o-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=Na.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Na.ExtrapolateOptions.POWER_OF_TWO){const s=this.lods[this.lods.length-1];s.level<e.level&&(i=s)}if(!i)return;const r=e.level-i.level,n=i.resolution*this.size[0]/2**r,o=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=xl()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+r,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return Na.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let n=0;n<r;n++){const o=this.lods[n],s=o.resolution*t;i.push(new fx({level:o.level,scale:o.scale,resolution:s}))}return new Na({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};l([c({type:Number,json:{write:!0}})],Ht.prototype,"compressionQuality",void 0),l([c({type:Number,json:{write:!0}})],Ht.prototype,"dpi",void 0),l([c({type:String,json:{read:tM.read,write:tM.write,origins:{"web-scene":{read:!1,write:!1}}}})],Ht.prototype,"format",void 0),l([c({readOnly:!0})],Ht.prototype,"isWrappable",null),l([c({type:le,json:{write:!0}})],Ht.prototype,"origin",void 0),l([Y("origin")],Ht.prototype,"readOrigin",null),l([c({type:[fx],value:null,json:{write:!0}})],Ht.prototype,"lods",null),l([c({readOnly:!0})],Ht.prototype,"minScale",void 0),l([c({readOnly:!0})],Ht.prototype,"maxScale",void 0),l([c({readOnly:!0})],Ht.prototype,"scales",void 0),l([c({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Ht.prototype,"size",void 0),l([Y("size",["rows","cols"])],Ht.prototype,"readSize",null),l([X("size",{cols:{type:Qe},rows:{type:Qe}})],Ht.prototype,"writeSize",null),l([c({type:me,json:{write:!0}})],Ht.prototype,"spatialReference",void 0),Ht=Na=l([S("esri.layers.support.TileInfo")],Ht),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Ht||(Ht={}));const Ls=Ht,rg={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},ob={xsmall:544,small:768,medium:992,large:1200};function OJ(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function sb(e,t){return t?rg[e].valueToClassName[t].split(" "):[]}const kJ=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new mi,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=ob}initialize(){this._breakpointsHandles.add(q(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),ze))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=nn(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=OJ(i);if(!r){const n=JSON.stringify(ob,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}i=r?i:ob,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=Ui.acquire(),r=Ui.acquire();let n,o=!1;for(n in rg){const s=this[n],a=rg[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});s!==a&&(o=!0,this[n]=a,sb(n,s).forEach(u=>r.push(u)),sb(n,a).forEach(u=>i.push(u)))}o&&(this._applyClassNameChanges(i,r),Ui.release(i),Ui.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(o=>n.classList.remove(o)),i.forEach(o=>n.classList.add(o)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in rg)sb(r,this[r]).forEach(n=>i.classList.remove(n))}};return l([c()],t.prototype,"breakpoints",null),l([c()],t.prototype,"orientation",void 0),l([c()],t.prototype,"widthBreakpoint",void 0),l([c()],t.prototype,"heightBreakpoint",void 0),t=l([S("esri.views.BreakpointsOwner")],t),t};function yx(e){return typeof e=="string"?document.getElementById(e):e}function yO(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function iM(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function rM(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var FJ="[object Object]";function BJ(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function UJ(e,t){return function(i){return e(t(i))}}var VJ=Function.prototype,mO=Object.prototype,gO=VJ.toString,jJ=mO.hasOwnProperty,zJ=gO.call(Object),HJ=mO.toString,GJ=UJ(Object.getPrototypeOf,Object);function WJ(e){return!!e&&typeof e=="object"}function qJ(e){if(!WJ(e)||HJ.call(e)!=FJ||BJ(e))return!1;var t=GJ(e);if(t===null)return!0;var i=jJ.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&gO.call(i)==zJ}var YJ=qJ,Iu={exports:{}},_t={},yy={exports:{}},Mc={};function vO(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function KJ(e,t,i){}function ZJ(e,t,i){}var JJ=/javascript\s*\:/img;function XJ(e,t){return JJ.test(t)?"":t}Mc.whiteList=vO();Mc.getDefaultWhiteList=vO;Mc.onAttr=KJ;Mc.onIgnoreAttr=ZJ;Mc.safeAttrValue=XJ;var QJ={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},sh=QJ;function eX(e,t){e=sh.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,n=0,o=0,s="";function a(){if(!r){var h=sh.trim(e.slice(n,o)),f=h.indexOf(":");if(f!==-1){var y=sh.trim(h.slice(0,f)),m=sh.trim(h.slice(f+1));if(y){var g=t(n,s.length,y,m,h);g&&(s+=g+"; ")}}}n=o+1}for(;o<i;o++){var u=e[o];if(u==="/"&&e[o+1]==="*"){var d=e.indexOf("*/",o+2);if(d===-1)break;o=d+1,n=o+1,r=!1}else u==="("?r=!0:u===")"?r=!1:u===";"?r||a():u===`
`&&a()}return sh.trim(s)}var tX=eX,Om=Mc,iX=tX;function nM(e){return e==null}function rX(e){var t={};for(var i in e)t[i]=e[i];return t}function wO(e){e=rX(e||{}),e.whiteList=e.whiteList||Om.whiteList,e.onAttr=e.onAttr||Om.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Om.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Om.safeAttrValue,this.options=e}wO.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onAttr,o=i.onIgnoreAttr,s=i.safeAttrValue,a=iX(e,function(u,d,h,f,y){var m=r[h],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(f):m instanceof RegExp&&(g=m.test(f)),g!==!0&&(g=!1),f=s(h,f),!!f){var v={position:d,sourcePosition:u,source:y,isWhite:g};if(g){var w=n(h,f,v);return nM(w)?h+":"+f:w}else{var w=o(h,f,v);if(!nM(w))return w}}});return a};var nX=wO;(function(e,t){var i=Mc,r=nX;function n(s,a){var u=new r(a);return u.process(s)}t=e.exports=n,t.FilterCSS=r;for(var o in i)t[o]=i[o]})(yy,yy.exports);var mx={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},oX=yy.exports.FilterCSS,sX=yy.exports.getDefaultWhiteList,x1=mx;function bO(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var _O=new oX;function aX(e,t,i){}function lX(e,t,i){}function uX(e,t,i){}function cX(e,t,i){}function SO(e){return e.replace(pX,"&lt;").replace(hX,"&gt;")}function dX(e,t,i,r){if(i=IO(i),t==="href"||t==="src"){if(i=x1.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(km.lastIndex=0,km.test(i))return""}else if(t==="style"){if(oM.lastIndex=0,oM.test(i)||(sM.lastIndex=0,sM.test(i)&&(km.lastIndex=0,km.test(i))))return"";r!==!1&&(r=r||_O,i=r.process(i))}return i=MO(i),i}var pX=/</g,hX=/>/g,fX=/"/g,yX=/&quot;/g,mX=/&#([a-zA-Z0-9]*);?/gim,gX=/&colon;?/gim,vX=/&newline;?/gim,km=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,oM=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,sM=/u\s*r\s*l\s*\(.*/gi;function TO(e){return e.replace(fX,"&quot;")}function EO(e){return e.replace(yX,'"')}function AO(e){return e.replace(mX,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function xO(e){return e.replace(gX,":").replace(vX," ")}function CO(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return x1.trim(t)}function IO(e){return e=EO(e),e=AO(e),e=xO(e),e=CO(e),e}function MO(e){return e=TO(e),e=SO(e),e}function wX(){return""}function bX(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(s){return i?!0:x1.indexOf(e,s)!==-1}var n=[],o=!1;return{onIgnoreTag:function(s,a,u){if(r(s))if(u.isClosing){var d="[/removed]",h=u.position+d.length;return n.push([o!==!1?o:u.position,h]),o=!1,d}else return o||(o=u.position),"[removed]";else return t(s,a,u)},remove:function(s){var a="",u=0;return x1.forEach(n,function(d){a+=s.slice(u,d[0]),u=d[1]}),a+=s.slice(u),a}}}function _X(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var n=e.indexOf("-->",r);if(n===-1)break;i=n+3}return t}function SX(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}_t.whiteList=bO();_t.getDefaultWhiteList=bO;_t.onTag=aX;_t.onIgnoreTag=lX;_t.onTagAttr=uX;_t.onIgnoreTagAttr=cX;_t.safeAttrValue=dX;_t.escapeHtml=SO;_t.escapeQuote=TO;_t.unescapeQuote=EO;_t.escapeHtmlEntities=AO;_t.escapeDangerHtml5Entities=xO;_t.clearNonPrintableCharacter=CO;_t.friendlyAttrValue=IO;_t.escapeAttrValue=MO;_t.onIgnoreTagStripAll=wX;_t.StripTagBody=bX;_t.stripCommentTag=_X;_t.stripBlankChar=SX;_t.cssFilter=_O;_t.getDefaultCSSWhiteList=sX;var Gv={},Za=mx;function TX(e){var t=Za.spaceIndex(e);if(t===-1)var i=e.slice(1,-1);else var i=e.slice(1,t+1);return i=Za.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function EX(e){return e.slice(0,2)==="</"}function AX(e,t,i){var r="",n=0,o=!1,s=!1,a=0,u=e.length,d="",h="";e:for(a=0;a<u;a++){var f=e.charAt(a);if(o===!1){if(f==="<"){o=a;continue}}else if(s===!1){if(f==="<"){r+=i(e.slice(n,a)),o=a,n=a;continue}if(f===">"){r+=i(e.slice(n,o)),h=e.slice(o,a+1),d=TX(h),r+=t(o,r.length,d,h,EX(h)),n=a+1,o=!1;continue}if(f==='"'||f==="'")for(var y=1,m=e.charAt(a-y);m.trim()===""||m==="=";){if(m==="="){s=f;continue e}m=e.charAt(a-++y)}}else if(f===s){s=!1;continue}}return n<e.length&&(r+=i(e.substr(n))),r}var xX=/[^a-zA-Z0-9_:\.\-]/gim;function CX(e,t){var i=0,r=[],n=!1,o=e.length;function s(f,y){if(f=Za.trim(f),f=f.replace(xX,"").toLowerCase(),!(f.length<1)){var m=t(f,y||"");m&&r.push(m)}}for(var a=0;a<o;a++){var u=e.charAt(a),d,h;if(n===!1&&u==="="){n=e.slice(i,a),i=a+1;continue}if(n!==!1&&a===i&&(u==='"'||u==="'")&&e.charAt(a-1)==="="){if(h=e.indexOf(u,a+1),h===-1)break;d=Za.trim(e.slice(i+1,h)),s(n,d),n=!1,a=h,i=a+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(h=IX(e,a),h===-1){d=Za.trim(e.slice(i,a)),s(d),n=!1,i=a+1;continue}else{a=h-1;continue}else if(h=MX(e,a-1),h===-1){d=Za.trim(e.slice(i,a)),d=aM(d),s(n,d),n=!1,i=a+1;continue}else continue}return i<e.length&&(n===!1?s(e.slice(i)):s(n,aM(Za.trim(e.slice(i))))),Za.trim(r.join(" "))}function IX(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function MX(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function NX(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function aM(e){return NX(e)?e.substr(1,e.length-2):e}Gv.parseTag=AX;Gv.parseAttr=CX;var RX=yy.exports.FilterCSS,Gn=_t,NO=Gv,PX=NO.parseTag,$X=NO.parseAttr,ng=mx;function Fm(e){return e==null}function DX(e){var t=ng.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=ng.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=ng.trim(e.slice(0,-1))),{html:e,closing:i}}function LX(e){var t={};for(var i in e)t[i]=e[i];return t}function RO(e){e=LX(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Gn.onIgnoreTagStripAll),e.whiteList=e.whiteList||e.allowList||Gn.whiteList,e.onTag=e.onTag||Gn.onTag,e.onTagAttr=e.onTagAttr||Gn.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Gn.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Gn.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Gn.safeAttrValue,e.escapeHtml=e.escapeHtml||Gn.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new RX(e.css))}RO.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onTag,o=i.onIgnoreTag,s=i.onTagAttr,a=i.onIgnoreTagAttr,u=i.safeAttrValue,d=i.escapeHtml,h=t.cssFilter;i.stripBlankChar&&(e=Gn.stripBlankChar(e)),i.allowCommentTag||(e=Gn.stripCommentTag(e));var f=!1;if(i.stripIgnoreTagBody){var f=Gn.StripTagBody(i.stripIgnoreTagBody,o);o=f.onIgnoreTag}var y=PX(e,function(m,g,v,w,_){var A={sourcePosition:m,position:g,isClosing:_,isWhite:r.hasOwnProperty(v)},M=n(v,w,A);if(!Fm(M))return M;if(A.isWhite){if(A.isClosing)return"</"+v+">";var $=DX(w),N=r[v],D=$X($.html,function(G,Z){var ee=ng.indexOf(N,G)!==-1,re=s(v,G,Z,ee);if(!Fm(re))return re;if(ee)return Z=u(v,G,Z,h),Z?G+'="'+Z+'"':G;var re=a(v,G,Z,ee);return Fm(re)?void 0:re}),w="<"+v;return D&&(w+=" "+D),$.closing&&(w+=" /"),w+=">",w}else{var M=o(v,w,A);return Fm(M)?d(w):M}},d);return f&&(y=f.remove(y)),y};var OX=RO;(function(e,t){var i=_t,r=Gv,n=OX;function o(u,d){var h=new n(d);return h.process(u)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=n;for(var s in i)t[s]=i[s];for(var s in r)t[s]=r[s];function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(Iu,Iu.exports);var kX=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(o,s,a,u){return o==="a"&&s==="href"||(o==="img"||o==="source")&&s==="src"?r.sanitizeUrl(a):Iu.exports.safeAttrValue(o,s,a,u)}};var n;t&&!i?n=t:t&&i?(n=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(o){o==="whiteList"?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):n[o]=t[o]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new Iu.exports.FilterXSS(n)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i!=null?i:{}).isProtocolRequired,n=r===void 0?!0:r,o=this._trim(t.substring(0,t.indexOf(":"))),s=t==="/",a=/^#/.test(t),u=o&&this.allowedProtocols.indexOf(o.toLowerCase())>-1;return s||a||u?Iu.exports.escapeAttrValue(t):!o&&!n?Iu.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,n):Iu.exports.safeAttrValue(t,i,r,n)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var n=!1,o=void 0;if(Array.isArray(t))o=t.reduce(function(a,u){var d=r.validate(u,i);return d.isValid?a.concat([u]):(n=!0,a.concat([d.sanitized]))},[]);else if(YJ(t)){var s=Object.keys(t);o=s.reduce(function(a,u){var d=t[u],h=r.validate(d,i);return h.isValid?a[u]=d:(n=!0,a[u]=h.sanitized),a},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return n?o:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Wv=new Map;function PO(){Wv.clear()}function FX(e){return Wv.get(e)}function BX(e,t){Wv.set(e,t)}function ab(e){Wv.delete(e)}var wc,yp,UX=function(e){if("WebkitTransition"in e.style)wc="webkitTransitionEnd",yp="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");wc="transitionend",yp="animationend"}},$O=function(e){wc||UX(e)},VX=function(e,t){return t===void 0&&(t=e+"-active"),function(i){$O(i);var r=!1,n=function(o){r||(r=!0,i.removeEventListener(wc,n),i.removeEventListener(yp,n),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(wc,n),i.addEventListener(yp,n),requestAnimationFrame(function(){i.classList.add(t)})}},jX=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){$O(i);var n=!1,o=function(s){n||(n=!0,i.removeEventListener(wc,o),i.removeEventListener(yp,o),r())};i.classList.add(e),i.addEventListener(wc,o),i.addEventListener(yp,o),requestAnimationFrame(function(){i.classList.add(t)})}};const zX=W.getLogger("esri.widgets.support.widgetUtils");function DO(e){const t=Ui.acquire();for(let r=0;r<arguments.length;r++){const n=arguments[r],o=typeof n;if(o==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(o==="object")for(const s in n)n[s]&&t.push(s)}const i=t.join(" ");return Ui.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{PO();for(const r of i)e.get(r.target)(r)});return(i,r,n)=>(e.has(i)&&zX.error("Already observing element",i),e.set(i,r),t.observe(i,n),Ep(()=>{t.unobserve(i),e.delete(i)}))})();function dl(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function lM(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function qu(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function HX(e,t){return(e==="enter"?VX:jX)(t)}const GX=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],WX=GX.reduce((e,t)=>(e[t]=[],e),{}),qX=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],LO=new kX({whiteList:WX,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(qX.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function YX(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=i.top+i.height,o=r.top+r.height,s=i.top,a=r.top;(n>o||s<a)&&e.scrollIntoView({block:"end"})}function OO(e){return e==="Enter"||e===" "}const kO="http://www.w3.org/",qv=`${kO}2000/svg`,FO=`${kO}1999/xlink`;let C1,uM=[],gx=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},vx=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),BO=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},KX=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(vx(e[r],t))return r}return-1},lb=(e,t,i,r)=>{let n=e[t];if(n.vnodeSelector==="")return;let o=n.properties;if(!(o&&(o.key===void 0?o.bind:o.key))){for(let s=0;s<e.length;s++)if(s!==t){let a=e[s];if(vx(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},ZX=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},AS=[],xS=!1,UO=e=>{(e.children||[]).forEach(UO),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},cM=()=>{xS=!1,AS.forEach(UO),AS.length=0},dM=e=>{AS.push(e),xS||(xS=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(cM,{timeout:16}):setTimeout(cM,16))},pM=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),dM(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),dM(e))},JX=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,n=Object.keys(t),o=n.length;for(let s=0;s<o;s++){let a=n[s],u=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")CS(e,u,!0);else if(a==="classes"){let d=Object.keys(u),h=d.length;for(let f=0;f<h;f++){let y=d[f];u[y]&&e.classList.add(y)}}else if(a==="styles"){let d=Object.keys(u),h=d.length;for(let f=0;f<h;f++){let y=d[f],m=u[y];m&&(BO(m),i.styleApplyer(e,y,m))}}else if(a!=="key"&&u!=null){let d=typeof u;d==="function"?(a.lastIndexOf("on",0)===0&&(r&&(u=r(a,u,e,t)),a==="oninput"&&function(){let h=u;u=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=u):i.namespace===qv?a==="href"?e.setAttributeNS(FO,a,u):e.setAttribute(a,u):d==="string"&&a!=="value"?a==="innerHTML"?e[a]=LO.sanitize(u):e.setAttribute(a,u):e[a]=u}}},XX=(e,t,i)=>{if(t)for(let r of t)Pd(r,e,void 0,i)},VO=(e,t,i)=>{XX(e,t.children,i),t.text&&(e.textContent=t.text),JX(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},Pd=(e,t,i,r)=>{let n,o=0,s=e.vnodeSelector,a=t.ownerDocument;if(s==="")n=e.domNode=a.createTextNode(e.text),i!==void 0?t.insertBefore(n,i):t.appendChild(n);else{for(let u=0;u<=s.length;++u){let d=s.charAt(u);if(u===s.length||d==="."||d==="#"){let h=s.charAt(o-1),f=s.slice(o,u);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(r=gx(r,{namespace:qv})),r.namespace!==void 0?n=e.domNode=a.createElementNS(r.namespace,f):(n=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(n,i):n.parentNode!==t&&t.appendChild(n)),o=u+1}}VO(n,e,r)}},CS=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},QX=(e,t,i,r)=>{if(!i)return;let n=!1,o=Object.keys(i),s=o.length;for(let a=0;a<s;a++){let u=o[a],d=i[u],h=t[u];if(u==="class")h!==d&&(CS(e,h,!1),CS(e,d,!0));else if(u==="classes"){let f=e.classList,y=Object.keys(d),m=y.length;for(let g=0;g<m;g++){let v=y[g],w=!!d[v];w!==!!h[v]&&(n=!0,w?f.add(v):f.remove(v))}}else if(u==="styles"){let f=Object.keys(d),y=f.length;for(let m=0;m<y;m++){let g=f[m],v=d[g];v!==h[g]&&(n=!0,v?(BO(v),r.styleApplyer(e,g,v)):r.styleApplyer(e,g,""))}}else if(d||typeof h!="string"||(d=""),u==="value"){let f=e[u];f!==d&&(e["oninput-value"]?f===e["oninput-value"]:d!==h)&&(e[u]=d,e["oninput-value"]=void 0),d!==h&&(n=!0)}else if(d!==h){let f=typeof d;f==="function"&&r.eventHandlerInterceptor||(r.namespace===qv?u==="href"?e.setAttributeNS(FO,u,d):e.setAttribute(u,d):f==="string"?u==="innerHTML"?e[u]=LO.sanitize(d):u==="role"&&d===""?e.removeAttribute(u):e.setAttribute(u,d):e[u]!==d&&(e[u]=d),n=!0)}}return n},eQ=(e,t,i,r,n)=>{if(i===r)return!1;r=r||uM;let o,s=(i=i||uM).length,a=r.length,u=0,d=0,h=!1;for(;d<a;){let f=u<s?i[u]:void 0,y=r[d];if(f!==void 0&&vx(f,y))h=C1(f,y,n)||h,u++;else{let m=KX(i,y,u+1);if(m>=0){for(o=u;o<m;o++)pM(i[o]),lb(i,o,e,"removed");h=C1(i[m],y,n)||h,u=m+1}else Pd(y,t,u<s?i[u].domNode:void 0,n),ZX(y),lb(r,d,e,"added")}d++}if(s>u)for(o=u;o<s;o++)pM(i[o]),lb(i,o,e,"removed");return h};C1=(e,t,i)=>{let r=e.domNode,n=!1;if(e===t)return!1;let o=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let s=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(s,r),t.domNode=s,n=!0,n}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=gx(i,{namespace:qv})),e.text!==t.text&&(o=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,o=eQ(t,r,e.children,t.children,i)||o,o=QX(r,e.properties,t.properties,i)||o,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return o&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),n};let ah=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,C1(r,i,t)},domNode:e.domNode});const tQ={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let Xc=e=>gx(tQ,e),pl={create:(e,t)=>(t=Xc(t),Pd(e,document.createElement("div"),void 0,t),ah(e,t)),append:(e,t,i)=>(i=Xc(i),Pd(t,e,void 0,i),ah(t,i)),insertBefore:(e,t,i)=>(i=Xc(i),Pd(t,e.parentNode,e,i),ah(t,i)),merge:(e,t,i)=>(i=Xc(i),t.domNode=e,VO(e,t,i),ah(t,i)),replace:(e,t,i)=>(i=Xc(i),Pd(t,e.parentNode,e,i),e.parentNode.removeChild(e),ah(t,i))},jO,iQ=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};jO=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let rQ=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?jO(i.children,n=>n.domNode===r):void 0}),i},nQ=(e,t,i)=>{let r=function(n){i("domEvent",n);let o=t(),s=iQ(n.currentTarget,o.domNode);s.reverse();let a,u=rQ(o.getLastRender(),s);return e.scheduleRender(),u&&(a=u.properties[`on${n.type}`].apply(u.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,o,s,a)=>r},IS=e=>{let t,i,r=Xc(e),n=r.performanceLogger,o=!0,s=!1,a=[],u=[],d=(f,y,m)=>{let g,v=()=>g;r.eventHandlerInterceptor=nQ(t,v,n),g=f(y,m(),r),a.push(g),u.push(m)},h=()=>{if(i=void 0,o){o=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let y=u[f]();n("rendered",void 0),a[f].update(y),n("patched",void 0)}n("renderDone",void 0),o=!0}};return t={renderNow:h,scheduleRender:()=>{i||s||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),s=!0},resume:()=>{s=!1,o=!0,t.scheduleRender()},append:(f,y)=>{d(pl.append,f,y)},insertBefore:(f,y)=>{d(pl.insertBefore,f,y)},merge:(f,y)=>{d(pl.merge,f,y)},replace:(f,y)=>{d(pl.replace,f,y)},detach:f=>{for(let y=0;y<u.length;y++)if(u[y]===f)return u.splice(y,1),a.splice(y,1)[0];throw new Error("renderFunction was not found")}},t},Ra=class extends se{constructor(){super(...arguments),this.items=new he,this._watchUpdatingTracking=new Gd,this._callbacks=new Map,this._projector=IS(),this._hiddenProjector=IS()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const r=()=>i.render();this._callbacks.set(i,r),this._projector.append(this.surface,r)}for(const i of t.removed){const r=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(r.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r=null;const n=()=>(r=e.render(),r);i.append(t,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const s=r.domNode.getBoundingClientRect();o.left=s.left,o.top=s.top,o.right=s.right,o.bottom=s.bottom}for(i.detach(n);t.firstChild;)t.removeChild(t.firstChild);return o}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}};l([c({readOnly:!0})],Ra.prototype,"surface",void 0),l([c({readOnly:!0})],Ra.prototype,"items",void 0),l([c({readOnly:!0})],Ra.prototype,"needsRender",null),l([c({readOnly:!0})],Ra.prototype,"_watchUpdatingTracking",void 0),l([c({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],Ra.prototype,"updating",void 0),Ra=l([S("esri.views.overlay.ViewOverlay")],Ra);const hM=Ra;function wx(e,t,i,r){let n=null,o=1e3;typeof t=="number"?(o=t,r=i):(n=t!=null?t:null,o=i);let s,a=0;const u=()=>{a=0,e.apply(r,s)},d=(...h)=>{n&&n.apply(r,h),s=h,o?a||(a=setTimeout(u,o)):u()};return d.remove=()=>{a&&(clearTimeout(a),a=0)},d.forceUpdate=()=>{a&&(clearTimeout(a),u())},d.hasPendingUpdates=()=>!!a,d}function J(e,t){const i=t?{...t,source:e}:e;return c({aliasOf:i})}const oQ="randomUUID"in crypto;function sQ(){if(oQ)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const aQ={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},lQ={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},uQ=e=>({...lQ,...e}),cQ=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},dQ=(e,t)=>e.find(t),fM=(e,t,i=!1)=>{let r=e;return t.forEach((n,o)=>{const s=r!=null&&r.children?dQ(r.children,a=>a.domNode===n):void 0;i&&!s&&o!==t.length-1||(r=s)}),r},pQ=e=>{let t;const i={...aQ,...e},r=uQ(i),n=r.performanceLogger;let o,s=!0,a=!1;const u=[],d=[],h=(y,m,g)=>{var _;let v;r.eventHandlerInterceptor=(A,M,$,N)=>function(D){let V;n("domEvent",D);const G=cQ(D.currentTarget,v.domNode),Z=G.some(re=>{var ue;return customElements.get((ue=re==null?void 0:re.tagName)==null?void 0:ue.toLowerCase())});if(D.eventPhase===Event.CAPTURING_PHASE||!Z)G.reverse(),V=fM(v.getLastRender(),G);else{const re=D.composedPath(),ue=re.slice(re.indexOf(D.currentTarget),re.indexOf(v.domNode)).filter(ge=>ge.getRootNode()===ge.ownerDocument).reverse();V=fM(v.getLastRender(),ue,!0)}let ee;return V&&(ee=i.handleInterceptedEvent(t,V,this,D)),n("domEventProcessed",D),ee},(_=i.postProcessProjectionOptions)==null||_.call(i,r);const w=g();v=y(m,w,r),u.push(v),d.push(g),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,w)};let f=()=>{if(o=void 0,s){s=!1,n("renderStart",void 0);for(let y=0;y<u.length;y++){const m=d[y]();n("rendered",void 0),u[y].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return i.modifyDoRenderImplementation&&(f=i.modifyDoRenderImplementation(f,u,d)),t={renderNow:f,scheduleRender:()=>{o||a||(o=requestAnimationFrame(f))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),a=!0},resume:()=>{a=!1,s=!0,t.scheduleRender()},append:(y,m)=>{h(pl.append,y,m)},insertBefore:(y,m)=>{h(pl.insertBefore,y,m)},merge:(y,m)=>{h(pl.merge,y,m)},replace:(y,m)=>{h(pl.replace,y,m)},detach:y=>{for(let m=0;m<d.length;m++)if(d[m]===y)return d.splice(m,1),u.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},$e={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Qc,zO,Yv,HO=!1,I1=!1,bx=!1,Nr=!1,yM=null,MS=!1;const kp=typeof window<"u"?window:{};$e.cssVarShim&&kp.CSS;const io=kp.document||{head:{}},x1e=kp.HTMLElement||class{},pi={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},M1=$e.shadowDomShim&&$e.shadowDom?(()=>(io.head.attachShadow+"").indexOf("[native")>-1)():!0,hQ=(()=>{let e=!1;try{io.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),fQ=e=>Promise.resolve(e),yQ=$e.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,GO=(e,t,i,r)=>{i&&i.map(([n,o,s])=>{const a=gQ(e,n),u=mQ(t,s),d=vQ(n);pi.ael(a,o,u,d),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>pi.rel(a,o,u,d))})},mQ=(e,t)=>i=>{try{$e.lazyLoad||e.$hostElement$[t](i)}catch(r){Yy(r)}},gQ=(e,t)=>t&4?io:t&8?kp:t&16?io.body:e,vQ=e=>hQ?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,mM="http://www.w3.org/1999/xlink",bc=(e,t="")=>()=>{},gM=new WeakMap,wQ=(e,t,i)=>{let r=P1.get(e);yQ&&i?(r=r||new CSSStyleSheet,r.replace(t)):r=t,P1.set(e,r)},bQ=(e,t,i,r)=>{let n=WO(t,i),o=P1.get(n);if(e=e.nodeType===11?e:io,o)if(typeof o=="string"){e=e.head||e;let s=gM.get(e),a;s||gM.set(e,s=new Set),s.has(n)||(a=io.createElement("style"),a.innerHTML=o,e.insertBefore(a,e.querySelector("link")),s&&s.add(n))}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n},_Q=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=bc("attachStyles",t.$tagName$),o=bQ(M1&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=o,i.classList.add(o+"-h"),r&2&&i.classList.add(o+"-s")),n()},WO=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),SQ=e=>XQ.map(t=>t(e)).find(t=>!!t),vM={},TQ="http://www.w3.org/2000/svg",EQ="http://www.w3.org/1999/xhtml",AQ=e=>e!=null,_x=e=>(e=typeof e,e==="object"||e==="function"),qO=(e,t,...i)=>{let r=null,n=null,o=null,s=!1,a=!1,u=[];const d=f=>{for(let y=0;y<f.length;y++)r=f[y],Array.isArray(r)?d(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!_x(r))&&(r=String(r)),s&&a?u[u.length-1].$text$+=r:u.push(s?N1(null,r):r),a=s)};if(d(i),t&&($e.isDev&&e==="input"&&MQ(t),$e.vdomKey&&t.key&&(n=t.key),$e.slotRelocation&&t.name&&(o=t.name),$e.vdomClass)){const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(y=>f[y]).join(" "))}if($e.isDev&&u.some(YO)&&JQ(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),$e.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,u,CQ);const h=N1(e,null);return h.$attrs$=t,u.length>0&&(h.$children$=u),$e.vdomKey&&(h.$key$=n),$e.slotRelocation&&(h.$name$=o),h},N1=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return $e.vdomAttribute&&(i.$attrs$=null),$e.vdomKey&&(i.$key$=null),$e.slotRelocation&&(i.$name$=null),i},xQ={},YO=e=>e&&e.$tag$===xQ,CQ={forEach:(e,t)=>e.map(wM).forEach(t),map:(e,t)=>e.map(wM).map(t).map(IQ)},wM=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),IQ=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),qO(e.vtag,i,...e.vchildren||[])}const t=N1(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},MQ=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const r=t.indexOf("type"),n=t.indexOf("min"),o=t.indexOf("max"),s=t.indexOf("step");(i<r||i<n||i<o||i<s)&&n6('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},bM=(e,t,i,r,n,o)=>{if(i!==r){let s=EM(e,t),a=t.toLowerCase();if(t==="class"){const u=e.classList,d=_M(i),h=_M(r);u.remove(...d.filter(f=>f&&!h.includes(f))),u.add(...h.filter(f=>f&&!d.includes(f)))}else if(t==="style"){for(const u in i)(!r||r[u]==null)&&(u.includes("-")?e.style.removeProperty(u):e.style[u]="");for(const u in r)(!i||r[u]!==i[u])&&(u.includes("-")?e.style.setProperty(u,r[u]):e.style[u]=r[u])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):EM(kp,a)?t=a.slice(2):t=a[2]+t.slice(3),i&&pi.rel(e,t,i,!1),r&&pi.ael(e,t,r,!1);else{const u=_x(r);if((s||u&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{let h=r==null?"":r;t==="list"?s=!1:(i==null||e[t]!=h)&&(e[t]=h)}}catch{}let d=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,d=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(d?e.removeAttributeNS(mM,t):e.removeAttribute(t)):(!s||o&4||n)&&!u&&(r=r===!0?"":r,d?e.setAttributeNS(mM,t,r):e.setAttribute(t,r))}}},NQ=/\s/,_M=e=>e?e.split(NQ):[],KO=(e,t,i,r)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||vM,s=t.$attrs$||vM;for(r in o)r in s||bM(n,r,o[r],void 0,i,t.$flags$);for(r in s)bM(n,r,o[r],s[r],i,t.$flags$)},R1=(e,t,i,r)=>{let n=t.$children$[i],o=0,s,a,u;if(HO||(bx=!0,n.$tag$==="slot"&&(Qc&&r.classList.add(Qc+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)s=n.$elm$=io.createTextNode(n.$text$);else if(n.$flags$&1)s=n.$elm$=io.createTextNode("");else{if(Nr||(Nr=n.$tag$==="svg"),s=n.$elm$=io.createElementNS(Nr?TQ:EQ,n.$flags$&2?"slot-fb":n.$tag$),Nr&&n.$tag$==="foreignObject"&&(Nr=!1),KO(null,n,Nr),AQ(Qc)&&s["s-si"]!==Qc&&s.classList.add(s["s-si"]=Qc),n.$children$)for(o=0;o<n.$children$.length;++o)a=R1(e,n,o,s),a&&s.appendChild(a);n.$tag$==="svg"?Nr=!1:s.tagName==="foreignObject"&&(Nr=!0)}return s["s-hn"]=Yv,n.$flags$&3&&(s["s-sr"]=!0,s["s-cr"]=zO,s["s-sn"]=n.$name$||"",u=e&&e.$children$&&e.$children$[i],u&&u.$tag$===n.$tag$&&e.$elm$&&my(e.$elm$,!1)),s},my=(e,t)=>{pi.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==Yv&&n["s-ol"]&&(XO(n).insertBefore(n,Sx(n)),n["s-ol"].remove(),n["s-ol"]=void 0,bx=!0),t&&my(n,t)}pi.$flags$&=-2},ZO=(e,t,i,r,n,o)=>{let s=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(s.shadowRoot&&s.tagName===Yv&&(s=s.shadowRoot);n<=o;++n)r[n]&&(a=R1(null,i,n,e),a&&(r[n].$elm$=a,s.insertBefore(a,Sx(t))))},JO=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,t6(r),I1=!0,n["s-ol"]?n["s-ol"].remove():my(n,!0),n.remove())},RQ=(e,t,i,r)=>{let n=0,o=0,s=0,a=0,u=t.length-1,d=t[0],h=t[u],f=r.length-1,y=r[0],m=r[f],g,v;for(;n<=u&&o<=f;)if(d==null)d=t[++n];else if(h==null)h=t[--u];else if(y==null)y=r[++o];else if(m==null)m=r[--f];else if(Bm(d,y))ed(d,y),d=t[++n],y=r[++o];else if(Bm(h,m))ed(h,m),h=t[--u],m=r[--f];else if(Bm(d,m))(d.$tag$==="slot"||m.$tag$==="slot")&&my(d.$elm$.parentNode,!1),ed(d,m),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++n],m=r[--f];else if(Bm(h,y))(d.$tag$==="slot"||m.$tag$==="slot")&&my(h.$elm$.parentNode,!1),ed(h,y),e.insertBefore(h.$elm$,d.$elm$),h=t[--u],y=r[++o];else{for(s=-1,a=n;a<=u;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===y.$key$){s=a;break}s>=0?(v=t[s],v.$tag$!==y.$tag$?g=R1(t&&t[o],i,s,e):(ed(v,y),t[s]=void 0,g=v.$elm$),y=r[++o]):(g=R1(t&&t[o],i,o,e),y=r[++o]),g&&XO(d.$elm$).insertBefore(g,Sx(d.$elm$))}n>u?ZO(e,r[f+1]==null?null:r[f+1].$elm$,i,r,o,f):o>f&&JO(t,n,u)},Bm=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,Sx=e=>e&&e["s-ol"]||e,XO=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,ed=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,o=t.$tag$,s=t.$text$;let a;s===null?(Nr=o==="svg"?!0:o==="foreignObject"?!1:Nr,o==="slot"||KO(e,t,Nr),r!==null&&n!==null?RQ(i,r,t,n):n!==null?(e.$text$!==null&&(i.textContent=""),ZO(i,null,t,n,0,n.length-1)):r!==null&&JO(r,0,r.length-1),Nr&&o==="svg"&&(Nr=!1)):(a=i["s-cr"])?a.parentNode.textContent=s:e.$text$!==s&&(i.data=s)},QO=e=>{let t=e.childNodes,i,r,n,o,s,a;for(r=0,n=t.length;r<n;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(s=i["s-sn"],i.hidden=!1,o=0;o<n;o++)if(a=t[o].nodeType,t[o]["s-hn"]!==i["s-hn"]||s!==""){if(a===1&&s===t[o].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&t[o].textContent.trim()!==""){i.hidden=!0;break}}QO(i)}},Zn=[],e6=e=>{let t,i,r,n,o,s,a=0,u=e.childNodes,d=u.length;for(;a<d;a++){if(t=u[a],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=t["s-sn"],s=r.length-1;s>=0;s--)i=r[s],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(SM(i,n)?(o=Zn.find(h=>h.$nodeToRelocate$===i),I1=!0,i["s-sn"]=i["s-sn"]||n,o?o.$slotRefNode$=t:Zn.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&Zn.map(h=>{SM(h.$nodeToRelocate$,i["s-sn"])&&(o=Zn.find(f=>f.$nodeToRelocate$===i),o&&!h.$slotRefNode$&&(h.$slotRefNode$=o.$slotRefNode$))})):Zn.some(h=>h.$nodeToRelocate$===i)||Zn.push({$nodeToRelocate$:i}));t.nodeType===1&&e6(t)}},SM=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",t6=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(t6)},PQ=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||N1(null,null),o=YO(t)?t:qO(null,null,t);Yv=i.tagName,r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map(([s,a])=>o.$attrs$[a]=i[s])),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=n.$elm$=i.shadowRoot||i,Qc=i["s-sc"],zO=i["s-cr"],HO=M1&&(r.$flags$&1)!==0,I1=!1,ed(n,o);{if(pi.$flags$|=1,bx){e6(o.$elm$);let s,a,u,d,h,f,y=0;for(;y<Zn.length;y++)s=Zn[y],a=s.$nodeToRelocate$,a["s-ol"]||(u=io.createTextNode(""),u["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=u,a));for(y=0;y<Zn.length;y++)if(s=Zn[y],a=s.$nodeToRelocate$,s.$slotRefNode$){for(d=s.$slotRefNode$.parentNode,h=s.$slotRefNode$.nextSibling,u=a["s-ol"];u=u.previousSibling;)if(f=u["s-nr"],f&&f["s-sn"]===a["s-sn"]&&d===f.parentNode&&(f=f.nextSibling,!f||!f["s-nr"])){h=f;break}(!h&&d!==a.parentNode||a.nextSibling!==h)&&a!==h&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),d.insertBefore(a,h))}else a.nodeType===1&&(a.hidden=!0)}I1&&QO(o.$elm$),pi.$flags$&=-2,Zn.length=0}},$Q=e=>$e.lazyLoad?Fp(e).$hostElement$:e,C1e=(e,t,i)=>{const r=$Q(e);return{emit:n=>($e.isDev&&!r.isConnected&&n6(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),DQ(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n}))}},DQ=(e,t,i)=>{const r=pi.ce(t,i);return e.dispatchEvent(r),r},LQ=(e,t)=>{},Tx=(e,t)=>(e.$flags$|=16,LQ(e,e.$ancestorComponent$),tee(()=>OQ(e,t))),OQ=(e,t)=>{const i=e.$hostElement$,r=bc("scheduleUpdate",e.$cmpMeta$.$tagName$),n=i;let o;return t?o=Yd(n,"componentWillLoad"):o=Yd(n,"componentWillUpdate"),o=TM(o,()=>Yd(n,"componentWillRender")),r(),TM(o,()=>kQ(e,n,t))},kQ=async(e,t,i)=>{const r=e.$hostElement$,n=bc("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&_Q(e);const o=bc("render",e.$cmpMeta$.$tagName$);FQ(e,t,r),o(),n(),BQ(e)},FQ=(e,t,i)=>{try{yM=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,($e.hasRenderFn||$e.reflect)&&($e.vdomRender||$e.reflect)&&($e.hydrateServerSide||PQ(e,t))}catch(a){Yy(a,e.$hostElement$)}return yM=null,null},BQ=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=bc("postUpdate",t),n=i;e.$ancestorComponent$,Yd(n,"componentDidRender"),e.$flags$&64?(Yd(n,"componentDidUpdate"),r()):(e.$flags$|=64,Yd(n,"componentDidLoad"),r())},I1e=e=>{if($e.updatable){const t=Fp(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&Tx(t,!1),i}return!1},Yd=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){Yy(r)}},TM=(e,t)=>e&&e.then?e.then(t):t(),UQ=(e,t)=>e!=null&&!_x(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,VQ=(e,t)=>Fp(e).$instanceValues$.get(t),jQ=(e,t,i,r)=>{const n=Fp(e),o=e,s=n.$instanceValues$.get(t),a=n.$flags$,u=o;i=UQ(i,r.$members$[t][0]);const d=Number.isNaN(s)&&Number.isNaN(i);if(i!==s&&!d){n.$instanceValues$.set(t,i);{if(r.$watchers$&&a&128){const f=r.$watchers$[t];f&&f.map(y=>{try{u[y](i,s,t)}catch(m){Yy(m,o)}})}if((a&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(i,s,t)===!1)return;Tx(n,!1)}}}},zQ=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),n=e.prototype;r.map(([o,[s]])=>{(s&31||s&32)&&Object.defineProperty(n,o,{get(){return VQ(this,o)},set(a){jQ(this,o,a,t)},configurable:!0,enumerable:!0})});{const o=new Map;n.attributeChangedCallback=function(s,a,u){pi.jmp(()=>{const d=o.get(s);if(this.hasOwnProperty(d))u=this[d],delete this[d];else if(n.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==u)return;this[d]=u===null&&typeof this[d]=="boolean"?!1:u})},e.observedAttributes=r.filter(([s,a])=>a[0]&15).map(([s,a])=>{const u=a[1]||s;return o.set(u,s),a[0]&512&&t.$attrsToReflect$.push([s,u]),u})}}return e},HQ=async(e,t,i,r,n)=>{if((t.$flags$&32)===0&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),n.style)){let s=n.style;typeof s!="string"&&(s=s[t.$modeName$=SQ(e)]);const a=WO(i,t.$modeName$);if(!P1.has(a)){const u=bc("registerStyles",i.$tagName$);wQ(a,s,!!(i.$flags$&1)),u()}}t.$ancestorComponent$,(()=>Tx(t,!0))()},GQ=e=>{},WQ=e=>{if((pi.$flags$&1)===0){const t=Fp(e),i=t.$cmpMeta$,r=bc("connectedCallback",i.$tagName$);t.$flags$&1?(GO(e,t,i.$listeners$),GQ(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&qQ(e),i.$members$&&Object.entries(i.$members$).map(([n,[o]])=>{if(o&31&&e.hasOwnProperty(n)){const s=e[n];delete e[n],e[n]=s}}),HQ(e,t,i)),r()}},qQ=e=>{const t=e["s-cr"]=io.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},YQ=e=>{if((pi.$flags$&1)===0){const t=Fp(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},M1e=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};$e.member&&(i.$members$=t[2]),$e.hostListener&&(i.$listeners$=t[3]),$e.watchCallback&&(i.$watchers$=e.$watchers$),$e.reflect&&(i.$attrsToReflect$=[]),$e.shadowDom&&!M1&&i.$flags$&1&&(i.$flags$|=8);const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){ZQ(this,i)},connectedCallback(){WQ(this),$e.connectedCallback&&r&&r.call(this)},disconnectedCallback(){YQ(this),$e.disconnectedCallback&&n&&n.call(this)},__attachShadow(){M1?$e.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,zQ(e,i)},N1e=e=>{const t=new URL(e,pi.$resourcesUrl$);return t.origin!==kp.location.origin?t.href:t.pathname},KQ=e=>pi.$resourcesUrl$=e,i6=new WeakMap,Fp=e=>i6.get(e),ZQ=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return $e.isDev&&(i.$renderCount$=0),$e.method&&$e.lazyLoad&&(i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r)),$e.asyncLoading&&(i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[]),GO(e,i,t.$listeners$),i6.set(e,i)},EM=(e,t)=>t in e,Yy=(e,t)=>(0,console.error)(e,t),r6=$e.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],JQ=(...e)=>console.error(...r6,...e),n6=(...e)=>console.warn(...r6,...e),P1=new Map,XQ=[],AM=[],o6=[],QQ=(e,t)=>i=>{e.push(i),MS||(MS=!0,t&&pi.$flags$&4?eee(NS):pi.raf(NS))},xM=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){Yy(i)}e.length=0},NS=()=>{xM(AM),xM(o6),(MS=AM.length>0)&&pi.raf(NS)},eee=e=>fQ().then(e),tee=QQ(o6,!0),R1e={isDev:!!$e.isDev,isBrowser:!0,isServer:!1,isTesting:!!$e.isTesting};let s6;function iee(){KQ(Xn(Ue(s6)))}s6="components/assets";const a6=Symbol("widget"),ree=[],nee={},$1=new WeakMap;function l6(e,t){let i=t.children;if(i&&i.length)for(let n=0;n<i.length;++n)i[n]=l6(e,i[n]);else i=ree;const r=t.vnodeSelector;if(Ex(r)){const n=t.properties||nee,o=n.key||r;return{vnodeSelector:"div",properties:{key:o,afterCreate:oee,afterUpdate:see,afterRemoved:u6,parentWidget:e,widgetConstructor:r,widgetProperties:{...n,key:o,children:i}},children:void 0,text:void 0,domNode:null}}return t}function oee(e,t,i,{parentWidget:r,widgetConstructor:n,widgetProperties:o}){var a;const s=new n(o);s.container=e,$1.set(e,s),(a=s.afterCreate)==null||a.call(s,s,e),r._internalHandles.add(Ep(()=>u6(e)))}function see(e,t,i,{widgetProperties:r}){var o;const n=$1.get(e);n&&(n.set(r),(o=n.afterUpdate)==null||o.call(n,n,e))}function u6(e){const t=$1.get(e);t&&(t.destroy(),$1.delete(e))}function Ex(e){return typeof e=="function"&&e[a6]}const CM=new Set;function aee(e){CM.add(e),e.finally(()=>CM.delete(e))}const c6="esri.widgets.Widget",lee=W.getLogger(c6);let uee=0;const cee={widgetIcon:"esri-icon-checkbox-unchecked"};function d6(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?d6(e[i],t[i]):e[i]=t[i]);return e}const dee=pQ({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,n,o,s)=>{const a=t(r,n,o,s),u=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in o)||u){const d=r[2].toLowerCase()+r.slice(3),h=m=>a.call(o,m);o.addEventListener(d,h,u);const f=()=>o.removeEventListener(d,h,u),y=s.afterRemoved;s.afterRemoved=m=>{y==null||y(m),f()}}return a}},handleInterceptedEvent(e,t,i,r){const{eventPhase:n,type:o}=r,s=n===Event.CAPTURING_PHASE;let a=`on${o}${s?"capture":""}`;const u=t.properties;(a in u||(a=`on${o[0].toUpperCase()}${o.slice(1)}${s?"Capture":""}`,a in u))&&(PO(),e.scheduleRender(),u[a].call(u.bind||i,r))}});let ub=!1,Dt=class extends xv(Js.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new mi,this._projector=dee,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=cee.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=nA(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await ii(this._messageBundleProps.map(async({bundlePath:s,propertyName:a})=>{let u=await xA(s);this.uiStrings&&Object.keys(this.uiStrings)&&(u=d6(R(u),this.uiStrings)),this[a]=u}));for(const s of o)s.error&&lee.error("widget-intl:locale-error",this.declaredClass,s.error)}await this.loadLocale()}),iee();const i="esri-widget-uid-"+sQ(),r=this.render.bind(this);this._trackingTarget=new Tv(()=>this.scheduleRender());const n=()=>{var h;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const o=r();let{properties:s}=o;s||(o.properties=s={});let{key:a,styles:u}=s;a||(s.key=i),u||(s.styles=u={}),u.display||(u.display="");let d=0;return(h=o.children)==null||h.forEach(f=>{if(Ex(f.vnodeSelector))return;let{properties:y}=f;y||(f.properties=y={}),y.key||(y.key=`${this.id}--${d++}`)}),l6(this,o)};this.render=()=>{if(ub)return n();let o=FX(this);if(o)return o;this._trackingTarget.clear(),ub=!0;try{o=Gs(this._trackingTarget,n)}catch(s){throw console.error(s),s}finally{ub=!1}return BX(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),aee(this._resourcesFetch)}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(x_)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(nn(this._trackingTarget),nn(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,ab(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return yx(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+uee++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(ab(this),this._projector.scheduleRender())}classes(...e){return DO.apply(this,e)}renderNow(){ab(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this._internalHandles.add(q(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&wv(i)&&this._internalHandles.add(this._delegatedEventNames.map(n=>bv(i,n,o=>{this.emit(n,o)})),"delegated-events")},ze)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(x_),this.scheduleRender()};this._internalHandles.add([z5(e),q(()=>this.uiStrings,e),yn(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};Dt[a6]=!0,l([c()],Dt.prototype,"_readyForTrueRender",void 0),l([c({value:null})],Dt.prototype,"container",null),l([Fe("container")],Dt.prototype,"castContainer",null),l([c({aliasOf:"container"})],Dt.prototype,"domNode",void 0),l([c()],Dt.prototype,"iconClass",void 0),l([c()],Dt.prototype,"id",null),l([c()],Dt.prototype,"label",void 0),l([c()],Dt.prototype,"renderable",null),l([c()],Dt.prototype,"uiStrings",void 0),l([c()],Dt.prototype,"viewModel",void 0),l([c()],Dt.prototype,"visible",void 0),l([c()],Dt.prototype,"key",void 0),l([c()],Dt.prototype,"children",void 0),l([c()],Dt.prototype,"afterCreate",void 0),l([c()],Dt.prototype,"afterUpdate",void 0),l([c()],Dt.prototype,"afterRemoved",void 0),Dt=l([S(c6)],Dt);const gi=Dt;function pee(e){return 32+e.length}function hee(){return 16}function P1e(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=pee(r);break;case"number":t+=hee();break;case"boolean":t+=4}}return t}function $1e(e,t){return 32+e.length*t}var gy;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(gy||(gy={}));const IM=["B","kB","MB","GB","TB"];function fee(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(gy.KILOBYTES));i=hr(i,0,IM.length-1);const r=Al(t/gy.KILOBYTES**i,{maximumFractionDigits:2});return jo(e.units.bytes[IM[i]],{fileSize:r})}function yee(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const n=t.find(o=>o.name===i);return n?mee({tagName:r,tags:n.tags}):null}function mee(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(n=>n.name===t);return r&&r.value||null}var RS;const gee={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let er=RS=class extends U{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=yee({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return gee[t]||null}clone(){return new RS({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};l([c({type:String})],er.prototype,"contentType",void 0),l([c()],er.prototype,"exifInfo",void 0),l([c({readOnly:!0})],er.prototype,"orientationInfo",null),l([c({type:Qe})],er.prototype,"id",void 0),l([c({type:String})],er.prototype,"globalId",void 0),l([c({type:String})],er.prototype,"keywords",void 0),l([c({type:String})],er.prototype,"name",void 0),l([c({json:{read:!1}})],er.prototype,"parentGlobalId",void 0),l([c({json:{read:!1}})],er.prototype,"parentObjectId",void 0),l([c({type:Qe})],er.prototype,"size",void 0),l([c({json:{read:!1}})],er.prototype,"url",void 0),er=RS=l([S("esri.layers.support.AttachmentInfo")],er);const vee=er;var PS;let Xt=PS=class extends U{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new PS(R({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};l([c({type:[String],json:{write:!0}})],Xt.prototype,"attachmentTypes",void 0),l([c({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Xt.prototype,"attachmentsWhere",void 0),l([c({type:Boolean,json:{write:!0}})],Xt.prototype,"cacheHint",void 0),l([c({type:[String],json:{write:!0}})],Xt.prototype,"keywords",void 0),l([c({type:[Number],json:{write:!0}})],Xt.prototype,"globalIds",void 0),l([c({json:{write:!0}})],Xt.prototype,"name",void 0),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],Xt.prototype,"num",void 0),l([c({type:[Number],json:{write:!0}})],Xt.prototype,"objectIds",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],Xt.prototype,"returnMetadata",void 0),l([c({type:[Number],json:{write:!0}})],Xt.prototype,"size",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],Xt.prototype,"start",void 0),l([X("start"),X("num")],Xt.prototype,"writeStart",null),l([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Xt.prototype,"where",void 0),Xt=PS=l([S("esri.rest.support.AttachmentQuery")],Xt),Xt.from=Ze(Xt);const $S=Xt,wee="esri.widgets.Feature.support.featureUtils",MM=W.getLogger(wee),bee=/href=(""|'')/gi,_ee=/(\{([^\{\r\n]+)\})/g,See=/\'/g,p6=/^\s*expression\//i,Tee=/(\n)/gi,Eee=/[\u00A0-\u9999<>\&]/gim,Aee=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,xee=/^(?:mailto:|tel:)/,h6="relationships/",DS=GA("short-date-short-time");function f6(e){if(!O(e))return e.get("sourceLayer")||e.get("layer")}async function D1(e,t){return typeof e=="function"?e.call(null,t):e}function y6(e=""){if(e)return!xee.test(e.trim().toLowerCase())}function m6(e){return!!e&&p6.test(e)}function Cee(e,t){if(!m6(t)||!e)return null;const i=t.replace(p6,"").toLowerCase();let r;return e.some(n=>n.name.toLowerCase()===i&&(r=n,!0)),r}function g6(e,t){const i=Cee(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function Iee(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function Mee(e){return e.replace(bee,"")}function L1(e,t){const i=Ax(t,e);return i?i.name:e}function Nee(e,t){return e&&e.map(i=>L1(i,t))}function Ax(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function v6(e){return`${e}`.trim()}function Yu({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:n,fieldInfoMap:o}){return r?LS({formattedAttributes:t,template:Dee(r,{...t,...n,...e},i),fieldInfoMap:o}):""}function LS({formattedAttributes:e,template:t,fieldInfoMap:i}){return v6(Mee(jo(jo(t,r=>Iee(r,i)),e)))}function Ree(e,t,i=!1){const r=t[e];if(typeof r=="string"){const n="%27",o=(i?encodeURIComponent(r):r).replace(See,n);t[e]=o}}function Pee(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>Ree(r,i,t)),i}function $ee(e,t,i){const r=(t=v6(t))&&t[0]!=="{";return jo(e,Pee(i,r))}function OS(e,t){return e.replace(_ee,(i,r,n)=>{const o=Ax(t,n);return o?`{${o.name}}`:r})}function Dee(e,t,i){const r=OS(e,i);return r&&r.replace(Aee,(n,o,s)=>$ee(n,o||s,t))}function Lee(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function Oee(e){return(e==null?void 0:e.type)==="feature"}function NM(e){return!!(e!=null&&e.layer)}function kee(e){return(e==null?void 0:e.type)==="map-image"}function Fee(e,t){var d;const i=t.fieldInfos,r=t.fieldName,n=(d=w6(i,r))==null?void 0:d.clone(),o=t.preventPlacesFormatting,s=t.layer,a=Ax(s,r);if(n&&(a==null?void 0:a.type)==="date"){const h=n.format||new Md;h.dateFormat=h.dateFormat||"short-date-short-time",h.dateTimeFormatOptions=!NM(s)&&Oee(s)&&s.datesInUnknownTimezone||NM(s)&&kee(s.layer)&&s.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=h}const u=n&&n.format;return typeof e=="string"&&GL(r)&&u?u.formatRasterPixelValue(e):typeof(e=Lee(e,u))=="string"||e==null||u==null?Ky(e):o?Al(e,{...KL(u),minimumFractionDigits:0,maximumFractionDigits:20}):u.format(e)}function w6(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==i)&&(r=n,!0)),r}function Bee({fieldName:e,graphic:t,layer:i}){if(Os(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const n=i.getFeatureType(t);return n?n.name:null}function Uee({fieldName:e,value:t,graphic:i,layer:r}){if(Os(e)||!r||typeof r.getFieldDomain!="function")return null;const n=r.getFieldDomain(e,{feature:i});return n&&n.type==="coded-value"?n.getName(t):null}function Vee(e,t){const{creatorField:i,creationDateField:r,editorField:n,editDateField:o}=e;if(!t)return;const s=t[o];if(typeof s=="number"){const u=t[n];return{type:"edit",date:Wo(s,DS),user:u}}const a=t[r];if(typeof a=="number"){const u=t[i];return{type:"create",date:Wo(a,DS),user:u}}return null}function jee(e,t){const i=new Map;return e&&e.forEach(r=>{const n=L1(r.fieldName,t);r.fieldName=n,i.set(n.toLowerCase(),r)}),i}function RM(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const o=n&&n.fieldInfos;o&&t.push(...o)}}),t}function xx(e){return e.replace(Eee,t=>`&#${t.charCodeAt(0)};`)}function Ky(e){return typeof e=="string"?e.replace(Tee,'<br class="esri-text-new-line" />'):e}function b6(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:o,graphic:s}=e;if(t==null)return"";const a=Uee({fieldName:i,value:t,graphic:s,layer:o});if(a)return a;const u=Bee({fieldName:i,graphic:s,layer:o});if(u)return u;if(n.get(i.toLowerCase()))return Fee(t,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:o});const d=o&&o.fieldsIndex;return d&&d.isDateField(i)?Wo(t,DS):Ky(t)}function cb({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:o}){const s={};return o==null||o.forEach(a=>qee({attributes:s,relatedInfo:a,fieldInfoMap:n,fieldInfos:e,layer:i})),Object.keys(t).forEach(a=>{const u=t[a];s[a]=b6({fieldName:a,fieldInfos:e,fieldInfoMap:n,layer:i,value:u,graphic:r})}),s}async function zee(e,t){var h,f;const{layer:i,graphic:r,outFields:n,objectIds:o,returnGeometry:s,spatialReference:a}=e,u=o[0];if(typeof u!="number"&&typeof u!="string"){const y="Could not query required fields for the specified feature. The feature's ID is invalid.",m={layer:i,graphic:r,objectId:u,requiredFields:n};return MM.warn(y,m),null}if(!((f=(h=i.capabilities)==null?void 0:h.operations)!=null&&f.supportsQuery)){const y="The specified layer cannot be queried. The following fields will not be available.",m={layer:i,graphic:r,requiredFields:n,returnGeometry:s};return MM.warn(y,m),null}const d=i.createQuery();return d.objectIds=o,d.outFields=n!=null&&n.length?n:[i.objectIdField],d.returnGeometry=!!s,d.returnZ=!!s,d.returnM=!!s,d.outSpatialReference=a,(await i.queryFeatures(d,t)).features[0]}async function Hee(e){var r;if(!((r=e.expressionInfos)!=null&&r.length))return!1;const t=await qs(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function Gee({graphic:e,popupTemplate:t,layer:i,spatialReference:r},n){if(!i||!t||(typeof i.load=="function"&&await i.load(n),!e.attributes))return;const o=e.attributes[i.objectIdField];if(o==null)return;const s=[o],a=await t.getRequiredFields(i.fieldsIndex),u=oY(a,e),d=u?[]:a,h=t.returnGeometry||await Hee(t);if(u&&!h)return;const f=await zee({layer:i,graphic:e,outFields:d,objectIds:s,returnGeometry:h,spatialReference:r},n);f&&(f.geometry&&(e.geometry=f.geometry),f.attributes&&(e.attributes={...e.attributes,...f.attributes}))}function Os(e=""){return!!e&&e.includes(h6)}function Wee(e){return e?`${h6}${e.layerId}/${e.fieldName}`:""}function PM({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:o}){e&&t&&i&&Object.keys(t.attributes).forEach(s=>{const a=Wee({layerId:i.relation.id.toString(),fieldName:s}),u=t.attributes[s];e[a]=b6({fieldName:a,fieldInfos:r,fieldInfoMap:n,layer:o,value:u,graphic:t})})}function qee({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(o=>PM({attributes:e,graphic:o,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(o=>PM({attributes:e,graphic:o,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n})))}const $M=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},_6=({layer:e,method:t,query:i,definitionExpression:r})=>{var s,a;if(!((a=(s=e.capabilities)==null?void 0:s.query)!=null&&a.supportsCacheHint)||t==="attachments")return;const n=T(i.where)&&i.where,o=T(i.geometry)&&i.geometry;$M(r)||$M(n)||(o==null?void 0:o.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},Yee=({query:e,layer:t,method:i})=>{_6({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},Kee=({queryPayload:e,layer:t,method:i})=>{_6({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},DM={editing:!1,operations:{add:!0,update:!0,delete:!0}},S6=he.ofType(vee),Zee="graphic.layer.capabilities.operations.supportsResizeAttachments";let $n=class extends se{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...DM},this.activeAttachmentInfo=null,this.attachmentInfos=new S6,this.graphic=null,this.mode="view",this.own(q(()=>this.graphic,()=>this._graphicChanged(),ze))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...DM,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(Zee)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new I("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getFeatureId(),r=new $S({objectIds:[i],returnMetadata:!0}),n=[],o=e.queryAttachments(r).then(a=>a[i]||n).catch(()=>n);this._getAttachmentsPromise=o,this.notifyChange("state");const s=await o;return t.removeAll(),s.length&&t.addMany(s),this._getAttachmentsPromise=null,this.notifyChange("state"),s}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:n}=this;if(!e)throw new I("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!n.operations.add)throw new I("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new I("invalid-layer","addAttachment(): A valid layer is required.");const o=t.addAttachment(r,e).then(a=>this._queryAttachment(a.objectId)),s=await o;return i.add(s),s}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:n}=this;if(!e)throw new I("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!n.operations.delete)throw new I("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new I("invalid-layer","deleteAttachment(): A valid layer is required.");const o=t.deleteAttachments(r,[e.id]).then(()=>e),s=await o;return i.remove(s),s}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:r,graphic:n,abilities:o}=this;if(!e)throw new I("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new I("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!o.operations.update)throw new I("invalid-abilities","updateAttachment(): Update abilities are required.");const s=r.findIndex(d=>d===t);if(!i||typeof i.updateAttachment!="function")throw new I("invalid-layer","updateAttachment(): A valid layer is required.");const a=i.updateAttachment(n,t.id,e).then(d=>this._queryAttachment(d.objectId)),u=await a;return r.splice(s,1,u),u}async _queryAttachment(e){if(!e)throw new I("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,i=this._getFeatureId(),r=new $S({objectIds:[i],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(r).then(n=>n[i][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:i}=e,{attributes:r}=t;return r&&r[i]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=f6(e);this._attachmentLayer=t?t.type==="scene"&&T(t.associatedLayer)?t.associatedLayer:t:null}};l([c()],$n.prototype,"abilities",void 0),l([Fe("abilities")],$n.prototype,"castAbilities",null),l([c()],$n.prototype,"activeAttachmentInfo",void 0),l([c({readOnly:!0,type:S6})],$n.prototype,"attachmentInfos",void 0),l([c({type:Ni})],$n.prototype,"graphic",void 0),l([c()],$n.prototype,"mode",void 0),l([c({readOnly:!0})],$n.prototype,"state",null),l([c({readOnly:!0})],$n.prototype,"supportsResizeAttachments",null),$n=l([S("esri.widgets.Attachments.AttachmentsViewModel")],$n);const Cx=$n;function Jee(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function Xee(e){const t=Ue("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function di(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var Qee=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},T6=function(e,t){for(var i=0,r=e.length;i<r;i++){var n=e[i];Array.isArray(n)?T6(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=Qee(n)),t.push(n))}},ete=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var n=[];return T6(i,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function C(e,t,...i){return typeof e!="function"||Ex(e)?ete(e,t,...i):e(t,...i)}const LM={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},te={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},db=window.CSS;let bi=class extends gi{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new Cx,this.visibleElements={...LM},this._supportsImageOrientation=db&&db.supports&&db.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([El(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),q(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),ze)])}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return{...LM,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new I("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new I("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new I("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return C("div",{class:this.classes(te.base,te.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?C("div",{key:"error-message",class:te.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return C("div",{class:te.loaderContainer,key:"loader"},C("div",{class:te.loader}))}renderProgressBar(){return this.visibleElements.progressBar?C("div",{class:te.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?C("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(te.esriButton,te.esriButtonTertiary,te.esriButtonSmall,te.esriButtonHalf,e&&te.buttonDisabled)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?C("button",{type:"submit",disabled:i,class:this.classes(te.esriButton,te.esriButtonSecondary,te.esriButtonSmall,te.esriButtonHalf,{[te.buttonDisabled]:i})},this.messages.add):null,o=t?C("span",{key:"file-name",class:te.fileName},t.name):null,s=C("form",{bind:this,afterCreate:qu,afterRemoved:lM,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},C("fieldset",{class:te.fileFieldset},o,C("label",{class:this.classes(te.fileLabel,te.esriButton,te.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,C("input",{class:te.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,r);return C("div",{key:"add-form-container",class:te.formNode},s)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:r,submitting:n}=this,{contentType:o,size:s,url:a}=e,{abilities:u}=i,d=n||!r,h=u.editing&&u.operations.delete&&t.deleteButton?C("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:A=>this._submitDeleteAttachment(A,e),class:this.classes(te.esriButton,te.esriButtonSmall,te.esriButtonTertiary,te.deleteButton,{[te.buttonDisabled]:n})},this.messages.delete):null,f=u.editing&&u.operations.update&&t.updateButton?C("button",{disabled:d,key:"update-button",type:"submit",class:this.classes(te.esriButton,te.esriButtonSmall,te.esriButtonThird,{[te.buttonDisabled]:d})},this.messages.update):null,y=this.visibleElements.cancelUpdateButton?C("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(te.esriButton,te.esriButtonSmall,te.esriButtonTertiary,te.esriButtonThird,{[te.buttonDisabled]:n})},this.messages.cancel):null,m=r?C("span",{key:"file-name",class:te.fileName},r.name):null,g=u.editing&&u.operations.update?C("fieldset",{key:"file",class:te.fileFieldset},m,C("label",{class:this.classes(te.fileLabel,te.esriButton,te.esriButtonSecondary)},this.messages.changeFile,C("input",{class:te.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,v=C("fieldset",{key:"size",class:te.metadataFieldset},C("label",null,fee(this.messagesUnits,s))),w=C("fieldset",{key:"content-type",class:te.metadataFieldset},C("label",null,o)),_=C("form",{bind:this,afterCreate:qu,afterRemoved:lM,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},C("div",{class:te.metadata},v,w),g,C("div",{class:te.actions},h,y,f));return C("div",{key:"edit-form-container",class:te.formNode},C("a",{class:te.itemLink,href:a,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),C("div",{class:te.itemLinkOverlay},C("span",{class:te.itemLinkOverlayIcon},C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},C("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),C("path",{fill:"none",d:"M0 0h32v32H0z"}))))),_)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:i}=this.viewModel,{contentType:r,name:n,url:o}=e,s=i&&Jee(r),a=this._getCSSTransform(e,s),u=a?{transform:a,"image-orientation":"none"}:{},d=o.includes("?")?"&":"?",h=s?`${o}${d}w=${t}`:Xee(r),f={[te.itemMaskIcon]:!s},y={[te.itemImageResizable]:i};return C("div",{class:this.classes(f,te.itemMask)},C("img",{styles:u,alt:n,src:h,class:this.classes(y,te.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i}=this,{abilities:r}=i,{name:n,url:o}=e,s=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),a=r.editing?C("span",{"aria-hidden":"true",class:this.classes(te.itemChevronIcon,dl(this.container)?te.iconLeft:te.iconRight)}):null,u=[s,C("label",{class:te.itemLabel},C("span",{class:te.itemFilename},n||this.messages.noTitle),a)],d=r.editing?C("button",{key:"details-button",bind:this,class:te.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},u):C("a",{key:"details-link",class:te.itemButton,href:o,target:"_blank"},u);return C("li",{class:te.item,key:e},d)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:n}=t,o=r&&r.length,s={[te.containerList]:e!=="preview",[te.containerPreview]:e==="preview"},a=n.editing&&n.operations.add&&i.addButton?C("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(te.esriButton,te.esriButtonTertiary,te.addAttachmentButton),type:"button"},C("span",{"aria-hidden":"true",class:this.classes(te.itemAddIcon,te.iconPlus)}),this.messages.add):null,u=o?C("ul",{class:te.items},r.toArray().map(d=>this.renderAttachmentInfo({attachmentInfo:d,displayType:e}))):C("div",{class:te.empty},this.messages.noAttachments);return C("div",{key:"attachments-container",class:this.classes(te.container,s)},u,a)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&t&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};l([J("viewModel.abilities")],bi.prototype,"abilities",void 0),l([c()],bi.prototype,"displayType",void 0),l([c({readOnly:!0})],bi.prototype,"effectiveDisplayType",null),l([J("viewModel.graphic")],bi.prototype,"graphic",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],bi.prototype,"label",void 0),l([c(),di("esri/widgets/Attachments/t9n/Attachments")],bi.prototype,"messages",void 0),l([c(),di("esri/core/t9n/Units")],bi.prototype,"messagesUnits",void 0),l([c({readOnly:!0})],bi.prototype,"selectedFile",void 0),l([c({readOnly:!0})],bi.prototype,"submitting",void 0),l([c({readOnly:!0})],bi.prototype,"error",void 0),l([c({type:Cx})],bi.prototype,"viewModel",void 0),l([c()],bi.prototype,"visibleElements",void 0),l([Fe("visibleElements")],bi.prototype,"castVisibleElements",null),bi=l([S("esri.widgets.Attachments")],bi);const tte=bi;let Xh=class extends Cx{constructor(e){super(e),this.description=null,this.title=null}};l([c()],Xh.prototype,"description",void 0),l([c()],Xh.prototype,"title",void 0),Xh=l([S("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Xh);const Ix=Xh,ite={heading:"esri-widget__heading"};function Mx(e,t){const i=rte(e.level),r=`h${i}`;return delete e.level,C(r,{...e,class:DO(ite.heading,e.class),role:"heading","aria-level":String(i)},t)}function rte(e){return hr(Math.ceil(e),1,6)}const pb={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let td=class extends gi{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return C("div",{class:pb.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?C(Mx,{level:this.headingLevel,class:pb.title},e):null}renderDescription(){const{description:e}=this;return e?C("div",{key:"description",class:pb.description},e):null}};l([c()],td.prototype,"description",void 0),l([c()],td.prototype,"headingLevel",void 0),l([c()],td.prototype,"title",void 0),td=l([S("esri.widgets.Feature.support.FeatureElementInfo")],td);const Nx=td,nte={base:"esri-feature-attachments"};let So=class extends gi{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new tte,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new Ix}initialize(){this._featureElementInfo=new Nx,this.own([q(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),ze),q(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,ze)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var t;const{attachmentsWidget:e}=this;return C("div",{class:nte.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};l([c({readOnly:!0})],So.prototype,"attachmentsWidget",void 0),l([J("viewModel.description")],So.prototype,"description",void 0),l([J("attachmentsWidget.displayType")],So.prototype,"displayType",void 0),l([J("viewModel.graphic")],So.prototype,"graphic",void 0),l([c()],So.prototype,"headingLevel",void 0),l([J("viewModel.title")],So.prototype,"title",void 0),l([c({type:Ix})],So.prototype,"viewModel",void 0),So=l([S("esri.widgets.Feature.FeatureAttachments")],So);const ote=So;let Pa=class extends Ml(se){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(q(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},ze))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(D1(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=D1(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};l([c({readOnly:!0})],Pa.prototype,"created",void 0),l([c()],Pa.prototype,"creator",void 0),l([c()],Pa.prototype,"destroyer",void 0),l([c({type:Ni})],Pa.prototype,"graphic",void 0),l([c({readOnly:!0})],Pa.prototype,"state",null),Pa=l([S("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Pa);const O1=Pa;function sr(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:ate(e[t])}}}function ste(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function ate(e){return function(t,...i){ste(t)?OO(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function lte(e){return e.split(",").map(t=>t.trim())}function E6(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:lte(e);i.push(...r)}}const A6="calcite-theme-";function ute(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function x6(){return ute().startsWith("dark")}function cte(){return`${A6}${x6()?"dark":"light"}`}function dte(e){pte(e),e.classList.add(cte())}function pte(e){Array.from(e.classList).forEach(t=>{t.startsWith(A6)&&e.classList.remove(t)})}function C6(e){return e&&typeof e.render=="function"}function hte(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const hb={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let id=class extends gi{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(r=>{y6(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}renderLoading(){return C("div",{class:hb.loaderContainer,key:"loader"},C("div",{class:hb.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?C("div",{key:e,bind:e,afterCreate:this._attachToNode}):C6(e)?C("div",{key:e},!e.destroyed&&e.render()):C("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return C("div",{class:hb.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};l([J("viewModel.creator")],id.prototype,"creator",void 0),l([J("viewModel.graphic")],id.prototype,"graphic",void 0),l([c({type:O1})],id.prototype,"viewModel",void 0),id=l([S("esri.widgets.Feature.FeatureContent")],id);const og=id;let gs=class extends se{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const n=r.clone();n.label=g6(n,e),i.push(n)}),i}};l([c()],gs.prototype,"attributes",void 0),l([c({type:[r9]})],gs.prototype,"expressionInfos",void 0),l([c()],gs.prototype,"description",void 0),l([c({type:[Vy]})],gs.prototype,"fieldInfos",void 0),l([c({readOnly:!0})],gs.prototype,"formattedFieldInfos",null),l([c()],gs.prototype,"title",void 0),gs=l([S("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],gs);const Kv=gs,fte=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function yte(e){let t=null;return fte.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function mte(e,t){if(typeof t!="string"||!t)return t;const i=yte(t);if(!i)return t;const r=t.match(i.pattern),n=r&&r[2],o=jo(jo(i.label,{messages:e,hierPart:n}),{appName:i.appName}),s=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${s} href="$1"${a}>${o}</a>`)}const lh={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let Dn=class extends gi{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new Kv,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Nx,this.own(q(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),ze))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,n=e.label||r,o=i?i[r]==null?"":i[r]:"",s=!(!e.format||!e.format.dateFormat),a=typeof o=="number"&&!s?this._forceLTR(o):mte(this.messagesURIUtils,o),u={[lh.fieldDataDate]:s};return C("tr",{key:`fields-element-info-row-${r}-${t}`},C("th",{key:`fields-element-info-row-header-${r}-${t}`,class:lh.fieldHeader,innerHTML:n}),C("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(lh.fieldData,u),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?C("table",{class:lh.esriTable,summary:this.messages.fieldsSummary},C("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return C("div",{class:lh.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};l([J("viewModel.attributes")],Dn.prototype,"attributes",void 0),l([J("viewModel.description")],Dn.prototype,"description",void 0),l([J("viewModel.expressionInfos")],Dn.prototype,"expressionInfos",void 0),l([J("viewModel.fieldInfos")],Dn.prototype,"fieldInfos",void 0),l([J("viewModel.title")],Dn.prototype,"title",void 0),l([c({type:Kv})],Dn.prototype,"viewModel",void 0),l([c(),di("esri/widgets/Feature/t9n/Feature")],Dn.prototype,"messages",void 0),l([c(),di("esri/widgets/support/t9n/uriUtils")],Dn.prototype,"messagesURIUtils",void 0),Dn=l([S("esri.widgets.Feature.FeatureFields")],Dn);const I6=Dn,gte={maximumFractionDigits:20};function vte(e){return Al(e,gte)}var kS;let ou=kS=class extends U{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e==null?0:e}clone(){return new kS({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};l([c({type:ie,json:{type:[Qe],write:!0}})],ou.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],ou.prototype,"label",void 0),l([c({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],ou.prototype,"value",void 0),l([X("value")],ou.prototype,"writeValue",null),ou=kS=l([S("esri.renderers.visualVariables.support.ColorStop")],ou);const wte=ou;function Zv(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function bte(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function _te(e,t,i,r,n,o,s,a,u,d,h,f,y,m,g,v){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=i,w[3]=r,w[4]=n,w[5]=o,w[6]=s,w[7]=a,w[8]=u,w[9]=d,w[10]=h,w[11]=f,w[12]=y,w[13]=m,w[14]=g,w[15]=v,w}function Ste(e,t){return new Float32Array(e,t,16)}const Tte=Zv();Object.freeze(Object.defineProperty({__proto__:null,create:Zv,clone:bte,fromValues:_te,createView:Ste,IDENTITY:Tte},Symbol.toStringTag,{value:"Module"}));const Ete=(e,t)=>{const i=Dl(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Qs(i,i)},Ate=(e,t)=>{const i=Dl(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Qs(i,i)},xte=(e,t)=>{const i=1-t,r=Dl(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Qs(r,r)},Cte=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),n=Dl(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Qs(n,n)},Ite=(e,t)=>{const i=1-2*t,r=Dl(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return Qs(r,r)},Mte=(e,t)=>{const i=Dl(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Qs(i,i)},Nte=(e,t)=>{const i=1-t,r=Dl(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Qs(r,r)};class Jv{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=ar(t.strength,i.strength,r),this.radius=ar(t.radius,i.radius,r),this.threshold=ar(t.threshold,i.threshold,r)}clone(){return new Jv(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Df(this.radius),strength:this.strength,threshold:this.threshold}}}class Xv{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(ar(t.radius,i.radius,r))}clone(){return new Xv(this.radius)}toJSON(){return{type:"blur",radius:Df(this.radius)}}}class vy{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=ar(t.amount,i.amount,r),this._updateMatrix()}clone(){return new vy(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Zv();switch(this.type){case"brightness":this._colorMatrix=Ete(t,this.amount);break;case"contrast":this._colorMatrix=Ate(t,this.amount);break;case"grayscale":this._colorMatrix=xte(t,this.amount);break;case"invert":this._colorMatrix=Ite(t,this.amount);break;case"saturate":this._colorMatrix=Mte(t,this.amount);break;case"sepia":this._colorMatrix=Nte(t,this.amount)}}}class Qv{constructor(t,i,r,n){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=ar(t.offsetX,i.offsetX,r),this.offsetY=ar(t.offsetY,i.offsetY,r),this.blurRadius=ar(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(ar(t.color[0],i.color[0],r)),this.color[1]=Math.round(ar(t.color[1],i.color[1],r)),this.color[2]=Math.round(ar(t.color[2],i.color[2],r)),this.color[3]=ar(t.color[3],i.color[3],r)}clone(){return new Qv(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Df(this.offsetX),yoffset:Df(this.offsetY),blurRadius:Df(this.blurRadius),color:t}}}class ew{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=ar(t.angle,i.angle,r),this._updateMatrix()}clone(){return new ew(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Zv();this._colorMatrix=Cte(t,this.angle)}}class tw{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=ar(t.amount,i.amount,r)}clone(){return new tw(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function ar(e,t,i){return e+(t-e)*i}function Df(e){return Math.round(1e3*qo(e))/1e3}function Rte(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new vy(e.type,0);case"saturate":case"brightness":case"contrast":return new vy(e.type,1);case"opacity":return new tw(1);case"hue-rotate":return new ew(0);case"blur":return new Xv(0);case"drop-shadow":return new Qv(0,0,0,[...IA("transparent")]);case"bloom":return new Jv(0,0,1)}}function Pte(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,n)=>r.type===i[n].type)}function $te(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let n=r.length;n<i.length;n++)r.push(Rte(i[n]))}function Dte(e){const t=e[0];return!!t&&"type"in t}var OM,kM,M6={exports:{}};function N6(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=FM(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new I("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:FM(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!Pte(t[i].effects,t[i+1].effects))throw new I("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});$te(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function FM(e){let t;if(!e)return[];try{t=M6.exports.parse(e)}catch(i){throw new I("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>Lte(i))}function Lte(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Ote(e);case"opacity":return kte(e);case"hue-rotate":return Fte(e);case"blur":return Bte(e);case"drop-shadow":return Ute(e);case"bloom":return Vte(e)}}catch(t){throw t.details.filter=e,t}throw new I("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Ote(e){let t=1;return Bp(e.parameters,1),e.parameters.length===1&&(t=qn(e.parameters[0])),new vy(e.name,t)}function kte(e){let t=1;return Bp(e.parameters,1),e.parameters.length===1&&(t=qn(e.parameters[0])),new tw(t)}function Fte(e){let t=0;return Bp(e.parameters,1),e.parameters.length===1&&(t=qte(e.parameters[0])),new ew(t)}function Bte(e){let t=0;return Bp(e.parameters,1),e.parameters.length===1&&(t=$x(e.parameters[0]),Zy(t,e.parameters[0])),new Xv(t)}function Ute(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new I("effect:type-error","Accepts only one color",{});i=Yte(r)}else{const n=$x(r);if(Object.isFrozen(t))throw new I("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&Zy(n,r)}if(t.length<2||t.length>3)throw new I("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Qv(t[0],t[1],t[2]||0,i||R6("black"))}function Vte(e){let t=1,i=0,r=0;return Bp(e.parameters,3),e.parameters[0]&&(t=qn(e.parameters[0])),e.parameters[1]&&(i=$x(e.parameters[1]),Zy(i,e.parameters[1])),e.parameters[2]&&(r=qn(e.parameters[2])),new Jv(t,i,r)}function Bp(e,t){if(e.length>t)throw new I("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function iw(e){if(e.type==="color")return"<color>";if(e.unit){if(Px[e.unit])return"<length>";if(Rx[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Zy(e,t){if(e<0)throw new I("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function jte(e){if(e.type!=="quantity"||e.unit!==null)throw new I("effect:type-error",`Expected <double>, Actual: ${iw(e)}`,{term:e})}function zte(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new I("effect:type-error",`Expected <double> or <percentage>, Actual: ${iw(e)}`,{term:e})}kM=function(){function e(n,o){function s(){this.constructor=n}s.prototype=o.prototype,n.prototype=new s}function t(n,o,s,a){var u=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(u,t.prototype),u.expected=o,u.found=s,u.location=a,u.name="SyntaxError",u}function i(n,o,s){return s=s||" ",n.length>o?n:(o-=n.length,n+(s+=s.repeat(o)).slice(0,o))}function r(n,o){var s,a={},u=(o=o!==void 0?o:{}).grammarSource,d={start:wC},h=wC,f="none",y=")",m=",",g="(",v="%",w="px",_="cm",A="mm",M="in",$="pt",N="pc",D="deg",V="rad",G="grad",Z="turn",ee="#",re=".",ue="e",ge=/^[ \t\n\r]/,ne=/^[a-z\-]/,St=/^[0-9a-fA-F]/,vr=/^[+\-]/,lt=/^[0-9]/,wr=ts("none"),wn=Kt("none",!1),oU=Kt(")",!1),pC=Kt(",",!1),sU=ts("whitespace"),hC=Jp([" ","	",`
`,"\r"],!1,!1),aU=ts("function"),lU=Kt("(",!1),uU=ts("identifier"),fC=Jp([["a","z"],"-"],!1,!1),cU=ts("percentage"),dU=Kt("%",!1),pU=ts("length"),hU=Kt("px",!1),fU=Kt("cm",!1),yU=Kt("mm",!1),mU=Kt("in",!1),gU=Kt("pt",!1),vU=Kt("pc",!1),wU=ts("angle"),bU=Kt("deg",!1),_U=Kt("rad",!1),SU=Kt("grad",!1),TU=Kt("turn",!1),EU=ts("number"),AU=ts("color"),xU=Kt("#",!1),yC=Jp([["0","9"],["a","f"],["A","F"]],!1,!1),mC=Jp(["+","-"],!1,!1),ta=Jp([["0","9"]],!1,!1),CU=Kt(".",!1),IU=Kt("e",!1),MU=function(){return[]},NU=function(E,F){return{type:"function",name:E,parameters:F||[]}},RU=function(E,F){return F.length>0?cV(E,F,3):[E]},PU=function(E){return{type:"quantity",value:E.value,unit:E.unit}},$U=function(E){return{type:"color",colorType:E.type,value:E.value}},DU=function(E){return E},LU=function(){return hm()},OU=function(E){return{value:E,unit:"%"}},kU=function(E){return{value:E,unit:"px"}},FU=function(E){return{value:E,unit:"cm"}},BU=function(E){return{value:E,unit:"mm"}},UU=function(E){return{value:E,unit:"in"}},VU=function(E){return{value:E,unit:"pt"}},jU=function(E){return{value:E,unit:"pc"}},zU=function(E){return{value:E,unit:"deg"}},HU=function(E){return{value:E,unit:"rad"}},GU=function(E){return{value:E,unit:"grad"}},WU=function(E){return{value:E,unit:"turn"}},qU=function(E){return{value:E,unit:null}},YU=function(){return{type:"hex",value:hm()}},KU=function(E){return{type:"function",value:E}},ZU=function(){return{type:"named",value:hm()}},JU=function(){return parseFloat(hm())},L=0,ut=0,pm=[{line:1,column:1}],lo=0,Mw=[],ae=0;if("startRule"in o){if(!(o.startRule in d))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');h=d[o.startRule]}function hm(){return n.substring(ut,L)}function Kt(E,F){return{type:"literal",text:E,ignoreCase:F}}function Jp(E,F,j){return{type:"class",parts:E,inverted:F,ignoreCase:j}}function XU(){return{type:"end"}}function ts(E){return{type:"other",description:E}}function gC(E){var F,j=pm[E];if(j)return j;for(F=E-1;!pm[F];)F--;for(j={line:(j=pm[F]).line,column:j.column};F<E;)n.charCodeAt(F)===10?(j.line++,j.column=1):j.column++,F++;return pm[E]=j,j}function vC(E,F){var j=gC(E),Ie=gC(F);return{source:u,start:{offset:E,line:j.line,column:j.column},end:{offset:F,line:Ie.line,column:Ie.column}}}function Te(E){L<lo||(L>lo&&(lo=L,Mw=[]),Mw.push(E))}function QU(E,F,j){return new t(t.buildMessage(E,F),E,F,j)}function wC(){var E;return(E=eV())===a&&(E=tV()),E}function eV(){var E,F;return ae++,E=L,Zt(),n.substr(L,4)===f?(F=f,L+=4):(F=a,ae===0&&Te(wn)),F!==a?(Zt(),ut=E,E=MU()):(L=E,E=a),ae--,E===a&&ae===0&&Te(wr),E}function tV(){var E,F;if(E=[],(F=Nw())!==a)for(;F!==a;)E.push(F),F=Nw();else E=a;return E}function Nw(){var E,F,j,Ie;return E=L,Zt(),(F=rV())!==a?(Zt(),(j=iV())===a&&(j=null),Zt(),n.charCodeAt(L)===41?(Ie=y,L++):(Ie=a,ae===0&&Te(oU)),Ie!==a?(Zt(),ut=E,E=NU(F,j)):(L=E,E=a)):(L=E,E=a),E}function iV(){var E,F,j,Ie,ni,pt,Vr,fm;if(E=L,(F=Rw())!==a){for(j=[],Ie=L,ni=Zt(),n.charCodeAt(L)===44?(pt=m,L++):(pt=a,ae===0&&Te(pC)),pt===a&&(pt=null),Vr=Zt(),(fm=Rw())!==a?Ie=ni=[ni,pt,Vr,fm]:(L=Ie,Ie=a);Ie!==a;)j.push(Ie),Ie=L,ni=Zt(),n.charCodeAt(L)===44?(pt=m,L++):(pt=a,ae===0&&Te(pC)),pt===a&&(pt=null),Vr=Zt(),(fm=Rw())!==a?Ie=ni=[ni,pt,Vr,fm]:(L=Ie,Ie=a);ut=E,E=RU(F,j)}else L=E,E=a;return E}function Rw(){var E,F;return E=L,(F=nV())===a&&(F=oV())===a&&(F=sV())===a&&(F=aV()),F!==a&&(ut=E,F=PU(F)),(E=F)===a&&(E=L,(F=lV())!==a&&(ut=E,F=$U(F)),E=F),E}function Zt(){var E,F;for(ae++,E=[],ge.test(n.charAt(L))?(F=n.charAt(L),L++):(F=a,ae===0&&Te(hC));F!==a;)E.push(F),ge.test(n.charAt(L))?(F=n.charAt(L),L++):(F=a,ae===0&&Te(hC));return ae--,F=a,ae===0&&Te(sU),E}function rV(){var E,F,j;return ae++,E=L,(F=bC())!==a?(n.charCodeAt(L)===40?(j=g,L++):(j=a,ae===0&&Te(lU)),j!==a?(ut=E,E=DU(F)):(L=E,E=a)):(L=E,E=a),ae--,E===a&&(F=a,ae===0&&Te(aU)),E}function bC(){var E,F,j;if(ae++,E=L,F=[],ne.test(n.charAt(L))?(j=n.charAt(L),L++):(j=a,ae===0&&Te(fC)),j!==a)for(;j!==a;)F.push(j),ne.test(n.charAt(L))?(j=n.charAt(L),L++):(j=a,ae===0&&Te(fC));else F=a;return F!==a&&(ut=E,F=LU()),ae--,(E=F)===a&&(F=a,ae===0&&Te(uU)),E}function nV(){var E,F,j;return ae++,E=L,Zt(),(F=Ur())!==a?(n.charCodeAt(L)===37?(j=v,L++):(j=a,ae===0&&Te(dU)),j!==a?(ut=E,E=OU(F)):(L=E,E=a)):(L=E,E=a),ae--,E===a&&ae===0&&Te(cU),E}function oV(){var E,F,j;return ae++,E=L,Zt(),(F=Ur())!==a?(n.substr(L,2)===w?(j=w,L+=2):(j=a,ae===0&&Te(hU)),j!==a?(ut=E,E=kU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Zt(),(F=Ur())!==a?(n.substr(L,2)===_?(j=_,L+=2):(j=a,ae===0&&Te(fU)),j!==a?(ut=E,E=FU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Zt(),(F=Ur())!==a?(n.substr(L,2)===A?(j=A,L+=2):(j=a,ae===0&&Te(yU)),j!==a?(ut=E,E=BU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Zt(),(F=Ur())!==a?(n.substr(L,2)===M?(j=M,L+=2):(j=a,ae===0&&Te(mU)),j!==a?(ut=E,E=UU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Zt(),(F=Ur())!==a?(n.substr(L,2)===$?(j=$,L+=2):(j=a,ae===0&&Te(gU)),j!==a?(ut=E,E=VU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Zt(),(F=Ur())!==a?(n.substr(L,2)===N?(j=N,L+=2):(j=a,ae===0&&Te(vU)),j!==a?(ut=E,E=jU(F)):(L=E,E=a)):(L=E,E=a)))))),ae--,E===a&&ae===0&&Te(pU),E}function sV(){var E,F,j;return ae++,E=L,(F=Ur())!==a?(n.substr(L,3)===D?(j=D,L+=3):(j=a,ae===0&&Te(bU)),j!==a?(ut=E,E=zU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,(F=Ur())!==a?(n.substr(L,3)===V?(j=V,L+=3):(j=a,ae===0&&Te(_U)),j!==a?(ut=E,E=HU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,(F=Ur())!==a?(n.substr(L,4)===G?(j=G,L+=4):(j=a,ae===0&&Te(SU)),j!==a?(ut=E,E=GU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,(F=Ur())!==a?(n.substr(L,4)===Z?(j=Z,L+=4):(j=a,ae===0&&Te(TU)),j!==a?(ut=E,E=WU(F)):(L=E,E=a)):(L=E,E=a)))),ae--,E===a&&(F=a,ae===0&&Te(wU)),E}function aV(){var E,F;return ae++,E=L,Zt(),(F=Ur())!==a?(ut=E,E=qU(F)):(L=E,E=a),ae--,E===a&&ae===0&&Te(EU),E}function lV(){var E,F,j,Ie;if(ae++,E=L,n.charCodeAt(L)===35?(F=ee,L++):(F=a,ae===0&&Te(xU)),F!==a){if(j=[],St.test(n.charAt(L))?(Ie=n.charAt(L),L++):(Ie=a,ae===0&&Te(yC)),Ie!==a)for(;Ie!==a;)j.push(Ie),St.test(n.charAt(L))?(Ie=n.charAt(L),L++):(Ie=a,ae===0&&Te(yC));else j=a;j!==a?(ut=E,E=YU()):(L=E,E=a)}else L=E,E=a;return E===a&&(E=L,(F=Nw())!==a&&(ut=E,F=KU(F)),(E=F)===a&&(E=L,(F=bC())!==a&&(ut=E,F=ZU()),E=F)),ae--,E===a&&(F=a,ae===0&&Te(AU)),E}function Ur(){var E,F,j,Ie,ni,pt,Vr;for(E=L,vr.test(n.charAt(L))?(n.charAt(L),L++):ae===0&&Te(mC),F=L,j=[],lt.test(n.charAt(L))?(Ie=n.charAt(L),L++):(Ie=a,ae===0&&Te(ta));Ie!==a;)j.push(Ie),lt.test(n.charAt(L))?(Ie=n.charAt(L),L++):(Ie=a,ae===0&&Te(ta));if(n.charCodeAt(L)===46?(Ie=re,L++):(Ie=a,ae===0&&Te(CU)),Ie!==a){if(ni=[],lt.test(n.charAt(L))?(pt=n.charAt(L),L++):(pt=a,ae===0&&Te(ta)),pt!==a)for(;pt!==a;)ni.push(pt),lt.test(n.charAt(L))?(pt=n.charAt(L),L++):(pt=a,ae===0&&Te(ta));else ni=a;ni!==a?F=j=[j,Ie,ni]:(L=F,F=a)}else L=F,F=a;if(F===a)if(F=[],lt.test(n.charAt(L))?(j=n.charAt(L),L++):(j=a,ae===0&&Te(ta)),j!==a)for(;j!==a;)F.push(j),lt.test(n.charAt(L))?(j=n.charAt(L),L++):(j=a,ae===0&&Te(ta));else F=a;if(F!==a){if(j=L,n.charCodeAt(L)===101?(Ie=ue,L++):(Ie=a,ae===0&&Te(IU)),Ie!==a){if(vr.test(n.charAt(L))?(ni=n.charAt(L),L++):(ni=a,ae===0&&Te(mC)),ni===a&&(ni=null),pt=[],lt.test(n.charAt(L))?(Vr=n.charAt(L),L++):(Vr=a,ae===0&&Te(ta)),Vr!==a)for(;Vr!==a;)pt.push(Vr),lt.test(n.charAt(L))?(Vr=n.charAt(L),L++):(Vr=a,ae===0&&Te(ta));else pt=a;pt!==a?j=Ie=[Ie,ni,pt]:(L=j,j=a)}else L=j,j=a;j===a&&(j=null),ut=E,E=JU()}else L=E,E=a;return E}function uV(E,F){return E.map(function(j){return j[F]})}function cV(E,F,j){return[E].concat(uV(F,j))}if((s=h())!==a&&L===n.length)return s;throw s!==a&&L<n.length&&Te(XU()),QU(Mw,lo<n.length?n.charAt(lo):null,lo<n.length?vC(lo,lo+1):vC(lo,lo))}return e(t,Error),t.prototype.format=function(n){var o="Error: "+this.message;if(this.location){var s,a=null;for(s=0;s<n.length;s++)if(n[s].source===this.location.source){a=n[s].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,d=this.location.source+":"+u.line+":"+u.column;if(a){var h=this.location.end,f=i("",u.line.toString().length),y=a[u.line-1],m=u.line===h.line?h.column:y.length+1;o+=`
 --> `+d+`
`+f+` |
`+u.line+" | "+y+`
`+f+" | "+i("",u.column-1)+i("",m-u.column,"^")}else o+=`
 at `+d}return o},t.buildMessage=function(n,o){var s={literal:function(m){return'"'+u(m.text)+'"'},class:function(m){var g=m.parts.map(function(v){return Array.isArray(v)?d(v[0])+"-"+d(v[1]):d(v)});return"["+(m.inverted?"^":"")+g+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function a(m){return m.charCodeAt(0).toString(16).toUpperCase()}function u(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function d(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function h(m){return s[m.type](m)}function f(m){var g,v,w=m.map(h);if(w.sort(),w.length>0){for(g=1,v=1;g<w.length;g++)w[g-1]!==w[g]&&(w[v]=w[g],v++);w.length=v}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}function y(m){return m?'"'+u(m)+'"':"end of input"}return"Expected "+f(n)+" but "+y(o)+" found."},{SyntaxError:t,parse:r}},(OM=M6).exports&&(OM.exports=kM());const Rx={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Hte(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Rx[e.unit]!=null))throw new I("effect:type-error",`Expected <angle>, Actual: ${iw(e)}`,{term:e})}const Px={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Gte(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Px[e.unit]!=null))throw new I("effect:type-error",`Expected <length>, Actual: ${iw(e)}`,{term:e})}function qn(e){zte(e);const t=e.value;return Zy(t,e),e.unit==="%"?.01*t:t}function Wte(e){return jte(e),Zy(e.value,e),e.value}function qte(e){return Hte(e),e.value*Rx[e.unit]||0}function $x(e){return Gte(e),e.value*Px[e.unit]||0}function Yte(e){switch(e.colorType){case"hex":return kG(e.value);case"named":return R6(e.value);case"function":return Jte(e.value)}}function R6(e){if(!W5(e))throw new I("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return OG(e)}const Kte=/^rgba?/i,Zte=/^hsla?/i;function Jte(e){if(Bp(e.parameters,4),Kte.test(e.name))return[qn(e.parameters[0]),qn(e.parameters[1]),qn(e.parameters[2]),e.parameters[3]?qn(e.parameters[3]):1];if(Zte.test(e.name))return q5(Wte(e.parameters[0]),qn(e.parameters[1]),qn(e.parameters[2]),e.parameters[3]?qn(e.parameters[3]):1);throw new I("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function Dx(e,t,i){var r;try{return Qte(e)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function Lx(e,t,i,r){try{const n=Xte(e);dr(i,n,t)}catch(n){r.messages&&r.messages.push(n)}}function Xte(e){const t=N6(e);return t?Dte(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function Qte(e){if(!e||e.length===0)return null;if(eie(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:BM(i.value)});return t}return BM(e)}function eie(e){const t=e[0];return!!t&&"scale"in t}function BM(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[rs(i,"amount")];break;case"blur":r=[rs(i,"radius","pt")];break;case"hue-rotate":r=[rs(i,"angle","deg")];break;case"drop-shadow":r=[rs(i,"xoffset","pt"),rs(i,"yoffset","pt"),rs(i,"blurRadius","pt"),tie(i,"color")];break;case"bloom":r=[rs(i,"strength"),rs(i,"radius","pt"),rs(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;N6(n),t.push(n)}return t.join(" ")}function rs(e,t,i){if(e[t]==null)throw new I("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function tie(e,t){if(e[t]==null)throw new I("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const fb=-3;var Ja;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Ja||(Ja={}));class D1e{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,n=0){this._storage.put(this._namespace+t,i,r,n)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class P6{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new hl,this._users=new hl}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,n){const o=this._db.get(t);if(o&&(this._size-=o.size,this._db.delete(t),o.entry!==i&&this._notifyRemove(t,o.entry,Ja.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,Ja.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const s=1+Math.max(n,fb)-fb;this._db.set(t,{entry:i,size:r,lifetime:s,lives:s}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const n=this._db.get(t);if(n&&n.entry===i){for(this._size-=n.size;r>this._maxSize;){const o=this._notifyRemove(t,i,Ja.SOME);if(!(T(o)&&o>0))return void this._db.delete(t);r=o}n.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((s,a)=>{const u=s.lifetime;r[u]=(r[u]||0)+s.size,this._users.forAll(d=>{const h=d.namespace;if(a.startsWith(h)){const f=i[h]||0;i[h]=f+s.size}})});const n={};this._users.forAll(s=>{const a=s.namespace;if(!isNaN(s.hitRate)&&s.hitRate>0){const u=i[a]||0;i[a]=u,n[a]=Math.round(100*s.hitRate)+"%"}else n[a]="0%"});const o=Object.keys(i);o.sort((s,a)=>i[a]-i[s]),o.forEach(s=>t[s]=Math.round(i[s]/2**20)+"MB / "+n[s]);for(let s=r.length-1;s>=0;--s){const a=r[s];a&&(t["Priority "+(s+fb-1)]=Math.round(a/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,Ja.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,Ja.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let n;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const s=o[1](i,r);return typeof s=="number"&&(n=s),!0}return!1}),n}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,Ja.SOME);T(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class iie{constructor(t,i){this._storage=new P6,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}new iie(1e3);new ie([128,128,128]);const rie=new ie("white");function $c(e,t){if(!e)return null;let i=null;return pp(e)?i=nie(e):Hv(e)&&(i=e.color?new ie(e.color):null),i?wy(i,t):null}function nie(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{r.type==="object"&&r.resource.href!=null||(i=r.type==="water"?r.color:T(r.material)?r.material.color:null)}),i?new ie(i):null}function wy(e,t){if(t==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new ie(i)}function oie(e,t,i){const r=e.symbolLayers;if(!r)return;const n=o=>{const s=T(o)?o:null;return wy(t=t||s||i!=null&&rie,i)};r.forEach(o=>{if(o.type!=="object"||o.resource.href==null||t)if(o.type==="water")o.color=n(o.color);else{const s=T(o.material)?o.material.color:null,a=n(s);O(o.material)?o.material=new Or({color:a}):o.material.color=a,i!=null&&"outline"in o&&T(o.outline)&&T(o.outline.color)&&(o.outline.color=wy(o.outline.color,i))}})}function sie(e,t,i){(t=t||e.color)&&(e.color=wy(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=wy(e.outline.color,i))}function yb(e,t,i){e&&(t||i!=null)&&(t&&(t=new ie(t)),pp(e)?oie(e,t,i):Hv(e)&&sie(e,t,i))}async function aie(e,t){const i=e.symbolLayers;i&&await jz(i,async r=>lie(r,t))}async function lie(e,t){switch(e.type){case"extrude":cie(e,t);break;case"icon":case"line":case"text":uie(e,t);break;case"path":pie(e,t);break;case"object":await die(e,t)}}function uie(e,t){const i=$6(t);T(i)&&(e.size=i)}function $6(e){for(const t of e)if(typeof t=="number")return t;return null}function cie(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function die(e,t){const{resourceSize:i,symbolSize:r}=await hie(e),n=D6(t,i,r);e.width=Lf(t[0],r[0],i[0],n),e.depth=Lf(t[1],r[1],i[1],n),e.height=Lf(t[2],r[2],i[2],n)}function pie(e,t){const i=D6(t,Q5,[e.width,void 0,e.height]);e.width=Lf(t[0],e.width,1,i),e.height=Lf(t[2],e.height,1,i)}function D6(e,t,i){for(let r=0;r<3;r++){const n=e[r];switch(n){case"symbol-value":return i[r]!=null?i[r]/t[r]:1;case"proportional":break;default:if(n&&t[r])return n/t[r]}}return 1}async function hie(e){const t=await B(()=>import("./symbolLayerUtils.86dc479b.js"),[],import.meta.url),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:n,depth:o}=e,s=[r,o,n];let a=1;for(let u=0;u<3;u++)if(s[u]!=null){a=s[u]/i[u];break}for(let u=0;u<3;u++)s[u]==null&&(s[u]=i[u]*a);return{resourceSize:i,symbolSize:s}}function Lf(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t!=null?t:i;default:return e}}function fie(e,t){const i=$6(t);if(!O(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function yie(e,t){if(e&&t)return pp(e)?aie(e,t):void(Hv(e)&&fie(e,t))}function mie(e,t,i){if(e&&t!=null)if(pp(e)){const r=e.symbolLayers;r&&r.forEach(n=>{if(n&&n.type==="object")switch(i){case"tilt":n.tilt=t;break;case"roll":n.roll=t;break;default:n.heading=t}})}else Hv(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}const gie="<",vie=">",wie=GA("short-date");function bie(e,t,i,r){let n="";t===0?n=`${gie} `:t===i&&(n=`${vie} `);let o=null;return o=r?Wo(e,wie):vte(e),n+o}const _ie=new ie([64,64,64]);function Sie(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((n,o)=>i.includes(o)?bie(n,o,r,t):null)}async function Tie(e,t,i){let r=!1,n=[],o=[];if(e.stops){const d=e.stops;n=d.map(h=>h.value),r=d.some(h=>!!h.label),r&&(o=d.map(h=>h.label))}const s=n[0],a=n[n.length-1];if(s==null&&a==null)return null;const u=r?null:Sie(n,i);return(await Promise.all(n.map(async(d,h)=>({value:d,color:e.type==="opacity"?await Eie(d,e,t):(await B(()=>Promise.resolve().then(()=>n3),void 0,import.meta.url)).getColor(e,d),label:r?o[h]:u[h]})))).reverse()}async function Eie(e,t,i=_ie){const r=new ie(i),n=(await B(()=>Promise.resolve().then(()=>n3),void 0,import.meta.url)).getOpacity(t,e);return n!=null&&(r.a=n),r}var FS;let Qh=FS=class extends U{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new FS({color:this.color,ratio:this.ratio})}};l([c({type:ie,json:{type:[Qe],default:null,write:!0}})],Qh.prototype,"color",void 0),l([c({type:Number,json:{write:!0}})],Qh.prototype,"ratio",void 0),Qh=FS=l([S("esri.renderers.support.HeatmapColorStop")],Qh);const Of=Qh;function Aie(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new Of({ratio:1,color:r.color})),i++)}return t.map((r,n)=>{var s,a;let o="";return n===0?o=((s=e.legendOptions)==null?void 0:s.minLabel)||"low":n===i&&(o=((a=e.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:o,ratio:r.ratio}}).reverse()}W.getLogger("esri.renderers.support.utils");function br(e,t,i){W4(e,t,()=>[]).push(...i)}async function xie(e){var i,r;const t=new Map;if("visualVariables"in e&&e.visualVariables){const n=e.visualVariables.filter(o=>o.type==="color");for(const o of n){const s=o.field||o.valueExpression,a=(await Tie(o)).map(u=>u.color);br(t,s,a)}}if(e.type==="heatmap"){const n=Aie(e).map(o=>o.color);br(t,e.field,n)}else if(e.type==="pie-chart"){for(const n of e.attributes)br(t,n.field,[n.color]);br(t,null,[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,$c(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const n of e.attributes)br(t,n.field,[n.color]);br(t,null,[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of e.uniqueValueInfos)br(t,n.value.toString(),[$c(n.symbol,null)]);else{const n=e.uniqueValueInfos.map(d=>$c(d.symbol,null)),{field:o,field2:s,field3:a,valueExpression:u}=e;(o||u)&&br(t,o||u,n),s&&br(t,s,n),a&&br(t,a,n)}else if(e.type==="class-breaks"){const n=e.classBreakInfos.map(o=>$c(o.symbol,null));br(t,e.field||e.valueExpression,n)}else e.type==="simple"&&br(t,null,[$c(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&br(t,null,[$c(e.defaultSymbol,null)]),t.forEach((n,o)=>{const s=$V(n.filter(Boolean),(a,u)=>JSON.stringify(a)===JSON.stringify(u));t.set(o,s)}),t}var BS;let ef=BS=class extends U{constructor(e){super(e),this.name=null,this.code=null}clone(){return new BS({name:this.name,code:this.code})}};l([c({type:String,json:{write:!0}})],ef.prototype,"name",void 0),l([c({type:[String,Number],json:{write:!0}})],ef.prototype,"code",void 0),ef=BS=l([S("esri.layers.support.CodedValue")],ef);const Cie=new Se({inherited:"inherited",codedValue:"coded-value",range:"range"});let tf=class extends U{constructor(e){super(e),this.name=null,this.type=null}};l([c({type:String,json:{write:!0}})],tf.prototype,"name",void 0),l([pe(Cie)],tf.prototype,"type",void 0),tf=l([S("esri.layers.support.Domain")],tf);const rw=tf;var US;let rf=US=class extends rw{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new US({codedValues:R(this.codedValues),name:this.name})}};l([c({type:[ef],json:{write:!0}})],rf.prototype,"codedValues",void 0),l([pe({codedValue:"coded-value"})],rf.prototype,"type",void 0),rf=US=l([S("esri.layers.support.CodedValueDomain")],rf);const L6=rf;var VS;let sg=VS=class extends rw{constructor(e){super(e),this.type="inherited"}clone(){return new VS}};l([pe({inherited:"inherited"})],sg.prototype,"type",void 0),sg=VS=l([S("esri.layers.support.InheritedDomain")],sg);const O6=sg;var jS;let rd=jS=class extends rw{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new jS({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};l([c({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],rd.prototype,"maxValue",void 0),l([c({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],rd.prototype,"minValue",void 0),l([pe({range:"range"})],rd.prototype,"type",void 0),rd=jS=l([S("esri.layers.support.RangeDomain")],rd);const k6=rd,F6={key:"type",base:rw,typeMap:{range:k6,"coded-value":L6,inherited:O6}};function Ox(e){if(!e||!e.type)return null;switch(e.type){case"range":return k6.fromJSON(e);case"codedValue":return L6.fromJSON(e);case"inherited":return O6.fromJSON(e)}return null}const Iie=new Se({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var zS;const Mie=new Se({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Di=zS=class extends U{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?i.value:null}readValueType(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?Mie.fromJSON(i.fieldValueType):null}clone(){return new zS({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};l([c({type:String,json:{write:!0}})],Di.prototype,"alias",void 0),l([c({type:[String,Number],json:{write:{allowNull:!0}}})],Di.prototype,"defaultValue",void 0),l([c()],Di.prototype,"description",void 0),l([Y("description")],Di.prototype,"readDescription",null),l([c({types:F6,json:{read:{reader:Ox},write:!0}})],Di.prototype,"domain",void 0),l([c({type:Boolean,json:{write:!0}})],Di.prototype,"editable",void 0),l([c({type:Qe,json:{write:!0}})],Di.prototype,"length",void 0),l([c({type:String,json:{write:!0}})],Di.prototype,"name",void 0),l([c({type:Boolean,json:{write:!0}})],Di.prototype,"nullable",void 0),l([pe(Iie)],Di.prototype,"type",void 0),l([c()],Di.prototype,"valueType",void 0),l([Y("valueType",["description"])],Di.prototype,"readValueType",null),Di=zS=l([S("esri.layers.support.Field")],Di);const Jy=Di;var HS;let nd=HS=class extends U{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new HS({mapLayerId:e,gdbVersion:t})}};l([pe({mapLayer:"map-layer"})],nd.prototype,"type",void 0),l([c({type:Qe,json:{write:!0}})],nd.prototype,"mapLayerId",void 0),l([c({type:String,json:{write:!0}})],nd.prototype,"gdbVersion",void 0),nd=HS=l([S("esri.layers.support.source.MapLayerSource")],nd);var GS;let vs=GS=class extends U{constructor(e){super(e),this.type="query-table"}clone(){var s;const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:n}=this,o={workspaceId:e,query:t,oidFields:i,spatialReference:(s=r==null?void 0:r.clone())!=null?s:void 0,geometryType:n};return new GS(o)}};l([pe({queryTable:"query-table"})],vs.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],vs.prototype,"workspaceId",void 0),l([c({type:String,json:{write:!0}})],vs.prototype,"query",void 0),l([c({type:String,json:{write:!0}})],vs.prototype,"oidFields",void 0),l([c({type:me,json:{write:!0}})],vs.prototype,"spatialReference",void 0),l([pe(OA)],vs.prototype,"geometryType",void 0),vs=GS=l([S("esri.layers.support.source.QueryTableDataSource")],vs);var WS;let od=WS=class extends U{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new WS({workspaceId:e,dataSourceName:t})}};l([pe({raster:"raster"})],od.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],od.prototype,"dataSourceName",void 0),l([c({type:String,json:{write:!0}})],od.prototype,"workspaceId",void 0),od=WS=l([S("esri.layers.support.source.RasterDataSource")],od);var qS;let su=qS=class extends U{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new qS({workspaceId:e,gdbVersion:t,dataSourceName:i})}};l([pe({table:"table"})],su.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],su.prototype,"workspaceId",void 0),l([c({type:String,json:{write:!0}})],su.prototype,"gdbVersion",void 0),l([c({type:String,json:{write:!0}})],su.prototype,"dataSourceName",void 0),su=qS=l([S("esri.layers.support.source.TableDataSource")],su);var YS,KS;const Nie=yi()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Tr=YS=class extends U{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return UM()(e,t,i)}castLeftTableSource(e){return zo(ZS(),e)}readRightTableSource(e,t,i){return UM()(e,t,i)}castRightTableSource(e){return zo(ZS(),e)}clone(){var s,a;const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:n}=this,o={leftTableKey:e,rightTableKey:t,leftTableSource:(s=i==null?void 0:i.clone())!=null?s:void 0,rightTableSource:(a=r==null?void 0:r.clone())!=null?a:void 0,joinType:n};return new YS(o)}};l([pe({joinTable:"join-table"})],Tr.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Tr.prototype,"leftTableKey",void 0),l([c({type:String,json:{write:!0}})],Tr.prototype,"rightTableKey",void 0),l([c({json:{write:!0}})],Tr.prototype,"leftTableSource",void 0),l([Y("leftTableSource")],Tr.prototype,"readLeftTableSource",null),l([Fe("leftTableSource")],Tr.prototype,"castLeftTableSource",null),l([c({json:{write:!0}})],Tr.prototype,"rightTableSource",void 0),l([Y("rightTableSource")],Tr.prototype,"readRightTableSource",null),l([Fe("rightTableSource")],Tr.prototype,"castRightTableSource",null),l([pe(Nie)],Tr.prototype,"joinType",void 0),Tr=YS=l([S("esri.layers.support.source.JoinTableDataSource")],Tr);let mb=null;function UM(){return mb||(mb=Cp({types:ZS()})),mb}let gb=null;function ZS(){return gb||(gb={key:"type",base:null,typeMap:{"data-layer":Yn,"map-layer":nd}}),gb}const Rie={key:"type",base:null,typeMap:{"join-table":Tr,"query-table":vs,raster:od,table:su}};let Yn=KS=class extends U{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new KS({fields:e,dataSource:t})}};l([pe({dataLayer:"data-layer"})],Yn.prototype,"type",void 0),l([c({type:[Jy],json:{write:!0}})],Yn.prototype,"fields",void 0),l([c({types:Rie,json:{write:!0}})],Yn.prototype,"dataSource",void 0),Yn=KS=l([S("esri.layers.support.source.DataLayerSource")],Yn),Yn.from=Ze(Yn);function nw(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function Xy(e){return typeof e=="string"?rt(e):R(e)}function ow(e,t,i){const r={};for(const n in e){if(n==="declaredClass")continue;const o=e[n];if(o!=null&&typeof o!="function")if(Array.isArray(o)){r[n]=[];for(let s=0;s<o.length;s++)r[n][s]=ow(o[s])}else if(typeof o=="object")if(o.toJSON){const s=o.toJSON(i&&i[n]);r[n]=t?s:JSON.stringify(s)}else r[n]=t?o:JSON.stringify(o);else r[n]=o}return r}const Um={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new ji({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:me.WebMercator}),minus180Line:new ji({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:me.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new ji({paths:[[[180,-180],[180,180]]],spatialReference:me.WGS84}),minus180Line:new ji({paths:[[[-180,-180],[-180,180]]],spatialReference:me.WGS84})}};function Ku(e,t){return Math.ceil((e-t)/(2*t))}function B6(e,t){const i=kf(e);for(const r of i)for(const n of r)n[0]+=t;return e}function kf(e){return tc(e)?e.rings:e.paths}async function Pie(e,t,i,r){const n=typeof e=="string"?rt(e):e,o=t[0].spatialReference,s={...r,query:{...n.query,f:"json",sr:JSON.stringify(o),target:JSON.stringify({geometryType:Rp(t[0]),geometries:t}),cutter:JSON.stringify(i)}},a=await Be(n.path+"/cut",s),{cutIndexes:u,geometries:d=[]}=a.data;return{cutIndexes:u,geometries:d.map(h=>{const f=Ki(h);return f.spatialReference=o,f})}}async function $ie(e,t,i){const r=typeof e=="string"?rt(e):e,n=t[0].spatialReference,o=Rp(t[0]),s={...i,query:{...r.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(Die(t))}};return Lie((await Be(r.path+"/simplify",s)).data,o,n)}function Die(e){return{geometryType:Rp(e[0]),geometries:e.map(t=>t.toJSON())}}function Lie(e,t,i){const r=OL(t);return e.map(n=>{const o=r.fromJSON(n);return o.spatialReference=i,o})}const U6=W.getLogger("esri.geometry.support.normalizeUtils");function Oie(e){return e.type==="polygon"}function kie(e){return e[0].type==="polygon"}function Fie(e){return e[0].type==="polyline"}function Bie(e,t){if(!(e instanceof ji||e instanceof fr)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw U6.error(n),new I(n)}const i=kf(e),r=[];for(const n of i){const o=[];r.push(o),o.push([n[0][0],n[0][1]]);for(let s=0;s<n.length-1;s++){const a=n[s][0],u=n[s][1],d=n[s+1][0],h=n[s+1][1],f=Math.sqrt((d-a)*(d-a)+(h-u)*(h-u)),y=(h-u)/f,m=(d-a)/f,g=f/t;if(g>1){for(let A=1;A<=g-1;A++){const M=A*t,$=m*M+a,N=y*M+u;o.push([$,N])}const v=(f+Math.floor(g-1)*t)/2,w=m*v+a,_=y*v+u;o.push([w,_])}o.push([d,h])}}return Oie(e)?new fr({rings:r,spatialReference:e.spatialReference}):new ji({paths:r,spatialReference:e.spatialReference})}function VM(e,t,i){if(t){const r=Bie(e,1e6);e=Mh(r,!0)}return i&&(e=B6(e,i)),e}function jM(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const n=Ku(r,t);e[0]=r+n*(-2*t)}else if(r<i){const n=Ku(r,i);e[0]=r+n*(-2*i)}}else{const r=e.x;if(r>t){const n=Ku(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<i){const n=Ku(r,i);e=e.clone().offset(n*(-2*i),0)}}return e}function Uie(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const n=t.cutIndexes[r],o=t.geometries[r],s=kf(o);for(let a=0;a<s.length;a++){const u=s[a];u.some(d=>{if(d[0]<180)return!0;{let h=0;for(let y=0;y<u.length;y++){const m=u[y][0];h=m>h?m:h}h=Number(h.toFixed(9));const f=-360*Ku(h,180);for(let y=0;y<u.length;y++){const m=o.getPoint(a,y);o.setPoint(a,y,m.clone().offset(f,0))}return!0}})}if(n===i){if(kie(e))for(const a of kf(o))e[n]=e[n].addRing(a);else if(Fie(e))for(const a of kf(o))e[n]=e[n].addPath(a)}else i=n,e[n]=o}return e}async function V6(e,t,i){var $;if(!Array.isArray(e))return V6([e],t);t&&typeof t!="string"&&U6.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:($=t==null?void 0:t.url)!=null?$:Ne.geometryServiceUrl;let n,o,s,a,u,d,h,f,y=0;const m=[],g=[];for(const N of e)if(O(N))g.push(N);else if(n||(n=N.spatialReference,o=to(n),s=n.isWebMercator,d=s?102100:4326,a=Um[d].maxX,u=Um[d].minX,h=Um[d].plus180Line,f=Um[d].minus180Line),o)if(N.type==="mesh")g.push(N);else if(N.type==="point")g.push(jM(N.clone(),a,u));else if(N.type==="multipoint"){const D=N.clone();D.points=D.points.map(V=>jM(V,a,u)),g.push(D)}else if(N.type==="extent"){const D=N.clone()._normalize(!1,!1,o);g.push(D.rings?new fr(D):D)}else if(N.extent){const D=N.extent,V=Ku(D.xmin,u)*(2*a);let G=V===0?N.clone():B6(N.clone(),V);D.offset(V,0),D.intersects(h)&&D.xmax!==a?(y=D.xmax>y?D.xmax:y,G=VM(G,s),m.push(G),g.push("cut")):D.intersects(f)&&D.xmin!==u?(y=D.xmax*(2*a)>y?D.xmax*(2*a):y,G=VM(G,s,360),m.push(G),g.push("cut")):g.push(G)}else g.push(N.clone());else g.push(N);let v=Ku(y,a),w=-90;const _=v,A=new ji;for(;v>0;){const N=360*v-180;A.addPath([[N,w],[N,-1*w]]),w*=-1,v--}if(m.length>0&&_>0){const N=Uie(m,await Pie(r,m,A,i)),D=[],V=[];for(let ee=0;ee<g.length;ee++){const re=g[ee];if(re!=="cut")V.push(re);else{const ue=N.shift(),ge=e[ee];T(ge)&&ge.type==="polygon"&&ge.rings&&ge.rings.length>1&&ue.rings.length>=ge.rings.length?(D.push(ue),V.push("simplify")):V.push(s?js(ue):ue)}}if(!D.length)return V;const G=await $ie(r,D,i),Z=[];for(let ee=0;ee<V.length;ee++){const re=V[ee];re!=="simplify"?Z.push(re):Z.push(s?js(G.shift()):G.shift())}return Z}const M=[];for(let N=0;N<g.length;N++){const D=g[N];if(D!=="cut")M.push(D);else{const V=m.shift();M.push(s===!0?js(V):V)}}return M}function L1e(e,t){const i=to(t);if(i){const[r,n]=i.valid,o=n-r;if(e<r)for(;e<r;)e+=o;if(e>n)for(;e>n;)e-=o}return e}function j6(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let n=0;n<r.length;n++)t[i][n]=j6(r[n])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var Xa;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Xa||(Xa={}));const zM=4294967296,Vie=new TextDecoder("utf-8"),jie=k("safari")||k("ios")?6:k("ff")?12:32;class nc{constructor(t,i,r=0,n=t?t.byteLength:0){this._tag=0,this._dataType=Xa.unknown,this._init(t,i,r,n)}_init(t,i,r,n){this._data=t,this._dataView=i,this._pos=r,this._end=n}clone(){return new nc(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*zM;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*zM;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,n){const o=this.getMessage(),s=t(o,i,r,n);return o.release(),s}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=nc.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){nc.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Xa.varint:this._decodeVarint();break;case Xa.fixed64:this._skip(8);break;case Xa.delimited:this._skip(this._getLength());break;case Xa.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i,r=this._pos,n=0;if(this._end-r>=10)do{if(i=t[r++],n|=127&i,(128&i)==0||(i=t[r++],n|=(127&i)<<7,(128&i)==0)||(i=t[r++],n|=(127&i)<<14,(128&i)==0)||(i=t[r++],n|=(127&i)<<21,(128&i)==0)||(i=t[r++],n+=268435456*(127&i),(128&i)==0)||(i=t[r++],n+=34359738368*(127&i),(128&i)==0)||(i=t[r++],n+=4398046511104*(127&i),(128&i)==0)||(i=t[r++],n+=562949953421312*(127&i),(128&i)==0)||(i=t[r++],n+=72057594037927940*(127&i),(128&i)==0)||(i=t[r++],n+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let o=1;for(;r!==this._end&&(i=t[r],(128&i)!=0);)++r,n+=(127&i)*o,o*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=i*o}return this._pos=r,n}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==Xa.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>jie){const s=t.subarray(i,r);return Vie.decode(s)}let n="",o="";for(let s=i;s<r;++s){const a=t[s];128&a?o+="%"+a.toString(16):(n+=decodeURIComponent(o)+String.fromCharCode(a),o="")}return o.length&&(n+=decodeURIComponent(o)),n}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}}nc.pool=new no(nc,null,e=>{e._data=null,e._dataView=null});class Gi{constructor(t=[],i=[],r=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,n,o]=t,s=n-i,a=o-r;return new Gi([5],[i,r,s,0,0,a,-s,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let o=0;o<n;o++)t(this.coords[2*(o+i)],this.coords[2*(o+i)+1]);i+=n}}clone(t){return t?(t.set(this.coords),new Gi(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new Gi(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class Ko{constructor(t=null,i={},r,n){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new Ko(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function zie(e){return!(O(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class O1e extends Ko{}class sw{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new sw;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const z6=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class k1e{constructor(t){this.options=t,this.geometryTypes=z6,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new sw}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||Ji(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=hp(this.options.sourceSpatialReference)/hp(t.spatialReference);if(i!==1)for(const r of t.features){if(!zie(r))continue;const n=r.geometry.coords;for(let o=2;o<n.length;o+=3)n[o]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new Ko}createSpatialReference(){return{wkid:0}}createGeometry(){return new Gi}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Gi}}const HM=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],GM=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],WM=["upperLeft","lowerLeft"];function qM(e){return e>=HM.length?null:HM[e]}function Hie(e){return e>=GM.length?null:GM[e]}function YM(e){return e>=WM.length?null:WM[e]}function KM(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function Gie(e,t,i){const n=t.createPointGeometry(i);for(;e.next();)switch(e.tag()){case 3:{const o=e.getUInt32(),s=e.pos()+o;let a=0;for(;e.pos()<s;)t.addCoordinatePoint(n,e.getSInt64(),a++);break}default:e.skip()}return n}function Wie(e,t,i){const o=t.createGeometry(i),s=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const a=e.getUInt32(),u=e.pos()+a;let d=0;for(;e.pos()<u;)t.addLength(o,e.getUInt32(),d++);break}case 3:{const a=e.getUInt32(),u=e.pos()+a;let d=0;for(t.allocateCoordinates(o);e.pos()<u;)t.addCoordinate(o,e.getSInt64(),d),d++,d===s&&(d=0);break}default:e.skip()}return o}function qie(e){const n=new Gi;let o="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const s=e.getUInt32(),a=e.pos()+s;for(;e.pos()<a;)n.lengths.push(e.getUInt32());break}case 3:{const s=e.getUInt32(),a=e.pos()+s;for(;e.pos()<a;)n.coords.push(e.getSInt64());break}case 1:o=z6[e.getEnum()];break;default:e.skip()}return{queryGeometry:n,queryGeometryType:o}}function Yie(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function Kie(e){const a={type:qM(0)};for(;e.next();)switch(e.tag()){case 1:a.name=e.getString();break;case 2:a.type=qM(e.getEnum());break;case 3:a.alias=e.getString();break;case 4:a.sqlType=Hie(e.getEnum());break;case 5:e.skip();break;case 6:a.defaultValue=e.getString();break;default:e.skip()}return a}function Zie(e){const r={};for(;e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.isSystemMaintained=e.getBool();break;default:e.skip()}return r}function Jie(e,t,i,r){const a=t.createFeature(i);let u=0;for(;e.next();)switch(e.tag()){case 1:{const d=r[u++].name;a.attributes[d]=e.processMessage(Yie);break}case 2:a.geometry=e.processMessageWithArgs(Wie,t,i);break;case 4:a.centroid=e.processMessageWithArgs(Gie,t,i);break;default:e.skip()}return a}function Xie(e){const o=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:o[0]=e.getDouble();break;case 2:o[1]=e.getDouble();break;case 4:o[2]=e.getDouble();break;case 3:o[3]=e.getDouble();break;default:e.skip()}return o}function Qie(e){const o=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:o[0]=e.getDouble();break;case 2:o[1]=e.getDouble();break;case 4:o[2]=e.getDouble();break;case 3:o[3]=e.getDouble();break;default:e.skip()}return o}function ere(e){const n={originPosition:YM(0)};for(;e.next();)switch(e.tag()){case 1:n.originPosition=YM(e.getEnum());break;case 2:n.scale=e.processMessage(Xie);break;case 3:n.translate=e.processMessage(Qie);break;default:e.skip()}return n}function tre(e){const n={};for(;e.next();)switch(e.tag()){case 1:n.shapeAreaFieldName=e.getString();break;case 2:n.shapeLengthFieldName=e.getString();break;case 3:n.units=e.getString();break;default:e.skip()}return n}function ire(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function rre(e,t){const v=t.createFeatureResult();v.geometryType=KM(t,0);let w=!1;for(;e.next();)switch(e.tag()){case 1:v.objectIdFieldName=e.getString();break;case 3:v.globalIdFieldName=e.getString();break;case 4:v.geohashFieldName=e.getString();break;case 5:v.geometryProperties=e.processMessage(tre);break;case 7:v.geometryType=KM(t,e.getEnum());break;case 8:v.spatialReference=e.processMessageWithArgs(ire,t);break;case 10:v.hasZ=e.getBool();break;case 11:v.hasM=e.getBool();break;case 12:v.transform=e.processMessage(ere);break;case 9:{const _=e.getBool();v.exceededTransferLimit=_;break}case 13:t.addField(v,e.processMessage(Kie));break;case 15:w||(t.prepareFeatures(v),w=!0),t.addFeature(v,e.processMessageWithArgs(Jie,t,v,v.fields));break;case 2:v.uniqueIdField=e.processMessage(Zie);break;default:e.skip()}return t.finishFeatureResult(v),v}function nre(e,t){const n={};let o=null;for(;e.next();)switch(e.tag()){case 4:o=e.processMessageWithArgs(qie);break;case 1:n.featureResult=e.processMessageWithArgs(rre,t);break;default:e.skip()}return T(o)&&n.featureResult&&t.addQueryGeometry(n,o),n}function ore(e,t){try{const r=new nc(new Uint8Array(e),new DataView(e)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(nre,t):r.skip();return n}catch(i){throw new I("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function sre(e,t){const i=ore(e,t),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,o=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const s=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[s])}return r&&(r.queryGeometry=n,r.queryGeometryType=o),r}function JS(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=lO(i.geometryType,t,e.outSpatialReference);if(!O(r))for(const n of i.features)r(n.geometry)}const ZM="Layer does not support extent calculation.";function H6(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function G6(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r;let o,s,a;if(T(i)&&(s=i.spatialReference,a=i.spatialReference.wkid||JSON.stringify(i.spatialReference),n.geometryType=Rp(i),n.geometry=H6(i,e.compactGeometryEnabled),n.inSR=a),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete n.outFields:r.outFields.includes("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?(n.outSR=r.outSR.wkid||JSON.stringify(r.outSR),o=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR,o=s),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&T(s)&&T(e.quantizationParameters)&&T(e.quantizationParameters.extent)&&s.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const u=r.timeExtent,{start:d,end:h}=u;d==null&&h==null||(n.time=d===h?d:`${d==null?"null":d},${h==null?"null":h}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&T(s)&&T(o)&&s.equals(o)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function W6(e,t,i,r){const n=T(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await Up(e,t,"json",r);return JS(t,i,n.data),n}async function are(e,t,i,r){if(T(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const n=await q6(e,t,r),o=n;return o.data=sre(n.data,i),o}function q6(e,t,i){return Up(e,t,"pbf",i)}function lre(e,t,i){return T(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Up(e,t,"json",i,{returnIdsOnly:!0})}function ure(e,t,i){return T(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Up(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function cre(e,t,i){return T(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):Up(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(ZM);if(n.hasOwnProperty("count"))throw new Error(ZM);return r})}function Up(e,t,i,r={},n={}){const o=typeof e=="string"?rt(e):e,s=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",V6(s,null,r).then(a=>{const u=a&&a[0];T(u)&&((t=t.clone()).geometry=u);const d=j6({...o.query,f:i,...n,...G6(t,n)});return Be(Go(o.path,"query"),{...r,query:{...d,...r.query}})})}const F1e=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:H6,executeQuery:W6,executeQueryForCount:ure,executeQueryForExtent:cre,executeQueryForIds:lre,executeQueryPBF:are,executeQueryPBFBuffer:q6,queryToQueryStringParameters:G6,runQuery:Up},Symbol.toStringTag,{value:"Module"}));var XS;const QS=new Se({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Qt=XS=class extends U{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var n;const i=me.fromJSON(t.spatialReference),r=[];for(let o=0;o<e.length;o++){const s=e[o],a=Ni.fromJSON(s),u=s.geometry&&s.geometry.spatialReference;T(a.geometry)&&!u&&(a.geometry.spatialReference=i);const d=s.aggregateGeometries,h=a.aggregateGeometries;if(d&&T(h))for(const f in h){const y=h[f],m=(n=d[f])==null?void 0:n.spatialReference;T(y)&&!m&&(y.spatialReference=i)}r.push(a)}return r}writeGeometryType(e,t,i,r){if(e)return void QS.write(e,t,i,r);const{features:n}=this;if(n){for(const o of n)if(o&&T(o.geometry))return void QS.write(o.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=Ki(e);return!i&&t.spatialReference&&(r.spatialReference=me.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&T(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new XS(this.cloneProperties())}cloneProperties(){return R({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const n=e&&e[i];r.geometry=n&&n.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,n]}=e,o=d=>Math.round((d-r)/t),s=d=>Math.round((n-d)/i),a=this.features,u=this._getQuantizationFunction(this.geometryType,o,s);for(let d=0,h=a.length;d<h;d++)u(a[d].geometry)||(a.splice(d,1),d--,h--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[o,s]}=i,a=h=>h*o+r,u=h=>n-h*s,d=this._getHydrationFunction(e,a,u);for(const{geometry:h}of t)T(h)&&d(h);return this.transform=null,this}_quantizePoints(e,t,i){let r,n;const o=[];for(let s=0,a=e.length;s<a;s++){const u=e[s];if(s>0){const d=t(u[0]),h=i(u[1]);d===r&&h===n||(o.push([d-r,h-n]),r=d,n=h)}else r=t(u[0]),n=i(u[1]),o.push([r,n])}return o.length>0?o:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const n=tc(r)?r.rings:r.paths,o=[];for(let s=0,a=n.length;s<a;s++){const u=n[s],d=this._quantizePoints(u,t,i);d&&o.push(d)}return o.length>0?(tc(r)?r.rings=o:r.paths=o,r):null}:e==="multipoint"?r=>{const n=this._quantizePoints(r.points,t,i);return n.length>0?(r.points=n,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const n=tc(r)?r.rings:r.paths;let o,s;for(let a=0,u=n.length;a<u;a++){const d=n[a];for(let h=0,f=d.length;h<f;h++){const y=d[h];h>0?(o+=y[0],s+=y[1]):(o=y[0],s=y[1]),y[0]=t(o),y[1]=i(s)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const n=r.points;let o,s;for(let a=0,u=n.length;a<u;a++){const d=n[a];a>0?(o+=d[0],s+=d[1]):(o=d[0],s=d[1]),d[0]=t(o),d[1]=i(s)}}:void 0}};l([c({type:String,json:{write:!0}})],Qt.prototype,"displayFieldName",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qt.prototype,"exceededTransferLimit",void 0),l([c({type:[Ni],json:{write:!0}})],Qt.prototype,"features",void 0),l([Y("features")],Qt.prototype,"readFeatures",null),l([c({type:[Jy],json:{write:!0}})],Qt.prototype,"fields",void 0),l([c({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:QS.read}}})],Qt.prototype,"geometryType",void 0),l([X("geometryType")],Qt.prototype,"writeGeometryType",null),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qt.prototype,"hasM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qt.prototype,"hasZ",void 0),l([c({types:Ac,json:{write:!0}})],Qt.prototype,"queryGeometry",void 0),l([Y("queryGeometry")],Qt.prototype,"readQueryGeometry",null),l([c({type:me,json:{write:!0}})],Qt.prototype,"spatialReference",void 0),l([X("spatialReference")],Qt.prototype,"writeSpatialReference",null),l([c({json:{write:!0}})],Qt.prototype,"transform",void 0),Qt=XS=l([S("esri.rest.support.FeatureSet")],Qt),Qt.prototype.toJSON.isDefaultToJSON=!0;const Qy=Qt,B1e=Object.freeze(Object.defineProperty({__proto__:null,default:Qy},Symbol.toStringTag,{value:"Module"})),JM={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},dre={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function pre(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function oc(e,t,i){const r=new Date(e.getTime());if(t&&i){const n=dre[i],{getter:o,setter:s,multiplier:a}=n;if(i==="months"){const u=pre(r.getFullYear(),r.getMonth()+t);r.getDate()>u&&r.setDate(u)}r[s](r[o]()+t*a)}return r}function XM(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function hre(e,t,i){return e===0?0:e*JM[t]/JM[i]}var Ln;let Mr=Ln=class extends U{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return QM}static get empty(){return fre}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(Ln.allTime)}get isEmpty(){return this.equals(Ln.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new Ln({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=T(this.start)?this.start.getTime():this.start,i=T(this.end)?this.end.getTime():this.end,r=T(e.start)?e.start.getTime():e.start,n=T(e.end)?e.end.getTime():e.end;return t===r&&i===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Po(this.start,r=>XM(r,e)),i=Po(this.end,r=>oc(XM(r,e),1,e));return new Ln({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Ln.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Ah(this.start,-1/0,a=>a.getTime()),i=Ah(this.end,1/0,a=>a.getTime()),r=Ah(e.start,-1/0,a=>a.getTime()),n=Ah(e.end,1/0,a=>a.getTime());let o,s;if(r>=t&&r<=i?o=r:t>=r&&t<=n&&(o=t),i>=r&&i<=n?s=i:n>=t&&n<=i&&(s=n),!isNaN(o)&&!isNaN(s)){const a=new Ln;return a.start=o===-1/0?null:new Date(o),a.end=s===1/0?null:new Date(s),a}return Ln.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Ln,{start:r,end:n}=this;return T(r)&&(i.start=oc(r,e,t)),T(n)&&(i.end=oc(n,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return QM.clone();const t=T(this.start)&&T(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=T(this.end)&&T(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Ln({start:t,end:i})}};l([c({type:Date,json:{write:{allowNull:!0}}})],Mr.prototype,"end",void 0),l([Y("end")],Mr.prototype,"readEnd",null),l([X("end")],Mr.prototype,"writeEnd",null),l([c({readOnly:!0,json:{read:!1}})],Mr.prototype,"isAllTime",null),l([c({readOnly:!0,json:{read:!1}})],Mr.prototype,"isEmpty",null),l([c({type:Date,json:{write:{allowNull:!0}}})],Mr.prototype,"start",void 0),l([Y("start")],Mr.prototype,"readStart",null),l([X("start")],Mr.prototype,"writeStart",null),Mr=Ln=l([S("esri.TimeExtent")],Mr);const QM=new Mr,fre=new Mr({start:void 0,end:void 0}),Xo=Mr;var eT;const eN=new Se({upperLeft:"upper-left",lowerLeft:"lower-left"});let au=eT=class extends U{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new eT(R({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};l([c({type:Oe,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],au.prototype,"extent",void 0),l([c({type:["view","edit"],json:{write:!0}})],au.prototype,"mode",void 0),l([c({type:String,json:{read:eN.read,write:eN.write}})],au.prototype,"originPosition",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],au.prototype,"tolerance",void 0),au=eT=l([S("esri.rest.support.QuantizationParameters")],au);const Y6=au;var tT;const tN=new Se({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let On=tT=class extends U{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=R(e))}clone(){return new tT({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:R(this.statisticParameters)})}};l([c({type:Number,json:{write:!0}})],On.prototype,"maxPointCount",void 0),l([c({type:Number,json:{write:!0}})],On.prototype,"maxRecordCount",void 0),l([c({type:Number,json:{write:!0}})],On.prototype,"maxVertexCount",void 0),l([c({type:String,json:{write:!0}})],On.prototype,"onStatisticField",void 0),l([c({type:String,json:{write:!0}})],On.prototype,"outStatisticFieldName",void 0),l([c({type:String,json:{read:{source:"statisticType",reader:tN.read},write:{target:"statisticType",writer:tN.write}}})],On.prototype,"statisticType",void 0),l([c({type:Object})],On.prototype,"statisticParameters",void 0),l([X("statisticParameters")],On.prototype,"writeStatisticParameters",null),On=tT=l([S("esri.rest.support.StatisticDefinition")],On);const K6=On;var Kd;const yre=new Se({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),mre=new Se({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let fe=Kd=class extends U{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return aA(Kd,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const n=e[r];Array.isArray(n)?i[r]=n.map(o=>o instanceof Date?o.getTime():o):n instanceof Date?i[r]=n.getTime():i[r]=n}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Kd(R({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:T(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};fe.MAX_MAX_RECORD_COUNT_FACTOR=5,l([c({json:{write:!0}})],fe.prototype,"aggregateIds",void 0),l([c({type:Boolean,json:{write:!0}})],fe.prototype,"cacheHint",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"compactGeometryEnabled",void 0),l([c({json:{write:!0}})],fe.prototype,"datumTransformation",void 0),l([Fe("datumTransformation")],fe.prototype,"castDatumTransformation",null),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"defaultSpatialReferenceEnabled",void 0),l([c({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],fe.prototype,"distance",void 0),l([c({type:Yn,json:{write:!0}})],fe.prototype,"dynamicDataSource",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"formatOf3DObjects",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"gdbVersion",void 0),l([c({types:Ac,json:{read:Ki,write:!0}})],fe.prototype,"geometry",void 0),l([c({type:Number,json:{write:!0}})],fe.prototype,"geometryPrecision",void 0),l([c({type:[String],json:{write:!0}})],fe.prototype,"groupByFieldsForStatistics",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"having",void 0),l([c({type:Date})],fe.prototype,"historicMoment",void 0),l([X("historicMoment")],fe.prototype,"writeHistoricMoment",null),l([c({type:Number,json:{write:!0}})],fe.prototype,"maxAllowableOffset",void 0),l([c({type:Number,cast:e=>e<1?1:e>Kd.MAX_MAX_RECORD_COUNT_FACTOR?Kd.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],fe.prototype,"maxRecordCountFactor",void 0),l([c({type:["xyFootprint"],json:{write:!0}})],fe.prototype,"multipatchOption",void 0),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],fe.prototype,"num",void 0),l([c({json:{write:!0}})],fe.prototype,"objectIds",void 0),l([c({type:[String],json:{write:!0}})],fe.prototype,"orderByFields",void 0),l([c({type:[String],json:{write:!0}})],fe.prototype,"outFields",void 0),l([c({type:me,json:{name:"outSR",write:!0}})],fe.prototype,"outSpatialReference",void 0),l([c({type:[K6],json:{write:{enabled:!0,overridePolicy(){return{enabled:T(this.outStatistics)&&this.outStatistics.length>0}}}}})],fe.prototype,"outStatistics",void 0),l([c({json:{write:!0}})],fe.prototype,"parameterValues",void 0),l([X("parameterValues")],fe.prototype,"writeParameterValues",null),l([c({type:le,json:{write:!0}})],fe.prototype,"pixelSize",void 0),l([c({type:Y6,json:{write:!0}})],fe.prototype,"quantizationParameters",void 0),l([c({type:[Object],json:{write:!0}})],fe.prototype,"rangeValues",void 0),l([c({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],fe.prototype,"relationParameter",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"resultType",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnCentroid",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnDistinctValues",void 0),l([c({type:Boolean,json:{default:!0,write:!0}})],fe.prototype,"returnExceededLimitFeatures",void 0),l([c({type:Boolean,json:{write:!0}})],fe.prototype,"returnGeometry",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnQueryGeometry",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fe.prototype,"returnZ",void 0),l([c({type:me,json:{write:!0}})],fe.prototype,"sourceSpatialReference",void 0),l([pe(yre,{ignoreUnknown:!1,name:"spatialRel"})],fe.prototype,"spatialRelationship",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],fe.prototype,"start",void 0),l([X("start"),X("num")],fe.prototype,"writeStart",null),l([c({type:String,json:{write:!0}})],fe.prototype,"sqlFormat",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"text",void 0),l([c({type:Xo,json:{write:!0}})],fe.prototype,"timeExtent",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"timeReferenceUnknownClient",void 0),l([pe(mre,{ignoreUnknown:!1}),c({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],fe.prototype,"units",void 0),l([c({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],fe.prototype,"where",void 0),l([X("where")],fe.prototype,"writeWhere",null),fe=Kd=l([S("esri.rest.support.Query")],fe);const Vi=fe;async function vb(e,t,i){const r=await gre(e,t,i);return Qy.fromJSON(r)}async function gre(e,t,i){const r=Xy(e),n={...i},o=Vi.from(t),{data:s}=await W6(r,o,o.sourceSpatialReference,n);return s}function hi(e,t){return e?t?4:3:t?3:2}const Vp=W.getLogger("esri.layers.graphics.featureConversionUtils"),Z6={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},J6=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o},k1=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o,e[i+2]=t[r+2]},vre=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o,e[i+2]=t[r+3]},X6=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o,e[i+2]=t[r+2],e[i+3]=t[r+3]};function kx(e,t,i,r){if(e){if(i)return t&&r?X6:k1;if(t&&r)return vre}else if(t&&r)return k1;return J6}function wb({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function bb({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function iN({scale:e,translate:t},i){return i*e[0]+t[0]}function rN({scale:e,translate:t},i){return t[1]-i*e[1]}function U1e(e,t,i){return e?t?i?Ux(e):Fx(e):i?Bx(e):aw(e):null}function aw(e){const t=e.coords;return{x:t[0],y:t[1]}}function Q6(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function Fx(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function wre(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function Bx(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function bre(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function Ux(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function _re(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function Sre(e,t,i,r){let n=aw;i&&r?n=Ux:i?n=Fx:r&&(n=Bx);for(const o of t){const{geometry:s,attributes:a}=o,u=T(s)?n(s):null;e.push({attributes:a,geometry:u})}return e}function ek(e,t){return e&&t?_re:e?wre:t?bre:Q6}function tk(e,t,i,r,n){const o=ek(i,r);for(const s of t){const{geometry:a,attributes:u}=s;let d;a&&(d=o(new Gi,a)),e.push(new Ko(d,u,null,u[n]))}return e}function Tre(e,t,i,r){for(const n of t){const{geometry:o,attributes:s}=n;let a;o&&(a=ik(o,i,r)),e.push({attributes:s,geometry:a})}return e}function ik(e,t,i){if(O(e))return null;const r=hi(t,i),n=[];for(let o=0;o<e.coords.length;o+=r){const s=[];for(let a=0;a<r;a++)s.push(e.coords[o+a]);n.push(s)}return t?i?{points:n,hasZ:t,hasM:i}:{points:n,hasZ:t}:i?{points:n,hasM:i}:{points:n}}function rk(e,t,i,r,n){const o=hi(i,r);for(const s of t){const a=s.geometry,u=s.attributes;let d;a&&(d=nk(new Gi,a,o)),e.push(new Ko(d,u,null,u[n]))}return e}function nk(e,t,i=hi(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let n=0;for(const o of t.points)for(let s=0;s<i;s++)r[n++]=o[s];return e}function Ere(e,t,i,r){for(const n of t){const{geometry:o,attributes:s}=n;let a;T(o)&&(a=ok(o,i,r)),e.push({attributes:s,geometry:a})}return e}function ok(e,t,i){if(!e)return null;const r=hi(t,i),{coords:n,lengths:o}=e,s=[];let a=0;for(const u of o){const d=[];for(let h=0;h<u;h++){const f=[];for(let y=0;y<r;y++)f.push(n[a++]);d.push(f)}s.push(d)}return t?i?{paths:s,hasZ:t,hasM:i}:{paths:s,hasZ:t}:i?{paths:s,hasM:i}:{paths:s}}function sk(e,t,i,r,n){const o=hi(i,r);for(const s of t){const a=s.geometry,u=s.attributes;let d;a&&(d=ak(new Gi,a,o)),e.push(new Ko(d,u,null,u[n]))}return e}function ak(e,t,i=hi(t.hasZ,t.hasM)){const{lengths:r,coords:n}=e;let o=0;for(const s of t.paths){for(const a of s)for(let u=0;u<i;u++)n[o++]=a[u];r.push(s.length)}return e}function Are(e,t,i,r){for(const n of t){const{geometry:o,attributes:s,centroid:a}=n;let u;if(T(o)&&(u=lk(o,i,r)),T(a)){const d=aw(a);e.push({attributes:s,centroid:d,geometry:u})}else e.push({attributes:s,geometry:u})}return e}function lk(e,t,i){if(!e)return null;const r=hi(t,i),{coords:n,lengths:o}=e,s=[];let a=0;for(const u of o){const d=[];for(let h=0;h<u;h++){const f=[];for(let y=0;y<r;y++)f.push(n[a++]);d.push(f)}s.push(d)}return t?i?{rings:s,hasZ:t,hasM:i}:{rings:s,hasZ:t}:i?{rings:s,hasM:i}:{rings:s}}function uk(e,t,i,r,n){for(const o of t){const s=o.geometry,a=o.centroid,u=o.attributes;let d;s&&(d=ck(new Gi,s,i,r)),T(a)?e.push(new Ko(d,u,Q6(new Gi,a),u[n])):e.push(new Ko(d,u,null,u[n]))}return e}function ck(e,t,i=t.hasZ,r=t.hasM){return xre(e,t.rings,i,r),e}function xre(e,t,i,r){const n=hi(i,r),{lengths:o,coords:s}=e;let a=0;o.length=s.length=0;for(const u of t){for(const d of u)for(let h=0;h<n;h++)s[a++]=d[h];o.push(u.length)}return e}const Zd=[],Ff=[];function V1e(e,t,i,r,n){Zd[0]=e;const[o]=dk(Ff,Zd,t,i,r,n);return Zd.length=Ff.length=0,o}function dk(e,t,i,r,n,o){if(e.length=0,!i){for(const s of t){const a=s.attributes[o];e.push(new Ko(null,s.attributes,null,a))}return e}switch(i){case"esriGeometryPoint":return tk(e,t,r,n,o);case"esriGeometryMultipoint":return rk(e,t,r,n,o);case"esriGeometryPolyline":return sk(e,t,r,n,o);case"esriGeometryPolygon":return uk(e,t,r,n,o);default:Vp.error("convertToFeatureSet:unknown-geometry",new I(`Unable to parse unknown geometry type '${i}'`)),e.length=0}return e}function j1e(e,t,i,r,n,o){const s=e.length;switch(i){case"esriGeometryPoint":tk(e,t,r,n,o);break;case"esriGeometryMultipoint":rk(e,t,r,n,o);break;case"esriGeometryPolyline":sk(e,t,r,n,o);break;case"esriGeometryPolygon":uk(e,t,r,n,o);break;default:Vp.error("convertToFeatureSet:unknown-geometry",new I(`Unable to parse unknown geometry type '${i}'`))}for(let a=0;a<t.length;a++)e[a+s].geometryType=i,e[a+s].insertAfter=t[a].insertAfter,e[a+s].groupId=t[a].groupId;return e}function z1e(e,t,i,r){Ff[0]=e,pk(Zd,Ff,t,i,r);const n=Zd[0];return Zd.length=Ff.length=0,n}function H1e(e,t,i){if(O(e))return null;const r=new Gi;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),FA(e)?ek(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(r,e):tc(e)?ck(r,e,t,i):BA(e)?ak(r,e,hi(t,i)):kA(e)?nk(r,e,hi(t,i)):void Vp.error("convertFromGeometry:unknown-geometry",new I(`Unable to parse unknown geometry type '${e}'`))}function Cre(e,t,i,r){const n=e&&("coords"in e?e:e.geometry);if(O(n))return null;switch(t){case"esriGeometryPoint":{let o=aw;return i&&r?o=Ux:i?o=Fx:r&&(o=Bx),o(n)}case"esriGeometryMultipoint":return ik(n,i,r);case"esriGeometryPolyline":return ok(n,i,r);case"esriGeometryPolygon":return lk(n,i,r);default:return void Vp.error("convertToGeometry:unknown-geometry",new I(`Unable to parse unknown geometry type '${t}'`))}}function Ire(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function pk(e,t,i,r,n){if(e.length=0,O(i))return Ire(e,t);switch(i){case"esriGeometryPoint":return Sre(e,t,r,n);case"esriGeometryMultipoint":return Tre(e,t,r,n);case"esriGeometryPolyline":return Ere(e,t,r,n);case"esriGeometryPolygon":return Are(e,t,r,n);default:Vp.error("convertToFeatureSet:unknown-geometry",new I(`Unable to parse unknown geometry type '${i}'`))}return e}function G1e(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:n,hasM:o,hasZ:s,features:a,geometryType:u,exceededTransferLimit:d,uniqueIdField:h,queryGeometry:f,queryGeometryType:y}=e,m={features:pk([],a,u,s,o),fields:n,geometryType:u,objectIdFieldName:t,spatialReference:i,uniqueIdField:h,queryGeometry:Cre(f,y,!1,!1)};return r&&(m.transform=r),d&&(m.exceededTransferLimit=d),o&&(m.hasM=o),s&&(m.hasZ=s),m}function W1e(e,t){const i=new sw,{hasM:r,hasZ:n,features:o,objectIdFieldName:s,spatialReference:a,geometryType:u,exceededTransferLimit:d,transform:h,fields:f}=e;return f&&(i.fields=f),i.geometryType=u,i.objectIdFieldName=s||t,i.spatialReference=a,i.objectIdFieldName?(o&&dk(i.features,o,u,n,r,i.objectIdFieldName),d&&(i.exceededTransferLimit=d),r&&(i.hasM=r),n&&(i.hasZ=n),h&&(i.transform=h),i):(Vp.error(new I("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function q1e(e){const{transform:t,features:i,hasM:r,hasZ:n}=e;if(!t)return e;for(const o of i)T(o.geometry)&&oN(o.geometry,o.geometry,r,n,t),T(o.centroid)&&oN(o.centroid,o.centroid,r,n,t);return e.transform=null,e}function Y1e(e,t){const{geometryType:i,features:r,hasM:n,hasZ:o}=t;if(!e)return t;for(let s=0;s<r.length;s++){const a=r[s],u=a.weakClone();u.geometry=new Gi,nN(u.geometry,a.geometry,n,o,i,e),a.centroid&&(u.centroid=new Gi,nN(u.centroid,a.centroid,n,o,"esriGeometryPoint",e)),r[s]=u}return t.transform=e,t}function nN(e,t,i,r,n,o,s=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),O(t)||!t.coords.length)return null;const u=Z6[n],{coords:d,lengths:h}=t,f=hi(i,r),y=hi(i&&s,r&&a),m=kx(i,r,s,a);if(!h.length)return m(e.coords,d,0,0,wb(o,d[0]),bb(o,d[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let g,v,w,_,A=0,M=0,$=M;for(const N of h){if(N<u)continue;let D=0;M=$,w=g=wb(o,d[A]),_=v=bb(o,d[A+1]),m(e.coords,d,M,A,w,_),D++,A+=f,M+=y;for(let V=1;V<N;V++,A+=f)w=wb(o,d[A]),_=bb(o,d[A+1]),w===g&&_===v||(m(e.coords,d,M,A,w-g,_-v),M+=y,D++,g=w,v=_);D>=u&&(e.lengths.push(D),$=M)}return e.coords.length=$,e.coords.length?e:null}function K1e(e,t,i,r,n,o,s=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const u=Z6[n],{coords:d,lengths:h}=t,f=hi(i,r),y=hi(i&&s,r&&a),m=kx(i,r,s,a);if(!h.length)return m(e.coords,d,0,0,d[0],d[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let g=0;const v=o*o;for(const w of h){if(w<u){g+=w*f;continue}const _=e.coords.length/y,A=g,M=g+(w-1)*f;m(e.coords,d,e.coords.length,A,d[A],d[A+1]),iT(e.coords,d,f,v,m,A,M),m(e.coords,d,e.coords.length,M,d[M],d[M+1]);const $=e.coords.length/y-_;$>=u?e.lengths.push($):e.coords.length=_*y,g+=w*f}return e.coords.length?e:null}function Mre(e,t,i,r){const n=e[t],o=e[t+1],s=e[i],a=e[i+1],u=e[r],d=e[r+1];let h=s,f=a,y=u-h,m=d-f;if(y!==0||m!==0){const g=((n-h)*y+(o-f)*m)/(y*y+m*m);g>1?(h=u,f=d):g>0&&(h+=y*g,f+=m*g)}return y=n-h,m=o-f,y*y+m*m}function iT(e,t,i,r,n,o,s){let a,u=r,d=0;for(let h=o+i;h<s;h+=i)a=Mre(t,h,o,s),a>u&&(d=h,u=a);u>r&&(d-o>i&&iT(e,t,i,r,n,o,d),n(e,t,e.length,d,t[d],t[d+1]),s-d>i&&iT(e,t,i,r,n,d,s))}function Z1e(e,t,i,r){if(O(t)||!t.coords||!t.coords.length)return null;const n=hi(i,r);let o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(t&&t.coords){const d=t.coords;for(let h=0;h<d.length;h+=n){const f=d[h],y=d[h+1];o=Math.min(o,f),a=Math.max(a,f),s=Math.min(s,y),u=Math.max(u,y)}}return e[0]=o,e[1]=s,e[2]=a,e[3]=u,e}function oN(e,t,i,r,n){const{coords:o,lengths:s}=t,a=i?r?X6:k1:r?k1:J6,u=hi(i,r);if(!o.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!s.length)return a(e.coords,o,0,0,iN(n,o[0]),rN(n,o[1])),e!==t&&(e.lengths.length=0,e.coords.length=u),e;const[d,h]=n.scale;let f=0;for(let y=0;y<s.length;y++){const m=s[y];e.lengths[y]=m;let g=iN(n,o[f]),v=rN(n,o[f+1]);a(e.coords,o,f,f,g,v),f+=u;for(let w=1;w<m;w++,f+=u)g+=o[f]*d,v-=o[f+1]*h,a(e.coords,o,f,f,g,v)}return e!==t&&(e.lengths.length=s.length,e.coords.length=o.length),e}function J1e(e,t,i,r,n,o){const s=hi(i,r),a=kx(i,r,n,o),u=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let d=0;d<u.length;d+=s)a(e.coords,u,e.coords.length,d,u[d],u[d+1]);return e}function Nre(e,t,i,r){let n=0,o=e[r*t],s=e[r*(t+1)];for(let a=1;a<i;a++){const u=o+e[r*(t+a)],d=s+e[r*(t+a)+1],h=(u-o)*(d+s);o=u,s=d,n+=h}return .5*n}function X1e(e,t){const{coords:i,lengths:r}=e;let n=0,o=0;for(let s=0;s<r.length;s++)o+=Nre(i,n,r[s],t),n+=s;return Math.abs(o)}function Q1e(e,t){if(O(e))return null;const i=e.clone(),r=e.coords,n=e.lengths;let o=0;for(let s=0;s<n.length;s++){const a=n[s];let u=r[t*o],d=r[t*o+1];for(let h=1;h<a;h++){const f=u+r[t*(o+h)],y=d+r[t*(o+h)+1];i.coords[t*(o+h)]=f,i.coords[t*(o+h)+1]=y,u=f,d=y}o+=a}return i}var rT;let ct=rT=class extends U{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new rT(R({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};l([c({type:Boolean,json:{write:!0}})],ct.prototype,"cacheHint",void 0),l([c({type:Yn,json:{write:!0}})],ct.prototype,"dynamicDataSource",void 0),l([c({type:String,json:{write:!0}})],ct.prototype,"gdbVersion",void 0),l([c({type:Number,json:{write:!0}})],ct.prototype,"geometryPrecision",void 0),l([c({type:Date})],ct.prototype,"historicMoment",void 0),l([X("historicMoment")],ct.prototype,"_writeHistoricMoment",null),l([c({type:Number,json:{write:!0}})],ct.prototype,"maxAllowableOffset",void 0),l([c({type:[Number],json:{write:!0}})],ct.prototype,"objectIds",void 0),l([c({type:[String],json:{write:!0}})],ct.prototype,"orderByFields",void 0),l([c({type:[String],json:{write:!0}})],ct.prototype,"outFields",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ct.prototype,"outSpatialReference",void 0),l([c({json:{write:!0}})],ct.prototype,"relationshipId",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],ct.prototype,"start",void 0),l([X("start"),X("num")],ct.prototype,"writeStart",null),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],ct.prototype,"num",void 0),l([c({json:{write:!0}})],ct.prototype,"returnGeometry",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ct.prototype,"returnM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ct.prototype,"returnZ",void 0),l([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ct.prototype,"where",void 0),ct=rT=l([S("esri.rest.support.RelationshipQuery")],ct),ct.from=Ze(ct);const nT=ct;var oT;let sd=oT=class extends U{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new oT({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};l([c({type:[String],json:{write:!0}})],sd.prototype,"groupByFields",void 0),l([c({type:Number,json:{write:!0}})],sd.prototype,"topCount",void 0),l([c({type:[String],json:{write:!0}})],sd.prototype,"orderByFields",void 0),sd=oT=l([S("esri.rest.support.TopFilter")],sd);const Rre=sd;var sT;const sN=new Se({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),aN=new Se({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let it=sT=class extends U{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new sT(R({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};l([c({type:Boolean,json:{write:!0}})],it.prototype,"cacheHint",void 0),l([c({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],it.prototype,"distance",void 0),l([c({types:Ac,json:{read:Ki,write:!0}})],it.prototype,"geometry",void 0),l([c({type:Number,json:{write:!0}})],it.prototype,"geometryPrecision",void 0),l([c({type:Number,json:{write:!0}})],it.prototype,"maxAllowableOffset",void 0),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],it.prototype,"num",void 0),l([c({json:{write:!0}})],it.prototype,"objectIds",void 0),l([c({type:[String],json:{write:!0}})],it.prototype,"orderByFields",void 0),l([c({type:[String],json:{write:!0}})],it.prototype,"outFields",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],it.prototype,"outSpatialReference",void 0),l([c({type:String,json:{write:!0}})],it.prototype,"resultType",void 0),l([c({json:{write:!0}})],it.prototype,"returnGeometry",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],it.prototype,"returnM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],it.prototype,"returnZ",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],it.prototype,"start",void 0),l([X("start"),X("num")],it.prototype,"writeStart",null),l([c({type:String,json:{read:{source:"spatialRel",reader:sN.read},write:{target:"spatialRel",writer:sN.write}}})],it.prototype,"spatialRelationship",void 0),l([c({type:Xo,json:{write:!0}})],it.prototype,"timeExtent",void 0),l([c({type:Rre,json:{write:!0}})],it.prototype,"topFilter",void 0),l([c({type:String,json:{read:aN.read,write:{writer:aN.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],it.prototype,"units",void 0),l([c({type:String,json:{write:!0}})],it.prototype,"where",void 0),it=sT=l([S("esri.rest.support.TopFeaturesQuery")],it),it.from=Ze(it);const Vm=it,Pre="esri.widgets.Feature.support.relatedFeatureUtils",lN=W.getLogger(Pre),uN=new Map;function aT(e){if(!Os(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function $re(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(n=>n.id===parseInt(e,10)&&(i=n,!0)),i}function Dre({originRelationship:e,relationships:t,layerId:i}){let r;return t&&t.some(n=>(`${n.relatedTableId}`===i&&n.id===e.id&&(r=n),!!r)),r}function Lre(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function Ore(e,t){const i=$re(e,t);if(!!i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function kre(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,n=i&&i.value;t.relatedFeatures=n?n.features:[];const o=r&&r.value;t.relatedStatsFeatures=o?o.features:[]}function Fre(e,t,i,r){const n=new nT;return n.outFields=["*"],n.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(n,r)}function Bre(e,t,i){let r=0;const n=[];for(;r<t.length;)n.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return n.join(" OR ")}async function Ure(e,t,i,r){const n=i.layerId.toString(),{layerInfo:o,relation:s,relatedFields:a,outStatistics:u,url:d,sourceSpatialReference:h}=t,f=Dre({originRelationship:s,relationships:o.relationships,layerId:n});if(f.relationshipTableId&&f.keyFieldInRelationshipTable){const m=(await Fre(e,f,i,r))[e.attributes[i.objectIdField]];if(!m)return null;const g=m.features.map(v=>v.attributes[o.objectIdField]);if((u==null?void 0:u.length)>0&&o.supportsStatistics){const v=new Vi;v.where=Bre(o.objectIdField,g,1e3),v.outFields=a,v.outStatistics=u,v.sourceSpatialReference=h;const w={features:Promise.resolve(m),statsFeatures:vb(d,v)};return ii(w)}}const y=f==null?void 0:f.keyField;if(y){const m=jA(Gre(o.fields,y)),g=Lre(e.attributes,s.keyField),v=m?`${y}=${g}`:`${y}='${g}'`,w=vb(d,new Vi({where:v,outFields:t.relatedFields,sourceSpatialReference:h}),r),_=t.outStatistics&&t.outStatistics.length>0&&o.supportsStatistics?vb(d,new Vi({where:v,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:h}),r):null,A={features:w};return _&&(A.statsFeatures=_),ii(A)}return null}function Vre(e,t){return Be(e,{query:{f:"json"},signal:t&&t.signal})}function jre({relatedInfos:e,layer:t},i){const r={};return e.forEach((n,o)=>{const{relation:s}=n;if(!s){const f=new I("relation-required","A relation is required on a layer to retrieve related records.");throw lN.error(f),f}const{relatedTableId:a}=s;if(typeof a!="number"){const f=new I("A related table ID is required on a layer to retrieve related records.");throw lN.error(f),f}const u=`${t.url}/${a}`,d=uN.get(u),h=d||Vre(u,i);d||uN.set(u,h),r[o]=h}),ii(r)}function zre({graphic:e,relatedInfos:t,layer:i},r){const n={};return t.forEach((o,s)=>{o.layerInfo&&(n[s]=Ure(e,o,i,r))}),ii(n)}function Hre({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const r=new K6({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(r)}}function Gre(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const cN={chartAnimation:!0};let Gt=class extends se{constructor(e){super(e),this.abilities={...cN},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...cN,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:r,fieldInfoMap:n,layer:o}=this;return t==null?void 0:t.map(s=>{const a=s==null?void 0:s.clone();if(!a)return null;if(a.title=Yu({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:o,text:a.title}),a.caption=Yu({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:o,text:a.caption}),a.altText=Yu({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:o,text:a.altText}),a.type==="image"){const{value:u}=a;return this._setImageValue({value:u,formattedAttributes:i,layer:o}),a.value.sourceURL?a:void 0}if(a.type==="pie-chart"||a.type==="line-chart"||a.type==="column-chart"||a.type==="bar-chart"){const{value:u}=a;return this._setChartValue({value:u,chartType:a.type,attributes:e,formattedAttributes:i,layer:o}),a}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:r,layer:n}=e,{linkURL:o,sourceURL:s}=i;if(s){const a=OS(s,n);i.sourceURL=LS({formattedAttributes:r,template:a,fieldInfoMap:t})}if(o){const a=OS(o,n);i.linkURL=LS({formattedAttributes:r,template:a,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:r,chartType:n,layer:o}=e,{popupTemplate:s,relatedInfos:a}=this,{fields:u,normalizeField:d}=t;if(t.fields=Nee(u,o),d&&(t.normalizeField=L1(d,o)),!u.some(f=>!!(r[f]!=null||Os(f)&&a.size)))return;const h=s==null?void 0:s.fieldInfos;u.forEach(f=>{if(Os(f))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:h,fieldName:f,formattedAttributes:r,chartType:n,value:t})]);const y=this._getChartOption({value:t,attributes:i,chartType:n,formattedAttributes:r,fieldName:f,fieldInfos:h});t.series.push(y)})}_getRelatedChartInfos(e){var g;const{fieldInfos:t,fieldName:i,formattedAttributes:r,chartType:n,value:o}=e,s=[],a=aT(i),{layerId:u,fieldName:d}=a,h=(g=this.relatedInfos)==null?void 0:g.get(u.toString());if(!h)return s;const{relatedFeatures:f,relation:y}=h;if(!y||!f)return s;const{cardinality:m}=y;return f.forEach(v=>{const{attributes:w}=v;w&&Object.keys(w).forEach(_=>{_===d&&s.push(this._getChartOption({value:o,attributes:w,formattedAttributes:r,fieldName:i,chartType:n,relatedFieldName:_,fieldInfos:t}))})}),m==="one-to-many"||m==="many-to-many"?s:[s[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var M,$,N,D,V,G;const{value:t,attributes:i,formattedAttributes:r,fieldName:n,relatedFieldName:o,fieldInfos:s,chartType:a}=e,{layer:u,fieldInfoMap:d}=this,{normalizeField:h,tooltipField:f}=t,y=h?Os(h)?i[aT(h).fieldName]:i[h]:null,m=o&&i[o]!==void 0?i[o]:i[n]!==void 0?i[n]:r[n],g=new ZL({fieldName:n,value:m===void 0?null:m&&y?m/y:m});if(Os(n)){const Z=d.get(n.toLowerCase()),ee=d.get(f.toLowerCase()),re=(M=Z==null?void 0:Z.fieldName)!=null?M:n,ue=(V=(D=(N=r[($=ee==null?void 0:ee.fieldName)!=null?$:f])!=null?N:Z==null?void 0:Z.label)!=null?D:Z==null?void 0:Z.fieldName)!=null?V:o,ge=r[re];return g.tooltip=this._getTooltip({label:ue,value:ge,chartType:a}),g}const v=w6(s,n),w=L1(n,u),_=f&&r[f]!==void 0?r[f]:g6(v||new Vy({fieldName:w}),(G=this.popupTemplate)==null?void 0:G.expressionInfos),A=r[w];return g.tooltip=this._getTooltip({label:_,value:A,chartType:a}),g}};l([c()],Gt.prototype,"abilities",void 0),l([Fe("abilities")],Gt.prototype,"castAbilities",null),l([c()],Gt.prototype,"activeMediaInfoIndex",void 0),l([c({readOnly:!0})],Gt.prototype,"activeMediaInfo",null),l([c()],Gt.prototype,"attributes",void 0),l([c()],Gt.prototype,"description",void 0),l([c()],Gt.prototype,"fieldInfoMap",void 0),l([c()],Gt.prototype,"formattedAttributes",void 0),l([c()],Gt.prototype,"expressionAttributes",void 0),l([c({readOnly:!0})],Gt.prototype,"formattedMediaInfos",null),l([c()],Gt.prototype,"layer",void 0),l([c({readOnly:!0})],Gt.prototype,"formattedMediaInfoCount",null),l([c()],Gt.prototype,"mediaInfos",void 0),l([c()],Gt.prototype,"popupTemplate",void 0),l([c()],Gt.prototype,"relatedInfos",void 0),l([c()],Gt.prototype,"title",void 0),Gt=l([S("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Gt);const Zu=Gt;var dN=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],Wre=[].concat(dN.slice(30,39),dN.slice(28,30).reverse()),qre=[{name:"default",colors:Wre},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const pN="en-us",Vx=new Map([["ar",()=>B(()=>import("./ar.5d7bdca7.js"),["ar.5d7bdca7.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.a)],["bg-bg",()=>B(()=>import("./bg_BG.e6ba29c2.js"),["bg_BG.e6ba29c2.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.b)],["bs-ba",()=>B(()=>import("./bs_BA.14911a00.js"),["bs_BA.14911a00.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.b)],["ca-es",()=>B(()=>import("./ca_ES.1a938920.js"),["ca_ES.1a938920.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.c)],["cs-cz",()=>B(()=>import("./cs_CZ.8624de8a.js"),["cs_CZ.8624de8a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.c)],["da-dk",()=>B(()=>import("./da_DK.aef5a9c8.js"),["da_DK.aef5a9c8.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.d)],["de-de",()=>B(()=>import("./de_DE.b08b4cf1.js"),["de_DE.b08b4cf1.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.d)],["de-ch",()=>B(()=>import("./de_CH.0b6cd702.js"),["de_CH.0b6cd702.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.d)],["el-gr",()=>B(()=>import("./el_GR.8e618bc9.js"),["el_GR.8e618bc9.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["en-us",()=>B(()=>import("./en_US.41c717af.js"),["en_US.41c717af.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["en-ca",()=>B(()=>import("./en_CA.f60d00bf.js"),["en_CA.f60d00bf.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["es-es",()=>B(()=>import("./es_ES.1f0f76f4.js"),["es_ES.1f0f76f4.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["et-ee",()=>B(()=>import("./et_EE.a7babafb.js"),["et_EE.a7babafb.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["fi-fi",()=>B(()=>import("./fi_FI.fdc0a8b3.js"),["fi_FI.fdc0a8b3.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.f)],["fr-fr",()=>B(()=>import("./fr_FR.9fb72c1a.js"),["fr_FR.9fb72c1a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.f)],["he-il",()=>B(()=>import("./he_IL.3941bb8a.js"),["he_IL.3941bb8a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.h)],["hr-hr",()=>B(()=>import("./hr_HR.0f5af0f2.js"),["hr_HR.0f5af0f2.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.h)],["hu-hu",()=>B(()=>import("./hu_HU.b4dae139.js"),["hu_HU.b4dae139.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.h)],["id-id",()=>B(()=>import("./id_ID.f5b918ea.js"),["id_ID.f5b918ea.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.i)],["it-it",()=>B(()=>import("./it_IT.94769a92.js"),["it_IT.94769a92.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.i)],["ja-jp",()=>B(()=>import("./ja_JP.8eb86db8.js"),["ja_JP.8eb86db8.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.j)],["ko-kr",()=>B(()=>import("./ko_KR.8ba7fd29.js"),["ko_KR.8ba7fd29.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.k)],["lt-lt",()=>B(()=>import("./lt_LT.d8c1cc92.js"),["lt_LT.d8c1cc92.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.l)],["lv-lv",()=>B(()=>import("./lv_LV.ceb923a4.js"),["lv_LV.ceb923a4.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.l)],["nb-no",()=>B(()=>import("./nb_NO.d0457d8e.js"),["nb_NO.d0457d8e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.n)],["nl-nl",()=>B(()=>import("./nl_NL.fbf1ad03.js"),["nl_NL.fbf1ad03.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.n)],["pl-pl",()=>B(()=>import("./pl_PL.44d49398.js"),["pl_PL.44d49398.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.p)],["pt-br",()=>B(()=>import("./pt_BR.89b1d3a7.js"),["pt_BR.89b1d3a7.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.p)],["pt-pt",()=>B(()=>import("./pt_PT.2abd4e91.js"),["pt_PT.2abd4e91.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.p)],["ro-ro",()=>B(()=>import("./ro_RO.fb4fff60.js"),["ro_RO.fb4fff60.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.r)],["ru-ru",()=>B(()=>import("./ru_RU.684f53ee.js"),["ru_RU.684f53ee.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.r)],["sk-sk",()=>B(()=>import("./sk_SK.eaca904e.js"),["sk_SK.eaca904e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["sl-sl",()=>B(()=>import("./sl_SL.cff9b92a.js"),["sl_SL.cff9b92a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["sr-rs",()=>B(()=>import("./sr_RS.44ddc4cf.js"),["sr_RS.44ddc4cf.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["sv-se",()=>B(()=>import("./sv_SE.16043ad0.js"),["sv_SE.16043ad0.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["th-th",()=>B(()=>import("./th_TH.99f2a35e.js"),["th_TH.99f2a35e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.t)],["tr-tr",()=>B(()=>import("./tr_TR.ab1c9f2f.js"),["tr_TR.ab1c9f2f.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.t)],["uk-ua",()=>B(()=>import("./uk_UA.ae3608ad.js"),["uk_UA.ae3608ad.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.u)],["vi-vn",()=>B(()=>import("./vi_VN.7d19f32e.js"),["vi_VN.7d19f32e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.v)],["zh-cn",()=>B(()=>import("./zh_Hans.0f482448.js"),["zh_Hans.0f482448.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.z)],["zh-hk",()=>B(()=>import("./zh_Hant.f458376f.js"),["zh_Hant.f458376f.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.z)],["zh-tw",()=>B(()=>import("./zh_Hant.f458376f.js"),["zh_Hant.f458376f.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.z)]]);function Yre(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of Vx.keys())if(r.startsWith(t)){i=r;break}return i}function Kre(e){return e?Vx.has(e.toLowerCase())?e.toLowerCase():Yre(e)||pN:pN}let Dc,uh;async function Zre(e=Lr()){if(e=Kre(e),Dc&&e===uh)return Dc;Dc=B(()=>import("./index.7ba26017.js"),["index.7ba26017.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(t=>t.i),uh=e;try{const[t,i]=await Promise.all([Dc,Vx.get(uh)()]);uh===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return Dc=null,uh=null,null}return Dc}function Jre(e,t="default"){const i=qre.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const ht={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},_b=.05,Sb=.95,Tb=15,ns="color",ca="tooltip",ch="value",hN="default-line-value";let tr=class extends gi{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new Zu,this.messages=null,this._getChartDependencies=async i=>{const r=await Zre(),{destroyed:n,viewModel:o}=this;if(n||!o||!i)return;const{activeMediaInfo:s}=o,a=await this._getRendererColors(r);this._renderChart({chartDiv:i,mediaInfo:s,chartsModule:r,colorMap:a})}}initialize(){this._featureElementInfo=new Nx,this.own([q(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),ze),q(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),ze)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return C("div",{bind:this,class:ht.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?C("div",{key:"media-element-container",class:ht.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:n,refreshInterval:o,altText:s,title:a,type:u}=e,{sourceURL:d,linkURL:h}=n,f=y6(h)?"_blank":"_self",y=f==="_blank"?"noreferrer":"",m=o?t:null,g=m?m.timestamp:0,v=m?m.sourceURL:d,w=C("img",{alt:s||a,key:`media-${u}-${i}-${r}-${g}`,src:v});return(h?C("a",{title:a,href:h,rel:y,target:f},w):null)||w}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return C("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:ht.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?C("div",{key:"media-title",class:ht.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?C("div",{key:"media-caption",class:ht.mediaItemCaption,innerHTML:e.caption}):null;return C("div",{key:"media-container",class:ht.mediaItemContainer},C("div",{key:"media-item-container",class:ht.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,r=t?this.classes(ht.mediaButton,ht.mediaPrevious):this.classes(ht.mediaButton,ht.mediaNext),n=t?this.classes(ht.mediaIcon,ht.mediaPreviousIconLTR,ht.iconLeftTriangleArrow):this.classes(ht.mediaIcon,ht.mediaNextIconLTR,ht.iconRightTriangleArrow),o=t?this.classes(ht.mediaIcon,ht.mediaPreviousIconRTL,ht.iconRightTriangleArrow):this.classes(ht.mediaIcon,ht.mediaNextIconRTL,ht.iconLeftTriangleArrow),s=t?"media-previous":"media-next",a=t?this._previous:this._next;return C("button",{type:"button",key:s,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:a},C("span",{"aria-hidden":"true",class:n}),C("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var o;const{am4core:t}=e,i=(o=this.viewModel)==null?void 0:o.layer,r=new Map;if(!i)return r;const n=await xie(i.renderer);return n.delete(null),Array.from(n.values()).every(s=>(s==null?void 0:s.length)===1)&&(r.set(hN,t.color({r:50,g:50,b:50,a:1})),Array.from(n.keys()).forEach(s=>{s&&r.set(s,t.color(n.get(s)[0].toCss(!0)))})),r}_handleMediaKeyup(e){const t=Do(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:n,colorMap:o}=e,{value:s,type:a}=n,{am4core:u}=i,d=Jre(u);function h(m){m instanceof u.ColorSet&&d&&(m.list=d)}x6()&&u.useTheme(i.am4themes_dark);const f=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!f.matches?u.useTheme(i.am4themes_animated):u.unuseTheme(i.am4themes_animated),u.useTheme(h);const y=a==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",n.altText||n.title),y.data=s.series.map(m=>({[ca]:m.tooltip,[ch]:m.value,[ns]:o.get(m.fieldName)})).filter(m=>a!=="pie-chart"||m.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:n}=i,o=r.create(t,n.PieChart);o.rtl=dl(this.container);const s=o.series.push(new n.PieSeries);return s.labels.template.disabled=!0,s.ticks.template.disabled=!0,s.dataFields.value=ch,s.dataFields.category=ca,this._customizeChartTooltip(s.tooltip,r),s.slices.template.tooltipText=o.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",s.slices.template.propertyFields.fill=ns,s.slices.template.propertyFields.stroke=ns,o}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:n}=r,{am4core:o,am4charts:s}=i,a=e.xAxes.push(new s.CategoryAxis);a.dataFields.category=ca,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,o),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dy=-a.tooltip.contentHeight});const u=e.yAxes.push(new s.ValueAxis),d=u.renderer.labels.template;u.renderer.minLabelPosition=_b,u.renderer.maxLabelPosition=Sb,u.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(u.tooltip,o),d.wrap=!0;const h=e.series.push(new s.ColumnSeries);h.dataFields.valueY=ch,h.dataFields.categoryX=ca,h.columns.template.propertyFields.fill=ns,h.columns.template.propertyFields.stroke=ns,e.cursor=new s.XYCursor,n.series.length>Tb&&(e.scrollbarX=new o.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:n}=r,{am4core:o,am4charts:s}=i,a=e.yAxes.push(new s.CategoryAxis);a.dataFields.category=ca,a.renderer.inversed=!0,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,o),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dx=a.tooltip.contentWidth});const u=e.xAxes.push(new s.ValueAxis),d=u.renderer.labels.template;u.renderer.minLabelPosition=_b,u.renderer.maxLabelPosition=Sb,u.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(u.tooltip,o),d.wrap=!0;const h=e.series.push(new s.ColumnSeries);h.dataFields.valueX=ch,h.dataFields.categoryY=ca,h.columns.template.propertyFields.fill=ns,h.columns.template.propertyFields.stroke=ns,e.cursor=new s.XYCursor,n.series.length>Tb&&(e.scrollbarY=new o.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:n}=t,{value:o}=r,{am4core:s,am4charts:a}=i,u=e.xAxes.push(new a.CategoryAxis);u.dataFields.category=ca,u.renderer.labels.template.disabled=!0,this._customizeChartTooltip(u.tooltip,s),u.tooltip.events.on("sizechanged",()=>{u.tooltip.dy=-u.tooltip.contentHeight});const d=e.yAxes.push(new a.ValueAxis),h=d.renderer.labels.template;d.renderer.minLabelPosition=_b,d.renderer.maxLabelPosition=Sb,d.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(d.tooltip,s),h.wrap=!0;const f=e.series.push(new a.LineSeries);f.dataFields.categoryX=ca,f.dataFields.valueY=ch,f.strokeWidth=1;const y=n.get(hN);y&&(f.stroke=y);const m=f.bullets.push(new a.CircleBullet);m.propertyFields.fill=ns,m.propertyFields.stroke=ns,e.cursor=new a.XYCursor,o.series.length>Tb&&(e.scrollbarX=new s.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:n}=r,{am4core:o,am4charts:s}=i,a=o.create(t,s.XYChart);return a.rtl=dl(this.container),n==="column-chart"&&this._createColumnChart(a,e),n==="bar-chart"&&this._createBarChart(a,e),n==="line-chart"&&this._createLineChart(a,e),a}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=n}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[r,n=""]=e.split("#");return`${r}${i}timestamp=${t}${n?"#":""}${n}`}};l([J("viewModel.attributes")],tr.prototype,"attributes",void 0),l([J("viewModel.activeMediaInfoIndex")],tr.prototype,"activeMediaInfoIndex",void 0),l([J("viewModel.description")],tr.prototype,"description",void 0),l([J("viewModel.fieldInfoMap")],tr.prototype,"fieldInfoMap",void 0),l([J("viewModel.layer")],tr.prototype,"layer",void 0),l([J("viewModel.mediaInfos")],tr.prototype,"mediaInfos",void 0),l([J("viewModel.popupTemplate")],tr.prototype,"popupTemplate",void 0),l([J("viewModel.relatedInfos")],tr.prototype,"relatedInfos",void 0),l([J("viewModel.title")],tr.prototype,"title",void 0),l([c({type:Zu})],tr.prototype,"viewModel",void 0),l([c(),di("esri/widgets/Feature/t9n/Feature")],tr.prototype,"messages",void 0),tr=l([S("esri.widgets.Feature.FeatureMedia")],tr);const hk=tr;class Xre{constructor(t,i){this.definition=null,this.context=null,this.definition=t,this.context=i}}class Qo{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let i=0;i<this.length();i++)t.push(this.get(i));return t}}class Nc extends Qo{constructor(t,i,r,n,o,s){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=i,this._hasZ=r,this._hasM=n,this._cacheId=o,this._partId=s}get(t){if(this._lazyPt[t]===void 0){const i=this._elements[t];if(i===void 0)return;const r=this._hasZ,n=this._hasM;let o=null;o=r&&!n?new le(i[0],i[1],i[2],void 0,this._spRef):n&&!r?new le(i[0],i[1],void 0,i[2],this._spRef):r&&n?new le(i[0],i[1],i[2],i[3],this._spRef):new le(i[0],i[1],this._spRef),o.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=o}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof Nc&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class jx extends Qo{constructor(t,i,r,n,o){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=r,this._hasM=n,this._spRef=i,this._cacheId=o}get(t){if(this._lazyPath[t]===void 0){const i=this._elements[t];if(i===void 0)return;this._lazyPath[t]=new Nc(i,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof jx&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}var gn={};Object.defineProperty(gn,"__esModule",{value:!0});function fN(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function es(e,t,i){return t&&fN(e.prototype,t),i&&fN(e,i),e}function ke(){return ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},ke.apply(this,arguments)}function vn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,by(e,t)}function lT(e){return lT=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},lT(e)}function by(e,t){return by=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},by(e,t)}function Qre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ag(e,t,i){return Qre()?ag=Reflect.construct:ag=function(n,o,s){var a=[null];a.push.apply(a,o);var u=Function.bind.apply(n,a),d=new u;return s&&by(d,s.prototype),d},ag.apply(null,arguments)}function ene(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function uT(e){var t=typeof Map=="function"?new Map:void 0;return uT=function(r){if(r===null||!ene(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return ag(r,arguments,lT(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),by(n,r)},uT(e)}function fk(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,o;for(o=0;o<r.length;o++)n=r[o],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function tne(e,t){if(!!e){if(typeof e=="string")return yN(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return yN(e,t)}}function yN(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function ml(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=tne(e))||t&&e&&typeof e.length=="number"){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rc=function(e){vn(t,e);function t(){return e.apply(this,arguments)||this}return t}(uT(Error)),ine=function(e){vn(t,e);function t(i){return e.call(this,"Invalid DateTime: "+i.toMessage())||this}return t}(Rc),rne=function(e){vn(t,e);function t(i){return e.call(this,"Invalid Interval: "+i.toMessage())||this}return t}(Rc),nne=function(e){vn(t,e);function t(i){return e.call(this,"Invalid Duration: "+i.toMessage())||this}return t}(Rc),nf=function(e){vn(t,e);function t(){return e.apply(this,arguments)||this}return t}(Rc),yk=function(e){vn(t,e);function t(i){return e.call(this,"Invalid unit "+i)||this}return t}(Rc),sn=function(e){vn(t,e);function t(){return e.apply(this,arguments)||this}return t}(Rc),da=function(e){vn(t,e);function t(){return e.call(this,"Zone is an abstract class")||this}return t}(Rc),Q="numeric",oo="short",kr="long",cT={year:Q,month:Q,day:Q},mk={year:Q,month:oo,day:Q},one={year:Q,month:oo,day:Q,weekday:oo},gk={year:Q,month:kr,day:Q},vk={year:Q,month:kr,day:Q,weekday:kr},wk={hour:Q,minute:Q},bk={hour:Q,minute:Q,second:Q},_k={hour:Q,minute:Q,second:Q,timeZoneName:oo},Sk={hour:Q,minute:Q,second:Q,timeZoneName:kr},Tk={hour:Q,minute:Q,hourCycle:"h23"},Ek={hour:Q,minute:Q,second:Q,hourCycle:"h23"},Ak={hour:Q,minute:Q,second:Q,hourCycle:"h23",timeZoneName:oo},xk={hour:Q,minute:Q,second:Q,hourCycle:"h23",timeZoneName:kr},Ck={year:Q,month:Q,day:Q,hour:Q,minute:Q},Ik={year:Q,month:Q,day:Q,hour:Q,minute:Q,second:Q},Mk={year:Q,month:oo,day:Q,hour:Q,minute:Q},Nk={year:Q,month:oo,day:Q,hour:Q,minute:Q,second:Q},sne={year:Q,month:oo,day:Q,weekday:oo,hour:Q,minute:Q},Rk={year:Q,month:kr,day:Q,hour:Q,minute:Q,timeZoneName:oo},Pk={year:Q,month:kr,day:Q,hour:Q,minute:Q,second:Q,timeZoneName:oo},$k={year:Q,month:kr,day:Q,weekday:kr,hour:Q,minute:Q,timeZoneName:kr},Dk={year:Q,month:kr,day:Q,weekday:kr,hour:Q,minute:Q,second:Q,timeZoneName:kr};function Ve(e){return typeof e>"u"}function sc(e){return typeof e=="number"}function lw(e){return typeof e=="number"&&e%1===0}function ane(e){return typeof e=="string"}function lne(e){return Object.prototype.toString.call(e)==="[object Date]"}function Lk(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function une(e){return Array.isArray(e)?e:[e]}function mN(e,t,i){if(e.length!==0)return e.reduce(function(r,n){var o=[t(n),n];return r&&i(r[0],o[0])===r[0]?r:o},null)[1]}function cne(e,t){return t.reduce(function(i,r){return i[r]=e[r],i},{})}function mp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ks(e,t,i){return lw(e)&&e>=t&&e<=i}function dne(e,t){return e-t*Math.floor(e/t)}function Ft(e,t){t===void 0&&(t=2);var i=e<0,r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function Qa(e){if(!(Ve(e)||e===null||e===""))return parseInt(e,10)}function Ll(e){if(!(Ve(e)||e===null||e===""))return parseFloat(e)}function zx(e){if(!(Ve(e)||e===null||e==="")){var t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function Hx(e,t,i){i===void 0&&(i=!1);var r=Math.pow(10,t),n=i?Math.trunc:Math.round;return n(e*r)/r}function em(e){return e%4===0&&(e%100!==0||e%400===0)}function Bf(e){return em(e)?366:365}function F1(e,t){var i=dne(t-1,12)+1,r=e+(t-i)/12;return i===2?em(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Gx(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function B1(e){var t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||r===3?53:52}function dT(e){return e>99?e:e>60?1900+e:2e3+e}function Ok(e,t,i,r){r===void 0&&(r=null);var n=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);var s=ke({timeZoneName:t},o),a=new Intl.DateTimeFormat(i,s).formatToParts(n).find(function(u){return u.type.toLowerCase()==="timezonename"});return a?a.value:null}function uw(e,t){var i=parseInt(e,10);Number.isNaN(i)&&(i=0);var r=parseInt(t,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function kk(e){var t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new sn("Invalid unit value "+e);return t}function U1(e,t){var i={};for(var r in e)if(mp(e,r)){var n=e[r];if(n==null)continue;i[t(r)]=kk(n)}return i}function Uf(e,t){var i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return""+n+Ft(i,2)+":"+Ft(r,2);case"narrow":return""+n+i+(r>0?":"+r:"");case"techie":return""+n+Ft(i,2)+Ft(r,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function cw(e){return cne(e,["hour","minute","second","millisecond"])}var Fk=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,pne=["January","February","March","April","May","June","July","August","September","October","November","December"],Bk=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],hne=["J","F","M","A","M","J","J","A","S","O","N","D"];function Uk(e){switch(e){case"narrow":return[].concat(hne);case"short":return[].concat(Bk);case"long":return[].concat(pne);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Vk=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],jk=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],fne=["M","T","W","T","F","S","S"];function zk(e){switch(e){case"narrow":return[].concat(fne);case"short":return[].concat(jk);case"long":return[].concat(Vk);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Hk=["AM","PM"],yne=["Before Christ","Anno Domini"],mne=["BC","AD"],gne=["B","A"];function Gk(e){switch(e){case"narrow":return[].concat(gne);case"short":return[].concat(mne);case"long":return[].concat(yne);default:return null}}function vne(e){return Hk[e.hour<12?0:1]}function wne(e,t){return zk(t)[e.weekday-1]}function bne(e,t){return Uk(t)[e.month-1]}function _ne(e,t){return Gk(t)[e.year<0?0:1]}function Sne(e,t,i,r){i===void 0&&(i="always"),r===void 0&&(r=!1);var n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&o){var s=e==="days";switch(t){case 1:return s?"tomorrow":"next "+n[e][0];case-1:return s?"yesterday":"last "+n[e][0];case 0:return s?"today":"this "+n[e][0]}}var a=Object.is(t,-0)||t<0,u=Math.abs(t),d=u===1,h=n[e],f=r?d?h[1]:h[2]||h[1]:d?n[e][0]:e;return a?u+" "+f+" ago":"in "+u+" "+f}function gN(e,t){for(var i="",r=ml(e),n;!(n=r()).done;){var o=n.value;o.literal?i+=o.val:i+=t(o.val)}return i}var Tne={D:cT,DD:mk,DDD:gk,DDDD:vk,t:wk,tt:bk,ttt:_k,tttt:Sk,T:Tk,TT:Ek,TTT:Ak,TTTT:xk,f:Ck,ff:Mk,fff:Rk,ffff:$k,F:Ik,FF:Nk,FFF:Pk,FFFF:Dk},Fs=function(){e.create=function(r,n){return n===void 0&&(n={}),new e(r,n)},e.parseFormat=function(r){for(var n=null,o="",s=!1,a=[],u=0;u<r.length;u++){var d=r.charAt(u);d==="'"?(o.length>0&&a.push({literal:s,val:o}),n=null,o="",s=!s):s||d===n?o+=d:(o.length>0&&a.push({literal:!1,val:o}),o=d,n=d)}return o.length>0&&a.push({literal:s,val:o}),a},e.macroTokenToFormatOpts=function(r){return Tne[r]};function e(i,r){this.opts=r,this.loc=i,this.systemLoc=null}var t=e.prototype;return t.formatWithSystemDefault=function(r,n){this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem());var o=this.systemLoc.dtFormatter(r,ke({},this.opts,n));return o.format()},t.formatDateTime=function(r,n){n===void 0&&(n={});var o=this.loc.dtFormatter(r,ke({},this.opts,n));return o.format()},t.formatDateTimeParts=function(r,n){n===void 0&&(n={});var o=this.loc.dtFormatter(r,ke({},this.opts,n));return o.formatToParts()},t.resolvedOptions=function(r,n){n===void 0&&(n={});var o=this.loc.dtFormatter(r,ke({},this.opts,n));return o.resolvedOptions()},t.num=function(r,n){if(n===void 0&&(n=0),this.opts.forceSimple)return Ft(r,n);var o=ke({},this.opts);return n>0&&(o.padTo=n),this.loc.numberFormatter(o).format(r)},t.formatDateTimeFromString=function(r,n){var o=this,s=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",u=function(_,A){return o.loc.extract(r,_,A)},d=function(_){return r.isOffsetFixed&&r.offset===0&&_.allowZ?"Z":r.isValid?r.zone.formatOffset(r.ts,_.format):""},h=function(){return s?vne(r):u({hour:"numeric",hourCycle:"h12"},"dayperiod")},f=function(_,A){return s?bne(r,_):u(A?{month:_}:{month:_,day:"numeric"},"month")},y=function(_,A){return s?wne(r,_):u(A?{weekday:_}:{weekday:_,month:"long",day:"numeric"},"weekday")},m=function(_){var A=e.macroTokenToFormatOpts(_);return A?o.formatWithSystemDefault(r,A):_},g=function(_){return s?_ne(r,_):u({era:_},"era")},v=function(_){switch(_){case"S":return o.num(r.millisecond);case"u":case"SSS":return o.num(r.millisecond,3);case"s":return o.num(r.second);case"ss":return o.num(r.second,2);case"uu":return o.num(Math.floor(r.millisecond/10),2);case"uuu":return o.num(Math.floor(r.millisecond/100));case"m":return o.num(r.minute);case"mm":return o.num(r.minute,2);case"h":return o.num(r.hour%12===0?12:r.hour%12);case"hh":return o.num(r.hour%12===0?12:r.hour%12,2);case"H":return o.num(r.hour);case"HH":return o.num(r.hour,2);case"Z":return d({format:"narrow",allowZ:o.opts.allowZ});case"ZZ":return d({format:"short",allowZ:o.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:o.opts.allowZ});case"ZZZZ":return r.zone.offsetName(r.ts,{format:"short",locale:o.loc.locale});case"ZZZZZ":return r.zone.offsetName(r.ts,{format:"long",locale:o.loc.locale});case"z":return r.zoneName;case"a":return h();case"d":return a?u({day:"numeric"},"day"):o.num(r.day);case"dd":return a?u({day:"2-digit"},"day"):o.num(r.day,2);case"c":return o.num(r.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return o.num(r.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return a?u({month:"numeric",day:"numeric"},"month"):o.num(r.month);case"LL":return a?u({month:"2-digit",day:"numeric"},"month"):o.num(r.month,2);case"LLL":return f("short",!0);case"LLLL":return f("long",!0);case"LLLLL":return f("narrow",!0);case"M":return a?u({month:"numeric"},"month"):o.num(r.month);case"MM":return a?u({month:"2-digit"},"month"):o.num(r.month,2);case"MMM":return f("short",!1);case"MMMM":return f("long",!1);case"MMMMM":return f("narrow",!1);case"y":return a?u({year:"numeric"},"year"):o.num(r.year);case"yy":return a?u({year:"2-digit"},"year"):o.num(r.year.toString().slice(-2),2);case"yyyy":return a?u({year:"numeric"},"year"):o.num(r.year,4);case"yyyyyy":return a?u({year:"numeric"},"year"):o.num(r.year,6);case"G":return g("short");case"GG":return g("long");case"GGGGG":return g("narrow");case"kk":return o.num(r.weekYear.toString().slice(-2),2);case"kkkk":return o.num(r.weekYear,4);case"W":return o.num(r.weekNumber);case"WW":return o.num(r.weekNumber,2);case"o":return o.num(r.ordinal);case"ooo":return o.num(r.ordinal,3);case"q":return o.num(r.quarter);case"qq":return o.num(r.quarter,2);case"X":return o.num(Math.floor(r.ts/1e3));case"x":return o.num(r.ts);default:return m(_)}};return gN(e.parseFormat(n),v)},t.formatDurationFromString=function(r,n){var o=this,s=function(y){switch(y[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=function(y){return function(m){var g=s(m);return g?o.num(y.get(g),m.length):m}},u=e.parseFormat(n),d=u.reduce(function(f,y){var m=y.literal,g=y.val;return m?f:f.concat(g)},[]),h=r.shiftTo.apply(r,d.map(s).filter(function(f){return f}));return gN(u,a(h))},e}(),eo=function(){function e(i,r){this.reason=i,this.explanation=r}var t=e.prototype;return t.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},e}(),jp=function(){function e(){}var t=e.prototype;return t.offsetName=function(r,n){throw new da},t.formatOffset=function(r,n){throw new da},t.offset=function(r){throw new da},t.equals=function(r){throw new da},es(e,[{key:"type",get:function(){throw new da}},{key:"name",get:function(){throw new da}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new da}},{key:"isValid",get:function(){throw new da}}]),e}(),Eb=null,Wk=function(e){vn(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.offsetName=function(n,o){var s=o.format,a=o.locale;return Ok(n,s,a)},i.formatOffset=function(n,o){return Uf(this.offset(n),o)},i.offset=function(n){return-new Date(n).getTimezoneOffset()},i.equals=function(n){return n.type==="system"},es(t,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return Eb===null&&(Eb=new t),Eb}}]),t}(jp),lg={};function Ene(e){return lg[e]||(lg[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),lg[e]}var Ane={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function xne(e,t){var i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),n=r[1],o=r[2],s=r[3],a=r[4],u=r[5],d=r[6],h=r[7];return[s,n,o,a,u,d,h]}function Cne(e,t){for(var i=e.formatToParts(t),r=[],n=0;n<i.length;n++){var o=i[n],s=o.type,a=o.value,u=Ane[s];s==="era"?r[u]=a:Ve(u)||(r[u]=parseInt(a,10))}return r}var jm={},Pc=function(e){vn(t,e),t.create=function(n){return jm[n]||(jm[n]=new t(n)),jm[n]},t.resetCache=function(){jm={},lg={}},t.isValidSpecifier=function(n){return this.isValidZone(n)},t.isValidZone=function(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}};function t(r){var n;return n=e.call(this)||this,n.zoneName=r,n.valid=t.isValidZone(r),n}var i=t.prototype;return i.offsetName=function(n,o){var s=o.format,a=o.locale;return Ok(n,s,a,this.name)},i.formatOffset=function(n,o){return Uf(this.offset(n),o)},i.offset=function(n){var o=new Date(n);if(isNaN(o))return NaN;var s=Ene(this.name),a=s.formatToParts?Cne(s,o):xne(s,o),u=a[0],d=a[1],h=a[2],f=a[3],y=a[4],m=a[5],g=a[6];f==="BC"&&(u=-Math.abs(u)+1);var v=y===24?0:y,w=Gx({year:u,month:d,day:h,hour:v,minute:m,second:g,millisecond:0}),_=+o,A=_%1e3;return _-=A>=0?A:1e3+A,(w-_)/(60*1e3)},i.equals=function(n){return n.type==="iana"&&n.name===this.name},es(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(jp),Ab=null,ro=function(e){vn(t,e),t.instance=function(n){return n===0?t.utcInstance:new t(n)},t.parseSpecifier=function(n){if(n){var o=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(o)return new t(uw(o[1],o[2]))}return null};function t(r){var n;return n=e.call(this)||this,n.fixed=r,n}var i=t.prototype;return i.offsetName=function(){return this.name},i.formatOffset=function(n,o){return Uf(this.fixed,o)},i.offset=function(){return this.fixed},i.equals=function(n){return n.type==="fixed"&&n.fixed===this.fixed},es(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return this.fixed===0?"UTC":"UTC"+Uf(this.fixed,"narrow")}},{key:"ianaName",get:function(){return this.fixed===0?"Etc/UTC":"Etc/GMT"+Uf(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return Ab===null&&(Ab=new t(0)),Ab}}]),t}(jp),qk=function(e){vn(t,e);function t(r){var n;return n=e.call(this)||this,n.zoneName=r,n}var i=t.prototype;return i.offsetName=function(){return null},i.formatOffset=function(){return""},i.offset=function(){return NaN},i.equals=function(){return!1},es(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(jp);function rl(e,t){if(Ve(e)||e===null)return t;if(e instanceof jp)return e;if(ane(e)){var i=e.toLowerCase();return i==="local"||i==="system"?t:i==="utc"||i==="gmt"?ro.utcInstance:ro.parseSpecifier(i)||Pc.create(e)}else return sc(e)?ro.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new qk(e)}var vN=function(){return Date.now()},wN="system",bN=null,_N=null,SN=null,TN,kt=function(){function e(){}return e.resetCaches=function(){ti.resetCache(),Pc.resetCache()},es(e,null,[{key:"now",get:function(){return vN},set:function(i){vN=i}},{key:"defaultZone",get:function(){return rl(wN,Wk.instance)},set:function(i){wN=i}},{key:"defaultLocale",get:function(){return bN},set:function(i){bN=i}},{key:"defaultNumberingSystem",get:function(){return _N},set:function(i){_N=i}},{key:"defaultOutputCalendar",get:function(){return SN},set:function(i){SN=i}},{key:"throwOnInvalid",get:function(){return TN},set:function(i){TN=i}}]),e}(),Ine=["base"],Mne=["padTo","floor"],EN={};function Nne(e,t){t===void 0&&(t={});var i=JSON.stringify([e,t]),r=EN[i];return r||(r=new Intl.ListFormat(e,t),EN[i]=r),r}var pT={};function hT(e,t){t===void 0&&(t={});var i=JSON.stringify([e,t]),r=pT[i];return r||(r=new Intl.DateTimeFormat(e,t),pT[i]=r),r}var fT={};function Rne(e,t){t===void 0&&(t={});var i=JSON.stringify([e,t]),r=fT[i];return r||(r=new Intl.NumberFormat(e,t),fT[i]=r),r}var yT={};function Pne(e,t){t===void 0&&(t={});var i=t;i.base;var r=fk(i,Ine),n=JSON.stringify([e,r]),o=yT[n];return o||(o=new Intl.RelativeTimeFormat(e,t),yT[n]=o),o}var of=null;function $ne(){return of||(of=new Intl.DateTimeFormat().resolvedOptions().locale,of)}function Dne(e){var t=e.indexOf("-u-");if(t===-1)return[e];var i,r=e.substring(0,t);try{i=hT(e).resolvedOptions()}catch{i=hT(r).resolvedOptions()}var n=i,o=n.numberingSystem,s=n.calendar;return[r,o,s]}function Lne(e,t,i){return(i||t)&&(e+="-u",i&&(e+="-ca-"+i),t&&(e+="-nu-"+t)),e}function One(e){for(var t=[],i=1;i<=12;i++){var r=Ut.utc(2016,i,1);t.push(e(r))}return t}function kne(e){for(var t=[],i=1;i<=7;i++){var r=Ut.utc(2016,11,13+i);t.push(e(r))}return t}function zm(e,t,i,r,n){var o=e.listingMode(i);return o==="error"?null:o==="en"?r(t):n(t)}function Fne(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}var Bne=function(){function e(i,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1,n.padTo,n.floor;var o=fk(n,Mne);if(!r||Object.keys(o).length>0){var s=ke({useGrouping:!1},n);n.padTo>0&&(s.minimumIntegerDigits=n.padTo),this.inf=Rne(i,s)}}var t=e.prototype;return t.format=function(r){if(this.inf){var n=this.floor?Math.floor(r):r;return this.inf.format(n)}else{var o=this.floor?Math.floor(r):Hx(r,3);return Ft(o,this.padTo)}},e}(),Une=function(){function e(i,r,n){this.opts=n;var o;if(i.zone.isUniversal){var s=-1*(i.offset/60),a=s>=0?"Etc/GMT+"+s:"Etc/GMT"+s;i.offset!==0&&Pc.create(a).valid?(o=a,this.dt=i):(o="UTC",n.timeZoneName?this.dt=i:this.dt=i.offset===0?i:Ut.fromMillis(i.ts+i.offset*60*1e3))}else i.zone.type==="system"?this.dt=i:(this.dt=i,o=i.zone.name);var u=ke({},this.opts);o&&(u.timeZone=o),this.dtf=hT(r,u)}var t=e.prototype;return t.format=function(){return this.dtf.format(this.dt.toJSDate())},t.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},t.resolvedOptions=function(){return this.dtf.resolvedOptions()},e}(),Vne=function(){function e(i,r,n){this.opts=ke({style:"long"},n),!r&&Lk()&&(this.rtf=Pne(i,n))}var t=e.prototype;return t.format=function(r,n){return this.rtf?this.rtf.format(r,n):Sne(n,r,this.opts.numeric,this.opts.style!=="long")},t.formatToParts=function(r,n){return this.rtf?this.rtf.formatToParts(r,n):[]},e}(),ti=function(){e.fromOpts=function(r){return e.create(r.locale,r.numberingSystem,r.outputCalendar,r.defaultToEN)},e.create=function(r,n,o,s){s===void 0&&(s=!1);var a=r||kt.defaultLocale,u=a||(s?"en-US":$ne()),d=n||kt.defaultNumberingSystem,h=o||kt.defaultOutputCalendar;return new e(u,d,h,a)},e.resetCache=function(){of=null,pT={},fT={},yT={}},e.fromObject=function(r){var n=r===void 0?{}:r,o=n.locale,s=n.numberingSystem,a=n.outputCalendar;return e.create(o,s,a)};function e(i,r,n,o){var s=Dne(i),a=s[0],u=s[1],d=s[2];this.locale=a,this.numberingSystem=r||u||null,this.outputCalendar=n||d||null,this.intl=Lne(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}var t=e.prototype;return t.listingMode=function(){var r=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return r&&n?"en":"intl"},t.clone=function(r){return!r||Object.getOwnPropertyNames(r).length===0?this:e.create(r.locale||this.specifiedLocale,r.numberingSystem||this.numberingSystem,r.outputCalendar||this.outputCalendar,r.defaultToEN||!1)},t.redefaultToEN=function(r){return r===void 0&&(r={}),this.clone(ke({},r,{defaultToEN:!0}))},t.redefaultToSystem=function(r){return r===void 0&&(r={}),this.clone(ke({},r,{defaultToEN:!1}))},t.months=function(r,n,o){var s=this;return n===void 0&&(n=!1),o===void 0&&(o=!0),zm(this,r,o,Uk,function(){var a=n?{month:r,day:"numeric"}:{month:r},u=n?"format":"standalone";return s.monthsCache[u][r]||(s.monthsCache[u][r]=One(function(d){return s.extract(d,a,"month")})),s.monthsCache[u][r]})},t.weekdays=function(r,n,o){var s=this;return n===void 0&&(n=!1),o===void 0&&(o=!0),zm(this,r,o,zk,function(){var a=n?{weekday:r,year:"numeric",month:"long",day:"numeric"}:{weekday:r},u=n?"format":"standalone";return s.weekdaysCache[u][r]||(s.weekdaysCache[u][r]=kne(function(d){return s.extract(d,a,"weekday")})),s.weekdaysCache[u][r]})},t.meridiems=function(r){var n=this;return r===void 0&&(r=!0),zm(this,void 0,r,function(){return Hk},function(){if(!n.meridiemCache){var o={hour:"numeric",hourCycle:"h12"};n.meridiemCache=[Ut.utc(2016,11,13,9),Ut.utc(2016,11,13,19)].map(function(s){return n.extract(s,o,"dayperiod")})}return n.meridiemCache})},t.eras=function(r,n){var o=this;return n===void 0&&(n=!0),zm(this,r,n,Gk,function(){var s={era:r};return o.eraCache[r]||(o.eraCache[r]=[Ut.utc(-40,1,1),Ut.utc(2017,1,1)].map(function(a){return o.extract(a,s,"era")})),o.eraCache[r]})},t.extract=function(r,n,o){var s=this.dtFormatter(r,n),a=s.formatToParts(),u=a.find(function(d){return d.type.toLowerCase()===o});return u?u.value:null},t.numberFormatter=function(r){return r===void 0&&(r={}),new Bne(this.intl,r.forceSimple||this.fastNumbers,r)},t.dtFormatter=function(r,n){return n===void 0&&(n={}),new Une(r,this.intl,n)},t.relFormatter=function(r){return r===void 0&&(r={}),new Vne(this.intl,this.isEnglish(),r)},t.listFormatter=function(r){return r===void 0&&(r={}),Nne(this.intl,r)},t.isEnglish=function(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(r){return this.locale===r.locale&&this.numberingSystem===r.numberingSystem&&this.outputCalendar===r.outputCalendar},es(e,[{key:"fastNumbers",get:function(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Fne(this)),this.fastNumbersCached}}]),e}();function zp(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.reduce(function(n,o){return n+o.source},"");return RegExp("^"+r+"$")}function Hp(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(n,o){var s=n[0],a=n[1],u=n[2],d=o(r,u),h=d[0],f=d[1],y=d[2];return[ke({},s,h),f||a,y]},[{},null,1]).slice(0,2)}}function Gp(e){if(e==null)return[null,null];for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];for(var n=0,o=i;n<o.length;n++){var s=o[n],a=s[0],u=s[1],d=a.exec(e);if(d)return u(d)}return[null,null]}function Yk(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r,n){var o={},s;for(s=0;s<t.length;s++)o[t[s]]=Qa(r[n+s]);return[o,null,n+s]}}var Kk=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,jne="(?:"+Kk.source+"?(?:\\[("+Fk.source+")\\])?)?",Wx=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Zk=RegExp(""+Wx.source+jne),qx=RegExp("(?:T"+Zk.source+")?"),zne=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Hne=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Gne=/(\d{4})-?(\d{3})/,Wne=Yk("weekYear","weekNumber","weekDay"),qne=Yk("year","ordinal"),Yne=/(\d{4})-(\d\d)-(\d\d)/,Jk=RegExp(Wx.source+" ?(?:"+Kk.source+"|("+Fk.source+"))?"),Kne=RegExp("(?: "+Jk.source+")?");function Jd(e,t,i){var r=e[t];return Ve(r)?i:Qa(r)}function Zne(e,t){var i={year:Jd(e,t),month:Jd(e,t+1,1),day:Jd(e,t+2,1)};return[i,null,t+3]}function Wp(e,t){var i={hours:Jd(e,t,0),minutes:Jd(e,t+1,0),seconds:Jd(e,t+2,0),milliseconds:zx(e[t+3])};return[i,null,t+4]}function tm(e,t){var i=!e[t]&&!e[t+1],r=uw(e[t+1],e[t+2]),n=i?null:ro.instance(r);return[{},n,t+3]}function im(e,t){var i=e[t]?Pc.create(e[t]):null;return[{},i,t+1]}var Jne=RegExp("^T?"+Wx.source+"$"),Xne=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function Qne(e){var t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],s=e[5],a=e[6],u=e[7],d=e[8],h=t[0]==="-",f=u&&u[0]==="-",y=function(g,v){return v===void 0&&(v=!1),g!==void 0&&(v||g&&h)?-g:g};return[{years:y(Ll(i)),months:y(Ll(r)),weeks:y(Ll(n)),days:y(Ll(o)),hours:y(Ll(s)),minutes:y(Ll(a)),seconds:y(Ll(u),u==="-0"),milliseconds:y(zx(d),f)}]}var eoe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Yx(e,t,i,r,n,o,s){var a={year:t.length===2?dT(Qa(t)):Qa(t),month:Bk.indexOf(i)+1,day:Qa(r),hour:Qa(n),minute:Qa(o)};return s&&(a.second=Qa(s)),e&&(a.weekday=e.length>3?Vk.indexOf(e)+1:jk.indexOf(e)+1),a}var toe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function ioe(e){var t=e[1],i=e[2],r=e[3],n=e[4],o=e[5],s=e[6],a=e[7],u=e[8],d=e[9],h=e[10],f=e[11],y=Yx(t,n,r,i,o,s,a),m;return u?m=eoe[u]:d?m=0:m=uw(h,f),[y,new ro(m)]}function roe(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var noe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ooe=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,soe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function AN(e){var t=e[1],i=e[2],r=e[3],n=e[4],o=e[5],s=e[6],a=e[7],u=Yx(t,n,r,i,o,s,a);return[u,ro.utcInstance]}function aoe(e){var t=e[1],i=e[2],r=e[3],n=e[4],o=e[5],s=e[6],a=e[7],u=Yx(t,a,i,r,n,o,s);return[u,ro.utcInstance]}var loe=zp(zne,qx),uoe=zp(Hne,qx),coe=zp(Gne,qx),doe=zp(Zk),Xk=Hp(Zne,Wp,tm,im),poe=Hp(Wne,Wp,tm,im),hoe=Hp(qne,Wp,tm,im),foe=Hp(Wp,tm,im);function yoe(e){return Gp(e,[loe,Xk],[uoe,poe],[coe,hoe],[doe,foe])}function moe(e){return Gp(roe(e),[toe,ioe])}function goe(e){return Gp(e,[noe,AN],[ooe,AN],[soe,aoe])}function voe(e){return Gp(e,[Xne,Qne])}var woe=Hp(Wp);function boe(e){return Gp(e,[Jne,woe])}var _oe=zp(Yne,Kne),Soe=zp(Jk),Toe=Hp(Wp,tm,im);function Eoe(e){return Gp(e,[_oe,Xk],[Soe,Toe])}var Aoe="Invalid Duration",Qk={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},xoe=ke({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},Qk),zr=146097/400,Lc=146097/4800,Coe=ke({years:{quarters:4,months:12,weeks:zr/7,days:zr,hours:zr*24,minutes:zr*24*60,seconds:zr*24*60*60,milliseconds:zr*24*60*60*1e3},quarters:{months:3,weeks:zr/28,days:zr/4,hours:zr*24/4,minutes:zr*24*60/4,seconds:zr*24*60*60/4,milliseconds:zr*24*60*60*1e3/4},months:{weeks:Lc/7,days:Lc,hours:Lc*24,minutes:Lc*24*60,seconds:Lc*24*60*60,milliseconds:Lc*24*60*60*1e3}},Qk),lu=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Ioe=lu.slice(0).reverse();function Ol(e,t,i){i===void 0&&(i=!1);var r={values:i?t.values:ke({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new ui(r)}function Moe(e){return e<0?Math.floor(e):Math.ceil(e)}function e8(e,t,i,r,n){var o=e[n][i],s=t[i]/o,a=Math.sign(s)===Math.sign(r[n]),u=!a&&r[n]!==0&&Math.abs(s)<=1?Moe(s):Math.trunc(s);r[n]+=u,t[i]-=u*o}function Noe(e,t){Ioe.reduce(function(i,r){return Ve(t[r])?i:(i&&e8(e,t,i,t,r),r)},null)}var ui=function(){function e(i){var r=i.conversionAccuracy==="longterm"||!1;this.values=i.values,this.loc=i.loc||ti.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=i.invalid||null,this.matrix=r?Coe:xoe,this.isLuxonDuration=!0}e.fromMillis=function(r,n){return e.fromObject({milliseconds:r},n)},e.fromObject=function(r,n){if(n===void 0&&(n={}),r==null||typeof r!="object")throw new sn("Duration.fromObject: argument expected to be an object, got "+(r===null?"null":typeof r));return new e({values:U1(r,e.normalizeUnit),loc:ti.fromObject(n),conversionAccuracy:n.conversionAccuracy})},e.fromDurationLike=function(r){if(sc(r))return e.fromMillis(r);if(e.isDuration(r))return r;if(typeof r=="object")return e.fromObject(r);throw new sn("Unknown duration argument "+r+" of type "+typeof r)},e.fromISO=function(r,n){var o=voe(r),s=o[0];return s?e.fromObject(s,n):e.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},e.fromISOTime=function(r,n){var o=boe(r),s=o[0];return s?e.fromObject(s,n):e.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},e.invalid=function(r,n){if(n===void 0&&(n=null),!r)throw new sn("need to specify a reason the Duration is invalid");var o=r instanceof eo?r:new eo(r,n);if(kt.throwOnInvalid)throw new nne(o);return new e({invalid:o})},e.normalizeUnit=function(r){var n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[r&&r.toLowerCase()];if(!n)throw new yk(r);return n},e.isDuration=function(r){return r&&r.isLuxonDuration||!1};var t=e.prototype;return t.toFormat=function(r,n){n===void 0&&(n={});var o=ke({},n,{floor:n.round!==!1&&n.floor!==!1});return this.isValid?Fs.create(this.loc,o).formatDurationFromString(this,r):Aoe},t.toHuman=function(r){var n=this;r===void 0&&(r={});var o=lu.map(function(s){var a=n.values[s];return Ve(a)?null:n.loc.numberFormatter(ke({style:"unit",unitDisplay:"long"},r,{unit:s.slice(0,-1)})).format(a)}).filter(function(s){return s});return this.loc.listFormatter(ke({type:"conjunction",style:r.listStyle||"narrow"},r)).format(o)},t.toObject=function(){return this.isValid?ke({},this.values):{}},t.toISO=function(){if(!this.isValid)return null;var r="P";return this.years!==0&&(r+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(r+=this.months+this.quarters*3+"M"),this.weeks!==0&&(r+=this.weeks+"W"),this.days!==0&&(r+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(r+="T"),this.hours!==0&&(r+=this.hours+"H"),this.minutes!==0&&(r+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(r+=Hx(this.seconds+this.milliseconds/1e3,3)+"S"),r==="P"&&(r+="T0S"),r},t.toISOTime=function(r){if(r===void 0&&(r={}),!this.isValid)return null;var n=this.toMillis();if(n<0||n>=864e5)return null;r=ke({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},r);var o=this.shiftTo("hours","minutes","seconds","milliseconds"),s=r.format==="basic"?"hhmm":"hh:mm";(!r.suppressSeconds||o.seconds!==0||o.milliseconds!==0)&&(s+=r.format==="basic"?"ss":":ss",(!r.suppressMilliseconds||o.milliseconds!==0)&&(s+=".SSS"));var a=o.toFormat(s);return r.includePrefix&&(a="T"+a),a},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.toMillis=function(){return this.as("milliseconds")},t.valueOf=function(){return this.toMillis()},t.plus=function(r){if(!this.isValid)return this;for(var n=e.fromDurationLike(r),o={},s=ml(lu),a;!(a=s()).done;){var u=a.value;(mp(n.values,u)||mp(this.values,u))&&(o[u]=n.get(u)+this.get(u))}return Ol(this,{values:o},!0)},t.minus=function(r){if(!this.isValid)return this;var n=e.fromDurationLike(r);return this.plus(n.negate())},t.mapUnits=function(r){if(!this.isValid)return this;for(var n={},o=0,s=Object.keys(this.values);o<s.length;o++){var a=s[o];n[a]=kk(r(this.values[a],a))}return Ol(this,{values:n},!0)},t.get=function(r){return this[e.normalizeUnit(r)]},t.set=function(r){if(!this.isValid)return this;var n=ke({},this.values,U1(r,e.normalizeUnit));return Ol(this,{values:n})},t.reconfigure=function(r){var n=r===void 0?{}:r,o=n.locale,s=n.numberingSystem,a=n.conversionAccuracy,u=this.loc.clone({locale:o,numberingSystem:s}),d={loc:u};return a&&(d.conversionAccuracy=a),Ol(this,d)},t.as=function(r){return this.isValid?this.shiftTo(r).get(r):NaN},t.normalize=function(){if(!this.isValid)return this;var r=this.toObject();return Noe(this.matrix,r),Ol(this,{values:r},!0)},t.shiftTo=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(!this.isValid)return this;if(n.length===0)return this;n=n.map(function(A){return e.normalizeUnit(A)});for(var s={},a={},u=this.toObject(),d,h=ml(lu),f;!(f=h()).done;){var y=f.value;if(n.indexOf(y)>=0){d=y;var m=0;for(var g in a)m+=this.matrix[g][y]*a[g],a[g]=0;sc(u[y])&&(m+=u[y]);var v=Math.trunc(m);s[y]=v,a[y]=(m*1e3-v*1e3)/1e3;for(var w in u)lu.indexOf(w)>lu.indexOf(y)&&e8(this.matrix,u,w,s,y)}else sc(u[y])&&(a[y]=u[y])}for(var _ in a)a[_]!==0&&(s[d]+=_===d?a[_]:a[_]/this.matrix[d][_]);return Ol(this,{values:s},!0).normalize()},t.negate=function(){if(!this.isValid)return this;for(var r={},n=0,o=Object.keys(this.values);n<o.length;n++){var s=o[n];r[s]=this.values[s]===0?0:-this.values[s]}return Ol(this,{values:r},!0)},t.equals=function(r){if(!this.isValid||!r.isValid||!this.loc.equals(r.loc))return!1;function n(u,d){return u===void 0||u===0?d===void 0||d===0:u===d}for(var o=ml(lu),s;!(s=o()).done;){var a=s.value;if(!n(this.values[a],r.values[a]))return!1}return!0},es(e,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),dh="Invalid Interval";function Roe(e,t){return!e||!e.isValid?Vf.invalid("missing or invalid start"):!t||!t.isValid?Vf.invalid("missing or invalid end"):t<e?Vf.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO()):null}var Vf=function(){function e(i){this.s=i.start,this.e=i.end,this.invalid=i.invalid||null,this.isLuxonInterval=!0}e.invalid=function(r,n){if(n===void 0&&(n=null),!r)throw new sn("need to specify a reason the Interval is invalid");var o=r instanceof eo?r:new eo(r,n);if(kt.throwOnInvalid)throw new rne(o);return new e({invalid:o})},e.fromDateTimes=function(r,n){var o=fh(r),s=fh(n),a=Roe(o,s);return a==null?new e({start:o,end:s}):a},e.after=function(r,n){var o=ui.fromDurationLike(n),s=fh(r);return e.fromDateTimes(s,s.plus(o))},e.before=function(r,n){var o=ui.fromDurationLike(n),s=fh(r);return e.fromDateTimes(s.minus(o),s)},e.fromISO=function(r,n){var o=(r||"").split("/",2),s=o[0],a=o[1];if(s&&a){var u,d;try{u=Ut.fromISO(s,n),d=u.isValid}catch{d=!1}var h,f;try{h=Ut.fromISO(a,n),f=h.isValid}catch{f=!1}if(d&&f)return e.fromDateTimes(u,h);if(d){var y=ui.fromISO(a,n);if(y.isValid)return e.after(u,y)}else if(f){var m=ui.fromISO(s,n);if(m.isValid)return e.before(h,m)}}return e.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},e.isInterval=function(r){return r&&r.isLuxonInterval||!1};var t=e.prototype;return t.length=function(r){return r===void 0&&(r="milliseconds"),this.isValid?this.toDuration.apply(this,[r]).get(r):NaN},t.count=function(r){if(r===void 0&&(r="milliseconds"),!this.isValid)return NaN;var n=this.start.startOf(r),o=this.end.startOf(r);return Math.floor(o.diff(n,r).get(r))+1},t.hasSame=function(r){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,r):!1},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(r){return this.isValid?this.s>r:!1},t.isBefore=function(r){return this.isValid?this.e<=r:!1},t.contains=function(r){return this.isValid?this.s<=r&&this.e>r:!1},t.set=function(r){var n=r===void 0?{}:r,o=n.start,s=n.end;return this.isValid?e.fromDateTimes(o||this.s,s||this.e):this},t.splitAt=function(){var r=this;if(!this.isValid)return[];for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];for(var a=o.map(fh).filter(function(m){return r.contains(m)}).sort(),u=[],d=this.s,h=0;d<this.e;){var f=a[h]||this.e,y=+f>+this.e?this.e:f;u.push(e.fromDateTimes(d,y)),d=y,h+=1}return u},t.splitBy=function(r){var n=ui.fromDurationLike(r);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];for(var o=this.s,s=1,a,u=[];o<this.e;){var d=this.start.plus(n.mapUnits(function(h){return h*s}));a=+d>+this.e?this.e:d,u.push(e.fromDateTimes(o,a)),o=a,s+=1}return u},t.divideEqually=function(r){return this.isValid?this.splitBy(this.length()/r).slice(0,r):[]},t.overlaps=function(r){return this.e>r.s&&this.s<r.e},t.abutsStart=function(r){return this.isValid?+this.e==+r.s:!1},t.abutsEnd=function(r){return this.isValid?+r.e==+this.s:!1},t.engulfs=function(r){return this.isValid?this.s<=r.s&&this.e>=r.e:!1},t.equals=function(r){return!this.isValid||!r.isValid?!1:this.s.equals(r.s)&&this.e.equals(r.e)},t.intersection=function(r){if(!this.isValid)return this;var n=this.s>r.s?this.s:r.s,o=this.e<r.e?this.e:r.e;return n>=o?null:e.fromDateTimes(n,o)},t.union=function(r){if(!this.isValid)return this;var n=this.s<r.s?this.s:r.s,o=this.e>r.e?this.e:r.e;return e.fromDateTimes(n,o)},e.merge=function(r){var n=r.sort(function(a,u){return a.s-u.s}).reduce(function(a,u){var d=a[0],h=a[1];return h?h.overlaps(u)||h.abutsStart(u)?[d,h.union(u)]:[d.concat([h]),u]:[d,u]},[[],null]),o=n[0],s=n[1];return s&&o.push(s),o},e.xor=function(r){for(var n,o=null,s=0,a=[],u=r.map(function(g){return[{time:g.s,type:"s"},{time:g.e,type:"e"}]}),d=(n=Array.prototype).concat.apply(n,u),h=d.sort(function(g,v){return g.time-v.time}),f=ml(h),y;!(y=f()).done;){var m=y.value;s+=m.type==="s"?1:-1,s===1?o=m.time:(o&&+o!=+m.time&&a.push(e.fromDateTimes(o,m.time)),o=null)}return e.merge(a)},t.difference=function(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e.xor([this].concat(o)).map(function(a){return r.intersection(a)}).filter(function(a){return a&&!a.isEmpty()})},t.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":dh},t.toISO=function(r){return this.isValid?this.s.toISO(r)+"/"+this.e.toISO(r):dh},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():dh},t.toISOTime=function(r){return this.isValid?this.s.toISOTime(r)+"/"+this.e.toISOTime(r):dh},t.toFormat=function(r,n){var o=n===void 0?{}:n,s=o.separator,a=s===void 0?" \u2013 ":s;return this.isValid?""+this.s.toFormat(r)+a+this.e.toFormat(r):dh},t.toDuration=function(r,n){return this.isValid?this.e.diff(this.s,r,n):ui.invalid(this.invalidReason)},t.mapEndpoints=function(r){return e.fromDateTimes(r(this.s),r(this.e))},es(e,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return this.invalidReason===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),sf=function(){function e(){}return e.hasDST=function(i){i===void 0&&(i=kt.defaultZone);var r=Ut.now().setZone(i).set({month:12});return!i.isUniversal&&r.offset!==r.set({month:6}).offset},e.isValidIANAZone=function(i){return Pc.isValidZone(i)},e.normalizeZone=function(i){return rl(i,kt.defaultZone)},e.months=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o,a=n.numberingSystem,u=a===void 0?null:a,d=n.locObj,h=d===void 0?null:d,f=n.outputCalendar,y=f===void 0?"gregory":f;return(h||ti.create(s,u,y)).months(i)},e.monthsFormat=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o,a=n.numberingSystem,u=a===void 0?null:a,d=n.locObj,h=d===void 0?null:d,f=n.outputCalendar,y=f===void 0?"gregory":f;return(h||ti.create(s,u,y)).months(i,!0)},e.weekdays=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o,a=n.numberingSystem,u=a===void 0?null:a,d=n.locObj,h=d===void 0?null:d;return(h||ti.create(s,u,null)).weekdays(i)},e.weekdaysFormat=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o,a=n.numberingSystem,u=a===void 0?null:a,d=n.locObj,h=d===void 0?null:d;return(h||ti.create(s,u,null)).weekdays(i,!0)},e.meridiems=function(i){var r=i===void 0?{}:i,n=r.locale,o=n===void 0?null:n;return ti.create(o).meridiems()},e.eras=function(i,r){i===void 0&&(i="short");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o;return ti.create(s,null,"gregory").eras(i)},e.features=function(){return{relative:Lk()}},e}();function xN(e,t){var i=function(o){return o.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},r=i(t)-i(e);return Math.floor(ui.fromMillis(r).as("days"))}function Poe(e,t,i){for(var r=[["years",function(v,w){return w.year-v.year}],["quarters",function(v,w){return w.quarter-v.quarter}],["months",function(v,w){return w.month-v.month+(w.year-v.year)*12}],["weeks",function(v,w){var _=xN(v,w);return(_-_%7)/7}],["days",xN]],n={},o,s,a=0,u=r;a<u.length;a++){var d=u[a],h=d[0],f=d[1];if(i.indexOf(h)>=0){var y;o=h;var m=f(e,t);if(s=e.plus((y={},y[h]=m,y)),s>t){var g;e=e.plus((g={},g[h]=m-1,g)),m-=1}else e=s;n[h]=m}}return[e,n,s,o]}function $oe(e,t,i,r){var n=Poe(e,t,i),o=n[0],s=n[1],a=n[2],u=n[3],d=t-o,h=i.filter(function(g){return["hours","minutes","seconds","milliseconds"].indexOf(g)>=0});if(h.length===0){if(a<t){var f;a=o.plus((f={},f[u]=1,f))}a!==o&&(s[u]=(s[u]||0)+d/(a-o))}var y=ui.fromObject(s,r);if(h.length>0){var m;return(m=ui.fromMillis(d,r)).shiftTo.apply(m,h).plus(y)}else return y}var Kx={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},CN={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Doe=Kx.hanidec.replace(/[\[|\]]/g,"").split("");function Loe(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var i=0;i<e.length;i++){var r=e.charCodeAt(i);if(e[i].search(Kx.hanidec)!==-1)t+=Doe.indexOf(e[i]);else for(var n in CN){var o=CN[n],s=o[0],a=o[1];r>=s&&r<=a&&(t+=r-s)}}return parseInt(t,10)}else return t}function Tn(e,t){var i=e.numberingSystem;return t===void 0&&(t=""),new RegExp(""+Kx[i||"latn"]+t)}var Ooe="missing Intl.DateTimeFormat.formatToParts support";function We(e,t){return t===void 0&&(t=function(r){return r}),{regex:e,deser:function(r){var n=r[0];return t(Loe(n))}}}var koe=String.fromCharCode(160),t8="[ "+koe+"]",i8=new RegExp(t8,"g");function Foe(e){return e.replace(/\./g,"\\.?").replace(i8,t8)}function IN(e){return e.replace(/\./g,"").replace(i8," ").toLowerCase()}function En(e,t){return e===null?null:{regex:RegExp(e.map(Foe).join("|")),deser:function(r){var n=r[0];return e.findIndex(function(o){return IN(n)===IN(o)})+t}}}function MN(e,t){return{regex:e,deser:function(r){var n=r[1],o=r[2];return uw(n,o)},groups:t}}function xb(e){return{regex:e,deser:function(i){var r=i[0];return r}}}function Boe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Uoe(e,t){var i=Tn(t),r=Tn(t,"{2}"),n=Tn(t,"{3}"),o=Tn(t,"{4}"),s=Tn(t,"{6}"),a=Tn(t,"{1,2}"),u=Tn(t,"{1,3}"),d=Tn(t,"{1,6}"),h=Tn(t,"{1,9}"),f=Tn(t,"{2,4}"),y=Tn(t,"{4,6}"),m=function(_){return{regex:RegExp(Boe(_.val)),deser:function(M){var $=M[0];return $},literal:!0}},g=function(_){if(e.literal)return m(_);switch(_.val){case"G":return En(t.eras("short",!1),0);case"GG":return En(t.eras("long",!1),0);case"y":return We(d);case"yy":return We(f,dT);case"yyyy":return We(o);case"yyyyy":return We(y);case"yyyyyy":return We(s);case"M":return We(a);case"MM":return We(r);case"MMM":return En(t.months("short",!0,!1),1);case"MMMM":return En(t.months("long",!0,!1),1);case"L":return We(a);case"LL":return We(r);case"LLL":return En(t.months("short",!1,!1),1);case"LLLL":return En(t.months("long",!1,!1),1);case"d":return We(a);case"dd":return We(r);case"o":return We(u);case"ooo":return We(n);case"HH":return We(r);case"H":return We(a);case"hh":return We(r);case"h":return We(a);case"mm":return We(r);case"m":return We(a);case"q":return We(a);case"qq":return We(r);case"s":return We(a);case"ss":return We(r);case"S":return We(u);case"SSS":return We(n);case"u":return xb(h);case"uu":return xb(a);case"uuu":return We(i);case"a":return En(t.meridiems(),0);case"kkkk":return We(o);case"kk":return We(f,dT);case"W":return We(a);case"WW":return We(r);case"E":case"c":return We(i);case"EEE":return En(t.weekdays("short",!1,!1),1);case"EEEE":return En(t.weekdays("long",!1,!1),1);case"ccc":return En(t.weekdays("short",!0,!1),1);case"cccc":return En(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return MN(new RegExp("([+-]"+a.source+")(?::("+r.source+"))?"),2);case"ZZZ":return MN(new RegExp("([+-]"+a.source+")("+r.source+")?"),2);case"z":return xb(/[a-z_+-/]{1,256}?/i);default:return m(_)}},v=g(e)||{invalidReason:Ooe};return v.token=e,v}var Voe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function joe(e,t,i){var r=e.type,n=e.value;if(r==="literal")return{literal:!0,val:n};var o=i[r],s=Voe[r];if(typeof s=="object"&&(s=s[o]),s)return{literal:!1,val:s}}function zoe(e){var t=e.map(function(i){return i.regex}).reduce(function(i,r){return i+"("+r.source+")"},"");return["^"+t+"$",e]}function Hoe(e,t,i){var r=e.match(t);if(r){var n={},o=1;for(var s in i)if(mp(i,s)){var a=i[s],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(o,o+u))),o+=u}return[r,n]}else return[r,{}]}function Goe(e){var t=function(s){switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},i=null,r;Ve(e.z)||(i=Pc.create(e.z)),Ve(e.Z)||(i||(i=new ro(e.Z)),r=e.Z),Ve(e.q)||(e.M=(e.q-1)*3+1),Ve(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ve(e.u)||(e.S=zx(e.u));var n=Object.keys(e).reduce(function(o,s){var a=t(s);return a&&(o[a]=e[s]),o},{});return[n,i,r]}var Cb=null;function Woe(){return Cb||(Cb=Ut.fromMillis(1555555555555)),Cb}function qoe(e,t){if(e.literal)return e;var i=Fs.macroTokenToFormatOpts(e.val);if(!i)return e;var r=Fs.create(t,i),n=r.formatDateTimeParts(Woe()),o=n.map(function(s){return joe(s,t,i)});return o.includes(void 0)?e:o}function Yoe(e,t){var i;return(i=Array.prototype).concat.apply(i,e.map(function(r){return qoe(r,t)}))}function r8(e,t,i){var r=Yoe(Fs.parseFormat(i),e),n=r.map(function(_){return Uoe(_,e)}),o=n.find(function(_){return _.invalidReason});if(o)return{input:t,tokens:r,invalidReason:o.invalidReason};var s=zoe(n),a=s[0],u=s[1],d=RegExp(a,"i"),h=Hoe(t,d,u),f=h[0],y=h[1],m=y?Goe(y):[null,null,void 0],g=m[0],v=m[1],w=m[2];if(mp(y,"a")&&mp(y,"H"))throw new nf("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:d,rawMatches:f,matches:y,result:g,zone:v,specificOffset:w}}function Koe(e,t,i){var r=r8(e,t,i),n=r.result,o=r.zone,s=r.specificOffset,a=r.invalidReason;return[n,o,s,a]}var n8=[0,31,59,90,120,151,181,212,243,273,304,334],o8=[0,31,60,91,121,152,182,213,244,274,305,335];function an(e,t){return new eo("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function s8(e,t,i){var r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);var n=r.getUTCDay();return n===0?7:n}function a8(e,t,i){return i+(em(e)?o8:n8)[t-1]}function l8(e,t){var i=em(e)?o8:n8,r=i.findIndex(function(o){return o<t}),n=t-i[r];return{month:r+1,day:n}}function mT(e){var t=e.year,i=e.month,r=e.day,n=a8(t,i,r),o=s8(t,i,r),s=Math.floor((n-o+10)/7),a;return s<1?(a=t-1,s=B1(a)):s>B1(t)?(a=t+1,s=1):a=t,ke({weekYear:a,weekNumber:s,weekday:o},cw(e))}function NN(e){var t=e.weekYear,i=e.weekNumber,r=e.weekday,n=s8(t,1,4),o=Bf(t),s=i*7+r-n-3,a;s<1?(a=t-1,s+=Bf(a)):s>o?(a=t+1,s-=Bf(t)):a=t;var u=l8(a,s),d=u.month,h=u.day;return ke({year:a,month:d,day:h},cw(e))}function Ib(e){var t=e.year,i=e.month,r=e.day,n=a8(t,i,r);return ke({year:t,ordinal:n},cw(e))}function RN(e){var t=e.year,i=e.ordinal,r=l8(t,i),n=r.month,o=r.day;return ke({year:t,month:n,day:o},cw(e))}function Zoe(e){var t=lw(e.weekYear),i=ks(e.weekNumber,1,B1(e.weekYear)),r=ks(e.weekday,1,7);return t?i?r?!1:an("weekday",e.weekday):an("week",e.week):an("weekYear",e.weekYear)}function Joe(e){var t=lw(e.year),i=ks(e.ordinal,1,Bf(e.year));return t?i?!1:an("ordinal",e.ordinal):an("year",e.year)}function u8(e){var t=lw(e.year),i=ks(e.month,1,12),r=ks(e.day,1,F1(e.year,e.month));return t?i?r?!1:an("day",e.day):an("month",e.month):an("year",e.year)}function c8(e){var t=e.hour,i=e.minute,r=e.second,n=e.millisecond,o=ks(t,0,23)||t===24&&i===0&&r===0&&n===0,s=ks(i,0,59),a=ks(r,0,59),u=ks(n,0,999);return o?s?a?u?!1:an("millisecond",n):an("second",r):an("minute",i):an("hour",t)}var Mb="Invalid DateTime",PN=864e13;function Hm(e){return new eo("unsupported zone",'the zone "'+e.name+'" is not supported')}function Nb(e){return e.weekData===null&&(e.weekData=mT(e.c)),e.weekData}function ph(e,t){var i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ut(ke({},i,t,{old:i}))}function d8(e,t,i){var r=e-t*60*1e3,n=i.offset(r);if(t===n)return[r,t];r-=(n-t)*60*1e3;var o=i.offset(r);return n===o?[r,n]:[e-Math.min(n,o)*60*1e3,Math.max(n,o)]}function $N(e,t){e+=t*60*1e3;var i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function ug(e,t,i){return d8(Gx(e),t,i)}function DN(e,t){var i=e.o,r=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o=ke({},e.c,{year:r,month:n,day:Math.min(e.c.day,F1(r,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7}),s=ui.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Gx(o),u=d8(a,i,e.zone),d=u[0],h=u[1];return s!==0&&(d+=s,h=e.zone.offset(d)),{ts:d,o:h}}function hh(e,t,i,r,n,o){var s=i.setZone,a=i.zone;if(e&&Object.keys(e).length!==0){var u=t||a,d=Ut.fromObject(e,ke({},i,{zone:u,specificOffset:o}));return s?d:d.setZone(a)}else return Ut.invalid(new eo("unparsable",'the input "'+n+`" can't be parsed as `+r))}function Gm(e,t,i){return i===void 0&&(i=!0),e.isValid?Fs.create(ti.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Rb(e,t){var i=e.c.year>9999||e.c.year<0,r="";return i&&e.c.year>=0&&(r+="+"),r+=Ft(e.c.year,i?6:4),t?(r+="-",r+=Ft(e.c.month),r+="-",r+=Ft(e.c.day)):(r+=Ft(e.c.month),r+=Ft(e.c.day)),r}function LN(e,t,i,r,n,o){var s=Ft(e.c.hour);return t?(s+=":",s+=Ft(e.c.minute),(e.c.second!==0||!i)&&(s+=":")):s+=Ft(e.c.minute),(e.c.second!==0||!i)&&(s+=Ft(e.c.second),(e.c.millisecond!==0||!r)&&(s+=".",s+=Ft(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!o?s+="Z":e.o<0?(s+="-",s+=Ft(Math.trunc(-e.o/60)),s+=":",s+=Ft(Math.trunc(-e.o%60))):(s+="+",s+=Ft(Math.trunc(e.o/60)),s+=":",s+=Ft(Math.trunc(e.o%60)))),o&&(s+="["+e.zone.ianaName+"]"),s}var p8={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Xoe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Qoe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},h8=["year","month","day","hour","minute","second","millisecond"],ese=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],tse=["year","ordinal","hour","minute","second","millisecond"];function ON(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new yk(e);return t}function kN(e,t){var i=rl(t.zone,kt.defaultZone),r=ti.fromObject(t),n=kt.now(),o,s;if(Ve(e.year))o=n;else{for(var a=ml(h8),u;!(u=a()).done;){var d=u.value;Ve(e[d])&&(e[d]=p8[d])}var h=u8(e)||c8(e);if(h)return Ut.invalid(h);var f=i.offset(n),y=ug(e,f,i);o=y[0],s=y[1]}return new Ut({ts:o,zone:i,loc:r,o:s})}function FN(e,t,i){var r=Ve(i.round)?!0:i.round,n=function(f,y){f=Hx(f,r||i.calendary?0:2,!0);var m=t.loc.clone(i).relFormatter(i);return m.format(f,y)},o=function(f){return i.calendary?t.hasSame(e,f)?0:t.startOf(f).diff(e.startOf(f),f).get(f):t.diff(e,f).get(f)};if(i.unit)return n(o(i.unit),i.unit);for(var s=ml(i.units),a;!(a=s()).done;){var u=a.value,d=o(u);if(Math.abs(d)>=1)return n(d,u)}return n(e>t?-0:0,i.units[i.units.length-1])}function BN(e){var t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}var Ut=function(){function e(i){var r=i.zone||kt.defaultZone,n=i.invalid||(Number.isNaN(i.ts)?new eo("invalid input"):null)||(r.isValid?null:Hm(r));this.ts=Ve(i.ts)?kt.now():i.ts;var o=null,s=null;if(!n){var a=i.old&&i.old.ts===this.ts&&i.old.zone.equals(r);if(a){var u=[i.old.c,i.old.o];o=u[0],s=u[1]}else{var d=r.offset(this.ts);o=$N(this.ts,d),n=Number.isNaN(o.year)?new eo("invalid input"):null,o=n?null:o,s=n?null:d}}this._zone=r,this.loc=i.loc||ti.create(),this.invalid=n,this.weekData=null,this.c=o,this.o=s,this.isLuxonDateTime=!0}e.now=function(){return new e({})},e.local=function(){var r=BN(arguments),n=r[0],o=r[1],s=o[0],a=o[1],u=o[2],d=o[3],h=o[4],f=o[5],y=o[6];return kN({year:s,month:a,day:u,hour:d,minute:h,second:f,millisecond:y},n)},e.utc=function(){var r=BN(arguments),n=r[0],o=r[1],s=o[0],a=o[1],u=o[2],d=o[3],h=o[4],f=o[5],y=o[6];return n.zone=ro.utcInstance,kN({year:s,month:a,day:u,hour:d,minute:h,second:f,millisecond:y},n)},e.fromJSDate=function(r,n){n===void 0&&(n={});var o=lne(r)?r.valueOf():NaN;if(Number.isNaN(o))return e.invalid("invalid input");var s=rl(n.zone,kt.defaultZone);return s.isValid?new e({ts:o,zone:s,loc:ti.fromObject(n)}):e.invalid(Hm(s))},e.fromMillis=function(r,n){if(n===void 0&&(n={}),sc(r))return r<-PN||r>PN?e.invalid("Timestamp out of range"):new e({ts:r,zone:rl(n.zone,kt.defaultZone),loc:ti.fromObject(n)});throw new sn("fromMillis requires a numerical input, but received a "+typeof r+" with value "+r)},e.fromSeconds=function(r,n){if(n===void 0&&(n={}),sc(r))return new e({ts:r*1e3,zone:rl(n.zone,kt.defaultZone),loc:ti.fromObject(n)});throw new sn("fromSeconds requires a numerical input")},e.fromObject=function(r,n){n===void 0&&(n={}),r=r||{};var o=rl(n.zone,kt.defaultZone);if(!o.isValid)return e.invalid(Hm(o));var s=kt.now(),a=Ve(n.specificOffset)?o.offset(s):n.specificOffset,u=U1(r,ON),d=!Ve(u.ordinal),h=!Ve(u.year),f=!Ve(u.month)||!Ve(u.day),y=h||f,m=u.weekYear||u.weekNumber,g=ti.fromObject(n);if((y||d)&&m)throw new nf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&d)throw new nf("Can't mix ordinal dates with month/day");var v=m||u.weekday&&!y,w,_,A=$N(s,a);v?(w=ese,_=Xoe,A=mT(A)):d?(w=tse,_=Qoe,A=Ib(A)):(w=h8,_=p8);for(var M=!1,$=ml(w),N;!(N=$()).done;){var D=N.value,V=u[D];Ve(V)?M?u[D]=_[D]:u[D]=A[D]:M=!0}var G=v?Zoe(u):d?Joe(u):u8(u),Z=G||c8(u);if(Z)return e.invalid(Z);var ee=v?NN(u):d?RN(u):u,re=ug(ee,a,o),ue=re[0],ge=re[1],ne=new e({ts:ue,zone:o,o:ge,loc:g});return u.weekday&&y&&r.weekday!==ne.weekday?e.invalid("mismatched weekday","you can't specify both a weekday of "+u.weekday+" and a date of "+ne.toISO()):ne},e.fromISO=function(r,n){n===void 0&&(n={});var o=yoe(r),s=o[0],a=o[1];return hh(s,a,n,"ISO 8601",r)},e.fromRFC2822=function(r,n){n===void 0&&(n={});var o=moe(r),s=o[0],a=o[1];return hh(s,a,n,"RFC 2822",r)},e.fromHTTP=function(r,n){n===void 0&&(n={});var o=goe(r),s=o[0],a=o[1];return hh(s,a,n,"HTTP",n)},e.fromFormat=function(r,n,o){if(o===void 0&&(o={}),Ve(r)||Ve(n))throw new sn("fromFormat requires an input string and a format");var s=o,a=s.locale,u=a===void 0?null:a,d=s.numberingSystem,h=d===void 0?null:d,f=ti.fromOpts({locale:u,numberingSystem:h,defaultToEN:!0}),y=Koe(f,r,n),m=y[0],g=y[1],v=y[2],w=y[3];return w?e.invalid(w):hh(m,g,o,"format "+n,r,v)},e.fromString=function(r,n,o){return o===void 0&&(o={}),e.fromFormat(r,n,o)},e.fromSQL=function(r,n){n===void 0&&(n={});var o=Eoe(r),s=o[0],a=o[1];return hh(s,a,n,"SQL",r)},e.invalid=function(r,n){if(n===void 0&&(n=null),!r)throw new sn("need to specify a reason the DateTime is invalid");var o=r instanceof eo?r:new eo(r,n);if(kt.throwOnInvalid)throw new ine(o);return new e({invalid:o})},e.isDateTime=function(r){return r&&r.isLuxonDateTime||!1};var t=e.prototype;return t.get=function(r){return this[r]},t.resolvedLocaleOptions=function(r){r===void 0&&(r={});var n=Fs.create(this.loc.clone(r),r).resolvedOptions(this),o=n.locale,s=n.numberingSystem,a=n.calendar;return{locale:o,numberingSystem:s,outputCalendar:a}},t.toUTC=function(r,n){return r===void 0&&(r=0),n===void 0&&(n={}),this.setZone(ro.instance(r),n)},t.toLocal=function(){return this.setZone(kt.defaultZone)},t.setZone=function(r,n){var o=n===void 0?{}:n,s=o.keepLocalTime,a=s===void 0?!1:s,u=o.keepCalendarTime,d=u===void 0?!1:u;if(r=rl(r,kt.defaultZone),r.equals(this.zone))return this;if(r.isValid){var h=this.ts;if(a||d){var f=r.offset(this.ts),y=this.toObject(),m=ug(y,f,r);h=m[0]}return ph(this,{ts:h,zone:r})}else return e.invalid(Hm(r))},t.reconfigure=function(r){var n=r===void 0?{}:r,o=n.locale,s=n.numberingSystem,a=n.outputCalendar,u=this.loc.clone({locale:o,numberingSystem:s,outputCalendar:a});return ph(this,{loc:u})},t.setLocale=function(r){return this.reconfigure({locale:r})},t.set=function(r){if(!this.isValid)return this;var n=U1(r,ON),o=!Ve(n.weekYear)||!Ve(n.weekNumber)||!Ve(n.weekday),s=!Ve(n.ordinal),a=!Ve(n.year),u=!Ve(n.month)||!Ve(n.day),d=a||u,h=n.weekYear||n.weekNumber;if((d||s)&&h)throw new nf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&s)throw new nf("Can't mix ordinal dates with month/day");var f;o?f=NN(ke({},mT(this.c),n)):Ve(n.ordinal)?(f=ke({},this.toObject(),n),Ve(n.day)&&(f.day=Math.min(F1(f.year,f.month),f.day))):f=RN(ke({},Ib(this.c),n));var y=ug(f,this.o,this.zone),m=y[0],g=y[1];return ph(this,{ts:m,o:g})},t.plus=function(r){if(!this.isValid)return this;var n=ui.fromDurationLike(r);return ph(this,DN(this,n))},t.minus=function(r){if(!this.isValid)return this;var n=ui.fromDurationLike(r).negate();return ph(this,DN(this,n))},t.startOf=function(r){if(!this.isValid)return this;var n={},o=ui.normalizeUnit(r);switch(o){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(o==="weeks"&&(n.weekday=1),o==="quarters"){var s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)},t.endOf=function(r){var n;return this.isValid?this.plus((n={},n[r]=1,n)).startOf(r).minus(1):this},t.toFormat=function(r,n){return n===void 0&&(n={}),this.isValid?Fs.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,r):Mb},t.toLocaleString=function(r,n){return r===void 0&&(r=cT),n===void 0&&(n={}),this.isValid?Fs.create(this.loc.clone(n),r).formatDateTime(this):Mb},t.toLocaleParts=function(r){return r===void 0&&(r={}),this.isValid?Fs.create(this.loc.clone(r),r).formatDateTimeParts(this):[]},t.toISO=function(r){var n=r===void 0?{}:r,o=n.format,s=o===void 0?"extended":o,a=n.suppressSeconds,u=a===void 0?!1:a,d=n.suppressMilliseconds,h=d===void 0?!1:d,f=n.includeOffset,y=f===void 0?!0:f,m=n.extendedZone,g=m===void 0?!1:m;if(!this.isValid)return null;var v=s==="extended",w=Rb(this,v);return w+="T",w+=LN(this,v,u,h,y,g),w},t.toISODate=function(r){var n=r===void 0?{}:r,o=n.format,s=o===void 0?"extended":o;return this.isValid?Rb(this,s==="extended"):null},t.toISOWeekDate=function(){return Gm(this,"kkkk-'W'WW-c")},t.toISOTime=function(r){var n=r===void 0?{}:r,o=n.suppressMilliseconds,s=o===void 0?!1:o,a=n.suppressSeconds,u=a===void 0?!1:a,d=n.includeOffset,h=d===void 0?!0:d,f=n.includePrefix,y=f===void 0?!1:f,m=n.extendedZone,g=m===void 0?!1:m,v=n.format,w=v===void 0?"extended":v;if(!this.isValid)return null;var _=y?"T":"";return _+LN(this,w==="extended",u,s,h,g)},t.toRFC2822=function(){return Gm(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},t.toHTTP=function(){return Gm(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return this.isValid?Rb(this,!0):null},t.toSQLTime=function(r){var n=r===void 0?{}:r,o=n.includeOffset,s=o===void 0?!0:o,a=n.includeZone,u=a===void 0?!1:a,d=n.includeOffsetSpace,h=d===void 0?!0:d,f="HH:mm:ss.SSS";return(u||s)&&(h&&(f+=" "),u?f+="z":s&&(f+="ZZ")),Gm(this,f,!0)},t.toSQL=function(r){return r===void 0&&(r={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(r):null},t.toString=function(){return this.isValid?this.toISO():Mb},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1e3):NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(r){if(r===void 0&&(r={}),!this.isValid)return{};var n=ke({},this.c);return r.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(r,n,o){if(n===void 0&&(n="milliseconds"),o===void 0&&(o={}),!this.isValid||!r.isValid)return ui.invalid("created by diffing an invalid DateTime");var s=ke({locale:this.locale,numberingSystem:this.numberingSystem},o),a=une(n).map(ui.normalizeUnit),u=r.valueOf()>this.valueOf(),d=u?this:r,h=u?r:this,f=$oe(d,h,a,s);return u?f.negate():f},t.diffNow=function(r,n){return r===void 0&&(r="milliseconds"),n===void 0&&(n={}),this.diff(e.now(),r,n)},t.until=function(r){return this.isValid?Vf.fromDateTimes(this,r):this},t.hasSame=function(r,n){if(!this.isValid)return!1;var o=r.valueOf(),s=this.setZone(r.zone,{keepLocalTime:!0});return s.startOf(n)<=o&&o<=s.endOf(n)},t.equals=function(r){return this.isValid&&r.isValid&&this.valueOf()===r.valueOf()&&this.zone.equals(r.zone)&&this.loc.equals(r.loc)},t.toRelative=function(r){if(r===void 0&&(r={}),!this.isValid)return null;var n=r.base||e.fromObject({},{zone:this.zone}),o=r.padding?this<n?-r.padding:r.padding:0,s=["years","months","days","hours","minutes","seconds"],a=r.unit;return Array.isArray(r.unit)&&(s=r.unit,a=void 0),FN(n,this.plus(o),ke({},r,{numeric:"always",units:s,unit:a}))},t.toRelativeCalendar=function(r){return r===void 0&&(r={}),this.isValid?FN(r.base||e.fromObject({},{zone:this.zone}),this,ke({},r,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},e.min=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(!n.every(e.isDateTime))throw new sn("min requires all arguments be DateTimes");return mN(n,function(s){return s.valueOf()},Math.min)},e.max=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(!n.every(e.isDateTime))throw new sn("max requires all arguments be DateTimes");return mN(n,function(s){return s.valueOf()},Math.max)},e.fromFormatExplain=function(r,n,o){o===void 0&&(o={});var s=o,a=s.locale,u=a===void 0?null:a,d=s.numberingSystem,h=d===void 0?null:d,f=ti.fromOpts({locale:u,numberingSystem:h,defaultToEN:!0});return r8(f,r,n)},e.fromStringExplain=function(r,n,o){return o===void 0&&(o={}),e.fromFormatExplain(r,n,o)},es(e,[{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Nb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Nb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Nb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Ib(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?sf.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?sf.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?sf.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?sf.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return em(this.year)}},{key:"daysInMonth",get:function(){return F1(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?Bf(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?B1(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return cT}},{key:"DATE_MED",get:function(){return mk}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return one}},{key:"DATE_FULL",get:function(){return gk}},{key:"DATE_HUGE",get:function(){return vk}},{key:"TIME_SIMPLE",get:function(){return wk}},{key:"TIME_WITH_SECONDS",get:function(){return bk}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return _k}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Sk}},{key:"TIME_24_SIMPLE",get:function(){return Tk}},{key:"TIME_24_WITH_SECONDS",get:function(){return Ek}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return Ak}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return xk}},{key:"DATETIME_SHORT",get:function(){return Ck}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return Ik}},{key:"DATETIME_MED",get:function(){return Mk}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return Nk}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return sne}},{key:"DATETIME_FULL",get:function(){return Rk}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Pk}},{key:"DATETIME_HUGE",get:function(){return $k}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Dk}}]),e}();function fh(e){if(Ut.isDateTime(e))return e;if(e&&e.valueOf&&sc(e.valueOf()))return Ut.fromJSDate(e);if(e&&typeof e=="object")return Ut.fromObject(e);throw new sn("Unknown datetime argument: "+e+", of type "+typeof e)}var ise="2.4.0",V1=gn.DateTime=Ut;gn.Duration=ui;gn.FixedOffsetZone=ro;gn.IANAZone=Pc;gn.Info=sf;gn.Interval=Vf;gn.InvalidZone=qk;gn.Settings=kt;gn.SystemZone=Wk;gn.VERSION=ise;gn.Zone=jp;const Pb={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function f8(e){e||(e=Lr());let t=e in Pb;if(!t){const o=e.split("-");o.length>1&&o[0]in Pb&&(e=o[0],t=!0),t||(e="en")}const[i,r,n="#,##0.###"]=Pb[e];return{decimal:i,group:r,pattern:n}}function rse(e,t){const i=f8((t={...t}).locale);t.customs=i;const r=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:nse(e,r,t)}const y8=/[#0,]*[#0](?:\.0*#*)?/;function nse(e,t,i){const r=(i=i||{}).customs.group,n=i.customs.decimal,o=t.split(";"),s=o[0];if((t=o[e<0?1:0]||"-"+s).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xA4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const a=y8,u=s.match(a);if(!u)throw new Error("unable to find a number expression in pattern: "+t);return i.fractional===!1&&(i.places=0),t.replace(a,ose(e,u[0],{decimal:n,group:r,places:i.places,round:i.round}))}function ose(e,t,i){(i=i||{}).places===!0&&(i.places=0),i.places===1/0&&(i.places=6);const r=t.split("."),n=typeof i.places=="string"&&i.places.indexOf(",");let o=i.places;n?o=i.places.substring(n+1):o>=0||(o=(r[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(o))));const s=String(Math.abs(e)).split("."),a=s[1]||"";if(r[1]||i.places){n&&(i.places=i.places.substring(0,n));const g=i.places!==void 0?i.places:r[1]&&r[1].lastIndexOf("0")+1;g>a.length&&(s[1]=a.padEnd(Number(g),"0")),o<a.length&&(s[1]=a.substr(0,Number(o)))}else s[1]&&s.pop();const u=r[0].replace(",","");let d=u.indexOf("0");d!==-1&&(d=u.length-d,d>s[0].length&&(s[0]=s[0].padStart(d,"0")),u.includes("#")||(s[0]=s[0].substr(s[0].length-d)));let h,f,y=r[0].lastIndexOf(",");if(y!==-1){h=r[0].length-y-1;const g=r[0].substr(0,y);y=g.lastIndexOf(","),y!==-1&&(f=g.length-y-1)}const m=[];for(let g=s[0];g;){const v=g.length-h;m.push(v>0?g.substr(v):g),g=v>0?g.slice(0,v):"",f&&(h=f,f=void 0)}return s[0]=m.reverse().join(i.group||","),s.join(i.decimal||".")}function sse(e){const t=f8((e=e||{}).locale),i=e.pattern||t.pattern,r=t.group,n=t.decimal;let o=1;if(i.includes("%"))o/=100;else if(i.includes("\u2030"))o/=1e3;else if(i.includes("\xA4"))throw new Error("currency notation not supported");const s=i.split(";");return s.length===1&&s.push("-"+s[0]),{regexp:_y(s,u=>(u="(?:"+QE(u,".")+")").replace(y8,d=>{const h={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:n,exponent:!1},f=d.split(".");let y=e.places;f.length===1&&o!==1&&(f[1]="###"),f.length===1||y===0?h.fractional=!1:(y===void 0&&(y=e.pattern?f[1].lastIndexOf("0")+1:1/0),y&&e.fractional==null&&(h.fractional=!0),!e.places&&y<f[1].length&&(y+=","+f[1].length),h.places=y);const m=f[0].split(",");return m.length>1&&(h.groupSize=m.pop().length,m.length>1&&(h.groupSize2=m.pop().length)),"("+lse(h)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:n,factor:o}}function ase(e,t){const i=sse(t),r=new RegExp("^"+i.regexp+"$").exec(e);if(!r)return NaN;let n=r[1];if(!r[1]){if(!r[2])return NaN;n=r[2],i.factor*=-1}return n=n.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(n)*i.factor}function lse(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=UN(e),i=_y(e.fractional,n=>{let o="";return n&&e.places!==0&&(o="\\"+e.decimal,e.places===1/0?o="(?:"+o+"\\d+)?":o+="\\d{"+e.places+"}"),o},!0);let r=t+i;return i&&(r="(?:(?:"+r+")|(?:"+i+"))"),r+_y(e.exponent,n=>n?"([eE]"+UN({signed:e.eSigned})+")":"")}function UN(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",_y(e.signed,t=>t?"[-+]":"",!0)+_y(e.separator,t=>{if(!t)return"(?:\\d+)";(t=QE(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const i=e.groupSize,r=e.groupSize2;if(r){const n="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+i+"})";return i-r>0?"(?:"+n+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":n}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0)}const _y=(e,t,i)=>{if(!(e instanceof Array))return t(e);const r=[];for(let n=0;n<e.length;n++)r.push(t(e[n]));return use(r.join("|"),i)},use=(e,t)=>"("+(t?"?:":"")+e+")";var VN,jN;function eve(e){return Jy.fromJSON(e.toJSON())}function cse(e){return e.toJSON?e.toJSON():e}function tve(e){return typeof e=="string"||e instanceof String}function ive(e){return typeof e=="number"}function zN(e){return e instanceof Date}function rve(e,t){return e===t||!(!zN(e)||!zN(t))&&e.getTime()===t.getTime()}function nve(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function ove(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Oe({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function sve(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(VN||(VN={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(jN||(jN={}));const ave=1e3,lve={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},HN={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},uve={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function cve(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function dve(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(n=t.cmp,function(s){return function(a,u){const d={key:a,value:s[a]},h={key:u,value:s[u]};return n(d,h)}});var n;const o=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let u,d;if(Array.isArray(a)){for(d="[",u=0;u<a.length;u++)u&&(d+=","),d+=s(a[u])||"null";return d+"]"}if(a===null)return"null";if(o.includes(a)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=o.push(a)-1,f=Object.keys(a).sort(r&&r(a));for(d="",u=0;u<f.length;u++){const y=f[u],m=s(a[y]);m&&(d&&(d+=","),d+=JSON.stringify(y)+":"+m)}return o.splice(h,1),"{"+d+"}"}(e)}class m8{constructor(t){this.value=t}}class g8{constructor(t){this.value=t}}class Zx{constructor(t){this.fn=t}}class Jx{constructor(t,i){this.paramCount=i,this.fn=t}}const dse=Zx,pse=g8,hse=m8,fse=Jx,Rr={type:"VOID"},yse={type:"BREAK"},mse={type:"CONTINUE"};function Sy(e,t,i){return t===""||t==null||t===i||t===i?e:e=e.split(t).join(i)}function Xx(e){return e instanceof Zx||e instanceof Xre||e instanceof Jx}function j1(e){return!!li(e)||!!Bi(e)||!!Ei(e)||!!Fi(e)||e===null||e===Rr||typeof e=="number"}function gse(e,t){return e===void 0?t:e}function li(e){return typeof e=="string"||e instanceof String}function Fi(e){return typeof e=="boolean"}function Bi(e){return typeof e=="number"}function vse(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function mn(e){return e instanceof Array}function wse(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function bse(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function _se(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function _c(e){return e instanceof Qo}function Ei(e){return e instanceof Date}function Sse(e,t,i){if(e.length<t||e.length>i)throw new Error("Function called with wrong number of Parameters")}function Tse(e){return e<0?-Math.round(-e):Math.round(e)}function Ese(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?i:3&i|8).toString(16)})}function Qx(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=Sy(t,"\u2030",""),t=Sy(t,"\xA4",""),rse(e,{pattern:t})):e.toString()}function dw(e,t){const i=V1.fromJSDate(e);return t==null||t===""?i.toISO({suppressMilliseconds:!0}):i.toFormat(v8(t),{locale:Lr(),numberingSystem:"latn"})}function v8(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const i=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i))switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}function Ye(e,t,i){switch(i){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function Ase(e,t,i){if(e===null){if(t===null||t===Rr)return Ye(null,null,i);if(Bi(t))return Ye(0,t,i);if(li(t)||Fi(t))return Ye(0,yt(t),i);if(Ei(t))return Ye(0,t.getTime(),i)}if(e===Rr){if(t===null||t===Rr)return Ye(null,null,i);if(Bi(t))return Ye(0,t,i);if(li(t)||Fi(t))return Ye(0,yt(t),i);if(Ei(t))return Ye(0,t.getTime(),i)}else if(Bi(e)){if(Bi(t))return Ye(e,t,i);if(Fi(t))return Ye(e,yt(t),i);if(t===null||t===Rr)return Ye(e,0,i);if(li(t))return Ye(e,yt(t),i);if(Ei(t))return Ye(e,t.getTime(),i)}else if(li(e)){if(li(t))return Ye(gl(e),gl(t),i);if(Ei(t))return Ye(yt(e),t.getTime(),i);if(Bi(t))return Ye(yt(e),t,i);if(t===null||t===Rr)return Ye(yt(e),0,i);if(Fi(t))return Ye(yt(e),yt(t),i)}else if(Ei(e)){if(Ei(t))return Ye(e,t,i);if(t===null||t===Rr)return Ye(e.getTime(),0,i);if(Bi(t))return Ye(e.getTime(),t,i);if(Fi(t)||li(t))return Ye(e.getTime(),yt(t),i)}else if(Fi(e)){if(Fi(t))return Ye(e,t,i);if(Bi(t))return Ye(yt(e),yt(t),i);if(Ei(t))return Ye(yt(e),t.getTime(),i);if(t===null||t===Rr)return Ye(yt(e),0,i);if(li(t))return Ye(yt(e),yt(t),i)}return!!w8(e,t)&&(i==="<="||i===">=")}function w8(e,t){if(e===t||e===null&&t===Rr||t===null&&e===Rr)return!0;if(Ei(e)&&Ei(t))return e.getTime()===t.getTime();if(e instanceof jx||e instanceof Nc)return e.equalityTest(t);if(e instanceof le&&t instanceof le){const i=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(i!=null)return i===r}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function gl(e,t){if(li(e))return e;if(e===null)return"";if(Bi(e))return Qx(e,t);if(Fi(e))return e.toString();if(Ei(e))return dw(e,t);if(e instanceof pr)return JSON.stringify(e.toJSON());if(mn(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=z1(e[r]);return"["+i.join(",")+"]"}if(e instanceof Qo){const i=[];for(let r=0;r<e.length();r++)i[r]=z1(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():Xx(e)?"object, Function":""}function xse(e){const t=[];if(mn(e)===!1)return null;if(e instanceof Qo){for(let i=0;i<e.length();i++)t[i]=yt(e.get(i));return t}for(let i=0;i<e.length;i++)t[i]=yt(e[i]);return t}function cg(e,t){if(li(e))return e;if(e===null)return"";if(Bi(e))return Qx(e,t);if(Fi(e))return e.toString();if(Ei(e))return dw(e,t);if(e instanceof pr)return e instanceof Oe?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+gT(e.spatialReference)+"}":gT(e.toJSON(),(i,r)=>i.key===r.key?0:i.key==="spatialReference"?1:r.key==="spatialReference"||i.key<r.key?-1:i.key>r.key?1:0);if(mn(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=z1(e[r]);return"["+i.join(",")+"]"}if(e instanceof Qo){const i=[];for(let r=0;r<e.length();r++)i[r]=z1(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():Xx(e)?"object, Function":""}function z1(e){if(e===null)return"null";if(Fi(e)||Bi(e)||li(e))return JSON.stringify(e);if(e instanceof pr||e instanceof Qo||e instanceof Array)return cg(e);if(e instanceof Date)return JSON.stringify(dw(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===Rr)return"null";return"null"}function yt(e,t){return Bi(e)?e:e===null||e===""?0:Ei(e)?NaN:Fi(e)?e?1:0:mn(e)||e===""||e===void 0?NaN:t!==void 0&&li(e)?(t=Sy(t,"\u2030",""),t=Sy(t,"\xA4",""),ase(e,{pattern:t})):e===Rr?0:Number(e)}function Cse(e){if(Ei(e))return e;if(li(e)){const t=b8(e);if(t)return t.toJSDate()}return null}function Ise(e){return Ei(e)?V1.fromJSDate(e):li(e)?b8(e):null}function b8(e){const t=/ (\d\d)/;let i=V1.fromISO(e);return i.isValid||t.test(e)&&(e=e.replace(t,"T$1"),i=V1.fromISO(e),i.isValid)?i:null}function Mse(e){return Fi(e)?e:li(e)?(e=e.toLowerCase())==="true":!!Bi(e)&&e!==0&&!isNaN(e)}function Nse(e,t){return O(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function Rse(e){if(e===null)return null;if(e instanceof le)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof fr){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof ji){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof Np?e.points.length===0?null:e:e instanceof Oe?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function _8(e,t){if(!e||!e.domain)return t;let i=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=gl(t);else{if(t==null)return null;if(t==="")return t;t=yt(t)}for(let r=0;r<e.domain.codedValues.length;r++){const n=e.domain.codedValues[r];n.code===t&&(i=n)}return i===null?t:i.name}function S8(e,t){if(!e||!e.domain)return t;let i=null;t=gl(t);for(let r=0;r<e.domain.codedValues.length;r++){const n=e.domain.codedValues[r];n.name===t&&(i=n)}return i===null?t:i.code}function pw(e,t,i=null,r=null){if(!t||!t.fields)return null;let n,o,s=null;for(let a=0;a<t.fields.length;a++){const u=t.fields[a];u.name.toLowerCase()===e.toString().toLowerCase()&&(s=u)}if(s===null)throw new Error("Field not found");return r===null&&i&&t.typeIdField&&(r=i.hasField(t.typeIdField)?i.field(t.typeIdField):null),r!=null&&t.types.some(function(a){return a.id===r&&(n=a.domains&&a.domains[s.name],n&&n.type==="inherited"&&(n=GN(s.name,t),o=!0),!0)}),o||n||(n=GN(e,t)),{field:s,domain:n}}function GN(e,t){let i;return t.fields.some(function(r){return r.name.toLowerCase()===e.toLowerCase()&&(i=r.domain),!!i}),i}function gT(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(n=t.cmp,function(s){return function(a,u){const d={key:a,value:s[a]},h={key:u,value:s[u]};return n(d,h)}});var n;const o=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let u,d;if(Array.isArray(a)){for(d="[",u=0;u<a.length;u++)u&&(d+=","),d+=s(a[u])||"null";return d+"]"}if(a===null)return"null";if(o.includes(a)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=o.push(a)-1,f=Object.keys(a).sort(r&&r(a));for(d="",u=0;u<f.length;u++){const y=f[u],m=s(a[y]);m&&(d&&(d+=","),d+=JSON.stringify(y)+":"+m)}return o.splice(h,1),"{"+d+"}"}(e)}function Pse(e){if(e===null)return null;const t=[];for(const i of e)i&&i.arcadeDeclaredClass&&i.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(i.geometry()):t.push(i);return t}function gp(e,t){if(!(t instanceof le))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function $se(e,t){if(mn(e)||_c(e)){let i=!1,r=!1,n=[],o=t;if(mn(e)){for(const s of e)gp(n,s);n.length>0&&(o=e[0].spatialReference,i=e[0].hasZ,r=e[0].hasM)}else if(e instanceof Nc)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else{if(!_c(e))throw new Error("Invalid Argument");for(const s of e.toArray())gp(n,s);n.length>0&&(o=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return n.length===0?null:(PA(n,r,i)===!1&&(n=n.slice(0).reverse()),new fr({rings:[n],spatialReference:o,hasZ:i,hasM:r}))}return e}function Dse(e,t){if(mn(e)||_c(e)){let i=!1,r=!1,n=[],o=t;if(mn(e)){for(const s of e)gp(n,s);n.length>0&&(o=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof Nc)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(_c(e)){for(const s of e.toArray())gp(n,s);n.length>0&&(o=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return n.length===0?null:new ji({paths:[n],spatialReference:o,hasZ:i,hasM:r})}return e}function Lse(e,t){if(mn(e)||_c(e)){let i=!1,r=!1,n=[],o=t;if(mn(e)){for(const s of e)gp(n,s);n.length>0&&(o=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof Nc)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(_c(e)){for(const s of e.toArray())gp(n,s);n.length>0&&(o=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return n.length===0?null:new Np({points:n,spatialReference:o,hasZ:i,hasM:r})}return e}function Ose(e,t=!1){const i=[];if(e===null)return i;if(mn(e)===!0){for(let r=0;r<e.length;r++){const n=gl(e[r]);n===""&&t!==!0||i.push(n)}return i}if(e instanceof Qo){for(let r=0;r<e.length();r++){const n=gl(e.get(r));n===""&&t!==!0||i.push(n)}return i}if(j1(e)){const r=gl(e);return r===""&&t!==!0||i.push(r),i}return[]}let $b=0;function kse(e){return $b++,$b%100==0?($b=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function Fse(e,t,i){switch(i){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function Ty(e,t=null){return e==null?null:Fi(e)||Bi(e)||li(e)?e:e instanceof pr?(t==null?void 0:t.keepGeometryType)===!0?e:e.toJSON():e instanceof Qo?e.toArray().map(i=>Ty(i,t)):e instanceof Array?e.map(i=>Ty(i,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}async function Bse(e,t,i,r,n){const o=await e3(e,t,i);n[r]=o}async function e3(e,t=null,i=null){if(e instanceof Qo&&(e=e.toArray()),e==null)return null;if(j1(e)||e instanceof pr||e instanceof Date)return Ty(e,i);if(e instanceof Array){const r=[],n=[];for(const o of e)o===null||j1(o)||o instanceof pr||o instanceof Date?n.push(Ty(o,i)):(n.push(null),r.push(Bse(o,t,i,n.length-1,n)));return r.length>0&&await Promise.all(r),n}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,i):null}function Use(e,t,i){const r=e.fullSchema();return r===null||!r.fields?null:pw(t,r,e,i)}function Vse(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(i=>({name:i.name,code:i.id})):[]}:null}function jse(e,t,i,r){const n=e.fullSchema();if(n===null||!n.fields)return null;const o=pw(t,n,e,r);if(i===void 0)try{i=e.field(t)}catch{return null}return _8(o,i)}function zse(e,t,i,r){const n=e.fullSchema();if(n===null||!n.fields)return null;if(i===void 0){try{i=e.field(t)}catch{return null}return i}return S8(pw(t,n,e,r),i)}function Hse(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const i=[];for(const r of t.fields)i.push(cse(r));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:HN[t.geometryType]===void 0?"":HN[t.geometryType],fields:i}}const pve=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:m8,ImplicitResultE:g8,NativeFunctionE:Zx,SizzleFunctionE:Jx,NativeFunction:dse,ImplicitResult:pse,ReturnResult:hse,SizzleFunction:fse,voidOperation:Rr,breakResult:yse,continueResult:mse,multiReplace:Sy,isFunctionParameter:Xx,isSimpleType:j1,defaultUndefined:gse,isString:li,isBoolean:Fi,isNumber:Bi,isInteger:vse,isArray:mn,isFeature:wse,isFeatureSet:bse,isFeatureSetCollection:_se,isImmutableArray:_c,isDate:Ei,pcCheck:Sse,absRound:Tse,generateUUID:Ese,formatNumber:Qx,formatDate:dw,standardiseDateFormat:v8,greaterThanLessThan:Ase,equalityTest:w8,toString:gl,toNumberArray:xse,toStringExplicit:cg,toNumber:yt,toDate:Cse,toDateTime:Ise,toBoolean:Mse,fixSpatialReference:Nse,fixNullGeometry:Rse,getDomainValue:_8,getDomainCode:S8,getDomain:pw,stableStringify:gT,autoCastFeatureToGeometry:Pse,autoCastArrayOfPointsToPolygon:$se,autoCastArrayOfPointsToPolyline:Dse,autoCastArrayOfPointsToMultiPoint:Lse,toStringArray:Ose,tick:kse,binaryOperator:Fse,castAsJson:Ty,castAsJsonAsync:e3,featureFullDomain:Use,featureSubtypes:Vse,featureDomainValueLookup:jse,featureDomainCodeLookup:zse,featureSchema:Hse},Symbol.toStringTag,{value:"Module"}));var vT;let af=vT=class extends U{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new vT({minValue:this.minValue,maxValue:this.maxValue})}};l([c({type:Number,json:{write:!0}})],af.prototype,"minValue",void 0),l([c({type:Number,json:{write:!0}})],af.prototype,"maxValue",void 0),af=vT=l([S("esri.renderer.support.AuthoringInfoClassBreakInfo")],af);var wT;let el=wT=class extends U{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new wT({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:R(this.classBreakInfos)})}};l([c({type:String,json:{write:!0}})],el.prototype,"field",void 0),l([c({type:String,json:{write:!0}})],el.prototype,"normalizationField",void 0),l([c({type:String,json:{write:!0}})],el.prototype,"label",void 0),l([c({type:[af],json:{write:!0}})],el.prototype,"classBreakInfos",void 0),el=wT=l([S("esri.renderers.support.AuthoringInfoFieldInfo")],el);var bT;const Wm=new Se({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),qm=new Se({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),WN={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},qN=["high-to-low","above-and-below","centered-on","extremes"],YN=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],KN=["seconds","minutes","hours","days","months","years"];let ir=bT=class extends U{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new bT({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};l([c({types:WN,json:{write:!0}})],ir.prototype,"endTime",void 0),l([Fe("endTime")],ir.prototype,"castEndTime",null),l([c({type:String,json:{write:!0}})],ir.prototype,"field",void 0),l([c({type:Number,json:{write:!0}})],ir.prototype,"maxSliderValue",void 0),l([c({type:Number,json:{write:!0}})],ir.prototype,"minSliderValue",void 0),l([c({types:WN,json:{write:!0}})],ir.prototype,"startTime",void 0),l([Fe("startTime")],ir.prototype,"castStartTime",null),l([c({type:Wm.apiValues,value:null,json:{type:Wm.jsonValues,read:Wm.read,write:Wm.write}})],ir.prototype,"style",null),l([c({type:YN,value:null,json:{type:YN,origins:{"web-scene":{type:qN,write:{writer:(e,t)=>{qN.includes(e)&&(t.theme=e)}}}},write:!0}})],ir.prototype,"theme",null),l([c({type:qm.apiValues,json:{type:qm.jsonValues,read:qm.read,write:qm.write}})],ir.prototype,"type",void 0),l([c({type:KN,json:{type:KN,write:!0}})],ir.prototype,"units",void 0),ir=bT=l([S("esri.renderers.support.AuthoringInfoVisualVariable")],ir);const Gse=ir;let dg=class extends U{constructor(e){super(e),this.type=null}};l([c({readOnly:!0,json:{read:!1,write:!0}})],dg.prototype,"type",void 0),dg=l([S("esri.rest.support.ColorRamp")],dg);const t3=dg;var _T;let uu=_T=class extends t3{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new _T({fromColor:R(this.fromColor),toColor:R(this.toColor),algorithm:this.algorithm})}};l([pe({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],uu.prototype,"algorithm",void 0),l([c({type:ie,json:{type:[Qe],write:!0}})],uu.prototype,"fromColor",void 0),l([c({type:ie,json:{type:[Qe],write:!0}})],uu.prototype,"toColor",void 0),l([c({type:["algorithmic"]})],uu.prototype,"type",void 0),uu=_T=l([S("esri.rest.support.AlgorithmicColorRamp")],uu);const i3=uu;var ST;let lf=ST=class extends t3{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new ST({colorRamps:R(this.colorRamps)})}};l([c({type:[i3],json:{write:!0}})],lf.prototype,"colorRamps",void 0),l([c({type:["multipart"]})],lf.prototype,"type",void 0),lf=ST=l([S("esri.rest.support.MultipartColorRamp")],lf);const T8=lf,Wse={key:"type",base:t3,typeMap:{algorithmic:i3,multipart:T8}};function qse(e){return e&&e.type?e.type==="algorithmic"?i3.fromJSON(e):e.type==="multipart"?T8.fromJSON(e):null:null}var TT;const kl=new Se({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Ym=new Se({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),ZN=new Se({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),JN=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Yse=["high-to-low","above-and-below","above","below","90-10"],Kse=["flow-line","wave-front"],Zse=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let It=TT=class extends U{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return qse(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new TT({classificationMethod:this.classificationMethod,colorRamp:R(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:R(this.field1),field2:R(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};l([c({type:kl.apiValues,value:null,json:{type:kl.jsonValues,read:kl.read,write:kl.write,origins:{"web-document":{default:"manual",type:kl.jsonValues,read:kl.read,write:kl.write}}}})],It.prototype,"classificationMethod",null),l([c({types:Wse,json:{write:!0}})],It.prototype,"colorRamp",void 0),l([Y("colorRamp")],It.prototype,"readColorRamp",null),l([c({type:[String],value:null,json:{write:!0}})],It.prototype,"fields",null),l([c({type:el,value:null,json:{write:!0}})],It.prototype,"field1",null),l([c({type:el,value:null,json:{write:!0}})],It.prototype,"field2",null),l([c({type:Kse,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],It.prototype,"flowTheme",null),l([c({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],It.prototype,"focus",null),l([c({type:Number,value:null,json:{type:Qe,write:!0}})],It.prototype,"numClasses",null),l([c({type:JN,json:{type:JN,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],It.prototype,"lengthUnit",void 0),l([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],It.prototype,"maxSliderValue",void 0),l([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],It.prototype,"minSliderValue",void 0),l([c({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],It.prototype,"statistics",null),l([c({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],It.prototype,"standardDeviationInterval",null),l([c({type:Ym.apiValues,value:null,json:{type:Ym.jsonValues,read:Ym.read,write:Ym.write,origins:{"web-scene":{type:ZN.jsonValues,write:{writer:ZN.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],It.prototype,"type",null),l([c({type:[Gse],json:{write:!0}})],It.prototype,"visualVariables",void 0),l([c({type:Zse,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],It.prototype,"univariateSymbolStyle",null),l([c({type:Yse,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],It.prototype,"univariateTheme",null),It=TT=l([S("esri.renderers.support.AuthoringInfo")],It);const E8=It,Db=new Se({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let uf=class extends U{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};l([c({type:E8,json:{write:!0}})],uf.prototype,"authoringInfo",void 0),l([c({type:Db.apiValues,readOnly:!0,json:{type:Db.jsonValues,read:!1,write:{writer:Db.write,ignoreOrigin:!0}}})],uf.prototype,"type",void 0),uf=l([S("esri.renderers.Renderer")],uf);const ea=uf;var ET;let Xd=ET=class extends U{constructor(){super(...arguments),this.title=null}clone(){return new ET({title:this.title})}};l([c({type:String,json:{write:!0}})],Xd.prototype,"title",void 0),Xd=ET=l([S("esri.renderers.support.LegendOptions")],Xd);var AT;let pg=AT=class extends Xd{constructor(){super(...arguments),this.showLegend=null}clone(){return new AT({title:this.title,showLegend:this.showLegend})}};l([c({type:Boolean,json:{write:!0}})],pg.prototype,"showLegend",void 0),pg=AT=l([S("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],pg);const A8=pg,Jse=W.getLogger("esri.renderers.visualVariables.VisualVariable"),Lb=new Se({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let kn=class extends U{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Jse.error(".field: field must be a string value"),null):Fy(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};l([c()],kn.prototype,"index",void 0),l([c({type:Lb.apiValues,readOnly:!0,json:{read:Lb.read,write:Lb.write}})],kn.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],kn.prototype,"field",void 0),l([Fe("field")],kn.prototype,"castField",null),l([c({type:String,json:{write:!0}})],kn.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],kn.prototype,"valueExpressionTitle",void 0),l([c({readOnly:!0})],kn.prototype,"arcadeRequired",null),l([c({type:A8,json:{write:!0}})],kn.prototype,"legendOptions",void 0),kn=l([S("esri.renderers.visualVariables.VisualVariable")],kn);const rm=kn;var xT;let cu=xT=class extends rm{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new xT({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([c({readOnly:!0})],cu.prototype,"cache",null),l([c({type:["color"],json:{type:["colorInfo"]}})],cu.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],cu.prototype,"normalizationField",void 0),l([c({type:[wte],json:{write:!0}})],cu.prototype,"stops",null),cu=xT=l([S("esri.renderers.visualVariables.ColorVariable")],cu);const x8=cu;var CT;let $a=CT=class extends U{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return ry(t.transparency)}writeOpacity(e,t,i){t[i]=Lv(e)}clone(){return new CT({label:this.label,opacity:this.opacity,value:this.value})}};l([c({type:String,json:{write:!0}})],$a.prototype,"label",void 0),l([c({type:Number,json:{type:Qe,write:{target:"transparency"}}})],$a.prototype,"opacity",void 0),l([Y("opacity",["transparency"])],$a.prototype,"readOpacity",null),l([X("opacity")],$a.prototype,"writeOpacity",null),l([c({type:Number,json:{write:!0}})],$a.prototype,"value",void 0),$a=CT=l([S("esri.renderers.visualVariables.support.OpacityStop")],$a);const Xse=$a;var IT;let du=IT=class extends rm{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new IT({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([c({readOnly:!0})],du.prototype,"cache",null),l([c({type:["opacity"],json:{type:["transparencyInfo"]}})],du.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],du.prototype,"normalizationField",void 0),l([c({type:[Xse],json:{write:!0}})],du.prototype,"stops",null),du=IT=l([S("esri.renderers.visualVariables.OpacityVariable")],du);const C8=du;var MT;let ws=MT=class extends rm{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const n=`visualVariables[${this.index}]`;r.messages.push(new I("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:r}))}}clone(){return new MT({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};l([c({readOnly:!0})],ws.prototype,"cache",null),l([c({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ws.prototype,"axis",void 0),l([c({type:["rotation"],json:{type:["rotationInfo"]}})],ws.prototype,"type",void 0),l([c({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ws.prototype,"rotationType",void 0),l([c({type:String,json:{write:!0}})],ws.prototype,"valueExpressionTitle",void 0),l([X("web-scene","valueExpressionTitle")],ws.prototype,"writeValueExpressionTitleWebScene",null),ws=MT=l([S("esri.renderers.visualVariables.RotationVariable")],ws);const I8=ws;var NT;let ad=NT=class extends U{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new NT({label:this.label,size:this.size,value:this.value})}};l([c({type:String,json:{write:!0}})],ad.prototype,"label",void 0),l([c({type:Number,cast:je,json:{write:!0}})],ad.prototype,"size",void 0),l([c({type:Number,json:{write:!0}})],ad.prototype,"value",void 0),ad=NT=l([S("esri.renderers.visualVariables.support.SizeStop")],ad);const Qse=ad;var RT;let hg=RT=class extends A8{constructor(){super(...arguments),this.customValues=null}clone(){return new RT({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};l([c({type:[Number],json:{write:!0}})],hg.prototype,"customValues",void 0),hg=RT=l([S("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],hg);const eae=hg;var zs,qt;function $d(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Ey(e){return e!=null&&!isNaN(e)&&isFinite(e)}function M8(e){return e.valueExpression?zs.Expression:e.field&&typeof e.field=="string"?zs.Field:zs.Unknown}function tae(e,t){const i=t||M8(e),r=e.valueUnit||"unknown";return i===zs.Unknown?qt.Constant:e.stops?qt.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?qt.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?qt.Proportional:qt.Additive:qt.Identity:qt.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(zs||(zs={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(qt||(qt={}));const N8={inches:Jr(1,"meters","inches"),feet:Jr(1,"meters","feet"),"us-feet":Jr(1,"meters","us-feet"),yards:Jr(1,"meters","yards"),miles:Jr(1,"meters","miles"),"nautical-miles":Jr(1,"meters","nautical-miles"),millimeters:Jr(1,"meters","millimeters"),centimeters:Jr(1,"meters","centimeters"),decimeters:Jr(1,"meters","decimeters"),meters:Jr(1,"meters","meters"),kilometers:Jr(1,"meters","kilometers"),"decimal-degrees":1/cZ(1,"meters",nt.radius)},Il=W.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),XN=new Ni,fg=Math.PI,R8=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function P8(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Il.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof t=="number",o=n?null:t,s=o&&o.attributes;let a=n?t:null;const u=r.field,{ipData:d,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!u&&!h){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if(O(i)||O(i.arcade))return void Il.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,w=v.getViewInfo(g),_=v.createExecContext(o,w);if(!f){const A=v.createSyntaxTree(r.valueExpression);f=v.createFunction(A),r.cache.compiledFunc=f}a=v.executeFunction(f,_)}else s&&(a=s[u]);const y=r.normalizationField,m=s?parseFloat(s[y]):void 0;if(a!=null&&(!y||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=r3(a,d);if(g){const v=g[0],w=g[1],_=v===w?r.stops[v].color:ie.blendColors(r.stops[v].color,r.stops[w].color,g[2],T(i)?i.color:void 0);return new ie(_)}}}function $8(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Il.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof t=="number",o=n?null:t,s=o&&o.attributes;let a=n?t:null;const u=r.field,{ipData:d,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!u&&!h){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if(O(i)||O(i.arcade))return void Il.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,w=v.getViewInfo(g),_=v.createExecContext(o,w);if(!f){const A=v.createSyntaxTree(r.valueExpression);f=v.createFunction(A),r.cache.compiledFunc=f}a=v.executeFunction(f,_)}else s&&(a=s[u]);const y=r.normalizationField,m=s?parseFloat(s[y]):void 0;if(a!=null&&(!y||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=r3(a,d);if(g){const v=g[0],w=g[1];if(v===w)return r.stops[v].opacity;{const _=r.stops[v].opacity;return _+(r.stops[w].opacity-_)*g[2]}}}}function D8(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Il.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",o=n==="heading"&&r.rotationType==="arithmetic"?90:0,s=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,u=a&&a.attributes,d=r.field,{hasExpression:h}=r.cache;let f=r.cache.compiledFunc,y=0;if(!d&&!h)return y;if(h){if(O(i)||O(i.arcade))return void Il.error("Use of arcade expressions requires an arcade context");const m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,v=g.getViewInfo(m),w=g.createExecContext(a,v);if(!f){const _=g.createSyntaxTree(r.valueExpression);f=g.createFunction(_),r.cache.compiledFunc=f}y=g.executeFunction(f,w)}else u&&(y=u[d]||0);return y=typeof y!="number"||isNaN(y)?null:o+s*y,y}function iae(e,t,i){const r=typeof t=="number",n=r?null:t,o=n&&n.attributes;let s=r?t:null;const{isScaleDriven:a}=e.cache;let u=e.cache.compiledFunc;if(a){const h=T(i)?i.scale:void 0,f=T(i)?i.view:void 0;s=h==null||f==="3d"?rae(e):h}else if(!r)switch(e.inputValueType){case zs.Expression:{if(O(i)||O(i.arcade))return void Il.error("Use of arcade expressions requires an arcade context");const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},f=i.arcade.arcadeUtils,y=f.getViewInfo(h),m=f.createExecContext(n,y);if(!u){const g=f.createSyntaxTree(e.valueExpression);u=f.createFunction(g),e.cache.compiledFunc=u}s=f.executeFunction(u,m);break}case zs.Field:o&&(s=o[e.field]);break;case zs.Unknown:s=null}if(!Ey(s))return null;if(r||!e.normalizationField)return s;const d=o?parseFloat(o[e.normalizationField]):null;return Ey(d)&&d!==0?s/d:null}function rae(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function hw(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(o=>o.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Il.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=O8(iae(r,t,i),r,t,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function cr(e,t,i){return e==null?null:$d(e)?hw(e,t,i):Ey(e)?e:null}function L8(e,t,i){return Ey(i)&&e>i?i:Ey(t)&&e<t?t:e}function nae(e,t,i,r){return e+(cr(t.minSize,i,r)||t.minDataValue)}function oae(e,t,i){const r=e.stops;let n=r&&r.length&&r[0].size;return n==null&&(n=e.minSize),cr(n,t,i)}function sae(e,t,i,r){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=cr(t.minSize,i,r),s=cr(t.maxSize,i,r),a=T(r)?r.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return s;if(t.scaleBy==="area"&&a){const u=a==="circle",d=u?fg*(o/2)**2:o*o,h=d+n*((u?fg*(s/2)**2:s*s)-d);return u?2*Math.sqrt(h/fg):Math.sqrt(h)}return o+n*(s-o)}function aae(e,t,i,r){const n=T(r)?r.shape:void 0,o=e/t.minDataValue,s=cr(t.minSize,i,r),a=cr(t.maxSize,i,r);let u=null;return u=n==="circle"?2*Math.sqrt(o*(s/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(o*s**2):o*s,L8(u,s,a)}function lae(e,t,i,r,n){const[o,s,a]=r3(e,n);if(o===s)return cr(t.stops[o].size,i,r);{const u=cr(t.stops[o].size,i,r);return u+(cr(t.stops[s].size,i,r)-u)*a}}function uae(e,t,i,r){const n=(T(r)&&r.resolution?r.resolution:1)*N8[t.valueUnit],o=cr(t.minSize,i,r),s=cr(t.maxSize,i,r),{valueRepresentation:a}=t;let u=null;return u=a==="area"?2*Math.sqrt(e/fg)/n:a==="radius"||a==="distance"?2*e/n:e/n,L8(u,o,s)}function O8(e,t,i,r,n){switch(t.transformationType){case qt.Additive:return nae(e,t,i,r);case qt.Constant:return oae(t,i,r);case qt.ClampedLinear:return sae(e,t,i,r);case qt.Proportional:return aae(e,t,i,r);case qt.Stops:return lae(e,t,i,r,n);case qt.RealWorldSize:return uae(e,t,i,r);case qt.Identity:return e;case qt.Unknown:return null}}function cae(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const n={scale:t,view:i};let o=cr(e.minSize,XN,n),s=cr(e.maxSize,XN,n);if(o!=null||s!=null){if(o>s){const a=s;s=o,o=a}return{minSize:o,maxSize:s}}}function dae(e,t,i){if(!e.visualVariables)return;const r=[],n=[],o=[],s=[],a=[];for(const u of e.visualVariables)switch(u.type){case"color":n.push(u);break;case"opacity":o.push(u);break;case"rotation":a.push(u);break;case"size":s.push(u)}return n.forEach(u=>{const d=P8(u,t,i);r.push({variable:u,value:d})}),o.forEach(u=>{const d=$8(u,t,i);r.push({variable:u,value:d})}),a.forEach(u=>{const d=D8(u,t,i);r.push({variable:u,value:d})}),s.forEach(u=>{const d=hw(u,t,i);r.push({variable:u,value:d})}),r.filter(u=>u.value!=null)}function r3(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((n,o)=>e<n?(r=o,!0):(i=o,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function pae(e,t,i){const r=["proportional","proportional","proportional"];for(const n of e){const o=n.useSymbolValue?"symbol-value":hw(n,t,i);switch(n.axis){case"width":r[0]=o;break;case"depth":r[1]=o;break;case"height":r[2]=o;break;case"width-and-depth":r[0]=o,r[1]=o;break;case"all":case void 0:case null:r[0]=o,r[1]=o,r[2]=o;break;default:n.axis}}return r}const n3=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:pae,getColor:P8,getOpacity:$8,getRotationAngle:D8,getSize:hw,getSizeForValue:O8,getSizeFromNumberOrVariable:cr,getSizeRangeAtScale:cae,getVisualVariableValues:dae,viewScaleRE:R8},Symbol.toStringTag,{value:"Module"}));var PT;const Oc=W.getLogger("esri.renderers.visualVariables.SizeVariable"),Km=new Se({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),$T=new Se({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function QN(e){if(e!=null)return typeof e=="string"||typeof e=="number"?je(e):e.type==="size"?$d(e)?e:(delete(e={...e}).type,new He(e)):void 0}function eR(e,t,i){if(typeof e!="object")return e;const r=new He;return r.read(e,i),r}let He=PT=class extends rm{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:R8.test(this.valueExpression)}}set expression(e){Oc.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){$d(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),$d(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return M8(this)}set maxDataValue(e){e&&this.stops&&(Oc.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Oc.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return QN(e)}readMaxSize(e,t,i){return eR(e,t,i)}set minDataValue(e){e&&this.stops&&(Oc.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Oc.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return QN(e)}readMinSize(e,t,i){return eR(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(Oc.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return tae(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const n=this.index,o=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new I("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:o+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?$T.read(e):null}clone(){return new PT({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:$d(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:$d(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===qt.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===qt.Stops){const e=this.stops,t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([c({readOnly:!0})],He.prototype,"cache",null),l([c({type:Km.apiValues,json:{type:Km.jsonValues,origins:{"web-map":{read:!1}},read:Km.read,write:Km.write}})],He.prototype,"axis",void 0),l([c({type:String,value:null,json:{read:!1}})],He.prototype,"expression",null),l([c()],He.prototype,"index",null),l([c({type:String,readOnly:!0})],He.prototype,"inputValueType",null),l([c({type:eae,json:{write:!0}})],He.prototype,"legendOptions",void 0),l([c({type:Number,value:null,json:{write:!0}})],He.prototype,"maxDataValue",null),l([c({type:Number,value:null,json:{write:!0}})],He.prototype,"maxSize",null),l([Fe("maxSize")],He.prototype,"castMaxSize",null),l([Y("maxSize")],He.prototype,"readMaxSize",null),l([c({type:Number,value:null,json:{write:!0}})],He.prototype,"minDataValue",null),l([c({type:Number,value:null,json:{write:!0}})],He.prototype,"minSize",null),l([Fe("minSize")],He.prototype,"castMinSize",null),l([Y("minSize")],He.prototype,"readMinSize",null),l([c({type:String,json:{write:!0}})],He.prototype,"normalizationField",void 0),l([c({readOnly:!0})],He.prototype,"arcadeRequired",null),l([c({type:String})],He.prototype,"scaleBy",void 0),l([c({type:[Qse],value:null,json:{write:!0}})],He.prototype,"stops",null),l([c({type:["outline"],json:{write:!0}})],He.prototype,"target",void 0),l([c({type:String,readOnly:!0})],He.prototype,"transformationType",null),l([c({type:["size"],json:{type:["sizeInfo"]}})],He.prototype,"type",void 0),l([c({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],He.prototype,"useSymbolValue",void 0),l([c({type:String,json:{write:!0}})],He.prototype,"valueExpression",void 0),l([Y("valueExpression",["valueExpression","expression"])],He.prototype,"readValueExpression",null),l([X("web-scene","valueExpression")],He.prototype,"writeValueExpressionWebScene",null),l([c({type:["radius","diameter","area","width","distance"],json:{write:!0}})],He.prototype,"valueRepresentation",void 0),l([c({type:$T.apiValues,json:{write:$T.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],He.prototype,"valueUnit",void 0),l([Y("valueUnit")],He.prototype,"readValueUnit",null),He=PT=l([S("esri.renderers.visualVariables.SizeVariable")],He);const k8=He,hae=W.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),fae={color:x8,size:k8,opacity:C8,rotation:I8},yae=new Se({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),mae=/^\[([^\]]+)\]$/i;let yg=class extends se{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let r=null;return r=t.target===i.target?0:t.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:n}=t,o=r&&r.match(mae),s=o&&o[1];if(s&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:s})),e)return e.map(a=>{const u=yae.read(a.type),d=fae[u];d||(hae.warn(`Unknown variable type: ${u}`),i&&i.messages&&i.messages.push(new Yi("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:a,context:i})));const h=new d;return h.read(a,i),h})}writeVariables(e,t){const i=[];for(const r of e){const n=r.toJSON(t);n&&i.push(n)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};l([c()],yg.prototype,"visualVariables",null),yg=l([S("esri.renderers.visualVariables.VisualVariableFactory")],yg);const gae=yg,vae={base:rm,key:"type",typeMap:{opacity:C8,color:x8,rotation:I8,size:k8}},qp=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new gae}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,o){r[n]=this._vvFactory.writeVariables(i,o)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(o=>o.type===i&&(typeof r=="string"?o.target===r:r!==!1||!o.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const o of n)o&&(o.field&&dn(i,r,o.field),o.normalizationField&&dn(i,r,o.normalizationField),o.valueExpression&&await Zi(i,r,o.valueExpression))}};return l([c({types:[vae],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),l([Y("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),l([X("visualVariables")],t.prototype,"writeVisualVariables",null),t=l([S("esri.renderers.mixins.VisualVariablesMixin")],t),t},yh={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function wae(e,t=yh){var a,u;if(!e)return{symbol:null};const{retainId:i=yh.retainId,ignoreDrivers:r=yh.ignoreDrivers,hasLabelingContext:n=yh.hasLabelingContext,retainCIM:o=yh.retainCIM}=t;let s;if(pp(e)||e instanceof Ic)s=e.clone();else if(e.type==="cim"){const d=(u=(a=e.data)==null?void 0:a.symbol)==null?void 0:u.type;if(d!=="CIMPointSymbol")return{error:new I("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${d||"unknown"}' is unsupported in 3D`,{symbol:e})};s=o?e.clone():Bu.fromCIMSymbol(e)}else if(e instanceof Br)s=zv.fromSimpleLineSymbol(e);else if(e instanceof Pl)s=Bu.fromSimpleMarkerSymbol(e);else if(e instanceof Gy)s=Bu.fromPictureMarkerSymbol(e);else if(e instanceof Xs)s=Wy.fromSimpleFillSymbol(e);else{if(!(e instanceof Cc))return{error:new I("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};s=n?jv.fromTextSymbol(e):Bu.fromTextSymbol(e)}if(i&&s.type!=="cim"&&(s.id=e.id),r&&pp(s))for(let d=0;d<s.symbolLayers.length;++d)s.symbolLayers.getItemAt(d)._ignoreDrivers=!0;return{symbol:s}}const bae=["building-scene","integrated-mesh","point-cloud","scene"];function H1(e,t,i,r){const n=F8(e,{},{context:r,isLabelSymbol:!1});T(n)&&(t[i]=n)}function tR(e,t,i,r){const n=F8(e,{},{context:r,isLabelSymbol:!0});T(n)&&(t[i]=n)}function iR(e){return e instanceof Lp||e instanceof Ic}function F8(e,t,i){var a;if(O(e))return null;const{context:r,isLabelSymbol:n}=i,o=r==null?void 0:r.origin,s=r==null?void 0:r.messages;if(o==="web-scene"&&!iR(e)){const u=wae(e,{retainCIM:!0,hasLabelingContext:n});return T(u.symbol)?u.symbol.write(t,r):(s==null||s.push(new I("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:u.error})),null)}return(o==="web-map"||o==="portal-item"&&!bae.includes((a=r==null?void 0:r.layer)==null?void 0:a.type))&&iR(e)?(s==null||s.push(new I("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function hve(e,t){return _K(e,null,t)}const nm={types:k9,json:{write:{writer:H1},origins:{"web-scene":{types:RI,write:{writer:H1},read:{reader:Cp({types:RI})}}}}},B8={types:{base:mr,key:"type",typeMap:{"simple-fill":ic.typeMap["simple-fill"],"picture-fill":ic.typeMap["picture-fill"],"polygon-3d":ic.typeMap["polygon-3d"]}},json:{write:{writer:H1},origins:{"web-scene":{type:Wy,write:{writer:H1}}}}};var DT;let Da=DT=class extends U{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new DT({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};l([c({type:String,json:{write:!0}})],Da.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],Da.prototype,"label",void 0),l([c({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Da.prototype,"minValue",void 0),l([c({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Da.prototype,"maxValue",void 0),l([c(nm)],Da.prototype,"symbol",void 0),Da=DT=l([S("esri.renderers.support.ClassBreakInfo")],Da);const G1=Da;var LT;const Zm=W.getLogger("esri.renderers.ClassBreaksRenderer"),U8="log",mg="percent-of-total",gg="field",Jm=new Se({esriNormalizeByLog:U8,esriNormalizeByPercentOfTotal:mg,esriNormalizeByField:gg}),_ae=Ze(G1);let Lt=LT=class extends qp(ea){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(n=>{const o=new G1;return o.read(n,i),o.minValue==null&&(o.minValue=r),o.maxValue==null&&(o.maxValue=o.minValue),r=o.maxValue,o})}writeClassBreakInfos(e,t,i,r){const n=e.map(o=>o.write({},r));this._areClassBreaksConsecutive()&&n.forEach(o=>delete o.classMinValue),t[i]=n}castField(e){return e==null?e:typeof e=="function"?(Zm.error(".field: field must be a string value"),null):Fy(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&gg||i&&mg||null,t&&i&&Zm.warn("warning: both normalizationField and normalizationTotal are set!")):e!==gg&&e!==mg||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new G1({minValue:e,maxValue:t,symbol:F9(i)}):_ae(R(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(O(t)||O(t.arcade))&&Zm.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(O(t)||O(t.arcade))&&(i={...i,arcade:await qs()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(O(t)||O(t.arcade)))return void Zm.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(O(t)||O(t.arcade))){const n=await qs(),{arcadeUtils:o}=n;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new LT({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:R(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:R(this.visualVariables),legendOptions:R(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Zi(e,t,this.valueExpression)];dn(e,t,this.field),dn(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o}=yv(t,{});let s=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const a=o.arcadeUtils;if(!s){const d=a.createSyntaxTree(this.valueExpression);s=a.createFunction(d),this._compiledValueExpression.compiledFunction=s}this._compiledValueExpression.valueExpression=this.valueExpression;const u=a.executeFunction(s,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let n=parseFloat(i[t]);if(r){const o=this.normalizationTotal,s=parseFloat(i[this.normalizationField]);if(r===U8)n=Math.log(n)*Math.LOG10E;else if(r!==mg||isNaN(o)){if(r===gg&&!isNaN(s)){if(isNaN(n)||isNaN(s))return-1;n/=s}}else n=n/o*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};l([c(B8)],Lt.prototype,"backgroundFillSymbol",void 0),l([c({type:[G1]})],Lt.prototype,"classBreakInfos",void 0),l([Y("classBreakInfos")],Lt.prototype,"readClassBreakInfos",null),l([X("classBreakInfos")],Lt.prototype,"writeClassBreakInfos",null),l([c({type:String,json:{write:!0}})],Lt.prototype,"defaultLabel",void 0),l([c(nm)],Lt.prototype,"defaultSymbol",void 0),l([c({type:String,json:{write:!0}})],Lt.prototype,"field",void 0),l([Fe("field")],Lt.prototype,"castField",null),l([c({type:Boolean})],Lt.prototype,"isMaxInclusive",void 0),l([c({type:Xd,json:{write:!0}})],Lt.prototype,"legendOptions",void 0),l([c({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Lt.prototype,"minValue",null),l([c({type:String,json:{write:!0}})],Lt.prototype,"normalizationField",void 0),l([c({type:Number,cast:e=>on(e),json:{write:!0}})],Lt.prototype,"normalizationTotal",void 0),l([c({type:Jm.apiValues,value:null,json:{type:Jm.jsonValues,read:Jm.read,write:Jm.write}})],Lt.prototype,"normalizationType",null),l([pe({classBreaks:"class-breaks"})],Lt.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Lt.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],Lt.prototype,"valueExpressionTitle",void 0),Lt=LT=l([S("esri.renderers.ClassBreaksRenderer")],Lt);const V8=Lt;class j8{constructor(t,i){this._storage=new P6,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const rR=W.getLogger("esri.renderers.support.DictionaryLoader"),Sae={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class o3{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new j8(100),this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(m){if(qi(m))return this._dictionaryPromise=null,null}const n={};if(this.fieldMap)for(const m of this._symbolFields){const g=this.fieldMap[m];if(g&&t.attributes[g]!=null){const v=""+t.attributes[g];n[m]=v}else n[m]=""}const o=r(n,i);if(!o||typeof o!="string")return null;const s=eA(o).toString(),a=this._symbolCache.get(s);if(a)return a.catch(()=>{this._symbolCache.pop(s)}),a;const u=o.split(";"),d=[],h=[];for(const m of u)if(m)if(m.includes("po:")){const g=m.substr(3).split("|");if(g.length===3){const v=g[0],w=g[1];let _=g[2];if(w==="DashTemplate")_=_.split(" ").map(A=>Number(A));else if(w==="Color"){const A=new ie(_).toRgba();_=[A[0],A[1],A[2],255*A[3]]}else _=Number(_);h.push({primitiveName:v,propertyName:w,value:_})}}else if(m.includes("|")){for(const g of m.split("|"))if(this._itemNames.has(g)){d.push(g);break}}else this._itemNames.has(m)&&d.push(m);const f=!T(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",y=this._cimPartsToCIMSymbol(d,h,f,i);return this._symbolCache.put(s,y,1),y}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void rR.error("no valid URL!");const i=Be(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:T(t)?t.signal:null}),[{data:r}]=await Promise.all([i,qs()]);if(!r)throw this._dictionaryPromise=null,new I("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=r.expression,o=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=o.symbol;const s={};if(this.config){const u=this.config;for(const d in u)s[d]=u[d]}if(o.configuration)for(const u of o.configuration)s.hasOwnProperty(u.name)||(s[u.name]=u.value);const a=[];if(T(t)&&t.fields&&this.fieldMap)for(const u of this._symbolFields){const d=this.fieldMap[u],h=t.fields.filter(f=>f.name===d);h.length>0&&a.push({...h[0],name:u})}return this._dictionaryPromise=Bq(n,T(t)?t.spatialReference:null,a,s).then(u=>{const d={scale:0};return(h,f)=>{const y=u.repurposeFeature({geometry:null,attributes:h});return d.scale=T(f)?f.scale:void 0,u.evaluate({$feature:y,$view:d})}}).catch(u=>(rR.error("Creating dictinoary expression failed:",u),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,i,r,n){const o=new Array(t.length);for(let u=0;u<t.length;u++)o[u]=this._getSymbolPart(t[u],n);const s=await Promise.all(o),a=this.fieldMap;for(const u of s)z8(u,a);return new jy({data:this._combineSymbolParts(s,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),n=Be(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,n);try{return(await n).data}catch(o){throw this._ongoingRequests.delete(t),o}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const n={...t[0]};if(t.length>1){n.symbolLayers=[];for(const o of t){const s=o;n.symbolLayers.unshift(...s.symbolLayers)}}return r&&(n.callout=Sae),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:i}}}function z8(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const n=i[r];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&Tae(n,t)}}function Tae(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const n=r.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":z8(n,t);break;case"CIMTextSymbol":n.fieldMap=t}}}const fve=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:o3},Symbol.toStringTag,{value:"Module"}));var OT;let Fn=OT=class extends qp(ea){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new o3(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new OT({config:R(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:R(this.fieldMap),url:R(this.url),visualVariables:R(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Zi(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};l([c({type:o3})],Fn.prototype,"_loader",null),l([c({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Fn.prototype,"config",void 0),l([c({type:Object,json:{write:!0}})],Fn.prototype,"fieldMap",void 0),l([c({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Fn.prototype,"scaleExpression",void 0),l([X("scaleExpression")],Fn.prototype,"writeData",null),l([c({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Fn.prototype,"scaleExpressionTitle",void 0),l([c({type:String,json:{write:!0}})],Fn.prototype,"url",void 0),l([X("visualVariables")],Fn.prototype,"writeVisualVariables",null),Fn=OT=l([S("esri.renderers.DictionaryRenderer")],Fn);const Eae=Fn;var kT;const Aae=W.getLogger("esri.renderers.support.AttributeColorInfo");let bs=kT=class extends U{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Aae.error(".field: field must be a string value"),null):Fy(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new kT({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([c({type:ie,json:{type:[Number],write:!0}})],bs.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],bs.prototype,"field",void 0),l([Fe("field")],bs.prototype,"castField",null),l([c({type:String,json:{write:!0}})],bs.prototype,"label",void 0),l([c({type:String,json:{write:!0}})],bs.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],bs.prototype,"valueExpressionTitle",void 0),bs=kT=l([S("esri.renderers.support.AttributeColorInfo")],bs);const H8=bs;var FT;let vg=FT=class extends U{constructor(){super(...arguments),this.unit=null}clone(){return new FT({unit:this.unit})}};l([c({type:String,json:{write:!0}})],vg.prototype,"unit",void 0),vg=FT=l([S("esri.renderers.support.DotDensityLegendOptions")],vg);const xae=vg;var BT;let _i=BT=class extends qp(ea){constructor(e){super(e),this.attributes=null,this.backgroundColor=new ie([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Br,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Xs({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new BT({attributes:R(this.attributes),backgroundColor:R(this.backgroundColor),dotBlendingEnabled:R(this.dotBlendingEnabled),dotShape:R(this.dotShape),dotSize:R(this.dotSize),dotValue:R(this.dotValue),legendOptions:R(this.legendOptions),outline:R(this.outline),referenceScale:R(this.referenceScale),visualVariables:R(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await Zi(e,t,i.valueExpression),i.field&&e.add(i.field)}};l([c({type:[H8],json:{write:!0}})],_i.prototype,"attributes",void 0),l([c({type:ie,json:{write:!0}})],_i.prototype,"backgroundColor",void 0),l([c({type:Boolean}),J("dotBlendingEnabled")],_i.prototype,"blendDots",void 0),l([c({type:Boolean,json:{write:!0}})],_i.prototype,"dotBlendingEnabled",void 0),l([c({type:String,json:{write:!1}})],_i.prototype,"dotShape",void 0),l([c({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],_i.prototype,"dotSize",void 0),l([c({type:xae,json:{write:!0}})],_i.prototype,"legendOptions",void 0),l([c({type:Br,json:{default:null,write:!0}})],_i.prototype,"outline",void 0),l([c({type:Number,json:{write:!0}})],_i.prototype,"dotValue",void 0),l([c({type:Number}),J("dotValue")],_i.prototype,"referenceDotValue",void 0),l([c({type:Number,json:{write:!0}})],_i.prototype,"referenceScale",void 0),l([c({type:Number,json:{write:!0}})],_i.prototype,"seed",void 0),l([pe({dotDensity:"dot-density"})],_i.prototype,"type",void 0),_i=BT=l([S("esri.renderers.DotDensityRenderer")],_i);const Cae=_i;let ld=class extends gr(U){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};l([c({type:String,json:{write:!0}})],ld.prototype,"minLabel",void 0),l([c({type:String,json:{write:!0}})],ld.prototype,"maxLabel",void 0),l([c({type:String,json:{write:!0}})],ld.prototype,"title",void 0),ld=l([S("esri.renderers.support.HeatmapLegendOptions")],ld);function fw(){return[0,0,0,0]}function Iae(e){return[e[0],e[1],e[2],e[3]]}function Yp(e,t,i,r){return[e,t,i,r]}function Mae(e){const t=fw(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Nae(e,t){return new Float64Array(e,t,4)}function G8(){return fw()}function W8(){return Yp(1,1,1,1)}function q8(){return Yp(1,0,0,0)}function Y8(){return Yp(0,1,0,0)}function K8(){return Yp(0,0,1,0)}function Z8(){return Yp(0,0,0,1)}const Rae=G8(),Pae=W8(),$ae=q8(),Dae=Y8(),Lae=K8(),Oae=Z8();Object.freeze(Object.defineProperty({__proto__:null,create:fw,clone:Iae,fromValues:Yp,fromArray:Mae,createView:Nae,zeros:G8,ones:W8,unitX:q8,unitY:Y8,unitZ:K8,unitW:Z8,ZEROS:Rae,ONES:Pae,UNIT_X:$ae,UNIT_Y:Dae,UNIT_Z:Lae,UNIT_W:Oae},Symbol.toStringTag,{value:"Module"}));const s3=2.4;function kae(e){return qo(e*s3)}function Fae(e){return l9(e)/s3}function Bae(e,t,i,r){let{color:n,ratio:o}=t,{color:s,ratio:a}=i;a===o&&(a===1?o-=1e-6:a+=1e-6);const u=hr((r-o)/(a-o),0,1);mL(e,n.toArray(),s.toArray(),u)}function yve(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,u)=>a.ratio-u.ratio).map(({color:a,ratio:u})=>({color:a,ratio:Math.max(u,.001)})),e.length<1)return i;let r=e[0],n=e[0],o=1;const s=fw();for(let a=0;a<512;a++){const u=(a+.5)/512;for(;u>n.ratio&&o<e.length;)r=n,n=e[o++];Bae(s,r,n,u),i.set(s,4*a)}return i}function mve(e,t,i,r){const{radius:n,fieldOffset:o,field:s}=t,a=Math.round(l9(n)),u=new Float64Array(i*r);let d,h=Number.NEGATIVE_INFINITY;const f=jae(s,o),y=new Set;for(const m of e){const g=m.getCursor();for(;g.next();){const v=g.getObjectId();if(y.has(v))continue;y.add(v);const w=g.readLegacyPointGeometry(),_=128;if(w.x<-_||w.x>=i+_||w.y<-_||w.y>r+_)continue;const A=+f(g),M=Math.max(0,Math.round(w.x)-a),$=Math.max(0,Math.round(w.y)-a),N=Math.min(r,Math.round(w.y)+a),D=Math.min(i,Math.round(w.x)+a);for(let V=$;V<N;V++)for(let G=M;G<D;G++){const Z=V*i+G,ee=Vae(w.x-G,w.y-V,a);d=u[Z]+=ee*A,d>h&&(h=d)}}}return{matrix:u.buffer,max:h}}function gve(e,t,i,r,n,o){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const s=e.getImageData(0,0,t,t);i&&r&&s.data.set(new Uint8ClampedArray(Uae(t,i,r,n,o))),e.putImageData(s,0,0)}function Uae(e,t,i,r,n){const o=new Uint32Array(e*e),s="buffer"in t?t:new Float64Array(t),a="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),u=a.length/(n-r);for(let d=0;d<s.length;d++){const h=s[d],f=Math.floor((h-r)*u);o[d]=a[hr(f,0,a.length-1)]}return o.buffer}function Vae(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function vve(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function jae(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var UT;const zae=W.getLogger("esri.renderers.HeatmapRenderer");function nR(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:o,minPixelIntensity:s,...a}=e;return a}}return e}let Wt=UT=class extends ea{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Of({ratio:0,color:new ie("rgba(255, 140, 0, 0)")}),new Of({ratio:.75,color:new ie("rgba(255, 140, 0, 1)")}),new Of({ratio:.9,color:new ie("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return nR(e)}get blurRadius(){return Fae(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",kae(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(s3**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||Ii(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,xp(()=>{A_(zae,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=nR(e),super.read(e,t)}getSymbol(){const e=this.referenceScale!==0?5:1,t=Math.min(this.radius*e,qo(256));return new Pl({size:t})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await dn(e,t,i),r&&typeof r=="string"&&await Zi(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new UT({colorStops:R(this.colorStops),field:this.field,legendOptions:R(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([c({type:E8,json:{write:!1}})],Wt.prototype,"authoringInfo",void 0),l([c({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Wt.prototype,"blurRadius",null),l([c({type:[Of],json:{write:!0}})],Wt.prototype,"colorStops",void 0),l([c({type:String,json:{write:!0}})],Wt.prototype,"field",void 0),l([c({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Wt.prototype,"fieldOffset",void 0),l([c({type:ld,json:{write:!0}})],Wt.prototype,"legendOptions",void 0),l([c({type:Number,json:{write:!0}})],Wt.prototype,"maxDensity",void 0),l([c({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Wt.prototype,"maxPixelIntensity",null),l([c({type:Number,json:{write:!0}})],Wt.prototype,"minDensity",void 0),l([c({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Wt.prototype,"minPixelIntensity",null),l([c({type:Number,cast:je,json:{write:!0}})],Wt.prototype,"radius",void 0),l([c({type:Number,range:{min:0},json:{default:0,write:!0}})],Wt.prototype,"referenceScale",void 0),l([pe({heatmap:"heatmap"})],Wt.prototype,"type",void 0),l([c({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Wt.prototype,"valueExpression",void 0),l([c({type:String})],Wt.prototype,"valueExpressionTitle",void 0),l([c({readOnly:!0})],Wt.prototype,"_pixelIntensityToDensity",null),Wt=UT=l([S("esri.renderers.HeatmapRenderer")],Wt);const J8=Wt;let Mu=class extends gr(U){constructor(){super(...arguments),this.color=new ie([0,0,0,0]),this.label=null,this.threshold=0}};l([c({type:ie,json:{write:!0}})],Mu.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],Mu.prototype,"label",void 0),l([c({type:Number,range:{min:0,max:1},json:{write:!0}})],Mu.prototype,"threshold",void 0),Mu=l([S("esri.renderers.support.OthersCategory")],Mu);let wg=class extends gr(U){constructor(){super(...arguments),this.title=null}};l([c({type:String,json:{write:!0}})],wg.prototype,"title",void 0),wg=l([S("esri.renderers.support.PieChartLegendOptions")],wg);let Er=class extends qp(gr(ea)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ie([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Mu,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new Pl({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await Zi(e,t,i.valueExpression),i.field&&e.add(i.field)}};l([c({type:[H8],json:{write:!0}})],Er.prototype,"attributes",void 0),l([c({type:Xs,json:{default:null,write:!0}})],Er.prototype,"backgroundFillSymbol",void 0),l([c({type:ie,json:{write:!0}})],Er.prototype,"defaultColor",void 0),l([c({type:String,json:{write:!0}})],Er.prototype,"defaultLabel",void 0),l([c({type:Number,range:{min:0,max:1},json:{write:!0}})],Er.prototype,"holePercentage",void 0),l([c({type:Mu,json:{write:!0}})],Er.prototype,"othersCategory",void 0),l([c({type:wg,json:{write:!0}})],Er.prototype,"legendOptions",void 0),l([c({type:Br,json:{default:null,write:!0}})],Er.prototype,"outline",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Er.prototype,"size",void 0),l([pe({pieChart:"pie-chart"})],Er.prototype,"type",void 0),Er=l([S("esri.renderers.PieChartRenderer")],Er);const Hae=Er;var VT;let pu=VT=class extends qp(ea){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new VT({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:R(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};l([c({type:String,json:{write:!0}})],pu.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],pu.prototype,"label",void 0),l([c(nm)],pu.prototype,"symbol",void 0),l([pe({simple:"simple"})],pu.prototype,"type",void 0),pu=VT=l([S("esri.renderers.SimpleRenderer")],pu);const a3=pu,Gae=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function jT(e){return e instanceof se}function oR(e){return e instanceof he?Object.keys(e.items):jT(e)?Ii(e).keys():e?Object.keys(e):[]}function Xm(e,t){return e instanceof he?e.items[t]:e[t]}function Wae(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function jf(e){return e?e.declaredClass:null}function X8(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=oR(e),n=oR(t);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||Wae(e,t))return{type:"complete",oldValue:e,newValue:t};const o=n.filter(f=>!r.includes(f)),s=r.filter(f=>!n.includes(f)),a=r.filter(f=>n.includes(f)&&Xm(e,f)!==Xm(t,f)).concat(o,s).sort(),u=jf(e);if(u&&Gae.includes(u)&&a.length)return{type:"complete",oldValue:e,newValue:t};let d;const h=jT(e)&&jT(t);for(const f of a){const y=Xm(e,f),m=Xm(t,f);let g;if((h||typeof y!="function"&&typeof m!="function")&&y!==m&&(y!=null||m!=null)){if(i&&i[f]&&typeof i[f]=="function")g=i[f](y,m);else if(y instanceof Date&&m instanceof Date){if(y.getTime()===m.getTime())continue;g={type:"complete",oldValue:y,newValue:m}}else g=typeof y=="object"&&typeof m=="object"&&jf(y)===jf(m)?X8(y,m):{type:"complete",oldValue:y,newValue:m};T(g)&&(T(d)?d.diff[f]=g:d={type:"partial",diff:{[f]:g}})}}return d}function qae(e,t){if(O(e))return!1;const i=t.split(".");let r=e;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const o=r.diff[n];if(!o)return!1;r=o}}return!0}function wve(e,t){for(const i of t)if(qae(e,i))return!0;return!1}function Yae(e,t){if(!(typeof e=="function"||typeof t=="function"||O(e)&&O(t)))return O(e)||O(t)||typeof e=="object"&&typeof t=="object"&&jf(e)!==jf(t)?{type:"complete",oldValue:e,newValue:t}:X8(e,t)}var zT;let La=zT=class extends U{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new zT({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};l([c({type:String,json:{write:!0}})],La.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],La.prototype,"label",void 0),l([c(nm)],La.prototype,"symbol",void 0),l([c({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],La.prototype,"value",void 0),l([Fe("value")],La.prototype,"castValue",null),La=zT=l([S("esri.renderers.support.UniqueValueInfo")],La);const W1=La,Kae=()=>!!k("enable-feature:force-wosr"),Ob={};async function Zae(e,t){try{return{data:(await ele(e,t)).data,baseUrl:C5(e),styleUrl:e}}catch(i){return fl(i),null}}function Jae(e,t,i){const r=T(t.portal)?t.portal:Yt.getDefault();let n;const o=`${r.url} - ${r.user&&r.user.username} - ${e}`;return Ob[o]||(Ob[o]=Xae(e,r,i).then(s=>(n=s,s.fetchData())).then(s=>({data:s,baseUrl:n.itemUrl,styleName:e}))),Ob[o]}function Xae(e,t,i){return t.load(i).then(()=>{const r=new Ds({disableExtraQuery:!0,query:`owner:${sR} AND type:${aR} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{let n=null;const o=e.toLowerCase();if(r&&Array.isArray(r)){for(const s of r)if(s.typeKeywords.some(a=>a.toLowerCase()===o)&&s.type===aR&&s.owner===sR){n=s;break}}if(!n)throw new I("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(i)})}function Qae(e,t,i){return e.styleUrl?Zae(e.styleUrl,i):e.styleName?Jae(e.styleName,t,i):Promise.reject(new I("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function bve(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function _ve(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!Kae()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function ele(e,t){const i={responseType:"json",query:{f:"json"},...t};return Be(Dr(e),i)}const sR="esri_en",aR="Style",Sve="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var cf;const Fl=W.getLogger("esri.renderers.UniqueValueRenderer"),tle=Ze(W1);let ft=cf=class extends qp(ea){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let o=0;o<i.length;o++){const s=t.find(a=>a.value===i[o].value);s?Yae(s,i[o])?(n.changed.push({type:"complete",oldValue:s,newValue:i[o]}),r=!0):n.unchanged.push({oldValue:s,newValue:i[o]}):(n.added.push(i[o]),r=!0)}for(let o=0;o<t.length;o++)i.find(s=>s.value===t[o].value)||(n.removed.push(t[o]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:Fy(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new I("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Fl.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,i){return i.portal||Yt.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=$p(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=zy(e.styleUrl,r))}set uniqueValueInfos(e){this.styleOrigin?Fl.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Fl.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?tle(e):new W1({value:e,symbol:F9(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i}removeUniqueValueInfo(e){if(this.styleOrigin)Fl.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(O(t)||O(t.arcade))&&(i={...i,arcade:await qs()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(O(t)||O(t.arcade)))return void Fl.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(O(i)||O(i.arcade))){const n=await qs(),{arcadeUtils:o}=n;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new cf({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:R(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:R(this.visualVariables),legendOptions:R(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:R(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=R(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(R(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Zi(e,t,this.valueExpression)];dn(e,t,this.field),dn(e,t,this.field2),dn(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return Qae(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const r=new Ic({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const n=new W1({value:i.name,symbol:r});t.push(n),this._valueInfoMap[i.name]=n}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o}=yv(t,{});let s=this._cache.compiledFunc;const a=o.arcadeUtils;if(!s){const d=a.createSyntaxTree(this.valueExpression);s=a.createFunction(d),this._cache.compiledFunc=s}const u=a.executeFunction(s,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._valueInfoMap[u+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const n=this.field2,o=this.field3,s=[];t&&s.push(i[t]),n&&s.push(i[n]),o&&s.push(i[o]),r=s.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new cf(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Yt.getDefault());const r=i.populateFromStyle();return r.catch(n=>{Fl.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(e,t){const i=new cf(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(n=>{Fl.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};l([c({readOnly:!0})],ft.prototype,"_cache",null),l([pe({uniqueValue:"unique-value"})],ft.prototype,"type",void 0),l([c(B8)],ft.prototype,"backgroundFillSymbol",void 0),l([c({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ft.prototype,"field",void 0),l([Fe("field")],ft.prototype,"castField",null),l([X("field")],ft.prototype,"writeField",null),l([c({type:String,json:{write:!0}})],ft.prototype,"field2",void 0),l([c({type:String,json:{write:!0}})],ft.prototype,"field3",void 0),l([c({type:String,json:{write:!0}})],ft.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],ft.prototype,"valueExpressionTitle",void 0),l([c({type:Xd,json:{write:!0}})],ft.prototype,"legendOptions",void 0),l([c({type:String,json:{write:!0}})],ft.prototype,"defaultLabel",void 0),l([c(C4({...nm},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ft.prototype,"defaultSymbol",null),l([c({type:String,json:{write:!0}})],ft.prototype,"fieldDelimiter",void 0),l([c({type:Yt,readOnly:!0})],ft.prototype,"portal",void 0),l([Y("portal",["styleName"])],ft.prototype,"readPortal",null),l([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ft.prototype,"styleOrigin",void 0),l([Y("styleOrigin",["styleName","styleUrl"])],ft.prototype,"readStyleOrigin",null),l([X("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ft.prototype,"writeStyleOrigin",null),l([c({type:[W1],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ft.prototype,"uniqueValueInfos",null),ft=cf=l([S("esri.renderers.UniqueValueRenderer")],ft);const l3=ft,om={key:"type",base:ea,typeMap:{heatmap:J8,simple:a3,"unique-value":l3,"class-breaks":V8,"dot-density":Cae,dictionary:Eae,"pie-chart":Hae},errorContext:"renderer"},Q8={key:"type",base:ea,typeMap:{simple:a3,"unique-value":l3,"class-breaks":V8,heatmap:J8},errorContext:"renderer"};function Tve(e,t){return e7(e,null,t)}const ile=Cp({types:om});function e7(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Yi("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):ile(e,t,i):null}class u3{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(T_),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new u3,r=this._originStores[De.DEFAULTS];r&&r.forEach((n,o)=>{i.set(o,R(n),De.DEFAULTS)});for(let n=De.SERVICE;n<T_;n++){const o=this._originStores[n];o&&o.forEach((s,a)=>{t&&t.has(a)||i.set(a,R(s),n)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=De.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const o=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),o!==i}return!1}delete(t,i=De.USER){const r=this._originStores[i];if(!r)return;const n=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let o=i-1;o>=0;o--){const s=this._originStores[o];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,o);break}}}return n}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],n=r&&r.get(t),o=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,i),o!==n}originOf(t){return this._propertyOriginMap.get(t)||De.DEFAULTS}forEach(t){this._values.forEach(t)}}const t7=e=>{let t=class extends e{constructor(...i){super(...i);const r=Ii(this),n=r.store,o=new u3;r.store=o,d5(r,n,o)}read(i,r){h5(this,i,r)}getAtOrigin(i,r){const n=kb(this),o=sl(r);if(typeof i=="string")return n.get(i,o);const s={};return i.forEach(a=>{s[a]=n.get(a,o)}),s}originOf(i){return Wg(this.originIdOf(i))}originIdOf(i){return kb(this).originOf(i)}revert(i,r){const n=kb(this),o=sl(r),s=Ii(this);let a;a=typeof i=="string"?i==="*"?n.keys(o):[i]:i,a.forEach(u=>{s.invalidate(u),n.revert(u,o),s.commit(u)})}};return t=l([S("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function kb(e){return Ii(e).store}let lR=class extends t7(se){};lR=l([S("esri.core.ReadOnlyMultiOriginJSONSupport")],lR);const rle=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return Fb(this).delete(i,sl(r))}write(i={},r){return y5(this,i=i||{},r),i}setAtOrigin(i,r,n){Ii(this).setAtOrigin(i,r,sl(n))}removeOrigin(i){const r=Fb(this),n=sl(i),o=r.keys(n);for(const s of o)r.originOf(s)===n&&r.set(s,r.get(s,n),De.USER)}updateOrigin(i,r){const n=Fb(this),o=sl(r),s=this.get(i);for(let a=o+1;a<T_;++a)n.delete(i,a);n.set(i,s,o)}toJSON(i){return this.write({},i)}};return t=l([S("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Fb(e){return Ii(e).store}const yw=e=>{let t=class extends rle(t7(e)){constructor(...i){super(...i)}};return t=l([S("esri.core.MultiOriginJSONSupport")],t),t};let uR=class extends yw(se){};uR=l([S("esri.core.MultiOriginJSONSupport")],uR);async function nle(e,t){const{WhereClause:i}=await B(()=>import("./WhereClause.443cc7a7.js"),[],import.meta.url);return i.create(e,t)}function ole(e,t){return T(e)?T(t)?`(${e}) AND (${t})`:e:t}var HT;let hu=HT=class extends U{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new HT({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([c({type:String,json:{write:!0}})],hu.prototype,"expression",void 0),l([c({type:String,json:{write:!0}})],hu.prototype,"name",void 0),l([c({type:["boolean","date","number","string"],json:{write:!0}})],hu.prototype,"returnType",void 0),l([c({type:String,json:{write:!0}})],hu.prototype,"title",void 0),hu=HT=l([S("esri.form.ExpressionInfo")],hu);const sle=hu;let fu=class extends U{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};l([c({type:String,json:{write:!0}})],fu.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],fu.prototype,"label",void 0),l([c()],fu.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],fu.prototype,"visibilityExpression",void 0),fu=l([S("esri.form.elements.Element")],fu);const vp=fu;var GT;let bg=GT=class extends U{constructor(e){super(e),this.type=null}clone(){return new GT({type:this.type})}};l([c({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],bg.prototype,"type",void 0),bg=GT=l([S("esri.form.elements.inputs.AttachmentInput")],bg);const ale=bg;var WT;let yu=WT=class extends vp{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new WT({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};l([c({type:String,json:{write:!0}})],yu.prototype,"attachmentKeyword",void 0),l([c({type:Boolean,json:{write:!0}})],yu.prototype,"editable",void 0),l([c({type:ale,json:{read:{source:"inputType"},write:{target:"inputType"}}})],yu.prototype,"input",void 0),l([c({type:["attachment"],json:{read:!1,write:!0}})],yu.prototype,"type",void 0),yu=WT=l([S("esri.form.elements.AttachmentElement")],yu);const cR=yu;let _g=class extends U{constructor(e){super(e),this.type=null}};l([c()],_g.prototype,"type",void 0),_g=l([S("esri.form.elements.inputs.Input")],_g);const Kp=_g;let df=class extends Kp{constructor(e){super(e),this.maxLength=null,this.minLength=0}};l([c({type:Number,json:{write:!0}})],df.prototype,"maxLength",void 0),l([c({type:Number,json:{write:!0}})],df.prototype,"minLength",void 0),df=l([S("esri.form.elements.inputs.TextInput")],df);const c3=df;var qT;let Sg=qT=class extends c3{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new qT({maxLength:this.maxLength,minLength:this.minLength})}};l([c({type:["barcode-scanner"],json:{read:!1,write:!0}})],Sg.prototype,"type",void 0),Sg=qT=l([S("esri.form.elements.inputs.BarcodeScannerInput")],Sg);const lle=Sg;var YT;let ud=YT=class extends Kp{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new YT({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};l([c({type:String,json:{write:!0}})],ud.prototype,"noValueOptionLabel",void 0),l([c({type:Boolean,json:{write:!0}})],ud.prototype,"showNoValueOption",void 0),l([c({type:["combo-box"],json:{read:!1,write:!0}})],ud.prototype,"type",void 0),ud=YT=l([S("esri.form.elements.inputs.ComboBoxInput")],ud);const ule=ud;var KT;function dR(e){return e!=null?new Date(e):null}function pR(e){return e?e.getTime():null}let Bn=KT=class extends Kp{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return dR(t.max)}writeMax(e,t){t.max=pR(e)}readMin(e,t){return dR(t.min)}writeMin(e,t){t.min=pR(e)}clone(){return new KT({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};l([c({type:Boolean,json:{write:!0}})],Bn.prototype,"includeTime",void 0),l([c({type:Date,json:{type:Number,write:!0}})],Bn.prototype,"max",void 0),l([Y("max")],Bn.prototype,"readMax",null),l([X("max")],Bn.prototype,"writeMax",null),l([c({type:Date,json:{type:Number,write:!0}})],Bn.prototype,"min",void 0),l([Y("min")],Bn.prototype,"readMin",null),l([X("min")],Bn.prototype,"writeMin",null),l([c({type:["datetime-picker"],json:{read:!1,write:!0}})],Bn.prototype,"type",void 0),Bn=KT=l([S("esri.form.elements.inputs.DateTimePickerInput")],Bn);const cle=Bn;var ZT;let cd=ZT=class extends Kp{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new ZT({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};l([c({type:String,json:{write:!0}})],cd.prototype,"noValueOptionLabel",void 0),l([c({type:Boolean,json:{write:!0}})],cd.prototype,"showNoValueOption",void 0),l([c({type:["radio-buttons"],json:{read:!1,write:!0}})],cd.prototype,"type",void 0),cd=ZT=l([S("esri.form.elements.inputs.RadioButtonsInput")],cd);const dle=cd;var JT;let dd=JT=class extends Kp{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new JT({offValue:this.offValue,onValue:this.onValue})}};l([c({type:[String,Number],json:{write:!0}})],dd.prototype,"offValue",void 0),l([c({type:[String,Number],json:{write:!0}})],dd.prototype,"onValue",void 0),l([c({type:["switch"],json:{read:!1,write:!0}})],dd.prototype,"type",void 0),dd=JT=l([S("esri.form.elements.inputs.SwitchInput")],dd);const ple=dd;var XT;let Tg=XT=class extends c3{constructor(e){super(e),this.type="text-area"}clone(){return new XT({maxLength:this.maxLength,minLength:this.minLength})}};l([c({type:["text-area"],json:{read:!1,write:!0}})],Tg.prototype,"type",void 0),Tg=XT=l([S("esri.form.elements.inputs.TextAreaInput")],Tg);const hle=Tg;var QT;let Eg=QT=class extends c3{constructor(e){super(e),this.type="text-box"}clone(){return new QT({maxLength:this.maxLength,minLength:this.minLength})}};l([c({type:["text-box"],json:{read:!1,write:!0}})],Eg.prototype,"type",void 0),Eg=QT=l([S("esri.form.elements.inputs.TextBoxInput")],Eg);const fle=Eg,yle={base:Kp,key:"type",typeMap:{"barcode-scanner":lle,"combo-box":ule,"datetime-picker":cle,"radio-buttons":dle,switch:ple,"text-area":hle,"text-box":fle}};var eE;let Xr=eE=class extends vp{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new eE({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};l([c({types:F6,json:{read:{reader:Ox},write:!0}})],Xr.prototype,"domain",void 0),l([c({type:Boolean,json:{write:!0}})],Xr.prototype,"editable",void 0),l([c({type:String,json:{write:!0}})],Xr.prototype,"editableExpression",void 0),l([c({type:String,json:{write:!0}})],Xr.prototype,"fieldName",void 0),l([c({type:String,json:{write:!0}})],Xr.prototype,"hint",void 0),l([c({types:yle,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Xr.prototype,"input",void 0),l([c({type:String,json:{write:!0}})],Xr.prototype,"requiredExpression",void 0),l([c({type:String,json:{read:!1,write:!0}})],Xr.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Xr.prototype,"valueExpression",void 0),Xr=eE=l([S("esri.form.elements.FieldElement")],Xr);const hR=Xr;var tE;let _s=tE=class extends vp{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new tE({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:R(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};l([c({type:Number,json:{write:!0}})],_s.prototype,"displayCount",void 0),l([c({type:["list"],json:{write:!0}})],_s.prototype,"displayType",void 0),l([c({type:Boolean,json:{write:!0}})],_s.prototype,"editable",void 0),l([c({type:[n9],json:{write:!0}})],_s.prototype,"orderByFields",void 0),l([c({type:Number,json:{write:!0}})],_s.prototype,"relationshipId",void 0),l([c({type:["relationship"],json:{read:!1,write:!0}})],_s.prototype,"type",void 0),_s=tE=l([S("esri.form.elements.RelationshipElement")],_s);const fR=_s;function i7(e){return{typesWithGroup:{base:vp,key:"type",typeMap:{attachment:cR,field:hR,group:e,relationship:fR}},typesWithoutGroup:{base:vp,key:"type",typeMap:{attachment:cR,field:hR,relationship:fR}}}}function r7(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function n7(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}function o7(e,t,i=!0){return e?e.map(r=>zo(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var iE;let Io=iE=class extends vp{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return o7(e,Bb,!1)}readElements(e,t){return r7(t.formElements,Bb,!1)}writeElements(e,t){t.formElements=n7(e,Bb,!1)}clone(){return new iE({description:this.description,elements:R(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};l([c({json:{write:!0}})],Io.prototype,"elements",void 0),l([Fe("elements")],Io.prototype,"castElements",null),l([Y("elements",["formElements"])],Io.prototype,"readElements",null),l([X("elements")],Io.prototype,"writeElements",null),l([c({type:["collapsed","expanded"],json:{write:!0}})],Io.prototype,"initialState",void 0),l([c({type:String,json:{read:!1,write:!0}})],Io.prototype,"type",void 0),Io=iE=l([S("esri.form.elements.GroupElement")],Io);const Bb=i7(Io),mle=Io;var rE;const Ub=i7(mle);let To=rE=class extends U{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return o7(e,Ub)}readElements(e,t){return r7(t.formElements,Ub)}writeElements(e,t){t.formElements=n7(e,Ub)}clone(){return new rE({description:this.description,expressionInfos:R(this.expressionInfos),elements:R(this.elements),title:this.title})}};l([c({type:String,json:{write:!0}})],To.prototype,"description",void 0),l([c({json:{write:!0}})],To.prototype,"elements",void 0),l([Fe("elements")],To.prototype,"castElements",null),l([Y("elements",["formElements"])],To.prototype,"readElements",null),l([X("elements")],To.prototype,"writeElements",null),l([c({type:[sle],json:{write:!0}})],To.prototype,"expressionInfos",void 0),l([c({type:String,json:{write:!0}})],To.prototype,"title",void 0),To=rE=l([S("esri.form.FormTemplate")],To);const gle=To;var pf;const q1=yi()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),s7=q1.jsonValues.slice();m4(s7,"orthometric");const zf=yi()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Un=pf=class extends U{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return q1.write(e,t,i)}readHeightModel(e,t,i){return q1.read(e)||(i&&i.messages&&i.messages.push(vle(e,{context:i})),null)}readHeightUnit(e,t,i){return zf.read(e)||(i&&i.messages&&i.messages.push(yR(e,{context:i})),null)}readHeightUnitService(e,t,i){return Y9(e)||zf.read(e)||(i&&i.messages&&i.messages.push(yR(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new pf({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=dZ(t);return new pf({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new pf;return t.read(e,{origin:"web-scene"}),t}};function yR(e,t){return new Yi("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function vle(e,t){return new Yi("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}l([c({type:q1.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:s7,default:"ellipsoidal"}}}})],Un.prototype,"heightModel",void 0),l([X("web-scene","heightModel")],Un.prototype,"writeHeightModel",null),l([Y(["web-scene","service"],"heightModel")],Un.prototype,"readHeightModel",null),l([c({type:zf.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:zf.jsonValues,write:zf.write}}}})],Un.prototype,"heightUnit",void 0),l([Y("web-scene","heightUnit")],Un.prototype,"readHeightUnit",null),l([Y("service","heightUnit")],Un.prototype,"readHeightUnitService",null),l([c({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Un.prototype,"vertCRS",void 0),l([Y("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Un.prototype,"readVertCRS",null),Un=pf=l([S("esri.geometry.HeightModelInfo")],Un);const mw=Un;function mR(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const n of r)n.length>2&&(n[2]*=i)}function wle(e,t,i){if(!e&&!t||!i)return;const r=hp(i);gR(e,i,r),gR(t,i,r)}function gR(e,t,i){if(e)for(const r of e)ble(r.geometry,t,i)}function ble(e,t,i){if(O(e)||!e.spatialReference||Ji(e.spatialReference,t))return;const r=hp(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)mR(e,e.rings,r);else if("paths"in e)mR(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=r)}}let _le=0;const Vb=W.getLogger("esri.layers.graphics.sources.MemorySource");let Ns=class extends Ho.LoadableMixin(xv(Ml(he))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=T(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);JS(e,this.layer.spatialReference,i);const r=Qy.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const n=this.layer.objectIdField;for(const o of r.features){const s=o.attributes[n],a=this._idToClientGraphic.get(s);a&&(o.geometry=a.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new I("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return JS(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:Oe.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new I("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=d=>"objectId"in d&&d.objectId!=null?d.objectId:"attributes"in d&&d.attributes[t]!=null?d.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const d of e.deleteFeatures){const h=o(d);h!=null&&r.push(h)}const s=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const d of e.updateFeatures)if(n.push(this._serializeFeature(d)),s){const h=o(d);h!=null&&s.set(h,d)}}wle(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:a,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:r});return this.fullExtent=a,i&&i.finish(u.uidToObjectId),this._updateClientGraphicIds(s,u),this._createEditsResult(u)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||O(e))return;const i=[];for(const{geometry:r}of e)!T(r)||r.type!=="mesh"||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const r=e.get(i.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new I("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let o=0;o<e.length;o++){const s=e[o],a=this._serializeFeature(s);!r&&T(s.geometry)&&(r=s.geometry.type),i[o]=a,t.set(`${a.uid}`,s)}const n=this;return{features:i,inferredGeometryType:r,finish(o){const s=n.sourceJSON.objectIdField;for(const a in o){const u=o[a],d=t.get(a);d&&(d.attributes||(d.attributes={}),u===-1?delete d.attributes[s]:d.attributes[s]=u,n._addIdToClientGraphic(d))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get layerOrSourceGeometryType(){var e,t,i;return(i=(e=this.layer)==null?void 0:e.geometryType)!=null?i:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(_le++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return O(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?fr.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await j9("MemorySourceWorker",{strategy:k("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:n,hasZ:o,timeInfo:s}=this.layer,a=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",y=>{Vb.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),y.preventDefault()}));const d={features:u.features,fields:t&&t.map(y=>y.toJSON()),geometryType:bI.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&n,hasZ:this.layerOrSourceGeometryType==="mesh"||o,objectIdField:r,spatialReference:a?null:i&&i.toJSON(),timeInfo:s?s.toJSON():null},h=await this._connection.invoke("load",d,{signal:e});for(const y of h.warnings)Vb.warn(y.message,{layer:this.layer,warning:y});h.featureErrors.length&&Vb.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);const f=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(f.geometryType=bI.toJSON(u.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(h.assignedObjectIds)}};l([dA({Type:Ni,ensureType:Ze(Ni)})],Ns.prototype,"itemType",void 0),l([c()],Ns.prototype,"type",void 0),l([c({constructOnly:!0})],Ns.prototype,"layer",void 0),l([c({readOnly:!0})],Ns.prototype,"workerGeometryType",null),l([c()],Ns.prototype,"sourceJSON",void 0),Ns=l([S("esri.layers.graphics.sources.MemorySource")],Ns);function Sle(e){return"portalItem"in e}const a7=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Sle(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return l([c({type:String})],t.prototype,"apiKey",null),t=l([S("esri.layers.mixins.APIKeyMixin")],t),t},l7={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},u7=Object.values(l7),c7=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${u7.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Tle=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${u7.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Ele=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Eve(e){return!!c7.test(e)}function wp(e){if(O(e))return null;const t=rt(e),i=t.path.match(c7)||t.path.match(Tle);if(!i)return null;const[,r,n,o,s]=i,a=n.indexOf("/");return{title:d3(a!==-1?n.slice(a+1):n),serverType:l7[o.toLowerCase()],sublayer:s!=null&&s!==""?parseInt(s,10):null,url:{path:r}}}function Ale(e){const t=rt(e).path.match(Ele);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function d3(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function xle(e,t){const i=[];if(e){const r=wp(e);T(r)&&r.title&&i.push(r.title)}if(t){const r=d3(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function d7(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",n="//features",o=(e=e.toLowerCase()).includes(t),s=e.includes(i)||e.includes(r)||e.includes(n);return o&&s}function Cle(e,t){return e&&Nv(I5(e,t))}function Ile(e){let{url:t}=e;if(!t)return{url:t};t=I5(t,e.logger);const i=rt(t),r=wp(i.path);let n;if(T(r))r.sublayer!=null&&e.layer.layerId==null&&(n=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const o=Ale(i.path);T(o)&&(t=o.serviceUrl,n=o.sublayerId)}return{url:Nv(t),layerId:n}}function Mle(e,t,i,r,n){mc(t,r,"url",n),r.url&&e.layerId!=null&&(r.url=Go(r.url,i,e.layerId.toString()))}function Ave(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),o=t.includes("/wmsserver");return i&&(r||n||o)}const p7=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=wp(this.url);if(T(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Cle(i,W.getLogger(this.declaredClass)))}};return l([c()],t.prototype,"title",null),l([c({type:String})],t.prototype,"url",null),t=l([S("esri.layers.mixins.ArcGISService")],t),t},vR={read:{reader:Dx},write:{allowNull:!0,writer:Lx}},p3=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return l([c({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),l([c({json:{read:!1,write:!1,origins:{"web-map":vR,"portal-item":vR}}})],t.prototype,"effect",void 0),t=l([S("esri.layers.mixins.BlendLayer")],t),t},h3=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return l([c({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=l([S("esri.layers.mixins.CustomParametersMixin")],t),t};var nE;const jb=new Se({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),zb=new Se({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Eo=nE=class extends U{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:o,units:s,distance:a}=this;return new Vi({geometry:R(i),objectIds:R(o),spatialRelationship:r,timeExtent:R(n),where:t,units:s,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:n,units:o,distance:s}=this;return new nE({geometry:R(t),objectIds:R(n),spatialRelationship:i,timeExtent:R(r),where:e,units:o,distance:s})}};l([c({type:String,json:{write:!0}})],Eo.prototype,"where",void 0),l([c({types:Ac,json:{write:!0}})],Eo.prototype,"geometry",void 0),l([c({type:jb.apiValues,json:{name:"spatialRel",read:{reader:jb.read},write:{allowNull:!1,writer:jb.write,overridePolicy(){return{enabled:T(this.geometry)}}}}})],Eo.prototype,"spatialRelationship",void 0),l([c({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Eo.prototype,"distance",void 0),l([c({type:[Number],json:{write:!0}})],Eo.prototype,"objectIds",void 0),l([c({type:zb.apiValues,json:{read:zb.read,write:{writer:zb.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Eo.prototype,"units",void 0),l([c({type:Xo,json:{write:!0}})],Eo.prototype,"timeExtent",void 0),Eo=nE=l([S("esri.layers.support.FeatureFilter")],Eo);const Nle=Eo;var oE;const wR={read:{reader:Dx},write:{writer:Lx,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},bR={read:{reader:Dx},write:{writer:Lx,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},_R={name:"showExcludedLabels",default:!0};let mu=oE=class extends U{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,n;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const o=Object.keys(i.filter);if(o.length>1||o[0]!=="where")return(r=t.messages)==null||r.push(new I("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=t.messages)==null||n.push(new I("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new oE({filter:T(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};l([c({type:Nle,json:{write:{allowNull:!0,writer(e,t,i,r){const n=e==null?void 0:e.write({},r);n&&Object.keys(n).length!==0?dr(i,n,t):dr(i,null,t)}}}})],mu.prototype,"filter",void 0),l([c({json:{write:!0,origins:{"web-map":wR,"portal-item":wR}}})],mu.prototype,"includedEffect",void 0),l([c({json:{write:!0,origins:{"web-map":bR,"portal-item":bR}}})],mu.prototype,"excludedEffect",void 0),l([c({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":_R,"portal-item":_R}}})],mu.prototype,"excludedLabelsVisible",void 0),mu=oE=l([S("esri.layers.support.FeatureEffect")],mu);const Rle=mu,SR={write:{allowNull:!0}},h7=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return l([c({type:Rle,json:{origins:{"web-map":SR,"portal-item":SR}}})],t.prototype,"featureEffect",void 0),t=l([S("esri.layers.mixins.FeatureEffectLayer")],t),t},Ple={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function $le(e){if(!e)return e;const{start:t,end:i}=e;return new Xo({start:T(t)?oc(t,-t.getTimezoneOffset(),"minutes"):t,end:T(i)?oc(i,-i.getTimezoneOffset(),"minutes"):i})}function Dle(e){if(!e)return e;const{start:t,end:i}=e;return new Xo({start:T(t)?oc(t,t.getTimezoneOffset(),"minutes"):t,end:T(i)?oc(i,i.getTimezoneOffset(),"minutes"):i})}var sE;let hf=sE=class extends U{async collectRequiredFields(e,t){return Zi(e,t,this.expression)}clone(){return new sE({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};l([c({type:String,json:{write:!0}})],hf.prototype,"expression",void 0),l([c({type:String,json:{write:!0}})],hf.prototype,"title",void 0),hf=sE=l([S("esri.layers.support.FeatureExpressionInfo")],hf);const TR=hf;function Lle(){const e=Object.keys(N8);return e.sort(),e}const Ole=Lle();var aE;const Qm=yi()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),ER=new Se({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Ss=aE=class extends U{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):T(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new aE({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&RV(this.featureExpressionInfo,e.featureExpressionInfo)}};l([c({type:TR,json:{write:!0}})],Ss.prototype,"featureExpressionInfo",void 0),l([Y("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Ss.prototype,"readFeatureExpressionInfo",null),l([X("featureExpressionInfo",{featureExpressionInfo:{type:TR},"featureExpression.value":{type:[0]}})],Ss.prototype,"writeFeatureExpressionInfo",null),l([c({type:Qm.apiValues,nonNullable:!0,json:{type:Qm.jsonValues,read:Qm.read,write:{writer:Qm.write,isRequired:!0}}})],Ss.prototype,"mode",null),l([c({type:Number,json:{write:!0}})],Ss.prototype,"offset",void 0),l([c({type:Ole,json:{type:String,read:ER.read,write:ER.write}})],Ss.prototype,"unit",null),Ss=aE=l([S("esri.layers.support.ElevationInfo")],Ss);const kle=Ss,f7={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},gw={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},vw={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},y7={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:mc}}},m7={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},g7={value:null,type:kle,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function xve(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Hf={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},Fle={...Hf,json:{...Hf.json,origins:{"web-document":{...Hf.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?ry(t.layerDefinition.drawingInfo.transparency):void 0:ry(t.drawingInfo.transparency)}}},Cve={type:Xo,readOnly:!0,get(){var a,u;if(!((a=this.layer)!=null&&a.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=(u=this.view)==null?void 0:u.timeExtent;let n=this.layer.timeExtent;e&&(n=Dle(n));let o=i?r&&n?r.intersection(n):r||n:n;if(!o||o.isEmpty||o.isAllTime)return o;t&&(o=o.offset(-t.value,t.unit)),e&&(o=$le(o));const s=this._get("timeExtent");return o.equals(s)?s:o}},Ive={type:Oe,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Oe.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=me.fromJSON(t.spatialReference)),i}}}},read:!1}},v7={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Ble={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},Ule={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},w7={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},f3=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,n,o){(o&&o.layerContainerType==="ground"||i&&Oz(this,n,{},o))&&(r[n]=i)}writeOperationalLayerType(i,r,n,o){!i||o&&o.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i||"Layer"}read(i,r){r&&(r.layer=this),Pz(this,i,n=>super.read(i,n),r)}write(i,r){var s,a;if(r!=null&&r.origin){const u=`${r.origin}/${r.layerContainerType||"operational-layers"}`,d=Ple[u];let h=d&&d[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&u==="web-scene/operational-layers"&&(h=!1),!h)return(s=r.messages)==null||s.push(new I("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${u}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),o=!!r&&!!r.messages&&!!r.messages.filter(u=>u instanceof I&&u.name==="web-document-write:property-required").length;return Mv(n==null?void 0:n.url)?((a=r==null?void 0:r.messages)==null||a.push(new I("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:n}beforeSave(){}};return l([c({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),l([c(w7)],t.prototype,"listMode",void 0),l([X("listMode")],t.prototype,"writeListMode",null),l([c({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),l([X("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),l([c(Hf)],t.prototype,"opacity",void 0),l([c({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),l([X([void 0,"web-scene"],"title")],t.prototype,"writeTitle",null),l([c({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=l([S("esri.layers.mixins.OperationalLayer")],t),t};var lE;const Hb=new Se({asc:"ascending",desc:"descending"});let pd=lE=class extends U{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new lE({field:this.field,valueExpression:this.valueExpression,order:this.order})}};l([c({type:String,json:{write:!0}})],pd.prototype,"field",void 0),l([c({type:String,json:{write:!0}})],pd.prototype,"valueExpression",void 0),l([c({type:Hb.apiValues,json:{read:Hb.read,write:Hb.write}})],pd.prototype,"order",void 0),pd=lE=l([S("esri.layers.support.OrderByInfo")],pd);const b7=pd;function Vle(e,t,i){if(!e)return null;const r=e.find(o=>!!o.field);if(!r)return null;const n=new b7;return n.read(r,i),[n]}function jle(e,t,i,r){const n=e.find(o=>!!o.field);n&&dr(i,[n.toJSON()],t)}const _7=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return l([c({type:[b7],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:Vle},write:{target:"layerDefinition.orderBy",writer:jle}}})],t.prototype,"orderBy",void 0),t=l([S("esri.layers.mixins.OrderedLayer")],t),t},zle=W.getLogger("esri.layers.mixins.PortalLayer"),S7=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var i;(i=this.portalItem)==null||i.destroy(),this.portalItem=null}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new u1({id:r.itemId,portal:n&&n.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const n=await B(()=>import("./layersLoader.71c8e16c.js").then(o=>o.l),["layersLoader.71c8e16c.js","lazyLayerLoader.d554f446.js"],import.meta.url);return bt(r),await n.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData},r)}catch(n){throw qi(n)||zle.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(fl(r),!0)))}async _fetchUserHasEditingPrivileges(i){const r=this.url?gt==null?void 0:gt.findCredential(this.url):null;if(!r)return!0;const n=e0.credential===r?e0.user:await this._fetchEditingUser(i);return e0.credential=r,e0.user=n,O(n)||n.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var h,f;const r=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(r)return r;const n=gt.findServerInfo(this.url);if(!(n!=null&&n.owningSystemUrl))return null;const o=`${n.owningSystemUrl}/sharing/rest`,s=Yt.getDefault();if(s&&s.loaded&&Dr(s.restUrl)===Dr(o))return s.user;const a=`${o}/community/self`,u=T(i)?i.signal:null,d=await Cv(Be(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return d.ok?AA.fromJSON(d.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const n=r&&r.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Yt.getDefault());return n&&o&&!T5(o.restUrl,n.restUrl)?(r.messages&&r.messages.push(new I("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return l([c({type:u1})],t.prototype,"portalItem",null),l([Y("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),l([X("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),l([c({clonable:!1})],t.prototype,"resourceReferences",void 0),l([c({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=l([S("esri.layers.mixins.PortalLayer")],t),t},e0={credential:null,user:null},Ay=new he,Gf=new WeakMap;function Hle(e){T7(e)&&Ay.push(e)}function Gle(e){T7(e)&&Ay.includes(e)&&Ay.remove(e)}function T7(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function E7(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:E7(t,e%t):0}let Gb=0,t0=0;function Wle(){var t;const e=Date.now();for(const i of Ay)i.refreshInterval&&e-((t=Gf.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(Gf.set(i,e),i.refresh(e))}z4(()=>{const e=Date.now();let t=0;for(const i of Ay)t=E7(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Gf.get(i)||Gf.set(i,e):Gf.delete(i);if(t!==t0){if(t0=t,clearInterval(Gb),t0===0)return void(Gb=0);Gb=setInterval(Wle,t0)}});const A7=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=nA(()=>this.hasDataChanged()),this.when().then(()=>{Hle(this)},()=>{})}destroy(){Gle(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){C_(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{W.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return l([c({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),l([c({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),l([c()],t.prototype,"refreshParameters",null),t=l([S("esri.layers.mixins.RefreshableLayer")],t),t},y3=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&qle(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return l([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),l([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),l([c({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=l([S("esri.layers.mixins.ScaleRangeLayer")],t),t};function qle(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Ju=yi()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var uE;let ff=uE=class extends U{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return hre(this.value,this.unit,"milliseconds")}clone(){return new uE({value:this.value,unit:this.unit})}};l([c({type:Number,json:{write:!0},nonNullable:!0})],ff.prototype,"value",void 0),l([c({type:Ju.apiValues,json:{type:Ju.jsonValues,read:Ju.read,write:Ju.write},nonNullable:!0})],ff.prototype,"unit",void 0),ff=uE=l([S("esri.TimeInterval")],ff);const xy=ff;var cE;let hd=cE=class extends U{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new cE({respectsDaylightSaving:e,timezone:t})}};l([c({type:Boolean,json:{write:!0}})],hd.prototype,"respectsDaylightSaving",void 0),l([Y("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],hd.prototype,"readRespectsDaylightSaving",null),l([c({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],hd.prototype,"timezone",void 0),hd=cE=l([S("esri.layers.support.TimeReference")],hd);const Yle=hd;var dE;let Si=dE=class extends U{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new Xo({start:i,end:r})}writeFullTimeExtent(e,t){e&&T(e.start)&&T(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new xy({value:t.timeInterval,unit:Ju.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new xy({value:t.defaultTimeInterval,unit:Ju.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:o,fullTimeExtent:s,trackIdField:a,useTime:u}=this;return new dE({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:R(o),fullTimeExtent:R(s),trackIdField:a,useTime:u})}};l([c({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Si.prototype,"cumulative",void 0),l([c({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Si.prototype,"endField",void 0),l([c({type:Xo,json:{write:{enabled:!0,allowNull:!0}}})],Si.prototype,"fullTimeExtent",void 0),l([Y("fullTimeExtent",["timeExtent"])],Si.prototype,"readFullTimeExtent",null),l([X("fullTimeExtent")],Si.prototype,"writeFullTimeExtent",null),l([c({type:Boolean,json:{write:!0}})],Si.prototype,"hasLiveData",void 0),l([c({type:xy,json:{write:{enabled:!0,allowNull:!0}}})],Si.prototype,"interval",void 0),l([Y("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Si.prototype,"readInterval",null),l([X("interval")],Si.prototype,"writeInterval",null),l([c({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Si.prototype,"startField",void 0),l([c({type:Yle,json:{write:{enabled:!0,allowNull:!0}}})],Si.prototype,"timeReference",void 0),l([c({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Si.prototype,"trackIdField",void 0),l([c({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Si.prototype,"useTime",void 0),Si=dE=l([S("esri.layers.support.TimeInfo")],Si);const x7=Si,C7=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const o=n.timeOffset,s=Ju.fromJSON(n.timeOffsetUnits);return o&&s?new xy({value:o,unit:s}):null}set timeInfo(i){UA(i,this.fieldsIndex),this._set("timeInfo",i)}};return l([c({type:Xo,json:{write:!1}})],t.prototype,"timeExtent",void 0),l([c({type:xy})],t.prototype,"timeOffset",void 0),l([Y("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),l([c({value:null,type:x7,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),l([c({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=l([S("esri.layers.mixins.TemporalLayer")],t),t};var pE;let Rs=pE=class extends U{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:i,isUnique:r,description:n}=this;return new pE({name:e,fields:t,isAscending:i,isUnique:r,description:n})}};l([c({constructOnly:!0})],Rs.prototype,"name",void 0),l([c({constructOnly:!0})],Rs.prototype,"fields",void 0),l([c({constructOnly:!0})],Rs.prototype,"isAscending",void 0),l([c({constructOnly:!0})],Rs.prototype,"isUnique",void 0),l([c({constructOnly:!0})],Rs.prototype,"description",void 0),Rs=pE=l([S("esri.layers.support.FeatureIndex")],Rs);let vl=class extends U{constructor(){super(...arguments),this.type=null}};l([c({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],vl.prototype,"type",void 0),vl=l([S("esri.layers.support.FeatureReduction")],vl);var hE;let fd=hE=class extends U{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new hE({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};l([c({type:String,json:{write:!0}})],fd.prototype,"statisticType",void 0),l([c({type:String,json:{write:!0}})],fd.prototype,"onStatisticField",void 0),l([c({type:String,json:{write:!0}})],fd.prototype,"onStatisticValueExpression",void 0),fd=hE=l([S("esri.layers.support.OutStatistic")],fd);const Kle=fd;var fE;let yf=fE=class extends U{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new fE({name:this.name,outStatistic:this.outStatistic.clone()})}};l([c({type:String,json:{write:!0}})],yf.prototype,"name",void 0),l([c({type:Kle,json:{write:!0}})],yf.prototype,"outStatistic",void 0),yf=fE=l([S("esri.layers.support.AggregateField")],yf);const I7=yf,m3="__begin__",g3="__end__",Zle=new RegExp(m3,"ig"),Jle=new RegExp(g3,"ig"),AR=new RegExp("^"+m3,"i"),xR=new RegExp(g3+"$","i"),Y1='"',Xle=Y1+" + ",Qle=" + "+Y1;function eue(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function tue(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function v3(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=eue(e.labelExpression),t.type="conventional"),t}function iue(e){const t=v3(e);if(!t)return null;switch(t.type){case"conventional":return yE(t.expression);case"arcade":return t.expression}return null}function rue(e){const t=v3(e);if(!t)return null;switch(t.type){case"conventional":return oue(t.expression);case"arcade":return M7(t.expression)}return null}function yE(e){let t;return e?(t=jo(e,i=>m3+'$feature["'+i+'"]'+g3),t=AR.test(t)?t.replace(AR,""):Y1+t,t=xR.test(t)?t.replace(xR,""):t+Y1,t=t.replace(Zle,Xle).replace(Jle,Qle)):t='""',t}const nue=/^\s*\{([^}]+)\}\s*$/i;function oue(e){const t=e.match(nue);return t&&t[1].trim()||null}const sue=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,aue=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,lue=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function M7(e){if(!e)return null;let t=sue.exec(e)||aue.exec(e);return t?t[1]||t[3]:(t=lue.exec(e),t?t[2]:null)}var mE;let Oa=mE=class extends U{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?yE(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=yE(this.value)),e!=null&&(t[i]=e)}clone(){return new mE({expression:this.expression,title:this.title,value:this.value})}};l([c({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Oa.prototype,"expression",void 0),l([Y("expression",["expression","value"])],Oa.prototype,"readExpression",null),l([X("expression")],Oa.prototype,"writeExpression",null),l([c({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Oa.prototype,"title",void 0),l([c({json:{read:!1,write:!1}})],Oa.prototype,"value",void 0),Oa=mE=l([S("esri.layers.support.LabelExpressionInfo")],Oa);const N7=Oa,R7=[252,146,31,255],P7={type:"esriSMS",style:"esriSMSCircle",size:6,color:R7,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},$7={type:"esriSLS",style:"esriSLSSolid",width:.75,color:R7},D7={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},uue={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},cue={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},due={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},pue={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};Pl.fromJSON(P7);Br.fromJSON($7);Xs.fromJSON(D7);const hue=Cc.fromJSON(uue),Mve=Pl.fromJSON(cue),Nve=Br.fromJSON(due),Rve=Xs.fromJSON(pue);var gE;const i0=new Se({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function L7(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function fue(e){return(e==null?void 0:e.type)==="map-image"}function O7(e){var t,i;return!!fue(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function yue(e){return L7(e)||O7(e.layer)}let Et=gE=class extends U{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=hue,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=(r,n,o)=>{switch(n){case"=":return r==o;case"<>":return r!=o;case">":return r>o;case">=":return r>=o;case"<":return r<o;case"<=":return r<=o}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const n=i(t[r[0]],r[1],r[2]),o=r[3],s=i(t[r[4]],r[5],r[6]);switch(o){case"AND":return n&&s;case"OR":return n||s}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=tue(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=M7(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&L7(r))e=new N7({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(r);n.expression&&(t[i]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return v3(this)}getLabelExpressionArcade(){return iue(this)}getLabelExpressionSingleField(){return rue(this)}hash(){return JSON.stringify(this)}clone(){return new gE({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:R(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:R(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};l([c({type:String,json:{write:!0}})],Et.prototype,"name",void 0),l([c({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Et.prototype,"allowOverrun",void 0),l([c({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],Et.prototype,"deconflictionStrategy",void 0),l([c({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&O7(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Et.prototype,"labelExpression",void 0),l([Y("labelExpression")],Et.prototype,"readLabelExpression",null),l([X("labelExpression")],Et.prototype,"writeLabelExpression",null),l([c({type:N7,json:{write:{overridePolicy:(e,t,i)=>yue(i)?{allowNull:!0}:{enabled:!1}}}})],Et.prototype,"labelExpressionInfo",void 0),l([X("labelExpressionInfo")],Et.prototype,"writeLabelExpressionInfo",null),l([c({type:i0.apiValues,json:{type:i0.jsonValues,read:i0.read,write:i0.write}})],Et.prototype,"labelPlacement",void 0),l([c({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Et.prototype,"labelPosition",void 0),l([c({type:Number})],Et.prototype,"maxScale",void 0),l([X("maxScale")],Et.prototype,"writeMaxScale",null),l([c({type:Number})],Et.prototype,"minScale",void 0),l([X("minScale")],Et.prototype,"writeMinScale",null),l([c({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],Et.prototype,"repeatLabel",void 0),l([c({type:Number,cast:je,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Et.prototype,"repeatLabelDistance",void 0),l([c({types:SK,json:{origins:{"web-scene":{types:TK,write:tR,default:null}},write:tR,default:null}})],Et.prototype,"symbol",void 0),l([c({type:Boolean,json:{write:!0}})],Et.prototype,"useCodedValues",void 0),l([c({type:String,json:{write:!0}})],Et.prototype,"where",void 0),Et=gE=l([S("esri.layers.support.LabelClass")],Et);const sm=Et;var vE;let Vn=vE=class extends vl{constructor(e){super(e),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new vE({fields:R(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:R(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:R(this.popupTemplate),renderer:R(this.renderer)})}};l([pe({binning:"binning"})],Vn.prototype,"type",void 0),l([c({type:Number,json:{write:!0}})],Vn.prototype,"fixedBinLevel",void 0),l([c({type:[sm],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Vn.prototype,"labelingInfo",void 0),l([c(vw)],Vn.prototype,"labelsVisible",void 0),l([c(gw)],Vn.prototype,"popupEnabled",void 0),l([c({type:Nl,json:{name:"popupInfo",write:!0}})],Vn.prototype,"popupTemplate",void 0),l([c({type:[I7],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Vn.prototype,"fields",void 0),l([c({types:om,json:{write:!0}})],Vn.prototype,"renderer",void 0),Vn=vE=l([S("esri.layers.support.FeatureReductionBinning")],Vn);const mue=Vn;var wE;let rr=wE=class extends U{constructor(e){super(e),this.type="cluster",this.clusterRadius=je("80px"),this.clusterMinSize=je("12px"),this.clusterMaxSize=je("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new wE({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:R(this.labelingInfo),labelsVisible:this.labelsVisible,fields:R(this.fields),renderer:R(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:R(this.popupTemplate)})}};l([c({type:["cluster"],readOnly:!0,json:{write:!0}})],rr.prototype,"type",void 0),l([c({type:Number,cast:e=>e==="auto"?e:je(e),json:{write:!0}})],rr.prototype,"clusterRadius",void 0),l([c({type:Number,cast:je,json:{write:!0}})],rr.prototype,"clusterMinSize",void 0),l([c({type:Number,cast:je,json:{write:!0}})],rr.prototype,"clusterMaxSize",void 0),l([c(gw)],rr.prototype,"popupEnabled",void 0),l([c({type:Nl,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],rr.prototype,"popupTemplate",void 0),l([c({types:om,json:{write:!0}})],rr.prototype,"renderer",void 0),l([c({types:bK})],rr.prototype,"symbol",void 0),l([c({type:[sm],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],rr.prototype,"labelingInfo",void 0),l([c(vw)],rr.prototype,"labelsVisible",void 0),l([c({type:[I7],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],rr.prototype,"fields",void 0),rr=wE=l([S("esri.layers.support.FeatureReductionCluster")],rr);const k7=rr;var bE;let Ag=bE=class extends vl{constructor(e){super(e),this.type="selection"}clone(){return new bE}};l([c({type:["selection"]})],Ag.prototype,"type",void 0),Ag=bE=l([S("esri.layers.support.FeatureReductionSelection")],Ag);const CR=Ag,IR={key:"type",base:vl,typeMap:{selection:k7}},F7={types:{key:"type",base:vl,typeMap:{selection:CR,cluster:k7,binning:mue}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:IR},"portal-item":{types:IR},"web-scene":{types:{key:"type",base:vl,typeMap:{selection:CR}}}}}},MR=new Se({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let ka=class extends gr(U){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};l([c({json:{write:!0}})],ka.prototype,"name",void 0),l([c({json:{write:!0}})],ka.prototype,"description",void 0),l([c({json:{read:MR.read,write:MR.write}})],ka.prototype,"drawingTool",void 0),l([c({json:{write:!0}})],ka.prototype,"prototype",void 0),l([c({json:{write:!0}})],ka.prototype,"thumbnail",void 0),ka=l([S("esri.layers.support.FeatureTemplate")],ka);const ww=ka;let Ts=class extends gr(U){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=Ox(e[i]);return t}writeDomains(e,t){var r;const i={};for(const n of Object.keys(e))e[n]&&(i[n]=(r=e[n])==null?void 0:r.toJSON());t.domains=i}};l([c({json:{write:!0}})],Ts.prototype,"id",void 0),l([c({json:{write:!0}})],Ts.prototype,"name",void 0),l([c({json:{write:!0}})],Ts.prototype,"domains",void 0),l([Y("domains")],Ts.prototype,"readDomains",null),l([X("domains")],Ts.prototype,"writeDomains",null),l([c({type:[ww],json:{write:!0}})],Ts.prototype,"templates",void 0),Ts=l([S("esri.layers.support.FeatureType")],Ts);const w3=Ts;function gue(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function NR(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function RR(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class vue{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const i=[];for(const r of t){const n=r&&r.name;if(n){const o=PR(n);this._fieldsMap.set(n,r),this._fieldsMap.set(o,r),i.push(o),gue(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):jA(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),NR(r)||RR(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)NR(t)||RR(t)||t.nullable||qq(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(PR(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name}}function PR(e){return e.toLowerCase().trim()}const wue=W.getLogger("esri.layers.support.fieldProperties");function B7(){return{fields:{type:[Jy],value:null},fieldsIndex:{readOnly:!0,get(){return new vue(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||wue.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return BL(this.fieldsIndex,e)}}}}let yd=class extends gr(U){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};l([c({type:String,json:{read:{source:"shapeAreaFieldName"}}})],yd.prototype,"shapeAreaField",void 0),l([c({type:String,json:{read:{source:"shapeLengthFieldName"}}})],yd.prototype,"shapeLengthField",void 0),l([c({type:String,json:{read:e=>mZ.read(e)||gZ.read(e)}})],yd.prototype,"units",void 0),yd=l([S("esri.layers.support.GeometryFieldsInfo")],yd);const bue=yd,_ue=/\[([^\[\]]+)\]/gi;function _E(e,t,i){return e?e.map(r=>{const n=new sm;if(n.read(r,i),n.labelExpression){const o=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replace(_ue,(s,a)=>`[${Sue(a,o)}]`)}return n}):null}function Sue(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const n=t[r].name;if(n.toLowerCase()===i)return n}return e}var SE;let md=SE=class extends U{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new he}clone(){return new SE({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};l([c({type:String,json:{write:!0}})],md.prototype,"floorField",void 0),l([c({json:{read:!1,write:!1}})],md.prototype,"viewAllMode",void 0),l([c({json:{read:!1,write:!1}})],md.prototype,"viewAllLevelIds",void 0),md=SE=l([S("esri.layers.support.LayerFloorInfo")],md);const Tue=md,$R=new Se({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),DR=new Se({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Qr=class extends gr(U){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};l([c({json:{read:$R.read,write:$R.write}})],Qr.prototype,"cardinality",void 0),l([c({json:{read:!0,write:!0}})],Qr.prototype,"composite",void 0),l([c({json:{read:!0,write:!0}})],Qr.prototype,"id",void 0),l([c({json:{read:!0,write:!0}})],Qr.prototype,"keyField",void 0),l([c({json:{read:!0,write:!0}})],Qr.prototype,"keyFieldInRelationshipTable",void 0),l([c({json:{read:!0,write:!0}})],Qr.prototype,"name",void 0),l([c({json:{read:!0,write:!0}})],Qr.prototype,"relatedTableId",void 0),l([c({json:{read:!0,write:!0}})],Qr.prototype,"relationshipTableId",void 0),l([c({json:{read:DR.read,write:DR.write}})],Qr.prototype,"role",void 0),Qr=l([S("esri.layers.support.Relationship")],Qr);const Eue=Qr,jn=[];function Aue(e,t){if(d7(e.url))return!0;const{wkid:i}=t;for(const r of jn){if(e.version>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}jn.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),jn.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),jn.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),jn.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),jn.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),jn.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),jn.push([10.61,()=>new Set([102497])]),jn.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),jn.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),jn.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function xue(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await Cv(r.populateFromStyle());if(bt(i),n.ok===!1){const o=n.error;t&&t.messages&&t.messages.push(new Yi("renderer:style-reference",`Failed to create unique value renderer from style reference: ${o.message}`,{error:o,context:t})),e.clear("renderer",t.origin)}}}const Cue=["oid","global-id"],Iue=["oid","global-id","guid"];function U7({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:n},o){if(!i)return null;const s=Due({editFieldsInfo:t,fields:i,objectIdField:r},o);if(!s.length)return null;const a=kue({titleBase:n,fields:i,displayField:e}),u=Oue();return new Nl({title:a,content:u,fieldInfos:s})}const Mue=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],Nue=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!V7(e.name,t)&&(!i||e.name!==i)&&!Cue.includes(e.type)&&!Mue.some(n=>n.test(e.name));function Rue(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort(Pue),e}function Pue(e,t){return e.type==="oid"?-1:t.type==="oid"?1:LR(e)?-1:LR(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function V7(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:n,editorField:o}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),n&&n.toLowerCase(),o&&o.toLowerCase()].includes(e.toLowerCase())}function $ue(e,t){return e.editable&&!Iue.includes(e.type)&&!V7(e.name,t)}function Due({editFieldsInfo:e,fields:t,objectIdField:i},r){return Rue(t,(r==null?void 0:r.ignoreFieldTypes)||Fue).map(n=>new Vy({fieldName:n.name,isEditable:$ue(n,e),label:n.alias,format:Lue(n),visible:Nue(n,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function Lue(e){switch(e.type){case"small-integer":case"integer":case"single":return new Md({digitSeparator:!0,places:0});case"double":return new Md({digitSeparator:!0,places:2});case"date":return new Md({dateFormat:"long-month-day-year"});default:return e.type==="string"&&GL(e.name)?new Md({digitSeparator:!0,places:0}):null}}function Oue(){return[new cp,new ay]}function kue(e){const t=jq(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i}function LR(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const Fue=["geometry","blob","raster","guid","xml"],Wb=new Se({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Bue={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Tt="FeatureLayer",OR=W.getLogger("esri.layers.FeatureLayer");function r0(e,t){return new I("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function kR(e){return e&&e instanceof he}function ve(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function n0(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function Uue(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function mh(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}const qb=B7();function Yb(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let H=class extends h7(p3(_7(C7(y3(A7(p7(f3(S7(yw(h3(a7(gr(lp))))))))))))){constructor(...e){super(...e),this._handles=new mi,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=me.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(he.ofType(Rs)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=nn(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=T(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(r=>this._initLayerProperties(r)));const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(fl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstLayerId(t);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new I("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{analytics:this._readAnalyticsCapabilities(t),attachment:this._readAttachmentCapabilities(t),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),queryTopFeatures:this._readQueryTopFeaturesCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&dr(i,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}get parsedUrl(){const e=this.url?rt(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=Go(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Go(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){h1(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const r=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(r){const n=e7(r,t,i)||void 0;return n||OR.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),n}if(t.defaultSymbol)return t.types&&t.types.length?new l3({defaultSymbol:Kb(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:Kb(n.symbol,n,i)}))}):new a3({symbol:Kb(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(kR(t)&&this._resetMemorySource(t),kR(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof he?new Ns({layer:this,items:e}):e:null}readSource(e,t){const i=Qy.fromJSON(t.featureSet);return new Ns({layer:this,items:i&&i.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e=e&&e.map(o=>ww.fromJSON(o)),this._fixTemplates(e,r),this._fixTemplates(e,n),e}readTitle(e,t){const i=t.layerDefinition&&t.layerDefinition.name||t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const n=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?xle(this.url,i):i;let o=i;if(!o&&this.url){const s=wp(this.url);T(s)&&(o=s.title)}return o?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==o&&(o=n+" - "+o),d3(o)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e&&e.map(o=>(o=w3.fromJSON(o),this._fixTemplates(o.templates,r),this._fixTemplates(o.templates,n),o))}set url(e){const t=Ile({layer:this,url:e,nonStandardUrlAllowed:!0,logger:OR});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,i,r){Mle(this,e,null,t,r)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new I(Tt,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,i){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new I(Tt,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,i)})}async applyEdits(e,t){const i=await B(()=>import("./editingSupport.630f8b47.js"),[],import.meta.url);return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return U7(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await Sj(B(()=>import("./FeatureLayerSource.ae2f618b.js"),["FeatureLayerSource.ae2f618b.js","executeForIds.fefbaf43.js"],import.meta.url),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new Vi,t=this.get("capabilities.data"),i=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"];const r=T(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,n=ole(this.definitionExpression,r);e.where=n||"1=1";const{timeOffset:o,timeExtent:s}=this;return e.timeExtent=o!=null&&s!=null?s.offset(-o.value,o.unit):s||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new I(Tt,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new I(Tt,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let n=null;return i.some(o=>{const{id:s}=o;return s!=null&&(s.toString()===r.toString()&&(n=o),!!n)}),n}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const n=r.domains&&r.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=$S.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new I(Tt,"this layer doesn't support attachments");const{attachmentTypes:i,objectIds:r,globalIds:n,num:o,size:s,start:a,where:u}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const d=r&&r.length>1,h=i&&i.length,f=n&&n.length,y=s&&s.length;if(d||h||f||y||o||a||u)throw new I(Tt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||u))throw new I(Tt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new I(Tt,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(Vi.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(Vi.from(e)||this.createQuery(),t);throw new I(Tt,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(Vi.from(e)||this.createQuery(),t);throw new I(Tt,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(Vi.from(e)||this.createQuery(),t);throw new I(Tt,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(nT.from(e),t);throw new I(Tt,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(nT.from(e),t);throw new I(Tt,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(Vm.from(e),t).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i});throw new I(Tt,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(Vm.from(e),t);throw new I(Tt,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(Vm.from(e),t);throw new I(Tt,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(Vm.from(e),t);throw new I(Tt,"Layer source does not support queryFeatureCount capability")})}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var o;t={...t,writeLayerSchema:(o=t==null?void 0:t.writeLayerSchema)!=null?o:this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:n}=t;if(this.dynamicDataSource)return n==null||n.push(r0(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return n==null||n.push(r0(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return n==null||n.push(r0(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return n==null||n.push(r0(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new I(Tt,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||Aue(this,e))}async save(e){return(await B(()=>import("./featureLayerUtils.b8b648ff.js"),["featureLayerUtils.b8b648ff.js","originUtils.68552ec1.js","multiOriginJSONSupportUtils.8128aa52.js","arcgisLayers.9b5bf59b.js","lazyLayerLoader.d554f446.js","portalItemUtils.5719ecc2.js"],import.meta.url)).save(this,e)}async saveAs(e,t){return(await B(()=>import("./featureLayerUtils.b8b648ff.js"),["featureLayerUtils.b8b648ff.js","originUtils.68552ec1.js","multiOriginJSONSupportUtils.8128aa52.js","arcgisLayers.9b5bf59b.js","lazyLayerLoader.d554f446.js","portalItemUtils.5719ecc2.js"],import.meta.url)).saveAs(this,e,t)}_readEditingEnabled(e,t,i){var n;let r=(n=e.layerDefinition)==null?void 0:n.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var n,o;if(!e){const s=(o=(n=this.capabilities)==null?void 0:n.operations)!=null&&o.supportsSync?"Query,Sync":"Query";dr("layerDefinition.capabilities",s,t),i&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=s)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:i}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[i]?void 0:Promise.reject(new I(Tt,`feature is missing the identifying attribute ${i}`)):Promise.reject(new I(Tt,"'attributes' are required on a feature to query attachments")):Promise.reject(new I(Tt,"A feature is required to add/delete/update attachments")):Promise.reject(new I(Tt,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return Be(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),h1(this.renderer,this.fieldsIndex),UA(this.timeInfo,this.fieldsIndex),xue(this,{origin:"service"})}async hasDataChanged(){var e,t;if((e=this.source)!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await((t=this.source)==null?void 0:t.refresh());if(T(r)&&(this.sourceJSON={...this.sourceJSON,...r},this.read(r,{origin:"service",url:this.parsedUrl})),i)return!0}catch{}if(this.definitionExpression)try{return(await nle(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){var t;const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((t=this.fields)==null?void 0:t.some(i=>i.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new I("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new I("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(e){return{supportsCacheHint:mh(e.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:mh(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:ve(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const n=Bue[r.name];n&&(i[n]=!!r.isEnabled)}),i}_readDataCapabilities(e){return{isVersioned:ve(e,"isDataVersioned",!1),supportsAttachment:ve(e,"hasAttachments",!1),supportsM:ve(e,"hasM",!1),supportsZ:ve(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:ve(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const i=e?e.toLowerCase().split(",").map(f=>f.trim()):[],r=this.url?wp(this.url):null,n=i.includes(T(r)&&r.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone;let s=o&&i.includes("create"),a=o&&i.includes("delete"),u=o&&i.includes("update");const d=i.includes("changetracking"),h=t.advancedQueryCapabilities;return o&&!(s||a||u)&&(s=a=u=!0),{supportsCalculate:ve(t,"supportsCalculate",!1),supportsTruncate:ve(t,"supportsTruncate",!1),supportsValidateSql:ve(t,"supportsValidateSql",!1),supportsAdd:s,supportsDelete:a,supportsEditing:o,supportsChangeTracking:d,supportsQuery:n,supportsQueryAnalytics:ve(h,"supportsQueryAnalytic",!1),supportsQueryAttachments:ve(h,"supportsQueryAttachments",!1),supportsQueryTopFeatures:ve(h,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ve(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:ve(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var u;const t=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,r=e.archivingInfo,n=(u=this.url)==null?void 0:u.includes("MapServer"),o=!k("mapserver-pbf-enabled")&&n&&this.version<10.81,s=d7(this.url),a=(e.supportedQueryFormats||"").split(",").reduce((d,h)=>{const f=h.toLowerCase().trim();return f&&d.add(f),d},new Set);return{supportsStatistics:ve(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:ve(t,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:ve(t,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Uue(t),supportsCentroid:ve(t,"supportsReturningGeometryCentroid",!1),supportsDistance:ve(t,"supportsQueryWithDistance",!1),supportsDistinct:ve(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ve(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ve(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:ve(t,"supportsHavingClause",!1),supportsOrderBy:ve(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ve(t,"supportsPagination",!1),supportsQuantization:ve(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ve(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:ve(e,"supportsReturningQueryGeometry",!1),supportsResultType:ve(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:ve(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:ve(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ve(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:ve(t,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:ve(i,"allowOthersToQuery",!0),supportsHistoricMoment:ve(r,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&a.has("pbf"),supportsDisjointSpatialRelationship:ve(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:ve(t,"supportsQueryWithCacheHint",!1)||mh(t,"query"),supportsDefaultSpatialReference:ve(t,"supportsDefaultSR",!1),supportsCompactGeometry:s,maxRecordCountFactor:n0(e,"maxRecordCountFactor",void 0),maxRecordCount:n0(e,"maxRecordCount",void 0),standardMaxRecordCount:n0(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:n0(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,i=ve(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ve(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:mh(t,"queryRelated")}}_readQueryTopFeaturesCapabilities(e){return{supportsCacheHint:mh(e.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ve(e,"allowGeometryUpdates",!0),supportsGlobalId:ve(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ve(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ve(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ve(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ve(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ve(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ve(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ve(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ve(t,"allowOthersToUpdate",!0)}}};l([c({readOnly:!0,json:{read:!1}})],H.prototype,"capabilities",void 0),l([Y("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],H.prototype,"readCapabilities",null),l([c({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],H.prototype,"charts",void 0),l([c({readOnly:!0})],H.prototype,"createQueryVersion",null),l([c({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],H.prototype,"copyright",void 0),l([c({type:Boolean})],H.prototype,"datesInUnknownTimezone",void 0),l([c({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],H.prototype,"displayField",void 0),l([c({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],H.prototype,"definitionExpression",void 0),l([c({types:ic,readOnly:!0})],H.prototype,"defaultSymbol",void 0),l([c({type:Yn})],H.prototype,"dynamicDataSource",void 0),l([c({readOnly:!0})],H.prototype,"editFieldsInfo",void 0),l([c({type:Boolean})],H.prototype,"editingEnabled",null),l([Y(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],H.prototype,"readEditingEnabled",null),l([Y("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],H.prototype,"readEditingEnabledFromWebMap",null),l([X(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],H.prototype,"writeEditingEnabled",null),l([X("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],H.prototype,"writeEditingEnabledToWebMap",null),l([c({readOnly:!0})],H.prototype,"editingInfo",void 0),l([Y("editingInfo")],H.prototype,"readEditingInfo",null),l([c((()=>{const e=R(g7),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],H.prototype,"elevationInfo",void 0),l([c(F7)],H.prototype,"featureReduction",void 0),l([c({...qb.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Yb}}}}})],H.prototype,"fields",void 0),l([c(qb.fieldsIndex)],H.prototype,"fieldsIndex",void 0),l([c({type:Tue,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],H.prototype,"floorInfo",void 0),l([c({type:gle,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],H.prototype,"formTemplate",void 0),l([c({type:Oe,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],H.prototype,"fullExtent",void 0),l([c()],H.prototype,"gdbVersion",void 0),l([c({readOnly:!0,type:bue,json:{read:{source:"geometryProperties"}}})],H.prototype,"geometryFieldsInfo",void 0),l([c({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Wb.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Yb,writer(e,t,i){const r=e?Wb.toJSON(e):null;r&&dr(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:Wb.read}}})],H.prototype,"geometryType",void 0),l([c({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],H.prototype,"hasM",void 0),l([c({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],H.prototype,"hasZ",void 0),l([c({readOnly:!0,type:mw})],H.prototype,"heightModelInfo",void 0),l([c({type:Date})],H.prototype,"historicMoment",void 0),l([c(v7)],H.prototype,"id",void 0),l([c({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"infoFor3D",void 0),l([c({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],H.prototype,"isTable",void 0),l([Y("service","isTable",["type","geometryType"]),Y("isTable",["layerDefinition.type","layerDefinition.geometryType"])],H.prototype,"readIsTable",null),l([X("web-map","isTable")],H.prototype,"writeIsTable",null),l([c(vw)],H.prototype,"labelsVisible",void 0),l([c({type:[sm],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:_E},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:_E},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],H.prototype,"labelingInfo",void 0),l([c((()=>{const e=R(Fle);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){dr(r,Lv(t),i)}}},e})())],H.prototype,"opacity",void 0),l([c({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],H.prototype,"layerId",void 0),l([c(m7)],H.prototype,"legendEnabled",void 0),l([c({type:["show","hide"],json:(()=>{const e=R(w7.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],H.prototype,"listMode",void 0),l([c(Ble)],H.prototype,"minScale",void 0),l([Y("service","minScale",["minScale","effectiveMinScale"])],H.prototype,"readMinScale",null),l([c(Ule)],H.prototype,"maxScale",void 0),l([Y("service","maxScale",["maxScale","effectiveMaxScale"])],H.prototype,"readMaxScale",null),l([c({type:String})],H.prototype,"globalIdField",void 0),l([Y("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Y("service","globalIdField",["globalIdField","fields"])],H.prototype,"readGlobalIdFieldFromService",null),l([c({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Yb}}}}})],H.prototype,"objectIdField",void 0),l([Y("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Y("service","objectIdField",["objectIdField","fields"])],H.prototype,"readObjectIdFieldFromService",null),l([c({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],H.prototype,"operationalLayerType",void 0),l([c(qb.outFields)],H.prototype,"outFields",void 0),l([c({readOnly:!0})],H.prototype,"parsedUrl",null),l([c({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],H.prototype,"path",void 0),l([c(gw)],H.prototype,"popupEnabled",void 0),l([c({type:Nl,json:{name:"popupInfo",write:!0}})],H.prototype,"popupTemplate",void 0),l([c({readOnly:!0})],H.prototype,"defaultPopupTemplate",null),l([c({type:[Eue],readOnly:!0})],H.prototype,"relationships",void 0),l([c({types:om,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Q8,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],H.prototype,"renderer",null),l([Y("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Y("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],H.prototype,"readRenderer",null),l([c()],H.prototype,"sourceJSON",void 0),l([c({type:Boolean})],H.prototype,"returnM",void 0),l([c({type:Boolean})],H.prototype,"returnZ",void 0),l([c((()=>{const e=R(f7);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],H.prototype,"screenSizePerspectiveEnabled",void 0),l([c({clonable:!1})],H.prototype,"source",null),l([Fe("source")],H.prototype,"castSource",null),l([Y("portal-item","source",["featureSet"]),Y("web-map","source",["featureSet"])],H.prototype,"readSource",null),l([c({readOnly:!0})],H.prototype,"serviceDefinitionExpression",void 0),l([Y("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],H.prototype,"readServiceDefinitionExpression",null),l([c({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],H.prototype,"spatialReference",void 0),l([c({type:Number})],H.prototype,"subtypeCode",void 0),l([c({type:String,json:{origins:{service:{read:!0}}}})],H.prototype,"subtypeField",void 0),l([c({type:[ww]})],H.prototype,"templates",void 0),l([Y("templates",["editFieldsInfo","creatorField","editorField","templates"])],H.prototype,"readTemplates",null),l([c({type:x7})],H.prototype,"timeInfo",void 0),l([c()],H.prototype,"title",void 0),l([Y("service","title",["name"]),Y("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],H.prototype,"readTitle",null),l([Y("web-map","title",["layerDefinition.name","title"])],H.prototype,"readTitleFromWebMap",null),l([c({type:String})],H.prototype,"sublayerTitleMode",void 0),l([c({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],H.prototype,"trackIdField",void 0),l([c({json:{read:!1}})],H.prototype,"type",void 0),l([c({type:String})],H.prototype,"typeIdField",void 0),l([Y("service","typeIdField"),Y("typeIdField",["layerDefinition.typeIdField"])],H.prototype,"readTypeIdField",null),l([c({type:[w3]})],H.prototype,"types",void 0),l([Y("service","types",["types"]),Y("types",["layerDefinition.types"])],H.prototype,"readTypes",null),l([c({readOnly:!0,json:{write:!1}})],H.prototype,"serverGens",void 0),l([c({type:he.ofType(Rs),readOnly:!0})],H.prototype,"indexes",void 0),l([c(y7)],H.prototype,"url",null),l([X("url")],H.prototype,"writeUrl",null),l([c({readOnly:!0})],H.prototype,"userIsAdmin",void 0),l([c({json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"version",void 0),l([Y("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],H.prototype,"readVersion",null),l([c({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],H.prototype,"visible",void 0),l([Y("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],H.prototype,"readVisible",null),H=l([S("esri.layers.FeatureLayer")],H);const Kb=Cp({types:k9}),j7=H,Pve=Object.freeze(Object.defineProperty({__proto__:null,default:j7},Symbol.toStringTag,{value:"Module"})),Vue=["$datastore","$map","$layer","$aggregatedfeatures"],jue="esri.widgets.Feature.support.arcadeFeatureUtils",zue=W.getLogger(jue);function Hue(e){return typeof e=="string"?Ky(xx(e)):Array.isArray(e)?Gue(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?Wue(e):e}function Gue(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?Ky(xx(t)):t}</li>`).join("")}</ul>`}function Wue(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?Ky(xx(i)):i}</td></tr>`}).join("")}</table>`}function que({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:n,map:o,graphic:s,interceptor:a}){i.forEach(u=>{const d=u.toLowerCase(),h={map:o,spatialReference:n.sr,interceptor:a};if(d==="$map"&&(r.vars[d]=t.convertMapToFeatureSetCollection(h)),d==="$layer"&&(r.vars[d]=t.convertFeatureLayerToFeatureSet({layer:s.sourceLayer,spatialReference:n.sr,interceptor:a})),d==="$datastore"&&(r.vars[d]=t.convertServiceUrlToWorkspace({url:s.sourceLayer.url,spatialReference:n.sr,interceptor:a})),d==="$aggregatedfeatures"){const f=s.layer,{fields:y,objectIdField:m,geometryType:g,spatialReference:v,displayField:w}=f,_=new j7({fields:y,objectIdField:m,geometryType:g,spatialReference:v,displayField:w,...f.type==="feature"?{templates:f.templates,typeIdField:f.typeIdField,types:f.types}:null,source:e});r.vars[d]=t.convertFeatureLayerToFeatureSet({layer:_,spatialReference:n.sr,interceptor:a})}})}function z7(){return B(()=>import("./arcadeUtils.bcaadecc.js").then(e=>e.t),[],import.meta.url)}async function Yue({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||(t==null?void 0:t.type)!=="2d")return[];const n=await t.whenLayerView(r);if(!n.createQuery||!n.queryFeatures)return[];const o=n.createQuery();o.aggregateIds=[e.getObjectId()];const{features:s}=await n.queryFeatures(o);return s}async function H7({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:n,graphic:o,view:s}){if(!e||!e.expression)return null;const a=t.createSyntaxTree(e.expression),u=Vue.filter(m=>t.hasVariable(a,m)),[d]=await Promise.all([Yue({graphic:o,view:s}),t.loadScriptDependencies(a,!0,u)]),h=t.getViewInfo({spatialReference:r}),f=t.createExecContext(o,h);f.interceptor=i,f.useAsync=!0,que({aggregatedFeatures:d,arcadeUtils:t,featureSetVars:u,context:f,viewInfo:h,map:n,graphic:o,interceptor:i});const y=t.createFunction(a,f);return t.executeAsyncFunction(y,f).catch(m=>zue.error("arcade-execution-error",{error:m,graphic:o,expressionInfo:e}))}async function Kue({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:n,view:o}){if(!e||!e.length)return{};const s=await z7(),a={};for(const h of e)a[`expression/${h.name}`]=H7({expressionInfo:h,arcadeUtils:s,interceptor:r,spatialReference:t,map:n,graphic:i,view:o});const u=await ii(a),d={};for(const h in u)d[h]=Hue(u[h].value);return d}const Zue=1;let Ar=class extends Ml(se){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var r,n;const t=(r=this.contentElement)==null?void 0:r.type;(n=this.contentElementViewModel)==null||n.destroy();const i=t==="fields"?new Kv:t==="media"?new Zu:t==="text"?new O1:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=wx(this._compile,Zue,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:r,spatialReference:n,map:o,view:s,_abortController:a}=this;if(!(t&&i&&n&&o))return void this._set("contentElement",null);const u=await z7();if(a!==this._abortController)return;const d=await H7({arcadeUtils:u,expressionInfo:t,graphic:i,interceptor:r,map:o,spatialReference:n,view:s});if(!d||d.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const h=await e3(d,a.signal),f=h==null?void 0:h.type,y=f==="media"?cy.fromJSON(h):f==="text"?dp.fromJSON(h):f==="fields"?cp.fromJSON(h):null;this._set("contentElement",y)},this.handles.add([q(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),ze),q(()=>[this.contentElement],()=>this._createVM(),ze)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};l([c()],Ar.prototype,"_abortController",void 0),l([c({type:WL})],Ar.prototype,"expressionInfo",void 0),l([c({type:Ni})],Ar.prototype,"graphic",void 0),l([c({readOnly:!0})],Ar.prototype,"contentElement",void 0),l([c({readOnly:!0})],Ar.prototype,"contentElementViewModel",void 0),l([c()],Ar.prototype,"interceptor",void 0),l([c()],Ar.prototype,"spatialReference",null),l([c({readOnly:!0})],Ar.prototype,"state",null),l([c()],Ar.prototype,"map",null),l([c()],Ar.prototype,"view",void 0),Ar=l([S("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Ar);const b3=Ar,o0={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let xg=class extends gi{constructor(e,t){super(e,t),this.viewModel=new b3}initialize(){this.own(q(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),ze))}destroy(){this._destroyContentWidget()}renderLoading(){return C("div",{key:"loading-container",class:o0.loadingSpinnerContainer},C("span",{class:this.classes(o0.iconLoading,o0.spinner)}))}render(){var t;const{state:e}=this.viewModel;return C("div",{class:o0.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const r=e?i==="fields"?new I6({viewModel:e}):i==="media"?new hk({viewModel:e}):i==="text"?new og({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};l([c({type:b3})],xg.prototype,"viewModel",void 0),xg=l([S("esri.widgets.Feature.FeatureExpression")],xg);const Jue=xg;class Xue{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}}var Cg;const Que=1,FR="content-view-models",G7="esri.widgets.FeatureViewModel",ece=W.getLogger(G7),BR={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let dt=Cg=class extends se{constructor(e){super(e),this._handles=new mi,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=wx(this._graphicChanged,Que,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...BR},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent},this._handles.add(q(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),ze))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return T(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return jee(RM(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return f6(this.graphic)}castAbilities(e){return{...BR,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof Zu&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof Zu&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof Zu&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){qi(i)||(this._error=i,ece.error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new dp({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(FR),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:r,contentElementViewModel:n}=e,o=r==null?void 0:r.type;n&&o&&(o==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,t))),o==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createMediaVMParams(r,t))),o==="text"&&n.set(this._createTextVMParams(r)))}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:n,spatialReference:o,view:s}=this,a=new b3({expressionInfo:i,graphic:r,interceptor:Cg.interceptor,map:n,spatialReference:o,view:s});return this.contentViewModels[t]=a,this._handles.add(q(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,t),ze),FR),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:n}=e;return this.contentViewModels[t]=new Ix({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:n}=e;return this.contentViewModels[t]=new O1({graphic:i,creator:r,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:o,_expressionAttributes:s}=this,{attributes:a}=n,u=o.global;return{title:Yu({attributes:a,fieldInfoMap:i,globalAttributes:u,expressionAttributes:s,layer:r,text:e}),description:Yu({attributes:a,fieldInfoMap:i,globalAttributes:u,expressionAttributes:s,layer:r,text:t})}}_createFieldsVMParams(e,t){var d;const{_effectivePopupTemplate:i,formattedAttributes:r}=this,n={...r.global,...r.content[t]},o=(d=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:d.filter(({fieldName:h})=>m6(h)||Os(h)||n.hasOwnProperty(h)),s=i==null?void 0:i.expressionInfos,{description:a,title:u}=e;return{attributes:n,expressionInfos:s,fieldInfos:o,...this._compileTitleAndDesc({title:u,description:a})}}_compileFields(e,t){const i=e.clone(),r=new Kv(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:n,formattedAttributes:o,_effectivePopupTemplate:s,relatedInfos:a,_sourceLayer:u,_expressionAttributes:d}=this,{attributes:h}=r,{description:f,mediaInfos:y,title:m}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:h,layer:u,fieldInfoMap:n,formattedAttributes:{...o.global,...o.content[t]},expressionAttributes:d,mediaInfos:y,popupTemplate:s,relatedInfos:a,...this._compileTitleAndDesc({title:m,description:f})}}_compileMedia(e,t){const i=e.clone(),r=new Zu(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(e&&e.text){const{attributes:o}=t,s=this.formattedAttributes.global;e.text=Yu({attributes:o,fieldInfoMap:i,globalAttributes:s,expressionAttributes:n,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new O1(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,n=t==null?void 0:t.editFieldsInfo;return r&&n?Vee(n,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,{attributes:o}=r,s=this.formattedAttributes.global;return Yu({attributes:o,fieldInfoMap:t,globalAttributes:s,expressionAttributes:n,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return D1(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return D1(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n,spatialReference:o,map:s,view:a}=this,{content:{value:u},title:{value:d}}=await ii({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!r)return;await Gee({graphic:r,popupTemplate:n,layer:i,spatialReference:o},e);const{expressionAttributes:{value:h}}=await ii({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:Kue({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:o,graphic:r,map:s,interceptor:Cg.interceptor,view:a})});t===this._featureAbortController&&r&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...r.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(u)),this._set("title",this._compileTitle(d)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(u)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:o,_sourceLayer:s,_fieldInfoMap:a,_graphicExpressionAttributes:u}=this;i.content[t]=cb({fieldInfos:r==null?void 0:r.fieldInfos,graphic:n,attributes:{...u,...e.attributes},layer:s,fieldInfoMap:a,relatedInfos:o})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:s,_graphicExpressionAttributes:a}=this;i.content[t]=cb({fieldInfos:e.fieldInfos,graphic:r,attributes:{...a,...e.attributes},layer:o,fieldInfoMap:s,relatedInfos:n})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:s}=this,a=t==null?void 0:t.fieldInfos,u={global:cb({fieldInfos:a,graphic:i,attributes:s,layer:n,fieldInfoMap:o,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((d,h)=>{d.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:d,contentElementIndex:h,formattedAttributes:u}),d.type==="media"&&this._createMediaFormattedAttributes({contentElement:d,contentElementIndex:h,formattedAttributes:u})}),u}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,RM(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const o=T(n.associatedLayer)?await n.associatedLayer.load(i):n;if(!o)return;const s=t.filter(d=>d&&Os(d.fieldName));if(!s||!s.length)return;t.forEach(d=>this._configureRelatedInfo(d,o));const a=await jre({relatedInfos:r,layer:o},i);Object.keys(a).forEach(d=>{var y;const h=r.get(d.toString()),f=(y=a[d])==null?void 0:y.value;h&&f&&(h.layerInfo=f.data)});const u=await zre({graphic:e,relatedInfos:r,layer:o},i);Object.keys(u).forEach(d=>{var h;kre((h=u[d])==null?void 0:h.value,r.get(d.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=aT(e.fieldName);if(!r)return;const{layerId:n,fieldName:o}=r;if(!n)return;const s=i.get(n.toString())||Ore(n,t);s&&(Hre({relatedInfo:s,fieldName:o,fieldInfo:e}),this.relatedInfos.set(n,s))}};dt.interceptor=new Xue(Yee,Kee),l([c()],dt.prototype,"_error",void 0),l([c()],dt.prototype,"_featureAbortController",void 0),l([c({readOnly:!0})],dt.prototype,"_effectivePopupTemplate",null),l([c({readOnly:!0})],dt.prototype,"_fieldInfoMap",null),l([c({readOnly:!0})],dt.prototype,"_sourceLayer",null),l([c()],dt.prototype,"abilities",void 0),l([Fe("abilities")],dt.prototype,"castAbilities",null),l([c({readOnly:!0})],dt.prototype,"content",void 0),l([c({readOnly:!0})],dt.prototype,"contentViewModels",void 0),l([c({type:Boolean})],dt.prototype,"defaultPopupTemplateEnabled",void 0),l([c({readOnly:!0})],dt.prototype,"state",null),l([c({readOnly:!0})],dt.prototype,"formattedAttributes",void 0),l([c({type:Ni,value:null})],dt.prototype,"graphic",null),l([c({readOnly:!0})],dt.prototype,"lastEditInfo",void 0),l([c({readOnly:!0})],dt.prototype,"relatedInfos",void 0),l([c()],dt.prototype,"spatialReference",null),l([c({readOnly:!0})],dt.prototype,"title",void 0),l([c()],dt.prototype,"map",null),l([c({readOnly:!0})],dt.prototype,"waitingForContent",null),l([c()],dt.prototype,"view",void 0),dt=Cg=l([S(G7)],dt);const _3=dt,W7=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>C6(i)&&!i.destroyed?C("div",{key:i},i.render()):i instanceof HTMLElement?C("div",{key:i,bind:i,afterCreate:this._attachToNode}):hte(i)?C("div",{key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=l([S("esri.widgets.Feature.ContentMixin")],t),t},oi={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},UR={title:!0,content:!0,lastEditedInfo:!0};let si=class extends W7(gi){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...UR},this.map=null,this.view=null,this.viewModel=new _3}initialize(){this.own(q(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),ze))}loadDependencies(){return B(()=>import("./calcite-notice.e5b1000e.js"),[],import.meta.url)}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{...UR,...e}}render(){const{state:e}=this.viewModel,t=C("div",{class:oi.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return C("div",{class:this.classes(oi.base,oi.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return C("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?C("div",{key:"error-title",slot:"title"},e.errorMessage):null,C("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return C("div",{key:"loading-container",class:oi.loadingSpinnerContainer},C("span",{class:this.classes(oi.iconLoading,oi.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?C("div",{class:oi.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?C(Mx,{level:this.headingLevel,class:oi.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?C("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:C("div",{key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?C("div",{key:this._buildKey("attachments-element",e),class:this.classes(oi.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:C("div",{key:this._buildKey("expression-element",e),class:oi.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?C("div",{key:this._buildKey("custom-element",t),class:oi.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:C("div",{key:this._buildKey("fields-element",e),class:oi.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:C("div",{key:this._buildKey("media-element",e),class:oi.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:n}=i,o=i.type==="edit"?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,s=Hn(o,{date:r,user:n});return C("div",{key:"edit-info-element",class:this.classes(oi.lastEditedInfo,oi.contentElement)},s)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?C("div",{key:this._buildKey("text-element",t),class:this.classes(oi.contentElement,oi.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((n,o)=>{n.type==="attachments"&&(this._contentWidgets[o]=new ote({displayType:n.displayType,headingLevel:t.title?e+1:e,viewModel:r[o]})),n.type==="fields"&&(this._contentWidgets[o]=new I6({viewModel:r[o]})),n.type==="media"&&(this._contentWidgets[o]=new hk({viewModel:r[o]})),n.type==="text"&&(this._contentWidgets[o]=new og({viewModel:r[o]})),n.type==="custom"&&(this._contentWidgets[o]=new og({viewModel:r[o]})),n.type==="expression"&&(this._contentWidgets[o]=new Jue({viewModel:r[o]}))},this);else{const n=r[0];n&&!n.destroyed&&(this._contentWidgets[0]=new og({viewModel:n}))}this.scheduleRender()}};l([J("viewModel.graphic")],si.prototype,"graphic",void 0),l([J("viewModel.defaultPopupTemplateEnabled")],si.prototype,"defaultPopupTemplateEnabled",void 0),l([c()],si.prototype,"headingLevel",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],si.prototype,"label",void 0),l([c(),di("esri/widgets/Feature/t9n/Feature")],si.prototype,"messages",void 0),l([c(),di("esri/t9n/common")],si.prototype,"messagesCommon",void 0),l([c(),di("esri/widgets/support/t9n/uriUtils")],si.prototype,"messagesURIUtils",void 0),l([J("viewModel.spatialReference")],si.prototype,"spatialReference",void 0),l([J("viewModel.title")],si.prototype,"title",void 0),l([c()],si.prototype,"visibleElements",void 0),l([Fe("visibleElements")],si.prototype,"castVisibleElements",null),l([J("viewModel.map")],si.prototype,"map",void 0),l([J("viewModel.view")],si.prototype,"view",void 0),l([c({type:_3})],si.prototype,"viewModel",void 0),si=l([S("esri.widgets.Feature")],si);const tce=si;var q7;const Ig=Symbol("anchorHandles");let gu=class extends Js.EventedAccessor{constructor(e){super(e),this[q7]=new mi,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Ig].add([yn(()=>Po(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),q(()=>this.screenLocation,(t,i)=>{T(t)&&T(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[Ig]=nn(this[Ig])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this;return i&&T(e)&&T(t)&&t.ready?t.toScreen(e):null}};q7=Ig,l([c()],gu.prototype,"location",void 0),l([c()],gu.prototype,"screenLocation",null),l([c()],gu.prototype,"screenLocationEnabled",void 0),l([c()],gu.prototype,"view",void 0),gu=l([S("esri.widgets.support.AnchorElementViewModel")],gu);const Y7=gu,ice="esri.widgets.CompassViewModel";let Mg=class extends Y7{constructor(e){super(e),this.visible=!1}};l([c()],Mg.prototype,"visible",void 0),Mg=l([S(ice)],Mg);const K7=Mg,Zb={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let vu=class extends gi{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new K7,this.visible=!1}initialize(){this.own([q(()=>this.visible,e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r=e&&i,n=!e&&i,o={[Zb.spinnerStart]:r,[Zb.spinnerFinish]:n},s=this._getPositionStyles();return C("div",{class:this.classes(Zb.base,o),styles:s})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=Sv(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(O(t)||O(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};l([J("viewModel.location")],vu.prototype,"location",void 0),l([J("viewModel.view")],vu.prototype,"view",void 0),l([c({type:K7})],vu.prototype,"viewModel",void 0),l([J("viewModel.visible")],vu.prototype,"visible",void 0),vu=l([S("esri.widgets.Spinner")],vu);const rce=vu;var VR;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(VR||(VR={}));function nce(e){return"r"in e&&"g"in e&&"b"in e}function Z7(e){return"h"in e&&"s"in e&&"v"in e}function J7(e){return"l"in e&&"a"in e&&"b"in e}function X7(e){return"l"in e&&"c"in e&&"h"in e}function oce(e){return"x"in e&&"y"in e&&"z"in e}const sce=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],ace=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Q7(e,t){const i=[];let r,n;if(e[0].length!==t.length)throw"dimensions do not match";const o=e.length,s=e[0].length;let a=0;for(r=0;r<o;r++){for(a=0,n=0;n<s;n++)a+=e[r][n]*t[n];i.push(a)}return i}function eF(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=Q7(sce,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function S3(e){const t=Q7(ace,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function tF(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function iF(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function lce(e){const t=e.l,i=e.a,r=e.b,n=Math.sqrt(i*i+r*r);let o=Math.atan2(r,i);return o=o>0?o:o+2*Math.PI,{l:t,c:n,h:o}}function uce(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function cce(e){return tF(eF(e))}function dce(e){return S3(iF(e))}function pce(e){return lce(tF(eF(e)))}function hce(e){return S3(iF(uce(e)))}function fce(e){const t=e.r,i=e.g,r=e.b,n=Math.max(t,i,r),o=n-Math.min(t,i,r);let s=n,a=o===0?0:n===t?(i-r)/o%6:n===i?(r-t)/o+2:(t-i)/o+4,u=o===0?0:o/s;return a<0&&(a+=6),a*=60,u*=100,s*=100/255,{h:a,s:u,v:s}}function yce(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,n=r*i,o=n*(1-Math.abs(t%2-1));let s;switch(Math.floor(t)){case 0:s={r:n,g:o,b:0};break;case 1:s={r:o,g:n,b:0};break;case 2:s={r:0,g:n,b:o};break;case 3:s={r:0,g:o,b:n};break;case 4:s={r:o,g:0,b:n};break;case 5:case 6:s={r:n,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+r-n),s.g=Math.round(s.g+r-n),s.b=Math.round(s.b+r-n),s}function Cy(e){return nce(e)?e:X7(e)?hce(e):J7(e)?dce(e):oce(e)?S3(e):Z7(e)?yce(e):e}function $ve(e){return Z7(e)?e:fce(Cy(e))}function jR(e){return J7(e)?e:cce(Cy(e))}function zR(e){return X7(e)?e:pce(Cy(e))}function rF(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function mce(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function gce(e,t,i,r,n,o){const s=new Float32Array(6);return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s[4]=n,s[5]=o,s}function vce(e,t){return new Float32Array(e,t,6)}function nF(e,t,i,r){const n=t[r],o=t[r+1];e[r]=i[0]*n+i[2]*o+i[4],e[r+1]=i[1]*n+i[3]*o+i[5]}function wce(e,t,i,r=0,n=0,o=2){const s=n||t.length/o;for(let a=r;a<s;a++)nF(e,t,i,a*o)}Object.freeze(Object.defineProperty({__proto__:null,create:rF,clone:mce,fromValues:gce,createView:vce,transform:nF,transformMany:wce},Symbol.toStringTag,{value:"Module"}));function bce(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function _ce(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Sce(e,t,i,r,n,o,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=s,e}function T3(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5];let u=i*o-r*n;return u?(u=1/u,e[0]=o*u,e[1]=-r*u,e[2]=-n*u,e[3]=i*u,e[4]=(n*a-o*s)*u,e[5]=(r*s-i*a)*u,e):null}function Tce(e){return e[0]*e[3]-e[1]*e[2]}function oF(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=i[0],h=i[1],f=i[2],y=i[3],m=i[4],g=i[5];return e[0]=r*d+o*h,e[1]=n*d+s*h,e[2]=r*f+o*y,e[3]=n*f+s*y,e[4]=r*m+o*g+a,e[5]=n*m+s*g+u,e}function bw(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=Math.sin(i),h=Math.cos(i);return e[0]=r*h+o*d,e[1]=n*h+s*d,e[2]=r*-d+o*h,e[3]=n*-d+s*h,e[4]=a,e[5]=u,e}function E3(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=i[0],h=i[1];return e[0]=r*d,e[1]=n*d,e[2]=o*h,e[3]=s*h,e[4]=a,e[5]=u,e}function Iy(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=i[0],h=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=s,e[4]=r*d+o*h+a,e[5]=n*d+s*h+u,e}function sF(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function aF(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function A3(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Ece(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Ace(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function xce(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function lF(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function Cce(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function Ice(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function Mce(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Nce(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=t[0],d=t[1],h=t[2],f=t[3],y=t[4],m=t[5];return Math.abs(i-u)<=be*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-d)<=be*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-h)<=be*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-f)<=be*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-y)<=be*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(a-m)<=be*Math.max(1,Math.abs(a),Math.abs(m))}const Rce=oF,Pce=lF;Object.freeze(Object.defineProperty({__proto__:null,copy:bce,identity:_ce,set:Sce,invert:T3,determinant:Tce,multiply:oF,rotate:bw,scale:E3,translate:Iy,fromRotation:sF,fromScaling:aF,fromTranslation:A3,str:Ece,frob:Ace,add:xce,subtract:lF,multiplyScalar:Cce,multiplyScalarAndAdd:Ice,exactEquals:Mce,equals:Nce,mul:Rce,sub:Pce},Symbol.toStringTag,{value:"Module"}));const HR=k("android");k("chrome")||HR&&HR>=4;IS();function uF(e){return e&&"opacity"in e?e.opacity*uF(e.parent):1}async function $ce(e,t){var w;if(!e)return;const i=e.sourceLayer,r=(w=T(t)&&t.useSourceLayer?i:e.layer)!=null?w:i,n=uF(r);if(T(e.symbol)&&(!T(t)||t.ignoreGraphicSymbol!==!0)){const _=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,cache:T(t)?t.webStyleCache:null}):e.symbol.clone();return yb(_,null,n),_}const o=T(t)&&t.renderer||r&&"renderer"in r&&r.renderer;let s=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!s)return;if(s=s.type==="web-style"?await s.fetchSymbol({...t,cache:T(t)?t.webStyleCache:null}):s.clone(),!("visualVariables"in o)||!o.visualVariables||!o.visualVariables.length)return yb(s,null,n),s;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(O(t)||O(t.arcade))){const _={...t};_.arcade=await qs(),t=_}const a=await B(()=>Promise.resolve().then(()=>n3),void 0,import.meta.url),u=[],d=[],h=[],f=[];for(const _ of o.visualVariables)switch(_.type){case"color":u.push(_);break;case"opacity":d.push(_);break;case"rotation":f.push(_);break;case"size":_.target||h.push(_)}const y=!!u.length&&u[u.length-1],m=y?a.getColor(y,e,t):null,g=!!d.length&&d[d.length-1];let v=g?a.getOpacity(g,e,t):null;if(n!=null&&(v=v!=null?v*n:n),yb(s,m,v),h.length){const _=a.getAllSizes(h,e,t);await yie(s,_)}for(const _ of f)mie(s,a.getRotationAngle(_,e,t),_.axis);return s}class Dce{constructor(t,i){this.owner=i,this.properties={},this.afterDispatchHandle=null;for(const r in t){const n=t[r],o=new L4(n,null,null,2,2);this.properties[r]={pool:o,acquired:[]}}this.afterDispatchHandle=Bj(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const t in this.properties){const i=this.properties[t];for(const r of i.acquired)BC(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this.properties=null,this.owner=null}get(t){const i=this.owner._get(t),r=this.properties[t];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const t in this.properties){const i=this.properties[t];let r=0;for(const n of i.acquired)BC(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}}const Lce=k("mac")?"Meta":"Ctrl",_w={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)_w[e]=String.fromCharCode(e);for(let e=1;e<25;e++)_w[111+e]=`F${e}`;for(let e=65;e<91;e++)_w[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function Oce(e){if(e.key!==void 0)return Do(e);const t=_w[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function kce(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class Fce{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}}const GR=W.getLogger("esri.views.input.InputHandler");class ri{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?GR.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const o=typeof t=="string"?new Fce(t,n):t,s=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const y=f.indexOf(h);f.splice(y,1),s(),this._manager&&this._manager.updateDependencies()}},u=new Bce(o,r,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),s(),this._manager&&this._manager.updateDependencies())}});let d=this._incoming[o.eventType];return d||(d=[],this._incoming[o.eventType]=d),d.push(u),s(),this._manager&&this._manager.updateDependencies(),u}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new Uce(t,{onEmit:(r,n,o,s)=>{this._manager.emit(r.eventType,n,o,s)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):GR.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const r of i)if(r.match.matches(t)&&(r.callback(t),t.shouldStopPropagation()))break}}}class Bce{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class Uce{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}class Vce extends ri{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{const r=i.data.native.pointerType==="touch";this._setValue(r?"touch":"mouse",i.data.x,i.data.y)})}_setValue(t,i,r){t===this._value&&this._x===i&&this._y===r||(this._value=t,this._x=i,this._y=r,this._onChange(t,i,r))}}const Jb=W.getLogger("esri.views.input.InputManager");let Fa=class extends se{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Lce,this.latestPointerType="mouse",this._propertiesPool=new Dce({latestPointerLocation:zce},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,i=wl.INTERNAL){if(this._nameToGroup[e])return void Jb.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void Jb.error("Can't register a group of zero handlers");const r={name:e,handlers:t.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let n=r.handlers.length-1;n>=0;n--){const o=r.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(s,a,u,d,h)=>{this._emitInputEvent(o.priorityIndex+1,s,a,u,h,d)},setPointerCapture:(s,a)=>{this._setPointerCapture(r,o,s,a)},setEventCallback:s=>{o.eventCallback=s},setUninstallCallback:s=>{o.uninstallCallback=s},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Jb.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const r=this._handlers[i];r.priorityIndex=i,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let n=r.handler.hasSideEffects;if(!n){for(const o of r.handler.outgoingEventTypes)if(e.has(o)){n=!0;break}}if(n)for(const o of r.handler.incomingEventMatches){e.add(o.eventType);for(const s of o.keyModifiers)kce(s)||t.add(s)}r.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._get("latestPointerType")!==e&&this._set("latestPointerType",e);const r=this._get("latestPointerLocation");if(O(r)||r.x!==t||r.y!==i){const n=this._propertiesPool.get("latestPointerLocation");n.x=t,n.y=i,this._set("latestPointerLocation",n)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const n=t;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const s=new Set;this._activeKeyModifiers.forEach(a=>{s.add(a)}),this._activeKeyModifiers=s,i=!0}},n=(s,a)=>{a&&!this._activeKeyModifiers.has(s)?(r(),this._activeKeyModifiers.add(s)):!a&&this._activeKeyModifiers.has(s)&&(r(),this._activeKeyModifiers.delete(s))};if(e==="key-down"||e==="key-up"){const s=t.key;this._keyModifiers.has(s)&&n(s,e==="key-down")}const o=t.native;n("Alt",!(!o||!o.altKey)),n("Ctrl",!(!o||!o.ctrlKey)),n("Shift",!(!o||!o.shiftKey)),n("Meta",!(!o||!o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Vce((e,t,i)=>this._setLatestPointer(e,t,i)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],wl.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,wl.INTERNAL)}_setPointerCapture(e,t,i,r){const n=e.name+"-"+t.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),r?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,n,o){const s=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=n!==void 0&&n,u={event:new jce(t,i,s,o||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new m1,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:i}=this._currentPropagation.events.pop(),r=t.data&&t.data.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new m1;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const r of t.handler.incomingEventMatches){if(i.eventType!==r.eventType)continue;const n=i.keyModifiers.filter(o=>r.keyModifiers.includes(o));if(n.length===i.keyModifiers.length!=(n.length===r.keyModifiers.length))return i.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let r=0;for(;r<t.length&&this._compareHandlerPriority(i,t[r])>=0;)r++;t.splice(r,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};l([c({readOnly:!0})],Fa.prototype,"hasPendingInputs",null),l([c()],Fa.prototype,"eventSource",void 0),l([c()],Fa.prototype,"recognizers",void 0),l([c({readOnly:!0})],Fa.prototype,"latestPointerType",void 0),l([c({readOnly:!0})],Fa.prototype,"latestPointerLocation",void 0),Fa=l([S("esri.views.input.InputManager")],Fa);class jce{constructor(t,i,r,n,o){this.type=t,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=o,this._propagationState=tl.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=tl.STOPPED}shouldStopPropagation(){return(this._propagationState&tl.STOPPED)!=0}async(t){this._propagationState|=tl.PAUSED;const i=(r,n)=>{this._propagationState&=~tl.PAUSED;const o=this._resumeCallback;if(this._resumeCallback=null,o&&o(),n)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&tl.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var tl;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(tl||(tl={}));const wl={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class zce{}function TE(e){return e&&typeof e.highlight=="function"}const Sw={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Xu=new Pp({id:"zoom-to-feature",title:"{messages.zoom}",className:Sw.iconZoom}),WR=new Pp({id:"remove-selected-feature",title:"{messages.remove}",className:Sw.iconTrash}),Dd=new Pp({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Sw.iconZoom}),Ld=new Pp({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Sw.iconBrowseClusteredFeatures}),Hce="esri.widgets.Popup.PopupViewModel",K1=W.getLogger(Hce),Gce=e=>{const{event:t,view:i}=e,{action:r}=t,n=i&&i.popup;if(!r)return Promise.reject(new I("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new I("trigger-action:missing-arguments","view.popup is missing"));const{disabled:o,id:s}=r;if(!s)return Promise.reject(new I("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new I("trigger-action:invalid-action","Action is disabled"));if(s===Xu.id)return qce(n.viewModel).catch(x_);if(s===Dd.id)return Yce(n.viewModel);if(s===Ld.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,s===WR.id){n.close();const{selectedFeature:a}=n;if(!a)return Promise.reject(new I(`trigger-action:${WR.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:u}=a;return u?u.remove(a):i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function cF(e){const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function Nu(e){var t,i;return(e==null?void 0:e.isAggregate)&&((i=(t=e==null?void 0:e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}function Wce(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r=!1;return i.whenGraphicBounds(e,{useViewElevation:!0}).then(n=>{r=!n||!n.boundingBox||n.boundingBox[0]===n.boundingBox[3]&&n.boundingBox[1]===n.boundingBox[4]&&n.boundingBox[2]===n.boundingBox[5]}).catch(()=>{const n=new I("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});K1.error(n)}),r}return!0}async function qce(e){const{location:t,selectedFeature:i,view:r,zoomFactor:n}=e,o=cF(e);if(!o){const d=new I("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:r});throw K1.error(d),d}const s=r.scale/n,a=e.get("selectedFeature.geometry")||t,u=a&&a.type==="point"&&Wce(i,r);Xu.active=!0,Xu.disabled=!0;try{await e.view.goTo({target:o,scale:u?s:void 0})}finally{Xu.active=!1,Xu.disabled=!1,e.zoomToLocation=null,u&&(e.location=a)}}async function Yce(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const a=new I("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw K1.error(a),a}if(!Nu(t)){const a=new I("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw K1.error(a),a}const r=t.sourceLayer,n=await i.whenLayerView(r),o=n.createQuery();o.aggregateIds=[t.getObjectId()],Dd.active=!0,Dd.disabled=!0;const{extent:s}=await n.queryExtent(o);await i.goTo({target:s}),Dd.active=!1,Dd.disabled=!1}async function Kce(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,n=await i.whenLayerView(r),o=n.createQuery();o.aggregateIds=[t.getObjectId()];const{extent:s}=await n.queryExtent(o);e.selectedClusterBoundaryFeature.geometry=s,i.graphics.add(e.selectedClusterBoundaryFeature)}async function Zce(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,n=await i.whenLayerView(r),o=n.createQuery();o.aggregateIds=[t.getObjectId()],Ld.active=!0,Ld.disabled=!0;const{features:s}=await n.queryFeatures(o);Ld.active=!1,Ld.disabled=!1,i.popup.open({features:[t].concat(s),featureMenuOpen:!0})}function Jce(e){const t=e.features.filter(i=>Nu(i));t.length&&(e.features=t)}const x3=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return l([c()],t.prototype,"goToOverride",void 0),l([c()],t.prototype,"view",void 0),t=l([S("esri.widgets.support.GoTo")],t),t},Wf=he.ofType({key:"type",defaultKeyValue:"button",base:Bv,typeMap:{button:Pp,toggle:o9}}),Xce=()=>[Xu.clone()],Qce=()=>[Dd.clone(),Ld.clone()],dF="esri.widgets.Popup.PopupViewModel",s0=W.getLogger(dF);let Re=class extends x3(Y7){constructor(e){super(e),this._handles=new mi,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Wf,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new Ni({symbol:new Xs({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([q(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),q(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),q(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),q(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),q(()=>this.location,e=>this._locationChange(e)),q(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),q(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),q(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),q(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>Gce({event:e,view:this.view})),yn(()=>!this.waitingForResult,()=>this._waitingForResultChange(),np),q(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),q(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),yn(()=>!this.visible,()=>this.browseClusterEnabled=!1),q(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Wf;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:n,selectedFeature:o}=this,s=n?i.concat(t):t,a=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(r)||o.popupTemplate),u=a&&a.actions,d=a&&a.overwriteActions?u:u?u.concat(s):s;return d&&d.filter(Boolean).forEach(h=>e.add(h)),e}get defaultActions(){const e=this._get("defaultActions")||new Wf;return e.removeAll(),e.addMany(Nu(this.selectedFeature)?Qce():Xce()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:n}=this,o=r&&t.length;o&&i&&n===-1?this.selectedFeatureIndex=0:o&&n!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=js(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=n=>{this._pendingPromises.has(t)&&this._updateFeatures(n),this._updatePendingPromises(t)},r=()=>this._updatePendingPromises(t);t.then(i,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=cF(this);if(!t){const i=new I("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return s0.error(i),Promise.reject(i)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e){const r=new I("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return s0.error(r),Promise.reject(r)}return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const n of r)delete t[n];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){Jce(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?Nu(t)?(await Kce(this),await Zce(this)):s0.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):s0.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(Xu.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Nu(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:n}=this;if(i===null)return;const o=((i-1)*r+t)%t,s=o+r;n.slice(o,s).forEach((a,u)=>{a&&!a.graphic&&(a.graphic=e[o+u])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:r}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Nu(e)?void 0:(e.symbol=await $ce(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=r.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:r}=t,n=Promise.resolve(i),o=r.map(s=>s.promise);this.promises=[n,...o]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(Nu(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),n=[];t.forEach((o,s)=>{var u,d;if(!o)return;let a=null;if(r.some((h,f)=>(h&&h.graphic===o&&(a=h,r.splice(f,1)),!!a)),a)n[s]=a;else{const h=new _3({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(u=this.view)==null?void 0:u.spatialReference,graphic:o===e?o:null,map:(d=this.view)==null?void 0:d.map,view:this.view});n[s]=h}}),r.forEach(o=>o&&!o.destroyed&&o.destroy()),this._set("featureViewModels",n)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const r=this.view.on("click",n=>{n.pointerType==="mouse"&&n.button!==0||this._fetchFeaturesAndOpen(n)},wl.WIDGET);t.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const n=this.fetchFeatures(e,{signal:r,event:t});return n.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),n}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then(n=>{const{clientOnlyGraphics:o,promisesPerLayerView:s,location:a}=n,u=[Promise.resolve(o),...s.map(d=>d.promise)];return r.popup.open({location:a||i,promises:u}),n})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return O(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:i}=e;return(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:t}_getHighlightTarget(e,t){const i=t.type==="imagery"?void 0:"objectIdField"in t&&t.objectIdField,r=e.attributes;return r&&i&&r[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:i,activeFeature:r,visible:n}=this;if(!(r&&i&&t&&n))return;const o=this._getHighlightLayer(r);if(!(o&&o instanceof lp))return;const s=this._getLayerView(i,o);this._highlightActiveFeaturePromise=s;const a=await s;if(!(a&&TE(a)&&this._highlightActiveFeaturePromise===s&&this.activeFeature&&this.highlightEnabled))return;const u=a.highlight(this._getHighlightTarget(r,o));this._handles.add(u,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:n}=this;if(!(t&&r&&i&&n))return;const o=this._getHighlightLayer(t);if(!(o&&o instanceof lp))return;const s=this._getLayerView(r,o);this._highlightSelectedFeaturePromise=s;const a=await s;if(!(a&&TE(a)&&this._highlightSelectedFeaturePromise===s&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u=a.highlight(this._getHighlightTarget(t,o));this._handles.add(u,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(r=>!t.includes(r));this.features=t.concat(i)}};l([c()],Re.prototype,"featurePage",void 0),l([c()],Re.prototype,"isLoadingFeature",null),l([c({type:Wf})],Re.prototype,"actions",void 0),l([c({readOnly:!0})],Re.prototype,"active",null),l([c()],Re.prototype,"activeFeature",void 0),l([c({readOnly:!0})],Re.prototype,"allActions",null),l([c({type:Boolean})],Re.prototype,"defaultPopupTemplateEnabled",void 0),l([c()],Re.prototype,"autoCloseEnabled",void 0),l([c()],Re.prototype,"autoOpenEnabled",void 0),l([c()],Re.prototype,"browseClusterEnabled",void 0),l([c()],Re.prototype,"content",void 0),l([c({type:Wf,readOnly:!0})],Re.prototype,"defaultActions",null),l([c({readOnly:!0})],Re.prototype,"featureCount",null),l([c()],Re.prototype,"features",null),l([c()],Re.prototype,"featuresPerPage",void 0),l([c()],Re.prototype,"featureViewModelAbilities",void 0),l([c({readOnly:!0})],Re.prototype,"featureViewModels",void 0),l([c()],Re.prototype,"highlightEnabled",void 0),l([c()],Re.prototype,"includeDefaultActions",void 0),l([c({type:le})],Re.prototype,"location",null),l([c({readOnly:!0})],Re.prototype,"pendingPromisesCount",null),l([c({readOnly:!0})],Re.prototype,"selectedClusterBoundaryFeature",void 0),l([c({readOnly:!0})],Re.prototype,"waitingForResult",null),l([c({readOnly:!0})],Re.prototype,"promiseCount",null),l([c()],Re.prototype,"promises",null),l([c({value:null,readOnly:!0})],Re.prototype,"selectedFeature",null),l([c({value:-1})],Re.prototype,"selectedFeatureIndex",null),l([c({readOnly:!0})],Re.prototype,"selectedFeatureViewModel",null),l([c({readOnly:!0})],Re.prototype,"state",null),l([c()],Re.prototype,"title",void 0),l([c()],Re.prototype,"updateLocationEnabled",void 0),l([c()],Re.prototype,"view",void 0),l([c()],Re.prototype,"visible",void 0),l([c()],Re.prototype,"zoomFactor",void 0),l([c()],Re.prototype,"zoomToLocation",void 0),l([c()],Re.prototype,"centerAtLocation",null),Re=l([S(dF)],Re);const pF=Re,qR="selected-index",ede=0,YR="popup-spinner",z={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},KR={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},ZR="esri-popup";function os(e,t){return t===void 0?`${ZR}__${e}`:`${ZR}__${e}-${t}`}const hF="esri.widgets.Popup",JR=W.getLogger(hF),XR={closeButton:!0,featureNavigation:!0};let de=class extends W7(gi){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new mi,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=wx(()=>this._displaySpinner(),ede),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new pF,this.visible=null,this.visibleElements={...XR},this._addSelectedFeatureIndexHandle(),this.own([q(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),q(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),q(()=>{var i,r,n,o,s,a;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(o=(n=this.viewModel)==null?void 0:n.view)==null?void 0:o.size,(s=this.viewModel)==null?void 0:s.active,(a=this.viewModel)==null?void 0:a.location,this.alignment]},()=>this.reposition()),q(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),q(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),q(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i,r)),q(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),q(()=>{var i,r,n,o;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(o=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:o.state]},()=>this._setTitleFromFeatureWidget()),q(()=>{var i,r,n,o;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(o=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:o.state]},()=>this._setContentFromFeatureWidget()),yn(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),El(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),ze),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,i,r,n,o,s;return!!(this.selectedFeatureWidget?((t=(e=this.selectedFeatureWidget)==null?void 0:e.viewModel)==null?void 0:t.waitingForContent)||((r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.state)==="error"||((o=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:o.content):(s=this.viewModel)==null?void 0:s.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||KR}set dockOptions(e){const t={...KR},i=this.get("viewModel.view.breakpoints"),r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const n={...t,...e},o={...t.breakpoint,...r},{breakpoint:s}=n;s===!0?n.breakpoint=o:typeof s=="object"&&(n.breakpoint={...o,...s}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:r}=this.viewModel,n={...t,title:!1};return r?(e?(e.viewModel=r,e.visibleElements=n):this._feature=new tce({headingLevel:i+1,viewModel:r,visibleElements:n}),this._feature):null}castVisibleElements(e){return{...XR,...e}}blur(){const{active:e}=this.viewModel;e||JR.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||JR.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var n,o;this._handles.remove(qR);const t=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:t};((o=(n=this.viewModel)==null?void 0:n.view)==null?void 0:o.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var g,v,w,_;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:i,dividedActions:r,currentAlignment:n,currentDockPosition:o}=this,{active:s}=this.viewModel,{menuActions:a}=r,u=s&&a.length>1&&e,d=s&&t,h=s&&!t,f=(v=(g=this.selectedFeature)==null?void 0:g.layer)==null?void 0:v.title,y=(_=(w=this.selectedFeature)==null?void 0:w.layer)==null?void 0:_.id,m={[z.alignTopCenter]:n==="top-center",[z.alignBottomCenter]:n==="bottom-center",[z.alignTopLeft]:n==="top-left",[z.alignBottomLeft]:n==="bottom-left",[z.alignTopRight]:n==="top-right",[z.alignBottomRight]:n==="bottom-right",[z.isDocked]:d,[z.shadow]:h,[z.isDockedTopLeft]:o==="top-left",[z.isDockedTopCenter]:o==="top-center",[z.isDockedTopRight]:o==="top-right",[z.isDockedBottomLeft]:o==="bottom-left",[z.isDockedBottomCenter]:o==="bottom-center",[z.isDockedBottomRight]:o==="bottom-right",[z.isFeatureMenuOpen]:i,[z.isActionsMenuOpen]:u};return C("div",{class:this.classes(z.base,m),role:"presentation","data-layer-title":f,"data-layer-id":y,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},s?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return C("span",{"aria-hidden":"true",class:this.classes(z.icon,z.iconLoading,z.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?C("div",{key:os("loading-container"),role:"presentation",class:z.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=dl(this.container),t={[z.iconRightTriangleArrow]:e,[z.paginationPreviousIconRTL]:e,[z.iconLeftTriangleArrow]:!e,[z.paginationPreviousIconLTR]:!e};return C("span",{"aria-hidden":"true",class:this.classes(z.icon,t)})}renderPreviousButton(){const{messages:e}=this;return C("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(z.button,z.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=dl(this.container),t={[z.iconLeftTriangleArrow]:e,[z.paginationNextIconRTL]:e,[z.iconRightTriangleArrow]:!e,[z.paginationNextIconLTR]:!e};return C("span",{"aria-hidden":"true",class:this.classes(z.icon,t)})}renderNextButton(){const{messages:e}=this;return C("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(z.button,z.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:n}=this.viewModel;return C("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(z.button,z.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[z.iconUndock]:e,[z.iconDock]:!e,[z.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[z.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[z.iconDockToTop]:!e&&t==="top-center",[z.iconDockToBottom]:!e&&t==="bottom-center"};return C("span",{"aria-hidden":"true",class:this.classes(i,z.icon)})}renderDockButton(){var n,o,s;const{dockEnabled:e,messages:t}=this,i=(o=(n=this.viewModel)==null?void 0:n.view)==null?void 0:o.widthBreakpoint,r=e?t.undock:t.dock;return i!=="xsmall"&&((s=this.dockOptions)==null?void 0:s.buttonEnabled)?C("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(z.button,z.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:n}=this,o={[z.headerContainerButton]:i},s=C(Mx,{level:this.headingLevel,class:z.headerTitle,innerHTML:e}),a=i?C("button",{key:`${e}--collapsible`,id:t,title:r?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(z.headerContainer,o),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},s):C("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(z.headerContainer,o)},s);return e?a:null}renderCloseIcon(){return C("span",{"aria-hidden":"true",class:this.classes(z.icon,z.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?C("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:z.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return C("header",{class:z.header},this.renderTitle(),C("div",{class:z.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:r}=this.viewModel;return t&&!i?C("article",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:z.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:n}=this,o=i?n.close:n.open,{menuActions:s}=r;return s.length?C("div",{key:os("actions-menu-button"),class:this.classes(z.button,z.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},C("span",{"aria-hidden":"true",class:z.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:n}=r;return n.length&&i?C("ul",{id:e,role:"menu","aria-labelledby":t,key:os("actions"),class:z.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(o=>this.renderAction({action:o,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?C("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:z.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?C("section",{key:os("navigation"),class:this.classes(z.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,n=!!i.length,o=!!r.length,s={[z.footerHasPagination]:e,[z.footerHasActions]:n,[z.footerHasActionsMenu]:o};return e||n?C("div",{key:os("feature-buttons"),class:this.classes(z.footer,s)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=Hn(e.selectedFeatures,{total:t.length});return C("section",{key:os("menu"),class:z.featureMenu},C("strong",{class:z.featureMenuHeader},r),C("nav",{bind:this,class:z.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:qu},this.renderFeatureMenu(),C("div",{class:z.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?C("div",{class:z.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:C("div",{key:os("pointer"),class:z.pointer,role:"presentation"},C("div",{class:this.classes(z.pointerDirection,z.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:n,collapsible:o,hasContent:s,contentCollapsed:a,visibleElements:u}=this,{title:d}=this.viewModel,h=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",f=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",y={[z.shadow]:e,[z.isCollapsible]:o,[z.isCollapsed]:a};return C("div",{class:this.classes(z.main,z.widget,y),tabIndex:u.closeButton?null:-1,role:"dialog","aria-labelledby":d?r:"","aria-describedby":s&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?C("div",{key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return C("span",{key:"text",class:z.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[z.iconLoading]:e.active,[z.rotating]:e.active,[z.icon]:!!t,[z.actionImage]:!e.active&&!!i};return t&&(r[t]=!e.active),C("span",{key:"icon","aria-hidden":"true",class:this.classes(z.icon,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),n={[z.action]:t.type!=="toggle",[z.actionToggle]:t.type==="toggle",[z.actionToggleOn]:t.type==="toggle"&&t.value,[z.buttonDisabled]:t.disabled},o=[this.renderActionIcon(t),this.renderActionText(r)],s=i==="menu-item"?C("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(z.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):C("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(z.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return t.visible?s:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:o}=this.viewModel,s=e===o,a={[z.featureMenuSelected]:s},u=s?C("span",{key:os(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:z.iconCheckMark}):null,d=C("span",{innerHTML:e.title||r.untitled});return C("li",{role:"menuitem",tabIndex:-1,key:os(`feature-menu-feature-${n}`),class:this.classes(a,z.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},C("span",{class:z.featureMenuTitle},d,u))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?C("ol",{class:z.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:n}=e,o=i==null?void 0:i.attributes,s=n==="zoom-to-feature"?Hn(e.title,{messages:t}):n==="remove-selected-feature"?Hn(e.title,{messages:r}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?Hn(e.title,{messages:t}):e.title;return s&&o?Hn(s,o):s}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:r,image:n}=e,o=n||r?r:z.iconDefaultAction;return o&&i?Hn(o,i):o}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:r}=e;return r&&i?Hn(r,i):r}_createFeatureUpdatedAnimation(){return HX("enter",z.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(q(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(o=>o.visible),i=this._getInlineActionCount(),r=i===null,n=i===0;return{inlineActions:r?t.slice(0):n?new he:t.slice(0,i),menuActions:r?new he:n?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){Do(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){Do(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,i=e.currentTarget["data-feature-index"];t.activeFeature=t.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=Do(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const n=i.querySelectorAll("li"),o=n.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(r+1+o)%o].focus()):(e.stopPropagation(),n[(r-1+o)%o].focus())}_handleActionMenuItemKeyup(e){const t=Do(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,o=n.findIndex(u=>u.uid===r);if(!i)return;const s=i.querySelectorAll("li"),a=s.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(o+1+a)%a].focus()):(e.stopPropagation(),s[(o-1+a)%a].focus())}_handleMainKeyup(e){const t=Do(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await ny(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=q(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,qR)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:n,view:o}=e;if(isNaN(i)||isNaN(t)||!o||!r)return!1;const s=o.padding;return n==="right"&&r.x+i/2>o.width-s.right||n==="left"&&r.x-i/2<s.left||n==="top"&&r.y-t<s.top||n==="bottom"&&r.y+t>o.height-s.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:n}=this,{screenLocation:o,view:s}=n;if(O(o)||!s||!i)return"top-center";if(!this._isScreenLocationWithinView(o,s))return this._get("currentAlignment")||"top-center";function a(M){return parseInt(M.replace(/[^-\d\.]/g,""),10)}const u=r?window.getComputedStyle(r,null):null,d=u?a(u.getPropertyValue("max-height")):0,h=u?a(u.getPropertyValue("height")):0,{height:f,width:y}=i.getBoundingClientRect(),m=y+t,g=Math.max(f,d,h)+t,v=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:o,side:"right",view:s}),w=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:o,side:"left",view:s}),_=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:o,side:"top",view:s}),A=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:o,side:"bottom",view:s});return w?_?"bottom-right":"top-right":v?_?"bottom-left":"top-left":_?A?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return dl(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var s;if(e!=="auto")return e;const t=(s=this.viewModel)==null?void 0:s.view,i=dl(this.container)?"top-left":"top-right";if(!t)return i;const r=t.padding||{left:0,right:0,top:0,bottom:0},n=t.width-r.left-r.right,{breakpoints:o}=t;return o&&n<=o.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&(e.style.top=r.top,e.style.left=r.left,e.style.bottom=r.bottom,e.style.right=r.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:n,_pointerOffsetInPx:o}=this,s=r/2,a=i.height-t,u=i.width-e,{padding:d}=this.view;return n==="bottom-center"?{top:t+o-d.top,left:e-s-d.left}:n==="top-left"?{bottom:a+o-d.bottom,right:u+o-d.right}:n==="bottom-left"?{top:t+o-d.top,right:u+o-d.right}:n==="top-right"?{bottom:a+o-d.bottom,left:e+o-d.left}:n==="bottom-right"?{top:t+o-d.top,left:e+o-d.left}:n==="top-center"?{bottom:a+o-d.bottom,left:e-s-d.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(O(e)||!t)return;const n=this._calculateFullWidth(t),o=this._calculateAlignmentPosition(e.x,e.y,r,n);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,n]=e,[o,s]=t,{width:a,height:u}=i;return r<=a&&o>a||r>a&&o<=a||n<=u&&s>u||n>u&&s<=u}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,n=i.top+i.bottom,o=[],s=[];o[0]=e[0]-r,o[1]=e[1]-n,s[0]=t[0]-r,s[1]=t[1]-n;const{dockOptions:a}=this,u=a.breakpoint;this._dockingThresholdCrossed(o,s,u)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var a,u;const t=e.breakpoint,i=(u=(a=this.viewModel)==null?void 0:a.view)==null?void 0:u.ui;if(!i)return!1;const{width:r,height:n}=i;if(isNaN(r)||isNaN(n))return!1;const o=t.hasOwnProperty("width")&&r<=t.width,s=t.hasOwnProperty("height")&&n<=t.height;return o||s}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?Hn(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,YR),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new rce({view:e}),e.ui.add(this._spinner,{key:YR,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(o=>o.uid===t),n=i.getItemAt(r);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};l([c({readOnly:!0})],de.prototype,"actionsMenuId",null),l([c({readOnly:!0})],de.prototype,"actionsMenuButtonId",null),l([c({readOnly:!0})],de.prototype,"featureMenuId",null),l([c({readOnly:!0})],de.prototype,"titleId",null),l([c({readOnly:!0})],de.prototype,"contentId",null),l([c({readOnly:!0})],de.prototype,"hasContent",null),l([c({readOnly:!0})],de.prototype,"featureNavigationVisible",null),l([c({readOnly:!0})],de.prototype,"collapsible",null),l([c({readOnly:!0})],de.prototype,"featureMenuVisible",null),l([c({readOnly:!0})],de.prototype,"contentCollapsed",null),l([c({readOnly:!0})],de.prototype,"dividedActions",null),l([J("viewModel.actions")],de.prototype,"actions",void 0),l([c()],de.prototype,"actionsMenuOpen",null),l([c()],de.prototype,"alignment",void 0),l([J("viewModel.autoCloseEnabled")],de.prototype,"autoCloseEnabled",void 0),l([J("viewModel.autoOpenEnabled")],de.prototype,"autoOpenEnabled",void 0),l([J("viewModel.defaultPopupTemplateEnabled")],de.prototype,"defaultPopupTemplateEnabled",void 0),l([J("viewModel.content")],de.prototype,"content",void 0),l([c()],de.prototype,"collapsed",void 0),l([c()],de.prototype,"collapseEnabled",void 0),l([c({readOnly:!0})],de.prototype,"currentAlignment",null),l([c({readOnly:!0})],de.prototype,"currentDockPosition",null),l([c()],de.prototype,"dockOptions",null),l([c()],de.prototype,"dockEnabled",void 0),l([J("viewModel.featureCount")],de.prototype,"featureCount",void 0),l([c()],de.prototype,"featureMenuOpen",void 0),l([J("viewModel.features")],de.prototype,"features",void 0),l([J("viewModel.goToOverride")],de.prototype,"goToOverride",void 0),l([c()],de.prototype,"headingLevel",void 0),l([J("viewModel.highlightEnabled")],de.prototype,"highlightEnabled",void 0),l([J("viewModel.location")],de.prototype,"location",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],de.prototype,"label",void 0),l([c()],de.prototype,"maxInlineActions",void 0),l([c(),di("esri/widgets/Popup/t9n/Popup")],de.prototype,"messages",void 0),l([c(),di("esri/t9n/common")],de.prototype,"messagesCommon",void 0),l([J("viewModel.promises")],de.prototype,"promises",void 0),l([J("viewModel.selectedFeature")],de.prototype,"selectedFeature",void 0),l([J("viewModel.selectedFeatureIndex")],de.prototype,"selectedFeatureIndex",void 0),l([c({readOnly:!0})],de.prototype,"selectedFeatureWidget",null),l([c()],de.prototype,"spinnerEnabled",void 0),l([J("viewModel.title")],de.prototype,"title",void 0),l([J("viewModel.updateLocationEnabled")],de.prototype,"updateLocationEnabled",void 0),l([J("viewModel.view")],de.prototype,"view",void 0),l([c({type:pF}),E6(["triggerAction","trigger-action"])],de.prototype,"viewModel",void 0),l([J("viewModel.visible")],de.prototype,"visible",void 0),l([c()],de.prototype,"visibleElements",void 0),l([Fe("visibleElements")],de.prototype,"castVisibleElements",null),l([sr()],de.prototype,"_close",null),l([sr()],de.prototype,"_toggleDockEnabled",null),l([sr()],de.prototype,"_toggleFeatureMenu",null),l([sr()],de.prototype,"_toggleActionsMenu",null),l([sr()],de.prototype,"_triggerAction",null),l([sr()],de.prototype,"_selectFeature",null),l([sr()],de.prototype,"_next",null),l([sr()],de.prototype,"_previous",null),de=l([S(hF)],de);const QR=de,Xb=[0,0];function tde(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return Xb[0]=i.left+t.pageXOffset,Xb[1]=i.top+t.pageYOffset,Xb}function eP(e){e&&(yO(e),e.parentNode&&e.parentNode.removeChild(e))}function ide(e){const t=document.createElement("div");return e.appendChild(t),t}const gh=16,a0=750,rde=512,nde=2,ode=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:gh,time:a0},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([q(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),q(()=>this.interacting,r=>{const{surface:n}=this;n&&n.setAttribute("data-interacting",r.toString())})])}initialize(){this.handles.add(q(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(i){const r=this._get("container");if(r===i)return;const n="dom-size";if(this.handles.remove(n),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),eP(this.root),this._set("root",null),rM(this.userContent,r),eP(this.userContent),this._set("userContent",null)),i){i.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",rM(i,o),i.appendChild(o),this._set("userContent",o);const s=document.createElement("div");s.className="esri-view-root",i.insertBefore(s,i.firstChild),this._set("root",s);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,s.appendChild(a),this._set("surface",a);const u=new hM;s.appendChild(u.surface),this._set("overlay",u),q(()=>u.needsRender,d=>{d&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=ip({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(q(()=>this.size,d=>{const[h,f]=d,y="esri-view-surface--inset-outline";h>=document.body.clientWidth||f>=document.body.clientHeight?a.classList.add(y):a.classList.remove(y)},ze),n),this._set("container",i),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get popup(){return this._get("popup")||new QR({view:this})}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,n){const o=this.position;return i-=o[0],r-=o[1],n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const o=this.position;return i+=o[0],r+=o[1],n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([q(()=>this.root,r=>{i.container=r?ide(r):null},ze),q(()=>this.popup,(r,n)=>{const o="popup",s="manual";n&&i.remove(n,o),r&&(r.view=i.view,i.add(r,{key:o,position:s}))},ze)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=gh,i.time=a0,this.handles.add([(()=>{const r=()=>{i.freq=gh,i.time=a0};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),ip({prepare:r=>{const n=this._measure(),o=this._freqInfo;if(o.time+=r.deltaTime,n&&(o.freq=gh,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;const s=this._position();o.freq=s||n?gh:Math.min(a0,o.freq*nde),!n&&o.freq>=rde&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,s=this.height;return r===o&&n===s?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:s,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=tde(i);return(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return l([c({value:null,cast:i=>yx(i)})],t.prototype,"container",null),l([c({readOnly:!0})],t.prototype,"focused",null),l([c({readOnly:!0})],t.prototype,"height",void 0),l([c({type:QR})],t.prototype,"popup",null),l([c({type:hM})],t.prototype,"overlay",void 0),l([c({readOnly:!0})],t.prototype,"position",void 0),l([c({readOnly:!0})],t.prototype,"resizing",void 0),l([c({readOnly:!0})],t.prototype,"root",void 0),l([c({value:null,readOnly:!0})],t.prototype,"size",null),l([c({readOnly:!0})],t.prototype,"surface",void 0),l([c({readOnly:!0})],t.prototype,"suspended",void 0),l([c()],t.prototype,"ui",void 0),l([c({readOnly:!0})],t.prototype,"userContent",void 0),l([c({readOnly:!0})],t.prototype,"width",void 0),l([c()],t.prototype,"widthBreakpoint",void 0),t=l([S("esri.views.DOMContainer")],t),t},sde=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:n,queryArea:o,layerViewsAndGraphics:s,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,r),u=Promise.resolve(a),d=this._queryLayerPopupFeatures(o,s,r),h=d.map(f=>f.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:Tj([u,...h]).then(f=>Array.from(new Set(f.flat()))),promisesPerLayerView:d}}_queryLayerPopupFeatures(i,r,n){return r.map(({layerView:o,graphics:s})=>{const a={clientGraphics:s,event:T(n)?n.event:null,signal:T(n)?n.signal:null,defaultPopupTemplateEnabled:!!T(n)&&!!n.defaultPopupTemplateEnabled},u=o.fetchPopupFeatures(i,a);return{layerView:o,promise:u}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(T(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:n,queryArea:o,location:s}=await this._popupHitTestGraphics(i,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:u,clientOnlyGraphics:d}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:d,layerViewsAndGraphics:u,queryArea:o,location:s}}async _popupHitTestGraphics(i,r){const{results:n,mapPoint:o}=await this.popupHitTest(i),s=n.filter(u=>u.type==="graphic"&&this._isValidPopupGraphic(u.graphic,r)),a=s.length?s[0].mapPoint:null;return{clientGraphics:s.map(u=>u.graphic),queryArea:o,location:o||a}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),T(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return T(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const n=[],o=new Map,s=r.map(a=>{const u=[];return"layer"in a?o.set(a.layer,u):o.set(a.graphics,u),{layerView:a,graphics:u}});for(const a of i){const u=o.get(a.layer)||o.get(a.sourceLayer)||null;u?u.push(a):n.push(a)}return{layerViewsAndGraphics:s,clientOnlyGraphics:n}}};return t=l([S("esri.views.PopupView")],t),t};W.getLogger("esri.core.support.OwningCollection");let qf=class extends Ml(he){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{O(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(he.ofType(this.itemType.Type))(e):new he(e)}};function tP(e,t){return{type:e,cast:c5,set(i){const r=lc(i,this._get(t),e);r.owner=this,this._set(t,r)}}}l([c()],qf.prototype,"owner",null),qf=l([S("esri.core.support.OwningCollection")],qf);const ade=W.getLogger("esri.support.AnalysesCollection");let Z1=class extends qf{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{O(t.item)||t.item.parent===this.owner&&(ade.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Z1=l([S("esri.support.AnalysesCollection")],Z1);let Yf=class extends qf{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};l([dA({Type:Ni,ensureType:Ze(Ni)})],Yf.prototype,"itemType",void 0),Yf=l([S("esri.support.GraphicsCollection")],Yf);let Ba=class extends se{constructor(e){super(e),this.view=null,this.baseLayerViews=new he,this.referenceLayerViews=new he,this._loadingHandle=q(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap},t=>{t&&t.load().catch(()=>{})},ze)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,i;if(this.view&&this.view.suspended)return!1;const e=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};l([c({constructOnly:!0})],Ba.prototype,"view",void 0),l([c({readOnly:!0})],Ba.prototype,"baseLayerViews",void 0),l([c({readOnly:!0})],Ba.prototype,"referenceLayerViews",void 0),l([c({readOnly:!0})],Ba.prototype,"suspended",null),l([c({type:Boolean,readOnly:!0})],Ba.prototype,"updating",null),Ba=l([S("esri.views.BasemapView")],Ba);const lde=W.getLogger("esri.views.LayerViewManager");class ude{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Ws(),this._started=!1,this.done=!1,hn(this._controller.signal,()=>{const n=new I("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var n,o;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let s,a;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)s=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new I("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(i);bt(t),s="default"in h?new h.default({layer:i,view:r}):new h({layer:i,view:r})}const u=()=>{a=$r(a),s.destroyed||s.destroy(),s.layer=null,s.parent=null,s.view=null,this.done=!0};a=hn(t,u),bt(t);try{await s.when()}catch(h){throw u(),h}if(!((o=(n=this._map)==null?void 0:n.allLayers)==null?void 0:o.includes(i)))return u(),void this._deferred.reject(new I("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=s,i.emit("layerview-create",{view:r,layerView:s}),r.emit("layerview-create",{layer:i,layerView:s}),this.done=!0,this._deferred.resolve(s)}catch(s){i.emit("layerview-create-error",{view:r,error:s}),r.emit("layerview-create-error",{layer:i,error:s}),this.done=!0,this._deferred.reject(new I("layerview:create-error","layerview creation failed",{layer:i,error:s}))}}}let en=class extends oy{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new Gd,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const t=(i=this.view.map)==null?void 0:i.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(O(this._workPromise)&&(this._workPromise=Ws()),this.handles.remove("reschedule"),this.handles.add(xp(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var o,s,a;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),O(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const i=new op({getCollections:()=>this._rootCollectionNames.map(u=>this.get(u)),getChildrenFunction:u=>u&&"layers"in u?u.layers:null});if(!i)return this._workPromise.resolve(),void(this._workPromise=null);for(const u of i)this._createLayerView(u);this._refreshCollections();for(const[u,d]of this._layerLayerViewInfoMap)i.includes(u)||(this._layerLayerViewInfoMap.delete(d.layer),d.destroy());const r=i.filter(u=>u.type==="group").map(u=>u.layers),n=[(o=t==null?void 0:t.ground)==null?void 0:o.layers,(s=t==null?void 0:t.basemap)==null?void 0:s.baseLayers,(a=t==null?void 0:t.basemap)==null?void 0:a.referenceLayers,t==null?void 0:t.layers,...r].filter(u=>!!u);this.handles.add(n.map(u=>this._watchUpdatingTracking.addOnCollectionChange(()=>u,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([El(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),q(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Ka)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return T(this._workPromise)||this._watchUpdatingTracking.updating||Ev(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new I("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const n of e){const o=this._layerLayerViewInfoMap.get(n);if(!o||!o.layerView)continue;const s=o.layerView;s.layer=n,s.parent=i,t.getItemAt(r)!==s&&t.splice(r,0,s),n.layers&&this._populateLayerViewsOwners(n.layers,s.layerViews,s),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new ude(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var r,n;i&&(qi(i)||i.name==="cancelled:layerview-create")||lde.error(`Failed to create layerview for layer title:'${(r=e.title)!=null?r:"no title"}', id:'${(n=e.id)!=null?n:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([c()],en.prototype,"_workPromise",void 0),l([c({readOnly:!0})],en.prototype,"_watchUpdatingTracking",void 0),l([c({readOnly:!0})],en.prototype,"_layersToLayerViews",null),l([c({readOnly:!0})],en.prototype,"_rootCollectionNames",null),l([c()],en.prototype,"layerViewImporter",void 0),l([c()],en.prototype,"supportsGround",void 0),l([c({readOnly:!0})],en.prototype,"updating",null),l([c({readOnly:!0})],en.prototype,"updatingRemaining",null),l([c({constructOnly:!0})],en.prototype,"view",void 0),en=l([S("esri.views.LayerViewManager")],en);const cde=en;let xr=class extends se{constructor(e){super(e),this.factor=1.5,this.offset=ur(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([c({type:Number})],xr.prototype,"factor",void 0),l([c({nonNullable:!0})],xr.prototype,"offset",void 0),l([c()],xr.prototype,"position",void 0),l([c({type:Number,range:{min:0}})],xr.prototype,"size",void 0),l([c()],xr.prototype,"maskUrl",void 0),l([c()],xr.prototype,"maskEnabled",void 0),l([c()],xr.prototype,"overlayUrl",void 0),l([c()],xr.prototype,"overlayEnabled",void 0),l([c({readOnly:!0})],xr.prototype,"version",null),l([c({type:Boolean})],xr.prototype,"visible",void 0),xr=l([S("esri.views.Magnifier")],xr);const fF=xr;let Ng=class extends se{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return this.running=!0,new Promise((r,n)=>this._tasks.push(new iP(r,n,e,t,i)))}unshift(e,t,i){return this.running=!0,new Promise((r,n)=>this._tasks.unshift(new iP(r,n,e,t,i)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const i=pn(t.signal);if(i&&!t.abortCallback)t.reject(wt());else{const r=i?t.abortCallback(wt()):t.callback(e);Zs(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(i){t.reject(i)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=wt();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0,this.running=!1}};l([c()],Ng.prototype,"running",void 0),Ng=l([S("esri.layers.support.PromiseQueue")],Ng);class iP{constructor(t,i,r,n,o){this.resolve=t,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=o}}let mf=class extends se{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};l([c()],mf.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),l([c()],mf.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),mf=l([S("esri.views.support.DebugFlags")],mf);const dde=new mf,pde=W.getLogger("esri.views.support.Scheduler");var Le;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(Le||(Le={}));const Mo=0,rP=new Map([[Le.RESOURCE_CONTROLLER,Mo],[Le.SLIDE,Mo],[Le.STREAM_DATA_LOADER,Mo],[Le.ELEVATION_QUERY,Mo],[Le.TERRAIN_SURFACE,1],[Le.SURFACE_GEOMETRY_UPDATES,1],[Le.GRAPHICS_CORE,2],[Le.I3S_CONTROLLER,2],[Le.POINT_CLOUD_LAYER,2],[Le.FEATURE_TILE_FETCHER,2],[Le.OVERLAY,4],[Le.STAGE,4],[Le.GRAPHICS_DECONFLICTOR,4],[Le.FILTER_VISIBILITY,4],[Le.SCALE_VISIBILITY,4],[Le.FRUSTUM_VISIBILITY,4],[Le.POINT_OF_INTEREST_FREQUENT,6],[Le.POINT_OF_INTEREST_INFREQUENT,30],[Le.LABELER,8],[Le.FEATURE_QUERY_ENGINE,8],[Le.FEATURE_TILE_TREE,16],[Le.FEATURE_TILE_TREE_ACTIVE,Mo],[Le.ELEVATION_ALIGNMENT,12],[Le.TEXT_TEXTURE_ATLAS,12],[Le.CLOUDS_GENERATOR,12],[Le.TEXTURE_UNLOAD,12],[Le.LINE_OF_SIGHT_TOOL,16],[Le.LINE_OF_SIGHT_TOOL_INTERACTIVE,Mo],[Le.SNAPPING,Mo],[Le.SHADOW_ACCUMULATOR,30]]);function nP(e){return rP.has(e)?rP.get(e):typeof e=="number"?e:1}var Ir;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Ir||(Ir={}));const oP=6.5,sP=1,hde=30,aP=1e3/30,lP=100,uP=.9;var EE,Bl;(function(e){let t=class extends se{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new Ef("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Ir.INTERACTING,this._tasks=new hl,this._runQueue=new hl,this._load=0,this._idleStateCallbacks=new hl,this._idleUpdatesStartFired=!1,this._maxReschedule=l0,this._forceTask=!1,this._debug=!1,this._debugHandle=q(()=>dde.SCHEDULER_LOG_SLOW_TASKS,s=>this._debug=s,ze);for(const s of Object.keys(Le))this.performanceInfo.tasks.set(Le[s],new Ef(Le[s]));let n;const o=this;this._test={get state(){return yv(n,o._state)},set state(s){n=s},FRAME_SAFETY_BUDGET:oP,INTERACTING_BUDGET:aP,IDLE_BUDGET:lP,get availableBudget(){return o._budget.budget},usedBudget:0,getBudget:()=>o._budget,setBudget:s=>o._budget=s,updateTask:s=>this._updateTask(s),getState:s=>this._getState(s),getRuntime:s=>this._getRuntime(s),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),$r(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=l0,this._schedule(),this.frame()))}))}registerTask(n,o){const s=nP(n),a=new i(this,n,o,s);return this._tasks.push(a),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new Ef(n)),a}registerIdleStateCallbacks(n,o){const s={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(s),this.state===Ir.IDLE&&this._idleUpdatesStartFired&&s.idleBegin();const a=this;return{remove:()=>this._removeIdleStateCallbacks(s),set idleBegin(u){a._idleUpdatesStartFired&&(s.idleEnd(),a._state===Ir.IDLE&&u()),s.idleBegin=u},set idleEnd(u){s.idleEnd=u}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==Ir.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return O(this._test.state)?this._state:this._test.state}updateBudget(n){this._test.usedBudget=0;let o=oP,s=n.frameDuration,a=sP;switch(this.state){case Ir.IDLE:o=0,s=Math.max(lP,n.frameDuration),a=hde;break;case Ir.INTERACTING:s=Math.max(aP,n.frameDuration);case Ir.ANIMATING:}return s=s-n.elapsedFrameTime-o,this.state!==Ir.IDLE&&s<sP&&!this._forceTask?(this._forceTask=!0,!1):(s=Math.max(s,a),this._budget.reset(s,this.state),this._maxReschedule=l0,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Ir.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case Ir.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n)}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(s=>s.name===n))return Bl.SCHEDULED;let o=Bl.IDLE;return this._tasks.forAll(s=>{s.name===n&&s.needsUpdate&&(s.schedulePriority<=1?o=Bl.READY:o!==Bl.READY&&(o=Bl.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(s=>{s.name===n&&(o+=s.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(s=>{s.needsUpdate&&n.set(s.name,(n.get(s.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((s,a)=>{o+=s>1?` ${s}x ${a}`:` ${a}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,s)=>s.needsUpdate?++o:o,0);this._load=this._load*uP+n*(1-uP)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===Mo&&n.needsUpdate&&!this._runQueue.includes(n)&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(s=>{s.needsUpdate&&s.schedulePriority!==0&&s.basePriority!==Mo&&(n=!0,o=Math.max(o,s.basePriority),s.schedulePriority===1?(s.schedulePriority=0,this._runQueue.push(s)):--s.schedulePriority)}),!n)return this.updating=!1,!1;this._maxReschedule===l0&&(this._maxReschedule=o),--this._maxReschedule}return this.updating=!0,!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),s=this._runQueue.pop();this._budget.resetProgress();try{s.task.runTask(this._budget)}catch(u){pde.error(`Exception in task "${s.name}"`,u)}s.schedulePriority=s.basePriority;const a=this._budget.now()-o;if(s.runtime+=a,this._frameTaskTimes.set(s.priority,this._frameTaskTimes.get(s.priority)+a),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",s.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(u=>u.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-n)}while(this._schedule());this.updating=this._tasks.some(o=>o.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(Le))this._frameTaskTimes.set(Le[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,s)=>this.performanceInfo.tasks.get(s).record(o)),this.performanceInfo.total.record(n)}get test(){return this._test}};l([c()],t.prototype,"updating",void 0),t=l([S("esri.views.support.Scheduler")],t),e.Scheduler=t;let i=class extends se{constructor(n,o,s,a){super({}),this._scheduler=n,this.name=o,this._basePriority=a,this.runtime=0,this._queue=new Ng,this._handles=new mi,this.schedulePriority=this._basePriority,this.task=T(s)?s:this._queue,this._handles.add(yn(()=>this.task.running,()=>n.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(yF),this._scheduler.removeTask(this),this.schedule=AE.schedule,this.reschedule=AE.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){this.name=n;const o=nP(n);this._basePriority!==Mo&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,s){return this._queue.push(n,o,s)}reschedule(n,o,s){return this._queue.unshift(n,o,s)}processQueue(n){this._queue.runTask(n)}};l([c({constructOnly:!0})],i.prototype,"task",void 0),l([c({readOnly:!0})],i.prototype,"updating",null),i=l([S("esri.views.support.SchedulerTask")],i);class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Ir.IDLE,this._didWork=!1,this._enabled=!0}run(o){return!this.done&&(o()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(o){this._enabled=o}reset(o,s){this._begin=this.now(),this._budget=o,this._state=s,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=r})(EE||(EE={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Bl||(Bl={}));const yF=(()=>{const e=new EE.Budget;return e.enabled=!1,e})();class fde{remove(){}processQueue(){}schedule(t,i,r){try{if(pn(i)){const n=wt();return r?Promise.resolve(r(n)):Promise.reject(n)}return I_(t(yF))}catch(n){return Promise.reject(n)}}reschedule(t,i,r){return this.schedule(t,i,r)}}const AE=new fde,l0=Number.MAX_SAFE_INTEGER;let gf=class extends se{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(Le.TEXTURE_UNLOAD))!=null?i:AE}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let n=this._textureRequests.get(r);return n||(n={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(n.texture),this._stage.loadImmediate(n.texture)),this._textureRequests.set(r,n)),n.referenceCount++,{uid:r,texture:n.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return T(t)?`${e}.${t}px`:e}};l([c()],gf.prototype,"_frameTask",void 0),l([c()],gf.prototype,"updating",null),gf=l([S("esri.views.3d.support.TextureCollection")],gf);var cP;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(cP||(cP={}));const mF=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],gF={};function vF(e){return!!gF[e]}function yde(e){for(const t of e)if(!vF(t))return!1;return!0}mF.forEach(e=>{gF[e]=!0});class mde{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:i,priority:r},n)=>this.inputManager.installHandlers(n,[i],r))}disconnect(){this.inputManager&&this.handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,i,r,n){const o=Array.isArray(t)?t:t.split(",");if(!yde(o))return o.some(vF)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let s,a;Array.isArray(i)?a=i:(s=i,a=[]),typeof r=="function"?s=r:n=r,n=n!=null?n:wl.DEFAULT;const u=this._createUniqueGroupName(),d=new gde(this.view,o,a,s);this.handlers.set(u,{handler:d,priority:n});for(const h of o){const f=this.handlerCounts.get(h)||0;this.handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(u,[d],n),{remove:()=>this._removeHandler(u,o)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,i){if(this.handlers.has(t)){this.handlers.delete(t);for(const r of i){const n=this.handlerCounts.get(r);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):n===1?this.handlerCounts.delete(r):this.handlerCounts.set(r,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class gde extends ri{constructor(t,i,r,n){super(!0),this.view=t;for(const o of i)switch(o){case"click":this.registerIncoming("click",r,s=>n(this._wrapClick(s)));break;case"double-click":this.registerIncoming("double-click",r,s=>n(this._wrapDoubleClick(s)));break;case"immediate-click":this.registerIncoming("immediate-click",r,s=>n(this._wrapImmediateClick(s)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,s=>n(this._wrapImmediateDoubleClick(s)));break;case"hold":this.registerIncoming("hold",r,s=>n(this._wrapHold(s)));break;case"drag":this.registerIncoming("drag",r,s=>{const a=this._wrapDrag(s);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",r,s=>n(this._wrapKeyDown(s)));break;case"key-up":this.registerIncoming("key-up",r,s=>n(this._wrapKeyUp(s)));break;case"pointer-down":this.registerIncoming("pointer-down",r,s=>n(this._wrapPointer(s,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,s=>n(this._wrapPointer(s,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,s=>n(this._wrapPointer(s,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,s=>n(this._wrapPointerDrag(s)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,s=>n(this._wrapMouseWheel(s)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,s=>n(this._wrapPointer(s,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,s=>n(this._wrapPointer(s,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,s=>{n(this._wrapGamepad(s))});break;case"focus":this.registerIncoming("focus",r,s=>{n(this._wrapFocus(s))});break;case"blur":this.registerIncoming("blur",r,s=>{n(this._wrapBlur(s))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a,eventId:u}=t.data,{cancelable:d,timestamp:h}=t;return{type:"click",pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:h,screenPoint:ur(o,s),mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a,eventId:u}=t.data,{cancelable:d,timestamp:h}=t;return{type:"double-click",pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:h,mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a,eventId:u}=t.data,d=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:d,pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:f,mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a,eventId:u}=t.data,d=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:d,pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:f,mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a}=t.data,{cancelable:u,timestamp:d}=t;return{type:"hold",pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:d,mapPoint:this._getMapPoint(o,s),cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(ur(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:n}=i.center,{action:o,pointerType:s,button:a}=i;if(o==="start"&&(this.latestDragStart=i),!this.latestDragStart)return;const u=i.pointer.native,d=i.buttons,{cancelable:h,timestamp:f}=t,y={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return o==="end"&&(this.latestDragStart=void 0),{type:"drag",action:o,x:r,y:n,origin:y,pointerType:s,button:a,buttons:d,radius:i.radius,angle:gL(i.angle),native:u,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:n}=t.data,{cancelable:o,timestamp:s}=t;return{type:"key-down",key:i,repeat:r,native:n,timestamp:s,cancelable:o,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:n,timestamp:o}=t;return{type:"key-up",key:i,native:r,timestamp:o,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:s=>t.async(s),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:n,button:o,buttons:s,native:a,eventId:u}=t.data,d=a.pointerId,h=a.pointerType,{cancelable:f,timestamp:y}=t;return{type:i,x:r,y:n,pointerId:d,pointerType:h,button:o,buttons:s,native:a,timestamp:y,eventId:u,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:n,native:o,eventId:s}=t.data.currentEvent,{button:a}=t.data.startEvent,u=t.data.startEvent.native.pointerId,d=t.data.startEvent.native.pointerType,h=t.data.action,f={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:y,timestamp:m}=t;return{type:"pointer-drag",x:i,y:r,pointerId:u,pointerType:d,button:a,buttons:n,action:h,origin:f,native:o,timestamp:m,eventId:s,cancelable:y,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:n}=t,{x:o,y:s,deltaY:a,native:u}=r;return{type:"mouse-wheel",x:o,y:s,deltaY:a,native:u,timestamp:n,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:n}=t.data,{cancelable:o,timestamp:s}=t,{buttons:a,axes:u}=r;return{type:"gamepad",device:n,timestamp:s,action:i,buttons:a,axes:u,cancelable:o,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}}var My,dP,pP;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(My||(My={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(dP||(dP={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(pP||(pP={}));const vde=W.getLogger("esri.views.interactive.interactiveToolUtils");function wde(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return vde.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.visible=!1,i.active&&(i.view.activeTool=null),i.destroy()})]}function J1(e){return e.visible&&e.getEditableFlag(My.USER)&&e.getEditableFlag(My.MANAGER)}function Ao(e){return ur(e.x,e.y)}function wF(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return ur(t.clientX-i.left,t.clientY-i.top)}function hP(e,t){return t instanceof Event?wF(e,t):Ao(t)}function fP(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class bde{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":yP(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!mP(t))break;const n=Ao(t),o=this._intersect(n,t.pointerType,i.forEachTool);if(O(o))break;const s=this._findToolAndManipulatorByKey(o,i.forEachTool,u0),a=Po(s,d=>d.manipulator),u=Po(s,d=>d.tool);!(T(a)&&T(u)&&a.interactive)||a.grabbable&&a.grabbableForEvent(t)||!a.grabbing||a.dragging||this._ungrabManipulatorBeforeDragging(a,u,t),T(a)&&a.interactive&&a.grabbable&&a.grabbableForEvent(t)&&!a.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:o,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool!==o.tool&&(this._currentlyActiveTool=i.activeTool,this._revertToActiveTool=!0,i.setActiveTool(o.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),r());break}case"pointer-up":this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!mP(t))break;const n=this._grabbedManipulators.get(t.pointerId),o=this._draggedManipulators.get(t.pointerId),s=Po(n||o,({key:h})=>h),a=this._findManipulatorByKey(s,i.forEachTool);if(O(a))break;const u=Ao(t);u.x=hr(u.x,0,i.view.width),u.y=hr(u.y,0,i.view.height);const d=(n||o).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(a.dragging=!0,o?a.events.emit("drag",{action:"update",start:d,screenPoint:u}):a.events.emit("drag",{action:"start",start:d,screenPoint:u,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:s,start:d}));break;case"end":a.dragging=!1,o&&a.events.emit("drag",{action:"end",start:d,screenPoint:u}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const n=Ao(t),o=this._intersect(n,t.pointerType,i.forEachTool),s=this._findToolAndManipulatorByKey(o,i.forEachTool,u0);if(_de(t)||i.forEachTool(h=>{if((!T(s)||s.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let f=!1;h.manipulators.forEach(({manipulator:y})=>{y.selected&&(y.selected=!1,f=!0)}),f&&h.manipulatorSelectionChanged&&h.manipulatorSelectionChanged()}}),O(s))break;const{manipulator:a,tool:u}=s;if(!a.interactive)break;a.selectable&&u.automaticManipulatorSelection&&(a.selected=!a.selected,u.manipulatorSelectionChanged&&u.manipulatorSelectionChanged());const d=t.native.shiftKey;a.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:d,stopPropagation:r});break}case"click":{const n=Ao(t),o=this._intersect(n,t.pointerType,i.forEachTool),s=this._findManipulatorByKey(o,i.forEachTool);if(O(s)||!s.interactive)break;const a=t.native.shiftKey;s.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{const n=Ao(t),o=this._intersect(n,t.pointerType,i.forEachTool),s=this._findManipulatorByKey(o,i.forEachTool);if(O(s)||!s.interactive)break;const a=t.native.shiftKey;s.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}case"immediate-double-click":{const n=Ao(t),o=this._intersect(n,t.pointerType,i.forEachTool),s=this._findManipulatorByKey(o,i.forEachTool);if(O(s)||!s.interactive)break;const a=t.native.shiftKey;s.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Ao(r)}),this._grabbedManipulators.forEach(({key:n},o)=>{n.tool===i&&i.manipulators.findById(n.manipulatorId)===t&&this._grabbedManipulators.delete(o)})}_handlePointerEnd(t,i){const r=Po(this._grabbedManipulators.get(t.pointerId),({key:o})=>o),n=this._findManipulatorByKey(r,i.forEachTool);T(n)&&!n.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(i.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Ao(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,i){let r=null;return Ev(t,({key:n})=>{const o=this._findManipulatorByKey(n,i);return!!(T(o)&&o.interactive&&"cursor"in o&&o.cursor)&&(r=o.cursor,!0)}),r}_onFocusChange(t){this._updateCursor(t),this._updateFocusedManipulatorTools(t)}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set;this._grabbedManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),this._hoveredManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),t(r=>{r.hasFocusedManipulators=i.has(r)})}clearPointers(t,i,r=!0,n){const o=s=>s.tool===t&&(O(n)||s.manipulatorId===n);this._grabbedManipulators.forEach(({key:s,pointerType:a},u)=>{if(o(s)){this._grabbedManipulators.delete(u);const d=this._findManipulatorByKey(s,i);T(d)&&(d.grabbing=!1,d.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:a}))}}),this._draggedManipulators.forEach(({key:s},a)=>{if(o(s)){this._draggedManipulators.delete(a);const u=this._findManipulatorByKey(s,i);T(u)&&(u.dragging=!1,u.events.emit("drag",{action:"cancel"}))}}),r&&this._hoveredManipulators.forEach(({key:s},a)=>{if(o(s)){this._hoveredManipulators.delete(a);const u=this._findManipulatorByKey(s,i);T(u)&&(u.hovering=!1)}}),this._onFocusChange(i)}_intersect(t,i,r){let n=null;return r(o=>{if(o.manipulators==null||!J1(o))return!1;const s=o.manipulators.intersect(t,i);return!O(s)&&(n={manipulatorId:s.id,tool:o},!0)}),n}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(ur(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!yP(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Ao(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,n){const o=this._intersect(t,r,n);let s=this._findManipulatorByKey(o,n);const a=Po(this._hoveredManipulators.get(i),({key:d})=>d),u=this._findManipulatorByKey(a,n);T(s)&&!s.interactive&&(s=null),u!==s&&(T(u)&&(u.hovering=!1),T(s)?(s.hovering=!0,this._hoveredManipulators.set(i,{key:o})):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_findManipulatorByKey(t,i){return this._findToolAndManipulatorByKey(t,i,u0)?u0.manipulator:null}_findToolAndManipulatorByKey(t,i,r){return O(t)?null:(r.tool=null,r.manipulator=null,i(n=>{if(n!==t.tool||n.manipulators==null||!J1(n))return!1;const o=n.manipulators.findById(t.manipulatorId);return!!T(o)&&(r.manipulator=o,r.tool=n,!0)}),r.manipulator?r:null)}}function yP(e){return e==="mouse"}function mP(e){return e.pointerType!=="mouse"||e.button===0}function _de(e){return!!e.native.shiftKey}const u0={manipulator:null,tool:null},Sde=W.getLogger("esri.views.ToolViewManager"),gP="attached",Qb="tools";let Es=class extends oy{constructor(e){super(e),this._manipulatorState=new bde,this.tools=new he,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(mF,e=>{this._handleInputEvent(e)},wl.TOOL),...wde(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(T(e)&&!this.view.ready)return void Sde.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),T(t)&&t.deactivate(),T(e)&&e.activate(),this._removeIncompleteTools(e);const i=O(this.activeTool);for(const r of this.tools){r.setEditableFlag(My.MANAGER,i||r===this.activeTool);const n=J1(r);!i&&n||this._manipulatorState.clearPointers(r,this._forEachTool,!n)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){this.view.type==="3d"?(this._set("textures",new gf(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([q(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),Ep(()=>this._set("textures",nn(this.textures)))],gP)):this.handles.add(q(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){T(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(gP)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};T(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:r=>{this.activeTool=r},view:this.view}),!t&&T(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(Qb),this._forEachTool(e=>{if(e instanceof se){const t=q(()=>[e.cursor,e.visible,e.editable],()=>{J1(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,Qb)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:i})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,i)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),Qb)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const e=this._manipulatorState.cursor;let t=e;this._forEachTool(i=>!(!T(i.cursor)||!i.visible||!O(e)&&i.preferManipulatorCursor)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(e){this.tools.filter(t=>(O(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};l([c({constructOnly:!0,nonNullable:!0})],Es.prototype,"view",void 0),l([c({readOnly:!0,nonNullable:!0})],Es.prototype,"textures",void 0),l([c({value:null})],Es.prototype,"activeTool",null),l([c({readOnly:!0,type:he})],Es.prototype,"tools",void 0),l([c({readOnly:!0})],Es.prototype,"cursor",void 0),l([c({readOnly:!0})],Es.prototype,"updating",null),Es=l([S("esri.views.ToolViewManager")],Es);const Tde=Es;let gd=class extends se{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Ede.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Ade[this.deviceType]}};l([c({nonNullable:!0,readOnly:!0})],gd.prototype,"nativeIndex",void 0),l([c({type:String,readOnly:!0})],gd.prototype,"deviceType",null),l([c({type:Number,readOnly:!0})],gd.prototype,"axisThreshold",null),gd=l([S("esri.views.input.gamepad.GamepadInputDevice")],gd);const Ede=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Ade={standard:.15,spacemouse:.025,unknown:0},C3=gd;let vf=class extends se{constructor(...e){super(...e),this.devices=new he,this.enabledFocusMode="document"}};l([c({type:he.ofType(C3),readOnly:!0})],vf.prototype,"devices",void 0),l([c({type:["document","view","none"]})],vf.prototype,"enabledFocusMode",void 0),vf=l([S("esri.views.input.gamepad.GamepadSettings")],vf);const xde=vf;let Rg=class extends se{constructor(){super(...arguments),this.gamepad=new xde}};l([c({readOnly:!0})],Rg.prototype,"gamepad",void 0),Rg=l([S("esri.views.input.Input")],Rg);const Cde=Rg;let Ua=class extends se{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([c({type:Boolean,nonNullable:!0})],Ua.prototype,"enabled",void 0),l([c({type:C3})],Ua.prototype,"device",void 0),l([c({type:["pan","zoom"],nonNullable:!0})],Ua.prototype,"mode",void 0),l([c({type:["forward-down","forward-up"],nonNullable:!0})],Ua.prototype,"tiltDirection",void 0),l([c({type:Number,nonNullable:!0})],Ua.prototype,"velocityFactor",void 0),Ua=l([S("esri.views.navigation.gamepad.GamepadSettings")],Ua);const bF=Ua;let wu=class extends se{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new bF,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};l([c({type:Boolean})],wu.prototype,"browserTouchPanEnabled",void 0),l([c({type:bF,nonNullable:!0})],wu.prototype,"gamepad",void 0),l([c({type:Boolean})],wu.prototype,"momentumEnabled",void 0),l([c({type:Boolean})],wu.prototype,"mouseWheelZoomEnabled",void 0),wu=l([S("esri.views.navigation.Navigation")],wu);const _F=wu;var vP;function Ide(e){const t=e.url&&wp(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&T(t)&&t.serverType==="ImageServer")&&SF(e)&&e.heightModelInfo?e.heightModelInfo:Mde(e)?mw.deriveUnitFromSR(Rde,e.spatialReference):null}function SF(e){return"heightModelInfo"in e}function TF(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function Mde(e){return TF(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):EF(e)}function Nde(e){return e.layers!=null||EF(e)||TF(e)||SF(e)}function EF(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(vP||(vP={}));const Rde=new mw({heightModel:"gravity-related-height"});var X1;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(X1||(X1={}));let xE,e_=null;async function Pde(e){e_||(e_=B(()=>import("./geometryServiceUtils.698aeb0b.js"),[],import.meta.url).then(t=>xE=t)),await e_,bt(e)}async function AF(e,t,i,r){if(!e)return null;const n=e.spatialReference;return gc()||Cl(n,t)?Op(e,t):xE?xE.projectGeometry(e,t,i,r):(await Promise.race([Pde(r),vc(r)]),AF(e,t,i,r))}let Je=class extends se{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=__(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return T(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return O(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,r,n,o;const e=(i=this.map)==null?void 0:i.call(this),t=[];return T(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(n=e==null?void 0:e.ground)==null?void 0:n.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var n;if(this.suspended)return(n=this._get("_spatialReferenceTask"))!=null?n:{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const o of e){const s=this._getSupportedSpatialReferences(o);if(s.length>0){const a=this._narrowDownSpatialReferenceCandidates(i,s);T(a)&&(i=a)}if(T(i)&&i.length===1)break}if(t&&(O(i)||i.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(i);return{spatialReference:T(r)?r.spatialReference:null,viewingMode:T(r)?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,r,n,o,s,a,u,d;if(!this.required.tileInfo)return(i=this._get("_tileInfoTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(n=(r=this.map)==null?void 0:r.call(this))==null?void 0:n.basemap,layers:(a=(s=(o=this.map)==null?void 0:o.call(this))==null?void 0:s.basemap)==null?void 0:a.baseLayers},{layers:(d=(u=this.map)==null?void 0:u.call(this))==null?void 0:d.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const h=e[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var i,r,n,o;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))==null?void 0:i.heightModelInfo))return(r=this._get("_heightModelInfoTask"))!=null?r:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const s of e)if(Nde(s)){const a=Ide(s);if(a)return{heightModelInfo:a,vcsWkid:(n=s.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(o=s.spatialReference)==null?void 0:o.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var r,n;if(this.suspended||!this.required.extent)return(r=this._get("_extentCandidatesTask"))!=null?r:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const o of e.layers){const s="fullExtents"in o&&o.fullExtents||(T(o.fullExtent)?[o.fullExtent]:[]),a=this.requiresExtentInSpatialReference?null:s[0],u=(n=s.find(d=>d.spatialReference.equals(this.spatialReference)))!=null?n:a;if(u)return{candidates:[{extent:u,layer:o}],updating:!1};if(this._getSupportedSpatialReferences(o).length>0)for(const d of s)i.push({extent:d,layer:o})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(O(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:T(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(T(this._projectExtentTask.task)&&(this._projectExtentTask.task=__(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:oA(async n=>{try{const o=await AF(i.extent,r,i.layer.portalItem,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(pn(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(O(e))return t;const i=[],r=(n,o)=>T(n)?T(o)?n===o&&n:n:o;for(const n of e)for(const o of t){if(!n.spatialReference.equals(o.spatialReference))continue;const s=r(n.viewingMode,o.viewingMode);if(s!==!1){i.push({spatialReference:n.spatialReference,viewingMode:s});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return O(e)||e.length<1?T(t)?{spatialReference:t,viewingMode:null}:null:(T(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==X1.Local)&&(e=e.filter(({viewingMode:i})=>i!==X1.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const r of t){const n=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(T(n)){const o=T(n.constraints)?n.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:s,viewingMode:a}of o)(!this.requiresExtentInSpatialReference||O(this.userSpatialReference)||s.equals(this.userSpatialReference))&&i.push({spatialReference:s,viewingMode:a})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load(),"loading"):e.loadStatus:"loaded"}};l([c()],Je.prototype,"required",void 0),l([c({constructOnly:!0})],Je.prototype,"map",void 0),l([c({constructOnly:!0})],Je.prototype,"getSpatialReferenceSupport",void 0),l([c()],Je.prototype,"defaultSpatialReference",void 0),l([c()],Je.prototype,"userSpatialReference",void 0),l([c()],Je.prototype,"sourcePreloadCount",void 0),l([c()],Je.prototype,"priorityCollection",void 0),l([c()],Je.prototype,"requiresExtentInSpatialReference",void 0),l([c()],Je.prototype,"suspended",void 0),l([c({readOnly:!0})],Je.prototype,"ready",null),l([c({readOnly:!0})],Je.prototype,"heightModelInfoReady",null),l([c({readOnly:!0})],Je.prototype,"spatialReference",null),l([c({readOnly:!0})],Je.prototype,"extent",null),l([c({readOnly:!0})],Je.prototype,"heightModelInfo",null),l([c({readOnly:!0})],Je.prototype,"vcsWkid",null),l([c({readOnly:!0})],Je.prototype,"latestVcsWkid",null),l([c({readOnly:!0})],Je.prototype,"viewingMode",null),l([c({readOnly:!0})],Je.prototype,"tileInfo",null),l([c({readOnly:!0})],Je.prototype,"mapCollections",null),l([c({readOnly:!0})],Je.prototype,"_allLayers",null),l([c({readOnly:!0})],Je.prototype,"_spatialReferenceTask",null),l([c({readOnly:!0})],Je.prototype,"_tileInfoTask",null),l([c({readOnly:!0})],Je.prototype,"_heightModelInfoTask",null),l([c({readOnly:!0})],Je.prototype,"_extentCandidatesTask",null),l([c()],Je.prototype,"_extentTask",null),l([c()],Je.prototype,"_projectExtentTask",void 0),Je=l([S("esri.views.support.DefaultsFromMap")],Je);var Pg;const c0=W.getLogger("esri.views.View");let ye=Pg=class extends Ml(Js.EventedMixin(xv(se))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new op({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new Yf,this.analyses=new Z1,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new he,this.magnifier=new fF,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Cde,this.navigation=new _F,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new mde(this),this.persistableViewModels=new he,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(q(()=>this.preconditionsReady,t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,Pg.views.add(this)):(this._currentSpatialReference=null,Pg.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.layerViewManager)==null||i.clear(),(r=this.toolViewManager)==null||r.detach(),T(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(this._startup(),T(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},np))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,ny(()=>this.ready)))),this.basemapView=new Ba({view:this}),this.layerViewManager=new cde({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Tde({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([q(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),q(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),q(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([q(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(T(e))return;const n=Ep(()=>e=__(e));e=oA(async o=>{try{await Sv(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{e=null}c0.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=nn(this.graphics),this.analyses=nn(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),nn(this.analysisViewManager),this.toolViewManager=nn(this.toolViewManager),this.layerViewManager=nn(this.layerViewManager),this.basemapView=nn(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return c0.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Je({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Ho.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(c0.warn("#map","The provided map is already destroyed",{map:e}),e=null),Ho.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Ji(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return T(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(i=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?i:null}importLayerView(e){throw new I("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return T(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&c0.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(yn(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};ye.views=new he,l([c()],ye.prototype,"_userSpatialReference",void 0),l([J("toolViewManager.activeTool")],ye.prototype,"activeTool",void 0),l([c({readOnly:!0})],ye.prototype,"allLayerViews",void 0),l([c()],ye.prototype,"groundView",void 0),l([c()],ye.prototype,"animation",void 0),l([c()],ye.prototype,"basemapView",void 0),l([c({readOnly:!0})],ye.prototype,"_defaultsFromMapSettings",null),l([c()],ye.prototype,"defaultsFromMap",null),l([c()],ye.prototype,"fatalError",void 0),l([c({type:Oe})],ye.prototype,"extent",void 0),l([c(tP(Yf,"graphics"))],ye.prototype,"graphics",void 0),l([c(tP(Z1,"analyses"))],ye.prototype,"analyses",void 0),l([c({readOnly:!0,type:mw})],ye.prototype,"heightModelInfo",null),l([c({readOnly:!0})],ye.prototype,"interacting",null),l([c({readOnly:!0})],ye.prototype,"navigating",void 0),l([c({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ye.prototype,"preconditionsReady",null),l([c({readOnly:!0})],ye.prototype,"typeSpecificPreconditionsReady",void 0),l([c({type:he,readOnly:!0})],ye.prototype,"layerViews",void 0),l([c({type:fF})],ye.prototype,"magnifier",void 0),l([c({value:null,type:FL})],ye.prototype,"map",null),l([c()],ye.prototype,"padding",void 0),l([c({readOnly:!0})],ye.prototype,"ready",void 0),l([c({type:me})],ye.prototype,"spatialReference",null),l([c()],ye.prototype,"spatialReferenceWarningDelay",void 0),l([c()],ye.prototype,"stationary",null),l([c({readOnly:!0})],ye.prototype,"supportsGround",void 0),l([c({type:Xo})],ye.prototype,"timeExtent",void 0),l([J("toolViewManager.tools")],ye.prototype,"tools",void 0),l([c()],ye.prototype,"toolViewManager",void 0),l([c({readOnly:!0})],ye.prototype,"type",void 0),l([c({type:Number})],ye.prototype,"scale",void 0),l([c({readOnly:!0})],ye.prototype,"updating",void 0),l([c({readOnly:!0})],ye.prototype,"initialExtentRequired",void 0),l([c({readOnly:!0})],ye.prototype,"initialExtent",null),l([c()],ye.prototype,"cursor",null),l([c({readOnly:!0})],ye.prototype,"input",void 0),l([c({type:_F,nonNullable:!0})],ye.prototype,"navigation",void 0),l([c()],ye.prototype,"layerViewManager",void 0),l([c()],ye.prototype,"analysisViewManager",void 0),l([c()],ye.prototype,"width",void 0),l([c()],ye.prototype,"height",void 0),l([c({readOnly:!0})],ye.prototype,"resizing",void 0),l([c({value:null,readOnly:!0})],ye.prototype,"size",null),l([c({readOnly:!0})],ye.prototype,"suspended",void 0),l([c({readOnly:!0})],ye.prototype,"viewEvents",void 0),l([c({readOnly:!0})],ye.prototype,"persistableViewModels",void 0),l([c()],ye.prototype,"_isValid",void 0),l([c()],ye.prototype,"_readyCycleForced",void 0),l([c()],ye.prototype,"_currentSpatialReference",void 0),ye=Pg=l([S("esri.views.View")],ye);const $de=ye;let Va=class extends o1{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new I("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=Zs(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};l([c({readOnly:!0})],Va.prototype,"done",null),l([c({readOnly:!0,type:String})],Va.prototype,"state",void 0),l([c()],Va.prototype,"target",void 0),Va=l([S("esri.views.ViewAnimation")],Va),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Va||(Va={}));const CE=Va;function nl(e,t,i,r){const n=3*e,o=3*(i-e)-n,s=1-n-o,a=3*t,u=3*(r-t)-a,d=1-a-u;function h(g){return((s*g+o)*g+n)*g}function f(g){return((d*g+u)*g+a)*g}function y(g){return(3*s*g+2*o)*g+n}function m(g,v){let w,_,A,M,$,N;for(A=g,N=0;N<8;N++){if(M=h(A)-g,Math.abs(M)<v)return A;if($=y(A),Math.abs($)<1e-6)break;A-=M/$}if(w=0,_=1,A=g,A<w)return w;if(A>_)return _;for(;w<_;){if(M=h(A),Math.abs(M-g)<v)return A;g>M?w=A:_=A,A=.5*(_-w)+w}return A}return function(g,v=1e-6){return f(m(g,v))}}const Dde=/^cubic-bezier\((.*)\)/,rn={};function Lde(e){let t=rn[e]||null;if(!t){const i=Dde.exec(e);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(t=nl.apply(nl,r))}}return t}rn.ease=nl(.25,.1,.25,1),rn.linear=nl(0,0,1,1),rn.easeIn=rn["ease-in"]=nl(.42,0,1,1),rn.easeOut=rn["ease-out"]=nl(0,0,.58,1),rn.easeInOut=rn["ease-in-out"]=nl(.42,0,.58,1);function bl(){return[1,0,0,1,0,0]}function Ode(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function kde(e,t,i,r,n,o){return[e,t,i,r,n,o]}function Fde(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:bl,clone:Ode,fromValues:kde,createView:Fde},Symbol.toStringTag,{value:"Module"}));function Ny(e,t){return e[0]=t[0],e[1]=t[1],e}function ei(e,t,i){return e[0]=t,e[1]=i,e}function xF(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Ry(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function CF(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function IF(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function Bde(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Ude(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Vde(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function jde(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function zde(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function am(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function Hde(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function lm(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function Q1(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function ev(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function MF(e){const t=e[0],i=e[1];return t*t+i*i}function NF(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Gde(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function IE(e,t){const i=t[0],r=t[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function RF(e,t){return e[0]*t[0]+e[1]*t[1]}function PF(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function Wde(e,t,i,r){const n=t[0],o=t[1];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e}function qde(e,t){t=t||1;const i=2*al()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function Yde(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n,e[1]=i[1]*r+i[3]*n,e}function Ro(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}function Kde(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[3]*n+i[6],e[1]=i[1]*r+i[4]*n+i[7],e}function Zde(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e}function Jde(e,t,i,r){const n=t[0]-i[0],o=t[1]-i[1],s=Math.sin(r),a=Math.cos(r);return e[0]=n*a-o*s+i[0],e[1]=n*s+o*a+i[1],e}function Xde(e,t){const i=e[0],r=e[1],n=t[0],o=t[1];let s=i*i+r*r;s>0&&(s=1/Math.sqrt(s));let a=n*n+o*o;a>0&&(a=1/Math.sqrt(a));const u=(i*n+r*o)*s*a;return u>1?0:u<-1?Math.PI:Math.acos(u)}function Qde(e){return"vec2("+e[0]+", "+e[1]+")"}function epe(e,t){return e[0]===t[0]&&e[1]===t[1]}function tpe(e,t){const i=e[0],r=e[1],n=t[0],o=t[1];return Math.abs(i-n)<=be*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=be*Math.max(1,Math.abs(r),Math.abs(o))}function ipe(e,t,i,r,n){let o=t[0]-i[0],s=t[1]-i[1];const a=(r[0]*o+r[1]*s)*(n-1);return o=r[0]*a,s=r[1]*a,e[0]=t[0]+o,e[1]=t[1]+s,e}const rpe=ev,I3=Ry,npe=CF,ope=IF,spe=lm,ape=Q1,lpe=MF;Object.freeze(Object.defineProperty({__proto__:null,copy:Ny,set:ei,add:xF,subtract:Ry,multiply:CF,divide:IF,ceil:Bde,floor:Ude,min:Vde,max:jde,round:zde,scale:am,scaleAndAdd:Hde,distance:lm,squaredDistance:Q1,length:ev,squaredLength:MF,negate:NF,inverse:Gde,normalize:IE,dot:RF,cross:PF,lerp:Wde,random:qde,transformMat2:Yde,transformMat2d:Ro,transformMat3:Kde,transformMat4:Zde,rotate:Jde,angle:Xde,str:Qde,exactEquals:epe,equals:tpe,projectAndScale:ipe,len:rpe,sub:I3,mul:npe,div:ope,dist:spe,sqrDist:ape,sqrLen:lpe},Symbol.toStringTag,{value:"Module"}));function Ct(){return[0,0]}function upe(e){return[e[0],e[1]]}function um(e,t){return[e,t]}function cpe(e){const t=Ct(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function dpe(e,t){return new Float64Array(e,t,2)}function $F(){return Ct()}function DF(){return um(1,1)}function LF(){return um(1,0)}function OF(){return um(0,1)}const ppe=$F(),hpe=DF(),fpe=LF(),ype=OF();Object.freeze(Object.defineProperty({__proto__:null,create:Ct,clone:upe,fromValues:um,fromArray:cpe,createView:dpe,zeros:$F,ones:DF,unitX:LF,unitY:OF,ZEROS:ppe,ONES:hpe,UNIT_X:fpe,UNIT_Y:ype},Symbol.toStringTag,{value:"Module"}));const kF=96,FF=39.37,mpe=180/Math.PI;function BF(e){return e.wkid?e:e.spatialReference||me.WGS84}function M3(e,t){return t.type?ei(e,t.x,t.y):Ny(e,t)}function UF(e){return $l(e)}function Kf(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*Ape(e.spatialReference)}async function wf(e,t,i,r){let n,o;if(!e||Array.isArray(e)&&!e.length)return null;if(he.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(h=>"attributes"in h),u=e.some(h=>!h.geometry);let d=e;if(a&&u&&t&&t.allLayerViews){const h=new Map;for(const g of e){const v=g.layer,w=h.get(v)||[],_=g.attributes[v.objectIdField];_!=null&&w.push(_),h.set(v,w)}const f=[];h.forEach((g,v)=>{const w=t.allLayerViews.find(_=>_.layer.id===v.id);if("queryFeatures"in w){const _=v.createQuery();_.objectIds=g,_.returnGeometry=!0,f.push(w.queryFeatures(_))}});const y=await Promise.all(f),m=[];for(const g of y)if(g&&g.features&&g.features.length)for(const v of g.features)T(v.geometry)&&m.push(v.geometry);d=m}for(const h of d)r=await wf(h,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new le(e);else if(e instanceof pr)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const a=e.layer,u=t.allLayerViews.find(d=>d.layer.id===a.id);if("queryFeatures"in u){const d=a.createQuery();d.objectIds=[e.attributes[a.objectIdField]],d.returnGeometry=!0;const h=await u.queryFeatures(d);n=p4(h,"features",0,"geometry")}}}if(O(n)||(o=n.type==="point"?new Oe({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!o))return null;gc()||Cl(o.spatialReference,i)||await vc();const s=Op(o,i);return s?r=r?r.union(s):s:null}function gpe(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const n=r.layer;n&&n.minScale&&n.maxScale&&(t=n.minScale<t?n.minScale:t,i=n.maxScale>i?n.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function t_(e,t){return Ji(BF(e),t)?e:Op(e,t)}async function vpe(e,t){if(!e||!t)return new Oo({targetGeometry:new le,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:n,viewpoint:o,size:s}=t,a=[n?s[0]-n.left-n.right:s[0],n?s[1]-n.top-n.bottom:s[1]];let u=null;e instanceof Oo?u=e:e.viewpoint?u=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(u=e.target);let d=null;u&&u.targetGeometry?d=u.targetGeometry:e instanceof Oe?d=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(d=await wf(e.center,t,i)||await wf(e.extent,t,i)||await wf(e.target,t,i)||await wf(e,t,i)),!d&&o&&o.targetGeometry?d=o.targetGeometry:!d&&t.extent&&(d=t.extent),i||(i=BF(t.spatialReference||t.extent||d)),gc()||Ji(d.spatialReference,i)||Cl(d,i)||await vc();const h=t_(d.center?d.center:d,i);let f=null;if(u&&T(u.targetGeometry)&&u.targetGeometry.type==="point")f=u.scale;else if("scale"in e&&e.scale)f=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)f=r.zoomToScale(e.zoom);else if(Array.isArray(d)||d.type==="point"||d.type==="extent"&&d.width===0&&d.height===0){const v=t_(t.extent,i);f=T(v)?Kf(v,a):t.extent?Kf(t.extent,a):o.scale}else f=Kf(t_(d.extent,i),a);const y=gpe(e);y&&(y.min&&y.min>f?f=y.min:y.max&&y.max<f&&(f=y.max));let m=0;u?m=u.rotation:e.hasOwnProperty("rotation")?m=e.rotation:o&&(m=o.rotation);let g=new Oo({targetGeometry:h,scale:f,rotation:m});return r&&(g=r.fit(g),r.constrainByGeometry(g),r.rotationEnabled||(g.rotation=m)),g}function ao(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function wpe(e,t,i){return i?ei(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):am(e,t,.5)}const bpe=function(){const e=Ct();return function(t,i,r){const n=i.targetGeometry;M3(e,n);const o=.5*Zp(i);return t.xmin=e[0]-o*r[0],t.ymin=e[1]-o*r[1],t.xmax=e[0]+o*r[0],t.ymax=e[1]+o*r[1],t.spatialReference=n.spatialReference,t}}();function _pe(e,t,i,r,n){return ME(e,t,i.center),e.scale=Kf(i,r),n&&n.constraints&&n.constraints.constrain(e),e}function Spe(e,t,i,r){return P3(e,t,i,r),T3(e,e)}const VF=function(){const e=Ct();return function(t,i,r){return I3(t,xpe(t,i),wpe(e,i,r))}}(),Tpe=function(){const e=bl(),t=Ct();return function(i,r,n,o){const s=Zp(r),a=N3(r);return ei(t,s,s),aF(e,t),bw(e,e,a),Iy(e,e,VF(t,n,o)),Iy(e,e,[0,o.top-o.bottom]),ei(i,e[4],e[5])}}();function Zp(e){return e.scale*Epe(e.targetGeometry)}function Epe(e){return T(e)&&Mi(e.spatialReference)?1/(UF(e.spatialReference)*FF*kF):1}function N3(e){return MA(e.rotation)||0}function Ape(e){return Mi(e)?UF(e)*FF*kF:1}function xpe(e,t){return am(e,t,.5)}const R3=function(){const e=Ct(),t=Ct(),i=Ct();return function(r,n,o,s,a,u){return NF(e,n),am(t,o,.5*u),ei(i,1/s*u,-1/s*u),A3(r,t),a&&bw(r,r,a),E3(r,r,i),Iy(r,r,e),r}}(),P3=function(){const e=Ct();return function(t,i,r,n){const o=Zp(i),s=N3(i);return M3(e,i.targetGeometry),R3(t,e,r,o,s,n)}}(),Cpe=function(){const e=Ct();return function(t,i,r,n){const o=Zp(i);return M3(e,i.targetGeometry),R3(t,e,r,o,0,n)}}();function Ipe(e){const t=to(e);return t?t.valid[1]-t.valid[0]:0}function Mpe(e,t){return Math.round(Ipe(e)/t)}const Npe=function(){const e=Ct(),t=Ct(),i=[0,0,0];return function(r,n,o){Ry(e,r,n),IE(e,e),Ry(t,r,o),IE(t,t),PF(i,e,t);let s=Math.acos(RF(e,t)/(ev(e)*ev(t)))*mpe;return i[2]<0&&(s=-s),isNaN(s)&&(s=0),s}}(),Rpe=function(){const e=Ct();return function(t,i,r,n){const o=t.targetGeometry;return ao(t,i),Tpe(e,i,r,n),o.x+=e[0],o.y+=e[1],t}}(),ME=function(e,t,i){ao(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},Ppe=function(){const e=Ct();return function(t,i,r,n,o){o||(o="center"),I3(e,r,n),am(e,e,.5);const s=e[0],a=e[1];switch(o){case"center":ei(e,0,0);break;case"left":ei(e,-s,0);break;case"top":ei(e,0,a);break;case"right":ei(e,s,0);break;case"bottom":ei(e,0,-a);break;case"top-left":ei(e,-s,a);break;case"bottom-left":ei(e,-s,-a);break;case"top-right":ei(e,s,a);break;case"bottom-right":ei(e,s,-a)}return Tw(t,i,e),t}}();function Dve(e,t,i){return ao(e,t),e.rotation+=i,e}function $pe(e,t,i){return ao(e,t),e.rotation=i,e}const Dpe=function(){const e=Ct();return function(t,i,r,n,o){return ao(t,i),isNaN(r)||r===0||(zF(e,n,i,o),t.scale=i.scale*r,HF(e,e,t,o),Tw(t,t,ei(e,e[0]-n[0],n[1]-e[1]))),t}}();function wP(e,t,i){return ao(e,t),e.scale=i,e}const jF=function(){const e=Ct();return function(t,i,r,n,o,s){return ao(t,i),isNaN(r)||r===0||(zF(e,o,i,s),t.scale=i.scale*r,t.rotation+=n,HF(e,e,t,s),Tw(t,t,ei(e,e[0]-o[0],o[1]-e[1]))),t}}(),Lve=function(){const e=Ct(),t=Ct();return function(i,r,n,o,s,a,u){return VF(t,a,u),xF(e,s,t),o?jF(i,r,n,o,e,a):Dpe(i,r,n,e,a)}}(),zF=function(){const e=bl();return function(t,i,r,n){return Ro(t,i,Spe(e,r,n,1))}}(),HF=function(){const e=bl();return function(t,i,r,n){return Ro(t,i,P3(e,r,n,1))}}(),Tw=function(){const e=Ct(),t=bl();return function(i,r,n){ao(i,r);const o=Zp(r),s=i.targetGeometry;return sF(t,N3(r)),E3(t,t,um(o,o)),Ro(e,n,t),s.x+=e[0],s.y+=e[1],i}}();class Lpe{constructor(t,i,r,n){const o=t.targetGeometry,s=i.targetGeometry;n?typeof n=="string"&&(n=Lde(n)||rn.ease):n=rn.ease,this.easing=n,this.duration=r,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=s.x,this.tCenterY=s.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let n,o,s,a;i>=1?(n=this.tCenterX,o=this.tCenterY,s=this.tRotation,a=this.tScale):(n=this.sCenterX+r*this.dCenterX,o=this.sCenterY+r*this.dCenterY,s=this.sRotation+r*this.dRotation,a=this.sScale+r*this.dScale),t.targetGeometry.x=n,t.targetGeometry.y=o,t.scale=a,t.rotation=s}}let As=class extends se{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=rn.ease,this.view=null,this.viewpoint=null,this.viewpoint=new Oo({targetGeometry:new le,scale:0,rotation:0}),this._updateTask=ip({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const r=this.viewpoint;ao(r,t),this.transition=new Lpe(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new CE({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==CE.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,r=i>=1;this.transition.applyRatio(this.viewpoint,i),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};l([c()],As.prototype,"animation",void 0),l([c()],As.prototype,"duration",void 0),l([c()],As.prototype,"transition",void 0),l([c()],As.prototype,"easing",void 0),l([c()],As.prototype,"view",void 0),l([c()],As.prototype,"viewpoint",void 0),As=l([S("esri.views.2d.AnimationManager")],As);const Ope=As;class kpe{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:n,layerViews:o,state:{id:s}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),o.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),T(n)&&(n.lastUpdateId!==s&&(n.viewChange(),n.lastUpdateId=s),n.updateRequested&&n.processUpdate(this._updateParameters)),T(r)&&(r.lastUpdateId!==s&&(r.viewChange(),r.lastUpdateId=s),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=q(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=ip(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function Ot(){return Promise.all([B(()=>import("./webglDeps.26f60707.js"),["webglDeps.26f60707.js","VertexArrayObject.18206864.js","Texture.6046e9e1.js","ProgramTemplate.e5f95dcf.js","programUtils.59c311c9.js"],import.meta.url),B(()=>import("./mapViewDeps.62f8db36.js"),["mapViewDeps.62f8db36.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","MaterialKey.533e6e48.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","utils.29d76383.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","programUtils.59c311c9.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","_commonjsHelpers.01f5fe30.js","imageutils.dfc9ea3f.js","Matcher.f2f572ed.js","visualVariablesUtils.0da211a7.js","visualVariablesUtils.e9b6c4c3.js","tileUtils.0aba5172.js","TileClipper.751deb6d.js","devEnvironmentUtils.8c6e6b72.js","CircularArray.0dc82e32.js","requestImageUtils.e1746186.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","BaseGraphicContainer.456951b0.js","normalizeUtilsSync.869f136d.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","FeatureContainer.4e54c97a.js","TileContainer.40873ca2.js","schemaUtils.f6ca3ef0.js","createSymbolSchema.9c329f9d.js","MD5.97b39efc.js","util.7630c51b.js","vec3f32.8d37ecf5.js","GraphicContainer.a3d8f493.js"],import.meta.url)])}const vh=()=>Ot().then(()=>B(()=>import("./TileLayerView2D.20d69f41.js"),["TileLayerView2D.20d69f41.js","imageUtils.40d6d24a.js","BitmapTileContainer.4bed9270.js","Bitmap.d94cb2b5.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","TileContainer.40873ca2.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","RefreshableLayerView.b4b52a97.js","drapedUtils.0c33a899.js"],import.meta.url)),d0=()=>Ot().then(()=>B(()=>import("./FeatureLayerView2D.f50a39cd.js"),["FeatureLayerView2D.f50a39cd.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","LayerView.dd8fedf7.js","schemaUtils.f6ca3ef0.js","visualVariablesUtils.e9b6c4c3.js","createSymbolSchema.9c329f9d.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","MD5.97b39efc.js","util.7630c51b.js","floorFilterUtils.69500d62.js","popupUtils.73ff1c6a.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),bP={"base-dynamic":()=>Ot().then(()=>B(()=>import("./BaseDynamicLayerView2D.c7246add.js"),["BaseDynamicLayerView2D.c7246add.js","BitmapContainer.2e31aea4.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","ExportStrategy.682008c0.js","Bitmap.d94cb2b5.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),"base-tile":vh,"bing-maps":vh,csv:d0,"geo-rss":()=>Ot().then(()=>B(()=>import("./GeoRSSLayerView2D.79f837ba.js"),["GeoRSSLayerView2D.79f837ba.js","LayerView.dd8fedf7.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","GraphicContainer.a3d8f493.js","BaseGraphicContainer.456951b0.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","normalizeUtilsSync.869f136d.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","VertexArrayObject.18206864.js","FeatureContainer.4e54c97a.js","TileContainer.40873ca2.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","visualVariablesUtils.0da211a7.js","visualVariablesUtils.e9b6c4c3.js","Matcher.f2f572ed.js","tileUtils.0aba5172.js","TileClipper.751deb6d.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.f6ca3ef0.js","createSymbolSchema.9c329f9d.js","MD5.97b39efc.js","util.7630c51b.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","vec3f32.8d37ecf5.js"],import.meta.url)),feature:d0,geojson:d0,graphics:()=>Ot().then(()=>B(()=>import("./GraphicsLayerView2D.c9572008.js"),["GraphicsLayerView2D.c9572008.js","LayerView.dd8fedf7.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","GraphicContainer.a3d8f493.js","BaseGraphicContainer.456951b0.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","normalizeUtilsSync.869f136d.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","VertexArrayObject.18206864.js","FeatureContainer.4e54c97a.js","TileContainer.40873ca2.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","visualVariablesUtils.0da211a7.js","visualVariablesUtils.e9b6c4c3.js","Matcher.f2f572ed.js","tileUtils.0aba5172.js","TileClipper.751deb6d.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.f6ca3ef0.js","createSymbolSchema.9c329f9d.js","MD5.97b39efc.js","util.7630c51b.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","vec3f32.8d37ecf5.js"],import.meta.url)),group:()=>Ot().then(()=>B(()=>import("./GroupLayerView2D.73fe6ded.js"),["GroupLayerView2D.73fe6ded.js","GroupContainer.89226a9e.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js"],import.meta.url)),imagery:()=>Ot().then(()=>B(()=>import("./ImageryLayerView2D.047d9988.js"),["ImageryLayerView2D.047d9988.js","RasterVFDisplayObject.71a9f383.js","VertexArrayObject.18206864.js","Texture.6046e9e1.js","dataUtils.d155936b.js","pixelUtils.af09ba54.js","WGLContainer.ffb4824a.js","utils.29d76383.js","Utils.adb0c2a0.js","MaterialKey.533e6e48.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","BaseGraphicContainer.456951b0.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","normalizeUtilsSync.869f136d.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","FeatureContainer.4e54c97a.js","TileContainer.40873ca2.js","visualVariablesUtils.0da211a7.js","visualVariablesUtils.e9b6c4c3.js","Matcher.f2f572ed.js","tileUtils.0aba5172.js","TileClipper.751deb6d.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.f6ca3ef0.js","createSymbolSchema.9c329f9d.js","MD5.97b39efc.js","util.7630c51b.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","vec3f32.8d37ecf5.js","HighlightGraphicContainer.685f03c5.js","BitmapContainer.2e31aea4.js","Bitmap.d94cb2b5.js","ExportStrategy.682008c0.js","rasterProjectionHelper.89a91399.js","popupUtils.73ff1c6a.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),"imagery-tile":()=>Ot().then(()=>B(()=>import("./ImageryTileLayerView2D.1aeacf20.js"),["ImageryTileLayerView2D.1aeacf20.js","RasterVFDisplayObject.71a9f383.js","VertexArrayObject.18206864.js","Texture.6046e9e1.js","dataUtils.d155936b.js","pixelUtils.af09ba54.js","WGLContainer.ffb4824a.js","utils.29d76383.js","Utils.adb0c2a0.js","MaterialKey.533e6e48.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","TileContainer.40873ca2.js","RawBlockCache.818a2652.js","rasterProjectionHelper.89a91399.js","util.7630c51b.js","popupUtils.73ff1c6a.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),kml:()=>Ot().then(()=>B(()=>import("./KMLLayerView2D.f382facb.js"),["KMLLayerView2D.f382facb.js","kmlUtils.f90ca150.js","Bitmap.d94cb2b5.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","BitmapContainer.2e31aea4.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","GraphicContainer.a3d8f493.js","BaseGraphicContainer.456951b0.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","normalizeUtilsSync.869f136d.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","FeatureContainer.4e54c97a.js","TileContainer.40873ca2.js","visualVariablesUtils.0da211a7.js","visualVariablesUtils.e9b6c4c3.js","Matcher.f2f572ed.js","tileUtils.0aba5172.js","TileClipper.751deb6d.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.f6ca3ef0.js","createSymbolSchema.9c329f9d.js","MD5.97b39efc.js","util.7630c51b.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","vec3f32.8d37ecf5.js"],import.meta.url)),"map-image":()=>Ot().then(()=>B(()=>import("./MapImageLayerView2D.637339da.js"),["MapImageLayerView2D.637339da.js","BitmapContainer.2e31aea4.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","BaseGraphicContainer.456951b0.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","normalizeUtilsSync.869f136d.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","FeatureContainer.4e54c97a.js","TileContainer.40873ca2.js","visualVariablesUtils.0da211a7.js","visualVariablesUtils.e9b6c4c3.js","Matcher.f2f572ed.js","tileUtils.0aba5172.js","TileClipper.751deb6d.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.f6ca3ef0.js","createSymbolSchema.9c329f9d.js","MD5.97b39efc.js","util.7630c51b.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","vec3f32.8d37ecf5.js","HighlightGraphicContainer.685f03c5.js","ExportStrategy.682008c0.js","Bitmap.d94cb2b5.js","ExportImageParameters.7253e133.js","floorFilterUtils.69500d62.js","sublayerUtils.2838f55f.js","drapedUtils.0c33a899.js","popupUtils.73ff1c6a.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),"map-notes":()=>Ot().then(()=>B(()=>import("./MapNotesLayerView2D.1dfc5eab.js"),["MapNotesLayerView2D.1dfc5eab.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","GroupContainer.89226a9e.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","GraphicContainer.a3d8f493.js","BaseGraphicContainer.456951b0.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","normalizeUtilsSync.869f136d.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","FeatureContainer.4e54c97a.js","TileContainer.40873ca2.js","visualVariablesUtils.0da211a7.js","visualVariablesUtils.e9b6c4c3.js","Matcher.f2f572ed.js","tileUtils.0aba5172.js","TileClipper.751deb6d.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.f6ca3ef0.js","createSymbolSchema.9c329f9d.js","MD5.97b39efc.js","util.7630c51b.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","vec3f32.8d37ecf5.js"],import.meta.url)),media:()=>Ot().then(()=>B(()=>import("./MediaLayerView2D.13e35fca.js"),["MediaLayerView2D.13e35fca.js","normalizeUtilsSync.869f136d.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","VertexArrayObject.18206864.js","vec3f32.8d37ecf5.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js"],import.meta.url)),"ogc-feature":()=>Ot().then(()=>B(()=>import("./OGCFeatureLayerView2D.b4bdb880.js"),["OGCFeatureLayerView2D.b4bdb880.js","FeatureLayerView2D.f50a39cd.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","LayerView.dd8fedf7.js","schemaUtils.f6ca3ef0.js","visualVariablesUtils.e9b6c4c3.js","createSymbolSchema.9c329f9d.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","MD5.97b39efc.js","util.7630c51b.js","floorFilterUtils.69500d62.js","popupUtils.73ff1c6a.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),"open-street-map":vh,route:()=>Ot().then(()=>B(()=>import("./RouteLayerView2D.84182949.js"),["RouteLayerView2D.84182949.js","Stop.c2c393a0.js","LayerView.dd8fedf7.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","GraphicContainer.a3d8f493.js","BaseGraphicContainer.456951b0.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","normalizeUtilsSync.869f136d.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","VertexArrayObject.18206864.js","FeatureContainer.4e54c97a.js","TileContainer.40873ca2.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","visualVariablesUtils.0da211a7.js","visualVariablesUtils.e9b6c4c3.js","Matcher.f2f572ed.js","tileUtils.0aba5172.js","TileClipper.751deb6d.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.f6ca3ef0.js","createSymbolSchema.9c329f9d.js","MD5.97b39efc.js","util.7630c51b.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","vec3f32.8d37ecf5.js"],import.meta.url)),stream:()=>Ot().then(()=>B(()=>import("./StreamLayerView2D.64489564.js"),["StreamLayerView2D.64489564.js","FeatureLayerView2D.f50a39cd.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","LayerView.dd8fedf7.js","schemaUtils.f6ca3ef0.js","visualVariablesUtils.e9b6c4c3.js","createSymbolSchema.9c329f9d.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","MD5.97b39efc.js","util.7630c51b.js","floorFilterUtils.69500d62.js","popupUtils.73ff1c6a.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),"subtype-group":()=>Ot().then(()=>B(()=>import("./SubtypeGroupLayerView2D.10b587e9.js"),["SubtypeGroupLayerView2D.10b587e9.js","FeatureLayerView2D.f50a39cd.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","LayerView.dd8fedf7.js","schemaUtils.f6ca3ef0.js","visualVariablesUtils.e9b6c4c3.js","createSymbolSchema.9c329f9d.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","MD5.97b39efc.js","util.7630c51b.js","floorFilterUtils.69500d62.js","popupUtils.73ff1c6a.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),tile:vh,"vector-tile":()=>Ot().then(()=>B(()=>import("./VectorTileLayerView2D.062ce34b.js"),["VectorTileLayerView2D.062ce34b.js","BidiEngine.ec67919b.js","Texture.6046e9e1.js","CIMSymbolHelper.12e07dc8.js","MaterialKey.533e6e48.js","Utils.adb0c2a0.js","VertexArrayObject.18206864.js","config.40d47db8.js","TileContainer.40873ca2.js","utils.29d76383.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","ProgramTemplate.e5f95dcf.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","Bitmap.d94cb2b5.js","BitmapContainer.2e31aea4.js"],import.meta.url)),wcs:()=>Ot().then(()=>B(()=>import("./ImageryTileLayerView2D.1aeacf20.js"),["ImageryTileLayerView2D.1aeacf20.js","RasterVFDisplayObject.71a9f383.js","VertexArrayObject.18206864.js","Texture.6046e9e1.js","dataUtils.d155936b.js","pixelUtils.af09ba54.js","WGLContainer.ffb4824a.js","utils.29d76383.js","Utils.adb0c2a0.js","MaterialKey.533e6e48.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","TileContainer.40873ca2.js","RawBlockCache.818a2652.js","rasterProjectionHelper.89a91399.js","util.7630c51b.js","popupUtils.73ff1c6a.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),"web-tile":vh,wfs:d0,wms:()=>Ot().then(()=>B(()=>import("./WMSLayerView2D.2d2818fd.js"),["WMSLayerView2D.2d2818fd.js","BitmapContainer.2e31aea4.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","ExportStrategy.682008c0.js","Bitmap.d94cb2b5.js","RefreshableLayerView.b4b52a97.js","ExportWMSImageParameters.9f2aa132.js"],import.meta.url)),wmts:()=>Ot().then(()=>B(()=>import("./WMTSLayerView2D.c1bf6541.js"),["WMTSLayerView2D.c1bf6541.js","imageUtils.40d6d24a.js","BitmapTileContainer.4bed9270.js","Bitmap.d94cb2b5.js","utils.29d76383.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","MaterialKey.533e6e48.js","TileContainer.40873ca2.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.dd8fedf7.js","RefreshableLayerView.b4b52a97.js"],import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Fpe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new I(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const _P={hasLayerViewModule:e=>T(bP[e.type]),importLayerView:e=>{const t=bP[e.type];if(O(t))throw Fpe(e);return t(e)}};function Bpe(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let n=Number.POSITIVE_INFINITY,o=0,s=0;const a=[0,0],u=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const d of u)for(let h=0;h<d.length-1;h++){mq(a,r,d,h);const f=lm(r,a);f<n&&(n=f,o=a[0],s=a[1])}return{coordinate:new le({x:o,y:s,spatialReference:i}),distance:n}}var NE;const Upe=W.getLogger("esri.views.MapView");let Ru=NE=class extends se{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(O(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Op(this.geometry,this.spatialReference)}catch(e){return Upe.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(O(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Dv(this.normalizedGeometry,i):F5(this.normalizedGeometry,i))return e;const{coordinate:r}=Bpe(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new NE({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};l([c({constructOnly:!0})],Ru.prototype,"geometry",void 0),l([c({readOnly:!0})],Ru.prototype,"normalizedGeometry",null),l([c({constructOnly:!0})],Ru.prototype,"spatialReference",void 0),Ru=NE=l([S("esri.views.2d.constraints.GeometryConstraint")],Ru);var RE;let bf=RE=class extends se{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new RE({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([c()],bf.prototype,"enabled",void 0),l([c()],bf.prototype,"rotationEnabled",void 0),bf=RE=l([S("esri.views.2d.constraints.RotationConstraint")],bf);const GF=bf;var PE;let nr=PE=class extends se{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:n,maxZoom:o}=this,s=-1,a=-1,u=!1,d=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!u&&i>0&&i>=h.scale&&(s=h.level,u=!0),!d&&r>0&&r>=h.scale&&(a=e?e.level:-1,d=!0),e=h;n===-1&&(n=i===0?0:s),o===-1&&(o=r===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),o=Math.max(o,0),o=Math.min(o,t.length-1),n>o&&([n,o]=[o,n]),i=t[n].scale,r=t[o].scale,t.splice(0,n),t.splice(o-n+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=e.targetGeometry,o=t&&t.targetGeometry,s=r!==0&&e.scale<r,a=i!==0&&e.scale>i;if(s||a){const u=a?i:r;if(o){const d=(u-t.scale)/(e.scale-t.scale);n.x=o.x+(n.x-o.x)*d,n.y=o.y+(n.y-o.y)*d}e.scale=u}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],r===e)return n+this.effectiveMinZoom+1;if(i>e&&r<e)return n+this.effectiveMinZoom+1-(e-r)/(i-r)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new PE({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};l([c({readOnly:!0})],nr.prototype,"effectiveLODs",void 0),l([c({readOnly:!0})],nr.prototype,"effectiveMinZoom",void 0),l([c({readOnly:!0})],nr.prototype,"effectiveMaxZoom",void 0),l([c({readOnly:!0})],nr.prototype,"effectiveMinScale",void 0),l([c({readOnly:!0})],nr.prototype,"effectiveMaxScale",void 0),l([c()],nr.prototype,"lods",void 0),l([c()],nr.prototype,"minZoom",void 0),l([c()],nr.prototype,"maxZoom",void 0),l([c()],nr.prototype,"minScale",void 0),l([c()],nr.prototype,"maxScale",void 0),l([c()],nr.prototype,"snapToZoom",void 0),nr=PE=l([S("esri.views.2d.constraints.ZoomConstraint")],nr);const WF=nr,Vpe={base:null,key:"type",typeMap:{extent:Oe,polygon:fr}};let At=class extends se{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((e=this._get("version"))!=null?e:0)+1}get _defaultLODs(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:r.tileInfo,t=(n=this.view)==null?void 0:n.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new Ru({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new GF({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,n=this.minScale,o=this.maxScale,s=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===n&&e.maxScale===o&&e.snapToZoom===s?e:new WF({lods:t,minZoom:i,maxZoom:r,minScale:n,maxScale:o,snapToZoom:s})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};l([c({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],At.prototype,"effectiveLODs",void 0),l([c({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],At.prototype,"effectiveMinScale",void 0),l([c({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],At.prototype,"effectiveMaxScale",void 0),l([c({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],At.prototype,"effectiveMinZoom",void 0),l([c({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],At.prototype,"effectiveMaxZoom",void 0),l([c({types:Vpe,value:null})],At.prototype,"geometry",null),l([c({type:[fx]})],At.prototype,"lods",void 0),l([c()],At.prototype,"minScale",void 0),l([c()],At.prototype,"maxScale",void 0),l([c()],At.prototype,"minZoom",void 0),l([c()],At.prototype,"maxZoom",void 0),l([c()],At.prototype,"rotationEnabled",void 0),l([c()],At.prototype,"snapToZoom",void 0),l([c()],At.prototype,"view",void 0),l([c({readOnly:!0})],At.prototype,"version",null),l([c()],At.prototype,"_defaultLODs",null),l([c({type:Ru})],At.prototype,"_geometry",null),l([c({type:GF})],At.prototype,"_rotation",null),l([c({readOnly:!0,type:WF})],At.prototype,"_zoom",null),At=l([S("esri.views.2d.MapViewConstraints")],At);const qF=At;function jpe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function zpe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function YF(e,t,i,r,n,o,s,a,u,d){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=s,e[6]=a,e[7]=u,e[8]=d,e}function KF(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Hpe(e,t){if(e===t){const i=t[1],r=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Gpe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=h*s-a*d,y=-h*o+a*u,m=d*o-s*u;let g=i*f+r*y+n*m;return g?(g=1/g,e[0]=f*g,e[1]=(-h*r+n*d)*g,e[2]=(a*r-n*s)*g,e[3]=y*g,e[4]=(h*i-n*u)*g,e[5]=(-a*i+n*o)*g,e[6]=m*g,e[7]=(-d*i+r*u)*g,e[8]=(s*i-r*o)*g,e):null}function Wpe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8];return e[0]=s*h-a*d,e[1]=n*d-r*h,e[2]=r*a-n*s,e[3]=a*u-o*h,e[4]=i*h-n*u,e[5]=n*o-i*a,e[6]=o*d-s*u,e[7]=r*u-i*d,e[8]=i*s-r*o,e}function qpe(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],s=e[5],a=e[6],u=e[7],d=e[8];return t*(d*o-s*u)+i*(-d*n+s*a)+r*(u*n-o*a)}function $3(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],y=i[0],m=i[1],g=i[2],v=i[3],w=i[4],_=i[5],A=i[6],M=i[7],$=i[8];return e[0]=y*r+m*s+g*d,e[1]=y*n+m*a+g*h,e[2]=y*o+m*u+g*f,e[3]=v*r+w*s+_*d,e[4]=v*n+w*a+_*h,e[5]=v*o+w*u+_*f,e[6]=A*r+M*s+$*d,e[7]=A*n+M*a+$*h,e[8]=A*o+M*u+$*f,e}function $E(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],y=i[0],m=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=s,e[4]=a,e[5]=u,e[6]=y*r+m*s+d,e[7]=y*n+m*a+h,e[8]=y*o+m*u+f,e}function ZF(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],y=Math.sin(i),m=Math.cos(i);return e[0]=m*r+y*s,e[1]=m*n+y*a,e[2]=m*o+y*u,e[3]=m*s-y*r,e[4]=m*a-y*n,e[5]=m*u-y*o,e[6]=d,e[7]=h,e[8]=f,e}function Ype(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=o*t[6],e[7]=o*t[7],e[8]=o*t[8],e}function Kpe(e,t,i){const r=i[0],n=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function Zpe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Jpe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Xpe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Qpe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function ehe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=i+i,a=r+r,u=n+n,d=i*s,h=r*s,f=r*a,y=n*s,m=n*a,g=n*u,v=o*s,w=o*a,_=o*u;return e[0]=1-f-g,e[3]=h-_,e[6]=y+w,e[1]=h+_,e[4]=1-d-g,e[7]=m-v,e[2]=y-w,e[5]=m+v,e[8]=1-d-f,e}function the(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],s=t[5],a=t[6],u=t[8],d=t[9],h=t[10],f=h*s-a*d,y=-h*o+a*u,m=d*o-s*u,g=i*f+r*y+n*m;if(!g)return null;const v=1/g;return e[0]=f*v,e[1]=(-h*r+n*d)*v,e[2]=(a*r-n*s)*v,e[3]=y*v,e[4]=(h*i-n*u)*v,e[5]=(-a*i+n*o)*v,e[6]=m*v,e[7]=(-d*i+r*u)*v,e[8]=(s*i-r*o)*v,e}function ihe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],v=t[13],w=t[14],_=t[15],A=i*a-r*s,M=i*u-n*s,$=i*d-o*s,N=r*u-n*a,D=r*d-o*a,V=n*d-o*u,G=h*v-f*g,Z=h*w-y*g,ee=h*_-m*g,re=f*w-y*v,ue=f*_-m*v,ge=y*_-m*w;let ne=A*ge-M*ue+$*re+N*ee-D*Z+V*G;return ne?(ne=1/ne,e[0]=(a*ge-u*ue+d*re)*ne,e[1]=(u*ee-s*ge-d*Z)*ne,e[2]=(s*ue-a*ee+d*G)*ne,e[3]=(n*ue-r*ge-o*re)*ne,e[4]=(i*ge-n*ee+o*Z)*ne,e[5]=(r*ee-i*ue-o*G)*ne,e[6]=(v*V-w*D+_*N)*ne,e[7]=(w*$-g*V-_*M)*ne,e[8]=(g*D-v*$+_*A)*ne,e):null}function rhe(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function nhe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function ohe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function she(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function JF(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function ahe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function lhe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function uhe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function che(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6],d=e[7],h=e[8],f=t[0],y=t[1],m=t[2],g=t[3],v=t[4],w=t[5],_=t[6],A=t[7],M=t[8];return Math.abs(i-f)<=be*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-y)<=be*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-m)<=be*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(o-g)<=be*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(s-v)<=be*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(a-w)<=be*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-_)<=be*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(d-A)<=be*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-M)<=be*Math.max(1,Math.abs(h),Math.abs(M))}function dhe(e){const t=be,i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6],d=e[7],h=e[8];return Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(r*r+s*s+d*d))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const phe=$3,hhe=JF;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:jpe,copy:zpe,set:YF,identity:KF,transpose:Hpe,invert:Gpe,adjoint:Wpe,determinant:qpe,multiply:$3,translate:$E,rotate:ZF,scale:Ype,scaleByVec2:Kpe,fromTranslation:Zpe,fromRotation:Jpe,fromScaling:Xpe,fromMat2d:Qpe,fromQuat:ehe,normalFromMat4Legacy:the,normalFromMat4:ihe,projection:rhe,str:nhe,frob:ohe,add:she,subtract:JF,multiplyScalar:ahe,multiplyScalarAndAdd:lhe,exactEquals:uhe,equals:che,isOrthoNormal:dhe,mul:phe,sub:hhe},Symbol.toStringTag,{value:"Module"}));function $g(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function fhe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function yhe(e,t,i,r,n,o,s,a,u){const d=new Float32Array(9);return d[0]=e,d[1]=t,d[2]=i,d[3]=r,d[4]=n,d[5]=o,d[6]=s,d[7]=a,d[8]=u,d}function mhe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:$g,clone:fhe,fromValues:yhe,createView:mhe},Symbol.toStringTag,{value:"Module"}));function XF(){return new Float32Array(2)}function ghe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function bp(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function vhe(e,t){return new Float32Array(e,t,2)}function QF(){return XF()}function eB(){return bp(1,1)}function tB(){return bp(1,0)}function iB(){return bp(0,1)}const whe=QF(),bhe=eB(),_he=tB(),She=iB();Object.freeze(Object.defineProperty({__proto__:null,create:XF,clone:ghe,fromValues:bp,createView:vhe,zeros:QF,ones:eB,unitX:tB,unitY:iB,ZEROS:whe,ONES:bhe,UNIT_X:_he,UNIT_Y:She},Symbol.toStringTag,{value:"Module"}));function The(e){return e instanceof Float32Array&&e.length>=2}function Ehe(e){return Array.isArray(e)&&e.length>=2}function i_(e){return The(e)||Ehe(e)}var DE;const ss=[0,0];let ja=DE=class extends U{constructor(e){super(e),this._viewpoint2D={center:Ct(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new Oe,this.id=0,this.inverseTransform=bl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=bl(),this.transformNoRotation=bl(),this.displayMat3=$g(),this.displayViewMat3=$g(),this.viewMat3=$g(),this.viewMat2d=rF(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=ao(i,e.viewpoint),this._set("size",Ny(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new DE({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return i_(t)?Ro(e,t,this.inverseTransform):(ss[0]=t,ss[1]=i,Ro(e,ss,this.inverseTransform))}toScreen(e,t,i){return i_(t)?Ro(e,t,this.transform):(ss[0]=t,ss[1]=i,Ro(e,ss,this.transform))}toScreenNoRotation(e,t,i){return i_(t)?Ro(e,t,this.transformNoRotation):(ss[0]=t,ss[1]=i,Ro(e,ss,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return R3(e,i,n,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),s=new Oo({targetGeometry:new le(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",s),!o||!t||!i)return;this.resolution=Zp(s),this.rotation=r,this.scale=i,this.spatialReference=t,Ny(this.center,e);const a=o[0]!==0?2/o[0]:0,u=o[1]!==0?-2/o[1]:0;YF(this.displayMat3,a,0,0,0,u,0,-1,1,1);const d=KF(this.viewMat3),h=bp(o[0]/2,o[1]/2),f=bp(-o[0]/2,-o[1]/2),y=MA(r);$E(d,d,h),ZF(d,d,y),$E(d,d,f),$3(this.displayViewMat3,this.displayMat3,d);const m=A3(this.viewMat2d,h);return bw(m,m,y),Iy(m,m,f),bpe(this.extent,s,o),P3(this.transform,s,o,n),T3(this.inverseTransform,this.transform),Cpe(this.transformNoRotation,s,o,n),this.worldScreenWidth=Mpe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};l([c({readOnly:!0})],ja.prototype,"id",void 0),l([c({value:1,json:{write:!0}})],ja.prototype,"pixelRatio",null),l([c({json:{write:!0}})],ja.prototype,"size",null),l([c()],ja.prototype,"spatialReference",void 0),l([c({type:Oo,json:{write:!0}})],ja.prototype,"viewpoint",null),ja=DE=l([S("esri.views.2d.ViewState")],ja);const SP=ja;var LE,OE;let $s=LE=class extends se{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new LE({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([c()],$s.prototype,"left",void 0),l([c()],$s.prototype,"top",void 0),l([c()],$s.prototype,"right",void 0),l([c()],$s.prototype,"bottom",void 0),$s=LE=l([S("esri.views.2d.PaddedViewState.Padding")],$s);let vd=OE=class extends SP{constructor(...e){super(...e),this.paddedViewState=new SP,this._updateContent=(()=>{const t=Ct();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;ei(t,r.left+r.right,r.top+r.bottom),Ry(t,i,t),Ny(n.size,t);const o=n.viewpoint;o&&(this.viewpoint=o)}})(),this.own(q(()=>[this.size,this.padding],()=>this._updateContent(),np)),this.padding=new $s,this.size=[0,0]}set padding(e){this._set("padding",e||new $s)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,Rpe(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new OE({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([c()],vd.prototype,"paddedViewState",void 0),l([c({type:$s})],vd.prototype,"padding",null),l([c()],vd.prototype,"viewpoint",null),vd=OE=l([S("esri.views.2d.PaddedViewState")],vd);const Ahe=vd;class xhe{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class rB{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new m1(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&T(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const n=new AbortController;let o=null;i&&(o=hn(i,()=>n.abort()));const s=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),d.reject(wt())},a=()=>{u.remove(),T(o)&&o.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},u=rA(n.signal,s),d=Ws();return this._deferreds.set(t,d),this._controllers.set(t,n),d.promise.then(a,a),this._queue.push(t),this._scheduleNext(),d.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=xp(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(O(t))return;let i;const r=new AbortController,n=new xhe(t,r);this._processingItems.set(t,n);try{i=this.process(t,r.signal)}catch(o){this._processError(n,o)}Zs(i)?(n.promise=i,i.then(o=>this._processResult(n,o),o=>this._processError(n,o))):this._processResult(n,i)}get test(){return{update:t=>this.runTask(t)}}}function Che(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const r_=new Set,p0=[],kc=new Map,TP=[0,0];let pa=class extends se{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new rB({concurrency:e,process:(i,r)=>{const n=this._keyToItem.get(i);return t(n,{signal:r})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(n,n),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(d=>{const h=this._keyToItem.get(d),f=this.tileInfoView.getTileScale(h.key);kc.has(f)||(kc.set(f,[]),i=Math.max(f,i),r=Math.min(f,r)),kc.get(f).push(h.key),r_.add(f)});let n=this.state.scale;kc.has(n)||(Che(p0,r_),p0.sort((d,h)=>d-h),n=p0.reduce((d,h)=>Math.abs(h-n)<Math.abs(d-n)?h:d,p0[0])),n=Math.min(n,i),n=Math.max(n,r);const o=kc.get(n),s=t.getClosestInfoForScale(n),a=s.getColumnForX(this.state.center[0]),u=s.getRowForY(this.state.center[1]);return o.sort((d,h)=>{const f=s.denormalizeCol(d.col,d.world),y=s.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(u-d.row)*(u-d.row))-Math.sqrt((a-y)*(a-y)+(u-h.row)*(u-h.row))}),r_.clear(),kc.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return e.forEach(o=>{const s=this._keyToItem.get(o);t.getTileCoords(TP,s.key);const a=lm(TP,i);a<r&&(r=a,n=s.key)}),n.id}};l([c({constructOnly:!0})],pa.prototype,"concurrency",void 0),l([c({constructOnly:!0})],pa.prototype,"process",void 0),l([c()],pa.prototype,"state",void 0),l([c({constructOnly:!0})],pa.prototype,"strategy",void 0),l([c({constructOnly:!0})],pa.prototype,"tileInfoView",void 0),l([c({readOnly:!0})],pa.prototype,"updating",null),pa=l([S("esri.views.2d.tiling.PagedTileQueue")],pa);class Ai{constructor(t,i,r,n){this.set(t,i,r,n)}static getId(t,i,r,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${n}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,n){this.set(t,i,r,n)}contains(t){const i=t.level-this.level;return this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Ai(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[o,s,a,u]=t.split("/");this.level=parseFloat(o),this.row=parseFloat(s),this.col=parseFloat(a),this.world=parseFloat(u)}else this.level=+t,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Ai(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new Ai(t,i,r,n),new Ai(t,i,r+1,n),new Ai(t,i+1,r,n),new Ai(t,i+1,r+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Ai.pool=new no(Ai,null,null,25,50);function ha(e,t){return[e,t]}function Ul(e,t,i){return e[0]=t,e[1]=i,e}function Ihe(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}const An=new Ai("0/0/0/0");class D3{constructor(t,i,r,n,o,s,a,u,d,h,f,y){this.level=t,this.resolution=i,this.scale=r,this.origin=n,this.first=o,this.last=s,this.size=a,this.norm=u,this.worldStart=d,this.worldEnd=h,this.worldSize=f,this.wrap=y}static create(t,i,r=null){const n=to(t.spatialReference),o=i.origin||ha(t.origin.x,t.origin.y),s=ha(t.size[0]*i.resolution,t.size[1]*i.resolution),a=ha(-1/0,-1/0),u=ha(1/0,1/0),d=ha(1/0,1/0);T(r)&&(Ul(a,Math.max(0,Math.floor((r.xmin-o[0])/s[0])),Math.max(0,Math.floor((o[1]-r.ymax)/s[1]))),Ul(u,Math.max(0,Math.floor((r.xmax-o[0])/s[0])),Math.max(0,Math.floor((o[1]-r.ymin)/s[1]))),Ul(d,u[0]-a[0]+1,u[1]-a[1]+1));const{cols:h,rows:f}=i;let y,m,g,v;return!r&&h&&f&&(Ul(a,h[0],f[0]),Ul(u,h[1],f[1]),Ul(d,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(y=ha(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/t.size[0]),d[1]),m=ha(Math.floor((n.origin[0]-o[0])/s[0]),a[1]),g=ha(y[0]+m[0]-1,u[1]),v=!0):(m=a,g=u,y=d,v=!1),new D3(i.level,i.resolution,i.scale,o,a,u,d,s,m,g,y,v)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){An.set(i);const n=r?An.col:this.denormalizeCol(An.col,An.world),o=An.row;return Ihe(t,this.getXForColumn(n),this.getYForRow(o+1),this.getXForColumn(n+1),this.getYForRow(o)),t}getTileCoords(t,i,r=!1){An.set(i);const n=r?An.col:this.denormalizeCol(An.col,An.world);return Array.isArray(t)?Ul(t,this.getXForColumn(n),this.getYForRow(An.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(An.row)),t}}class _p{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:n}=this,{level:o}=n;if(r.length!==0)for(const{row:s,colFrom:a,colTo:u}of r)for(let d=a;d<=u;d++)t.call(i,o,s,n.normalizeCol(d),n.getWorldForColumn(d))}}_p.pool=new no(_p);class n_{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}}const ot=new Ai("0/0/0/0");class L3{constructor(t,i,r,n,o,s,a,u){this.x=t,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=o,this.rightAdjust=s,this.leftBound=a,this.rightBound=u}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,n]=t,[o,s]=i,a=o-r,u=s-n,d=u!==0?a/u:0,h=(Math.ceil(n)-n)*d,f=(Math.floor(n)-n)*d;return new L3(r,Math.floor(n),Math.ceil(s),d,a<0?h:f,a<0?f:h,a<0?o:r,a<0?r:o)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const _r=[[0,0],[0,0],[0,0],[0,0]],Mhe=1e-6;class Nhe{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort((o,s)=>s.scale-o.scale);const n=this._lodInfos=r.map(o=>D3.create(t,o,i));r.forEach((o,s)=>{this._infoByLevel[o.level]=n[s],this._infoByScale[o.scale]=n[s],this.scales[s]=o.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){ot.set(i);const n=this._infoByLevel[ot.level];return n?n.getTileBounds(t,ot,r):t}getTileCoords(t,i,r=!1){ot.set(i);const n=this._infoByLevel[ot.level];return n?n.getTileCoords(t,ot,r):t}getTileCoverage(t,i=192,r="closest"){const n=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=_p.pool.acquire(n),s=this._wrap;let a,u,d,h=1/0,f=-1/0;const y=o.spans;_r[0][0]=_r[0][1]=_r[1][1]=_r[3][0]=-i,_r[1][0]=_r[2][0]=t.size[0]+i,_r[2][1]=_r[3][1]=t.size[1]+i;for(const w of _r)t.toMap(w,w),w[0]=n.getColumnForX(w[0]),w[1]=n.getRowForY(w[1]);const m=[];let g=3;for(let w=0;w<4;w++){if(_r[w][1]===_r[g][1]){g=w;continue}const _=L3.create(_r[w],_r[g]);h=Math.min(_.ymin,h),f=Math.max(_.ymax,f),m[_.ymin]===void 0&&(m[_.ymin]=[]),m[_.ymin].push(_),g=w}if(h==null||f==null||f-h>100)return null;let v=[];for(a=h;a<f;){m[a]!=null&&(v=v.concat(m[a])),u=1/0,d=-1/0;for(let w=v.length-1;w>=0;w--){const _=v[w];u=Math.min(u,_.getLeftCol()),d=Math.max(d,_.getRightCol())}if(u=Math.floor(u),d=Math.floor(d),a>=n.first[1]&&a<=n.last[1])if(s)if(n.size[0]<n.worldSize[0]){const w=Math.floor(d/n.worldSize[0]);for(let _=Math.floor(u/n.worldSize[0]);_<=w;_++)y.push(new n_(a,Math.max(n.getFirstColumnForWorld(_),u),Math.min(n.getLastColumnForWorld(_),d)))}else y.push(new n_(a,u,d));else u>n.last[0]||d<n.first[0]||(u=Math.max(u,n.first[0]),d=Math.min(d,n.last[0]),y.push(new n_(a,u,d)));a+=1;for(let w=v.length-1;w>=0;w--){const _=v[w];_.ymax>=a?_.incrRow():v.splice(w,1)}}return o}getTileParentId(t){ot.set(t);const i=this._infoByLevel[ot.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(ot,this._lodInfos[r],ot),ot.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){ot.set(i);const r=this._infoByLevel[ot.level],n=t.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(ot,n,ot);const s=n.denormalizeCol(ot.col,ot.world);for(const a of t.spans)if(a.row===ot.row&&a.colFrom<=s&&a.colTo>=s)return!0}if(n.resolution<r.resolution){const[s,a,u,d]=t.spans.reduce((v,w)=>(v[0]=Math.min(v[0],w.row),v[1]=Math.max(v[1],w.row),v[2]=Math.min(v[2],w.colFrom),v[3]=Math.max(v[3],w.colTo),v),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(ot.col,ot.world),f=n.getColumnForX(r.getXForColumn(h)),y=n.getRowForY(r.getYForRow(ot.row)),m=n.getColumnForX(r.getXForColumn(h+1))-1,g=n.getRowForY(r.getYForRow(ot.row+1))-1;return!(f>d||m<u||y>a||g<s)}const o=n.denormalizeCol(ot.col,ot.world);return t.spans.some(s=>s.row===ot.row&&s.colFrom<=o&&s.colTo>=o)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const n=to(this.tileInfo.spatialReference),o=-r*(n.valid[1]-n.valid[0]);t[0]+=o,t[2]+=o}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+Mhe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,n)=>Math.abs(n-t)<Math.abs(r-t)?n:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const n=this._infoByLevel[r.level];return t.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(t.level=i.level,t.col=Math.floor(r.col*n.resolution/i.resolution+.01),t.row=Math.floor(r.row*n.resolution/i.resolution+.01)),t)}}function Rhe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const o_=new Set,h0=[],Fc=new Map,EP=[0,0];let xs=class extends se{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new rB({concurrency:e,process:(r,n)=>{const o=this._keyToItem.get(r);return t(o,{signal:n})},peeker:i==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(d=>{const h=this._keyToItem.get(d),f=this.tileInfoView.getTileScale(h.key);Fc.has(f)||(Fc.set(f,[]),i=Math.max(f,i),r=Math.min(f,r)),Fc.get(f).push(h.key),o_.add(f)});let n=this.state.scale;Fc.has(n)||(Rhe(h0,o_),h0.sort((d,h)=>d-h),n=h0.reduce((d,h)=>Math.abs(h-n)<Math.abs(d-n)?h:d,h0[0])),n=Math.min(n,i),n=Math.max(n,r);const o=Fc.get(n),s=t.getClosestInfoForScale(n),a=s.getColumnForX(this.state.center[0]),u=s.getRowForY(this.state.center[1]);return o.sort((d,h)=>{const f=s.denormalizeCol(d.col,d.world),y=s.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(u-d.row)*(u-d.row))-Math.sqrt((a-y)*(a-y)+(u-h.row)*(u-h.row))}),o_.clear(),Fc.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return e.forEach(o=>{const s=this._keyToItem.get(o);t.getTileCoords(EP,s.key);const a=lm(EP,i);a<r&&(r=a,n=s.key)}),n.id}};l([c({constructOnly:!0})],xs.prototype,"concurrency",void 0),l([c({constructOnly:!0})],xs.prototype,"process",void 0),l([c()],xs.prototype,"state",void 0),l([c({constructOnly:!0})],xs.prototype,"strategy",void 0),l([c({constructOnly:!0})],xs.prototype,"tileInfoView",void 0),l([c({readOnly:!0})],xs.prototype,"updating",null),xs=l([S("esri.views.2d.tiling.TileQueue")],xs);const Ove=xs;class Phe{constructor(t,i,r){this.maxSize=t,this.tileInfoView=i,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return null;const r=i.key.level,n=this._tileKeysPerLevel[r];AP(this._tilePerId,t);for(let o=0;o<n.length;o++)if(n[o].id===t){n.splice(o,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(t,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let o=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&o>=0;)o!==t&&(n=this._pruneAroundCenterTile(n,i,r,o)),o--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,t))}_pruneAroundCenterTile(t,i,r,n){const o=this._tileKeysPerLevel[n];if(!o||o.length===0)return t;const{size:s,origin:a}=this.tileInfoView.tileInfo,u=r*s[0],d=r*s[1],h=[0,0],f=[0,0];for(o.sort((y,m)=>(h[0]=a.x+u*(y.col+.5),h[1]=a.y-d*(y.row+.5),f[0]=a.x+u*(m.col+.5),f[1]=a.y-d*(m.row+.5),Q1(h,i)-Q1(f,i)));o.length>0;){const y=o.pop();if(this._removeTile(y.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(i),AP(this._tilePerId,t)}}function AP(e,t){e.delete(t)}const Vl=new Ai(0,0,0,0),Hr=new Map,Bc=[],f0=[];class kve{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new Phe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,n=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(f0.length=0,Bc.length=0,Hr.clear(),!n)return;const{minScale:o,maxScale:s}=this.tileInfoView.tileInfo,{spans:a,lodInfo:u}=n,{level:d}=u,{scale:h,center:f,resolution:y}=t.state,m=!t.stationary&&h>this._previousScale;if(this._previousScale=h,this.tiles.length=0,!i&&(h>o||h<s))return this.tiles.length=0,Hr.clear(),r.forEach(_=>{this.releaseTile(_)}),r.clear(),f0.length=0,Bc.length=0,Hr.clear(),_p.pool.release(n),!0;r.forEach(_=>_.visible=!0);let g=0,v=0;if(a.length>0)for(const{row:_,colFrom:A,colTo:M}of a)for(let $=A;$<=M;$++){g++;const N=Vl.set(d,_,u.normalizeCol($),u.getWorldForColumn($)).id;if(r.has(N)){const D=r.get(N);D.isReady?(Hr.set(N,D),v++):m||this._addParentTile(N,Hr)}else{let D;if(this._tileCache&&this._tileCache.has(N)){if(D=this._tileCache.pop(N),this.tileIndex.set(N,D),D.isReady){Hr.set(N,D),v++;continue}}else D=this.acquireTile(Vl),this.tileIndex.set(N,D);m||this._addParentTile(N,Hr)}}const w=v===g;r.forEach((_,A)=>{if(Vl.set(A),Hr.has(A))return;const M=this.tileInfoView.intersects(n,Vl),$=this.cachePolicy==="purge"?Vl.level!==d:Vl.level>d;!M||!m&&w?!$&&M||Bc.push(A):_.isReady?$&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Vl,d)?Bc.push(A):f0.push(A):$&&Bc.push(A)});for(const _ of f0){const A=r.get(_);A&&A.isReady&&Hr.set(_,A)}for(const _ of Bc){const A=r.get(_);this._tileCache?this._tileCache.add(A):this.releaseTile(A),r.delete(_)}return Hr.forEach(_=>this.tiles.push(_)),r.forEach(_=>{Hr.has(_.key.id)||(_.visible=!1)}),this._tileCache&&this._tileCache.prune(d,f,y),_p.pool.release(n),Hr.clear(),w}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n&&n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n&&n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(t,i){const r=xl();this.tileInfoView.getTileBounds(r,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<t.level){const o=xl();if(this.tileInfoView.getTileBounds(o,n.key,!0),UY(o,r))return!0}return!1}}function O3(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class xP extends ri{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){O3(t.data,"primary")&&(t.stopPropagation(),i?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class $he extends ri{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:n,delta:o}=i,{view:s}=this,{mapViewNavigation:a}=s;switch(n){case"begin":{const{scale:u}=s;this._startScale=u,this._currentScale=u,this._previousDelta=o,a.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;const u=1.015**o.y,d=this._startScale*u,h=d/this._currentScale;a.setViewpointImmediate(h),this._currentScale=d;break}case"end":{const{constraints:u}=s,{effectiveLODs:d,snapToZoom:h}=u;if(!h||!d)return void a.end();const f=u.snapScale(this._currentScale),y=(o.y>0?Math.max(f,u.snapToPreviousScale(this._startScale)):Math.min(f,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(y);break}}}}class Ew{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this.currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class Dhe extends ri{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new Ew({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&O3(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Lhe extends ri{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i;const n=this.view.mapViewNavigation;this.dragEventSeparator=new Ew({start:(o,s)=>{n.rotate.begin(this.view,s.data),s.stopPropagation()},update:(o,s)=>{n.rotate.update(this.view,s.data),s.stopPropagation()},end:(o,s)=>{n.rotate.end(),s.stopPropagation()},condition:(o,s)=>o===1&&O3(s.data,this.pointerAction)}),this.registerIncoming("drag",r,o=>this.dragEventSeparator.handle(o))}}function xn(e){let t=e*e;return e<0&&(t*=-1),t}function Ohe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function khe(e,t,i){const r=i,n=e.state,o=e.device,s=t.tiltDirection==="forward-down"?1:-1,a=1;return o.deviceType==="standard"?(r.translation[0]=xn(n.axes[0]),r.translation[1]=xn(n.axes[1]),r.translation[2]=xn(n.buttons[7])-xn(n.buttons[6]),r.heading=xn(n.axes[2]),r.tilt=xn(n.axes[3])):o.deviceType==="spacemouse"&&(r.translation[0]=1.2*xn(n.axes[0]),r.translation[1]=1.2*xn(n.axes[1]),r.translation[2]=2*-xn(n.axes[2]),r.heading=1.2*xn(n.axes[5]),r.tilt=1.2*xn(n.axes[3])),r.tilt*=s,nL(r.translation,r.translation,a),r}function Fhe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class Bhe extends ri{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new mi,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([q(()=>{var i;return(i=this.view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this.handle.resume(),this.frameTask||(this.frameTask=ip({update:r=>this._frameUpdate(r.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},ze)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,Ohe(this.transformation)):(this.currentDevice=t.data.device,khe(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const i=this.transformation;if(Fhe(i))return;const r=this.view.viewpoint.clone(),n=this.view.navigation.gamepad.velocityFactor,o=Vhe*n*t;Tw(r,r,[i.translation[0]*o,-i.translation[1]*o]);const s=1+i.translation[2]*jhe*t,a=this.view.constraints.rotationEnabled?-i.heading*Uhe*t:0,u=this.view.size,d=[u[0]/2,u[1]];jF(r,r,s,a,d,u);const h=this.view.constraints.constrain(r,this.view.viewpoint);this.view.viewpoint=h}}const Uhe=.06,Vhe=.7,jhe=6e-4;class zhe extends ri{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class Hhe extends ri{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var Od;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Od||(Od={}));class Ghe extends ri{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=Od.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=Od.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:o}=this.view;let s=null;switch(n){case Od.IN:s=o.zoomIn();break;case Od.OUT:s=o.zoomOut();break;default:return}o.begin(),s.then(()=>o.end()),t.stopPropagation()}}const Whe=.6;class qhe extends ri{constructor(t,i){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this.view.mapViewNavigation,{x:r,y:n,deltaY:o}=t.data,s=1/Whe**(1/60*o),a=i.zoom(s,[r,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class Yhe extends ri{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this.dragEventSeparator=new Ew({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function CP(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>Jhe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function Khe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function Zhe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function Jhe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class Xhe{constructor(t,i){this.element=t,this.input=i,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{const s=o.gamepad,a=s.index,u=this.inputDevices[a];u&&(this._emitGamepadEvent(s,CP(u),!1),this.inputDevices.splice(a,1),this.latestUpdate.splice(a,1),this.input.gamepad.devices.remove(u),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(this._forEachGamepad(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const i=new C3(t);i.deviceType!=="unknown"&&(this.inputDevices[t.index]=i,this.input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=ip({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this.element.contains(document.activeElement),r=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(n=>{const o=this.inputDevices[n.index];if(!o)return;const s=this.latestUpdate[n.index],a=CP(o),u=r||Zhe(a);s&&(s.timestamp===n.timestamp||!s.active&&u||Khe(s.state,a))||this._emitGamepadEvent(n,a,!u)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const n=i[r];this._validate(n)&&t(n)}}_emitGamepadEvent(t,i,r){const n=this.latestUpdate[t.index],o=n&&n.active;if(!o&&!r)return;const s=!o&&r?"start":o&&r?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this.callback&&this.callback({device:this.inputDevices[t.index],state:i,action:s})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const IP=k("trident"),MP=k("edge"),Qhe=k("chrome"),efe=k("ff"),tfe=k("safari"),Uc={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class Aw{constructor(t,i){this.input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Xhe(t,this.input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(s_[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&s_[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(s_[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Uc.touchNone:Uc.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Uc.touchPan:Uc.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Uc.touchNone),this._element.classList.remove(Uc.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=wF(this._element,t);return Aw.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=Oce(i);r&&t==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:(IP||MP)&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}IP||MP?r*=.7:Qhe||tfe?r*=.6:efe&&(r*=1.375);const n=100,o=Math.abs(r);o>n&&(r=r/o*200/(1+Math.exp(-.02*(o-n))));const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,s)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}Aw.test={disableSubpixelCoordinates:!1};const s_={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class ife extends ri{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function k3(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function rfe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function nfe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:ur()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[M,$]=e,[N,D]=[$.x-M.x,$.y-M.y];return t.radius=Math.sqrt(N*N+D*D)/2,t.center.x=(M.x+$.x)/2,t.center.y=(M.y+$.y)/2,t}let i=0,r=0;for(let M=0;M<e.length;M++)i+=e[M].x,r+=e[M].y;i/=e.length,r/=e.length;const n=e.map(M=>M.x-i),o=e.map(M=>M.y-r);let s=0,a=0,u=0,d=0,h=0,f=0,y=0;for(let M=0;M<n.length;M++){const $=n[M],N=o[M],D=$*$,V=N*N;s+=D,a+=V,u+=$*N,d+=D*$,h+=V*N,f+=$*V,y+=N*D}const m=.5*(d+f),g=.5*(h+y),v=s*a-u*u,w=(m*a-g*u)/v,_=(s*g-u*m)/v,A=ur(w+i,_+r);return{radius:Math.sqrt(w*w+_*_+(s+a)/e.length),center:A}}const ln={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class ofe extends ri{constructor(t=ln.maximumDoubleClickDelay,i=ln.maximumDoubleClickDistance,r=ln.maximumDoubleTouchDelay,n=ln.maximumDoubleTouchDistance,o=ky){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=$r(t.doubleClickTimeout))}get hasPendingInputs(){return Ev(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_handleImmediateClick(t){const i=t.data,r=this._pointerId(i),n=this._pointerState.get(r);if(n){const o=i.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;k3(n.event.data,i)>o?(this._clearDoubleClickTimeout(r,!0),this._startClick(t)):(this._clearDoubleClickTimeout(r,!1),this._doubleClick.emit(n.event.data,void 0,n.event.modifiers))}else this._startClick(t)}_startClick(t){const i=this._pointerId(t.data),r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(i,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),r)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const i=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(i,!0)}_handleDrag(t){const i=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(i,!0)}_clearDoubleClickTimeout(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimeout.remove(),r.doubleClickTimeout=null,i&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class sfe extends ri{constructor(t=ln.maximumDoubleClickDelay,i=ln.maximumDoubleClickDistance,r=ln.maximumDoubleTouchDelay,n=ln.maximumDoubleTouchDistance,o=ky){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=n,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=ur(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Ew({start:(s,a)=>this._dragStart(s,a),update:(s,a)=>this._dragUpdate(a),end:(s,a)=>this._dragEnd(a)}),this.registerIncoming("drag",s=>this._dragEventSeparator.handle(s)),this.registerIncoming("pointer-down",s=>this._handlePointerDown(s)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return Ev(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout.remove(),i.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:n,buttons:o,pointer:s,pointers:a,pointerType:u,timestamp:d}=r;return{action:t,delta:i,button:n,buttons:o,pointer:s,pointers:a,pointerType:u,timestamp:d}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:o}=r;this._dragStartCenter=o;const s=this._createDoubleTapDragData("begin",ur(0,0),r);this._doubleTapDrag.emit(s,void 0,n),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,o=ur(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("update",o,i);this._doubleTapDrag.emit(s,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,o=ur(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("end",o,i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=this._pointerId(i),n=this._pointerState.get(r),{pointerType:o}=i.native;if(n){const s=o==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(r),k3(n.event.data,i)>s?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:i}=t,{pointerId:r,button:n,pointerType:o}=i;return o==="mouse"?`${r}:${n}`:`${o}`}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,n=this._pointerId(i),o=r==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._clearPointerDown(n),o);this._pointerState.set(n,{event:t,doubleTapTimeout:s}),this.refreshHasPendingInputs()}}class afe extends ri{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,n){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:i.buttons,timestamp:n,pointers:lfe(this.activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=y0(this.activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(i,n);const o=Dg(n,nB(this.activePointerMap));n.initialAngle=o,n.lastAngle=o,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this.activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=y0(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=y0(this.activePointerMap);this.activePointerMap.forEach(r=>{r.initialAngle=Dg(r,i)-t,r.lastAngle=Dg(r,i)-t})}_emitEvent(t,i,r){const n=y0(this.activePointerMap);this.drag.emit(this._createPayload(t,i,n,r),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this.activePointerMap.get(i)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,n=t.timestamp;switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this.isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(r),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function nB(e){const t=[];return e.forEach(i=>{t.push(ur(i.event.x,i.event.y))}),nfe(t)}function y0(e){const t=nB(e);let i=0;return e.forEach(r=>{let n=Dg(r,t),o=n-r.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;n=r.lastAngle+o,r.lastAngle=n,i+=n-r.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function lfe(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function Dg(e,t){const i=e.event,r=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,r)}var NP;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(NP||(NP={}));class ufe extends ri{constructor(t=ln.maximumDoubleClickDelay,i=ln.maximumDoubleClickDistance,r=ln.maximumDoubleTouchDelay,n=ln.maximumDoubleTouchDistance,o=ky){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",s=>{this._handlePointerLoss(s,"pointer-up")}),this.registerIncoming("pointer-capture-lost",s=>{this._handlePointerLoss(s,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",s=>{this._handlePointerLoss(s,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=this._pointerId(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerLoss(t,i){const r=t.data,n=this._pointerId(r),o=this._pointerState.get(n);if(o&&i==="pointer-up"&&o.downButton===r.native.button){const s=o.immediateDoubleClick;if(s){s.timeoutHandle.remove();const a=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;k3(s,t.data)>a?this._startImmediateDoubleClick(t,o):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(r))}else this._startImmediateDoubleClick(t,o)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_removeState(t){const i=this._pointerId(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const wh={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class cfe extends ri{constructor(t=wh.maximumClickDelay,i=wh.movementUntilMouseDrag,r=wh.movementUntilPenDrag,n=wh.movementUntilTouchDrag,o=wh.holdDelay,s=ky){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=r,this.movementUntilTouchDrag=n,this.holdDelay=o,this._clock=s,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const s=this._pointerState.get(r);if(s){if(!s.isDragging){const a=s.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),s.holdEmitted=!0}s.holdTimeout=null}},this.holdDelay));const o={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,o),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,i),void 0,n.modifiers):rfe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),n.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,i)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,n=r.native.pointerId,o=this._pointerState.get(n);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",o,i==="pointer-up"?r:o.previousEvent),void 0,o.modifiers):i==="pointer-up"&&o.downButton===r.native.button&&t.timestamp-o.startTimestamp<=this.maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}}const m0={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let wd=class extends se{constructor(){super(...arguments),this._handles=new mi}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([yn(()=>!e(),()=>this._disconnect()),yn(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new Aw(e,this.view.input),i=[new ufe,new cfe,new ofe,new afe(this.view.navigation),new sfe],r=new Fa({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new ife],wl.INTERNAL),r.installHandlers("navigation",[new Yhe(this.view),new Bhe(this.view),new qhe(this.view),new xP(this.view),new xP(this.view,[m0.counter]),new Dhe(this.view,"primary"),new zhe(this.view,m0.pan),new Ghe(this.view,m0.zoom),new Hhe(this.view,m0.rotate),new Lhe(this.view,"secondary"),new $he(this.view,"touch")],wl.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,q(()=>{var n,o;return(o=(n=this.view)==null?void 0:n.navigation)==null?void 0:o.browserTouchPanEnabled},n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},ze)}get test(){return{inputManager:this._inputManager}}};l([c()],wd.prototype,"view",void 0),l([c()],wd.prototype,"latestPointerType",null),l([c()],wd.prototype,"latestPointerLocation",null),wd=l([S("esri.views.2d.input.MapViewInputManager")],wd);const dfe=wd;var RP,PP,$P,oB={exports:{}};RP=oB,PP=function(){function e(n,o,s,a,u){t(n,o,s||0,a||n.length-1,u||r)}function t(n,o,s,a,u){for(;a>s;){if(a-s>600){var d=a-s+1,h=o-s+1,f=Math.log(d),y=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*y*(d-y)/d)*(h-d/2<0?-1:1);t(n,o,Math.max(s,Math.floor(o-h*y/d+m)),Math.min(a,Math.floor(o+(d-h)*y/d+m)),u)}var g=n[o],v=s,w=a;for(i(n,s,o),u(n[a],g)>0&&i(n,s,a);v<w;){for(i(n,v,w),v++,w--;u(n[v],g)<0;)v++;for(;u(n[w],g)>0;)w--}u(n[s],g)===0?i(n,s,w):i(n,++w,a),w<=o&&(s=w+1),o<=w&&(a=w-1)}}function i(n,o,s){var a=n[o];n[o]=n[s],n[s]=a}function r(n,o){return n<o?-1:n>o?1:0}return e},($P=PP())!==void 0&&(RP.exports=$P);const pfe=oB.exports;function tv(e,t){if(!(this instanceof tv))return new tv(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function hfe(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function Vc(e,t){_f(e,0,e.children.length,t,e)}function _f(e,t,i,r,n){n||(n=bd(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,s=t;s<i;s++)o=e.children[s],Sf(n,e.leaf?r(o):o);return n}function Sf(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function DP(e,t){return e.minX-t.minX}function LP(e,t){return e.minY-t.minY}function a_(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function g0(e){return e.maxX-e.minX+(e.maxY-e.minY)}function ffe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function yfe(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function l_(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function v0(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function bd(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function OP(e,t,i,r,n){for(var o,s=[t,i];s.length;)(i=s.pop())-(t=s.pop())<=r||(o=t+Math.ceil((i-t)/r/2)*r,pfe(e,o,t,i,n),s.push(t,o,o,i))}tv.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!v0(e,t))return i;for(var n,o,s,a,u=[];t;){for(n=0,o=t.children.length;n<o;n++)s=t.children[n],v0(e,a=t.leaf?r(s):s)&&(t.leaf?i.push(s):l_(e,a)?this._all(s,i):u.push(s));t=u.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!v0(e,t))return!1;for(var r,n,o,s,a=[];t;){for(r=0,n=t.children.length;r<n;r++)if(o=t.children[r],v0(e,s=t.leaf?i(o):o)){if(t.leaf||l_(e,s))return!0;a.push(o)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=bd([]),this},remove:function(e,t){if(!e)return this;for(var i,r,n,o,s=this.data,a=this.toBBox(e),u=[],d=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],i=d.pop(),o=!0),s.leaf&&(n=hfe(e,s.children,t))!==-1)return s.children.splice(n,1),u.push(s),this._condense(u),this;o||s.leaf||!l_(s,a)?r?(i++,s=r.children[i],o=!1):s=null:(u.push(s),d.push(i),i=0,r=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:DP,compareMinY:LP,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var n,o=i-t+1,s=this._maxEntries;if(o<=s)return Vc(n=bd(e.slice(t,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(n=bd([])).leaf=!1,n.height=r;var a,u,d,h,f=Math.ceil(o/s),y=f*Math.ceil(Math.sqrt(s));for(OP(e,t,i,y,this.compareMinX),a=t;a<=i;a+=y)for(OP(e,a,d=Math.min(a+y-1,i),f,this.compareMinY),u=a;u<=d;u+=f)h=Math.min(u+f-1,d),n.children.push(this._build(e,u,h,r-1));return Vc(n,this.toBBox),n},_chooseSubtree:function(e,t,i,r){for(var n,o,s,a,u,d,h,f;r.push(t),!t.leaf&&r.length-1!==i;){for(h=f=1/0,n=0,o=t.children.length;n<o;n++)u=a_(s=t.children[n]),(d=ffe(e,s)-u)<f?(f=d,h=u<h?u:h,a=s):d===f&&u<h&&(h=u,a=s);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),o=[],s=this._chooseSubtree(n,this.data,t,o);for(s.children.push(e),Sf(s,n);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(n,o,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),s=bd(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,Vc(i,this.toBBox),Vc(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(e,t){this.data=bd([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Vc(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,o,s,a,u,d,h;for(u=d=1/0,r=t;r<=i-t;r++)s=yfe(n=_f(e,0,r,this.toBBox),o=_f(e,r,i,this.toBBox)),a=a_(n)+a_(o),s<u?(u=s,h=r,d=a<d?a:d):s===u&&a<d&&(d=a,h=r);return h},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:DP,n=e.leaf?this.compareMinY:LP;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n,o,s=this.toBBox,a=_f(e,0,t,s),u=_f(e,i-t,i,s),d=g0(a)+g0(u);for(n=t;n<i-t;n++)o=e.children[n],Sf(a,e.leaf?s(o):o),d+=g0(a);for(n=i-t-1;n>=t;n--)o=e.children[n],Sf(u,e.leaf?s(o):o),d+=g0(u);return d},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Sf(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():Vc(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class iv{constructor(t,i){this.key=new Ai(0,0,0,0),this.bounds=xl(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return Oe.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=Ui.acquire();for(let r=0;r<t.length;r++)i[r]=new iv(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return Y6.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const jl={added:[],removed:[]},u_=new Set,mfe=new Ai(0,0,0,0);class gfe extends Js{constructor(t){super(),this._tiles=new Map,this._index=tv(9,k("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const n=new iv(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of t.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:o}=n;if(r.length>0)for(const{row:s,colFrom:a,colTo:u}of r)for(let d=a;d<=u;d++){const h=mfe.set(o,s,n.normalizeCol(d),n.getWorldForColumn(d)).id;if(u_.add(h),!this.has(h)){const f=new iv(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),jl.added.push(f)}}for(let s=this.tiles.length-1;s>=0;s--){const a=this.tiles[s];u_.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(s,1),this._index.remove(a),jl.removed.push(a))}(jl.added.length||jl.removed.length)&&this.emit("update",jl),_p.pool.release(i),u_.clear(),jl.added.length=0,jl.removed.length=0}}let vfe=0,za=class extends se{constructor(){super(...arguments),this.color=new ie([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return vfe++}};l([c({readOnly:!0})],za.prototype,"version",null),l([c({type:ie})],za.prototype,"color",void 0),l([c({type:ie})],za.prototype,"haloColor",void 0),l([c()],za.prototype,"haloOpacity",void 0),l([c()],za.prototype,"fillOpacity",void 0),za=l([S("esri.views.2d.support.HighlightOptions")],za);const sB=za,wfe=e=>e.includes("Brush");class aB{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),wfe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function bfe(e,t,i,r,n,o,s,a){let u;e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?u=[e.width,e.height]:e.width==null&&e.height!=null?u=[e.height,e.height]:e.width!=null&&e.height==null?u=[e.width,e.width]:e.width==null&&e.height==null&&(u=null);const d=i[0]-(r.left+r.right),h=i[1]-(r.top+r.bottom);let f,y,m=e.area||{x:0,y:0,width:d,height:h};if(u){const g=d/h,v=u[0]/u[1];if(v>g){const w=m.width/v;m={x:m.x,y:Math.round(m.y+(m.height-w)/2),width:m.width,height:Math.round(w)}}else{const w=m.height*v;m={x:Math.round(m.x+(m.width-w)/2),y:m.y,width:Math.round(w),height:m.height}}}else u=[m.width,m.height];return u[0]>m.width?(f=Math.min(u[0]/m.width,t),y=u[0]/m.width/f):(f=1,y=u[0]/m.width),{resolutionScale:f,cropArea:{x:Math.round((m.x+r.left)*f),y:Math.round((m.y+r.top)*f),width:Math.round(m.width*f),height:Math.round(m.height*f)},outputScale:y,format:n,quality:o,children:s,rotation:a}}function _fe(e,t,i){const{ctx:r,canvas:n}=lB(e,i),o=r.getImageData(0,0,e.width,e.height),s=Efe(n,t);return uB(n),{dataUrl:s,data:o}}function Sfe(e,t){const{ctx:i,canvas:r}=lB(e,t),n=i.getImageData(0,0,e.width,e.height);return uB(r),n}function lB(e,t){const i=Tfe();t.premultipliedAlpha&&Nfe(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d");return r.putImageData(e,0,0),t.flipY&&Mfe(r),{ctx:r,canvas:i}}function uB(e){e.width=0,e.height=0}function Tfe(){return O(c_)&&(c_=document.createElement("canvas")),c_}let c_=null;function Efe(e,t){const i=Rfe[t.format],r=t.quality/100;return e.toDataURL(i,r)}function Afe(e,t){const i=Ife(e),r=$fe[i];return{format:i,quality:hr(t!=null?t:r,0,100)}}function xfe(e,t){return t/Math.max(e[0],e[1])}function Fve(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(rv)try{return new ImageData(e,t)}catch{rv=!1}return cB(e,t,i)}function Bve(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(rv)try{return new ImageData(e,t,i)}catch{rv=!1}const n=cB(t,i,r);return n.data.set(e,0),n}function Uve(e,t,i,r=0,n=0,o=e.width-r,s=e.height-n,a=!1){const{data:u}=e,{width:d,height:h,data:f}=t,y=o/d,m=s/h,g=Math.ceil(y/2),v=Math.ceil(m/2),w=e.width;for(let _=0;_<h;_++)for(let A=0;A<d;A++){const M=4*(A+(a?h-_-1:_)*d);let $=0,N=0,D=0,V=0,G=0,Z=0;const ee=(_+.5)*m;for(let re=Math.floor(_*m);re<(_+1)*m;re++){const ue=Math.abs(ee-(re+.5))/v,ge=(A+.5)*y,ne=ue*ue;for(let St=Math.floor(A*y);St<(A+1)*y;St++){const vr=Math.abs(ge-(St+.5))/g,lt=Math.sqrt(ne+vr*vr);if(lt>=1)continue;let wr=2*lt*lt*lt-3*lt*lt+1;const wn=4*(r+St+(n+re)*w);Z+=wr*u[wn+3],N+=wr,!i&&u[wn+3]<255&&(wr=wr*u[wn+3]/255),D+=wr*u[wn],V+=wr*u[wn+1],G+=wr*u[wn+2],$+=wr}}f[M]=D/$,f[M+1]=V/$,f[M+2]=G/$,f[M+3]=Z/N}return t}function cB(e,t,i){return i||(i=Cfe()),i.getContext("2d").createImageData(e,t)}let bh=null,rv=!0;function Cfe(){return bh||(bh=document.createElement("canvas"),bh.width=1,bh.height=1),bh}function Ife(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return Pfe}}function Mfe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function Nfe(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const n=t[r+3];if(n!==255&&n>0){const o=255/n;t[r+0]=t[r+0]*o,t[r+1]=t[r+1]*o,t[r+2]=t[r+2]*o}}}const Rfe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},kP=98,Pfe="png",$fe={png:100,jpg:kP,jpeg:kP};var Pt;function Vve(e,t,i={}){const r=dB(e);for(;r.length>1;){const n=nv(t,r.shift(),i);if(T(n))return n}return Dfe(t,r.shift(),i)}function dB(e){const t=k("esri-force-webgl");if(t===Pt.WEBGL1||t===Pt.WEBGL2)return[t];switch(e){case"2d":return k("mac")&&k("chrome")?[Pt.WEBGL1,Pt.WEBGL2]:[Pt.WEBGL2,Pt.WEBGL1];case"3d":return[Pt.WEBGL2,Pt.WEBGL1]}}function Dfe(e,t,i={}){if(!window.WebGLRenderingContext)return FP(e,Lfe),null;const r=nv(e,t,i);return O(r)&&FP(e,Ofe),r}function nv(e,t,i={}){const r=t===Pt.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const o of r){try{n=e.getContext(o,i)}catch{}if(n)break}return n}function FP(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(Pt||(Pt={}));const Lfe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',Ofe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let d_,p_;function kE(e){const t=dB(e);for(;t.length>1;){const i=BP(t.shift());if(i.available)return i}return BP(t.shift())}function BP(e){switch(e){case Pt.WEBGL1:return kfe();case Pt.WEBGL2:return Ffe()}}function kfe(){return d_||(d_=Vfe()),d_}function Ffe(){return p_||(p_=jfe()),p_}class pB{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class Bfe extends pB{constructor(){super(...arguments),this.type=Pt.WEBGL1}}class Ufe extends pB{constructor(){super(...arguments),this.type=Pt.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function hB(e,t){var o;if(e===Pt.WEBGL1&&typeof WebGLRenderingContext===void 0||e===Pt.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const i=document.createElement("canvas");if(!i)return null;let r=nv(i,e,{failIfMajorPerformanceCaveat:!0});if(O(r)&&(r=nv(i,e),T(r)&&(t.majorPerformanceCaveat=!0)),O(r))return r;if(e===Pt.WEBGL1){const s=(o=r.getParameter(r.VERSION))==null?void 0:o.match(/^WebGL\s+([\d.]*)/);if(s){const a=parseFloat(s[1]);t.available=a>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),r}function Vfe(){const e=new Bfe,t=hB(Pt.WEBGL1,e);return O(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function jfe(){const e=new Ufe,t=hB(Pt.WEBGL2,e);return O(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function zfe(e){const t=kE(e);if(!t.available)return new I("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new I("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new I("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new I("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Pt.WEBGL1){if(!t.supportsElementIndexUint)return new I("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new I("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new I("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Hfe(e){return e&&"nodeType"in e}function Gfe(e){return e&&typeof e.render=="function"}const UP={component:"esri-component"};let bu=class extends se{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(UP.component),t&&t.classList.remove(UP.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||Hfe(e)?(this._set("widget",null),yx(e)):(Gfe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};l([c({dependsOn:[]})],bu.prototype,"id",null),l([c()],bu.prototype,"node",null),l([Fe("node")],bu.prototype,"castNode",null),l([c({readOnly:!0})],bu.prototype,"widget",void 0),bu=l([S("esri.views.ui.Component")],bu);const Lg=bu,Wfe={left:0,top:0,bottom:0,right:0},fB={bottom:30,top:15,right:15,left:15},h_="manual",Ri={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function qfe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function f_(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function y_(e,{top:t,bottom:i,left:r,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=n}let Cs=class extends Js.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new mi,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&y_(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&y_(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([q(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,ze),q(()=>this.padding,this._applyUIPadding,ze)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Ri.ui),dte(e),this._attachContainers(e)),t&&(t.classList.remove(Ri.ui),y_(t,{top:"",bottom:"",left:"",right:""}),yO(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...fB,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const n=f_(e);n&&({index:i,position:t,component:e,key:r}=n),t&&typeof t=="object"&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const n=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||h_)===h_?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(Ri.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(o=>this.move(o,t)),!e)return;let i;const r=f_(e)||f_(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof Lg||(e=new Lg({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof Lg?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||Wfe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Ri.innerContainer),e.classList.add(Ri.cornerContainer);const t=document.createElement("div");t.classList.add(Ri.innerContainer),t.classList.add(Ri.manualContainer);const i=document.createElement("div");i.classList.add(Ri.topLeft),i.classList.add(Ri.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(Ri.topRight),r.classList.add(Ri.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(Ri.bottomLeft),n.classList.add(Ri.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add(Ri.bottomRight),o.classList.add(Ri.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;const s=dl();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":n,"bottom-right":o,"top-leading":s?r:i,"top-trailing":s?i:r,"bottom-leading":s?o:n,"bottom-trailing":s?n:o},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||h_,r=e.index,n=this._positionNameToContainerLookup[i],o=r>-1;if(qfe(t.widget)&&t.widget.startup(),!o)return void n.appendChild(t.node);const s=Array.prototype.slice.call(n.children);if(r===0)return void(n.firstChild?iM(t.node,n.firstChild):n.appendChild(t.node));r>=s.length?n.appendChild(t.node):iM(t.node,s[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(r=>(t=r===e,t&&(i=r),t)),i}_findById(e){let t,i=null;return this._components.some(r=>(t=r.id===e,t&&(i=r),t)),i}_findByNode(e){let t,i=null;return this._components.some(r=>(t=r.node===e,t&&(i=r),t)),i}};l([c()],Cs.prototype,"container",null),l([c()],Cs.prototype,"height",null),l([c({value:fB})],Cs.prototype,"padding",null),l([Fe("padding")],Cs.prototype,"castPadding",null),l([c()],Cs.prototype,"view",void 0),l([c()],Cs.prototype,"width",null),Cs=l([S("esri.views.ui.UI")],Cs);const Yfe=Cs;function VP(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function Kfe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function w0(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function Zfe(e){return e.type==="bing-maps"}const fa=[];let _d=class extends oy{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new he,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>q(()=>{var n;return[r.suspended,(n=r.layer)==null?void 0:n.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([El(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),yn(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");fa.length=0,e?(e.forEach(t=>{var n;if(t.suspended||!((n=t.layer)!=null&&n.attributionVisible))return;const i=t.layer;if(VP(i,"user"))return void w0(fa,t,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(t)){const o=this._fetchedAttributionData.get(t);return void(o?w0(fa,t,this._getDynamicAttribution(o,this.view,i)):VP(i)&&w0(fa,t,i.copyright))}return void this._fetchAttributionData(t)}const r=i.get("portalItem.accessInformation");w0(fa,t,r||i.copyright)}),Kfe(this.items,fa)&&(this.items.removeAll(),this.items.addMany(fa)),fa.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await Cv(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,Zfe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let n=0;n<i.length;n++){const o=i[n],s=o.coverageAreas;if(!s)return;for(const a of s){const u=a.bbox,d=a.zoomMin-(t&&a.zoomMin?1:0),h=a.zoomMax-(t&&a.zoomMax?1:0),f={xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:me.WGS84},y={extent:js(f),attribution:o.attribution||"",score:a.score!=null?a.score:100,id:n};for(let m=d;m<=h;m++)r[m]=r[m]||[],r[m].push(y)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:n}=t;let o=i.tileInfo.scaleToZoom(n);if(o=Math.min(e.maxKey,Math.round(o)),!r||o==null||o<=-1)return"";const s=e[o],a=$v(r.center.clone().normalize(),t.spatialReference),u={};return s?s.filter(d=>{const h=!u[d.id]&&a&&Dv(d.extent,a);return h&&(u[d.id]=!0),h}).sort((d,h)=>h.score-d.score||d.objectId-h.objectId).map(d=>d.attribution).join(", "):""}};l([c({readOnly:!0,type:he})],_d.prototype,"items",void 0),l([c({readOnly:!0})],_d.prototype,"state",null),l([c()],_d.prototype,"view",void 0),_d=l([S("esri.widgets.Attribution.AttributionViewModel")],_d);const yB=_d,ya={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Li=class extends gi{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=ya.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new yB}initialize(){this.own(El(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[ya.open]:this._isOpen};return C("div",{bind:this,class:this.classes(ya.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return C("div",{class:ya.poweredBy},"Powered by"," ",C("a",{class:ya.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:r}=this,n={[ya.sourcesOpen]:e,[ya.interactive]:t};return C("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(ya.sources,n),innerHTML:r,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:n}=e,o=n>r,s=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,s&&(t=!0),this._isOpen){const a=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([c()],Li.prototype,"_isOpen",void 0),l([c()],Li.prototype,"_isInteractive",null),l([c()],Li.prototype,"_attributionTextOverflowed",void 0),l([c()],Li.prototype,"_prevSourceNodeHeight",void 0),l([c({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Li.prototype,"attributionText",null),l([c()],Li.prototype,"iconClass",void 0),l([c()],Li.prototype,"itemDelimiter",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Li.prototype,"label",void 0),l([c(),di("esri/widgets/Attribution/t9n/Attribution")],Li.prototype,"messages",void 0),l([J("viewModel.view")],Li.prototype,"view",void 0),l([c({type:yB})],Li.prototype,"viewModel",void 0),l([sr()],Li.prototype,"_toggleState",null),Li=l([S("esri.widgets.Attribution")],Li);const Jfe=Li,Xfe="esri.widgets.CompassViewModel";let _u=class extends x3(se){constructor(e){super(e),this._handles=new mi,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(q(()=>this.view,this._updateRotationWatcher,ze))}destroy(){this._handles=$r(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?q(()=>e==null?void 0:e.rotation,this._updateForRotation,ze):q(()=>e==null?void 0:e.camera,this._updateForCamera,ze))}};l([c({readOnly:!0})],_u.prototype,"canShowNorth",null),l([c()],_u.prototype,"orientation",void 0),l([c({readOnly:!0})],_u.prototype,"state",null),l([c()],_u.prototype,"view",void 0),_u=l([S(Xfe)],_u);const mB=_u,ma={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let xo=class extends gi{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=ma.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new mB}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",r=(t==="rotation"?"rotation":"compass")=="compass",n=i?-1:0,o={[ma.disabled]:i,[ma.interactive]:!i},s={[ma.northIcon]:r,[ma.rotationIcon]:!r},{messages:a}=this;return C("div",{bind:this,class:this.classes(ma.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":a.reset,title:a.reset},C("span",{"aria-hidden":"true",class:this.classes(ma.icon,s),styles:this._toRotationTransform(e)}),C("span",{class:ma.text},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};l([J("viewModel.goToOverride")],xo.prototype,"goToOverride",void 0),l([c()],xo.prototype,"iconClass",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],xo.prototype,"label",void 0),l([c(),di("esri/widgets/Compass/t9n/Compass")],xo.prototype,"messages",void 0),l([J("viewModel.view")],xo.prototype,"view",void 0),l([c({type:mB})],xo.prototype,"viewModel",void 0),l([sr()],xo.prototype,"_reset",null),xo=l([S("esri.widgets.Compass")],xo);const Qfe=xo;let Sd=class extends se{constructor(e){super(e),this._handles=new mi,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(yn(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};l([c({readOnly:!0})],Sd.prototype,"state",null),l([c()],Sd.prototype,"navigationMode",void 0),l([c()],Sd.prototype,"view",void 0),Sd=l([S("esri.widgets.NavigationToggleViewModel")],Sd);const gB=Sd,Gr={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Co=class extends gi{constructor(e,t){super(e,t),this.iconClass=Gr.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new gB}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[Gr.disabled]:e,[Gr.isLayoutHorizontal]:this.layout==="horizontal"},r={[Gr.activeButton]:t},n={[Gr.activeButton]:!t},o=e?-1:0,s=this.messages.toggle;return C("div",{bind:this,class:this.classes(Gr.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":s,title:s},C("div",{class:this.classes(Gr.button,Gr.panButton,r)},C("span",{class:Gr.panIcon})),C("div",{class:this.classes(Gr.button,Gr.rotateButton,n)},C("span",{class:Gr.rotationIcon})))}_toggle(){this.toggle()}};l([c()],Co.prototype,"iconClass",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Co.prototype,"label",void 0),l([c({value:"vertical"})],Co.prototype,"layout",null),l([c(),di("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Co.prototype,"messages",void 0),l([J("viewModel.view")],Co.prototype,"view",void 0),l([c({type:gB})],Co.prototype,"viewModel",void 0),l([sr()],Co.prototype,"_toggle",null),Co=l([S("esri.widgets.NavigationToggle")],Co);const eye=Co,_h={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Ha=class extends gi{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[_h.disabled]:!this.enabled,[_h.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return C("div",{bind:this,class:this.classes(_h.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},C("span",{"aria-hidden":"true",role:"presentation",class:this.classes(_h.icon,i)}),C("span",{class:_h.iconText},this.title))}_triggerAction(){this.action.call(this)}};l([c()],Ha.prototype,"action",void 0),l([c()],Ha.prototype,"enabled",void 0),l([c()],Ha.prototype,"iconClass",void 0),l([c()],Ha.prototype,"title",void 0),l([sr()],Ha.prototype,"_triggerAction",null),Ha=l([S("esri.widgets.IconButton")],Ha);const jP=Ha;let Td=class extends se{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};l([c({readOnly:!0})],Td.prototype,"canZoomIn",null),l([c({readOnly:!0})],Td.prototype,"canZoomOut",null),l([c()],Td.prototype,"view",void 0),Td=l([S("esri.widgets.Zoom.ZoomConditions2D")],Td);const tye=Td;let Ed=class extends se{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};l([c({readOnly:!0})],Ed.prototype,"canZoomIn",null),l([c({readOnly:!0})],Ed.prototype,"canZoomOut",null),l([c()],Ed.prototype,"view",void 0),Ed=l([S("esri.widgets.Zoom.ZoomConditions3D")],Ed);const iye=Ed;let Ga=class extends se{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new tye({view:e}):e.type==="3d"&&(this._zoomConditions=new iye({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():C_(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():C_(e.goTo({zoomFactor:.5}))}};l([c()],Ga.prototype,"_zoomConditions",void 0),l([c({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Ga.prototype,"canZoomIn",void 0),l([c({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Ga.prototype,"canZoomOut",void 0),l([c({readOnly:!0})],Ga.prototype,"state",null),l([c()],Ga.prototype,"view",null),Ga=l([S("esri.widgets.Zoom.ZoomViewModel")],Ga);const vB=Ga,Sh={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Is=class extends gi{constructor(e,t){super(e,t),this.iconClass=Sh.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new vB}initialize(){this._zoomInButton=new jP({action:this.zoomIn.bind(this),iconClass:Sh.zoomInIcon}),this._zoomOutButton=new jP({action:this.zoomOut.bind(this),iconClass:Sh.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[Sh.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,C("div",{class:this.classes(Sh.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};l([c()],Is.prototype,"iconClass",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Is.prototype,"label",void 0),l([c({value:"vertical"})],Is.prototype,"layout",null),l([c(),di("esri/widgets/Zoom/t9n/Zoom")],Is.prototype,"messages",void 0),l([J("viewModel.view")],Is.prototype,"view",void 0),l([c({type:vB})],Is.prototype,"viewModel",void 0),Is=l([S("esri.widgets.Zoom")],Is);const wB=Is,bB="esri.views.ui.DefaultUI";function rye(e){return e&&e.view!==void 0}W.getLogger(bB);let Og=class extends Yfe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([q(()=>this.components,this._componentsWatcher.bind(this),ze),q(()=>this.view,this._updateViewAwareWidgets.bind(this),ze)])}_add(e,t,i,r){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,r)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),r=i&&i.widget;rye(r)&&(r.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new Lg({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new Jfe({view:this.view})}_createCompass(){return new Qfe({view:this.view})}_createNavigationToggle(){return new eye({view:this.view})}_createZoom(){return new wB({view:this.view})}};l([c()],Og.prototype,"components",void 0),Og=l([S(bB)],Og);const nye=Og;let kg=class extends nye{constructor(e){super(e),this.components=["attribution","zoom"]}};l([c()],kg.prototype,"components",void 0),kg=l([S("esri.views.ui.2d.DefaultUI2D")],kg);const _B=kg;var FE;let Fg=FE=class extends U{constructor(e){super(e),this.color=new ie([0,0,0,1])}clone(){return new FE(R({color:this.color}))}};l([c({type:ie,json:{write:!0}})],Fg.prototype,"color",void 0),Fg=FE=l([S("esri.webmap.background.ColorBackground")],Fg);const oye=Fg,as=W.getLogger("esri.views.MapView");let SB,TB,EB,AB,xB,CB;async function sye(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,Stage:o}]=await Promise.all([B(()=>import("./webglDeps.26f60707.js"),["webglDeps.26f60707.js","VertexArrayObject.18206864.js","Texture.6046e9e1.js","ProgramTemplate.e5f95dcf.js","programUtils.59c311c9.js"],import.meta.url),B(()=>import("./mapViewDeps.62f8db36.js"),["mapViewDeps.62f8db36.js","CIMSymbolHelper.12e07dc8.js","BidiEngine.ec67919b.js","MaterialKey.533e6e48.js","Utils.adb0c2a0.js","Texture.6046e9e1.js","utils.29d76383.js","WGLContainer.ffb4824a.js","pixelUtils.af09ba54.js","VertexArrayObject.18206864.js","ProgramTemplate.e5f95dcf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","programUtils.59c311c9.js","ExpandedCIM.65c56140.js","quantizationUtils.504677c0.js","_commonjsHelpers.01f5fe30.js","imageutils.dfc9ea3f.js","Matcher.f2f572ed.js","visualVariablesUtils.0da211a7.js","visualVariablesUtils.e9b6c4c3.js","tileUtils.0aba5172.js","TileClipper.751deb6d.js","devEnvironmentUtils.8c6e6b72.js","CircularArray.0dc82e32.js","requestImageUtils.e1746186.js","ComputedAttributeStorage.faa7f073.js","centroid.7e9e1950.js","BaseGraphicContainer.456951b0.js","normalizeUtilsSync.869f136d.js","projectionSupport.179b2c07.js","json.d1a0fa35.js","FeatureContainer.4e54c97a.js","TileContainer.40873ca2.js","schemaUtils.f6ca3ef0.js","createSymbolSchema.9c329f9d.js","MD5.97b39efc.js","util.7630c51b.js","vec3f32.8d37ecf5.js","GraphicContainer.a3d8f493.js"],import.meta.url)]);TB=e,EB=t,AB=i,xB=r,CB=n,SB=o}const zP=160;function aye(e){return e&&e.declaredClass==="esri.Viewpoint"}let we=class extends kJ(ode(sde($de))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new op({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new kpe(this),this._pePromise=null,this.floors=new he,this.highlightOptions=new sB,this.inputManager=new dfe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new aB,this.type="2d",this.ui=new _B,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new qF,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([q(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(zP)},np),this.on("resize",t=>this._resizeHandler(t)),q(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),tZ()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new gfe(this.featuresTilingScheme)}get initialExtentRequired(){var s;const{scale:e,constraints:t,center:i,viewpoint:r,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((s=this.map.initialViewProperties)==null?void 0:s.viewpoint))&&!n&&(t!=null&&t.effectiveLODs||(o=-1),(!i||e===0&&o===-1)&&(!r||!T(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!gc()||(this._pePromise||(this._pePromise=vc().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!Cl(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new le({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void as.error(new I("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;ME(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(q(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},np),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void as.error(new I("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void as.error(new I("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;_pe(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;$pe(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;wP(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new I("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):O(e.targetGeometry)&&(i=new I("mapview:invalid-viewpoint","geometry not defined"))}catch(n){i=new I("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(i)return void as.error(i);this._scaleBeforeChangingSpatialReference=null;const r=new Oo({targetGeometry:new le,scale:0,rotation:0});ao(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;wP(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),ny(()=>this.ready,t).then(()=>{const i={animate:!0,...t},r=vpe(e,this);return this.animation.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});as.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=fP(e)?hP(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,n=!1,o=null,s=null;t!=null&&t.include?GP(t.include,HP(this,h=>r.add(h),h=>{o||(o=new Set),o.add(h)},h=>r.add(h),()=>n=!0)):(n=!0,r=new Set(this.allLayerViews)),t!=null&&t.exclude&&GP(t.exclude,HP(this,h=>r.delete(h),h=>{s||(s=new Set),s.add(h)}));const a=this.allLayerViews.filter(h=>!h.suspended&&r.has(h)).reverse(),u=this.toMap(i);let d=[...n?this.graphicsView.hitTest(u).map(h=>({type:"graphic",graphic:h,layer:null,mapPoint:u})):[],...await Promise.all(a.map(h=>h.hitTest(u,i)).toArray())].filter(T).flat().filter(T);return o&&(d=d.filter(h=>!("graphic"in h)||!h.graphic||o.has(BE(h.graphic)))),s&&(d=d.filter(h=>!("graphic"in h)||!h.graphic||s.has(BE(h.graphic)))),{screenPoint:i,results:d}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return _fe(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return Sfe(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,xfe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(o=>{const s=this.allLayerViews.find(a=>a.layer.id===o.id);s&&"container"in s&&s.container&&i.push(s.container)})):i=this._stage.children;const{format:r,quality:n}=Afe(e.format,e.quality);return bfe(e,t,this.size,this.padding,r,n,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=fP(e)?hP(this,e):e,i=[0,0],[r,n]=this.state.toMap(i,[t.x,t.y]),o=this.spatialReference;return new le({x:r,y:n,spatialReference:o})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),ur(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return _P.hasLayerViewModule(e)}importLayerView(e){return _P.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(as.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=zfe(this.type);return k("safari")&&k("safari")<9&&(e=new I("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:k("safari")})),T(e)?(as.warn("#validate()",e.message),Promise.reject(e)):sye()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new CE),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,n=i.then(()=>{r()&&(this.animation=null)}).catch(s=>{throw r()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),s}),o=new Promise(s=>s(n));return t.when().catch(()=>{r()&&o.cancel&&o.cancel()}),o}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,n=e.then(o=>{if(bt(t),i!==this._gotoTask)throw new I("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=o,r.finish()});return this._cancellableGoTo(i,r,n)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<zP&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var w,_,A,M;const{constraints:e,initialExtent:t,map:i,padding:r,size:n}=this;if(!e)return null;const o=i&&"initialViewProperties"in i&&i.initialViewProperties,s={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?s.zoom!==-1&&(s.scale=e.zoomToScale(s.zoom)):s.zoom=-1;let a=null,u=null,d=0;const h=s.viewpoint&&s.viewpoint.rotation,f=s.viewpoint&&s.viewpoint.targetGeometry;T(f)&&(f.type==="extent"?a=f:f.type==="point"&&(u=f,d=s.viewpoint.scale));const y=s.extent||a||((_=(w=o==null?void 0:o.viewpoint)==null?void 0:w.targetGeometry)==null?void 0:_.extent)||t,m=s.center||u||(y==null?void 0:y.center),g=s.scale||d||((A=o==null?void 0:o.viewpoint)==null?void 0:A.scale)||y&&Kf(y,[n[0]-r.left-r.right,n[1]-r.top-r.bottom]),v=s.rotation||h||((M=o==null?void 0:o.viewpoint)==null?void 0:M.rotation)||0;return m&&g?new Oo({targetGeometry:m,scale:g,rotation:v}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation,n=e.then(o=>{if(bt(t),i!==this._gotoTask)throw new I("view:goto-interrupted","Goto was interrupted");return r.update(o),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,n)}_project(e,t){var n;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||((n=i.spatialReference)==null?void 0:n.imageCoordinateSystem)||Ji(t,i.spatialReference))return e;const r=Op(i,t);if(!r)throw new I("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return aye(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Ppe(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var a,u;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(d){as.warn(new Yi("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:d})),e.targetGeometry=((a=this.defaultsFromMap.extent)==null?void 0:a.center)||new le({x:0,y:0,spatialReference:this.spatialReference})}(u=this.constraints)==null||u.fit(e),this._set("state",new Ahe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new SB(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new CB,this._magnifierView.magnifier=this.magnifier;const r=new AB({view:this});this._set("labelManager",r);const n=new Ope({view:this});this._set("animationManager",n);const o=new xB({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",d=>this.fatalError=d.error),q(()=>this.stationary,d=>i.stationary=d,Ka),q(()=>this.background,d=>{i.background=d,this._magnifierView.background=d},Ka),q(()=>this.magnifier,d=>this._magnifierView.magnifier=d,Ka),q(()=>this.renderingOptions,d=>i.renderingOptions=d,Ka),q(()=>this.highlightOptions,d=>i.highlightOptions=d,Ka),q(()=>this.state.id,()=>i.state=this.state,Ka)],"map-view"),this._updateStageChildren();const s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach(d=>d(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:n}=this.state.paddedViewState,o=new le({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",r),this._set("scale",n),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Nhe(Ls.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new TB({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new EB(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const a of this.allLayerViews)a.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(O(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}const i=t.clone(),[r,n]=t.center;let o=null;try{o=this._project(new le({x:r,y:n,spatialReference:t.spatialReference}),e)}catch(a){gc()||as.warn(new Yi("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o.toJSON(),spatialReference:e,error:a}))}o||(o=new le({x:0,y:0,spatialReference:e}));const s=ME(new Oo({targetGeometry:new le,scale:0,rotation:0}),t.viewpoint,o);i.viewpoint=s;try{const u=[t.size[0]/2,t.size[1]/2],d=[u[0]+20,u[1]],h=t.toMap([0,0],d),{x:f,y}=this._project(new le({x:h[0],y:h[1],spatialReference:t.spatialReference}),e);h[0]=f,h[1]=y,i.toScreen(h,h);const m=Npe(u,h,d),g=Math.hypot(h[0]-u[0],h[1]-u[1])/20;!Number.isFinite(g)||Math.abs(g)>4?(s.rotation=0,s.targetGeometry=new le({x:0,y:0,spatialReference:e})):(s.scale*=g,s.scale>k("mapview-srswitch-adjust-rotation-scale-threshold")?s.rotation=0:s.rotation+=Number.isFinite(m)?m:0)}catch{}this._get("constraints").constrain(s,null),this._get("state").viewpoint=s,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const a of this.allLayerViews)a.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};we.type="2d",l([c({readOnly:!0})],we.prototype,"animationManager",void 0),l([c({constructOnly:!0})],we.prototype,"deactivatedWebGLExtensions",void 0),l([c({constructOnly:!0})],we.prototype,"debugWebGLExtensions",void 0),l([c({readOnly:!0})],we.prototype,"featuresTilingScheme",void 0),l([c({readOnly:!0})],we.prototype,"fullOpacity",void 0),l([c({readOnly:!0})],we.prototype,"graphicsTileStore",null),l([c()],we.prototype,"graphicsView",void 0),l([c({readOnly:!0})],we.prototype,"state",void 0),l([c()],we.prototype,"initialExtentRequired",null),l([c()],we.prototype,"labelManager",void 0),l([c({readOnly:!0})],we.prototype,"resourceManager",null),l([c({readOnly:!0})],we.prototype,"textureManager",null),l([c({readOnly:!0})],we.prototype,"mapViewNavigation",void 0),l([c({constructOnly:!0})],we.prototype,"renderCanvas",void 0),l([c()],we.prototype,"renderingOptions",void 0),l([c({readOnly:!0})],we.prototype,"rendering",void 0),l([c({constructOnly:!0})],we.prototype,"supersampleScreenshotsEnabled",void 0),l([c({readOnly:!0})],we.prototype,"supportsGround",void 0),l([c()],we.prototype,"_stationaryTimer",void 0),l([c()],we.prototype,"_defaultsFromMapSettings",null),l([c()],we.prototype,"_pePromise",void 0),l([c({readOnly:!0})],we.prototype,"typeSpecificPreconditionsReady",null),l([c()],we.prototype,"animation",null),l([c({type:oye})],we.prototype,"background",null),l([c({value:null,type:le,dependsOn:["state.id","ready"]})],we.prototype,"center",null),l([c({type:qF})],we.prototype,"constraints",null),l([c({value:null,type:Oe,dependsOn:["state.id","ready"]})],we.prototype,"extent",null),l([c()],we.prototype,"floors",void 0),l([c({type:sB})],we.prototype,"highlightOptions",void 0),l([c({readOnly:!0})],we.prototype,"inputManager",void 0),l([c()],we.prototype,"map",void 0),l([c({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],we.prototype,"padding",null),l([c()],we.prototype,"resizeAlign",void 0),l([c({readOnly:!0,dependsOn:["state.id"]})],we.prototype,"resolution",null),l([c({value:0,type:Number,dependsOn:["state.id","ready"]})],we.prototype,"rotation",null),l([c({value:0,type:Number,dependsOn:["state.id","ready"]})],we.prototype,"scale",null),l([c({constructOnly:!0})],we.prototype,"spatialReferenceLocked",void 0),l([c()],we.prototype,"stationary",null),l([c({type:aB,readOnly:!0})],we.prototype,"timeline",void 0),l([c({readOnly:!0})],we.prototype,"type",void 0),l([c({readOnly:!0})],we.prototype,"updating",null),l([c({value:null,type:Oo,dependsOn:["state.id","ready"]})],we.prototype,"viewpoint",null),l([c({value:-1,dependsOn:["state.id","ready"]})],we.prototype,"zoom",null),l([c({type:Boolean})],we.prototype,"navigating",null),l([c({type:_B})],we.prototype,"ui",void 0),we=l([S("esri.views.MapView")],we);const lye=we;function BE(e){var i,r,n,o;const t=e.getObjectId();return t?`${(o=(n=(i=e.layer)==null?void 0:i.uid)!=null?n:(r=e.sourceLayer)==null?void 0:r.uid)!=null?o:"MapView"}/${t}`:`"MapView/${e.uid}`}function HP(e,t,i,r,n){return o=>{if(o instanceof Ni){if(o.layer===e)n==null||n();else{const s=e.allLayerViews.find(a=>a.layer===o.layer);s&&(r==null||r(s))}i(BE(o))}else{const s=e.allLayerViews.find(a=>a.layer===o);s&&t(s)}}}function GP(e,t){if(e)if(b_(e))for(const i of e)if(b_(i))for(const r of i)t(r);else t(i);else t(e)}let Mt=class extends Ov(U){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};l([c()],Mt.prototype,"autoNavigate",void 0),l([c()],Mt.prototype,"filter",void 0),l([c()],Mt.prototype,"getResults",void 0),l([c()],Mt.prototype,"getSuggestions",void 0),l([c()],Mt.prototype,"maxResults",void 0),l([c()],Mt.prototype,"maxSuggestions",void 0),l([c()],Mt.prototype,"minSuggestCharacters",void 0),l([c()],Mt.prototype,"outFields",void 0),l([c()],Mt.prototype,"placeholder",void 0),l([c()],Mt.prototype,"popupEnabled",void 0),l([c()],Mt.prototype,"popupTemplate",void 0),l([c()],Mt.prototype,"prefix",void 0),l([c()],Mt.prototype,"resultGraphicEnabled",void 0),l([c()],Mt.prototype,"resultSymbol",void 0),l([c()],Mt.prototype,"suggestionsEnabled",void 0),l([c()],Mt.prototype,"suffix",void 0),l([c()],Mt.prototype,"withinViewEnabled",void 0),l([c()],Mt.prototype,"zoomScale",void 0),Mt=l([S("esri.widgets.Search.SearchSource")],Mt);const F3=Mt,IB=96;function jve(e,t){const i=t||e.extent,r=e.width,n=$l(i&&i.spatialReference);return i&&r?i.width/r*n*G9*IB:0}function uye(e,t){return e/($l(t)*G9*IB)}function cye(e,t){const i=e.extent,r=e.width,n=uye(t,i.spatialReference);return i.clone().expand(n*r/i.width)}const WP=W.getLogger("esri.widgets.Search.support.geometryUtils");function dye(e,t){var r,n;if(!t)return WP.error("missing-parameter: view is missing."),Promise.reject(new I("searchgeometryutils:missing-parameter","view is missing."));if(!e)return WP.error("missing-parameter: point is missing."),Promise.reject(new I("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||t.type==="2d")return Promise.resolve(e);const i=(r=t==null?void 0:t.map)==null?void 0:r.ground;return i&&i.layers.length?i.queryElevation(e,{cache:(n=t.basemapTerrain)==null?void 0:n.elevationQueryCache}).then(o=>o.geometry):Promise.resolve(e)}function qP(e){if(O(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function B3(e,t,i){return O(e)?null:e.type==="extent"?e:e.type==="multipoint"||e.type==="polygon"||e.type==="polyline"?e.extent:e.type==="point"?MB(e,t,i):void 0}function UE(e,t,i){return O(e)||O(t)?null:MB(e.center,t,i)}function MB(e,t,i){const r=e.hasZ?e.z:void 0;return t&&t.map?(i?cye(t,i):t.extent).clone().centerAt(e).set({zmax:r,zmin:r}):new Oe({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:r,zmax:r})}const pye=/https?:\/\/services.*\.arcgis\.com/i,hye=/(?:\{([^}]+)\})/g,Qd=W.getLogger("esri.widgets.Search.support.layerSearchUtils");function fye(e,t){const{exactMatch:i=!1,location:r,maxResults:n,spatialReference:o,source:s,sourceIndex:a,suggestResult:u,view:d}=e,{layer:h,filter:f,zoomScale:y}=s,m=d&&d.scale,g=NB(s,d),v=t&&t.signal;return PB(h).then(()=>{const w=h.popupTemplate;return w?w.getRequiredFields(h.fieldsIndex):null}).then(w=>{var re,ue,ge;const{objectIdField:_,returnZ:A}=h,M=DB(s);if(!U3(h,M))throw Qd.error("invalid-field: displayField is invalid."),new I("getResults():invalid-field","displayField is invalid.");const $=w&&w.length?w:[M],N=s.outFields||$,D=RB(N);if(N.includes(_)||D||N.push(_),(re=h.floorInfo)!=null&&re.floorField&&N.push(h.floorInfo.floorField),!(D||ov(h,N)))throw Qd.error("invalid-field: outField is invalid."),new I("getResults():invalid-field","outField is invalid.");const V=h.createQuery(),{orderByFields:G}=s;if(G&&(V.orderByFields=G),o){V.outSpatialReference=o;const ne=1/$l(o);ne&&(V.maxAllowableOffset=ne)}const Z=h.geometryType==="mesh"||h.geometryType==="multipatch",ee=((ge=(ue=h.capabilities)==null?void 0:ue.data)==null?void 0:ge.supportsZ)&&!Z;if(V.returnZ=ee&&A!==!1,V.returnGeometry=!0,V.multipatchOption=Z?"xyFootprint":null,N&&(V.outFields=N),r)V.geometry=r;else if(u.key)V.objectIds=[u.key];else{const ne=s.searchFields||[M];if(!ov(h,ne))throw Qd.error("invalid-field: search field is invalid."),new I("getResults():invalid-field","search field is invalid.");if($B(h)&&(V.num=n),g&&(V.geometry=g),!u.text.trim())return[];const{prefix:St="",suffix:vr=""}=s,lt=OB({searchTerm:LB(`${St}${u.text}${vr}`),layer:h,searchFields:ne,filter:f,exactMatch:i,type:"search"});if(!lt)return[];V.where=lt}return h.queryFeatures(V,{signal:v}).then(ne=>xye(ne,d,s,a,M,m,y))})}function yye(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:o,maxSuggestions:s,sourceIndex:a,exactMatch:u}=e,{layer:d,filter:h}=i,f=t&&t.signal,y=NB(i,n);return PB(d).then(()=>{if(!$B(d))return[];const m=DB(i),g=i.searchFields||[m],v=[];i.suggestionTemplate?i.suggestionTemplate.replace(hye,(Z,ee)=>(v.push(ee),Z)):v.push(m);const w=RB(v);v.includes(d.objectIdField)||w||v.push(d.objectIdField);const _=U3(d,m),A=w||ov(d,v),M=ov(d,g);if(!_)throw Qd.error("invalid-field: displayField is invalid."),new I("getSuggestions():invalid-field","displayField is invalid.");if(!A)throw Qd.error("invalid-field: outField is invalid."),new I("getSuggestions():invalid-field","outField is invalid.");if(!M)throw Qd.error("invalid-field: search field is invalid."),new I("getSuggestions():invalid-field","search field is invalid.");const $=d.createQuery(),{orderByFields:N}=i;if(N&&($.orderByFields=N),$.outSpatialReference=r,$.returnGeometry=!1,$.num=s,$.outFields=v,y&&($.geometry=y),!o.trim())return[];const{prefix:D="",suffix:V=""}=i,G=OB({searchTerm:LB(`${D}${o}${V}`),layer:d,searchFields:g,filter:h,exactMatch:u,type:"suggest"});return G?($.where=G,d.queryFeatures($,{signal:f}).then(Z=>Eye(Z,i,a,m))):[]})}function NB(e,t){const{filter:i,withinViewEnabled:r}=e,n=t&&t.extent;return i&&i.geometry||(r&&n?n:void 0)}function RB(e){return e&&e.includes("*")}async function PB(e){e&&await e.load()}function $B(e){var t,i,r;return(r=(i=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:i.supportsPagination)!=null?r:!1}function mye(e){var t,i,r,n;return(n=(r=(i=(t=e==null?void 0:e.fieldsIndex)==null?void 0:t.fields)==null?void 0:i.find(o=>o.type==="string"))==null?void 0:r.name)!=null?n:""}function DB(e){return e.displayField||e.layer.displayField||mye(e.layer)}function ov(e,t){return!(!e||!t)&&t.every(i=>U3(e,i))}function U3(e,t){return!!e.getField(t)}function gye(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function vye(e,t,i){let r=null;const{codedValues:n}=e;return n&&n.some(o=>{const s=o.name,a=i?s:s.toLowerCase();return(i?t:t.toLowerCase())===a&&(r=o.code.toString(),!0)}),r}function LB(e){return e.replace(/\'/g,"''")}function b0(e,t){const i=t&&t.where;return i?`(${e}) AND (${i})`:e}function wye({currentTerm:e,field:t,filter:i,exactMatch:r,url:n,type:o}){const s=t.type,a=t.name;if(s==="string"||s==="date"||s==="global-id"){const u=pye.test(n),d=u&&gye(e)?"N":"";if(r&&o==="search")return b0(`${a} = ${d}'${e}'`,i);const h=u?a:`UPPER(${a})`,f=u?e:e.toUpperCase();return b0(`${h} LIKE ${d}${r?`'${f}%'`:`'%${f}%'`}`,i)}if(s==="oid"||s==="small-integer"||s==="integer"||s==="single"||s==="double"){const u=Number(e);return isNaN(u)?null:b0(`${a} = ${u}`,i)}return b0(`${a} = ${e}`,i)}function bye(e,t){return e?` OR (${t})`:`(${t})`}function OB({searchTerm:e,layer:t,searchFields:i,filter:r,exactMatch:n,type:o}){const{definitionExpression:s,url:a}=t;let u="";return e&&i&&i.forEach(d=>{const h=t.getField(d),f=typeof t.getFieldDomain=="function"&&t.getFieldDomain(d),y=(f&&f.type==="coded-value"?vye(f,e,n):null)||e||null;if(y!==null){const m=wye({currentTerm:y,field:h,filter:r,exactMatch:n,url:a,type:o});m&&(u+=bye(u,m))}}),s?`(${s}) AND (${u})`:u}function _ye(e,t){let i=null;const{codedValues:r}=e;return r&&r.length&&r.some(n=>n.code===t&&(i=n.name,!0)),i}function Sye(e,t){return e[Object.keys(e).find(i=>i.toLowerCase()===t.toLowerCase())]}function kB(e,t,i){const r=e.sourceLayer,{attributes:n}=e,o=typeof r.getFieldDomain=="function"&&r.getFieldDomain(i);if(t)return Hn(t,n);if(i&&n){const s=r.getField(i),a=Sye(n,i);return a==null?"":o&&o.type==="coded-value"?_ye(o,a):(s==null?void 0:s.type)==="date"?Wo(new Date(a)):typeof a=="number"?a.toString():typeof a!="string"?"":a.trim()}return""}function Tye(e,t,i,r){const n=e.sourceLayer,{attributes:o}=e,{objectIdField:s}=n,a=o[s];return{text:kB(e,t.suggestionTemplate,r),key:a,sourceIndex:i}}function Eye(e,t,i,r){return e.features.map(n=>Tye(n,t,i,r))}function Aye(e,t,i,r,n,o,s){const a=e.clone(),u=e.sourceLayer,d=u&&u.objectIdField,h=d&&e.attributes[d],f=kB(e,i.searchTemplate,n),y=B3(a.geometry,t,o),m=typeof s=="number"?UE(R(y),t,s):y,g=e.clone();return T(m)&&(g.geometry=fr.fromExtent(m)),{extent:m,target:g,feature:a,key:h,name:f,sourceIndex:r}}function xye(e,t,i,r,n,o,s){return e.features.map(a=>Aye(a,t,i,r,n,o,s))}var VE;let zn=VE=class extends F3{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,i)=>fye({source:this,...t},i),this.getSuggestions=(t,i)=>yye({source:this,...t},i)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()||""}set name(e){e!==void 0?this._override("name",e):this._clearOverride("name")}clone(){return new VE({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?R(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?R(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return(t=(e=this.layer.fieldsIndex.fields.find(i=>i.type==="string"))==null?void 0:e.name)!=null?t:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(i=>{const r=e.getField(i);return r&&r.alias||i}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};l([c({json:{read:{source:"field.name"},write:{target:"field.name"}}})],zn.prototype,"displayField",void 0),l([c({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],zn.prototype,"exactMatch",void 0),l([c({value:null})],zn.prototype,"layer",null),l([c()],zn.prototype,"name",null),l([c({type:[String],json:{write:!0}})],zn.prototype,"orderByFields",void 0),l([c()],zn.prototype,"searchFields",void 0),l([c()],zn.prototype,"searchTemplate",void 0),l([c()],zn.prototype,"suggestionTemplate",void 0),zn=VE=l([S("esri.widgets.Search.LayerSearchSource")],zn);const Ad=zn;function Cye(e){return e&&typeof e.x=="number"&&typeof e.y=="number"}function Iye(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let Wa=class extends U{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};l([c({type:String,json:{write:!0}})],Wa.prototype,"address",void 0),l([c({type:Object,json:{write:!0}})],Wa.prototype,"attributes",void 0),l([c({type:Oe,json:{write:!0}})],Wa.prototype,"extent",void 0),l([c({type:le,json:{write:!0}})],Wa.prototype,"location",void 0),l([c({type:Number,json:{write:!0}})],Wa.prototype,"score",void 0),Wa=l([S("esri.rest.support.AddressCandidate")],Wa);const FB=Wa,V3={type:String,json:{read:{source:"token"},write:{target:"token"}}};let ai=class extends U{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};l([c({type:Object,json:{write:!0}})],ai.prototype,"address",void 0),l([c(V3)],ai.prototype,"apiKey",void 0),l([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],ai.prototype,"categories",void 0),l([c({type:String,json:{write:!0}})],ai.prototype,"countryCode",void 0),l([c({type:Boolean,json:{write:!0}})],ai.prototype,"forStorage",void 0),l([c({type:le,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],ai.prototype,"location",void 0),l([c({type:String,json:{write:!0}})],ai.prototype,"locationType",void 0),l([c({type:String,json:{write:!0}})],ai.prototype,"magicKey",void 0),l([c({type:Number,json:{write:!0}})],ai.prototype,"maxLocations",void 0),l([c({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],ai.prototype,"outFields",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ai.prototype,"outSpatialReference",void 0),l([c({type:Oe,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=i}}}})],ai.prototype,"searchExtent",void 0),ai=l([S("esri.rest.support.AddressToLocationsParameters")],ai),ai.from=Ze(ai);const BB=ai;async function Mye(e,t,i){t=BB.from(t);const r=Xy(e),{address:n,...o}=t.toJSON(),s={...n,...o,f:"json"},a=ow({...r.query,...s}),u=nw(a,i),d=`${r.path}/findAddressCandidates`;return Be(d,u).then(Nye)}function Nye({data:e}){if(!e)return[];const{candidates:t,spatialReference:i}=e;return t?t.map(r=>{if(!r)return;const{extent:n,location:o}=r,s=!n||Iye(n);return Cye(o)&&s?(n&&(n.spatialReference=i),o.spatialReference=i,FB.fromJSON(r)):void 0}):[]}let Ms=class extends U{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};l([c(V3)],Ms.prototype,"apiKey",void 0),l([c({type:le,json:{write:{writer:(e,t)=>{const i=e?e.clone().normalize():null,r=i!==void 0;t.location=r?i:null}}}})],Ms.prototype,"location",void 0),l([c({type:String,json:{write:!0}})],Ms.prototype,"locationType",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ms.prototype,"outSpatialReference",void 0),Ms=l([S("esri.rest.support.LocationToAddressParameters")],Ms),Ms.from=Ze(Ms);const UB=Ms;async function Rye(e,t,i){t=UB.from(t);const r=Xy(e),n={...t.toJSON(),f:"json"},o=ow({...r.query,...n}),s=nw(o,i),a=`${r.path}/reverseGeocode`;return Be(a,s).then(Pye)}function Pye({data:e}){if(!e)return;const{address:t,location:i}=e,r=t&&t.Match_addr||"";return FB.fromJSON({address:r,attributes:t||{},location:i,score:100})}let xd=class extends U{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};l([c({type:Boolean,json:{write:!0}})],xd.prototype,"isCollection",void 0),l([c({type:String,json:{write:!0}})],xd.prototype,"magicKey",void 0),l([c({type:String,json:{write:!0}})],xd.prototype,"text",void 0),xd=l([S("esri.rest.support.SuggestionCandidate")],xd);const $ye=xd;let Cr=class extends U{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};l([c(V3)],Cr.prototype,"apiKey",void 0),l([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],Cr.prototype,"categories",void 0),l([c({type:String,json:{write:!0}})],Cr.prototype,"countryCode",void 0),l([c({type:le,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],Cr.prototype,"location",void 0),l([c({type:Number,json:{write:!0}})],Cr.prototype,"maxSuggestions",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Cr.prototype,"outSpatialReference",void 0),l([c({type:Oe,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(i)}}}})],Cr.prototype,"searchExtent",void 0),l([c({type:String,json:{write:!0}})],Cr.prototype,"text",void 0),Cr=l([S("esri.rest.support.SuggestLocationsParameters")],Cr),Cr.from=Ze(Cr);const VB=Cr;async function Dye(e,t,i){const r=Xy(e),n={...(t=VB.from(t)).toJSON(),f:"json"},o=ow({...r.query,...n}),s=nw(o,i),a=`${r.path}/suggest`;return Be(a,s).then(Lye)}function Lye(e){const{data:t}=e;if(!t)return[];const{suggestions:i}=t;return i?i.map(r=>new $ye(r)):[]}const Oye="Single Line Input",kye=3e5;function Fye(e,t){return e.location?zye(e,t):Hye(e,t)}function jB(e,t){if(t.localSearchDisabled)return null;const i=e==null?void 0:e.scale;return typeof i=="number"&&i<=kye?e.get("extent.center"):null}function Bye(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:o,maxSuggestions:s,sourceIndex:a}=e,u=new VB,{apiKey:d,url:h}=i,f=zB(i,n),y=t&&t.signal;if(!h)return Promise.resolve(null);d&&(u.apiKey=d),i.categories&&(u.categories=i.categories),r&&(u.outSpatialReference=r);const m=jB(n,i);if(m&&(u.location=m),!o.trim())return Promise.resolve(null);const{prefix:g="",suffix:v=""}=i,w=`${g}${o}${v}`;return u.text=w,f&&(u.searchExtent=f),u.maxSuggestions=s,i.countryCode&&(u.countryCode=i.countryCode),Dye(h,u,{signal:y}).then(_=>Wye(_,a))}function Uye(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function Vye(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function YP(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const jye="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function zye(e,t){const{source:i,spatialReference:r,location:n,sourceIndex:o,view:s}=e,{apiKey:a,url:u,zoomScale:d,defaultZoomScale:h}=i,f=s&&s.scale,y=t&&t.signal,m=new UB;return m.location=n,a&&(m.apiKey=a),r&&(m.outSpatialReference=r),Rye(u,m,{signal:y}).then(g=>HB([g],{sourceIndex:o,scale:f,view:s,zoomScale:d,defaultZoomScale:h})).catch(()=>[])}function zB(e,t){const{filter:i,withinViewEnabled:r}=e,n=t&&t.scale,o=t&&t.extent,s=i&&i.geometry;return B3(s,t,n)||(r&&o?o:void 0)}function Hye(e,t){const{source:i,suggestResult:r,spatialReference:n,view:o,maxResults:s,sourceIndex:a}=e,u=i&&i.zoomScale,d=i&&i.defaultZoomScale;if(!r.text.trim())return Promise.resolve(null);const h=!r.key&&i.prefix?i.prefix:"",f=!r.key&&i.suffix?i.suffix:"",y=`${h}${r.text}${f}`,m=new BB,{apiKey:g,url:v}=i,w=o&&o.scale,_=zB(i,o),A=t&&t.signal;if(g&&(m.apiKey=g),!v)return Promise.resolve(null);i.categories&&(m.categories=i.categories),i.locationType&&(m.locationType=i.locationType),n&&(m.outSpatialReference=n);const M=jB(o,i);M&&(m.location=M),m.maxLocations=s,_&&(m.searchExtent=_),i.countryCode&&(m.countryCode=i.countryCode);const{key:$}=r,N=`${$}`;return $&&(m.magicKey=N),m.address={},m.address[i.singleLineFieldName||Oye]=y,i.outFields&&(m.outFields=i.outFields),Mye(v,m,{signal:A}).then(D=>HB(D,{key:N,scale:w,sourceIndex:a,view:o,zoomScale:u,defaultZoomScale:d}))}function Gye(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function Wye(e,t){return e.map(i=>Gye(i,t))}function qye(e,t){const{key:i,scale:r,sourceIndex:n,view:o,zoomScale:s,defaultZoomScale:a}=t,{attributes:u,extent:d,location:h,address:f}=e,y=new Ni({geometry:h,attributes:u}),m=d||h,g=B3(m,o,r),v=typeof s=="number"?UE(g,o,s):typeof a=="number"&&m.type==="point"?UE(g,o,a):g,w=h?`${h.x},${h.y}`:"",_=f||w,A=y.clone();return T(v)&&(A.geometry=fr.fromExtent(v)),{extent:v,feature:y,target:A,key:i,name:_,sourceIndex:n}}function HB(e,t){return e.filter(Boolean).map(i=>qye(i,t))}var jE;const Yye="esri.widgets.Search.LocatorSearchSource";let Ti=jE=class extends F3{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,i)=>Fye({source:this,...t},i),this.getSuggestions=(t,i)=>Bye({source:this,...t},i)}clone(){return new jE({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?R(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?R(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};l([c()],Ti.prototype,"apiKey",void 0),l([c()],Ti.prototype,"categories",void 0),l([c()],Ti.prototype,"countryCode",void 0),l([c({json:{write:!0}})],Ti.prototype,"defaultZoomScale",void 0),l([c()],Ti.prototype,"localSearchDisabled",void 0),l([c()],Ti.prototype,"locationType",void 0),l([c({json:{write:!0}})],Ti.prototype,"name",void 0),l([c({json:{write:!0}})],Ti.prototype,"placeholder",void 0),l([c()],Ti.prototype,"searchTemplate",void 0),l([c({json:{write:!0}})],Ti.prototype,"singleLineFieldName",void 0),l([c({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Ti.prototype,"suggestionsEnabled",void 0),l([c({json:{write:!0}})],Ti.prototype,"url",void 0),l([c({json:{write:!0}})],Ti.prototype,"zoomScale",void 0),Ti=jE=l([S(Yye)],Ti);const GB=Ti;new Se({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new Se({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let zl=class extends U{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};l([c({type:String,json:{write:!0}})],zl.prototype,"deviationUnit",void 0),l([c({json:{read:{reader:e=>e?e.map(t=>Ki(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],zl.prototype,"geometries",void 0),l([c({type:Number,json:{write:!0}})],zl.prototype,"maxDeviation",void 0),zl=l([S("esri.rest.support.GeneralizeParameters")],zl),zl.from=Ze(zl);new Se({preserveShape:"preserve-shape"});let ga=class extends U{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};l([c({type:String,json:{write:!0}})],ga.prototype,"calculationType",void 0),l([c({type:Boolean,json:{write:!0}})],ga.prototype,"geodesic",void 0),l([c({json:{write:!0}})],ga.prototype,"lengthUnit",void 0),l([c({type:[ji],json:{read:{reader:e=>e?e.map(t=>Ki(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],ga.prototype,"polylines",void 0),ga=l([S("esri.rest.support.LengthsParameters")],ga),ga.from=Ze(ga);new Se({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new Se({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let ls=class extends U{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};l([c({type:Number,json:{write:!0}})],ls.prototype,"bevelRatio",void 0),l([c({json:{read:{reader:e=>e?e.map(t=>Ki(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],ls.prototype,"geometries",void 0),l([c({type:Number,json:{write:!0}})],ls.prototype,"offsetDistance",void 0),l([c({type:String,json:{write:!0}})],ls.prototype,"offsetHow",void 0),l([c({type:String,json:{write:!0}})],ls.prototype,"offsetUnit",void 0),ls=l([S("esri.rest.support.OffsetParameters")],ls),ls.from=Ze(ls);function Kye(e,t,i){const r=OL(t);return e.map(n=>{const o=r.fromJSON(n);return o.spatialReference=i,o})}let Su=class extends U{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(r=>r.toJSON()),t=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:Rp(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};l([c()],Su.prototype,"geometries",void 0),l([c({json:{read:{source:"outSR"}}})],Su.prototype,"outSpatialReference",void 0),l([c()],Su.prototype,"transformation",void 0),l([c()],Su.prototype,"transformForward",void 0),Su=l([S("esri.rest.support.ProjectParameters")],Su);const WB=Su,Zye=Ze(WB);async function Jye(e,t,i){t=Zye(t);const r=Xy(e),n={...r.query,f:"json",...t.toJSON()},o=t.outSpatialReference,s=Rp(t.geometries[0]),a=nw(n,i);return Be(r.path+"/project",a).then(({data:{geometries:u}})=>Kye(u,s,o))}new Se({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let va=class extends U{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};l([c({json:{read:{reader:e=>e?e.map(t=>Ki(t)):null},write:{writer:(e,t)=>{t.geometries1=e.map(i=>i.toJSON())}}}})],va.prototype,"geometries1",void 0),l([c({json:{read:{reader:e=>e?e.map(t=>Ki(t)):null},write:{writer:(e,t)=>{t.geometries2=e.map(i=>i.toJSON())}}}})],va.prototype,"geometries2",void 0),l([c({type:String,json:{write:!0}})],va.prototype,"relation",void 0),l([c({type:String,json:{write:!0}})],va.prototype,"relationParameter",void 0),va=l([S("esri.rest.support.RelationParameters")],va),va.from=Ze(va);new Se({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let Hl=class extends U{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};l([c({type:String,json:{write:!0}})],Hl.prototype,"extendHow",void 0),l([c({type:[ji],json:{read:{reader:e=>e?e.map(t=>Ki(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],Hl.prototype,"polylines",void 0),l([c({json:{read:{reader:e=>e?Ki(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],Hl.prototype,"trimExtendTo",void 0),Hl=l([S("esri.rest.support.TrimExtendParameters")],Hl),Hl.from=Ze(Hl);const qB=W.getLogger("esri.widgets.support.geolocationUtils"),Xye={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Qye(){const e=k("esri-geolocation");return e||qB.warn("geolocation-unsupported","Geolocation unsupported."),e}function eme(){const e=window.isSecureContext;return e||qB.warn("insecure-context","Geolocation requires a secure origin."),e}function KP(){return Qye()&&eme()}function tme(e){return e||(e=Xye),new Promise((i,r)=>{setTimeout(()=>r(new I("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,e)})}function ime(e,t){const{position:i,view:r}=e;return ome(nme(rme(i)),r,t)}function rme(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:i,timestamp:e.timestamp}}function nme(e){const t=e&&e.coords;return t?new le({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function ome(e,t,i){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(js(e)):sme(i).then(n=>{if(!n)throw new I("geometry-service:missing-url","Geometry service URL is missing");const o=new WB({geometries:[e],outSpatialReference:r});return Jye(n,o,i).then(s=>s[0])})}function sme(e){if(Ne.geometryServiceUrl)return Promise.resolve(Ne.geometryServiceUrl);const t=Yt.getDefault();return t.load(e).catch(()=>{}).then(()=>t.get("helperServices.geometry.url"))}function vi(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const ame=()=>xA("esri/widgets/Search/t9n/Search"),YB="esri.widgets.Search.SearchViewModel",Cn=W.getLogger(YB),ZP="highlight",Bg=he.ofType({key:e=>e.layer?"layer":"locator",base:F3,typeMap:{layer:Ad,locator:GB}}),JP=me.WGS84,lme="esri/images/search/search-symbol-32.png",ume=/<(?:.|\s)*?>/g,Cd=-1;let Ae=class extends x3(Js.EventedMixin(se)){constructor(e){super(e),this._handles=new mi,this._gotoController=null,this._searching=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new Bg,this.defaultSymbols={point:new Gy({url:Ue(lme),size:24,width:24,height:24}),polyline:new Br({color:[130,130,130,1],width:2}),polygon:new Xs({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=Yt.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new Bg,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const t=await ame();this.messages=t,this.defaultPopupTemplate=new Nl({title:t.searchResult,content:"{Match_addr}"})};e(),this._handles.add([q(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),ze),z5(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:Cd}set activeSourceIndex(e){e!==void 0?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:i}=this,r=typeof i=="function"?i.call(null,{sources:e,defaultSources:t}):i?t.concat(e):e,n=this._get("allSources")||new Bg;return n.removeAll(),n.addMany(r.filter(Boolean)),n}get defaultSymbol(){return A_(Cn,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(e){A_(Cn,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",e)}get locationEnabled(){return this._get("locationEnabled")||KP()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const t=KP();if(e&&!t){const i=new I("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Cn.error(i)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:i}=this;if(t===Cd)return i;const r=e.getItemAt(t);return r?r.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const i=this._createSuggestionForSearch(e),r=this.when().then(()=>this._getResultsFromSources(i,t).then(n=>{var u;if((u=t==null?void 0:t.signal)!=null&&u.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:i.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(o,n,i);const s=this._getFirstResult(o.results),a=(i.location&&s?s.name:i.text).replace(ume,"");return this._set("searchTerm",a),(i.key&&typeof i.sourceIndex=="number"||i.location)&&this._set("selectedSuggestion",i),this._set("results",o.results),this._set("resultCount",o.results.reduce((d,h)=>d+h.results.length,0)),this.emit("search-complete",o),this._selectFirstResult(s).then(()=>o)})).then(n=>(this._clearSearching(),n),n=>{throw this._clearSearching(),n});return this._searching=r,r}searchNearby(e){if(!this.locationEnabled){const i=new I("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Cn.error(i),Promise.reject(i)}const t=tme().then(i=>ime({position:i,view:this.view},e)).then(i=>this.search(i,e));return this._searching=t,t.catch(()=>{}).then(()=>this._clearSearching()),t}select(e){if(this.clearGraphics(),!e){const _=new I("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return Cn.error(_),Promise.reject(_)}const{view:t}=this,i=vi(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),r=this.allSources.getItemAt(i);if(!r){const _=new I("select:missing-source","Cannot select without a source.",{source:r});return Cn.error(_),Promise.reject(_)}const n=r instanceof Ad?this._getLayerSourcePopupTemplate(r):r.popupTemplate,o=r.resultSymbol||this._getDefaultSymbol(e),s=vi(r,"resultGraphicEnabled")?r.resultGraphicEnabled:this.resultGraphicEnabled,a=vi(r,"autoNavigate")?r.autoNavigate:this.autoNavigate,u=vi(r,"popupEnabled")?r.popupEnabled:this.popupEnabled,d=u?n||this.popupTemplate||this.defaultPopupTemplate:null,{feature:h}=e;if(!h){const _=new I("select:missing-feature","Cannot select without a feature.",{feature:h});return Cn.error(_),Promise.reject(_)}const{attributes:f,geometry:y,layer:m,sourceLayer:g}=h,v=qP(y),w={layerViewQuery:this._getLayerView(h),elevationQuery:t&&T(v)?dye(v,t).catch(()=>v):Promise.resolve(v)};return ii(w).then(_=>{const A=_.layerViewQuery.value,M=_.elevationQuery.value;o instanceof Cc&&(o.text=e.name);const $=t&&a?e.target||e.extent:null;return(T($)?this._goToSearchResult($):Promise.resolve()).then(()=>{var G;const N=A?h:new Ni({geometry:y,symbol:o,attributes:f,layer:m,sourceLayer:g,popupTemplate:d}),D=u&&((G=this.view)==null?void 0:G.popup),V=D&&N.getEffectivePopupTemplate(D.defaultPopupTemplateEnabled);return V&&t.popup.open({features:[N],location:M}),A&&TE(A)&&!V&&this._highlightFeature({graphic:N,layerView:A}),!A&&s&&t&&t.graphics.push(N),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",N),this.emit("select-result",{result:e,source:r,sourceIndex:i}),e})})}suggest(e,t,i){const r=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:r}),this._suggestTimer(t,i).then(()=>this._suggestImmediate(r,i).then(n=>(this._set("suggestions",n.results),this._set("suggestionCount",n.results.reduce((o,s)=>o+s.results.length,0)),this.emit("suggest-complete",n),n)))}async when(){await ny(()=>!this.updating)}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const i=this._updatingPromise=ii([e==null?void 0:e.load(),t==null?void 0:t.when()]);if(this.destroyed||(await i,i!==this._updatingPromise))return}await ny(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var t,i;const e=(i=(t=this.portal)==null?void 0:t.helperServices)==null?void 0:i.geocode;return e?e.map(r=>{if(r.placefinding===!1)return;const n=Ne.apiKey&&YP(r.url)?{url:jye}:null,o=GB.fromJSON({...r,...n}),s=o.url;if(YP(s)||Vye(s)||Uye(s)){const a=o.outFields||["Addr_type","Match_addr","StAddr","City"],u=o.placeholder||this.messages.placeholder,d=typeof o.defaultZoomScale=="number"?o.defaultZoomScale:2500;o.set({singleLineFieldName:"SingleLine",outFields:a,placeholder:u,defaultZoomScale:d})}return o.singleLineFieldName?o:void 0}).filter(Boolean):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,t){var r;const i=(r=this.view)==null?void 0:r.map;return e.map(n=>{const o=i.findLayerById(n.id);if(!o)return;const s=this._getLayerJSON(n),a=Ad.fromJSON(s);return a.placeholder=t,this._getLayer(o,s).then(u=>{a.layer=u}),a}).filter(Boolean).toArray()}_getTableSources(e,t){var r;const i=(r=this.view)==null?void 0:r.map;return e.map(n=>{const o=i.findTableById(n.id);if(!o)return;const s=this._getLayerJSON(n),a=Ad.fromJSON(s);return a.placeholder=t,this._getLayer(o,s).then(u=>{a.layer=u}),a}).filter(Boolean).toArray()}_convertApplicationProperties(){var s,a,u;const e=(s=this.view)==null?void 0:s.map,t=(u=(a=e==null?void 0:e.applicationProperties)==null?void 0:a.viewing)==null?void 0:u.search;if(!t)return[];const{enabled:i,hintText:r,layers:n,tables:o}=t;return i?[...this._getLayerSources(n,r),...this._getTableSources(o,r)]:[]}async _getSubLayer(e,t){if(await e.load(),!e.allSublayers)throw new Error;const i=e.allSublayers.find(n=>n.id===t.subLayer);if(!i)throw new Error;const r=await i.createFeatureLayer();return this._createdFeatureLayers.push(r),r}async _getBuildingSubLayer(e,t){await e.load();const i=e.allSublayers.find(r=>r.id===t.subLayer);if((i==null?void 0:i.type)!=="building-component")throw new Error;if(await i.load(),i.associatedLayer==null)throw new Error;return await i.associatedLayer.load(),i}_getLayer(e,t){return e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature"?Promise.resolve(e):e.type==="map-image"?this._getSubLayer(e,t).catch(()=>{const i=new I("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Cn.error(i),null}):e.type==="building-scene"?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;this._destroyFeatureLayers(),e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var r;const e=(r=this.view)==null?void 0:r.popup,{resultGraphic:t}=this;if(!e||!t)return;const{selectedFeature:i}=e;i&&i===t&&e.close()}_suggestTimer(e,t){const i=e!=null?e:this.suggestionDelay;return Sv(i,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof Ni?qP(e.geometry):e instanceof le?e:Array.isArray(e)&&e.length===2?new le({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&vi(e,"key")&&vi(e,"text")&&vi(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),i=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:r,selectedResult:n}=this,o=!e&&r&&n,s=o&&r.key===n.key&&r.sourceIndex===n.sourceIndex,a=o&&r.location;return s||a?r:{location:t,text:t?"":i,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some(i=>{const{results:r}=i,n=r[0],o=!!n;return o&&(t=n),o}),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then(()=>this._getSuggestionsFromSources(e,t)).then(i=>{var n;if((n=t==null?void 0:t.signal)!=null&&n.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,i),r})}_formatSourceResponse(e,t,i){const r=t&&t.value||[],n=t&&t.error,o=this.allSources.getItemAt(i);if(n){const s={sourceIndex:i,source:o,error:n};e.errors.push(s),Cn.error(n),e.numErrors++}else{const s={sourceIndex:i,source:o,results:r};e.results.push(s),e.numResults+=r.length}}_formatResponse(e,t,i){if(t)if(e.activeSourceIndex===Cd){const r=i&&vi(i,"sourceIndex")&&i.sourceIndex!==-1?i.sourceIndex:void 0;t.forEach((n,o)=>{const s=r!==void 0?r:o;this._formatSourceResponse(e,n,s)})}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:i}=this,r=!e.location&&vi(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,n=[];if(!i.length){const o=new I("search:no-sources-defined","At least one source is required.",{allSources:i});return Cn.error(o),Promise.reject(o)}return r===Cd?i.forEach((o,s)=>{n.push(this._getResultsFromSource(e,s,t))}):n.push(this._getResultsFromSource(e,r,t)),ii(n)}_getSuggestionsFromSources(e,t){const{allSources:i,activeSourceIndex:r}=this,n=[];if(!i.length){const o=new I("suggest:no-sources-defined","At least one source is required.",{allSources:i});return Cn.error(o),Promise.reject(o)}return r===Cd?i.forEach((o,s)=>{n.push(this._getSuggestionsFromSource(e,s,t))}):n.push(this._getSuggestionsFromSource(e,r,t)),ii(n)}_getResultsFromSource(e,t,i){var d;const r=this.allSources.getItemAt(t),{location:n=null}=e,o=((d=this.view)==null?void 0:d.spatialReference)||JP,s=vi(r,"maxResults")?r.maxResults:this.maxResults,a=!!(r instanceof Ad&&vi(r,"exactMatch"))&&r.exactMatch,{view:u}=this;return r.getResults({view:u,sourceIndex:t,location:n,suggestResult:e,spatialReference:o,exactMatch:a,maxResults:s},i)}_getSuggestionsFromSource(e,t,i){var a;const r=this.allSources.getItemAt(t),n=vi(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,o=e.length,s=vi(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(n&&e.trim()&&o>=s){const u=((a=this.view)==null?void 0:a.spatialReference)||JP,d=vi(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:h}=this,f=!!(r instanceof Ad&&vi(r,"exactMatch"))&&r.exactMatch;return r.getSuggestions({view:h,sourceIndex:t,suggestTerm:e,spatialReference:u,maxSuggestions:d,exactMatch:f},i)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return vi(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let i=null;return t.some(r=>r.results.some(n=>n===e&&(i=r.sourceIndex,!0))),i}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{animate:t,signal:i.signal}};await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var n;const{defaultSymbols:t}=this,i=(n=e.feature)==null?void 0:n.geometry;if(O(i))return null;const r=this._get("defaultSymbol");if(r&&(i.type==="point"||i.type==="multipoint"))return r;switch(i.type){case"point":case"multipoint":return t.point;case"polyline":return t.polyline;case"extent":case"polygon":return t.polygon;default:return null}}_removeHighlight(){this._handles.remove(ZP)}async _getLayerView(e){const{view:t}=this;if(!e||!t||e.layer.type==="building-component"||e.layer.type==="subtype-sublayer")return null;const{layer:i}=e;return await t.when(),t.whenLayerView(i)}_highlightFeature(e){const{graphic:t,layerView:i}=e,{attributes:r,layer:n}=t,{objectIdField:o}=n,s=r&&r[o],a=i.highlight(s||t);this._handles.add(a,ZP)}_setResultFloor(e){var n,o,s;const{view:t}=this,i=(n=e.feature)==null?void 0:n.attributes,r=(o=e.feature)==null?void 0:o.sourceLayer;if(r&&"floorInfo"in r&&((s=r==null?void 0:r.floorInfo)==null?void 0:s.floorField)&&i){const a=i[r.floorInfo.floorField];t.emit("select-result-floor",a)}}};Ae.ALL_INDEX=Cd,l([c()],Ae.prototype,"_searching",void 0),l([c()],Ae.prototype,"_updatingPromise",void 0),l([c({readOnly:!0,value:null})],Ae.prototype,"activeSource",null),l([c()],Ae.prototype,"activeSourceIndex",null),l([c()],Ae.prototype,"allPlaceholder",null),l([c({readOnly:!0})],Ae.prototype,"allSources",null),l([c()],Ae.prototype,"autoNavigate",void 0),l([c()],Ae.prototype,"autoSelect",void 0),l([c()],Ae.prototype,"defaultPopupTemplate",void 0),l([c({readOnly:!0})],Ae.prototype,"defaultSources",void 0),l([c()],Ae.prototype,"defaultSymbol",null),l([c()],Ae.prototype,"defaultSymbols",void 0),l([c()],Ae.prototype,"includeDefaultSources",void 0),l([c()],Ae.prototype,"locationEnabled",null),l([c()],Ae.prototype,"maxInputLength",void 0),l([c()],Ae.prototype,"maxResults",void 0),l([c()],Ae.prototype,"maxSuggestions",void 0),l([c()],Ae.prototype,"messages",void 0),l([c()],Ae.prototype,"minSuggestCharacters",void 0),l([c({readOnly:!0})],Ae.prototype,"placeholder",null),l([c()],Ae.prototype,"popupEnabled",void 0),l([c({type:Nl})],Ae.prototype,"popupTemplate",void 0),l([c({type:Yt})],Ae.prototype,"portal",void 0),l([c()],Ae.prototype,"resultCount",void 0),l([c()],Ae.prototype,"resultGraphicEnabled",void 0),l([c({readOnly:!0})],Ae.prototype,"resultGraphic",void 0),l([c({readOnly:!0})],Ae.prototype,"results",void 0),l([c({readOnly:!0})],Ae.prototype,"selectedSuggestion",void 0),l([c()],Ae.prototype,"searchAllEnabled",void 0),l([c({readOnly:!0})],Ae.prototype,"selectedResult",void 0),l([c()],Ae.prototype,"searchTerm",null),l([c({type:Bg})],Ae.prototype,"sources",void 0),l([c({readOnly:!0})],Ae.prototype,"state",null),l([c()],Ae.prototype,"suggestionDelay",void 0),l([c()],Ae.prototype,"suggestionCount",void 0),l([c({readOnly:!0})],Ae.prototype,"suggestions",void 0),l([c()],Ae.prototype,"suggestionsEnabled",void 0),l([c({readOnly:!0})],Ae.prototype,"updating",null),l([c()],Ae.prototype,"view",void 0),l([c()],Ae.prototype,"clear",null),Ae=l([S(YB)],Ae);const kd=Ae,us={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};let qa=class extends gi{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[us.showMoreResults]:this.showMoreResultsOpen};return C("div",{class:us.base},C("div",{key:"esri-search-renderer__container",class:this.classes(us.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return C("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var i;const e=(i=this.viewModel)==null?void 0:i.selectedResult,t=e&&e.name||"";return C("div",{key:"esri-search-renderer__result-name",class:us.moreResultsItem},t)}renderMoreResultsLists(){var r;const e=(r=this.viewModel)==null?void 0:r.results,{resultCount:t}=this.viewModel;if(t<2)return null;const i=e.map(n=>this.renderMoreResultsList(n));return C("div",{key:"esri-search-renderer__more-results-container",class:us.moreResultsList},i)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:C("div",{key:"esri-search-renderer__more-results-button",class:us.moreResultsItem},C("a",{class:us.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return C("div",{key:`esri-search-result-renderer__header-${t}`,class:us.moreResultsListHeader},e)}renderMoreResultsList(e){var h,f;const{results:t}=e,i=t.length,r=!!i,n=(h=this.viewModel)==null?void 0:h.selectedResult,o=i===1&&t[0]===n,s=this._getSourceName(e.source,e.sourceIndex),a=((f=this.viewModel)==null?void 0:f.results.length)>1&&!o?this.renderMoreResultsHeader(s,e.sourceIndex):null,u=r&&t.map((y,m)=>this.renderMoreResultsListItem(y,m)),d=r&&!o?C("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},u):null;return r?C("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},a,d):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?C("li",{key:`esri-search-result-renderer__list-item-${t}`},C("a",{class:us.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===kd.ALL_INDEX?this.messages.all:e.name}};l([c(),di("esri/widgets/Search/t9n/Search")],qa.prototype,"messages",void 0),l([c()],qa.prototype,"showMoreResultsOpen",void 0),l([c()],qa.prototype,"viewModel",void 0),l([sr()],qa.prototype,"_showMoreResultsClick",null),l([sr()],qa.prototype,"_selectResultClick",null),qa=l([S("esri.widgets.Search.SearchResultRenderer")],qa);const cme=qa,ce={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},dme=/<[a-z/][\s\S]*>/i;let Ce=class extends gi{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new mi,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new cme,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=ce.widgetIcon,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new kd,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=i=>{var n;const r=i.relatedTarget;r&&((n=this._container)==null?void 0:n.contains(r))||this._clearActiveMenu()},this.own([q(()=>this.searchTerm,i=>{(i&&this.activeMenu==="warning"||!i&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),El(()=>{var i;return(i=this.viewModel)==null?void 0:i.allSources},"change",()=>this._watchSourceChanges()),q(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),ze),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.defaultPopupTemplate},i=>{i&&(i.content=this._renderSearchResultsContent.bind(this))},ze)])}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:i}=t;return this._searchController=t,this.viewModel.search(e,{signal:i}).catch(r=>{if(this._searchController===t)return this._clearActiveMenu(),this._searchController=null,r}).then(r=>{if(this._searchController===t)return this.activeMenu=r.numResults?"none":"warning",this._searchController=null,r})}suggest(e){this._cancelSuggest();const t=new AbortController,{signal:i}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:i}).then(r=>{if(this._suggestController===t)return this._suggestController=null,r.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),r}).catch(()=>{if(this._suggestController===t)return this._suggestController=null,null})}render(){const{state:e}=this.viewModel,t={[ce.disabled]:e==="disabled",[ce.esriWidgetDisabled]:this.disabled};return C("div",{class:this.classes(ce.base,t)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e,disabled:t}=this;return C("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:t,class:this.classes(ce.submitButton,ce.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},C("span",{"aria-hidden":"true",class:ce.searchIcon}))}renderWarningMenu(){return C("div",{key:"esri-search__error-menu",class:this.classes(ce.menu,ce.warningMenu)},C("div",{class:ce.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:i,sourceMenuButtonId:r,disabled:n}=this,{activeSourceIndex:o,allSources:s}=this.viewModel;return s.length>1?C("button",{id:r,key:"esri-search__source-menu-button",bind:this,disabled:n,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(t==="source").toString(),"aria-controls":i,class:this.classes(ce.sourcesButton,ce.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:qu,"data-node-ref":"_sourceMenuButtonNode",type:"button"},C("span",{"aria-hidden":"true",class:ce.dropdownIcon}),C("span",{"aria-hidden":"true",class:ce.dropupIcon}),C("span",{class:ce.sourceName},this._getSourceName(o))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:i,activeMenu:r,sourceMenuId:n,sourceMenuButtonId:o}=this,s=r==="source"&&i>-1?this._buildId("source-item",i):null;return e.length>1?C("ul",{"aria-activedescendant":s,"aria-labelledby":o,id:n,role:"menu",bind:this,afterCreate:qu,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:ce.menuList,tabIndex:-1},t?this.renderSource(kd.ALL_INDEX):null,e.map((a,u)=>this.renderSource(u)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?C("div",{key:"esri-search__source-menu",class:this.classes(ce.menu,ce.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t,disabled:i}=this;return C("div",{class:ce.loader,key:"base-loader",tabIndex:i?-1:null},C("span",{"aria-hidden":"true",class:ce.loaderAnimation}),C("span",{class:ce.fallbackText},e.searchButtonTitle),C("span",{class:ce.loaderText},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:i}=this,r={[ce.hasMultipleSources]:e.length>1,[ce.isLoading]:t==="loading",[ce.isSearching]:t==="searching",[ce.showWarning]:i==="warning",[ce.showSources]:i==="source",[ce.showSuggestions]:i==="suggestion"};return C("div",{tabIndex:-1,afterCreate:n=>{this._container=n,n.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:n=>{n.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(r,ce.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?C("button",{bind:this,disabled:this.disabled,class:this.classes(ce.clearButton,ce.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},C("span",{"aria-hidden":"true",class:ce.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:i}=this,r=t&&!i,n=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return r?C("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(ce.menuList,ce.suggestionList,ce.suggestionListCurrentLocation)},C("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(ce.menuItem,n?ce.menuItemFocus:null)},C("span",{"aria-hidden":"true",class:ce.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:i,messages:r,suggestionsMenuId:n,inputId:o,_activeMenuItemIndex:s,disabled:a}=this,{maxInputLength:u,placeholder:d,searchTerm:h,suggestionCount:f}=this.viewModel,y=!(!(t&&!i)&&!f),m=e==="suggestion"&&s>-1?this._buildId("suggestion-item",s):null;return C("input",{"aria-activedescendant":m,"aria-autocomplete":"list","aria-expanded":(y&&e==="suggestion").toString(),"aria-controls":y?n:null,"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,bind:this,disabled:a,placeholder:d,maxlength:u,autocomplete:"off",type:"text",class:this.classes(ce.esriInput,ce.input),value:h,id:o,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:qu,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:h?"":d})}renderForm(){return C("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:ce.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,i=e.results.length,r=e.results;return i?C("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(ce.menuList,ce.suggestionList)},r.map(n=>this.renderSuggestion(n,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(t=>[this.renderSuggestionHeader(t),this.renderSuggestList(t)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:i,inputId:r}=this,{suggestionCount:n}=this.viewModel,o=t&&!e||n;return this._menuItemCount=0,o?C("div",{id:i,key:"esri-search__suggestions-menu",class:this.classes(ce.menu,ce.suggestionsMenu),role:"listbox","aria-labelledby":r,bind:this,afterCreate:qu,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return C("div",{key:"esri-search__input-container",class:ce.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:i}=this.viewModel,{sourceIndex:r}=e,n=e.results.length,o=t.length>1&&i===kd.ALL_INDEX;return n&&o?C("div",{key:`esri-search__suggestion-header-${r}`,class:ce.menuHeader},this._getSourceName(r)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:i,messages:r}=this,{searchTerm:n}=this.viewModel;if(n){const{text:o}=e,s=o||r.untitledResult,a=dme.test(s),u=[];if(a)u.push(C("div",{innerHTML:s}));else{const h=this._splitResult(s,n),f=n.toLowerCase();h.forEach((y,m)=>{y&&y.length&&(y.toLowerCase()===f?u.push(C("strong",{key:m},y)):u.push(y))})}const d=this.activeMenu==="suggestion"&&i===t;return C("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(ce.menuItem,d?ce.menuItemFocus:null)},u)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:i}=this.viewModel,r={[ce.menuItemActive]:e===t,[ce.menuItemFocus]:this.activeMenu==="source"&&e===(i?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},n=i?e+1:e;return C("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",n),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(ce.source,ce.menuItem,r)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,i=e?Hn(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return C("div",{key:"esri-search__no_results"},C("div",{class:ce.warningMenuHeader},t.noResults),C("div",{class:ce.warningMenuText},i))}renderEmptySearchWarning(){const{messages:e}=this;return C("div",{key:"esri-search__empty-search"},C("span",{"aria-hidden":"true",class:ce.noticeIcon}),C("span",{class:ce.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return C("div",{key:"esri-search__locate-error"},C("span",{"aria-hidden":"true",class:ce.noticeIcon}),C("span",{class:ce.noValueText},e.locateError))}renderWarning(){var r;const{displayedSearchTerm:e,_locateFailed:t}=this,{viewModel:i}=this;return t?this.renderLocateWarning():((r=i.selectedSuggestion)==null?void 0:r.location)||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${t===void 0?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,i="sources";e.remove(i),t.forEach(r=>e.add(q(()=>r.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var t;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((t=this._sourceListNode)==null||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).then(i=>{this.activeMenu=i.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var i;if(!e)return;const t=e["data-source-index"];this.viewModel.activeSourceIndex=t,this._clearActiveMenu(),(i=this._sourceMenuButtonNode)==null||i.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var n;const t=Do(e);if(e.ctrlKey||e.metaKey||t==="Copy"||t==="ArrowLeft"||t==="ArrowRight"||t==="Shift")return;if(t==="Tab"||t==="Escape"||e.shiftKey&&t==="Tab")return this._cancelSuggest(),void(t==="Escape"&&this._clearActiveMenu());const i=t==="Home"||t==="End"||t==="ArrowUp"||t==="ArrowDown";if(t==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const r=(n=this._suggestionListNode)==null?void 0:n.getElementsByTagName("li");if(r!=null&&r.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),i)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(t,r,this._suggestionListNode);const o=r[this._activeMenuItemIndex];if(t==="Enter"&&o){const s=o["data-suggestion"];return void(s?(this._focus(),this.search(s)):o["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,t,i){const r=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=t.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&YX(t[this._activeMenuItemIndex],i)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=Do(e);if(OO(t)){e.preventDefault();const i=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(i)}else t!=="ArrowUp"&&t!=="ArrowDown"&&t!=="End"&&t!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var n,o;const t=Do(e),i=t==="ArrowUp"||t==="ArrowDown"||t==="End"||t==="Home";if(i&&e.preventDefault(),t==="Escape")return this._clearActiveMenu(),void((n=this._sourceMenuButtonNode)==null?void 0:n.focus());const r=(o=this._sourceListNode)==null?void 0:o.getElementsByTagName("li");return r&&r.length!==0&&i?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(t,r,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:t}=this,i=this.viewModel,{allSources:r}=i,n=r.getItemAt(e);return e===kd.ALL_INDEX?t.all:n&&n.name||t.untitledSource}_splitResult(e,t){const i=QE(t);return e.replace(new RegExp(`(^|)(${i})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};l([c()],Ce.prototype,"_activeMenuItemIndex",void 0),l([c()],Ce.prototype,"displayedSearchTerm",null),l([c({readOnly:!0})],Ce.prototype,"inputId",null),l([c({readOnly:!0})],Ce.prototype,"suggestionsMenuId",null),l([c({readOnly:!0})],Ce.prototype,"sourceMenuId",null),l([c({readOnly:!0})],Ce.prototype,"sourceMenuButtonId",null),l([c()],Ce.prototype,"activeMenu",void 0),l([J("viewModel.activeSource")],Ce.prototype,"activeSource",void 0),l([J("viewModel.activeSourceIndex")],Ce.prototype,"activeSourceIndex",void 0),l([J("viewModel.allPlaceholder")],Ce.prototype,"allPlaceholder",void 0),l([J("viewModel.allSources")],Ce.prototype,"allSources",void 0),l([J("viewModel.autoNavigate")],Ce.prototype,"autoNavigate",void 0),l([J("viewModel.autoSelect")],Ce.prototype,"autoSelect",void 0),l([J("viewModel.defaultSources")],Ce.prototype,"defaultSources",void 0),l([c()],Ce.prototype,"disabled",void 0),l([J("viewModel.goToOverride")],Ce.prototype,"goToOverride",void 0),l([c()],Ce.prototype,"iconClass",void 0),l([J("viewModel.includeDefaultSources")],Ce.prototype,"includeDefaultSources",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ce.prototype,"label",void 0),l([J("viewModel.locationEnabled")],Ce.prototype,"locationEnabled",void 0),l([J("viewModel.maxResults")],Ce.prototype,"maxResults",void 0),l([J("viewModel.maxSuggestions")],Ce.prototype,"maxSuggestions",void 0),l([c(),di("esri/widgets/Search/t9n/Search")],Ce.prototype,"messages",void 0),l([c(),di("esri/t9n/common")],Ce.prototype,"messagesCommon",void 0),l([J("viewModel.minSuggestCharacters")],Ce.prototype,"minSuggestCharacters",void 0),l([J("viewModel.popupEnabled")],Ce.prototype,"popupEnabled",void 0),l([J("viewModel.popupTemplate")],Ce.prototype,"popupTemplate",void 0),l([J("viewModel.portal")],Ce.prototype,"portal",void 0),l([J("viewModel.resultGraphic")],Ce.prototype,"resultGraphic",void 0),l([J("viewModel.resultGraphicEnabled")],Ce.prototype,"resultGraphicEnabled",void 0),l([J("viewModel.results")],Ce.prototype,"results",void 0),l([J("viewModel.searchAllEnabled")],Ce.prototype,"searchAllEnabled",void 0),l([J("viewModel.searchTerm")],Ce.prototype,"searchTerm",void 0),l([J("viewModel.selectedResult")],Ce.prototype,"selectedResult",void 0),l([J("viewModel.sources")],Ce.prototype,"sources",void 0),l([J("viewModel.suggestions")],Ce.prototype,"suggestions",void 0),l([J("viewModel.suggestionsEnabled")],Ce.prototype,"suggestionsEnabled",void 0),l([J("viewModel.view")],Ce.prototype,"view",void 0),l([E6(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),c({type:kd})],Ce.prototype,"viewModel",void 0),l([J("viewModel.clear")],Ce.prototype,"clear",null),Ce=l([S("esri.widgets.Search")],Ce);const pme=Ce,hme={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};function zve(e){return{renderer:{type:"simple",symbol:e==="esriGeometryPoint"||e==="esriGeometryMultipoint"?P7:e==="esriGeometryPolyline"?$7:D7}}}const fme=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let yme=1;function Hve(e,t){if(k("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let i=`this.${t} = null;`;for(const n in e)i+=`this${fme.test(n)?`.${n}`:`["${n}"]`} = ${JSON.stringify(e[n])};`;const r=new Function(`
      return class AttributesClass$${yme++} {
        constructor() {
          ${i};
        }
      }
    `)();return()=>new r}catch{return()=>({[t]:null,...e})}}function Gve(e={}){return[{name:"New Feature",description:"",prototype:{attributes:R(e)}}]}function mme(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:hme,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}const XP=W.getLogger("esri.layers.graphics.sources.GeoJSONSource");let Tu=class extends Ho{constructor(){super(...arguments),this.type="geojson",this.refresh=nA(async e=>{await this.load();const{extent:t,timeExtent:i}=await this._connection.invoke("refresh",e);return this.sourceJSON.extent=t,i&&(this.sourceJSON.timeInfo.timeExtent=[i.start,i.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(e){const t=T(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t)).then(i=>Qy.fromJSON(i))}queryFeaturesJSON(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t))}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:Oe.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}_applyEdits(e){if(!this._connection)throw new I("geojson-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField,i=[],r=[],n=[];if(e.addFeatures)for(const o of e.addFeatures)i.push(this._serializeFeature(o));if(e.deleteFeatures)for(const o of e.deleteFeatures)"objectId"in o&&o.objectId!=null?r.push(o.objectId):"attributes"in o&&o.attributes[t]!=null&&r.push(o.attributes[t]);if(e.updateFeatures)for(const o of e.updateFeatures)n.push(this._serializeFeature(o));return this._connection.invoke("applyEdits",{adds:i,updates:n,deletes:r}).then(({extent:o,timeExtent:s,featureEditResults:a})=>(this.sourceJSON.extent=o,s&&(this.sourceJSON.timeInfo.timeExtent=[s.start,s.end]),this._createEditsResult(a)))}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new I("geojson-layer-source:edit-failure",t.description,{code:t.code}):null}}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e);return i?{geometry:i.toJSON(),attributes:t}:{attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return O(t)?null:t.type==="mesh"||t.type==="extent"?fr.fromExtent(t.extent):t}async _startWorker(e){this._connection=await j9("GeoJSONSourceWorker",{strategy:k("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,hasZ:r,geometryType:n,objectIdField:o,url:s,timeInfo:a,customParameters:u}=this.layer,d=this.layer.originOf("spatialReference")==="defaults",h={url:s,customParameters:u,fields:t&&t.map(y=>y.toJSON()),geometryType:OA.toJSON(n),hasZ:r,objectIdField:o,timeInfo:a?a.toJSON():null,spatialReference:d?null:i&&i.toJSON()},f=await this._connection.invoke("load",h,{signal:e});for(const y of f.warnings)XP.warn(y.message,{layer:this.layer,warning:y});f.featureErrors.length&&XP.warn(`Encountered ${f.featureErrors.length} validation errors while loading features`,f.featureErrors),this.sourceJSON=f.layerDefinition,this.capabilities=mme(this.sourceJSON.hasZ,!0)}};l([c()],Tu.prototype,"capabilities",void 0),l([c()],Tu.prototype,"type",void 0),l([c({constructOnly:!0})],Tu.prototype,"layer",void 0),l([c()],Tu.prototype,"sourceJSON",void 0),Tu=l([S("esri.layers.graphics.sources.GeoJSONSource")],Tu);const gme=B7();let Pe=class extends _7(h3(h7(p3(C7(y3(A7(f3(yw(lp))))))))){constructor(e){super(e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new Tu({layer:this}),this.spatialReference=me.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson",this.typeIdField=null,this.types=null}destroy(){var e;(e=this.source)==null||e.destroy()}load(e){return this.addResolvingPromise(this.source.load(e).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),h1(this.renderer,this.fieldsIndex),UA(this.timeInfo,this.fieldsIndex)})),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&this.geometryType==null}get parsedUrl(){return this.url?rt(this.url):null}set renderer(e){h1(e,this.fieldsIndex),this._set("renderer",e)}set url(e){if(!e)return void this._set("url",e);const t=rt(e);this._set("url",t.path),t.query&&(this.customParameters={...this.customParameters,...t.query})}async applyEdits(e,t){const i=await B(()=>import("./editingSupport.630f8b47.js"),[],import.meta.url);await this.load();const r=await i.applyEdits(this,this.source,e,t);return this.read({extent:this.source.sourceJSON.extent,timeInfo:this.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),r}on(e,t){return super.on(e,t)}createPopupTemplate(e){return U7(this,e)}createQuery(){const e=new Vi,t=this.get("capabilities.data");e.returnGeometry=!0,t&&t.supportsZ&&(e.returnZ=!0),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:i,timeExtent:r}=this;return e.timeExtent=i!=null&&r!=null?r.offset(-i.value,i.unit):r||null,e}getFieldDomain(e,t){let i,r=!1;const n=t&&t.feature,o=n&&n.attributes,s=this.typeIdField&&o&&o[this.typeIdField];return s!=null&&this.types&&(r=this.types.some(a=>a.id==s&&(i=a.domains&&a.domains[e],i&&i.type==="inherited"&&(i=this._getLayerDomain(e)),!0))),r||i||(i=this._getLayerDomain(e)),i}getField(e){return this.fieldsIndex.get(e)}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(Vi.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>this.source.queryObjectIds(Vi.from(e)||this.createQuery(),t))}queryFeatureCount(e,t){return this.load().then(()=>this.source.queryFeatureCount(Vi.from(e)||this.createQuery(),t))}queryExtent(e,t){return this.load().then(()=>this.source.queryExtent(Vi.from(e)||this.createQuery(),t))}async hasDataChanged(){try{const{dataChanged:e,updates:t}=await this.source.refresh(this.customParameters);return T(t)&&this.read(t,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}_getLayerDomain(e){if(!this.fields)return null;let t=null;return this.fields.some(i=>(i.name===e&&(t=i.domain),!!t)),t}};l([c({readOnly:!0,json:{read:!1,write:!1}})],Pe.prototype,"capabilities",null),l([c({type:String})],Pe.prototype,"copyright",void 0),l([c({readOnly:!0})],Pe.prototype,"createQueryVersion",null),l([c({readOnly:!0})],Pe.prototype,"defaultPopupTemplate",null),l([c({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Pe.prototype,"definitionExpression",void 0),l([c({type:String})],Pe.prototype,"displayField",void 0),l([c({type:Boolean})],Pe.prototype,"editingEnabled",void 0),l([c(g7)],Pe.prototype,"elevationInfo",void 0),l([c(F7)],Pe.prototype,"featureReduction",void 0),l([c({type:[Jy],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],Pe.prototype,"fields",void 0),l([c(gme.fieldsIndex)],Pe.prototype,"fieldsIndex",void 0),l([c({type:Oe,json:{name:"extent"}})],Pe.prototype,"fullExtent",void 0),l([c({type:["point","polygon","polyline","multipoint"],json:{read:{reader:OA.read}}})],Pe.prototype,"geometryType",void 0),l([c({type:Boolean})],Pe.prototype,"hasZ",void 0),l([c(v7)],Pe.prototype,"id",void 0),l([c({type:Boolean,readOnly:!0})],Pe.prototype,"isTable",null),l([c(vw)],Pe.prototype,"labelsVisible",void 0),l([c({type:[sm],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:_E},write:!0}})],Pe.prototype,"labelingInfo",void 0),l([c(m7)],Pe.prototype,"legendEnabled",void 0),l([c({type:["show","hide"]})],Pe.prototype,"listMode",void 0),l([c({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],Pe.prototype,"objectIdField",void 0),l([c(Hf)],Pe.prototype,"opacity",void 0),l([c({type:["GeoJSON"]})],Pe.prototype,"operationalLayerType",void 0),l([c({readOnly:!0})],Pe.prototype,"parsedUrl",null),l([c(gw)],Pe.prototype,"popupEnabled",void 0),l([c({type:Nl,json:{name:"popupInfo",write:!0}})],Pe.prototype,"popupTemplate",void 0),l([c({types:om,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:Q8}}}})],Pe.prototype,"renderer",null),l([c(f7)],Pe.prototype,"screenSizePerspectiveEnabled",void 0),l([c({readOnly:!0})],Pe.prototype,"source",void 0),l([c({type:me})],Pe.prototype,"spatialReference",void 0),l([c({type:[ww]})],Pe.prototype,"templates",void 0),l([c()],Pe.prototype,"title",void 0),l([c({json:{read:!1},readOnly:!0})],Pe.prototype,"type",void 0),l([c({type:String,readOnly:!0})],Pe.prototype,"typeIdField",void 0),l([c({type:[w3]})],Pe.prototype,"types",void 0),l([c(y7)],Pe.prototype,"url",null),Pe=l([S("esri.layers.GeoJSONLayer")],Pe);const KB=Pe,Wve=Object.freeze(Object.defineProperty({__proto__:null,default:KB},Symbol.toStringTag,{value:"Module"})),vme={type:Ls,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:ZB}}}}};function ZB(e,t,i,r){if(!e)return null;const{minScale:n,maxScale:o,minLOD:s,maxLOD:a}=t;if(s!=null&&a!=null)return r&&r.ignoreMinMaxLOD?Ls.fromJSON(e):Ls.fromJSON({...e,lods:e.lods.filter(({level:u})=>u!=null&&u>=s&&u<=a)});if(n!==0&&o!==0){const u=f=>Math.round(1e4*f)/1e4,d=n?u(n):1/0,h=o?u(o):-1/0;return Ls.fromJSON({...e,lods:e.lods.filter(f=>{const y=u(f.scale);return y<=d&&y>=h})})}return Ls.fromJSON(e)}class ep{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(t,i){if(this._allAvailability!=="unknown")return this._allAvailability;const r=(t-this.location.top)*this.location.width+(i-this.location.left),n=r%8,o=r>>3,s=this._tileAvailabilityBitSet;return o<0||o>s.length?"unknown":s[o]&1<<n?"available":"unavailable"}_updateFromData(t){const i=this.location.width,r=this.location.height;let n=!0,o=!0;const s=Math.ceil(i*r/8),a=new Uint8Array(s);let u=0;for(let d=0;d<t.length;d++){const h=d%8;t[d]?(o=!1,a[u]|=1<<h):n=!1,h===7&&++u}o?this._allAvailability="unavailable":n?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(t,i){const r=t.service.request||Be,{row:n,col:o,width:s,height:a}=t,u={query:{f:"json"}};return i=i?{...u,...i}:u,r(wme(t),i).then(d=>d.data).catch(d=>{if(d&&d.details&&d.details.httpStatus===422)return{location:{top:n,left:o,width:s,height:a},valid:!0,data:LV(s*a,0)};throw d}).then(d=>{if(d.location&&(d.location.top!==n||d.location.left!==o||d.location.width!==s||d.location.height!==a))throw new I("tilemap:location-mismatch","Tilemap response for different location than requested",{response:d,definition:{top:n,left:o,width:s,height:a}});return ep.fromJSON(d)})}static fromJSON(t){ep._validateJSON(t);const i=new ep;return i.location=Object.freeze(R(t.location)),i._updateFromData(t.data),Object.freeze(i)}static _validateJSON(t){if(!t||!t.location)throw new I("tilemap:missing-location","Location missing from tilemap response");if(t.valid===!1)throw new I("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new I("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new I("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new I("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function QP(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function wme(e){let t;if(e.service.type==="vector-tile")t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const i=e.service.query;return i&&(t=`${t}?${i}`),t}var Pu;const bme=W.getLogger("esri.layers.support.TilemapCache");let tn=Pu=class extends Ml(se){constructor(e){super(e),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*gy.MEGABYTES,this.request=Be,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new j8(this.cacheByteSize),this.own([q(()=>{const{layer:e}=this;return[e==null?void 0:e.parsedUrl,e==null?void 0:e.tileServers,e==null?void 0:e.apiKey,e==null?void 0:e.customParameters]},()=>this._initializeTilemapDefinition()),q(()=>{var e,t;return(t=(e=this.layer)==null?void 0:e.tileInfo)==null?void 0:t.lods},e=>this._initializeAvailableLevels(e),Ka)]),this._initializeTilemapDefinition()}castLevels(e){return e<=2?(bme.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,r){if(!this._availableLevels[e])return Promise.reject(new I("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,t,i,n);if(o)return Promise.resolve(o);const s=r&&r.signal;return r={...r,signal:null},new Promise((a,u)=>{hn(s,()=>u(wt()));const d=QP(n);let h=this._pendingTilemapRequests[d];if(!h){h=ep.fromDefinition(n,r).then(y=>(this._tilemapCache.put(d,y,y.byteSize),y));const f=()=>delete this._pendingTilemapRequests[d];this._pendingTilemapRequests[d]=h,h.then(f,f)}h.then(a,u)})}getAvailability(e,t,i){if(!this._availableLevels[e])return"unavailable";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):"unknown"}fetchAvailability(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch(n=>n).then(n=>{if(n instanceof ep){const o=n.getAvailability(t,i);if(o==="unavailable")throw new I("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i});return o}if(qi(n))throw n;return"unknown"}):Promise.reject(new I("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,r,n){r.level=e,r.row=t,r.col=i;const o=this.layer.tileInfo;o.updateTileInfo(r);const s=this.fetchAvailability(e,t,i,n).catch(a=>{if(qi(a))throw a;if(o.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw a});return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,n,s),s}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,n,o){if(!this._prefetchingEnabled)return;const s=`prefetch-${e}`;if(this.handles.has(s))return;const a=new AbortController;o.then(()=>a.abort(),()=>a.abort());let u=!1;const d={remove(){u||(u=!0,a.abort())}};if(this.handles.add(d,s),await Nj(10,a.signal).catch(()=>{}),u||(u=!0,this.handles.remove(s)),pn(a))return;const h={id:e,level:t,row:i,col:r},f={...n,signal:a.signal},y=this.layer.tileInfo;for(let m=0;Pu._prefetches.length<Pu._maxPrefetch&&y.upsampleTile(h);++m){const g=this.fetchAvailability(h.level,h.row,h.col,f);Pu._prefetches.push(g);const v=()=>{Pu._prefetches.removeUnordered(g)};g.then(v,v)}}_initializeTilemapDefinition(){var r;if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:uc({...e.query,...i,token:t!=null?t:(r=e.query)==null?void 0:r.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const n=QP(r);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(t=>this._availableLevels[t.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};tn._maxPrefetch=4,tn._prefetches=new hl({initialSize:Pu._maxPrefetch}),l([c({constructOnly:!0,type:Number})],tn.prototype,"levels",void 0),l([Fe("levels")],tn.prototype,"castLevels",null),l([c({readOnly:!0,type:Number})],tn.prototype,"size",null),l([c({constructOnly:!0,type:Number})],tn.prototype,"cacheByteSize",void 0),l([c({constructOnly:!0})],tn.prototype,"layer",void 0),l([c({constructOnly:!0})],tn.prototype,"request",void 0),tn=Pu=l([S("esri.layers.support.TilemapCache")],tn);const _me=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}readMaxScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(i,r){return r.capabilities&&r.capabilities.includes("Tilemap")?new tn({layer:this}):null}};return l([c({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),l([c()],t.prototype,"minScale",void 0),l([Y("service","minScale")],t.prototype,"readMinScale",null),l([c()],t.prototype,"maxScale",void 0),l([Y("service","maxScale")],t.prototype,"readMaxScale",null),l([c({type:me})],t.prototype,"spatialReference",void 0),l([c({readOnly:!0})],t.prototype,"supportsBlankTile",null),l([c(vme)],t.prototype,"tileInfo",void 0),l([c()],t.prototype,"tilemapCache",void 0),l([Y("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),l([c()],t.prototype,"version",void 0),t=l([S("esri.layers.mixins.ArcGISCachedService")],t),t};let _0=null;function Sme(e){if(_0)return _0;const t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return _0=new Promise(i=>{const r=new Image;r.onload=()=>{r.onload=r.onerror=null,i(r.width>0&&r.height>0)},r.onerror=()=>{r.onload=r.onerror=null,i(!1)},r.src="data:image/webp;base64,"+t[e]}),_0}const Tme=W.getLogger("esri.layers.support.SpriteSource"),Eme=1.15;class e${constructor(t,i,r,n){this.baseURL=t,this.devicePixelRatio=i,this.maxTextureSize=r,this._spriteImageFormat=n,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}get spriteNames(){const t=[];for(const i in this._spritesData)t.push(i);return t.sort(),t}getSpriteInfo(t){return this._spritesData[t]}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}_loadSprites(t){this._isRetina=this.devicePixelRatio>Eme;const i=rt(this.baseURL),r=i.query?"?"+uc(i.query):"",n=this._isRetina?"@2x":"",o=`${i.path}${n}.${this._spriteImageFormat}${r}`,s=`${i.path}${n}.json${r}`;return Promise.all([Be(s,t),Be(o,{responseType:"image",...t})]).then(([a,u])=>{const d=Object.keys(a.data);if(!d||d.length===0||d.length===1&&d[0]==="_ssl"||!u||!u.data)return this._spritesData=this.image=null,this.width=this.height=0,null;this._spritesData=a.data;const h=u.data,f=Math.max(this.maxTextureSize,4096);if(h.width>f||h.height>f){const _=`Sprite resource for style ${i.path} is bigger than the maximum allowed of ${f} pixels}`;throw Tme.error(_),new I("SpriteSource",_)}this.width=h.width,this.height=h.height;const y=document.createElement("canvas"),m=y.getContext("2d");y.width=h.width,y.height=h.height,m.drawImage(h,0,0,h.width,h.height);const g=m.getImageData(0,0,h.width,h.height),v=new Uint8Array(g.data);let w;for(let _=0;_<v.length;_+=4)w=v[_+3]/255,v[_]=v[_]*w,v[_+1]=v[_+1]*w,v[_+2]=v[_+2]*w;this.image=v})}}class Ame{constructor(t){this.url=t}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=Be(this.url).then(t=>t.data.index)),this._tileIndexPromise}async dataKey(t,i){const r=await this.fetchTileIndex();return bt(i),this._getIndexedDataKey(r,t)}_getIndexedDataKey(t,i){const r=[i];if(i.level<0||i.row<0||i.col<0||i.row>>i.level>0||i.col>>i.level>0)return null;let n=i;for(;n.level!==0;)n=new Ai(n.level-1,n.row>>1,n.col>>1,n.world),r.push(n);let o,s,a=t,u=r.pop();if(a===1)return u;for(;r.length;)if(o=r.pop(),s=(1&o.col)+((1&o.row)<<1),a){if(a[s]===0){u=null;break}if(a[s]===1){u=o;break}u=o,a=a[s]}return u}}class xme{constructor(t,i){this._tilemap=t,this._tileIndexUrl=i}async fetchTileIndex(t){return this._tileIndexPromise||(this._tileIndexPromise=Be(this._tileIndexUrl,{query:{...t==null?void 0:t.query}}).then(i=>i.data.index)),this._tileIndexPromise}dataKey(t,i){const{level:r,row:n,col:o}=t,s=new Ai(t);return this._tilemap.fetchAvailabilityUpsample(r,n,o,s,i).then(()=>(s.world=t.world,s)).catch(a=>{if(qi(a))throw a;return null})}}const S0=new Map;function Cme(e,t,i,r,n){return Ime(e.replace(/\{z\}/gi,t.toString()).replace(/\{y\}/gi,i.toString()).replace(/\{x\}/gi,r.toString()),n)}function Ime(e,t){const i=S0.get(e);if(i)return i.then(n=>R(n));const r=Be(e,{responseType:"array-buffer",...t}).then(({data:n})=>(S0.delete(e),n)).catch(n=>{throw S0.delete(e),n});return S0.set(e,r),r}class Mme{constructor(t,i,r){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.name=t,this.sourceUrl=i;const n=rt(this.sourceUrl),o=R(r),s=o.tiles;if(n)for(let y=0;y<s.length;y++){const m=rt(s[y]);m&&(zi(m.path)||(m.path=Go(n.path,m.path)),s[y]=Us(m.path,{...n.query,...m.query}))}this.tileServers=s;const a=r.capabilities&&r.capabilities.split(",").map(y=>y.toLowerCase().trim()),u=(r==null?void 0:r.exportTilesAllowed)===!0,d=(a==null?void 0:a.includes("tilemap"))===!0,h=u&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:u,supportsTileMap:d},exportTiles:u?{maxExportTilesCount:+h}:null},this.tileInfo=ZB(o.tileInfo,o,null,{ignoreMinMaxLOD:!0});const f=r.tileMap?Us(Go(n.path,r.tileMap),n.query):null;d?(this.type="vector-tile",this.tilemap=new xme(new tn({layer:{parsedUrl:n,tileInfo:this.tileInfo,type:"vector-tile",tileServers:this.tileServers}}),f)):f&&(this.tilemap=new Ame(f)),this.fullExtent=Oe.fromJSON(r.fullExtent)}destroy(){}async getRefKey(t,i){var r,n;return(n=(r=this.tilemap)==null?void 0:r.dataKey(t,i))!=null?n:t}requestTile(t,i,r,n){const o=this.tileServers[i%this.tileServers.length];return Cme(o,t,i,r,n)}isCompatibleWith(t){const i=this.tileInfo,r=t.tileInfo;if(!i.spatialReference.equals(r.spatialReference)||!i.origin.equals(r.origin)||Math.round(i.dpi)!==Math.round(r.dpi))return!1;const n=i.lods,o=r.lods,s=Math.min(n.length,o.length);for(let a=0;a<s;a++){const u=n[a],d=o[a];if(u.level!==d.level||Math.round(u.scale)!==Math.round(d.scale))return!1}return!0}}const m_=Ne.defaults&&Ne.defaults.io.corsEnabledServers;async function Nme(e,t){const i={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[r,n]=typeof e=="string"?[e,null]:[null,e.jsonUrl];await Qu(i,"esri",e,n,t);const o={layerDefinition:i.validatedSource,url:r,serviceUrl:i.sourceUrl,style:i.style,styleUrl:i.styleUrl,spriteUrl:i.style.sprite&&Tc(i.styleBase,i.style.sprite),spriteFormat:i.spriteFormat,glyphsUrl:i.style.glyphs&&Tc(i.styleBase,i.style.glyphs),sourceNameToSource:i.sourceNameToSource,primarySourceName:i.primarySourceName};return Sc(o.spriteUrl),Sc(o.glyphsUrl),o}function Sc(e){if(!e)return;const t=cn(e);m_&&!m_.includes(t)&&m_.push(t)}function Tc(...e){let t;for(let i=0;i<e.length;++i)fn(e[i])?t&&(t=t.split("://")[0]+":"+e[i].trim()):t=zi(e[i])?e[i]:Go(t,e[i]);return Nv(t)}async function Qu(e,t,i,r,n){let o,s,a;if(bt(n),typeof i=="string"){const d=Dr(i);Sc(d),a=await Be(d,{...n,responseType:"json",query:{f:"json",...n==null?void 0:n.query}}),a.ssl&&(o&&(o=o.replace(/^http:/i,"https:")),s&&(s=s.replace(/^http:/i,"https:"))),o=d,s=d}else a={data:i},o=i.jsonUrl||null,s=r;const u=a.data;if(JB(u))return e.styleUrl=o||null,Pme(e,u,s,n);if(Rme(u))return e.sourceUrl?t$(e,u,s,!1,t,n):(e.sourceUrl=o||null,t$(e,u,s,!0,t,n));throw new Error("You must specify the URL or the JSON for a service or for a style.")}function JB(e){return!!e.sources}function Rme(e){return!JB(e)}async function Pme(e,t,i,r){const n=i?C5(i):b5();e.styleBase=n,e.style=t,e.styleUrl&&Sc(e.styleUrl),t["sprite-format"]&&t["sprite-format"].toLowerCase()==="webp"&&(e.spriteFormat="webp");const o=[];if(t.sources&&t.sources.esri){const s=t.sources.esri;s.url?await Qu(e,"esri",Tc(n,s.url),void 0,r):o.push(Qu(e,"esri",s,n,r))}for(const s of Object.keys(t.sources))s!=="esri"&&t.sources[s].type==="vector"&&(t.sources[s].url?o.push(Qu(e,s,Tc(n,t.sources[s].url),void 0,r)):t.sources[s].tiles&&o.push(Qu(e,s,t.sources[s],n,r)));await Promise.all(o)}async function t$(e,t,i,r,n,o){const s=i?Nv(i)+"/":b5(),a=$me(t,s),u=new Mme(n,Us(s,o==null?void 0:o.query),a);if(!r&&e.primarySourceName in e.sourceNameToSource){const d=e.sourceNameToSource[e.primarySourceName];if(!d.isCompatibleWith(u))return;u.fullExtent!=null&&(d.fullExtent!=null?d.fullExtent.union(u.fullExtent):d.fullExtent=u.fullExtent.clone()),d.tileInfo.lods.length<u.tileInfo.lods.length&&(d.tileInfo=u.tileInfo)}if(r?(e.sourceBase=s,e.source=t,e.validatedSource=a,e.primarySourceName=n,e.sourceUrl&&Sc(e.sourceUrl)):Sc(s),e.sourceNameToSource[n]=u,!e.style){if(t.defaultStyles==null)throw new Error;return typeof t.defaultStyles=="string"?Qu(e,"",Tc(s,t.defaultStyles,"root.json"),void 0,o):Qu(e,"",t.defaultStyles,Tc(s,"root.json"),o)}}function $me(e,t){if(e.hasOwnProperty("tileInfo"))return e;const i={xmin:-20037507067161843e-9,ymin:-20037507067161843e-9,xmax:20037507067161843e-9,ymax:20037507067161843e-9,spatialReference:{wkid:102100}},r=512;let n=78271.51696400007,o=2958287637957775e-7;const s=[],a=e.hasOwnProperty("minzoom")?+e.minzoom:0,u=e.hasOwnProperty("maxzoom")?+e.maxzoom:22;for(let d=0;d<=u;d++)d>=a&&s.push({level:d,scale:o,resolution:n}),n/=2,o/=2;for(const d of e.tiles)Sc(Tc(t,d));return{capabilities:"TilesOnly",initialExtent:i,fullExtent:i,minScale:0,maxScale:0,tiles:e.tiles,tileInfo:{rows:r,cols:r,dpi:96,format:"pbf",origin:{x:-20037508342787e-6,y:20037508342787e-6},lods:s,spatialReference:{wkid:102100}}}}function Dme(e){return{origin:"portal-item",url:rt(e.itemUrl),portal:e.portal||Yt.getDefault(),portalItem:e,readResourcePaths:[]}}function qve(e){return{origin:"portal-item",messages:[],writtenProperties:[],url:e.itemUrl?rt(e.itemUrl):null,portal:e.portal||Yt.getDefault(),portalItem:e}}const Lme=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Ome={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function kme(e){const t=e==null?void 0:e.match(Lme);if(!t)return null;const[,i,r,n]=t;if(!i)return null;let o=null,s=null,a=null;const{devext:u,qaext:d,www:h}=Ome;if(r)if(o=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:s,portalHostname:a}=u);break;case"qa":({customBaseUrl:s,portalHostname:a}=d);break;default:return null}else({customBaseUrl:s,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:s,portalHostname:a}=u);break;case"qaext":({customBaseUrl:s,portalHostname:a}=d);break;case"www":({customBaseUrl:s,portalHostname:a}=h);break;default:return null}return{customBaseUrl:s,isPortal:!1,portalHostname:a,urlKey:o}}const T0=1e-6;function Fme(e,t){if(e===t)return!0;if(!e&&t!=null||e!=null&&!t||!e.spatialReference.equals(t.spatialReference)||e.dpi!==t.dpi)return!1;const i=e.origin,r=t.origin;if(Math.abs(i.x-r.x)>=T0||Math.abs(i.y-r.y)>=T0)return!1;let n,o;e.lods[0].scale>t.lods[0].scale?(n=e,o=t):(o=e,n=t);for(let s=n.lods[0].scale;s>=o.lods[o.lods.length-1].scale-T0;s/=2)if(Math.abs(s-o.lods[0].scale)<T0)return!0;return!1}function Bme(e,t){if(e===t)return e;if(!e&&t!=null)return t;if(e!=null&&!t)return e;const i=e.size[0],r=e.format,n=e.dpi,o={x:e.origin.x,y:e.origin.y},s=e.spatialReference.toJSON(),a=e.lods[0].scale>t.lods[0].scale?e.lods[0]:t.lods[0],u=e.lods[e.lods.length-1].scale<=t.lods[t.lods.length-1].scale?e.lods[e.lods.length-1]:t.lods[t.lods.length-1],d=a.scale,h=a.resolution,f=u.scale,y=[];let m=d,g=h,v=0;for(;m>f;)y.push({level:v,resolution:g,scale:m}),v++,m/=2,g/=2;return new Ls({size:[i,i],dpi:n,format:r||"pbf",origin:o,lods:y,spatialReference:s})}var tp,zE,i$,r$,n$,o$,s$,a$,l$,u$,c$,d$,p$,h$,f$,y$,m$,g$,v$,w$,b$,_$,S$,T$,E$,A$,x$,C$,I$,M$,N$,R$,P$,$$,D$,L$,O$,k$,F$,B$,U$,V$,j$,z$,H$,G$,W$,q$,Y$,K$,Z$,J$,X$,Q$,eD,tD,iD,rD,nD,oD,sD;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(tp||(tp={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(zE||(zE={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(i$||(i$={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(r$||(r$={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(n$||(n$={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(o$||(o$={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(s$||(s$={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(a$||(a$={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(l$||(l$={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(u$||(u$={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(c$||(c$={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(d$||(d$={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(p$||(p$={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(h$||(h$={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(f$||(f$={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(y$||(y$={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(m$||(m$={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(g$||(g$={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(v$||(v$={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(w$||(w$={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(b$||(b$={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(_$||(_$={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(S$||(S$={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(T$||(T$={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(E$||(E$={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(A$||(A$={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(x$||(x$={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(C$||(C$={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(I$||(I$={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(M$||(M$={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(N$||(N$={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(R$||(R$={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(P$||(P$={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}($$||($$={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(D$||(D$={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(L$||(L$={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(O$||(O$={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(k$||(k$={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(F$||(F$={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(B$||(B$={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(U$||(U$={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(V$||(V$={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(j$||(j$={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(z$||(z$={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(H$||(H$={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(G$||(G$={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(W$||(W$={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(q$||(q$={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(Y$||(Y$={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(K$||(K$={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(Z$||(Z$={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(J$||(J$={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(X$||(X$={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(Q$||(Q$={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(eD||(eD={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(tD||(tD={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(iD||(iD={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(rD||(rD={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(nD||(nD={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(oD||(oD={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(sD||(sD={}));var xt,$u,HE,ko,GE,sv,WE,Du,qE;(function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.FILL=1]="FILL",e[e.LINE=2]="LINE",e[e.SYMBOL=3]="SYMBOL",e[e.CIRCLE=4]="CIRCLE"})(xt||(xt={})),function(e){e[e.VISIBLE=0]="VISIBLE",e[e.NONE=1]="NONE"}($u||($u={})),function(e){e[e.POINT=0]="POINT",e[e.LINE=1]="LINE",e[e.LINE_CENTER=2]="LINE_CENTER"}(HE||(HE={})),function(e){e[e.MAP=0]="MAP",e[e.VIEWPORT=1]="VIEWPORT",e[e.AUTO=2]="AUTO"}(ko||(ko={})),function(e){e[e.AUTO=0]="AUTO",e[e.LEFT=1]="LEFT",e[e.CENTER=2]="CENTER",e[e.RIGHT=3]="RIGHT"}(GE||(GE={})),function(e){e[e.CENTER=0]="CENTER",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.TOP=3]="TOP",e[e.BOTTOM=4]="BOTTOM",e[e.TOP_LEFT=5]="TOP_LEFT",e[e.TOP_RIGHT=6]="TOP_RIGHT",e[e.BOTTOM_LEFT=7]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(sv||(sv={})),function(e){e[e.NONE=0]="NONE",e[e.UPPERCASE=1]="UPPERCASE",e[e.LOWERCASE=2]="LOWERCASE"}(WE||(WE={})),function(e){e[e.MAP=0]="MAP",e[e.VIEWPORT=1]="VIEWPORT"}(Du||(Du={})),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(qE||(qE={}));class Rt{}Rt.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:$u.VISIBLE}},Rt.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:$u.VISIBLE}},Rt.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:$u.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:tp.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:zE.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},Rt.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:$u.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:HE.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:sv.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:ko.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:sv.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:GE.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:ko.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:WE.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[qE.HORIZONTAL]}},Rt.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:$u.VISIBLE}},Rt.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},Rt.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:Du.MAP}},Rt.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:Du.MAP},"line-width":{type:"number",minimum:0,default:1}},Rt.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:Du.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:Du.MAP}},Rt.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},Rt.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:Du.MAP}};var aD,lD,uD,Ys,cD;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.FILL_VERTEX=1]="FILL_VERTEX",e[e.FILL_DD_VERTEX=2]="FILL_DD_VERTEX",e[e.FILL_INDEX=3]="FILL_INDEX",e[e.OUTLINE_VERTEX=4]="OUTLINE_VERTEX",e[e.OUTLINE_DD_VERTEX=5]="OUTLINE_DD_VERTEX",e[e.OUTLINE_INDEX=6]="OUTLINE_INDEX",e[e.LINE_VERTEX=7]="LINE_VERTEX",e[e.LINE_DD_VERTEX=8]="LINE_DD_VERTEX",e[e.LINE_INDEX=9]="LINE_INDEX",e[e.ICON_VERTEX=10]="ICON_VERTEX",e[e.ICON_DD_VERTEX=11]="ICON_DD_VERTEX",e[e.ICON_INDEX=12]="ICON_INDEX",e[e.TEXT_VERTEX=13]="TEXT_VERTEX",e[e.TEXT_DD_VERTEX=14]="TEXT_DD_VERTEX",e[e.TEXT_INDEX=15]="TEXT_INDEX",e[e.CIRCLE_VERTEX=16]="CIRCLE_VERTEX",e[e.CIRCLE_INDEX=17]="CIRCLE_INDEX"})(aD||(aD={})),function(e){e[e.FILL=1]="FILL",e[e.LINE=2]="LINE",e[e.SYMBOL=3]="SYMBOL",e[e.CIRCLE=4]="CIRCLE"}(lD||(lD={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.OPAQUE=1]="OPAQUE",e[e.TRANSLUCENT=2]="TRANSLUCENT",e[e.SYMBOLS=3]="SYMBOLS",e[e.HITTEST=4]="HITTEST"}(uD||(uD={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.FILL=1]="FILL",e[e.OUTLINE=2]="OUTLINE",e[e.LINE=3]="LINE",e[e.ICON=4]="ICON",e[e.CIRCLE=5]="CIRCLE",e[e.TEXT=6]="TEXT",e[e.TILEINFO=7]="TILEINFO"}(Ys||(Ys={})),function(e){e[e.PAINTER_CHANGED=0]="PAINTER_CHANGED",e[e.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",e[e.LAYER_CHANGED=2]="LAYER_CHANGED",e[e.LAYER_REMOVED=3]="LAYER_REMOVED",e[e.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(cD||(cD={}));class Ume{constructor(t){this._array=[],t<=0&&console.error("strideInBytes must be positive!"),this._stride=t}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(t,i){return 65535&t|i<<16}static i8888to32(t,i,r,n){return 255&t|(255&i)<<8|(255&r)<<16|n<<24}static i8816to32(t,i,r){return 255&t|(255&i)<<8|r<<16}}var oe,Lu;(function(e){e[e.R8_SIGNED=0]="R8_SIGNED",e[e.R8_UNSIGNED=1]="R8_UNSIGNED",e[e.R16_SIGNED=2]="R16_SIGNED",e[e.R16_UNSIGNED=3]="R16_UNSIGNED",e[e.R8G8_SIGNED=4]="R8G8_SIGNED",e[e.R8G8_UNSIGNED=5]="R8G8_UNSIGNED",e[e.R16G16_SIGNED=6]="R16G16_SIGNED",e[e.R16G16_UNSIGNED=7]="R16G16_UNSIGNED",e[e.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED",e[e.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED",e[e.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR",e[e.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY",e[e.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(oe||(oe={})),function(e){e[e.UNIFORM=0]="UNIFORM",e[e.DATA_DRIVEN=1]="DATA_DRIVEN",e[e.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN",e[e.UNUSED=3]="UNUSED"}(Lu||(Lu={}));var dD,pD,hD,fD,yD,mD,gD,Me,vD,wD,bD,_D,SD,TD,ED,AD,xD,CD,ID,MD,ND,RD;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(dD||(dD={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(pD||(pD={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(hD||(hD={})),function(e){e[e.ADD=32774]="ADD",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(fD||(fD={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"}(yD||(yD={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(mD||(mD={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(gD||(gD={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT"}(Me||(Me={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(vD||(vD={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(wD||(wD={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(bD||(bD={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(_D||(_D={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(SD||(SD={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(TD||(TD={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(ED||(ED={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(AD||(AD={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(xD||(xD={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(CD||(CD={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(ID||(ID={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(MD||(MD={})),function(e){e[e.TEXTURE=0]="TEXTURE",e[e.RENDER_BUFFER=1]="RENDER_BUFFER",e[e.CUBEMAP=2]="CUBEMAP"}(ND||(ND={})),function(e){e[e.NONE=0]="NONE",e[e.DEPTH_RENDER_BUFFER=1]="DEPTH_RENDER_BUFFER",e[e.STENCIL_RENDER_BUFFER=2]="STENCIL_RENDER_BUFFER",e[e.DEPTH_STENCIL_RENDER_BUFFER=3]="DEPTH_STENCIL_RENDER_BUFFER",e[e.DEPTH_STENCIL_TEXTURE=4]="DEPTH_STENCIL_TEXTURE"}(RD||(RD={}));const Yve=33984;var PD,$D;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.Sync=7]="Sync",e[e.COUNT=8]="COUNT"})(PD||(PD={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}($D||($D={}));const Kve=33306;var DD,LD,OD,kD,FD,BD,UD;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(DD||(DD={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(LD||(LD={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(OD||(OD={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(kD||(kD={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(FD||(FD={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(BD||(BD={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(UD||(UD={}));class ci{constructor(t,i,r,n,o,s=!1,a=0){this.name=t,this.count=i,this.type=r,this.offset=n,this.stride=o,this.normalized=s,this.divisor=a}}class so{constructor(t){this._locations=new Map,this._key=t}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return this._locations.size===0&&this._buildAttributesInfo(),this._locations}getLayoutInfo(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(t,i,r,n,o){const s=this.getUniforms();for(const a of s){const{name:u,type:d,getValue:h}=a,f=h(r,i,n,o);if(f!==null)switch(d){case"float":t.setUniform1f(u,f);break;case"vec2":t.setUniform2fv(u,f);break;case"vec4":t.setUniform4fv(u,f)}}}encodeAttributes(t,i,r,n){var h;const o=this.attributesInfo(),s=this.getEncodingInfos(),a=[];let u=0,d=0;for(const f of Object.keys(s)){const y=s[f],{type:m,precisionFactor:g,isLayout:v}=o[f],w=v?r.getLayoutProperty(f):r.getPaintProperty(f),_=(h=w.interpolator)==null?void 0:h.getInterpolationRange(i);let A=0;for(const M of y){const{offset:$,bufferElementsToAdd:N}=M;if(N>0){for(let V=0;V<N;V++)a.push(0);u+=d,d=M.bufferElementsToAdd}const D=n!=null?n:w.getValue(_?_[A]:i,t);switch(m){case oe.R8_SIGNED:case oe.R8_UNSIGNED:a[u]|=this._encodeByte(D*(g||1),8*$);break;case oe.R16_SIGNED:case oe.R16_UNSIGNED:a[u]|=this._encodeShort(D*(g||1),8*$);break;case oe.R8G8_SIGNED:case oe.R8G8_UNSIGNED:a[u]|=this._encodeByte(D*(g||1),8*$),a[u]|=this._encodeByte(D*(g||1),8*$+8);break;case oe.R16G16_SIGNED:case oe.R16G16_UNSIGNED:a[u]|=this._encodeShort(D*(g||1),8*$),a[u]|=this._encodeShort(D*(g||1),8*$+16);break;case oe.R8G8B8A8_SIGNED:case oe.R8G8B8A8_UNSIGNED:a[u]|=this._encodeByte(D*(g||1),8*$),a[u]|=this._encodeByte(D*(g||1),8*$+8),a[u]|=this._encodeByte(D*(g||1),8*$+16),a[u]|=this._encodeByte(D*(g||1),8*$+24);break;case oe.R8G8B8A8_COLOR:a[u]=this._encodeColor(D);break;case oe.R16G16B16A16_DASHARRAY:case oe.R16G16B16A16_PATTERN:this._encodePattern(u,a,D);break;default:throw new Error("Unsupported encoding type")}A++}}return a}getAtributeState(t){let i=0;const r=3+2*t;return i|=this._bit(r),i|=this._bit(r+1)<<1,i}_buildAttributesInfo(){const t=[],i={},r={};let n=-1;const o=this.attributesInfo(),s=this.attributes();let a=-1;for(const f of s){a++;const y=this.getAtributeState(a);if(y===Lu.UNIFORM||y===Lu.UNUSED)continue;const m=o[f],g=[];i[f]=g;const v=m.type;for(let w=0;w<y;w++){const{dataType:_,bytesPerElement:A,count:M,normalized:$}=so._encodingInfo[v],N=A*M,D=`${_}-${$===!0}`;let V=r[D],G=0;if(!V||V.count+M>4)n++,V={dataIndex:n,count:0,offset:0},M!==4&&(r[D]=V),t.push({location:-1,name:"a_data_"+n,count:M,type:_,normalized:$}),G=Math.ceil(Math.max(N/4,1));else{const Z=t[V.dataIndex];Z.count+=M,G=Math.ceil(Math.max(Z.count*A/4,1))-Math.ceil(Math.max(V.offset/4,1))}g.push({dataIndex:V.dataIndex,offset:V.offset,bufferElementsToAdd:G}),V.offset+=N,V.count+=M}}for(const f of t)switch(f.type){case Me.BYTE:case Me.UNSIGNED_BYTE:f.count=4;break;case Me.SHORT:case Me.UNSIGNED_SHORT:f.count+=f.count%2}this._buildVertexBufferLayout(t);let u=0;const d=this._layoutInfo.geometry;for(const f of d)this._locations.set(f.name,u++);const h=this._layoutInfo.opacity;if(h)for(const f of h)this._locations.set(f.name,u++);this._buildShaderInfo(t,i),this._propertyEncodingInfo=i}_buildVertexBufferLayout(t){const i={},r=this.geometryInfo();let n=r[0].stride;if(t.length===0)i.geometry=r;else{const o=[];let s=n;for(const a of t)n+=VD(a.type)*a.count;for(const a of r)o.push(new ci(a.name,a.count,a.type,a.offset,n,a.normalized));for(const a of t)o.push(new ci(a.name,a.count,a.type,s,n,a.normalized)),s+=VD(a.type)*a.count;i.geometry=o}this.opacityInfo()&&(i.opacity=this.opacityInfo()),this._layoutInfo=i,this._stride=n}_buildShaderInfo(t,i){let r=`
`,n=`
`;const o=[];for(const d of t)r+=`attribute ${this._getType(d.count)} ${d.name};
`;const s=this.attributes(),a=this.attributesInfo();let u=-1;for(const d of s){u++;const{name:h,type:f,precisionFactor:y,isLayout:m}=a[d],g=y&&y!==1?" * "+1/y:"",{bytesPerElement:v,count:w}=so._encodingInfo[f],_=A=>`a_data_${A.dataIndex}${Vme(w,A.offset,v)}`;switch(this.getAtributeState(u)){case Lu.UNIFORM:{const A=this._getType(w),M=`u_${h}`;o.push({name:M,type:A,getValue:($,N,D,V)=>{const G=m?$.getLayoutValue(d,N):$.getPaintValue(d,N);if(f===oe.R16G16B16A16_DASHARRAY){const Z=$.getDashKey(G,$.getLayoutValue("line-cap",N)),ee=V.getMosaicItemPosition(Z,!1);if(O(ee))return null;const{tl:re,br:ue}=ee;return[re[0],ue[1],ue[0],re[1]]}if(f===oe.R16G16B16A16_PATTERN){const Z=V.getMosaicItemPosition(G,!d.includes("line-"));if(O(Z))return null;const{tl:ee,br:re}=Z;return[ee[0],re[1],re[0],ee[1]]}if(f===oe.R8G8B8A8_COLOR){const Z=G[3];return[Z*G[0],Z*G[1],Z*G[2],Z]}return G}}),r+=`uniform ${A} ${M};
`,n+=`${A} ${h} = ${M};
`}break;case Lu.DATA_DRIVEN:{const A=_(i[d][0]);n+=`${this._getType(w)} ${h} = ${A}${g};
`}break;case Lu.INTERPOLATED_DATA_DRIVEN:{const A=`u_t_${h}`;o.push({name:A,type:"float",getValue:(N,D,V,G)=>(m?N.getLayoutProperty(d):N.getPaintProperty(d)).interpolator.interpolationUniformValue(V,D)}),r+=`uniform float ${A};
`;const M=_(i[d][0]),$=_(i[d][1]);n+=`${this._getType(w)} ${h} = mix(${M}${g}, ${$}${g}, ${A});
`}}}this._shaderHeader=r,this._shaderMain=n,this._uniforms=o}_bit(t){return(this._key&1<<t)>>t}_getType(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}_encodeColor(t){const i=255*t[3];return Ume.i8888to32(t[0]*i,t[1]*i,t[2]*i,i)}_encodePattern(t,i,r){if(!r||!r.rect)return;const n=2,o=r.rect,s=r.width,a=r.height;i[t]=this._encodeShort(o.x+n,0),i[t]|=this._encodeShort(o.y+n+a,16),i[t+1]=this._encodeShort(o.x+n+s,0),i[t+1]|=this._encodeShort(o.y+n,16)}_encodeByte(t,i){return(255&t)<<i}_encodeShort(t,i){return(65535&t)<<i}}so._encodingInfo={[oe.R8_SIGNED]:{dataType:Me.BYTE,bytesPerElement:1,count:1,normalized:!1},[oe.R8_UNSIGNED]:{dataType:Me.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[oe.R16_SIGNED]:{dataType:Me.SHORT,bytesPerElement:2,count:1,normalized:!1},[oe.R16_UNSIGNED]:{dataType:Me.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[oe.R8G8_SIGNED]:{dataType:Me.BYTE,bytesPerElement:1,count:2,normalized:!1},[oe.R8G8_UNSIGNED]:{dataType:Me.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[oe.R16G16_SIGNED]:{dataType:Me.SHORT,bytesPerElement:2,count:2,normalized:!1},[oe.R16G16_UNSIGNED]:{dataType:Me.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[oe.R8G8B8A8_SIGNED]:{dataType:Me.BYTE,bytesPerElement:1,count:4,normalized:!1},[oe.R8G8B8A8_UNSIGNED]:{dataType:Me.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[oe.R8G8B8A8_COLOR]:{dataType:Me.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[oe.R16G16B16A16_DASHARRAY]:{dataType:Me.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[oe.R16G16B16A16_PATTERN]:{dataType:Me.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const VD=e=>{switch(e){case Me.FLOAT:case Me.INT:case Me.UNSIGNED_INT:return 4;case Me.SHORT:case Me.UNSIGNED_SHORT:return 2;case Me.BYTE:case Me.UNSIGNED_BYTE:return 1}},Vme=(e,t,i)=>{const r=t/i;if(e===1)switch(r){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(e===2)switch(r){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(e===3)switch(r){case 0:return".xyz";case 1:return".yzw"}return""};class Fo extends so{constructor(t){super(t)}geometryInfo(){return Fo.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return Fo.ATTRIBUTES}attributesInfo(){return Fo.ATTRIBUTES_INFO}}Fo.ATTRIBUTES=[],Fo.GEOMETRY_LAYOUT=[new ci("a_pos",2,Me.BYTE,0,2)],Fo.ATTRIBUTES_INFO={};class Bo extends so{constructor(t){super(t)}geometryInfo(){return Bo.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return Bo.ATTRIBUTES}attributesInfo(){return Bo.ATTRIBUTES_INFO}}Bo.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],Bo.GEOMETRY_LAYOUT=[new ci("a_pos",2,Me.SHORT,0,4)],Bo.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:oe.R8_UNSIGNED},"circle-color":{name:"color",type:oe.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:oe.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:oe.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:oe.R8_UNSIGNED,precisionFactor:32}};class Uo extends so{constructor(t){super(t)}geometryInfo(){return Uo.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return Uo.ATTRIBUTES}attributesInfo(){return Uo.ATTRIBUTES_INFO}}Uo.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],Uo.GEOMETRY_LAYOUT=[new ci("a_pos",2,Me.SHORT,0,4)],Uo.ATTRIBUTES_INFO={"fill-color":{name:"color",type:oe.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:oe.R16G16B16A16_PATTERN,isOptional:!0}};class Ci extends so{constructor(t,i){super(t),this.usefillColor=i}geometryInfo(){return Ci.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this.usefillColor?Ci.ATTRIBUTES_FILL:Ci.ATTRIBUTES_OUTLINE}attributesInfo(){return this.usefillColor?Ci.ATTRIBUTES_INFO_FILL:Ci.ATTRIBUTES_INFO_OUTLINE}}Ci.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],Ci.ATTRIBUTES_FILL=["fill-color","fill-opacity"],Ci.GEOMETRY_LAYOUT=[new ci("a_pos",2,Me.SHORT,0,8),new ci("a_offset",2,Me.BYTE,4,8),new ci("a_xnormal",2,Me.BYTE,6,8)],Ci.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:oe.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100}},Ci.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:oe.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100}};class Vo extends so{constructor(t){super(t)}geometryInfo(){return Vo.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return Vo.ATTRIBUTES}attributesInfo(){return Vo.ATTRIBUTES_INFO}}Vo.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],Vo.GEOMETRY_LAYOUT=[new ci("a_pos",2,Me.SHORT,0,16),new ci("a_extrude_offset",4,Me.BYTE,4,16),new ci("a_dir_normal",4,Me.BYTE,8,16),new ci("a_accumulatedDistance",2,Me.UNSIGNED_SHORT,12,16)],Vo.ATTRIBUTES_INFO={"line-width":{name:"width",type:oe.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:oe.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:oe.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:oe.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:oe.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:oe.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:oe.R16G16B16A16_DASHARRAY,isOptional:!0}};const XB=[new ci("a_pos",2,Me.SHORT,0,16),new ci("a_vertexOffset",2,Me.SHORT,4,16),new ci("a_texAngleRange",4,Me.UNSIGNED_BYTE,8,16),new ci("a_levelInfo",4,Me.UNSIGNED_BYTE,12,16)],QB=[new ci("a_opacityInfo",1,Me.UNSIGNED_BYTE,0,1)];class _l extends so{constructor(t){super(t)}geometryInfo(){return XB}opacityInfo(){return QB}attributes(){return _l.ATTRIBUTES}attributesInfo(){return _l.ATTRIBUTES_INFO}}_l.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],_l.ATTRIBUTES_INFO={"icon-color":{name:"color",type:oe.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:oe.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:oe.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:oe.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:oe.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class Sl extends so{constructor(t){super(t)}geometryInfo(){return XB}opacityInfo(){return QB}attributes(){return Sl.ATTRIBUTES}attributesInfo(){return Sl.ATTRIBUTES_INFO}}Sl.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],Sl.ATTRIBUTES_INFO={"text-color":{name:"color",type:oe.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:oe.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:oe.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:oe.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:oe.R8_UNSIGNED,isLayout:!0}};const Zve=Number.POSITIVE_INFINITY,j3=Math.PI,Jve=2*j3,jme=128/j3,Xve=j3/180,zme=1/Math.LN2;function Hme(e,t){return(e%=t)>=0?e:e+t}function Qve(e){return Hme(e*jme,256)}function ewe(e){return Math.log(e)*zme}function Oi(e,t,i){return e*(1-i)+t*i}const eU={kind:"null"},vt={kind:"number"},Fr={kind:"string"},fi={kind:"boolean"},Ks={kind:"color"},xw={kind:"object"},Hs={kind:"value"};function cm(e,t){return{kind:"array",itemType:e,n:t}}const Gme=[eU,vt,Fr,fi,Ks,xw,cm(Hs)];function Sp(e){if(e.kind==="array"){const t=Sp(e.itemType);return typeof e.n=="number"?`array<${t}, ${e.n}>`:e.itemType.kind==="value"?"array":`array<${t}>`}return e.kind}function Cw(e){if(e===null)return eU;if(typeof e=="string")return Fr;if(typeof e=="boolean")return fi;if(typeof e=="number")return vt;if(e instanceof ie)return Ks;if(Array.isArray(e)){let t;for(const i of e){const r=Cw(i);if(t){if(t!==r){t=Hs;break}}else t=r}return cm(t||Hs,e.length)}return typeof e=="object"?xw:Hs}function YE(e,t){if(t.kind==="array")return e.kind==="array"&&(e.n===0&&e.itemType.kind==="value"||YE(e.itemType,t.itemType))&&(typeof t.n!="number"||t.n===e.n);if(t.kind==="value"){for(const i of Gme)if(YE(e,i))return!0}return t.kind===e.kind}function KE(e){if(e===null)return"";const t=typeof e;return t==="string"?e:t==="number"||t==="boolean"?String(e):e instanceof ie?e.toString():JSON.stringify(e)}class Ug{constructor(t,i){this.x=t,this.y=i}clone(){return new Ug(this.x,this.y)}equals(t,i){return t===this.x&&i===this.y}isEqual(t){return t.x===this.x&&t.y===this.y}setCoords(t,i){this.x=t,this.y=i}normalize(){const t=this.x,i=this.y,r=Math.sqrt(t*t+i*i);this.x/=r,this.y/=r}rightPerpendicular(){const t=this.x;this.x=this.y,this.y=-t}move(t,i){this.x+=t,this.y+=i}assign(t){this.x=t.x,this.y=t.y}assignAdd(t,i){this.x=t.x+i.x,this.y=t.y+i.y}assignSub(t,i){this.x=t.x-i.x,this.y=t.y-i.y}rotate(t,i){const r=this.x,n=this.y;this.x=r*t-n*i,this.y=r*i+n*t}scale(t){this.x*=t,this.y*=t}length(){const t=this.x,i=this.y;return Math.sqrt(t*t+i*i)}static distance(t,i){const r=i.x-t.x,n=i.y-t.y;return Math.sqrt(r*r+n*n)}static add(t,i){return new Ug(t.x+i.x,t.y+i.y)}static sub(t,i){return new Ug(t.x-i.x,t.y-i.y)}}var Zf;(function(e){e[e.Unknown=0]="Unknown",e[e.Point=1]="Point",e[e.LineString=2]="LineString",e[e.Polygon=3]="Polygon"})(Zf||(Zf={}));class Wme{constructor(t){this.parent=t,this.vars={}}add(t,i){this.vars[t]=i}get(t){return this.vars[t]?this.vars[t]:this.parent?this.parent.get(t):null}}class z3{constructor(){this.type=Hs}static parse(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new z3}evaluate(t,i){return t==null?void 0:t.id}}class H3{constructor(){this.type=Fr}static parse(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new H3}evaluate(t,i){if(!t)return null;switch(t.type){case Zf.Point:return"Point";case Zf.LineString:return"LineString";case Zf.Polygon:return"Polygon";default:return null}}}class G3{constructor(){this.type=xw}static parse(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new G3}evaluate(t,i){return t==null?void 0:t.values}}class Iw{constructor(){this.type=vt}static parse(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new Iw}evaluate(t,i){return i}}class yr{constructor(t,i,r){this.lhs=t,this.rhs=i,this.compare=r,this.type=fi}static parse(t,i,r){if(t.length!==3&&t.length!==4)throw new Error(`"${t[0]}" expects 2 or 3 arguments`);if(t.length===4)throw new Error(`"${t[0]}" collator not supported`);return new yr(_e(t[1],i),_e(t[2],i),r)}evaluate(t,i){return this.compare(this.lhs.evaluate(t,i),this.rhs.evaluate(t,i))}}class qme extends yr{static parse(t,i){return yr.parse(t,i,(r,n)=>r===n)}}class Yme extends yr{static parse(t,i){return yr.parse(t,i,(r,n)=>r!==n)}}class Kme extends yr{static parse(t,i){return yr.parse(t,i,(r,n)=>r<n)}}class Zme extends yr{static parse(t,i){return yr.parse(t,i,(r,n)=>r<=n)}}class Jme extends yr{static parse(t,i){return yr.parse(t,i,(r,n)=>r>n)}}class Xme extends yr{static parse(t,i){return yr.parse(t,i,(r,n)=>r>=n)}}class W3{constructor(t){this.arg=t,this.type=fi}static parse(t,i){if(t.length!==2)throw new Error('"!" expects 1 argument');return new W3(_e(t[1],i))}evaluate(t,i){return!this.arg.evaluate(t,i)}}class q3{constructor(t){this.args=t,this.type=fi}static parse(t,i){const r=[];for(let n=1;n<t.length;n++)r.push(_e(t[n],i));return new q3(r)}evaluate(t,i){for(const r of this.args)if(!r.evaluate(t,i))return!1;return!0}}class Y3{constructor(t){this.args=t,this.type=fi}static parse(t,i){const r=[];for(let n=1;n<t.length;n++)r.push(_e(t[n],i));return new Y3(r)}evaluate(t,i){for(const r of this.args)if(r.evaluate(t,i))return!0;return!1}}class K3{constructor(t){this.args=t,this.type=fi}static parse(t,i){const r=[];for(let n=1;n<t.length;n++)r.push(_e(t[n],i));return new K3(r)}evaluate(t,i){for(const r of this.args)if(r.evaluate(t,i))return!1;return!0}}class Z3{constructor(t,i,r){this.type=t,this.args=i,this.fallback=r}static parse(t,i,r){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');let n;const o=[];for(let a=1;a<t.length-1;a+=2){const u=_e(t[a],i),d=_e(t[a+1],i,r);n||(n=d.type),o.push({condition:u,output:d})}const s=_e(t[t.length-1],i,r);return n||(n=s.type),new Z3(n,o,s)}evaluate(t,i){for(const r of this.args)if(r.condition.evaluate(t,i))return r.output.evaluate(t,i);return this.fallback.evaluate(t,i)}}class J3{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');let r;const n=[];for(let o=1;o<t.length;o++){const s=_e(t[o],i);r||(r=s.type),n.push(s)}return new J3(r,n)}evaluate(t,i){for(const r of this.args){const n=r.evaluate(t,i);if(n!==null)return n}return null}}class X3{constructor(t,i,r,n,o){this.type=t,this.input=i,this.labels=r,this.outputs=n,this.fallback=o}static parse(t,i){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');let r;const n=_e(t[1],i),o=[],s={};let a;for(let u=2;u<t.length-1;u+=2){let d=t[u];Array.isArray(d)||(d=[d]);for(const f of d){const y=typeof f;if(y!=="string"&&y!=="number")throw new Error('"match" requires string or number literal as labels');if(a){if(y!==a)throw new Error('"match" requires labels to have the same type')}else a=y;s[f]=o.length}const h=_e(t[u+1],i);r||(r=h.type),o.push(h)}return new X3(r,n,s,o,_e(t[t.length-1],i))}evaluate(t,i){const r=this.input.evaluate(t,i);return(this.outputs[this.labels[r]]||this.fallback).evaluate(t,i)}}class Jn{constructor(t,i,r,n,o){this.operator=t,this.type=i,this.interpolation=r,this.input=n,this.stops=o}static parse(t,i,r){const n=t[0];if(t.length<5)throw new Error(`"${n}" expects at least 4 arguments`);const o=t[1];if(!Array.isArray(o)||o.length===0)throw new Error(`"${o}" is not a valid interpolation`);switch(o[0]){case"linear":if(o.length!==1)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(o.length!==2||typeof o[1]!="number")throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(o.length!==5)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(let d=1;d<5;d++){const h=o[d];if(typeof h!="number"||h<0||h>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error(`"${t[0]}" unknown interpolation type "${o[0]}"`)}if(t.length%2!=1)throw new Error(`"${n}" expects an even number of arguments`);const s=_e(t[2],i,vt);let a;n==="interpolate-hcl"||n==="interpolate-lab"?a=Ks:r&&r.kind!=="value"&&(a=r);const u=[];for(let d=3;d<t.length;d+=2){const h=t[d];if(typeof h!="number")throw new Error(`"${n}" requires stop inputs as literal numbers`);if(u.length&&u[u.length-1][0]>=h)throw new Error(`"${n}" requires strictly ascending stop inputs`);const f=_e(t[d+1],i,a);a||(a=f.type),u.push([h,f])}if(a&&a!==Ks&&a!==vt&&(a.kind!=="array"||a.itemType!==vt))throw new Error(`"${n}" cannot interpolate type ${Sp(a)}`);return new Jn(n,a,o,s,u)}evaluate(t,i){const r=this.stops;if(r.length===1)return r[0][1].evaluate(t,i);const n=this.input.evaluate(t,i);if(n<=r[0][0])return r[0][1].evaluate(t,i);if(n>=r[r.length-1][0])return r[r.length-1][1].evaluate(t,i);let o=0;for(;++o<r.length&&!(n<r[o][0]););const s=r[o-1][0],a=r[o][0],u=Jn.interpolationRatio(this.interpolation,n,s,a),d=r[o-1][1].evaluate(t,i),h=r[o][1].evaluate(t,i);if(this.operator==="interpolate"){if(this.type.kind==="array"&&Array.isArray(d)&&Array.isArray(h))return d.map((f,y)=>Oi(f,h[y],u));if(this.type.kind==="color"&&d instanceof ie&&h instanceof ie){const f=new ie(d),y=new ie(h);return new ie([Oi(f.r,y.r,u),Oi(f.g,y.g,u),Oi(f.b,y.b,u),Oi(f.a,y.a,u)])}if(this.type.kind==="number"&&typeof d=="number"&&typeof h=="number")return Oi(d,h,u);throw new Error(`"${this.operator}" cannot interpolate type ${Sp(this.type)}`)}if(this.operator==="interpolate-hcl"){const f=zR(d),y=zR(h),m=y.h-f.h,g=Cy({h:f.h+u*(m>180||m<-180?m-360*Math.round(m/360):m),c:Oi(f.c,y.c,u),l:Oi(f.l,y.l,u)});return new ie({a:Oi(d.a,h.a,u),...g})}if(this.operator==="interpolate-lab"){const f=jR(d),y=jR(h),m=Cy({l:Oi(f.l,y.l,u),a:Oi(f.a,y.a,u),b:Oi(f.b,y.b,u)});return new ie({a:Oi(d.a,h.a,u),...m})}throw new Error(`Unexpected operator "${this.operator}"`)}interpolationUniformValue(t,i){const r=this.stops;if(r.length===1||t>=r[r.length-1][0])return 0;let n=0;for(;++n<r.length&&!(t<r[n][0]););const o=r[n-1][0],s=r[n][0];return Jn.interpolationRatio(this.interpolation,i,o,s)}getInterpolationRange(t){const i=this.stops;if(i.length===1){const o=i[0][0];return[o,o]}const r=i[i.length-1][0];if(t>=r)return[r,r];let n=0;for(;++n<i.length&&!(t<i[n][0]););return[i[n-1][0],i[n][0]]}static interpolationRatio(t,i,r,n){let o=0;return t[0]==="linear"?o=Jn._exponentialInterpolationRatio(i,1,r,n):t[0]==="exponential"?o=Jn._exponentialInterpolationRatio(i,t[1],r,n):t[0]==="cubic-bezier"&&(o=nl(t[1],t[2],t[3],t[4])(Jn._exponentialInterpolationRatio(i,1,r,n),1e-5)),o<0?o=0:o>1&&(o=1),o}static _exponentialInterpolationRatio(t,i,r,n){const o=n-r;if(o===0)return 0;const s=t-r;return i===1?s/o:(i**s-1)/(i**o-1)}}class Q3{constructor(t,i,r){this.type=t,this.input=i,this.stops=r}static parse(t,i){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');const r=_e(t[1],i,vt);let n;const o=[];o.push([-1/0,_e(t[2],i)]);for(let s=3;s<t.length;s+=2){const a=t[s];if(typeof a!="number")throw new Error('"step" requires stop inputs as literal numbers');if(o.length&&o[o.length-1][0]>=a)throw new Error('"step" requires strictly ascending stop inputs');const u=_e(t[s+1],i);n||(n=u.type),o.push([a,u])}return new Q3(n,r,o)}evaluate(t,i){const r=this.stops;if(r.length===1)return r[0][1].evaluate(t,i);const n=this.input.evaluate(t,i);let o=0;for(;++o<r.length&&!(n<r[o][0]););return this.stops[o-1][1].evaluate(t,i)}}class eC{constructor(t,i){this.type=t,this.output=i}static parse(t,i,r){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');const n=new Wme(i);for(let s=1;s<t.length-1;s+=2){const a=t[s];if(typeof a!="string")throw new Error(`"let" requires a string to define variable names - found ${a}`);n.add(a,_e(t[s+1],i))}const o=_e(t[t.length-1],n,r);return new eC(o.type,o)}evaluate(t,i){return this.output.evaluate(t,i)}}class tC{constructor(t,i){this.type=t,this.output=i}static parse(t,i,r){if(t.length!==2||typeof t[1]!="string")throw new Error('"var" requires just one literal string argument');const n=i.get(t[1]);if(!n)throw new Error(`${t[1]} must be defined before being used in a "var" expression`);return new tC(r||Hs,n)}evaluate(t,i){return this.output.evaluate(t,i)}}class iC{constructor(t,i,r){this.type=t,this.index=i,this.array=r}static parse(t,i){if(t.length!==3)throw new Error('"at" expects 2 arguments');const r=_e(t[1],i,vt),n=_e(t[2],i);return new iC(n.type.itemType,r,n)}evaluate(t,i){const r=this.index.evaluate(t,i),n=this.array.evaluate(t,i);if(r<0||r>=n.length)throw new Error('"at" index out of bounds');if(r!==Math.floor(r))throw new Error('"at" index must be an integer');return n[r]}}class av{constructor(t,i){this.key=t,this.obj=i,this.type=Hs}static parse(t,i){let r,n;switch(t.length){case 2:return r=_e(t[1],i),new av(r);case 3:return r=_e(t[1],i),n=_e(t[2],i),new av(r,n);default:throw new Error('"get" expects 1 or 2 arguments')}}evaluate(t,i){const r=this.key.evaluate(t,i);return this.obj?this.obj.evaluate(t,i)[r]:t==null?void 0:t.values[r]}}class lv{constructor(t,i){this.key=t,this.obj=i,this.type=fi}static parse(t,i){let r,n;switch(t.length){case 2:return r=_e(t[1],i),new lv(r);case 3:return r=_e(t[1],i),n=_e(t[2],i),new lv(r,n);default:throw new Error('"has" expects 1 or 2 arguments')}}evaluate(t,i){const r=this.key.evaluate(t,i);return this.obj?r in this.obj.evaluate(t,i):!!(t!=null&&t.values[r])}}class rC{constructor(t,i){this.key=t,this.vals=i,this.type=fi}static parse(t,i){if(t.length!==3)throw new Error('"in" expects 2 arguments');return new rC(_e(t[1],i),_e(t[2],i))}evaluate(t,i){const r=this.key.evaluate(t,i);return this.vals.evaluate(t,i).includes(r)}}class uv{constructor(t,i,r){this.item=t,this.array=i,this.from=r,this.type=vt}static parse(t,i){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');const r=_e(t[1],i),n=_e(t[2],i);if(t.length===4){const o=_e(t[3],i,vt);return new uv(r,n,o)}return new uv(r,n)}evaluate(t,i){const r=this.item.evaluate(t,i),n=this.array.evaluate(t,i);if(this.from){const o=this.from.evaluate(t,i);if(o!==Math.floor(o))throw new Error('"index-of" index must be an integer');return n.indexOf(r,o)}return n.indexOf(r)}}class nC{constructor(t){this.arg=t,this.type=vt}static parse(t,i){if(t.length!==2)throw new Error('"length" expects 2 arguments');const r=_e(t[1],i);return new nC(r)}evaluate(t,i){const r=this.arg.evaluate(t,i);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Error('"length" expects string or array')}}class cv{constructor(t,i,r,n){this.type=t,this.array=i,this.from=r,this.to=n}static parse(t,i){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');const r=_e(t[1],i),n=_e(t[2],i,vt);if(n.type!==vt)throw new Error('"slice" index must return a number');if(t.length===4){const o=_e(t[3],i,vt);if(o.type!==vt)throw new Error('"slice" index must return a number');return new cv(r.type,r,n,o)}return new cv(r.type,r,n)}evaluate(t,i){const r=this.array.evaluate(t,i);if(!Array.isArray(r)&&typeof r!="string")throw new Error('"slice" input must be an array or a string');const n=this.from.evaluate(t,i);if(n<0||n>=r.length)throw new Error('"slice" index out of bounds');if(n!==Math.floor(n))throw new Error('"slice" index must be an integer');if(this.to){const o=this.to.evaluate(t,i);if(o<0||o>=r.length)throw new Error('"slice" index out of bounds');if(o!==Math.floor(o))throw new Error('"slice" index must be an integer');return r.slice(n,o)}return r.slice(n)}}class oC{constructor(){this.type=fi}static parse(t){if(t.length!==1)throw new Error('"has-id" expects no arguments');return new oC}evaluate(t,i){return t&&t.id!==void 0}}class Wi{constructor(t,i){this.args=t,this.calculate=i,this.type=vt}static parse(t,i,r){const n=t.slice(1).map(o=>_e(o,i));return new Wi(n,r)}evaluate(t,i){let r;return this.args&&(r=this.args.map(n=>n.evaluate(t,i))),this.calculate(r)}}class Qme extends Wi{static parse(t,i){switch(t.length){case 2:return Wi.parse(t,i,r=>-r[0]);case 3:return Wi.parse(t,i,r=>r[0]-r[1]);default:throw new Error('"-" expects 1 or 2 arguments')}}}class e0e extends Wi{static parse(t,i){return Wi.parse(t,i,r=>{let n=1;for(const o of r)n*=o;return n})}}class t0e extends Wi{static parse(t,i){if(t.length===3)return Wi.parse(t,i,r=>r[0]/r[1]);throw new Error('"/" expects 2 arguments')}}class i0e extends Wi{static parse(t,i){if(t.length===3)return Wi.parse(t,i,r=>r[0]%r[1]);throw new Error('"%" expects 2 arguments')}}class r0e extends Wi{static parse(t,i){if(t.length===3)return Wi.parse(t,i,r=>r[0]**r[1]);throw new Error('"^" expects 1 or 2 arguments')}}class n0e extends Wi{static parse(t,i){return Wi.parse(t,i,r=>{let n=0;for(const o of r)n+=o;return n})}}class mt{constructor(t,i){this.args=t,this.calculate=i,this.type=vt}static parse(t,i){const r=t.slice(1).map(n=>_e(n,i));return new mt(r,mt.ops[t[0]])}evaluate(t,i){let r;return this.args&&(r=this.args.map(n=>n.evaluate(t,i))),this.calculate(r)}}mt.ops={abs:e=>Math.abs(e[0]),acos:e=>Math.acos(e[0]),asin:e=>Math.asin(e[0]),atan:e=>Math.atan(e[0]),ceil:e=>Math.ceil(e[0]),cos:e=>Math.cos(e[0]),e:()=>Math.E,floor:e=>Math.floor(e[0]),ln:e=>Math.log(e[0]),ln2:()=>Math.LN2,log10:e=>Math.log(e[0])/Math.LN10,log2:e=>Math.log(e[0])/Math.LN2,max:e=>Math.max(...e),min:e=>Math.min(...e),pi:()=>Math.PI,round:e=>Math.round(e[0]),sin:e=>Math.sin(e[0]),sqrt:e=>Math.sqrt(e[0]),tan:e=>Math.tan(e[0])};class sC{constructor(t){this.args=t,this.type=Fr}static parse(t,i){return new sC(t.slice(1).map(r=>_e(r,i)))}evaluate(t,i){return this.args.map(r=>r.evaluate(t,i)).join("")}}class Tp{constructor(t,i){this.arg=t,this.calculate=i,this.type=Fr}static parse(t,i){if(t.length!==2)throw new Error(`${t[0]} expects 1 argument`);const r=_e(t[1],i);return new Tp(r,Tp.ops[t[0]])}evaluate(t,i){return this.calculate(this.arg.evaluate(t,i))}}Tp.ops={downcase:e=>e.toLowerCase(),upcase:e=>e.toUpperCase()};class aC{constructor(t){this.args=t,this.type=Ks}static parse(t,i){if(t.length!==4)throw new Error('"rgb" expects 3 arguments');const r=t.slice(1).map(n=>_e(n,i));return new aC(r)}evaluate(t,i){const r=this._validate(this.args[0].evaluate(t,i)),n=this._validate(this.args[1].evaluate(t,i)),o=this._validate(this.args[2].evaluate(t,i));return new ie({r,g:n,b:o})}_validate(t){if(typeof t!="number"||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}}class lC{constructor(t){this.args=t,this.type=Ks}static parse(t,i){if(t.length!==5)throw new Error('"rgba" expects 4 arguments');const r=t.slice(1).map(n=>_e(n,i));return new lC(r)}evaluate(t,i){const r=this._validate(this.args[0].evaluate(t,i)),n=this._validate(this.args[1].evaluate(t,i)),o=this._validate(this.args[2].evaluate(t,i)),s=this._validateAlpha(this.args[3].evaluate(t,i));return new ie({r,g:n,b:o,a:s})}_validate(t){if(typeof t!="number"||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}_validateAlpha(t){if(typeof t!="number"||t<0||t>1)throw new Error(`${t}: invalid alpha color component`);return t}}class uC{constructor(t){this.color=t,this.type=cm(vt,4)}static parse(t,i){if(t.length!==2)throw new Error('"to-rgba" expects 1 argument');const r=_e(t[1],i);return new uC(r)}evaluate(t,i){return new ie(this.color.evaluate(t,i)).toRgba()}}class Ou{constructor(t,i){this.type=t,this.args=i}static parse(t,i){const r=t[0];if(t.length<2)throw new Error(`${r} expects at least one argument`);let n,o=1;if(r==="array"){if(t.length>2){switch(t[1]){case"string":n=Fr;break;case"number":n=vt;break;case"boolean":n=fi;break;default:throw new Error('"array" type argument must be string, number or boolean')}o++}else n=Hs;let a;if(t.length>3){if(a=t[2],a!==null&&(typeof a!="number"||a<0||a!==Math.floor(a)))throw new Error('"array" length argument must be a positive integer literal');o++}n=cm(n,a)}else switch(r){case"string":n=Fr;break;case"number":n=vt;break;case"boolean":n=fi;break;case"object":n=xw}const s=[];for(;o<t.length;o++){const a=_e(t[o],i);s.push(a)}return new Ou(n,s)}evaluate(t,i){let r;for(const n of this.args){const o=n.evaluate(t,i);if(r=Cw(o),YE(r,this.type))return o}throw new Error(`Expected ${Sp(this.type)} but got ${Sp(r)}`)}}class un{constructor(t,i){this.type=t,this.args=i}static parse(t,i){const r=t[0],n=un.types[r];if(n===fi||n===Fr){if(t.length!==2)throw new Error(`${r} expects one argument`)}else if(t.length<2)throw new Error(`${r} expects at least one argument`);const o=[];for(let s=1;s<t.length;s++){const a=_e(t[s],i);o.push(a)}return new un(n,o)}evaluate(t,i){if(this.type===fi)return Boolean(this.args[0].evaluate(t,i));if(this.type===Fr)return KE(this.args[0].evaluate(t,i));if(this.type===vt){for(const r of this.args){const n=Number(r.evaluate(t,i));if(!isNaN(n))return n}return null}if(this.type===Ks){for(const r of this.args)try{const n=un.toColor(r.evaluate(t,i));if(n instanceof ie)return n}catch{}return null}}static toBoolean(t){return Boolean(t)}static toString(t){return KE(t)}static toNumber(t){const i=Number(t);if(isNaN(i))throw new Error(`"${t}" is not a number`);return i}static toColor(t){if(t instanceof ie)return t;if(typeof t=="string"){const i=ie.fromString(t);if(i)return i;throw new Error(`"${t}" is not a color`)}if(Array.isArray(t))return ie.fromArray(t);throw new Error(`"${t}" is not a color`)}}un.types={"to-boolean":fi,"to-color":Ks,"to-number":vt,"to-string":Fr};class cC{constructor(t){this.val=t,this.type=Cw(t)}static parse(t){if(t.length!==2)throw new Error('"literal" expects 1 argument');return new cC(t[1])}evaluate(t,i){return this.val}}class dC{constructor(t){this.arg=t,this.type=Fr}static parse(t,i){if(t.length!==2)throw new Error('"typeof" expects 1 argument');return new dC(_e(t[1],i))}evaluate(t,i){return Sp(Cw(this.arg.evaluate(t,i)))}}function _e(e,t,i){const r=typeof e;if(r==="string"||r==="boolean"||r==="number"||e===null){if(i)switch(i.kind){case"string":r!=="string"&&(e=un.toString(e));break;case"number":r!=="number"&&(e=un.toNumber(e));break;case"color":e=un.toColor(e)}e=["literal",e]}if(!Array.isArray(e)||e.length===0)throw new Error("Expression must be a non empty array");const n=e[0];if(typeof n!="string")throw new Error("First element of expression must be a string");const o=tU[n];if(o===void 0)throw new Error(`Invalid expression operator "${n}"`);if(!o)throw new Error(`Unimplemented expression operator "${n}"`);return o.parse(e,t,i)}const tU={array:Ou,boolean:Ou,collator:null,format:null,image:null,literal:cC,number:Ou,"number-format":null,object:Ou,string:Ou,"to-boolean":un,"to-color":un,"to-number":un,"to-string":un,typeof:dC,accumulated:null,"feature-state":null,"geometry-type":H3,id:z3,"line-progress":null,properties:G3,at:iC,get:av,has:lv,in:rC,"index-of":uv,length:nC,slice:cv,"!":W3,"!=":Yme,"<":Kme,"<=":Zme,"==":qme,">":Jme,">=":Xme,all:q3,any:Y3,case:Z3,coalesce:J3,match:X3,within:null,interpolate:Jn,"interpolate-hcl":Jn,"interpolate-lab":Jn,step:Q3,let:eC,var:tC,concat:sC,downcase:Tp,"is-supported-script":null,"resolved-locale":null,upcase:Tp,rgb:aC,rgba:lC,"to-rgba":uC,"-":Qme,"*":e0e,"/":t0e,"%":i0e,"^":r0e,"+":n0e,abs:mt,acos:mt,asin:mt,atan:mt,ceil:mt,cos:mt,e:mt,floor:mt,ln:mt,ln2:mt,log10:mt,log2:mt,max:mt,min:mt,pi:mt,round:mt,sin:mt,sqrt:mt,tan:mt,zoom:Iw,"heatmap-density":null,"has-id":oC,none:K3};class or{constructor(t){this._expression=t}filter(t,i){if(!this._expression)return!0;try{return this._expression.evaluate(t,i)}catch(r){return console.log(r.message),!0}}static createFilter(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{const i=_e(t,null,fi);return new or(i)}catch(i){return console.log(i.message),null}}static isLegacyFilter(t){if(!Array.isArray(t)||t.length===0)return!0;switch(t[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return t.length===3&&typeof t[1]=="string"&&!Array.isArray(t[2]);case"in":return t.length>=3&&typeof t[1]=="string"&&!Array.isArray(t[2]);case"!in":case"none":case"!has":return!0;case"any":case"all":for(let i=1;i<t.length;i++)if(this.isLegacyFilter(t[i]))return!0;return!1;case"has":return t.length===2&&(t[1]==="$id"||t[1]==="$type");default:return!1}}static convertLegacyFilter(t){if(!Array.isArray(t)||t.length===0)return!0;const i=t[0];if(t.length===1)return i!=="any";switch(i){case"==":return or.convertComparison("==",t[1],t[2]);case"!=":return or.negate(or.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return or.convertComparison(i,t[1],t[2]);case"in":return or.convertIn(t[1],t.slice(2));case"!in":return or.negate(or.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return or.convertCombining(i,t.slice(1));case"has":return or.convertHas(t[1]);case"!has":return or.negate(or.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}static convertComparison(t,i,r){switch(i){case"$type":return[t,["geometry-type"],r];case"$id":return[t,["id"],r];default:return[t,["get",i],r]}}static convertIn(t,i){switch(t){case"$type":return["in",["geometry-type"],["literal",i]];case"$id":return["in",["id"],["literal",i]];default:return["in",["get",t],["literal",i]]}}static convertHas(t){switch(t){case"$type":return!0;case"$id":return["has-id"];default:return["has",t]}}static convertCombining(t,i){return[t].concat(i.map(this.convertLegacyFilter))}static negate(t){return["!",t]}}class dv{constructor(t,i){let r;switch(this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":r=!0;break;case"array":r=t.value==="number";break;default:r=!1}if(i==null&&(i=t.default),Array.isArray(i)&&i.length>0&&tU[i[0]]){const o={number:vt,color:Ks,string:Fr,boolean:fi,enum:Fr};try{const s=t.type==="array"?cm(o[t.value]||Hs,t.length):o[t.type],a=_e(i,null,s);this.getValue=this._buildExpression(a,t),this.isDataDriven=!0,a instanceof Jn&&a.input instanceof Iw&&(this.interpolator=a)}catch(s){console.log(s.message),this.getValue=this._buildSimple(t.default)}return}r&&i.type==="interval"&&(r=!1);const n=i&&i.stops&&i.stops.length>0;if(n)for(const o of i.stops)o[1]=this._validate(o[1],t);if(this.isDataDriven=!!i&&!!i.property,this.isDataDriven)if(i.default!==void 0&&(i.default=this._validate(i.default,t)),n)switch(i.type){case"identity":this.getValue=this._buildIdentity(i,t);break;case"categorical":this.getValue=this._buildCategorical(i,t);break;default:this.getValue=r?this._buildInterpolate(i,t):this._buildInterval(i,t)}else this.getValue=this._buildIdentity(i,t);else n?this.getValue=r?this._buildZoomInterpolate(i):this._buildZoomInterval(i):(i=this._validate(i,t),this.getValue=this._buildSimple(i))}_validate(t,i){if(i.type==="number"){if(t<i.minimum)return i.minimum;if(t>i.maximum)return i.maximum}else i.type==="color"?t=dv._parseColor(t):i.type==="enum"?typeof t=="string"&&(t=i.values.indexOf(t)):i.type==="array"&&i.value==="enum"?t=t.map(r=>typeof r=="string"?i.values.indexOf(r):r):i.type==="string"&&(t=KE(t));return t}_buildSimple(t){return()=>t}_buildExpression(t,i){return(r,n)=>{try{const o=t.evaluate(n,r);return o===void 0?i.default:this._validate(o,i)}catch(o){return console.log(o.message),i.default}}}_buildIdentity(t,i){return(r,n)=>{let o;return n&&(o=n.values[t.property]),o!==void 0&&(o=this._validate(o,i)),o!=null?o:t.default!==void 0?t.default:i.default}}_buildCategorical(t,i){return(r,n)=>{let o;return n&&(o=n.values[t.property]),o=this._categorical(o,t.stops),o!==void 0?o:t.default!==void 0?t.default:i.default}}_buildInterval(t,i){return(r,n)=>{let o;return n&&(o=n.values[t.property]),typeof o=="number"?this._interval(o,t.stops):t.default!==void 0?t.default:i.default}}_buildInterpolate(t,i){return(r,n)=>{let o;return n&&(o=n.values[t.property]),typeof o=="number"?this._interpolate(o,t.stops,t.base||1):t.default!==void 0?t.default:i.default}}_buildZoomInterpolate(t){return i=>this._interpolate(i,t.stops,t.base||1)}_buildZoomInterval(t){return i=>this._interval(i,t.stops)}_categorical(t,i){const r=i.length;for(let n=0;n<r;n++)if(i[n][0]===t)return i[n][1]}_interval(t,i){const r=i.length;let n=0;for(let o=0;o<r&&i[o][0]<=t;o++)n=o;return i[n][1]}_interpolate(t,i,r){let n,o;const s=i.length;for(let a=0;a<s;a++){const u=i[a];if(!(u[0]<=t)){o=u;break}n=u}if(n&&o){const a=o[0]-n[0],u=t-n[0],d=r===1?u/a:(r**u-1)/(r**a-1);if(Array.isArray(n[1])){const h=n[1],f=o[1],y=[];for(let m=0;m<h.length;m++)y.push(Oi(h[m],f[m],d));return y}return Oi(n[1],o[1],d)}return n?n[1]:o?o[1]:void 0}static _isEmpty(t){for(const i in t)if(t.hasOwnProperty(i))return!1;return!0}static _parseColor(t){return Array.isArray(t)?t:(typeof t=="string"&&(t=new ie(t)),t instanceof ie&&!this._isEmpty(t)?ie.toUnitRGBA(t):void 0)}}const twe=1e-30,iwe=4294967295,rwe=512,nwe=8,owe=10,swe=29,awe=24,lwe=8,uwe={metrics:{width:15,height:17,left:0,top:-7,advance:14}},cwe=0,dwe=0,pwe=0,hwe=1,fwe=2,ywe=3,mwe=4,gwe=5,vwe=6,wwe=12,bwe=5,_we=6,Swe=5,Twe=6,Ewe=0,Awe=1,xwe=2,Cwe=3,Iwe=4,Mwe=2,Nwe=1,Rwe=2,Pwe=4,o0e=1.05,$we=3,Dwe=5,Lwe=6,Owe=1.15,kwe=2,Fwe=8,Bwe=500,Uwe=10,Vwe=1024,jwe=2,zwe=0,Hwe=1,Gwe=4,Wwe=8,qwe=16,Ywe=4,Kwe=1,Zwe=4;class dm{constructor(t,i,r,n){switch(this.type=t,this.typeName=i.type,this.id=i.id,this.source=i.source,this.sourceLayer=i["source-layer"],this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,this.filter=i.filter,this.layout=i.layout,this.paint=i.paint,this.z=r,this.uid=n,t){case xt.BACKGROUND:this._layoutDefinition=Rt.backgroundLayoutDefinition,this._paintDefinition=Rt.backgroundPaintDefinition;break;case xt.FILL:this._layoutDefinition=Rt.fillLayoutDefinition,this._paintDefinition=Rt.fillPaintDefinition;break;case xt.LINE:this._layoutDefinition=Rt.lineLayoutDefinition,this._paintDefinition=Rt.linePaintDefinition;break;case xt.SYMBOL:this._layoutDefinition=Rt.symbolLayoutDefinition,this._paintDefinition=Rt.symbolPaintDefinition;break;case xt.CIRCLE:this._layoutDefinition=Rt.circleLayoutDefinition,this._paintDefinition=Rt.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return this._featureFilter!==void 0?this._featureFilter:this._featureFilter=or.createFilter(this.filter)}getLayoutProperty(t){return this._layoutProperties[t]}getPaintProperty(t){return this._paintProperties[t]}getLayoutValue(t,i,r){let n;const o=this._layoutProperties[t];return o&&(n=o.getValue(i,r)),n===void 0&&(n=this._layoutDefinition[t].default),n}getPaintValue(t,i,r){let n;const o=this._paintProperties[t];return o&&(n=o.getValue(i,r)),n===void 0&&(n=this._paintDefinition[t].default),n}isPainterDataDriven(){const t=this._paintProperties;if(t){for(const i in t)if(t[i].isDataDriven)return!0}return!1}_parseLayout(t){const i={};for(const r in t){const n=this._layoutDefinition[r];n&&(i[r]=new dv(n,t[r]))}return i}_parsePaint(t){const i={};for(const r in t){const n=this._paintDefinition[r];n&&(i[r]=new dv(n,t[r]))}return i}computeAttributesKey(t,i,r,n){let o=0,s=0;for(const a of i){let u=3;if(!a||a!==n){const d=r[a],{isLayout:h,isOptional:f}=d,y=h?this.getLayoutProperty(a):this.getPaintProperty(a);u=y!=null&&y.interpolator?2:y!=null&&y.isDataDriven?1:f&&!y?3:0}s|=u<<o,o+=2}return s<<3|t}}class jD extends dm{constructor(t,i,r,n){super(t,i,r,n),this.backgroundMaterial=new Fo(this.computeAttributesKey(Ys.BACKGROUND,Fo.ATTRIBUTES,Fo.ATTRIBUTES_INFO))}}class zD extends dm{constructor(t,i,r,n){super(t,i,r,n);const o=this.getPaintProperty("fill-color"),s=this.getPaintProperty("fill-opacity"),a=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=o==null?void 0:o.isDataDriven,this.hasDataDrivenOpacity=s==null?void 0:s.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||(a==null?void 0:a.isDataDriven);const u=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!u,this.hasDataDrivenOutlineColor=u==null?void 0:u.isDataDriven,this.hasDataDrivenOutline=u?u.isDataDriven:!!o&&o.isDataDriven,this.hasDataDrivenOutline=(u?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new Uo(this.computeAttributesKey(Ys.FILL,Uo.ATTRIBUTES,Uo.ATTRIBUTES_INFO)),this.outlineMaterial=new Ci(this.computeAttributesKey(Ys.OUTLINE,this.outlineUsesFillColor?Ci.ATTRIBUTES_FILL:Ci.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?Ci.ATTRIBUTES_INFO_FILL:Ci.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}}class HD extends dm{constructor(t,i,r,n){var s,a,u,d,h,f,y,m,g;super(t,i,r,n);const o=this.getPaintProperty("line-pattern");if(this.lineMaterial=new Vo(this.computeAttributesKey(Ys.LINE,Vo.ATTRIBUTES,Vo.ATTRIBUTES_INFO,o?"line-dasharray":"")),this.hasDataDrivenLine=((s=this.getPaintProperty("line-blur"))==null?void 0:s.isDataDriven)||((a=this.getPaintProperty("line-color"))==null?void 0:a.isDataDriven)||((u=this.getPaintProperty("line-gap-width"))==null?void 0:u.isDataDriven)||((d=this.getPaintProperty("line-offset"))==null?void 0:d.isDataDriven)||((h=this.getPaintProperty("line-opacity"))==null?void 0:h.isDataDriven)||((f=this.getPaintProperty("line-pattern"))==null?void 0:f.isDataDriven)||((y=this.getPaintProperty("line-dasharray"))==null?void 0:y.isDataDriven)||((m=this.getLayoutProperty("line-cap"))==null?void 0:m.isDataDriven)||((g=this.getPaintProperty("line-width"))==null?void 0:g.isDataDriven),this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const v=this.getPaintProperty("line-width");if(!v||typeof v=="number"&&.5*v<o0e){const w=this.getPaintProperty("line-offset");(!w||typeof w=="number"&&w===0)&&(this.canUseThinTessellation=!0)}}}getDashKey(t,i){let r;switch(i){case tp.BUTT:r="Butt";break;case tp.ROUND:r="Round";break;case tp.SQUARE:r="Square";break;default:r="Butt"}return`dasharray-[${t.toString()}]-${r}`}}class GD extends dm{constructor(t,i,r,n){var o,s,a,u,d,h,f,y,m,g,v,w;super(t,i,r,n),this.iconMaterial=new _l(this.computeAttributesKey(Ys.ICON,_l.ATTRIBUTES,_l.ATTRIBUTES_INFO)),this.textMaterial=new Sl(this.computeAttributesKey(Ys.TEXT,Sl.ATTRIBUTES,Sl.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=((o=this.getPaintProperty("icon-color"))==null?void 0:o.isDataDriven)||((s=this.getPaintProperty("icon-halo-blur"))==null?void 0:s.isDataDriven)||((a=this.getPaintProperty("icon-halo-color"))==null?void 0:a.isDataDriven)||((u=this.getPaintProperty("icon-halo-width"))==null?void 0:u.isDataDriven)||((d=this.getPaintProperty("icon-opacity"))==null?void 0:d.isDataDriven)||((h=this.getLayoutProperty("icon-size"))==null?void 0:h.isDataDriven),this.hasDataDrivenText=((f=this.getPaintProperty("text-color"))==null?void 0:f.isDataDriven)||((y=this.getPaintProperty("text-halo-blur"))==null?void 0:y.isDataDriven)||((m=this.getPaintProperty("text-halo-color"))==null?void 0:m.isDataDriven)||((g=this.getPaintProperty("text-halo-width"))==null?void 0:g.isDataDriven)||((v=this.getPaintProperty("text-opacity"))==null?void 0:v.isDataDriven)||((w=this.getLayoutProperty("text-size"))==null?void 0:w.isDataDriven)}}class WD extends dm{constructor(t,i,r,n){super(t,i,r,n),this.circleMaterial=new Bo(this.computeAttributesKey(Ys.CIRCLE,Bo.ATTRIBUTES,Bo.ATTRIBUTES_INFO))}}class Jwe{constructor(t,i,r){let n;this.allowOverlap=t.getLayoutValue("icon-allow-overlap",i),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",i),this.keepUpright=t.getLayoutValue("icon-keep-upright",i),this.optional=t.getLayoutValue("icon-optional",i),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",i),this.rotationAlignment===ko.AUTO&&(this.rotationAlignment=r?ko.MAP:ko.VIEWPORT),n=t.getLayoutProperty("icon-anchor"),n!=null&&n.isDataDriven?this._anchorProp=n:this.anchor=t.getLayoutValue("icon-anchor",i),n=t.getLayoutProperty("icon-offset"),n!=null&&n.isDataDriven?this._offsetProp=n:this.offset=t.getLayoutValue("icon-offset",i),n=t.getLayoutProperty("icon-padding"),n!=null&&n.isDataDriven?this._paddingProp=n:this.padding=t.getLayoutValue("icon-padding",i),n=t.getLayoutProperty("icon-rotate"),n!=null&&n.isDataDriven?this._rotateProp=n:this.rotate=t.getLayoutValue("icon-rotate",i),n=t.getLayoutProperty("icon-size"),n!=null&&n.isDataDriven?this._sizeProp=n:this.size=t.getLayoutValue("icon-size",i)}update(t,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,i))}}class Xwe{constructor(t,i,r){let n;this.allowOverlap=t.getLayoutValue("text-allow-overlap",i),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",i),this.keepUpright=t.getLayoutValue("text-keep-upright",i),this.optional=t.getLayoutValue("text-optional",i),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",i),this.rotationAlignment===ko.AUTO&&(this.rotationAlignment=r?ko.MAP:ko.VIEWPORT),n=t.getLayoutProperty("text-anchor"),n!=null&&n.isDataDriven?this._anchorProp=n:this.anchor=t.getLayoutValue("text-anchor",i),n=t.getLayoutProperty("text-justify"),n!=null&&n.isDataDriven?this._justifyProp=n:this.justify=t.getLayoutValue("text-justify",i),n=t.getLayoutProperty("text-letter-spacing"),n!=null&&n.isDataDriven?this._letterSpacingProp=n:this.letterSpacing=t.getLayoutValue("text-letter-spacing",i),n=t.getLayoutProperty("text-line-height"),n!=null&&n.isDataDriven?this._lineHeightProp=n:this.lineHeight=t.getLayoutValue("text-line-height",i),n=t.getLayoutProperty("text-max-angle"),n!=null&&n.isDataDriven?this._maxAngleProp=n:this.maxAngle=t.getLayoutValue("text-max-angle",i),n=t.getLayoutProperty("text-max-width"),n!=null&&n.isDataDriven?this._maxWidthProp=n:this.maxWidth=t.getLayoutValue("text-max-width",i),n=t.getLayoutProperty("text-offset"),n!=null&&n.isDataDriven?this._offsetProp=n:this.offset=t.getLayoutValue("text-offset",i),n=t.getLayoutProperty("text-padding"),n!=null&&n.isDataDriven?this._paddingProp=n:this.padding=t.getLayoutValue("text-padding",i),n=t.getLayoutProperty("text-rotate"),n!=null&&n.isDataDriven?this._rotateProp=n:this.rotate=t.getLayoutValue("text-rotate",i),n=t.getLayoutProperty("text-size"),n!=null&&n.isDataDriven?this._sizeProp=n:this.size=t.getLayoutValue("text-size",i),n=t.getLayoutProperty("text-writing-mode"),n!=null&&n.isDataDriven?this._writingModeProp=n:this.writingMode=t.getLayoutValue("text-writing-mode",i)}update(t,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,i)),this._justifyProp&&(this.justify=this._justifyProp.getValue(t,i)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(t,i)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(t,i)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(t,i)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(t,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,i)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(t,i))}}class Fd{constructor(t){if(this._style=t,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,t.layers||(t.layers=[]),this.version=parseFloat(t.version),this.layers=t.layers.map((i,r,n)=>this._create(i,r,n)).filter(i=>!!i),this.layers){let i;for(let r=0;r<this.layers.length;r++)i=this.layers[r],this._layerByName[i.id]=i,this._uidToLayer.set(i.uid,i),i.type===xt.BACKGROUND&&this.backgroundBucketIds.push(i.id)}this._identifyRefLayers()}isPainterDataDriven(t){const i=this._layerByName[t];return!!i&&i.isPainterDataDriven()}getStyleLayerId(t){return t>=this.layers.length?null:this.layers[t].id}getStyleLayerByUID(t){var i;return(i=this._uidToLayer.get(t))!=null?i:null}getStyleLayerIndex(t){const i=this._layerByName[t];return i?this.layers.indexOf(i):-1}setStyleLayer(t,i){if(!t||!t.id)return;const r=this._style;i!=null&&i>=this.layers.length&&(i=this.layers.length-1);let n,o=!0;const s=this._layerByName[t.id];if(s){const a=this.layers.indexOf(s);i||(i=a),i===a?(o=!1,n=Fd._recreateLayer(t,s),this.layers[i]=n,r.layers[i]=t):(this.layers.splice(a,1),r.layers.splice(a,1),n=this._create(t,i,this.layers),this.layers.splice(i,0,n),r.layers.splice(i,0,t))}else n=this._create(t,i,this.layers),!i||i>=this.layers.length?(this.layers.push(n),r.layers.push(t)):(this.layers.splice(i,0,n),r.layers.splice(i,0,t));this._layerByName[t.id]=n,this._uidToLayer.set(n.uid,n),o&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(t){const i=this._layerByName[t];return i?{type:i.typeName,id:i.id,source:i.source,"source-layer":i.sourceLayer,minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:i.layout,paint:i.paint}:null}deleteStyleLayer(t){const i=this._layerByName[t];if(i){delete this._layerByName[t],this._uidToLayer.delete(i.uid);const r=this.layers.indexOf(i);this.layers.splice(r,1),this._style.layers.splice(r,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(t){return this._layerByName[t]}getLayoutProperties(t){const i=this._layerByName[t];return i?i.layout:null}getPaintProperties(t){const i=this._layerByName[t];return i?i.paint:null}setPaintProperties(t,i){const r=this._layerByName[t];if(!r)return;const n={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:i},o=Fd._recreateLayer(n,r),s=this.layers.indexOf(r);this.layers[s]=o,this._style.layers[s].paint=i,this._layerByName[r.id]=o,this._uidToLayer.set(r.uid,o)}setLayoutProperties(t,i){const r=this._layerByName[t];if(!r)return;const n={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:i,paint:r.paint},o=Fd._recreateLayer(n,r),s=this.layers.indexOf(r);this.layers[s]=o,this._style.layers[s].layout=i,this._layerByName[r.id]=o,this._uidToLayer.set(r.uid,o)}setStyleLayerVisibility(t,i){const r=this._layerByName[t];if(!r)return;const n=r.layout||{};n.visibility=i;const o={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:n,paint:r.paint},s=Fd._recreateLayer(o,r),a=this.layers.indexOf(r);this.layers[a]=s,this._style.layers[a].layout=n,this._layerByName[r.id]=s,this._uidToLayer.set(r.uid,s)}getStyleLayerVisibility(t){var r,n;const i=this._layerByName[t];return i?(n=(r=i.layout)==null?void 0:r.visibility)!=null?n:"visible":"none"}_recomputeZValues(){const t=this.layers,i=1/(t.length+1);for(let r=0;r<t.length;r++)t[r].z=1-(1+r)*i}_identifyRefLayers(){const t=[],i=[];let r=0;for(const n of this.layers){const o=n.layout;if(n.type===xt.FILL){const s=n;let a=n.source+"|"+n.sourceLayer;a+="|"+(o==null?void 0:o.visibility),a+="|"+n.minzoom,a+="|"+n.maxzoom,a+="|"+JSON.stringify(n.filter),(s.hasDataDrivenFill||s.hasDataDrivenOutline)&&(a+="|"+r),t.push({key:a,layer:n})}else if(n.type===xt.LINE){const s=n;let a=n.source+"|"+n.sourceLayer;a+="|"+(o==null?void 0:o.visibility),a+="|"+n.minzoom,a+="|"+n.maxzoom,a+="|"+JSON.stringify(n.filter),a+="|"+(o!==void 0?o["line-cap"]:""),a+="|"+(o!==void 0?o["line-join"]:""),s.hasDataDrivenLine&&(a+="|"+r),i.push({key:a,layer:n})}++r}this._assignRefLayers(t),this._assignRefLayers(i)}_assignRefLayers(t){let i,r;t.sort((o,s)=>o.key<s.key?-1:o.key>s.key?1:0);const n=t.length;for(let o=0;o<n;o++){const s=t[o];if(s.key===i)s.layer.refLayerId=r;else if(i=s.key,r=s.layer.id,s.layer.type===xt.FILL){if(!s.layer.getPaintProperty("fill-outline-color"))for(let a=o+1;a<n;a++){const u=t[a];if(u.key!==i)break;if(u.layer.getPaintProperty("fill-outline-color")){t[o]=u,t[a]=s,r=u.layer.id;break}}}else if(s.layer.type===xt.LINE){let a=s.layer;for(let u=o+1;u<n;u++){const d=t[u];if(d.key!==i)break;const h=d.layer;(a.canUseThinTessellation&&!h.canUseThinTessellation||!a.canUseThinTessellation&&(h.getPaintProperty("line-pattern")||h.getPaintProperty("line-dasharray")))&&(a=h,t[o]=d,t[u]=s,r=d.layer.id)}}}}_create(t,i,r){const n=1-(1+i)*(1/(r.length+1)),o=this._runningId++;switch(t.type){case"background":return new jD(xt.BACKGROUND,t,n,o);case"fill":return new zD(xt.FILL,t,n,o);case"line":return new HD(xt.LINE,t,n,o);case"symbol":return new GD(xt.SYMBOL,t,n,o);case"raster":console.warn(`Unsupported vector tile raster layer ${t.id}`);case"circle":return new WD(xt.CIRCLE,t,n,o)}}static _recreateLayer(t,i){switch(t.type){case"background":return new jD(xt.BACKGROUND,t,i.z,i.uid);case"fill":return new zD(xt.FILL,t,i.z,i.uid);case"line":return new HD(xt.LINE,t,i.z,i.uid);case"symbol":return new GD(xt.SYMBOL,t,i.z,i.uid);case"raster":console.warn(`Unsupported vector tile raster layer ${t.id}`);case"circle":return new WD(xt.CIRCLE,t,i.z,i.uid)}}}let et=class extends p3(y3(_me(p7(f3(S7(h3(a7(yw(lp))))))))){constructor(...e){super(...e),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.symbolCollisionBoxesVisible=!1,this.path=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}destroy(){if(this.sourceNameToSource)for(const e of Object.values(this.sourceNameToSource))e==null||e.destroy();this._spriteSourceMap.clear()}async prefetchResources(e){await this.loadSpriteSource(globalThis.devicePixelRatio||1,e)}load(e){const t=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},e).catch(fl).then(async()=>{if(!this.portalItem||!this.portalItem.id)return;const i=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await Be(i,{...e,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:i},Dme(this.portalItem))}).catch(fl).then(()=>this._loadStyle(e));return this.addResolvingPromise(t),Promise.resolve(this)}get attributionDataUrl(){const e=this.currentStyleInfo,t=e&&e.serviceUrl&&rt(e.serviceUrl);if(!t)return null;const i=this._getDefaultAttribution(t.path);return i?Us(i,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const e=this.primarySource;return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){var e;return((e=this.primarySource)==null?void 0:e.fullExtent)||null}get parsedUrl(){return this.serviceUrl?rt(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(e,t){e&&fn(e)&&(e=`https:${e}`);const i=kme(e);t.styleUrl=QA(e,i)}get tileInfo(){var i;const e=[];for(const r in this.sourceNameToSource)e.push(this.sourceNameToSource[r]);let t=((i=this.primarySource)==null?void 0:i.tileInfo)||new Ls;if(e.length>1)for(let r=0;r<e.length;r++)Fme(t,e[r].tileInfo)&&(t=Bme(t,e[r].tileInfo));return t}readVersion(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)}async loadSpriteSource(e=1,t){var i;if(!this._spriteSourceMap.has(e)){const r=kE("2d").maxTextureSize,n=(i=this.currentStyleInfo)!=null&&i.spriteUrl?Us(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,o=new e$(n,e,r,this.currentStyleInfo.spriteFormat);await o.load(t),this._spriteSourceMap.set(e,o)}return this._spriteSourceMap.get(e)}async setSpriteSource(e,t="png",i=1,r){const n=kE("2d").maxTextureSize,o=e?Us(e,{...this.customParameters,token:this.apiKey}):null;if(!o)return null;const s=new e$(o,i,n,t);try{return await s.load(r),this._spriteSourceMap.clear(),this._spriteSourceMap.set(i,s),this.currentStyleInfo.spriteUrl=o,this.emit("spriteSource-change",{spriteSource:s}),s}catch(a){fl(a)}return null}async loadStyle(e,t){var r;const i=e||this.style||this.url;return this._loadingTask&&typeof i=="string"&&this.url===i||((r=this._loadingTask)==null||r.abort(),this._loadingTask=oA(n=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(i,{signal:n})),t)),this._loadingTask.promise}getStyleLayerId(e){return this.styleRepository.getStyleLayerId(e)}getStyleLayerIndex(e){return this.styleRepository.getStyleLayerIndex(e)}getPaintProperties(e){return R(this.styleRepository.getPaintProperties(e))}setPaintProperties(e,t){const i=this.styleRepository.isPainterDataDriven(e);this.styleRepository.setPaintProperties(e,t);const r=this.styleRepository.isPainterDataDriven(e);this.emit("paint-change",{layer:e,paint:t,isDataDriven:i||r})}getStyleLayer(e){return R(this.styleRepository.getStyleLayer(e))}setStyleLayer(e,t){this.styleRepository.setStyleLayer(e,t),this.emit("style-layer-change",{layer:e,index:t})}deleteStyleLayer(e){this.styleRepository.deleteStyleLayer(e),this.emit("delete-style-layer",{layer:e})}getLayoutProperties(e){return R(this.styleRepository.getLayoutProperties(e))}setLayoutProperties(e,t){this.styleRepository.setLayoutProperties(e,t),this.emit("layout-change",{layer:e,layout:t})}setStyleLayerVisibility(e,t){this.styleRepository.setStyleLayerVisibility(e,t),this.emit("style-layer-visibility-change",{layer:e,visibility:t})}getStyleLayerVisibility(e){return this.styleRepository.getStyleLayerVisibility(e)}write(e,t){return(t==null?void 0:t.origin)&&!this.styleUrl?(t.messages&&t.messages.push(new I("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(e,t)}getTileUrl(e,t,i){return null}async _getSourceAndStyle(e,t){if(!e)throw new Error("invalid style!");const i=await Nme(e,{...t,query:{...this.customParameters,token:this.apiKey}});i.spriteFormat==="webp"&&(await Sme("lossy")||(i.spriteFormat="png")),this._set("currentStyleInfo",{...i}),typeof e=="string"?(this.url=e,this.style=null):(this.url=null,this.style=e),this._set("sourceNameToSource",i.sourceNameToSource),this._set("primarySource",i.sourceNameToSource[i.primarySourceName]),this._set("styleRepository",new Fd(i.style)),this.read(i.layerDefinition,{origin:"service"}),this.emit("load-style")}_getDefaultAttribution(e){const t=e.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),i=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!t)return;const r=t[2]&&t[2].toLowerCase();if(!r)return;const n=t[1]||"";for(const o of i)if(o.toLowerCase().includes(r))return Dr(`//static.arcgis.com/attribution/Vector${n}/${o}`)}async _loadStyle(e){var t,i;return(i=(t=this._loadingTask)==null?void 0:t.promise)!=null?i:this.loadStyle(null,e)}};l([c({readOnly:!0})],et.prototype,"attributionDataUrl",null),l([c({type:["show","hide"]})],et.prototype,"listMode",void 0),l([c({json:{read:!0,write:!0}})],et.prototype,"blendMode",void 0),l([c({readOnly:!0,json:{read:!1}})],et.prototype,"capabilities",null),l([c({readOnly:!0})],et.prototype,"currentStyleInfo",void 0),l([c({json:{read:!1},readOnly:!0,type:Oe})],et.prototype,"fullExtent",null),l([c()],et.prototype,"style",void 0),l([c({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],et.prototype,"isReference",void 0),l([c({type:["VectorTileLayer"]})],et.prototype,"operationalLayerType",void 0),l([c({readOnly:!0})],et.prototype,"parsedUrl",null),l([c({readOnly:!0})],et.prototype,"serviceUrl",null),l([c({type:me,readOnly:!0})],et.prototype,"spatialReference",null),l([c({readOnly:!0})],et.prototype,"styleRepository",void 0),l([c({readOnly:!0})],et.prototype,"sourceNameToSource",void 0),l([c({readOnly:!0})],et.prototype,"primarySource",void 0),l([c({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],et.prototype,"styleUrl",null),l([X(["portal-item","web-document"],"styleUrl")],et.prototype,"writeStyleUrl",null),l([c({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:Ls})],et.prototype,"tileInfo",null),l([c({json:{read:!1},readOnly:!0,value:"vector-tile"})],et.prototype,"type",void 0),l([c({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],et.prototype,"url",void 0),l([c({readOnly:!0})],et.prototype,"version",void 0),l([Y("version",["version","currentVersion"])],et.prototype,"readVersion",null),l([c({type:Boolean})],et.prototype,"symbolCollisionBoxesVisible",void 0),l([c({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],et.prototype,"path",void 0),et=l([S("esri.layers.VectorTileLayer")],et);const Vg=et,Qwe=Object.freeze(Object.defineProperty({__proto__:null,default:Vg},Symbol.toStringTag,{value:"Module"})),s0e=8,a0e="https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf",l0e={esri:{type:"vector",maxzoom:16,url:"https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer",attribution:"Esri, HERE, Garmin, FAO, NOAA, USGS, \xA9 OpenStreetMap contributors, and the GIS User Community",copyrightText:"Esri, HERE, Garmin, FAO, NOAA, USGS, \xA9 OpenStreetMap contributors, and the GIS User Community"}},u0e=[{id:"background",type:"background",paint:{"background-color":"#cfd3d4"},layout:{}},{id:"Land",type:"fill",source:"esri","source-layer":"Land",filter:["in","_symbol",0,1],minzoom:0,layout:{},paint:{"fill-color":{stops:[[0,"#f4f4f4"],[7,"#efefef"]]}}},{id:"Urban area",type:"fill",source:"esri","source-layer":"Urban area",minzoom:5,maxzoom:15,layout:{},paint:{"fill-color":{stops:[[5,"#e5e8e7"],[10,"#ECEDEC"]]}}},{id:"Openspace or forest",type:"fill",source:"esri","source-layer":"Openspace or forest",minzoom:12,layout:{},paint:{"fill-color":{stops:[[6,"#ECEEEA"],[11,"#e4e8e4"]]},"fill-outline-color":"#E7EAE6"}},{id:"Admin0 forest or park",type:"fill",source:"esri","source-layer":"Admin0 forest or park",minzoom:7,layout:{},paint:{"fill-color":{stops:[[6,"#ECEEEA"],[11,"#e4e8e4"]]},"fill-outline-color":"#E7EAE6"}},{id:"Admin1 forest or park",type:"fill",source:"esri","source-layer":"Admin1 forest or park",minzoom:8,layout:{},paint:{"fill-color":{stops:[[6,"#ECEEEA"],[11,"#e4e8e4"]]},"fill-outline-color":"#E7EAE6"}},{id:"Zoo",type:"fill",source:"esri","source-layer":"Zoo",minzoom:12,layout:{},paint:{"fill-color":"#e4e8e4"}},{id:"Airport/Airport property",type:"fill",source:"esri","source-layer":"Airport",filter:["==","_symbol",1],minzoom:9,layout:{},paint:{"fill-color":{stops:[[11,"#edede9"],[15,"#efefef"]]}}},{id:"Airport/Airport runway",type:"fill",source:"esri","source-layer":"Airport",filter:["==","_symbol",0],minzoom:11,layout:{},paint:{"fill-color":"#e1e2dd"}},{id:"Pedestrian",type:"fill",source:"esri","source-layer":"Pedestrian",minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1"}},{id:"Park or farming",type:"fill",source:"esri","source-layer":"Park or farming",minzoom:12,layout:{},paint:{"fill-color":"#e4e8e4"}},{id:"Beach",type:"fill",source:"esri","source-layer":"Beach",minzoom:13,layout:{},paint:{"fill-pattern":"Special area of interest/Sand"}},{id:"Special area of interest/Garden path",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",12],minzoom:14,layout:{visibility:"none"},paint:{"fill-color":"#f7f7f7","fill-outline-color":"#EBE8E8"}},{id:"Special area of interest/Parking",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",15],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1"}},{id:"Special area of interest/Green openspace",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",11],minzoom:14,layout:{},paint:{"fill-color":"#e5eae5"}},{id:"Special area of interest/Grass",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",8],minzoom:14,layout:{},paint:{"fill-color":"#e6eae6"}},{id:"Special area of interest/Baseball field or other grounds",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",1],minzoom:14,layout:{},paint:{"fill-color":"#E2E5E2"}},{id:"Special area of interest/Groundcover",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",13],minzoom:14,layout:{},paint:{"fill-pattern":"Special area of interest/Groundcover","fill-opacity":.5}},{id:"Special area of interest/Field or court exterior",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",5],minzoom:14,layout:{},paint:{"fill-color":"#ECEEEC"}},{id:"Special area of interest/Football field or court",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",4],minzoom:14,layout:{},paint:{"fill-color":"#E2E5E2","fill-outline-color":"#efefef"}},{id:"Special area of interest/Hardcourt",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",10],minzoom:14,layout:{},paint:{"fill-color":"#d3d3d3","fill-outline-color":"#efefef"}},{id:"Special area of interest/Mulch or dirt",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",14],minzoom:14,layout:{},paint:{"fill-color":"#eaeaea"}},{id:"Special area of interest/Athletic track",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",0],minzoom:14,layout:{},paint:{"fill-color":"#e2e2e2","fill-outline-color":"#f2f2f2"}},{id:"Special area of interest/Sand",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",6],minzoom:14,layout:{},paint:{"fill-pattern":"Special area of interest/Sand"}},{id:"Special area of interest/Rock or gravel",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",16],minzoom:14,layout:{},paint:{"fill-pattern":"Special area of interest/Rock or gravel"}},{id:"Special area of interest/Water",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",7],minzoom:15,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water line small scale",type:"line",source:"esri","source-layer":"Water line small scale",minzoom:1,maxzoom:5,layout:{"line-join":"round",visibility:"none"},paint:{"line-color":"#d6dadb","line-width":.5}},{id:"Water line medium scale",type:"line",source:"esri","source-layer":"Water line medium scale",minzoom:6,maxzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#d6dadb","line-width":{base:1.2,stops:[[5,.5],[7,.7]]}}},{id:"Water line large scale",type:"line",source:"esri","source-layer":"Water line large scale",minzoom:7,maxzoom:11,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[7,.7],[11,.8]]}}},{id:"Water line/Waterfall",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",5],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#cfd3d4","line-width":.8,"line-dasharray":[5,5]}},{id:"Water line/Dam or weir",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",2],minzoom:11,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#c3c3c3","line-width":{base:1.2,stops:[[11,.7],[14,.7],[17,2]]}}},{id:"Water line/Levee/1",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",3],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[11,.7],[14,.7],[17,2]]}}},{id:"Water line/Levee/0",type:"symbol",source:"esri","source-layer":"Water line",filter:["==","_symbol",3],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"icon-image":"Water line/Levee/0","symbol-spacing":15,"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-padding":1},paint:{}},{id:"Water line/Canal or ditch",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",1],minzoom:11,layout:{"line-cap":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[11,.8],[14,.8],[17,2]]}}},{id:"Water line/Stream or river intermittent",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",4],minzoom:11,layout:{},paint:{"line-color":"#cfd3d4","line-dasharray":[7,3],"line-width":{base:1.2,stops:[[11,.8],[14,.8],[17,2]]}}},{id:"Water line/Stream or river",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",0],minzoom:11,layout:{"line-cap":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[11,.8],[14,.8],[17,2]]}}},{id:"Marine area/bathymetry depth 1",type:"fill",source:"esri","source-layer":"Marine area",minzoom:4,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area small scale",type:"fill",source:"esri","source-layer":"Water area small scale",minzoom:1,maxzoom:5,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area medium scale/Lake intermittent",type:"fill",source:"esri","source-layer":"Water area medium scale",filter:["==","_symbol",1],minzoom:5,maxzoom:7,layout:{},paint:{"fill-pattern":"Water area/Lake or river intermittent"}},{id:"Water area medium scale/Lake or river",type:"fill",source:"esri","source-layer":"Water area medium scale",filter:["==","_symbol",0],minzoom:5,maxzoom:7,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area large scale/Lake intermittent",type:"fill",source:"esri","source-layer":"Water area large scale",filter:["==","_symbol",1],minzoom:7,maxzoom:11,layout:{},paint:{"fill-pattern":"Water area/Lake or river intermittent"}},{id:"Water area large scale/Lake or river",type:"fill",source:"esri","source-layer":"Water area large scale",filter:["==","_symbol",0],minzoom:7,maxzoom:11,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area/Lake, river or bay",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",7],minzoom:11,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area/Lake or river intermittent",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",6],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Lake or river intermittent"}},{id:"Water area/Inundated area",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",4],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Inundated area"}},{id:"Water area/Swamp or marsh",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",3],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Swamp or marsh"}},{id:"Water area/Playa",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",1],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Playa"}},{id:"Water area/Dam or weir",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",5],minzoom:11,layout:{},paint:{"fill-color":"#DFE1E2","fill-outline-color":"#efefef"}},{id:"Special area of interest/Bike, walk or pedestrian",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",2],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1"}},{id:"Railroad/2",type:"line",source:"esri","source-layer":"Railroad",minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#EFEFEF","line-width":{base:1.2,stops:[[12,1.5],[14,2.5],[17,3]]}}},{id:"Railroad/1",type:"line",source:"esri","source-layer":"Railroad",minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#dcddda","line-width":{base:1.2,stops:[[12,.5],[14,1],[17,1.5]]}}},{id:"Ferry/Rail ferry/2",type:"line",source:"esri","source-layer":"Ferry",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#EFEFEF","line-width":{base:1.2,stops:[[12,1.5],[14,2.5],[17,3]]}}},{id:"Ferry/Rail ferry/1",type:"line",source:"esri","source-layer":"Ferry",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#dcddda","line-width":{base:1.2,stops:[[12,.5],[14,1],[17,1.5]]}}},{id:"Special area of interest line/Dock or pier",type:"line",source:"esri","source-layer":"Special area of interest line",filter:["==","_symbol",0],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#efefef","line-width":{base:1.2,stops:[[15,.7],[17,1.2]]}}},{id:"Special area of interest line/Sports field",type:"line",source:"esri","source-layer":"Special area of interest line",filter:["==","_symbol",6],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#efefef","line-width":{base:1.2,stops:[[15,.7],[17,1.2]]}}},{id:"Building/Shadow",type:"fill",source:"esri","source-layer":"Building",minzoom:16,layout:{},paint:{"fill-color":"#dcddde","fill-translate":{stops:[[15,[0,0]],[18,[2,2]]]},"fill-translate-anchor":"viewport"}},{id:"Building",type:"fill",source:"esri","source-layer":"Building",minzoom:15,layout:{},paint:{"fill-color":"#DFE1E2","fill-outline-color":"#efefef"}},{id:"Special area of interest line/Parking lot",type:"line",source:"esri","source-layer":"Special area of interest line",filter:["==","_symbol",5],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[15,.7],[17,1.2]]}}},{id:"Trail or path/1",type:"line",source:"esri","source-layer":"Trail or path",minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[14,1.5],[16,3.3],[18,4]]}}},{id:"Road/4WD/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-dasharray":[2,1],"line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road/Service/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road/Local/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.4,stops:[[11,1.5],[14,4],[16,6],[18,17.3]]}}},{id:"Road/Pedestrian/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[14,1.5],[16,3.3],[18,4]]}}},{id:"Road/Minor, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[11,1],[14,4],[16,9.6],[18,17.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Minor/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[11,2.6],[14,5.6],[16,9.6],[18,17.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Major, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road/Major/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road/Freeway Motorway, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1,stops:[[9,.3],[14,8.3],[16,12.3],[18,26]]}}},{id:"Road/Highway/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[8,.3],[14,8.3],[16,12.3],[18,26]]}}},{id:"Road/Freeway Motorway/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[5,.3],[14,8.3],[16,12.3],[18,26]]}}},{id:"Trail or path/0",type:"line",source:"esri","source-layer":"Trail or path",minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-dasharray":[3,1.5],"line-width":{base:1.2,stops:[[14,1.3],[16,2],[18,2.3]]}}},{id:"Road/Pedestrian/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-dasharray":[3,1.5],"line-width":{base:1.2,stops:[[14,1.3],[16,2],[18,2.3]]}}},{id:"Road/4WD/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road/Service/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road/Local/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{stops:[[12,"#FAFAFA"],[13,"#ffffff"]]},"line-width":{base:1.4,stops:[[11,1.1],[14,2],[16,4],[18,15.3]]}}},{id:"Road/Minor, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,.75],[14,2],[16,7.65],[18,15.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Minor/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,1.3],[14,3.65],[16,7.65],[18,15.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Major, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ffffff","line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road/Major/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road/Freeway Motorway, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffffff","line-width":{base:1.2,stops:[[9,.3],[14,6.3],[16,10.3],[18,24]]}}},{id:"Road/Highway/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-width":{base:1.2,stops:[[8,.3],[14,6.3],[16,10.3],[18,24]]}}},{id:"Road/Freeway Motorway/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:6,layout:{"line-join":"round"},paint:{"line-color":{stops:[[6,"#FAFAFA"],[7,"#ffffff"]]},"line-width":{base:1.2,stops:[[5,.3],[14,6.3],[16,10.3],[18,24]]}}},{id:"Road tunnel/4WD/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-dasharray":[2,1],"line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road tunnel/Service/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road tunnel/Local/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.4,stops:[[11,1.5],[14,4],[16,6],[18,17.3]]}}},{id:"Road tunnel/Pedestrian/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[14,1.5],[16,3.3],[18,4]]}}},{id:"Road tunnel/Minor, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[11,1],[14,4],[16,9.65],[18,17.3]]}}},{id:"Road tunnel/Minor/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[11,2.6],[14,5.65],[16,9.65],[18,17.3]]}}},{id:"Road tunnel/Major, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road tunnel/Major/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road tunnel/Freeway Motorway, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.3],[14,8.3],[16,14.3],[18,28]]}}},{id:"Road tunnel/Highway/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[8,.3],[14,8.3],[16,14.3],[18,28]]}}},{id:"Road tunnel/Freeway Motorway/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[5,.3],[14,8.3],[16,14.3],[18,28]]}}},{id:"Road tunnel/Pedestrian/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-dasharray":[3,1.5],"line-width":{base:1.2,stops:[[14,1.3],[16,2],[18,2.3]]}}},{id:"Road tunnel/4WD/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road tunnel/Service/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road tunnel/Local/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":{stops:[[12,"#FAFAFA"],[13,"#ffffff"]]},"line-opacity":.5,"line-width":{base:1.4,stops:[[11,1.1],[14,2],[16,4],[18,15.3]]}}},{id:"Road tunnel/Minor, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,.75],[14,2],[16,7.65],[18,15.3]]}}},{id:"Road tunnel/Minor/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,1.3],[14,3.65],[16,7.65],[18,15.3]]}}},{id:"Road tunnel/Major, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road tunnel/Major/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road tunnel/Freeway Motorway, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.3],[14,6.3],[16,12.3],[18,26]]}}},{id:"Road tunnel/Highway/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[8,.3],[14,6.3],[16,12.3],[18,26]]}}},{id:"Road tunnel/Freeway Motorway/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:6,layout:{"line-join":"round"},paint:{"line-color":{stops:[[6,"#FAFAFA"],[7,"#ffffff"]]},"line-opacity":.5,"line-width":{base:1.2,stops:[[5,.3],[14,6.3],[16,12.3],[18,26]]}}},{id:"Special area of interest/Gutter",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",9],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1","fill-outline-color":"#efefef"}},{id:"Special area of interest/Curb",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",3],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1","fill-outline-color":"#ebebeb"}},{id:"Boundary line/Disputed admin2/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#dddedb","line-opacity":.95,"line-width":{base:1,stops:[[4,.65],[14,7],[17,7]]}}},{id:"Boundary line/Disputed admin2/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":{stops:[[1,"#FAFAFA"],[3,"#ffffff"]]},"line-width":{base:1.2,stops:[[1,.65],[14,1.3],[17,2.65]]},"line-dasharray":[7,5]}},{id:"Boundary line/Disputed admin1/1",type:"line",source:"esri","source-layer":"Boundary line",minzoom:4,filter:["all",["==","_symbol",7],["!in","Viz",3]],layout:{"line-join":"round"},paint:{"line-color":"#dddedb","line-opacity":.95,"line-width":{base:1,stops:[[4,.65],[14,7]]}}},{id:"Boundary line/Disputed admin0/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",6],["!in","Viz",3],["!in","DisputeID",8,16,90,96,0]],minzoom:1,layout:{"line-join":"round"},paint:{"line-color":"#dddedb","line-opacity":.95,"line-width":{base:1,stops:[[1,.65],[14,9.3]]}}},{id:"Boundary line/Disputed admin1/0",type:"line",source:"esri","source-layer":"Boundary line",minzoom:4,filter:["all",["==","_symbol",7],["!in","Viz",3]],layout:{"line-join":"round"},paint:{"line-color":{stops:[[1,"#FAFAFA"],[3,"#ffffff"]]},"line-width":{base:1.2,stops:[[1,.65],[14,1.3],[17,2.65]]},"line-dasharray":[7,5]}},{id:"Boundary line/Disputed admin0/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",6],["!in","Viz",3],["!in","DisputeID",8,16,90,96,0]],minzoom:1,layout:{"line-join":"round"},paint:{"line-color":{stops:[[1,"#FAFAFA"],[3,"#ffffff"]]},"line-width":{base:1.2,stops:[[1,.65],[14,1.3],[17,2.65]]},"line-dasharray":[7,5]}},{id:"Boundary line/Admin2/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:10,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#dfe0dd","line-opacity":.6,"line-width":{base:1.2,stops:[[8,1.3],[14,2.65]]}}},{id:"Boundary line/Admin1/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:4,layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":"#dfe0dd","line-width":{base:1,stops:[[4,.65],[14,7]]}}},{id:"Boundary line/Admin0/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:1,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#dddedb","line-width":{base:1,stops:[[1,.65],[14,9.3]]}}},{id:"Boundary line/Admin5",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:16,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[5,3]}},{id:"Boundary line/Admin4",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:16,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[5,3]}},{id:"Boundary line/Admin3",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:16,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[5,3]}},{id:"Boundary line/Admin2/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[6,4],"line-width":{base:1.2,stops:[[8,.5],[14,1]]}}},{id:"Boundary line/Admin1/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:7,layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":{stops:[[7,"#c8c8c8"],[12,"#b9b9b9"]]},"line-dasharray":[7,5.3],"line-width":{base:1,stops:[[7,.3],[14,1.3]]}}},{id:"Boundary line/Admin0/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:5,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{stops:[[5,"#cccccc"],[7,"#9C9C9C"]]},"line-dasharray":[7,5.3],"line-width":{base:1.2,stops:[[5,.7],[14,1.3]]}}},{id:"Water point/Sea or ocean",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",0],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,15.5]]},"text-letter-spacing":.3,"text-line-height":1.6,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water point/Island",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",7],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water point/Dam or weir",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",5],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":.7,"text-halo-blur":1}},{id:"Water point/Playa",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",6],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":.7,"text-halo-blur":1}},{id:"Water point/Canal or ditch",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",4],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water point/Stream or river",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",3],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water point/Lake or reservoir",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",2],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water point/Bay or inlet",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",1],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water line/label/Default",type:"symbol",source:"esri","source-layer":"Water line/label",minzoom:11,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":9,"text-letter-spacing":.07,"text-max-width":6,"text-max-angle":18,"text-field":"{_name_global}","text-padding":1,"text-offset":[0,-.5],"symbol-spacing":800},paint:{"text-color":"#A0A6A8","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Marine park/label/Default",type:"symbol",source:"esri","source-layer":"Marine park/label",minzoom:16,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91"}},{id:"Water area/label/Dam or weir",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",8],minzoom:11,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Water area/label/Playa",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",9],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Water area/label/Canal or ditch",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",2],minzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.13,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":5},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Small river",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",7],minzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.13,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":8},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Large river",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",4],minzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":10,"text-letter-spacing":.13,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":8},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Small lake or reservoir",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",6],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Large lake or reservoir",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",3],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":10,"text-letter-spacing":.13,"text-line-height":1.15,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Bay or inlet",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",1],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":11,"text-letter-spacing":.13,"text-line-height":1.15,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Small island",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",0],minzoom:11,layout:{"text-size":9.5,"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"]},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water area/label/Large island",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",5],minzoom:11,layout:{"text-size":10,"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"]},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water area large scale/label/River",type:"symbol",source:"esri","source-layer":"Water area large scale/label",filter:["==","_label_class",1],minzoom:7,maxzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":9,"text-letter-spacing":.1,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":4},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area large scale/label/Lake or lake intermittent",type:"symbol",source:"esri","source-layer":"Water area large scale/label",filter:["==","_label_class",0],minzoom:7,maxzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area medium scale/label/Default",type:"symbol",source:"esri","source-layer":"Water area medium scale/label",minzoom:5,maxzoom:7,layout:{"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-letter-spacing":.08,"text-font":["Ubuntu Italic"],"text-size":9},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area small scale/label/Default",type:"symbol",source:"esri","source-layer":"Water area small scale/label",minzoom:1,maxzoom:5,layout:{"text-font":["Ubuntu Italic"],"text-size":9,"text-letter-spacing":.08,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Marine area/label/Default",type:"symbol",source:"esri","source-layer":"Marine area/label",minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":10,"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Marine waterbody/label/small",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",4],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.12,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,9],[6,11]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/medium",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",3],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.15,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,9],[6,11]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/large",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",2],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.18,"text-line-height":1.5,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,9],[6,12]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/x large",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",1],minzoom:3,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.2,"text-line-height":1.5,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,10],[6,13]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/2x large",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",0],minzoom:2,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.3,"text-line-height":1.6,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,11],[4,14]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Ferry/label/Rail ferry",type:"symbol",source:"esri","source-layer":"Ferry/label",filter:["all",["==","_label_class",1],["!in","Viz",3]],minzoom:16,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.6],"symbol-spacing":1e3},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1}},{id:"Railroad/label/Default",type:"symbol",source:"esri","source-layer":"Railroad/label",minzoom:16,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.6],"symbol-spacing":1e3},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1}},{id:"Road tunnel/label/Pedestrian",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",6],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.3,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Local, service, 4WD",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",5],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Minor",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",4],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Major, alt name",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",3],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Major",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",2],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Highway",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",7],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Freeway Motorway, alt name",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",1],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Freeway Motorway",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",0],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Building/label/Default",type:"symbol",source:"esri","source-layer":"Building/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":.7,"text-halo-blur":1}},{id:"Trail or path/label/Default",type:"symbol",source:"esri","source-layer":"Trail or path/label",minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.3,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Pedestrian",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",6],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.3,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Local",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",5],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Minor",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",4],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Major, alt name",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",3],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Major",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",2],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Highway",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",75],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":10},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Freeway Motorway, alt name",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",1],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Freeway Motorway",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",0],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Rectangle white black (Alt)",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["in","_label_class",8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-spacing":800,"text-max-angle":25,"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-max-width":6,"text-field":"{_name}","icon-image":"Road/Rectangle white black (Alt)/{_len}","icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport","text-offset":[0,.2],"text-padding":30},paint:{"text-color":"#666666"}},{id:"Road/label/Rectangle white black",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["in","_label_class",7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-spacing":800,"text-max-angle":25,"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-max-width":6,"text-field":"{_name}","icon-image":"Road/Rectangle white black/{_len}","icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport","text-offset":[0,.2],"text-padding":30},paint:{"text-color":"#666666"}},{id:"Cemetery/label/Default",type:"symbol",source:"esri","source-layer":"Cemetery/label",minzoom:16,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Freight/label/Default",type:"symbol",source:"esri","source-layer":"Freight/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Water and wastewater/label/Default",type:"symbol",source:"esri","source-layer":"Water and wastewater/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Port/label/Default",type:"symbol",source:"esri","source-layer":"Port/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Industry/label/Default",type:"symbol",source:"esri","source-layer":"Industry/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Government/label/Default",type:"symbol",source:"esri","source-layer":"Government/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Finance/label/Default",type:"symbol",source:"esri","source-layer":"Finance/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Emergency/label/Default",type:"symbol",source:"esri","source-layer":"Emergency/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Indigenous/label/Default",type:"symbol",source:"esri","source-layer":"Indigenous/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Military/label/Default",type:"symbol",source:"esri","source-layer":"Military/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Transportation/label/Default",type:"symbol",source:"esri","source-layer":"Transportation/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Pedestrian/label/Default",type:"symbol",source:"esri","source-layer":"Pedestrian/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Beach/label/Default",type:"symbol",source:"esri","source-layer":"Beach/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Golf course/label/Default",type:"symbol",source:"esri","source-layer":"Golf course/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Zoo/label/Default",type:"symbol",source:"esri","source-layer":"Zoo/label",minzoom:15,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Retail/label/Default",type:"symbol",source:"esri","source-layer":"Retail/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Landmark/label/Default",type:"symbol",source:"esri","source-layer":"Landmark/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Openspace or forest/label/Default",type:"symbol",source:"esri","source-layer":"Openspace or forest/label",minzoom:14,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Park or farming/label/Default",type:"symbol",source:"esri","source-layer":"Park or farming/label",minzoom:14,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Point of interest/Park",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_label_class",1],minzoom:14,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#939d8c","text-halo-width":1,"text-halo-color":"#EBEDEB","text-halo-blur":1}},{id:"Education/label/Default",type:"symbol",source:"esri","source-layer":"Education/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Medical/label/Default",type:"symbol",source:"esri","source-layer":"Medical/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 forest or park/label/Default",type:"symbol",source:"esri","source-layer":"Admin1 forest or park/label",minzoom:9,layout:{"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[12,9.5]]},"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 forest or park/label/Default",type:"symbol",source:"esri","source-layer":"Admin0 forest or park/label",minzoom:9,layout:{"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[12,9.5]]},"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Airport/label/Airport property",type:"symbol",source:"esri","source-layer":"Airport/label",minzoom:9,layout:{"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[12,9.5]]},"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin2 area/label/small",type:"symbol",source:"esri","source-layer":"Admin2 area/label",filter:["==","_label_class",1],minzoom:9,maxzoom:11,layout:{"text-letter-spacing":.2,"text-font":["Ubuntu Regular"],"text-size":9,"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase"},paint:{"text-color":"#b1b2ad","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin2 area/label/large",type:"symbol",source:"esri","source-layer":"Admin2 area/label",filter:["==","_label_class",0],minzoom:9,maxzoom:11,layout:{"text-letter-spacing":.2,"text-font":["Ubuntu Regular"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase"},paint:{"text-color":"#b1b2ad","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/x small",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",5],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,9],[5,9],[6,9.5],[9,10]]},"text-letter-spacing":{stops:[[4,.1],[8,.18]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/small",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",4],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,9],[5,9],[6,9.5],[9,11.5]]},"text-letter-spacing":{stops:[[4,.1],[8,.18]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/medium",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",3],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,10],[5,10],[6,10.5],[9,12]]},"text-letter-spacing":{stops:[[4,.1],[8,.18]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/large",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",2],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,10],[5,10.5],[6,11],[9,15]]},"text-letter-spacing":{stops:[[4,.1],[8,.2]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/x large",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",1],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,10.5],[5,11],[6,11.5],[9,17]]},"text-letter-spacing":{stops:[[4,.13],[8,.3]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/2x large",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",0],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,11],[5,11.5],[6,12],[9,17.5]]},"text-letter-spacing":{stops:[[4,.13],[8,.4]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Point of interest/General",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_label_class",0],minzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-width":1,"text-halo-color":"#efefef","text-halo-blur":1}},{id:"Point of interest/Bus station",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_symbol",2],minzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9,"text-letter-spacing":.04,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.9]},paint:{"text-color":"#808080","text-halo-width":1,"text-halo-color":"#efefef","text-halo-blur":1}},{id:"Point of interest/Rail station",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_symbol",3],minzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9,"text-letter-spacing":.04,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.9]},paint:{"text-color":"#808080","text-halo-width":1,"text-halo-color":"#efefef","text-halo-blur":1}},{id:"Neighborhood",type:"symbol",source:"esri","source-layer":"Neighborhood",minzoom:15,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":{stops:[[10,10],[16,13]]},"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/town small",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",5],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":{stops:[[10,10],[16,13]]},"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/town large",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",4],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":{stops:[[10,10],[16,15]]},"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":1},paint:{"text-halo-color":"#efefef","text-color":"#353635","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/small",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",3],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,11],[16,16]]}},paint:{"text-halo-color":"#efefef","text-color":"#353635","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/medium",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",2],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,11],[16,18.5]]}},paint:{"text-halo-color":"#efefef","text-color":"#353635","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/large",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",1],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,14],[16,22]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/x large",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",0],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,15],[16,25]]},visibility:"none"},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town small non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",17],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town large non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",15],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/small non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",12],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/medium non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",9],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"text-letter-spacing":.05,"text-size":10},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",18],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town large other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",14],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/small other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",11],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/medium other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",8],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":10},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/x small",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",5],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[5,.13],[8,.5]]},"text-size":{stops:[[5,10],[10,12.5]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/small",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",4],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[4,.13],[8,.5]]},"text-size":{stops:[[4,10],[10,12.5]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/medium",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",3],minzoom:2,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[2,.13],[8,.5]]},"text-size":{stops:[[2,8],[4,10],[10,16]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/large",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",2],minzoom:2,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[2,.13],[8,.5]]},"text-size":{stops:[[2,9],[4,10],[6,16]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/x large",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",1],minzoom:2,maxzoom:8,layout:{"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-font":["Ubuntu Bold"],"text-line-height":1.5,"text-letter-spacing":{stops:[[2,.15],[6,.5]]},"text-size":{stops:[[2,9],[4,10],[6,16]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town small admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",16],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town large admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",13],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/small admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",10],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/medium admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",7],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/large other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",5],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,11],[8,14]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large admin2 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",2],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/large non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",6],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,11],[8,14]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/large admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",4],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,11],[8,14]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",3],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large admin1 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",1],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",0],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/2x large",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",0],minzoom:2,maxzoom:6,layout:{"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-font":["Ubuntu Bold"],"text-line-height":1.7,"text-letter-spacing":{stops:[[2,.3],[5,.5]]},"text-size":{stops:[[2,12],[4,15.5],[5,18]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Disputed label point/Island",type:"symbol",source:"esri","source-layer":"Disputed label point",filter:["all",["==","_label_class",1],["in","DisputeID",0]],minzoom:6,layout:{"icon-image":"Disputed label point","icon-allow-overlap":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[6,7],[15,10]]},"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Disputed label point/Waterbody",type:"symbol",source:"esri","source-layer":"Disputed label point",filter:["all",["==","_label_class",0],["in","DisputeID",1006]],minzoom:2,maxzoom:10,layout:{"icon-image":"Disputed label point","icon-allow-overlap":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[2,8],[6,9.3]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Disputed label point/Admin0",type:"symbol",source:"esri","source-layer":"Disputed label point",filter:["all",["==","_label_class",2],["in","DisputeID",1021]],minzoom:2,layout:{"icon-image":"Disputed label point","icon-allow-overlap":!0,"text-font":["Ubuntu Bold"],"text-size":{stops:[[2,8],[4,10],[10,16]]},"text-transform":"uppercase","text-letter-spacing":{stops:[[2,.13],[8,.5]]},"text-max-width":6,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}}],c0e={arcgisStyleUrl:"https://www.arcgis.com/sharing/rest/content/items/96ed54f1daf24a6992b7e7317bebd744/resources/styles/root.json",arcgisOriginalItemTitle:"Light Gray Canvas (for Developers)",arcgisQuickEditorWarning:!0},d0e={version:s0e,glyphs:a0e,sources:l0e,layers:u0e,metadata:c0e},p0e=8,h0e="https://tiles.arcgis.com/tiles/at3rDjch5X7i9Bag/arcgis/rest/services/Moderate_SLR_eraseOB_VTile2/VectorTileServer/resources/sprites/sprite",f0e="https://tiles.arcgis.com/tiles/at3rDjch5X7i9Bag/arcgis/rest/services/Moderate_SLR_eraseOB_VTile2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf",y0e={stormwater:{type:"vector",bounds:[-180,-85.0511,180,85.0511],minzoom:0,maxzoom:20,scheme:"xyz",url:"https://tiles.arcgis.com/tiles/at3rDjch5X7i9Bag/arcgis/rest/services/Moderate_SLR_eraseOB_VTile2/VectorTileServer/"},sandy:{type:"vector",bounds:[-74.2556,40.4961,-73.725,40.9155],minzoom:0,maxzoom:23,scheme:"xyz",url:"https://vectortileservices6.arcgis.com/QBTLpj07hLeyQqJB/arcgis/rest/services/Sandy_Inundation_Zone_/VectorTileServer"}},m0e=[{id:"Area not included in analysis:1",type:"fill",source:"stormwater","source-layer":"Area not included in analysis:1",layout:{},paint:{"fill-color":"#bdbdbd"}},{id:"Area under analysis",type:"fill",source:"stormwater","source-layer":"Area under analysis",layout:{},paint:{"fill-color":"#bdbdbd"}},{id:"Area not included in analysis:2",type:"fill",source:"stormwater","source-layer":"Area not included in analysis:2",layout:{},paint:{"fill-color":"#bdbdbd"}},{id:"National Wetlands Inventory/1",type:"fill",source:"stormwater","source-layer":"National Wetlands Inventory",layout:{},paint:{"fill-color":"#bdbdbd"}},{id:"Sandy Inundation Zone",type:"fill",source:"sandy","source-layer":"NYC_large_polygon_split_up(1)",layout:{},paint:{"fill-color":"rgba(76,129,205,0.75)","fill-outline-color":"rgba(0,0,0,0.2)"}},{id:"Nuisance Flooding (greater or equal to 4 in and less than 1ft)/1",type:"fill",source:"stormwater","source-layer":"Nuisance Flooding (greater or equal to 4 in and less than 1ft)",layout:{},paint:{"fill-color":"#73B2FF"}},{id:"Deep and Contiguous Flooding (1ft and greater)/1",type:"fill",source:"stormwater","source-layer":"Deep and Contiguous Flooding (1ft and greater)",layout:{},paint:{"fill-color":"#005CE6"}},{id:"Future High Tides 2050",type:"fill",source:"stormwater","source-layer":"Future High Tides 2050 ",layout:{},paint:{"fill-color":"#FFAA00"}}],g0e={version:p0e,sprite:h0e,glyphs:f0e,sources:y0e,layers:m0e},v0e=8,w0e="https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf",b0e={subway:{type:"vector",url:"https://vectortileservices6.arcgis.com/QBTLpj07hLeyQqJB/arcgis/rest/services/NYC_Subway_Station_Points/VectorTileServer"}},_0e=[{id:"NYC_Subway_Station_Points",type:"circle",source:"subway","source-layer":"main.subway_stations2",minzoom:8,paint:{"circle-color":"rgba(255, 255, 255, 1)","circle-opacity":{stops:[[11,0],[12,1]]},"circle-stroke-opacity":{stops:[[11,0],[12,1]]},"circle-radius":{stops:[[10,2],[14,5]]},"circle-stroke-width":1,"circle-pitch-scale":"map"}},{id:"subway_stations_labels",minzoom:13,source:"subway","source-layer":"main.subway_stations2",type:"symbol",layout:{"text-field":"{_name}","symbol-placement":"point","symbol-spacing":250,"symbol-avoid-edges":!1,"text-size":14,"text-anchor":"center","text-font":["Ubuntu Italic"]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1,"text-translate":[1,20],"text-opacity":{stops:[[12,0],[15,1]]}}}],S0e={version:v0e,glyphs:w0e,sources:b0e,layers:_0e},T0e="FeatureCollection",E0e="ida",A0e={type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},x0e=[{type:"Feature",properties:{"Unique Key":51718789,"Created Date":"09/01/2021 06:35:00 PM","Closed Date":"09/01/2021 08:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10027,"Incident Address":"11 WEST  129 STREET","Street Name":"WEST  129 STREET","Cross Street 1":"5 AVE","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 08:30:00 PM","Community Board":"10 MANHATTAN",BBL:1017270028,Borough:"MANHATTAN","X Coordinate (State Plane)":1000434,"Y Coordinate (State Plane)":234185,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80944473216209,Longitude:-73.9415372004145,Location:"(40.80944473216209, -73.9415372004145)"},geometry:{type:"Point",coordinates:[-73.9415372004145,40.80944473216209]}},{type:"Feature",properties:{"Unique Key":51728874,"Created Date":"09/01/2021 08:08:00 PM","Closed Date":"09/01/2021 08:55:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10034,"Incident Address":"557 ISHAM STREET","Street Name":"ISHAM STREET","Cross Street 1":"VERMILYEA AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 08:55:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1006574,"Y Coordinate (State Plane)":255307,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.86740508013353,Longitude:-73.91928687783799,Location:"(40.86740508013353, -73.91928687783799)"},geometry:{type:"Point",coordinates:[-73.91928687783799,40.86740508013353]}},{type:"Feature",properties:{"Unique Key":51722197,"Created Date":"09/01/2021 08:54:00 PM","Closed Date":"09/04/2021 11:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Other Sewer Problem (Use Comments) (SZZ)","Location Type":null,"Incident Zip":10036,"Incident Address":"663 9 AVENUE","Street Name":"9 AVENUE","Cross Street 1":"W 45 ST","Cross Street 2":"W 46 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and resolved the issue.","Resolution Action Updated Date":"09/04/2021 11:45:00 AM","Community Board":"04 MANHATTAN",BBL:1010550036,Borough:"MANHATTAN","X Coordinate (State Plane)":986788,"Y Coordinate (State Plane)":216493,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.760899370879606,Longitude:-73.99083845589195,Location:"(40.760899370879606, -73.99083845589195)"},geometry:{type:"Point",coordinates:[-73.99083845589195,40.760899370879606]}},{type:"Feature",properties:{"Unique Key":51728984,"Created Date":"09/01/2021 08:54:00 PM","Closed Date":"09/05/2021 04:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10025,"Incident Address":"255 WEST   93 STREET","Street Name":"WEST   93 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"WEST END AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/05/2021 04:40:00 PM","Community Board":"07 MANHATTAN",BBL:1012410108,Borough:"MANHATTAN","X Coordinate (State Plane)":991496,"Y Coordinate (State Plane)":228190,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.793001949931174,Longitude:-73.97383114235681,Location:"(40.793001949931174, -73.97383114235681)"},geometry:{type:"Point",coordinates:[-73.97383114235681,40.793001949931174]}},{type:"Feature",properties:{"Unique Key":51723871,"Created Date":"09/01/2021 09:02:00 PM","Closed Date":"09/01/2021 09:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10128,"Incident Address":"1120 PARK AVENUE","Street Name":"PARK AVENUE","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 09:45:00 PM","Community Board":"08 MANHATTAN",BBL:1015020033,Borough:"MANHATTAN","X Coordinate (State Plane)":996515,"Y Coordinate (State Plane)":224549,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78300284092864,Longitude:-73.95571172396143,Location:"(40.78300284092864, -73.95571172396143)"},geometry:{type:"Point",coordinates:[-73.95571172396143,40.78300284092864]}},{type:"Feature",properties:{"Unique Key":51715388,"Created Date":"09/01/2021 09:11:00 PM","Closed Date":"09/01/2021 09:11:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10019,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"11 AVENUE","Intersection Street 2":"WEST 59 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 09:55:00 AM","Community Board":"04 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":986894,"Y Coordinate (State Plane)":220396,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77161206451384,Longitude:-73.99045428715185,Location:"(40.77161206451384, -73.99045428715185)"},geometry:{type:"Point",coordinates:[-73.99045428715185,40.77161206451384]}},{type:"Feature",properties:{"Unique Key":51722195,"Created Date":"09/01/2021 09:15:00 PM","Closed Date":"09/01/2021 09:16:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Other Sewer Problem (Use Comments) (SZZ)","Location Type":null,"Incident Zip":10009,"Incident Address":"5 AVENUE A","Street Name":"AVENUE A","Cross Street 1":"E 1 ST","Cross Street 2":"E 2 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and resolved the issue.","Resolution Action Updated Date":"09/01/2021 09:16:00 PM","Community Board":"03 MANHATTAN",BBL:1004290042,Borough:"MANHATTAN","X Coordinate (State Plane)":988095,"Y Coordinate (State Plane)":202505,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72250532442226,Longitude:-73.98612850928905,Location:"(40.72250532442226, -73.98612850928905)"},geometry:{type:"Point",coordinates:[-73.98612850928905,40.72250532442226]}},{type:"Feature",properties:{"Unique Key":51724889,"Created Date":"09/01/2021 09:18:00 PM","Closed Date":"09/01/2021 09:35:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10009,"Incident Address":"9 AVENUE A","Street Name":"AVENUE A","Cross Street 1":"E 1 ST","Cross Street 2":"E 2 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/01/2021 09:35:00 PM","Community Board":"03 MANHATTAN",BBL:1004290040,Borough:"MANHATTAN","X Coordinate (State Plane)":988111,"Y Coordinate (State Plane)":202534,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.722584915439576,Longitude:-73.98607076993538,Location:"(40.722584915439576, -73.98607076993538)"},geometry:{type:"Point",coordinates:[-73.98607076993538,40.722584915439576]}},{type:"Feature",properties:{"Unique Key":51717574,"Created Date":"09/01/2021 09:24:00 PM","Closed Date":"09/05/2021 12:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Other Sewer Problem (Use Comments) (SZZ)","Location Type":null,"Incident Zip":10029,"Incident Address":"2165 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 111 ST","Cross Street 2":"E 112 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and resolved the issue.","Resolution Action Updated Date":"09/05/2021 12:50:00 PM","Community Board":"11 MANHATTAN",BBL:1016830030,Borough:"MANHATTAN","X Coordinate (State Plane)":1001601,"Y Coordinate (State Plane)":228333,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79338038300756,Longitude:-73.93733667375174,Location:"(40.79338038300756, -73.93733667375174)"},geometry:{type:"Point",coordinates:[-73.93733667375174,40.79338038300756]}},{type:"Feature",properties:{"Unique Key":51728845,"Created Date":"09/01/2021 09:27:00 PM","Closed Date":"09/03/2021 10:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10075,"Incident Address":"20 EAST   80 STREET","Street Name":"EAST   80 STREET","Cross Street 1":"5 AVE","Cross Street 2":"MADISON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 10:45:00 AM","Community Board":"08 MANHATTAN",BBL:1014910060,Borough:"MANHATTAN","X Coordinate (State Plane)":994685,"Y Coordinate (State Plane)":222465,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77728516288154,Longitude:-73.962322994457,Location:"(40.77728516288154, -73.962322994457)"},geometry:{type:"Point",coordinates:[-73.962322994457,40.77728516288154]}},{type:"Feature",properties:{"Unique Key":51712916,"Created Date":"09/01/2021 09:36:00 PM","Closed Date":"09/05/2021 09:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10065,"Incident Address":"44 EAST   68 STREET","Street Name":"EAST   68 STREET","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/05/2021 09:30:00 AM","Community Board":"08 MANHATTAN",BBL:1013820043,Borough:"MANHATTAN","X Coordinate (State Plane)":993427,"Y Coordinate (State Plane)":219457,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.769030386183736,Longitude:-73.96686928409133,Location:"(40.769030386183736, -73.96686928409133)"},geometry:{type:"Point",coordinates:[-73.96686928409133,40.769030386183736]}},{type:"Feature",properties:{"Unique Key":51726569,"Created Date":"09/01/2021 09:41:00 PM","Closed Date":"09/01/2021 09:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10011,"Incident Address":"429 WEST   24 STREET","Street Name":"WEST   24 STREET","Cross Street 1":"9 AVE","Cross Street 2":"10 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/01/2021 09:50:00 PM","Community Board":"04 MANHATTAN",BBL:1007220020,Borough:"MANHATTAN","X Coordinate (State Plane)":983741,"Y Coordinate (State Plane)":211639,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74757672344629,Longitude:-74.0018369950305,Location:"(40.74757672344629, -74.0018369950305)"},geometry:{type:"Point",coordinates:[-74.0018369950305,40.74757672344629]}},{type:"Feature",properties:{"Unique Key":51722823,"Created Date":"09/01/2021 09:41:00 PM","Closed Date":"09/02/2021 08:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10013,"Incident Address":"17 THOMPSON STREET","Street Name":"THOMPSON STREET","Cross Street 1":"BEND","Cross Street 2":"GRAND ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:10:00 AM","Community Board":"02 MANHATTAN",BBL:1002270055,Borough:"MANHATTAN","X Coordinate (State Plane)":982976,"Y Coordinate (State Plane)":202527,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7225664529733,Longitude:-74.00459617563315,Location:"(40.7225664529733, -74.00459617563315)"},geometry:{type:"Point",coordinates:[-74.00459617563315,40.7225664529733]}},{type:"Feature",properties:{"Unique Key":51717735,"Created Date":"09/01/2021 09:45:00 PM","Closed Date":"09/02/2021 01:05:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10019,"Incident Address":"641 WEST   51 STREET","Street Name":"WEST   51 STREET","Cross Street 1":"11 AVE","Cross Street 2":"12 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:05:00 AM","Community Board":"04 MANHATTAN",BBL:1010990010,Borough:"MANHATTAN","X Coordinate (State Plane)":985618,"Y Coordinate (State Plane)":218672,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76688042241679,Longitude:-73.99506141928606,Location:"(40.76688042241679, -73.99506141928606)"},geometry:{type:"Point",coordinates:[-73.99506141928606,40.76688042241679]}},{type:"Feature",properties:{"Unique Key":51713336,"Created Date":"09/01/2021 09:48:00 PM","Closed Date":"09/02/2021 01:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10065,"Incident Address":"342 EAST   67 STREET","Street Name":"EAST   67 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:00:00 AM","Community Board":"08 MANHATTAN",BBL:1014410031,Borough:"MANHATTAN","X Coordinate (State Plane)":995433,"Y Coordinate (State Plane)":218047,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76515799198971,Longitude:-73.9596295893541,Location:"(40.76515799198971, -73.9596295893541)"},geometry:{type:"Point",coordinates:[-73.9596295893541,40.76515799198971]}},{type:"Feature",properties:{"Unique Key":51712536,"Created Date":"09/01/2021 09:49:00 PM","Closed Date":"09/01/2021 10:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10010,"Incident Address":"1107 BROADWAY","Street Name":"BROADWAY","Cross Street 1":"BEND","Cross Street 2":"W 25 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The status of this Service Request is currently not available online. Please call 311 for further assistance. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/01/2021 10:40:00 PM","Community Board":"05 MANHATTAN",BBL:1008267501,Borough:"MANHATTAN","X Coordinate (State Plane)":987239,"Y Coordinate (State Plane)":209878,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.742742728974946,Longitude:-73.98921339926879,Location:"(40.742742728974946, -73.98921339926879)"},geometry:{type:"Point",coordinates:[-73.98921339926879,40.742742728974946]}},{type:"Feature",properties:{"Unique Key":51727252,"Created Date":"09/01/2021 09:50:00 PM","Closed Date":"09/05/2021 06:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"362 WEST  121 STREET","Street Name":"WEST  121 STREET","Cross Street 1":"MANHATTAN AVE","Cross Street 2":"MORNINGSIDE AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 06:20:00 PM","Community Board":"10 MANHATTAN",BBL:1019470060,Borough:"MANHATTAN","X Coordinate (State Plane)":996658,"Y Coordinate (State Plane)":233838,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.808498423505284,Longitude:-73.95517819566254,Location:"(40.808498423505284, -73.95517819566254)"},geometry:{type:"Point",coordinates:[-73.95517819566254,40.808498423505284]}},{type:"Feature",properties:{"Unique Key":51729745,"Created Date":"09/01/2021 09:54:00 PM","Closed Date":"09/02/2021 08:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10075,"Incident Address":"2 EAST END AVENUE","Street Name":"EAST END AVENUE","Cross Street 1":"E 79 ST","Cross Street 2":"E 80 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:30:00 AM","Community Board":"08 MANHATTAN",BBL:1015760023,Borough:"MANHATTAN","X Coordinate (State Plane)":998651,"Y Coordinate (State Plane)":219995,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77050008929813,Longitude:-73.94800850105914,Location:"(40.77050008929813, -73.94800850105914)"},geometry:{type:"Point",coordinates:[-73.94800850105914,40.77050008929813]}},{type:"Feature",properties:{"Unique Key":51728980,"Created Date":"09/01/2021 09:54:00 PM","Closed Date":"09/02/2021 02:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"347 EAST  104 STREET","Street Name":"EAST  104 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:45:00 AM","Community Board":"11 MANHATTAN",BBL:1016760022,Borough:"MANHATTAN","X Coordinate (State Plane)":1000240,"Y Coordinate (State Plane)":226679,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78884316674628,Longitude:-73.94225587634332,Location:"(40.78884316674628, -73.94225587634332)"},geometry:{type:"Point",coordinates:[-73.94225587634332,40.78884316674628]}},{type:"Feature",properties:{"Unique Key":51713321,"Created Date":"09/01/2021 09:55:00 PM","Closed Date":"09/02/2021 02:15:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10025,"Incident Address":"255 WEST   93 STREET","Street Name":"WEST   93 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"WEST END AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:15:00 AM","Community Board":"07 MANHATTAN",BBL:1012410108,Borough:"MANHATTAN","X Coordinate (State Plane)":991496,"Y Coordinate (State Plane)":228190,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.793001949931174,Longitude:-73.97383114235681,Location:"(40.793001949931174, -73.97383114235681)"},geometry:{type:"Point",coordinates:[-73.97383114235681,40.793001949931174]}},{type:"Feature",properties:{"Unique Key":51720064,"Created Date":"09/01/2021 09:59:00 PM","Closed Date":"09/04/2021 09:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10014,"Incident Address":"68 JANE STREET","Street Name":"JANE STREET","Cross Street 1":"GREENWICH ST","Cross Street 2":"WASHINGTON ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 09:55:00 AM","Community Board":"02 MANHATTAN",BBL:1006410052,Borough:"MANHATTAN","X Coordinate (State Plane)":982387,"Y Coordinate (State Plane)":208198,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73813185551251,Longitude:-74.00672266526844,Location:"(40.73813185551251, -74.00672266526844)"},geometry:{type:"Point",coordinates:[-74.00672266526844,40.73813185551251]}},{type:"Feature",properties:{"Unique Key":51715790,"Created Date":"09/01/2021 10:02:00 PM","Closed Date":"09/02/2021 02:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10128,"Incident Address":"1724 2 AVENUE","Street Name":"2 AVENUE","Cross Street 1":"E 89 ST","Cross Street 2":"E 90 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:00:00 AM","Community Board":"08 MANHATTAN",BBL:1015527501,Borough:"MANHATTAN","X Coordinate (State Plane)":998076,"Y Coordinate (State Plane)":223511,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.780151502574405,Longitude:-73.95007717156378,Location:"(40.780151502574405, -73.95007717156378)"},geometry:{type:"Point",coordinates:[-73.95007717156378,40.780151502574405]}},{type:"Feature",properties:{"Unique Key":51726619,"Created Date":"09/01/2021 10:02:00 PM","Closed Date":"09/02/2021 12:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10019,"Incident Address":"363 WEST   51 STREET","Street Name":"WEST   51 STREET","Cross Street 1":"8 AVE","Cross Street 2":"9 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 12:35:00 AM","Community Board":"04 MANHATTAN",BBL:1010420005,Borough:"MANHATTAN","X Coordinate (State Plane)":987642,"Y Coordinate (State Plane)":217554,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76381125651034,Longitude:-73.98775519452555,Location:"(40.76381125651034, -73.98775519452555)"},geometry:{type:"Point",coordinates:[-73.98775519452555,40.76381125651034]}},{type:"Feature",properties:{"Unique Key":51717914,"Created Date":"09/01/2021 10:06:00 PM","Closed Date":"09/05/2021 05:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"210 WEST  138 STREET","Street Name":"WEST  138 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 05:20:00 PM","Community Board":"10 MANHATTAN",BBL:1020230140,Borough:"MANHATTAN","X Coordinate (State Plane)":1000028,"Y Coordinate (State Plane)":237123,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.817509455144986,Longitude:-73.94299692089366,Location:"(40.817509455144986, -73.94299692089366)"},geometry:{type:"Point",coordinates:[-73.94299692089366,40.817509455144986]}},{type:"Feature",properties:{"Unique Key":51719482,"Created Date":"09/01/2021 10:06:00 PM","Closed Date":"09/01/2021 10:35:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10013,"Incident Address":"4 CENTRE MARKET PLACE","Street Name":"CENTRE MARKET PLACE","Cross Street 1":"BAXTER ST","Cross Street 2":"BROOME ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 10:35:00 PM","Community Board":"02 MANHATTAN",BBL:1004710004,Borough:"MANHATTAN","X Coordinate (State Plane)":984838,"Y Coordinate (State Plane)":201535,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71984372456594,Longitude:-73.9978787748311,Location:"(40.71984372456594, -73.9978787748311)"},geometry:{type:"Point",coordinates:[-73.9978787748311,40.71984372456594]}},{type:"Feature",properties:{"Unique Key":51718250,"Created Date":"09/01/2021 10:11:00 PM","Closed Date":"09/05/2021 06:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"537 WEST  217 STREET","Street Name":"WEST  217 STREET","Cross Street 1":"PARK TER E","Cross Street 2":"PARK TER W","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 06:00:00 PM","Community Board":"12 MANHATTAN",BBL:1022430300,Borough:"MANHATTAN","X Coordinate (State Plane)":1007411,"Y Coordinate (State Plane)":256717,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.87127294149584,Longitude:-73.91625580623466,Location:"(40.87127294149584, -73.91625580623466)"},geometry:{type:"Point",coordinates:[-73.91625580623466,40.87127294149584]}},{type:"Feature",properties:{"Unique Key":51726864,"Created Date":"09/01/2021 10:11:00 PM","Closed Date":"09/05/2021 04:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"152 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"ACADEMY ST","Cross Street 2":"W 204 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 04:45:00 PM","Community Board":"12 MANHATTAN",BBL:1022250038,Borough:"MANHATTAN","X Coordinate (State Plane)":1005496,"Y Coordinate (State Plane)":254294,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.86462736420933,Longitude:-73.92318763020528,Location:"(40.86462736420933, -73.92318763020528)"},geometry:{type:"Point",coordinates:[-73.92318763020528,40.86462736420933]}},{type:"Feature",properties:{"Unique Key":51716015,"Created Date":"09/01/2021 10:12:00 PM","Closed Date":"09/02/2021 01:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10014,"Incident Address":"180 CHRISTOPHER STREET","Street Name":"CHRISTOPHER STREET","Cross Street 1":"WASHINGTON ST","Cross Street 2":"WEEHAWKEN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:00:00 AM","Community Board":"02 MANHATTAN",BBL:1006040003,Borough:"MANHATTAN","X Coordinate (State Plane)":981500,"Y Coordinate (State Plane)":206122,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73243351620026,Longitude:-74.00992257034451,Location:"(40.73243351620026, -74.00992257034451)"},geometry:{type:"Point",coordinates:[-74.00992257034451,40.73243351620026]}},{type:"Feature",properties:{"Unique Key":51718316,"Created Date":"09/01/2021 10:15:00 PM","Closed Date":"09/02/2021 01:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10023,"Incident Address":"55 WEST   69 STREET","Street Name":"WEST   69 STREET","Cross Street 1":"CENTRAL PARK W","Cross Street 2":"COLUMBUS AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:40:00 AM","Community Board":"07 MANHATTAN",BBL:1011220007,Borough:"MANHATTAN","X Coordinate (State Plane)":989926,"Y Coordinate (State Plane)":221702,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.775195265693874,Longitude:-73.97950666341458,Location:"(40.775195265693874, -73.97950666341458)"},geometry:{type:"Point",coordinates:[-73.97950666341458,40.775195265693874]}},{type:"Feature",properties:{"Unique Key":51720241,"Created Date":"09/01/2021 10:15:00 PM","Closed Date":"09/02/2021 12:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10065,"Incident Address":"333 EAST   66 STREET","Street Name":"EAST   66 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 12:30:00 AM","Community Board":"08 MANHATTAN",BBL:1014410017,Borough:"MANHATTAN","X Coordinate (State Plane)":995262,"Y Coordinate (State Plane)":217850,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76461749257886,Longitude:-73.9602472186511,Location:"(40.76461749257886, -73.9602472186511)"},geometry:{type:"Point",coordinates:[-73.9602472186511,40.76461749257886]}},{type:"Feature",properties:{"Unique Key":51714811,"Created Date":"09/01/2021 10:18:00 PM","Closed Date":"09/01/2021 10:25:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10033,"Incident Address":"554 WEST  181 STREET","Street Name":"WEST  181 STREET","Cross Street 1":"AUDUBON AVE","Cross Street 2":"ST NICHOLAS AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 10:25:00 PM","Community Board":"12 MANHATTAN",BBL:1021530068,Borough:"MANHATTAN","X Coordinate (State Plane)":1002821,"Y Coordinate (State Plane)":248581,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.84895292564862,Longitude:-73.93287459602605,Location:"(40.84895292564862, -73.93287459602605)"},geometry:{type:"Point",coordinates:[-73.93287459602605,40.84895292564862]}},{type:"Feature",properties:{"Unique Key":51713862,"Created Date":"09/01/2021 10:18:00 PM","Closed Date":"09/02/2021 11:23:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"347 EAST  104 STREET","Street Name":"EAST  104 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has determined that this issue was previously reported by another customer The original complaint is being addressed. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 11:23:00 PM","Community Board":"11 MANHATTAN",BBL:1016760022,Borough:"MANHATTAN","X Coordinate (State Plane)":1000240,"Y Coordinate (State Plane)":226679,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78884316674628,Longitude:-73.94225587634332,Location:"(40.78884316674628, -73.94225587634332)"},geometry:{type:"Point",coordinates:[-73.94225587634332,40.78884316674628]}},{type:"Feature",properties:{"Unique Key":51729796,"Created Date":"09/01/2021 10:18:00 PM","Closed Date":"09/02/2021 11:23:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10014,"Incident Address":"180 CHRISTOPHER STREET","Street Name":"CHRISTOPHER STREET","Cross Street 1":"WASHINGTON ST","Cross Street 2":"WEEHAWKEN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has determined that this issue was previously reported by another customer The original complaint is being addressed. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 11:23:00 PM","Community Board":"02 MANHATTAN",BBL:1006040003,Borough:"MANHATTAN","X Coordinate (State Plane)":981500,"Y Coordinate (State Plane)":206122,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73243351620026,Longitude:-74.00992257034451,Location:"(40.73243351620026, -74.00992257034451)"},geometry:{type:"Point",coordinates:[-74.00992257034451,40.73243351620026]}},{type:"Feature",properties:{"Unique Key":51716344,"Created Date":"09/01/2021 10:23:00 PM","Closed Date":"09/02/2021 08:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10009,"Incident Address":"158 EAST    7 STREET","Street Name":"EAST    7 STREET","Cross Street 1":"AVENUE A","Cross Street 2":"AVENUE B","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:50:00 AM","Community Board":"03 MANHATTAN",BBL:1004020023,Borough:"MANHATTAN","X Coordinate (State Plane)":989143,"Y Coordinate (State Plane)":203612,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7255432534672,Longitude:-73.98234686650702,Location:"(40.7255432534672, -73.98234686650702)"},geometry:{type:"Point",coordinates:[-73.98234686650702,40.7255432534672]}},{type:"Feature",properties:{"Unique Key":51720330,"Created Date":"09/01/2021 10:24:00 PM","Closed Date":"09/02/2021 03:05:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"65 EAST  112 STREET","Street Name":"EAST  112 STREET","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 03:05:00 AM","Community Board":"11 MANHATTAN",BBL:1016200023,Borough:"MANHATTAN","X Coordinate (State Plane)":999309,"Y Coordinate (State Plane)":229648,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79699390401083,Longitude:-73.94561130581198,Location:"(40.79699390401083, -73.94561130581198)"},geometry:{type:"Point",coordinates:[-73.94561130581198,40.79699390401083]}},{type:"Feature",properties:{"Unique Key":51728422,"Created Date":"09/01/2021 10:31:00 PM","Closed Date":"09/01/2021 10:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10029,"Incident Address":"88 EAST  111 STREET","Street Name":"EAST  111 STREET","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 10:45:00 PM","Community Board":"11 MANHATTAN",BBL:1016160039,Borough:"MANHATTAN","X Coordinate (State Plane)":999217,"Y Coordinate (State Plane)":229384,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79626945215548,Longitude:-73.94594417115646,Location:"(40.79626945215548, -73.94594417115646)"},geometry:{type:"Point",coordinates:[-73.94594417115646,40.79626945215548]}},{type:"Feature",properties:{"Unique Key":51723058,"Created Date":"09/01/2021 10:44:00 PM","Closed Date":"09/02/2021 09:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10025,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"AMSTERDAM AVENUE","Intersection Street 2":"WEST 107 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 09:30:00 AM","Community Board":"07 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":993881,"Y Coordinate (State Plane)":231145,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.801110343737164,Longitude:-73.96521350110491,Location:"(40.801110343737164, -73.96521350110491)"},geometry:{type:"Point",coordinates:[-73.96521350110491,40.801110343737164]}},{type:"Feature",properties:{"Unique Key":51724379,"Created Date":"09/01/2021 10:48:00 PM","Closed Date":"09/02/2021 10:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10027,"Incident Address":"17 WEST  123 STREET","Street Name":"WEST  123 STREET","Cross Street 1":"MT MORRIS PARK W","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 10:30:00 AM","Community Board":"10 MANHATTAN",BBL:1017210044,Borough:"MANHATTAN","X Coordinate (State Plane)":999417,"Y Coordinate (State Plane)":232913,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80595524891542,Longitude:-73.94521386633252,Location:"(40.80595524891542, -73.94521386633252)"},geometry:{type:"Point",coordinates:[-73.94521386633252,40.80595524891542]}},{type:"Feature",properties:{"Unique Key":51713028,"Created Date":"09/01/2021 10:48:00 PM","Closed Date":"09/04/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10029,"Incident Address":"172 EAST  108 STREET","Street Name":"EAST  108 STREET","Cross Street 1":"LEXINGTON AVE","Cross Street 2":"3 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 01:30:00 PM","Community Board":"11 MANHATTAN",BBL:1016350044,Borough:"MANHATTAN","X Coordinate (State Plane)":999620,"Y Coordinate (State Plane)":228262,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79318917480376,Longitude:-73.94449123736395,Location:"(40.79318917480376, -73.94449123736395)"},geometry:{type:"Point",coordinates:[-73.94449123736395,40.79318917480376]}},{type:"Feature",properties:{"Unique Key":51714222,"Created Date":"09/01/2021 10:49:00 PM","Closed Date":"09/02/2021 09:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10007,"Incident Address":"275 GREENWICH STREET","Street Name":"GREENWICH STREET","Cross Street 1":"MURRAY ST","Cross Street 2":"WARREN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 09:50:00 AM","Community Board":"01 MANHATTAN",BBL:1001327501,Borough:"MANHATTAN","X Coordinate (State Plane)":981134,"Y Coordinate (State Plane)":199851,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71522101949389,Longitude:-74.01124027078625,Location:"(40.71522101949389, -74.01124027078625)"},geometry:{type:"Point",coordinates:[-74.01124027078625,40.71522101949389]}},{type:"Feature",properties:{"Unique Key":51715838,"Created Date":"09/01/2021 10:51:00 PM","Closed Date":"09/02/2021 02:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10128,"Incident Address":"305 EAST   95 STREET","Street Name":"EAST   95 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:20:00 AM","Community Board":"08 MANHATTAN",BBL:1015580005,Borough:"MANHATTAN","X Coordinate (State Plane)":998885,"Y Coordinate (State Plane)":224694,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78339722067606,Longitude:-73.947153463463,Location:"(40.78339722067606, -73.947153463463)"},geometry:{type:"Point",coordinates:[-73.947153463463,40.78339722067606]}},{type:"Feature",properties:{"Unique Key":51716277,"Created Date":"09/01/2021 11:07:00 PM","Closed Date":"09/02/2021 10:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10019,"Incident Address":"714 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 49 ST","Cross Street 2":"W 50 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 10:10:00 AM","Community Board":"04 MANHATTAN",BBL:1010590001,Borough:"MANHATTAN","X Coordinate (State Plane)":986443,"Y Coordinate (State Plane)":217716,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76425628344515,Longitude:-73.99208342046582,Location:"(40.76425628344515, -73.99208342046582)"},geometry:{type:"Point",coordinates:[-73.99208342046582,40.76425628344515]}},{type:"Feature",properties:{"Unique Key":51715949,"Created Date":"09/01/2021 11:07:00 PM","Closed Date":"09/03/2021 11:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"236 WEST  138 STREET","Street Name":"WEST  138 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 11:30:00 AM","Community Board":"10 MANHATTAN",BBL:1020230053,Borough:"MANHATTAN","X Coordinate (State Plane)":999744,"Y Coordinate (State Plane)":237281,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81794362336055,Longitude:-73.94402259680882,Location:"(40.81794362336055, -73.94402259680882)"},geometry:{type:"Point",coordinates:[-73.94402259680882,40.81794362336055]}},{type:"Feature",properties:{"Unique Key":51713386,"Created Date":"09/01/2021 11:15:00 PM","Closed Date":"09/03/2021 02:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"23 EAST  109 STREET","Street Name":"EAST  109 STREET","Cross Street 1":"5 AVE","Cross Street 2":"MADISON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 02:30:00 PM","Community Board":"11 MANHATTAN",BBL:1016150014,Borough:"MANHATTAN","X Coordinate (State Plane)":998487,"Y Coordinate (State Plane)":229196,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79575464954403,Longitude:-73.9485810864412,Location:"(40.79575464954403, -73.9485810864412)"},geometry:{type:"Point",coordinates:[-73.9485810864412,40.79575464954403]}},{type:"Feature",properties:{"Unique Key":51718502,"Created Date":"09/01/2021 11:17:00 PM","Closed Date":"09/02/2021 10:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10013,"Incident Address":"26 THOMPSON STREET","Street Name":"THOMPSON STREET","Cross Street 1":"GRAND ST","Cross Street 2":"WATTS ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 10:30:00 AM","Community Board":"02 MANHATTAN",BBL:1004760054,Borough:"MANHATTAN","X Coordinate (State Plane)":983067,"Y Coordinate (State Plane)":202654,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.722915049889664,Longitude:-74.0042678996973,Location:"(40.722915049889664, -74.0042678996973)"},geometry:{type:"Point",coordinates:[-74.0042678996973,40.722915049889664]}},{type:"Feature",properties:{"Unique Key":51713383,"Created Date":"09/01/2021 11:21:00 PM","Closed Date":"09/03/2021 09:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10031,"Incident Address":"551 WEST  149 STREET","Street Name":"WEST  149 STREET","Cross Street 1":"AMSTERDAM AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:45:00 AM","Community Board":"09 MANHATTAN",BBL:1020810010,Borough:"MANHATTAN","X Coordinate (State Plane)":998881,"Y Coordinate (State Plane)":241079,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8283695267462,Longitude:-73.94713219888115,Location:"(40.8283695267462, -73.94713219888115)"},geometry:{type:"Point",coordinates:[-73.94713219888115,40.8283695267462]}},{type:"Feature",properties:{"Unique Key":51721620,"Created Date":"09/01/2021 11:29:00 PM","Closed Date":"09/03/2021 01:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10034,"Incident Address":"132 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"DYCKMAN ST","Cross Street 2":"ACADEMY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:35:00 AM","Community Board":"12 MANHATTAN",BBL:1022240031,Borough:"MANHATTAN","X Coordinate (State Plane)":1005174,"Y Coordinate (State Plane)":254136,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.864194471327956,Longitude:-73.92435227538378,Location:"(40.864194471327956, -73.92435227538378)"},geometry:{type:"Point",coordinates:[-73.92435227538378,40.864194471327956]}},{type:"Feature",properties:{"Unique Key":51713050,"Created Date":"09/01/2021 11:30:00 PM","Closed Date":"09/02/2021 04:15:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10030,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"FREDERICK DOUGLAS BOULEVARD","Intersection Street 2":"WEST 145 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 04:15:00 AM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1000326,"Y Coordinate (State Plane)":239064,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.822836414306245,Longitude:-73.94191565088148,Location:"(40.822836414306245, -73.94191565088148)"},geometry:{type:"Point",coordinates:[-73.94191565088148,40.822836414306245]}},{type:"Feature",properties:{"Unique Key":51722530,"Created Date":"09/01/2021 11:34:00 PM","Closed Date":"09/03/2021 03:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"132 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"DYCKMAN ST","Cross Street 2":"ACADEMY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 03:30:00 PM","Community Board":"12 MANHATTAN",BBL:1022240031,Borough:"MANHATTAN","X Coordinate (State Plane)":1005174,"Y Coordinate (State Plane)":254136,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.864194471327956,Longitude:-73.92435227538378,Location:"(40.864194471327956, -73.92435227538378)"},geometry:{type:"Point",coordinates:[-73.92435227538378,40.864194471327956]}},{type:"Feature",properties:{"Unique Key":51728851,"Created Date":"09/01/2021 11:35:00 PM","Closed Date":"09/02/2021 05:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10009,"Incident Address":"368 EAST   10 STREET","Street Name":"EAST   10 STREET","Cross Street 1":"AVENUE B","Cross Street 2":"AVENUE C","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:15:00 PM","Community Board":"03 MANHATTAN",BBL:1003920017,Borough:"MANHATTAN","X Coordinate (State Plane)":990147,"Y Coordinate (State Plane)":203911,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72636332342909,Longitude:-73.97872433894062,Location:"(40.72636332342909, -73.97872433894062)"},geometry:{type:"Point",coordinates:[-73.97872433894062,40.72636332342909]}},{type:"Feature",properties:{"Unique Key":51728630,"Created Date":"09/01/2021 11:35:00 PM","Closed Date":"09/04/2021 09:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10034,"Incident Address":"132 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"DYCKMAN ST","Cross Street 2":"ACADEMY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 09:10:00 AM","Community Board":"12 MANHATTAN",BBL:1022240031,Borough:"MANHATTAN","X Coordinate (State Plane)":1005174,"Y Coordinate (State Plane)":254136,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.864194471327956,Longitude:-73.92435227538378,Location:"(40.864194471327956, -73.92435227538378)"},geometry:{type:"Point",coordinates:[-73.92435227538378,40.864194471327956]}},{type:"Feature",properties:{"Unique Key":51721821,"Created Date":"09/01/2021 11:39:00 PM","Closed Date":"09/03/2021 03:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10039,"Incident Address":"210 WEST  150 STREET","Street Name":"WEST  150 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 03:00:00 AM","Community Board":"10 MANHATTAN",BBL:1020350001,Borough:"MANHATTAN","X Coordinate (State Plane)":1001574,"Y Coordinate (State Plane)":239877,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8250655085719,Longitude:-73.9374043925822,Location:"(40.8250655085719, -73.9374043925822)"},geometry:{type:"Point",coordinates:[-73.9374043925822,40.8250655085719]}},{type:"Feature",properties:{"Unique Key":51713303,"Created Date":"09/01/2021 11:42:00 PM","Closed Date":"09/03/2021 12:25:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10001,"Incident Address":"427 WEST   26 STREET","Street Name":"WEST   26 STREET","Cross Street 1":"9 AVE","Cross Street 2":"10 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 12:25:00 PM","Community Board":"04 MANHATTAN",BBL:1007240015,Borough:"MANHATTAN","X Coordinate (State Plane)":983840,"Y Coordinate (State Plane)":212178,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.749056147946476,Longitude:-74.00147973416202,Location:"(40.749056147946476, -74.00147973416202)"},geometry:{type:"Point",coordinates:[-74.00147973416202,40.749056147946476]}},{type:"Feature",properties:{"Unique Key":51723331,"Created Date":"09/01/2021 11:43:00 PM","Closed Date":"09/03/2021 03:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10021,"Incident Address":"321 EAST   69 STREET","Street Name":"EAST   69 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 03:40:00 AM","Community Board":"08 MANHATTAN",BBL:1014440013,Borough:"MANHATTAN","X Coordinate (State Plane)":995721,"Y Coordinate (State Plane)":218491,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.766376288022975,Longitude:-73.9585891574314,Location:"(40.766376288022975, -73.9585891574314)"},geometry:{type:"Point",coordinates:[-73.9585891574314,40.766376288022975]}},{type:"Feature",properties:{"Unique Key":51729222,"Created Date":"09/01/2021 11:45:00 PM","Closed Date":"09/03/2021 12:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10027,"Incident Address":"316 WEST  121 STREET","Street Name":"WEST  121 STREET","Cross Street 1":"8 AVE","Cross Street 2":"MANHATTAN AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection inspected your complaint and cleaned the catch basin or inlet. If the condition returns, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:15:00 PM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":997015,"Y Coordinate (State Plane)":233641,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.807957204492084,Longitude:-73.95388896829371,Location:"(40.807957204492084, -73.95388896829371)"},geometry:{type:"Point",coordinates:[-73.95388896829371,40.807957204492084]}},{type:"Feature",properties:{"Unique Key":51727346,"Created Date":"09/01/2021 11:53:00 PM","Closed Date":"09/03/2021 10:15:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10031,"Incident Address":"611 WEST  148 STREET","Street Name":"WEST  148 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"RIVERSIDE DR","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:15:00 AM","Community Board":"09 MANHATTAN",BBL:1020950023,Borough:"MANHATTAN","X Coordinate (State Plane)":998139,"Y Coordinate (State Plane)":241193,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.82868362208559,Longitude:-73.94981311246337,Location:"(40.82868362208559, -73.94981311246337)"},geometry:{type:"Point",coordinates:[-73.94981311246337,40.82868362208559]}},{type:"Feature",properties:{"Unique Key":51719915,"Created Date":"09/01/2021 11:54:00 PM","Closed Date":"09/03/2021 11:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10027,"Incident Address":"15 WEST  123 STREET","Street Name":"WEST  123 STREET","Cross Street 1":"MT MORRIS PARK W","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection inspected your complaint and cleaned the catch basin or inlet. If the condition returns, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:40:00 AM","Community Board":"10 MANHATTAN",BBL:1017210045,Borough:"MANHATTAN","X Coordinate (State Plane)":999429,"Y Coordinate (State Plane)":232906,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80593601524096,Longitude:-73.9451705358527,Location:"(40.80593601524096, -73.9451705358527)"},geometry:{type:"Point",coordinates:[-73.9451705358527,40.80593601524096]}},{type:"Feature",properties:{"Unique Key":51716520,"Created Date":"09/02/2021 12:02:00 AM","Closed Date":"09/03/2021 10:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10031,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"RIVERSIDE DRIVE","Intersection Street 2":"WEST 150 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 10:50:00 AM","Community Board":"09 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":998173,"Y Coordinate (State Plane)":241761,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.830242565707835,Longitude:-73.94968907717427,Location:"(40.830242565707835, -73.94968907717427)"},geometry:{type:"Point",coordinates:[-73.94968907717427,40.830242565707835]}},{type:"Feature",properties:{"Unique Key":51715442,"Created Date":"09/02/2021 12:05:00 AM","Closed Date":"09/03/2021 11:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10019,"Incident Address":"714 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 49 ST","Cross Street 2":"W 50 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:10:00 AM","Community Board":"04 MANHATTAN",BBL:1010590001,Borough:"MANHATTAN","X Coordinate (State Plane)":986443,"Y Coordinate (State Plane)":217716,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76425628344515,Longitude:-73.99208342046582,Location:"(40.76425628344515, -73.99208342046582)"},geometry:{type:"Point",coordinates:[-73.99208342046582,40.76425628344515]}},{type:"Feature",properties:{"Unique Key":51720213,"Created Date":"09/02/2021 12:06:00 AM","Closed Date":"09/04/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10014,"Incident Address":"31 CORNELIA STREET","Street Name":"CORNELIA STREET","Cross Street 1":"W 4 ST","Cross Street 2":"BLEECKER ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/04/2021 01:30:00 PM","Community Board":"02 MANHATTAN",BBL:1005900047,Borough:"MANHATTAN","X Coordinate (State Plane)":983580,"Y Coordinate (State Plane)":205721,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73133327170276,Longitude:-74.0024174590359,Location:"(40.73133327170276, -74.0024174590359)"},geometry:{type:"Point",coordinates:[-74.0024174590359,40.73133327170276]}},{type:"Feature",properties:{"Unique Key":51727333,"Created Date":"09/02/2021 12:14:00 AM","Closed Date":"09/03/2021 11:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10039,"Incident Address":"255 WEST  148 STREET","Street Name":"WEST  148 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:10:00 AM","Community Board":"10 MANHATTAN",BBL:1020347501,Borough:"MANHATTAN","X Coordinate (State Plane)":1001071,"Y Coordinate (State Plane)":239571,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8242265979182,Longitude:-73.93922261412608,Location:"(40.8242265979182, -73.93922261412608)"},geometry:{type:"Point",coordinates:[-73.93922261412608,40.8242265979182]}},{type:"Feature",properties:{"Unique Key":51724821,"Created Date":"09/02/2021 12:14:00 AM","Closed Date":"09/03/2021 10:25:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"304 WEST  140 STREET","Street Name":"WEST  140 STREET","Cross Street 1":"FREDERICK DOUGLASS BLVD","Cross Street 2":"EDGECOMBE AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:25:00 AM","Community Board":"10 MANHATTAN",BBL:1020420020,Borough:"MANHATTAN","X Coordinate (State Plane)":999589,"Y Coordinate (State Plane)":237961,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81981030212251,Longitude:-73.94458103319248,Location:"(40.81981030212251, -73.94458103319248)"},geometry:{type:"Point",coordinates:[-73.94458103319248,40.81981030212251]}},{type:"Feature",properties:{"Unique Key":51715604,"Created Date":"09/02/2021 12:17:00 AM","Closed Date":"09/03/2021 10:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10037,"Incident Address":"2301 5 AVENUE","Street Name":"5 AVENUE","Cross Street 1":"HARLEM RIVER DRV NB EN E 139 ST","Cross Street 2":"W 141 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:45:00 AM","Community Board":"11 MANHATTAN",BBL:1017640001,Borough:"MANHATTAN","X Coordinate (State Plane)":1002072,"Y Coordinate (State Plane)":236393,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.815501923082124,Longitude:-73.93561425716618,Location:"(40.815501923082124, -73.93561425716618)"},geometry:{type:"Point",coordinates:[-73.93561425716618,40.815501923082124]}},{type:"Feature",properties:{"Unique Key":51726831,"Created Date":"09/02/2021 12:45:00 AM","Closed Date":"09/03/2021 05:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10013,"Incident Address":"137 WEST BROADWAY","Street Name":"WEST BROADWAY","Cross Street 1":"DUANE ST","Cross Street 2":"THOMAS ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 05:40:00 PM","Community Board":"01 MANHATTAN",BBL:1001470013,Borough:"MANHATTAN","X Coordinate (State Plane)":981978,"Y Coordinate (State Plane)":200428,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71680500334347,Longitude:-74.00819592493981,Location:"(40.71680500334347, -74.00819592493981)"},geometry:{type:"Point",coordinates:[-74.00819592493981,40.71680500334347]}},{type:"Feature",properties:{"Unique Key":51719800,"Created Date":"09/02/2021 12:45:00 AM","Closed Date":"09/02/2021 01:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10014,"Incident Address":"561 WEST STREET","Street Name":"WEST STREET","Cross Street 1":"GANSEVOORT ST","Cross Street 2":"LITTLE WEST 12 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 01:15:00 PM","Community Board":"02 MANHATTAN",BBL:1006440001,Borough:"MANHATTAN","X Coordinate (State Plane)":981694,"Y Coordinate (State Plane)":208934,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.740151819776095,Longitude:-74.00922364647828,Location:"(40.740151819776095, -74.00922364647828)"},geometry:{type:"Point",coordinates:[-74.00922364647828,40.740151819776095]}},{type:"Feature",properties:{"Unique Key":51713592,"Created Date":"09/02/2021 01:16:00 AM","Closed Date":"09/03/2021 09:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10031,"Incident Address":"511 WEST  152 STREET","Street Name":"WEST  152 STREET","Cross Street 1":"AMSTERDAM AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:30:00 AM","Community Board":"09 MANHATTAN",BBL:1020840124,Borough:"MANHATTAN","X Coordinate (State Plane)":999459,"Y Coordinate (State Plane)":241651,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.829938526400326,Longitude:-73.94504235172789,Location:"(40.829938526400326, -73.94504235172789)"},geometry:{type:"Point",coordinates:[-73.94504235172789,40.829938526400326]}},{type:"Feature",properties:{"Unique Key":51713564,"Created Date":"09/02/2021 03:52:00 AM","Closed Date":"09/03/2021 09:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"319 EAST  105 STREET","Street Name":"EAST  105 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:10:00 AM","Community Board":"11 MANHATTAN",BBL:1016777503,Borough:"MANHATTAN","X Coordinate (State Plane)":1000352,"Y Coordinate (State Plane)":226920,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78950444356466,Longitude:-73.94185083707163,Location:"(40.78950444356466, -73.94185083707163)"},geometry:{type:"Point",coordinates:[-73.94185083707163,40.78950444356466]}},{type:"Feature",properties:{"Unique Key":51719673,"Created Date":"09/02/2021 04:51:00 AM","Closed Date":"09/04/2021 11:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10009,"Incident Address":"24 AVENUE D","Street Name":"AVENUE D","Cross Street 1":"E 3 ST","Cross Street 2":"E 4 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/04/2021 11:40:00 AM","Community Board":"03 MANHATTAN",BBL:1003560001,Borough:"MANHATTAN","X Coordinate (State Plane)":990311,"Y Coordinate (State Plane)":201880,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72078860967276,Longitude:-73.97813447592229,Location:"(40.72078860967276, -73.97813447592229)"},geometry:{type:"Point",coordinates:[-73.97813447592229,40.72078860967276]}},{type:"Feature",properties:{"Unique Key":51727464,"Created Date":"09/02/2021 05:04:00 AM","Closed Date":"09/03/2021 11:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10018,"Incident Address":"465 12 AVENUE","Street Name":"12 AVENUE","Cross Street 1":"W 40 ST","Cross Street 2":"W 41 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:30:00 AM","Community Board":"04 MANHATTAN",BBL:1011070005,Borough:"MANHATTAN","X Coordinate (State Plane)":983670,"Y Coordinate (State Plane)":216500,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76091892934369,Longitude:-74.00209365529308,Location:"(40.76091892934369, -74.00209365529308)"},geometry:{type:"Point",coordinates:[-74.00209365529308,40.76091892934369]}},{type:"Feature",properties:{"Unique Key":51727072,"Created Date":"09/02/2021 05:52:00 AM","Closed Date":"12/24/2021 02:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10027,"Incident Address":"WEST  124 STREET","Street Name":"WEST  124 STREET","Cross Street 1":"FREDERICK DOUGLASS BOULEVARD","Cross Street 2":"MANHATTAN AVENUE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"BLOCKFACE",City:"MANHATTAN",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and has performed repair work.","Resolution Action Updated Date":"12/24/2021 02:20:00 PM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":997434,"Y Coordinate (State Plane)":234309,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80979006390317,Longitude:-73.95237410222053,Location:"(40.80979006390317, -73.95237410222053)"},geometry:{type:"Point",coordinates:[-73.95237410222053,40.80979006390317]}},{type:"Feature",properties:{"Unique Key":51713685,"Created Date":"09/02/2021 06:31:00 AM","Closed Date":"09/02/2021 08:25:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10039,"Incident Address":"2987 8 AVENUE","Street Name":"8 AVENUE","Cross Street 1":"HARLEM RIVER DRIVE SERVICE RD W","Cross Street 2":"HARLEM RIVER DRIVE SERVICE RD W","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Surcharge conditions have been confirmed due to rain intensity or volume.","Resolution Action Updated Date":"09/02/2021 08:25:00 AM","Community Board":"10 MANHATTAN",BBL:1021060050,Borough:"MANHATTAN","X Coordinate (State Plane)":1001924,"Y Coordinate (State Plane)":241941,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.830729904331186,Longitude:-73.93613432501654,Location:"(40.830729904331186, -73.93613432501654)"},geometry:{type:"Point",coordinates:[-73.93613432501654,40.830729904331186]}},{type:"Feature",properties:{"Unique Key":51713670,"Created Date":"09/02/2021 06:37:00 AM","Closed Date":"09/03/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"1425 AMSTERDAM AVENUE","Street Name":"AMSTERDAM AVENUE","Cross Street 1":"W 130 ST","Cross Street 2":"W 131 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:30:00 PM","Community Board":"09 MANHATTAN",BBL:1019700002,Borough:"MANHATTAN","X Coordinate (State Plane)":996868,"Y Coordinate (State Plane)":236535,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.815900639148985,Longitude:-73.95441453630735,Location:"(40.815900639148985, -73.95441453630735)"},geometry:{type:"Point",coordinates:[-73.95441453630735,40.815900639148985]}},{type:"Feature",properties:{"Unique Key":51714435,"Created Date":"09/02/2021 07:15:00 AM","Closed Date":"09/03/2021 04:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10023,"Incident Address":"114 WEST   74 STREET","Street Name":"WEST   74 STREET","Cross Street 1":"COLUMBUS AVE","Cross Street 2":"AMSTERDAM AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 04:20:00 AM","Community Board":"07 MANHATTAN",BBL:1011450138,Borough:"MANHATTAN","X Coordinate (State Plane)":990226,"Y Coordinate (State Plane)":223077,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77896908082277,Longitude:-73.97842228324052,Location:"(40.77896908082277, -73.97842228324052)"},geometry:{type:"Point",coordinates:[-73.97842228324052,40.77896908082277]}},{type:"Feature",properties:{"Unique Key":51722884,"Created Date":"09/02/2021 08:03:00 AM","Closed Date":"09/03/2021 11:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10037,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"EAST 138 STREET","Intersection Street 2":"MADISON AVENUE","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:50:00 AM","Community Board":"11 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1002289,"Y Coordinate (State Plane)":235866,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8140550153757,Longitude:-73.93483171548912,Location:"(40.8140550153757, -73.93483171548912)"},geometry:{type:"Point",coordinates:[-73.93483171548912,40.8140550153757]}},{type:"Feature",properties:{"Unique Key":51729156,"Created Date":"09/02/2021 08:20:00 AM","Closed Date":"09/03/2021 10:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10030,"Incident Address":"297 WEST  137 STREET","Street Name":"WEST  137 STREET","Cross Street 1":"NEW YORK RENS CT","Cross Street 2":"8 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/03/2021 10:10:00 AM","Community Board":"10 MANHATTAN",BBL:1020237503,Borough:"MANHATTAN","X Coordinate (State Plane)":999435,"Y Coordinate (State Plane)":237161,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81761479370668,Longitude:-73.94513923679516,Location:"(40.81761479370668, -73.94513923679516)"},geometry:{type:"Point",coordinates:[-73.94513923679516,40.81761479370668]}},{type:"Feature",properties:{"Unique Key":51715157,"Created Date":"09/02/2021 08:34:00 AM","Closed Date":"09/03/2021 11:05:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10027,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"8 AVENUE","Intersection Street 2":"WEST 131 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/03/2021 11:05:00 AM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":998528,"Y Coordinate (State Plane)":235821,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81393838213159,Longitude:-73.9484189199214,Location:"(40.81393838213159, -73.9484189199214)"},geometry:{type:"Point",coordinates:[-73.9484189199214,40.81393838213159]}},{type:"Feature",properties:{"Unique Key":51722376,"Created Date":"09/02/2021 08:34:00 AM","Closed Date":"09/03/2021 12:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"227 WEST  137 STREET","Street Name":"WEST  137 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 12:30:00 PM","Community Board":"10 MANHATTAN",BBL:1020230118,Borough:"MANHATTAN","X Coordinate (State Plane)":999818,"Y Coordinate (State Plane)":236949,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81703224667031,Longitude:-73.94375601658022,Location:"(40.81703224667031, -73.94375601658022)"},geometry:{type:"Point",coordinates:[-73.94375601658022,40.81703224667031]}},{type:"Feature",properties:{"Unique Key":51718481,"Created Date":"09/02/2021 08:46:00 AM","Closed Date":"09/03/2021 12:10:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10013,"Incident Address":"340 WEST BROADWAY","Street Name":"WEST BROADWAY","Cross Street 1":"GRAND ST","Cross Street 2":"BROOME ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:10:00 PM","Community Board":"02 MANHATTAN",BBL:1004760081,Borough:"MANHATTAN","X Coordinate (State Plane)":983246,"Y Coordinate (State Plane)":202529,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72257197725354,Longitude:-74.00362210417377,Location:"(40.72257197725354, -74.00362210417377)"},geometry:{type:"Point",coordinates:[-74.00362210417377,40.72257197725354]}},{type:"Feature",properties:{"Unique Key":51722899,"Created Date":"09/02/2021 09:07:00 AM","Closed Date":"09/02/2021 12:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10035,"Incident Address":"2262 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 116 ST","Cross Street 2":"E 117 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 12:00:00 PM","Community Board":"11 MANHATTAN",BBL:1017100102,Borough:"MANHATTAN","X Coordinate (State Plane)":1002181,"Y Coordinate (State Plane)":229369,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.796222763838294,Longitude:-73.93523923204485,Location:"(40.796222763838294, -73.93523923204485)"},geometry:{type:"Point",coordinates:[-73.93523923204485,40.796222763838294]}},{type:"Feature",properties:{"Unique Key":51727462,"Created Date":"09/02/2021 09:07:00 AM","Closed Date":"09/03/2021 12:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10034,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"NAGLE AVENUE","Intersection Street 2":"ACADEMY STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:30:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1005689,"Y Coordinate (State Plane)":253487,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.862411927499416,Longitude:-73.92249244372366,Location:"(40.862411927499416, -73.92249244372366)"},geometry:{type:"Point",coordinates:[-73.92249244372366,40.862411927499416]}},{type:"Feature",properties:{"Unique Key":51724999,"Created Date":"09/02/2021 09:30:00 AM","Closed Date":"09/02/2021 01:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"201 LENOX AVENUE","Street Name":"LENOX AVENUE","Cross Street 1":"W 120 ST","Cross Street 2":"W 121 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:40:00 PM","Community Board":"10 MANHATTAN",BBL:1019050029,Borough:"MANHATTAN","X Coordinate (State Plane)":998715,"Y Coordinate (State Plane)":232450,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.804685618836274,Longitude:-73.94775062288356,Location:"(40.804685618836274, -73.94775062288356)"},geometry:{type:"Point",coordinates:[-73.94775062288356,40.804685618836274]}},{type:"Feature",properties:{"Unique Key":51724312,"Created Date":"09/02/2021 09:36:00 AM","Closed Date":"09/04/2021 03:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10034,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"ACADEMY STREET","Intersection Street 2":"10 AVENUE","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 03:00:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1005957,"Y Coordinate (State Plane)":252940,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.860909923099676,Longitude:-73.92152532619549,Location:"(40.860909923099676, -73.92152532619549)"},geometry:{type:"Point",coordinates:[-73.92152532619549,40.860909923099676]}},{type:"Feature",properties:{"Unique Key":51726481,"Created Date":"09/02/2021 09:36:00 AM","Closed Date":"09/04/2021 11:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10002,"Incident Address":"442 EAST HOUSTON STREET","Street Name":"EAST HOUSTON STREET","Cross Street 1":"LILLIAN WALD DR","Cross Street 2":"BARUCH DR","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 11:00:00 AM","Community Board":"03 MANHATTAN",BBL:1003560100,Borough:"MANHATTAN","X Coordinate (State Plane)":990375,"Y Coordinate (State Plane)":201446,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71959734020397,Longitude:-73.97790398594327,Location:"(40.71959734020397, -73.97790398594327)"},geometry:{type:"Point",coordinates:[-73.97790398594327,40.71959734020397]}},{type:"Feature",properties:{"Unique Key":51716469,"Created Date":"09/02/2021 09:40:00 AM","Closed Date":"09/03/2021 12:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10034,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"ACADEMY STREET","Intersection Street 2":"10 AVENUE","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:50:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1005957,"Y Coordinate (State Plane)":252940,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.860909923099676,Longitude:-73.92152532619549,Location:"(40.860909923099676, -73.92152532619549)"},geometry:{type:"Point",coordinates:[-73.92152532619549,40.860909923099676]}},{type:"Feature",properties:{"Unique Key":51718202,"Created Date":"09/02/2021 09:41:00 AM","Closed Date":"09/03/2021 12:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10001,"Incident Address":"313 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 28 ST","Cross Street 2":"W 29 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 12:00:00 PM","Community Board":"04 MANHATTAN",BBL:1007000029,Borough:"MANHATTAN","X Coordinate (State Plane)":983744,"Y Coordinate (State Plane)":212859,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.75092531614621,Longitude:-74.00182625974348,Location:"(40.75092531614621, -74.00182625974348)"},geometry:{type:"Point",coordinates:[-74.00182625974348,40.75092531614621]}},{type:"Feature",properties:{"Unique Key":51718333,"Created Date":"09/02/2021 09:52:00 AM","Closed Date":"09/03/2021 08:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10035,"Incident Address":"408 EAST  120 STREET","Street Name":"EAST  120 STREET","Cross Street 1":"1 AVE","Cross Street 2":"PLEASANT AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 08:30:00 AM","Community Board":"11 MANHATTAN",BBL:1018070044,Borough:"MANHATTAN","X Coordinate (State Plane)":1002770,"Y Coordinate (State Plane)":230164,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79840360723411,Longitude:-73.93310976954378,Location:"(40.79840360723411, -73.93310976954378)"},geometry:{type:"Point",coordinates:[-73.93310976954378,40.79840360723411]}},{type:"Feature",properties:{"Unique Key":51720568,"Created Date":"09/02/2021 09:53:00 AM","Closed Date":"09/02/2021 06:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10010,"Incident Address":"321 EAST   22 STREET","Street Name":"EAST   22 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 06:15:00 PM","Community Board":"06 MANHATTAN",BBL:1009280009,Borough:"MANHATTAN","X Coordinate (State Plane)":989603,"Y Coordinate (State Plane)":207762,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73693371969191,Longitude:-73.98068396117158,Location:"(40.73693371969191, -73.98068396117158)"},geometry:{type:"Point",coordinates:[-73.98068396117158,40.73693371969191]}},{type:"Feature",properties:{"Unique Key":51722637,"Created Date":"09/02/2021 09:59:00 AM","Closed Date":"09/04/2021 01:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10026,"Incident Address":"70 WEST  119 STREET","Street Name":"WEST  119 STREET","Cross Street 1":"5 AVE","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 01:00:00 PM","Community Board":"10 MANHATTAN",BBL:1017170063,Borough:"MANHATTAN","X Coordinate (State Plane)":998901,"Y Coordinate (State Plane)":231998,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80344469681812,Longitude:-73.94707975429094,Location:"(40.80344469681812, -73.94707975429094)"},geometry:{type:"Point",coordinates:[-73.94707975429094,40.80344469681812]}},{type:"Feature",properties:{"Unique Key":51715341,"Created Date":"09/02/2021 10:00:00 AM","Closed Date":"09/03/2021 12:55:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10065,"Incident Address":"416 EAST   65 STREET","Street Name":"EAST   65 STREET","Cross Street 1":"1 AVE","Cross Street 2":"YORK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:55:00 PM","Community Board":"08 MANHATTAN",BBL:1014590030,Borough:"MANHATTAN","X Coordinate (State Plane)":995790,"Y Coordinate (State Plane)":217253,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76297820824683,Longitude:-73.95834218965943,Location:"(40.76297820824683, -73.95834218965943)"},geometry:{type:"Point",coordinates:[-73.95834218965943,40.76297820824683]}},{type:"Feature",properties:{"Unique Key":51726617,"Created Date":"09/02/2021 10:02:00 AM","Closed Date":"09/02/2021 10:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10032,"Incident Address":"625 WEST  164 STREET","Street Name":"WEST  164 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"FT WASHINGTON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 10:50:00 AM","Community Board":"12 MANHATTAN",BBL:1021370152,Borough:"MANHATTAN","X Coordinate (State Plane)":1000210,"Y Coordinate (State Plane)":244845,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.83870380788671,Longitude:-73.94232101803048,Location:"(40.83870380788671, -73.94232101803048)"},geometry:{type:"Point",coordinates:[-73.94232101803048,40.83870380788671]}},{type:"Feature",properties:{"Unique Key":51729397,"Created Date":"09/02/2021 10:06:00 AM","Closed Date":"09/03/2021 01:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"120 WEST  127 STREET","Street Name":"WEST  127 STREET","Cross Street 1":"LENOX AVE","Cross Street 2":"ADAM CLAYTON POWELL JR BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:15:00 PM","Community Board":"10 MANHATTAN",BBL:1019110042,Borough:"MANHATTAN","X Coordinate (State Plane)":999366,"Y Coordinate (State Plane)":234177,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.809424666237135,Longitude:-73.94539524198386,Location:"(40.809424666237135, -73.94539524198386)"},geometry:{type:"Point",coordinates:[-73.94539524198386,40.809424666237135]}},{type:"Feature",properties:{"Unique Key":51719930,"Created Date":"09/02/2021 10:06:00 AM","Closed Date":"09/02/2021 10:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"198 NAGLE AVENUE","Street Name":"NAGLE AVENUE","Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 10:20:00 AM","Community Board":"12 MANHATTAN",BBL:1022170039,Borough:"MANHATTAN","X Coordinate (State Plane)":1005433,"Y Coordinate (State Plane)":253367,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.862083181837846,Longitude:-73.92341832905083,Location:"(40.862083181837846, -73.92341832905083)"},geometry:{type:"Point",coordinates:[-73.92341832905083,40.862083181837846]}},{type:"Feature",properties:{"Unique Key":51722163,"Created Date":"09/02/2021 10:14:00 AM","Closed Date":"09/03/2021 09:25:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10031,"Incident Address":"558 WEST  149 STREET","Street Name":"WEST  149 STREET","Cross Street 1":"AMSTERDAM AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 09:25:00 AM","Community Board":"09 MANHATTAN",BBL:1020800054,Borough:"MANHATTAN","X Coordinate (State Plane)":998834,"Y Coordinate (State Plane)":241098,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.82842175403897,Longitude:-73.94730198780587,Location:"(40.82842175403897, -73.94730198780587)"},geometry:{type:"Point",coordinates:[-73.94730198780587,40.82842175403897]}},{type:"Feature",properties:{"Unique Key":51722363,"Created Date":"09/02/2021 10:14:00 AM","Closed Date":"09/02/2021 06:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10010,"Incident Address":"121 EAST   24 STREET","Street Name":"EAST   24 STREET","Cross Street 1":"PARK AVE S","Cross Street 2":"LEXINGTON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 06:45:00 PM","Community Board":"05 MANHATTAN",BBL:1008800014,Borough:"MANHATTAN","X Coordinate (State Plane)":988436,"Y Coordinate (State Plane)":209042,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74044763163026,Longitude:-73.98489422703423,Location:"(40.74044763163026, -73.98489422703423)"},geometry:{type:"Point",coordinates:[-73.98489422703423,40.74044763163026]}},{type:"Feature",properties:{"Unique Key":51722292,"Created Date":"09/02/2021 10:15:00 AM","Closed Date":"09/03/2021 11:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10023,"Incident Address":"55 WEST END AVENUE","Street Name":"WEST END AVENUE","Cross Street 1":"W 62 ST","Cross Street 2":"THELONIOUS MONK CIR","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 11:00:00 AM","Community Board":"07 MANHATTAN",BBL:1011710063,Borough:"MANHATTAN","X Coordinate (State Plane)":987385,"Y Coordinate (State Plane)":221287,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77405746597447,Longitude:-73.9886811994225,Location:"(40.77405746597447, -73.9886811994225)"},geometry:{type:"Point",coordinates:[-73.9886811994225,40.77405746597447]}},{type:"Feature",properties:{"Unique Key":51713652,"Created Date":"09/02/2021 10:32:00 AM","Closed Date":"09/02/2021 05:05:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10009,"Incident Address":"111 EAST    7 STREET","Street Name":"EAST    7 STREET","Cross Street 1":"1 AVE","Cross Street 2":"AVENUE A","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:05:00 PM","Community Board":"03 MANHATTAN",BBL:1004350045,Borough:"MANHATTAN","X Coordinate (State Plane)":988474,"Y Coordinate (State Plane)":203988,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72657562678744,Longitude:-73.98476027163207,Location:"(40.72657562678744, -73.98476027163207)"},geometry:{type:"Point",coordinates:[-73.98476027163207,40.72657562678744]}},{type:"Feature",properties:{"Unique Key":51720132,"Created Date":"09/02/2021 10:33:00 AM","Closed Date":"09/03/2021 01:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10065,"Incident Address":"429 EAST   64 STREET","Street Name":"EAST   64 STREET","Cross Street 1":"1 AVE","Cross Street 2":"YORK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:15:00 PM","Community Board":"08 MANHATTAN",BBL:1014590022,Borough:"MANHATTAN","X Coordinate (State Plane)":995716,"Y Coordinate (State Plane)":217003,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.762292118946036,Longitude:-73.95860974584663,Location:"(40.762292118946036, -73.95860974584663)"},geometry:{type:"Point",coordinates:[-73.95860974584663,40.762292118946036]}},{type:"Feature",properties:{"Unique Key":51713711,"Created Date":"09/02/2021 10:38:00 AM","Closed Date":"09/03/2021 12:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"273 WEST  136 STREET","Street Name":"WEST  136 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Surcharge conditions have been confirmed due to rain intensity or volume.","Resolution Action Updated Date":"09/03/2021 12:45:00 PM","Community Board":"10 MANHATTAN",BBL:1019427501,Borough:"MANHATTAN","X Coordinate (State Plane)":999440,"Y Coordinate (State Plane)":236861,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8167913694731,Longitude:-73.94512185168155,Location:"(40.8167913694731, -73.94512185168155)"},geometry:{type:"Point",coordinates:[-73.94512185168155,40.8167913694731]}},{type:"Feature",properties:{"Unique Key":51723062,"Created Date":"09/02/2021 10:45:00 AM","Closed Date":"09/03/2021 08:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10035,"Incident Address":"2385 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 120 ST","Cross Street 2":"PALADINO AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 08:50:00 AM","Community Board":"11 MANHATTAN",BBL:1017970001,Borough:"MANHATTAN","X Coordinate (State Plane)":1002927,"Y Coordinate (State Plane)":230726,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.799945813070316,Longitude:-73.93254115658634,Location:"(40.799945813070316, -73.93254115658634)"},geometry:{type:"Point",coordinates:[-73.93254115658634,40.799945813070316]}},{type:"Feature",properties:{"Unique Key":51718705,"Created Date":"09/02/2021 10:53:00 AM","Closed Date":"09/03/2021 01:10:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10009,"Incident Address":"532 EAST   12 STREET","Street Name":"EAST   12 STREET","Cross Street 1":"AVENUE A","Cross Street 2":"AVENUE B","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:10:00 PM","Community Board":"03 MANHATTAN",BBL:1004050024,Borough:"MANHATTAN","X Coordinate (State Plane)":989669,"Y Coordinate (State Plane)":204765,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7287076510075,Longitude:-73.98044821721834,Location:"(40.7287076510075, -73.98044821721834)"},geometry:{type:"Point",coordinates:[-73.98044821721834,40.7287076510075]}},{type:"Feature",properties:{"Unique Key":51716384,"Created Date":"09/02/2021 10:57:00 AM","Closed Date":"09/03/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10048,"Incident Address":"138 WEST STREET","Street Name":"WEST STREET","Cross Street 1":"LIBERTY ST","Cross Street 2":"VESEY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:30:00 PM","Community Board":"01 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":980412,"Y Coordinate (State Plane)":199294,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71369190380233,Longitude:-74.01384440617939,Location:"(40.71369190380233, -74.01384440617939)"},geometry:{type:"Point",coordinates:[-74.01384440617939,40.71369190380233]}},{type:"Feature",properties:{"Unique Key":51727094,"Created Date":"09/02/2021 11:09:00 AM","Closed Date":"09/03/2021 09:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"2201 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 112 ST","Cross Street 2":"E 114 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:55:00 AM","Community Board":"11 MANHATTAN",BBL:1016840001,Borough:"MANHATTAN","X Coordinate (State Plane)":1001762,"Y Coordinate (State Plane)":228623,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79417603681146,Longitude:-73.93675446451017,Location:"(40.79417603681146, -73.93675446451017)"},geometry:{type:"Point",coordinates:[-73.93675446451017,40.79417603681146]}},{type:"Feature",properties:{"Unique Key":51720225,"Created Date":"09/02/2021 11:11:00 AM","Closed Date":"09/02/2021 05:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10003,"Incident Address":"328 EAST   19 STREET","Street Name":"EAST   19 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:50:00 PM","Community Board":"06 MANHATTAN",BBL:1009240050,Borough:"MANHATTAN","X Coordinate (State Plane)":989350,"Y Coordinate (State Plane)":207043,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73496039174205,Longitude:-73.98159744432803,Location:"(40.73496039174205, -73.98159744432803)"},geometry:{type:"Point",coordinates:[-73.98159744432803,40.73496039174205]}},{type:"Feature",properties:{"Unique Key":51712590,"Created Date":"09/02/2021 11:12:00 AM","Closed Date":"09/02/2021 05:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10128,"Incident Address":"210 EAST   95 STREET","Street Name":"EAST   95 STREET","Cross Street 1":"3 AVE","Cross Street 2":"2 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 05:40:00 PM","Community Board":"08 MANHATTAN",BBL:1015400042,Borough:"MANHATTAN","X Coordinate (State Plane)":998383,"Y Coordinate (State Plane)":224966,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7841446051619,Longitude:-73.94896559743964,Location:"(40.7841446051619, -73.94896559743964)"},geometry:{type:"Point",coordinates:[-73.94896559743964,40.7841446051619]}},{type:"Feature",properties:{"Unique Key":51715909,"Created Date":"09/02/2021 11:33:00 AM","Closed Date":"09/03/2021 12:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10011,"Incident Address":"243 WEST   24 STREET","Street Name":"WEST   24 STREET","Cross Street 1":"7 AVE","Cross Street 2":"8 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 12:45:00 PM","Community Board":"04 MANHATTAN",BBL:1007740014,Borough:"MANHATTAN","X Coordinate (State Plane)":985229,"Y Coordinate (State Plane)":210816,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74531775541729,Longitude:-73.99646688181572,Location:"(40.74531775541729, -73.99646688181572)"},geometry:{type:"Point",coordinates:[-73.99646688181572,40.74531775541729]}},{type:"Feature",properties:{"Unique Key":51718342,"Created Date":"09/02/2021 11:40:00 AM","Closed Date":"09/03/2021 11:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10017,"Incident Address":"424 MADISON AVENUE","Street Name":"MADISON AVENUE","Cross Street 1":"E 48 ST","Cross Street 2":"E 49 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 11:35:00 AM","Community Board":"05 MANHATTAN",BBL:1012840056,Borough:"MANHATTAN","X Coordinate (State Plane)":990828,"Y Coordinate (State Plane)":215059,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.75696132515915,Longitude:-73.97625647167831,Location:"(40.75696132515915, -73.97625647167831)"},geometry:{type:"Point",coordinates:[-73.97625647167831,40.75696132515915]}},{type:"Feature",properties:{"Unique Key":51720822,"Created Date":"09/02/2021 11:40:00 AM","Closed Date":"09/02/2021 11:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10040,"Incident Address":"112 NAGLE AVENUE","Street Name":"NAGLE AVENUE","Cross Street 1":"SICKLES ST","Cross Street 2":"ARDEN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 11:55:00 AM","Community Board":"12 MANHATTAN",BBL:1021740088,Borough:"MANHATTAN","X Coordinate (State Plane)":1004472,"Y Coordinate (State Plane)":252906,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.860820129878626,Longitude:-73.9268939658624,Location:"(40.860820129878626, -73.9268939658624)"},geometry:{type:"Point",coordinates:[-73.9268939658624,40.860820129878626]}},{type:"Feature",properties:{"Unique Key":51725504,"Created Date":"09/02/2021 11:43:00 AM","Closed Date":"09/03/2021 05:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Other Water Problem (Use Comments) (WZZ)","Location Type":null,"Incident Zip":10003,"Incident Address":"246 EAST   15 STREET","Street Name":"EAST   15 STREET","Cross Street 1":"RUTHERFORD PL","Cross Street 2":"2 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The status of this Service Request is currently not available online. Please call 311 for further assistance. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 05:40:00 PM","Community Board":"06 MANHATTAN",BBL:1008960026,Borough:"MANHATTAN","X Coordinate (State Plane)":988401,"Y Coordinate (State Plane)":206427,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73327011970919,Longitude:-73.9850221430027,Location:"(40.73327011970919, -73.9850221430027)"},geometry:{type:"Point",coordinates:[-73.9850221430027,40.73327011970919]}},{type:"Feature",properties:{"Unique Key":51713821,"Created Date":"09/02/2021 11:47:00 AM","Closed Date":"09/03/2021 09:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"241 EAST  115 STREET","Street Name":"EAST  115 STREET","Cross Street 1":"3 AVE","Cross Street 2":"2 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:35:00 AM","Community Board":"11 MANHATTAN",BBL:1016650022,Borough:"MANHATTAN","X Coordinate (State Plane)":1001150,"Y Coordinate (State Plane)":229507,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.796603568220654,Longitude:-73.93896251029072,Location:"(40.796603568220654, -73.93896251029072)"},geometry:{type:"Point",coordinates:[-73.93896251029072,40.796603568220654]}},{type:"Feature",properties:{"Unique Key":51727673,"Created Date":"09/02/2021 12:00:00 PM","Closed Date":"09/03/2021 01:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10003,"Incident Address":"313 EAST   14 STREET","Street Name":"EAST   14 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:40:00 AM","Community Board":"06 MANHATTAN",BBL:1009210009,Borough:"MANHATTAN","X Coordinate (State Plane)":988589,"Y Coordinate (State Plane)":206004,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73210899839949,Longitude:-73.98434406429587,Location:"(40.73210899839949, -73.98434406429587)"},geometry:{type:"Point",coordinates:[-73.98434406429587,40.73210899839949]}},{type:"Feature",properties:{"Unique Key":51716085,"Created Date":"09/02/2021 12:56:00 PM","Closed Date":"09/03/2021 11:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10022,"Incident Address":"168 EAST   57 STREET","Street Name":"EAST   57 STREET","Cross Street 1":"LEXINGTON AVE","Cross Street 2":"3 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 11:10:00 AM","Community Board":"06 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":993026,"Y Coordinate (State Plane)":216377,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.760576989314245,Longitude:-73.96832099151027,Location:"(40.760576989314245, -73.96832099151027)"},geometry:{type:"Point",coordinates:[-73.96832099151027,40.760576989314245]}},{type:"Feature",properties:{"Unique Key":51720304,"Created Date":"09/02/2021 01:03:00 PM","Closed Date":"09/03/2021 02:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10024,"Incident Address":"122 WEST   90 STREET","Street Name":"WEST   90 STREET","Cross Street 1":"COLUMBUS AVE","Cross Street 2":"AMSTERDAM AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 02:00:00 PM","Community Board":"07 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":992152,"Y Coordinate (State Plane)":226925,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.789529303513305,Longitude:-73.97146349326695,Location:"(40.789529303513305, -73.97146349326695)"},geometry:{type:"Point",coordinates:[-73.97146349326695,40.789529303513305]}},{type:"Feature",properties:{"Unique Key":51718779,"Created Date":"09/02/2021 01:06:00 PM","Closed Date":"09/03/2021 05:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10022,"Incident Address":"320 PARK AVENUE","Street Name":"PARK AVENUE","Cross Street 1":"E 50 ST","Cross Street 2":"E 51 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 05:10:00 AM","Community Board":"05 MANHATTAN",BBL:1012860035,Borough:"MANHATTAN","X Coordinate (State Plane)":991509,"Y Coordinate (State Plane)":215237,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.75744935684442,Longitude:-73.97379818556702,Location:"(40.75744935684442, -73.97379818556702)"},geometry:{type:"Point",coordinates:[-73.97379818556702,40.75744935684442]}},{type:"Feature",properties:{"Unique Key":51725222,"Created Date":"09/02/2021 01:37:00 PM","Closed Date":"09/03/2021 11:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10018,"Incident Address":"335 WEST   38 STREET","Street Name":"WEST   38 STREET","Cross Street 1":"8 AVE","Cross Street 2":"9 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 11:35:00 AM","Community Board":"04 MANHATTAN",BBL:1007620014,Borough:"MANHATTAN","X Coordinate (State Plane)":986261,"Y Coordinate (State Plane)":214412,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.755187693204796,Longitude:-73.99274141630195,Location:"(40.755187693204796, -73.99274141630195)"},geometry:{type:"Point",coordinates:[-73.99274141630195,40.755187693204796]}},{type:"Feature",properties:{"Unique Key":51719919,"Created Date":"09/02/2021 01:44:00 PM","Closed Date":"09/03/2021 10:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10030,"Incident Address":"138 WEST  135 STREET","Street Name":"WEST  135 STREET","Cross Street 1":"BASIL A PATERSON WAY","Cross Street 2":"7 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection inspected your complaint and cleaned the catch basin or inlet. If the condition returns, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 10:45:00 AM","Community Board":"10 MANHATTAN",BBL:1019190006,Borough:"MANHATTAN","X Coordinate (State Plane)":1000199,"Y Coordinate (State Plane)":236115,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8147424710932,Longitude:-73.94238152419612,Location:"(40.8147424710932, -73.94238152419612)"},geometry:{type:"Point",coordinates:[-73.94238152419612,40.8147424710932]}},{type:"Feature",properties:{"Unique Key":51720504,"Created Date":"09/02/2021 01:49:00 PM","Closed Date":"09/03/2021 10:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10128,"Incident Address":"327 EAST   93 STREET","Street Name":"EAST   93 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:20:00 AM","Community Board":"08 MANHATTAN",BBL:1015560016,Borough:"MANHATTAN","X Coordinate (State Plane)":998817,"Y Coordinate (State Plane)":224134,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78186028203478,Longitude:-73.94740022356223,Location:"(40.78186028203478, -73.94740022356223)"},geometry:{type:"Point",coordinates:[-73.94740022356223,40.78186028203478]}},{type:"Feature",properties:{"Unique Key":51718520,"Created Date":"09/02/2021 01:58:00 PM","Closed Date":"09/03/2021 01:05:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10014,"Incident Address":"51 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 13 ST","Cross Street 2":"W 14 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 01:05:00 PM","Community Board":"02 MANHATTAN",BBL:1006540031,Borough:"MANHATTAN","X Coordinate (State Plane)":981948,"Y Coordinate (State Plane)":209619,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74203204407016,Longitude:-74.00830729006049,Location:"(40.74203204407016, -74.00830729006049)"},geometry:{type:"Point",coordinates:[-74.00830729006049,40.74203204407016]}},{type:"Feature",properties:{"Unique Key":51718515,"Created Date":"09/02/2021 02:35:00 PM","Closed Date":"09/03/2021 04:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10038,"Incident Address":"10 CATHERINE SLIP","Street Name":"CATHERINE SLIP","Cross Street 1":"CATHERINE ST","Cross Street 2":"UNNAMED ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 04:40:00 PM","Community Board":"03 MANHATTAN",BBL:1001110100,Borough:"MANHATTAN","X Coordinate (State Plane)":985241,"Y Coordinate (State Plane)":197900,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.709866482366486,Longitude:-73.99642547704416,Location:"(40.709866482366486, -73.99642547704416)"},geometry:{type:"Point",coordinates:[-73.99642547704416,40.709866482366486]}},{type:"Feature",properties:{"Unique Key":51720245,"Created Date":"09/02/2021 02:51:00 PM","Closed Date":"09/03/2021 09:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10030,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"8 AVENUE","Intersection Street 2":"WEST 141 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 09:45:00 AM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":999812,"Y Coordinate (State Plane)":238138,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.820295727069976,Longitude:-73.94377493616386,Location:"(40.820295727069976, -73.94377493616386)"},geometry:{type:"Point",coordinates:[-73.94377493616386,40.820295727069976]}},{type:"Feature",properties:{"Unique Key":51729997,"Created Date":"09/02/2021 03:03:00 PM","Closed Date":"09/03/2021 09:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10030,"Incident Address":"66 EDGECOMBE AVENUE","Street Name":"EDGECOMBE AVENUE","Cross Street 1":"W 137 ST","Cross Street 2":"W 138 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:50:00 AM","Community Board":"10 MANHATTAN",BBL:1020410130,Borough:"MANHATTAN","X Coordinate (State Plane)":999019,"Y Coordinate (State Plane)":237603,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8188286645206,Longitude:-73.94664119933147,Location:"(40.8188286645206, -73.94664119933147)"},geometry:{type:"Point",coordinates:[-73.94664119933147,40.8188286645206]}},{type:"Feature",properties:{"Unique Key":51715489,"Created Date":"09/02/2021 03:07:00 PM","Closed Date":"09/02/2021 06:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10023,"Incident Address":"1855 BROADWAY","Street Name":"BROADWAY","Cross Street 1":"W 60 ST","Cross Street 2":"W 61 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and referred it to another agency or utility for further action.","Resolution Action Updated Date":"09/02/2021 06:20:00 PM","Community Board":"07 MANHATTAN",BBL:1011130047,Borough:"MANHATTAN","X Coordinate (State Plane)":989202,"Y Coordinate (State Plane)":219632,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76951409202482,Longitude:-73.98212220834499,Location:"(40.76951409202482, -73.98212220834499)"},geometry:{type:"Point",coordinates:[-73.98212220834499,40.76951409202482]}},{type:"Feature",properties:{"Unique Key":51718720,"Created Date":"09/02/2021 03:11:00 PM","Closed Date":"09/03/2021 01:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10007,"Incident Address":"187 BROADWAY","Street Name":"BROADWAY","Cross Street 1":"CORTLANDT ST","Cross Street 2":"JOHN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:50:00 PM","Community Board":"01 MANHATTAN",BBL:1000630015,Borough:"MANHATTAN","X Coordinate (State Plane)":981573,"Y Coordinate (State Plane)":198025,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.710209228233666,Longitude:-74.00965595072891,Location:"(40.710209228233666, -74.00965595072891)"},geometry:{type:"Point",coordinates:[-74.00965595072891,40.710209228233666]}},{type:"Feature",properties:{"Unique Key":51724327,"Created Date":"09/02/2021 03:12:00 PM","Closed Date":"09/04/2021 08:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10034,"Incident Address":"600 WEST  218 STREET","Street Name":"WEST  218 STREET","Cross Street 1":"SEAMAN AVE","Cross Street 2":"INDIAN RD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/04/2021 08:55:00 AM","Community Board":"12 MANHATTAN",BBL:1022500058,Borough:"MANHATTAN","X Coordinate (State Plane)":1006878,"Y Coordinate (State Plane)":257309,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.87289918174896,Longitude:-73.91818099611028,Location:"(40.87289918174896, -73.91818099611028)"},geometry:{type:"Point",coordinates:[-73.91818099611028,40.87289918174896]}},{type:"Feature",properties:{"Unique Key":51714059,"Created Date":"09/02/2021 03:43:00 PM","Closed Date":"09/02/2021 05:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10039,"Incident Address":"210 WEST  146 STREET","Street Name":"WEST  146 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:20:00 PM","Community Board":"10 MANHATTAN",BBL:1020310038,Borough:"MANHATTAN","X Coordinate (State Plane)":1001053,"Y Coordinate (State Plane)":238977,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.82259627095684,Longitude:-73.93928913892134,Location:"(40.82259627095684, -73.93928913892134)"},geometry:{type:"Point",coordinates:[-73.93928913892134,40.82259627095684]}},{type:"Feature",properties:{"Unique Key":51719758,"Created Date":"09/02/2021 04:21:00 PM","Closed Date":"09/03/2021 08:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10035,"Incident Address":"319 EAST  119 STREET","Street Name":"EAST  119 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/03/2021 08:45:00 AM","Community Board":"11 MANHATTAN",BBL:1017960111,Borough:"MANHATTAN","X Coordinate (State Plane)":1002107,"Y Coordinate (State Plane)":230228,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79858063446484,Longitude:-73.93550421093074,Location:"(40.79858063446484, -73.93550421093074)"},geometry:{type:"Point",coordinates:[-73.93550421093074,40.79858063446484]}},{type:"Feature",properties:{"Unique Key":51718424,"Created Date":"09/02/2021 04:31:00 PM","Closed Date":"09/02/2021 06:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"106 EDGECOMBE AVENUE","Street Name":"EDGECOMBE AVENUE","Cross Street 1":"W 139 ST","Cross Street 2":"W 140 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 06:50:00 PM","Community Board":"10 MANHATTAN",BBL:1020427504,Borough:"MANHATTAN","X Coordinate (State Plane)":999235,"Y Coordinate (State Plane)":237992,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8198959959834,Longitude:-73.94585994624946,Location:"(40.8198959959834, -73.94585994624946)"},geometry:{type:"Point",coordinates:[-73.94585994624946,40.8198959959834]}},{type:"Feature",properties:{"Unique Key":51725096,"Created Date":"09/02/2021 04:31:00 PM","Closed Date":"09/02/2021 07:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10025,"Incident Address":"86 WEST  100 STREET","Street Name":"WEST  100 STREET","Cross Street 1":"MANHATTAN AVE","Cross Street 2":"COLUMBUS AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 07:30:00 PM","Community Board":"07 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":993875,"Y Coordinate (State Plane)":229010,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79525035702049,Longitude:-73.96523823287524,Location:"(40.79525035702049, -73.96523823287524)"},geometry:{type:"Point",coordinates:[-73.96523823287524,40.79525035702049]}},{type:"Feature",properties:{"Unique Key":51727148,"Created Date":"09/02/2021 05:29:00 PM","Closed Date":"09/03/2021 12:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10037,"Incident Address":"59 WEST  137 STREET","Street Name":"WEST  137 STREET","Cross Street 1":"5 AVE","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Surcharge conditions have been confirmed due to rain intensity or volume.","Resolution Action Updated Date":"09/03/2021 12:00:00 PM","Community Board":"10 MANHATTAN",BBL:1017350010,Borough:"MANHATTAN","X Coordinate (State Plane)":1001285,"Y Coordinate (State Plane)":236137,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81480082752887,Longitude:-73.93845810985339,Location:"(40.81480082752887, -73.93845810985339)"},geometry:{type:"Point",coordinates:[-73.93845810985339,40.81480082752887]}},{type:"Feature",properties:{"Unique Key":51713916,"Created Date":"09/02/2021 05:34:00 PM","Closed Date":"09/02/2021 05:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"565 ACADEMY STREET","Street Name":"ACADEMY STREET","Cross Street 1":"NAGLE AVE","Cross Street 2":"POST AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 05:45:00 PM","Community Board":"12 MANHATTAN",BBL:1022180054,Borough:"MANHATTAN","X Coordinate (State Plane)":1005548,"Y Coordinate (State Plane)":253782,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.863221954379064,Longitude:-73.92300125763721,Location:"(40.863221954379064, -73.92300125763721)"},geometry:{type:"Point",coordinates:[-73.92300125763721,40.863221954379064]}},{type:"Feature",properties:{"Unique Key":51726549,"Created Date":"09/02/2021 07:26:00 PM","Closed Date":"09/02/2021 08:35:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10038,"Incident Address":"25 FULTON STREET","Street Name":"FULTON STREET","Cross Street 1":"FRONT ST","Cross Street 2":"WATER ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:35:00 PM","Community Board":"01 MANHATTAN",BBL:1000960005,Borough:"MANHATTAN","X Coordinate (State Plane)":983174,"Y Coordinate (State Plane)":196928,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.70719856251937,Longitude:-74.00388096141931,Location:"(40.70719856251937, -74.00388096141931)"},geometry:{type:"Point",coordinates:[-74.00388096141931,40.70719856251937]}},{type:"Feature",properties:{"Unique Key":51720210,"Created Date":"09/02/2021 07:29:00 PM","Closed Date":"09/05/2021 10:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10128,"Incident Address":"1120 PARK AVENUE","Street Name":"PARK AVENUE","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/05/2021 10:30:00 AM","Community Board":"08 MANHATTAN",BBL:1015020033,Borough:"MANHATTAN","X Coordinate (State Plane)":996515,"Y Coordinate (State Plane)":224549,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78300284092864,Longitude:-73.95571172396143,Location:"(40.78300284092864, -73.95571172396143)"},geometry:{type:"Point",coordinates:[-73.95571172396143,40.78300284092864]}},{type:"Feature",properties:{"Unique Key":51729256,"Created Date":"09/02/2021 08:19:00 PM","Closed Date":"09/05/2021 10:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Culvert Blocked/Needs Cleaning (SE)","Location Type":null,"Incident Zip":10028,"Incident Address":"509 EAST   81 STREET","Street Name":"EAST   81 STREET","Cross Street 1":"YORK AVE","Cross Street 2":"EAST END AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/05/2021 10:00:00 AM","Community Board":"08 MANHATTAN",BBL:1015780006,Borough:"MANHATTAN","X Coordinate (State Plane)":998381,"Y Coordinate (State Plane)":220727,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.772509673647185,Longitude:-73.94898173458112,Location:"(40.772509673647185, -73.94898173458112)"},geometry:{type:"Point",coordinates:[-73.94898173458112,40.772509673647185]}},{type:"Feature",properties:{"Unique Key":51717698,"Created Date":"09/02/2021 08:57:00 PM","Closed Date":"07/12/2022 11:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10075,"Incident Address":"555 EAST   78 STREET","Street Name":"EAST   78 STREET","Cross Street 1":"E 78 STREET PEDESTRIAN OVPS","Cross Street 2":"FDR DRIVE SB ENTRANCE E 78 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and has performed repair work.","Resolution Action Updated Date":"07/12/2022 11:40:00 AM","Community Board":"08 MANHATTAN",BBL:1014900122,Borough:"MANHATTAN","X Coordinate (State Plane)":998363,"Y Coordinate (State Plane)":219784,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76992141383538,Longitude:-73.94904870168055,Location:"(40.76992141383538, -73.94904870168055)"},geometry:{type:"Point",coordinates:[-73.94904870168055,40.76992141383538]}},{type:"Feature",properties:{"Unique Key":51721623,"Created Date":"09/02/2021 09:34:00 PM","Closed Date":"09/02/2021 09:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10036,"Incident Address":"535 WEST   43 STREET","Street Name":"WEST   43 STREET","Cross Street 1":"AMTRAK-NORTHEAST LINE","Cross Street 2":"11 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 09:50:00 PM","Community Board":"04 MANHATTAN",BBL:1010720050,Borough:"MANHATTAN","X Coordinate (State Plane)":985225,"Y Coordinate (State Plane)":216509,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.760943597297086,Longitude:-73.99648049195326,Location:"(40.760943597297086, -73.99648049195326)"},geometry:{type:"Point",coordinates:[-73.99648049195326,40.760943597297086]}},{type:"Feature",properties:{"Unique Key":51716596,"Created Date":"09/02/2021 10:19:00 PM","Closed Date":"09/03/2021 01:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10009,"Incident Address":"102 AVENUE C","Street Name":"AVENUE C","Cross Street 1":"E 6 ST","Cross Street 2":"E 7 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:00:00 AM","Community Board":"03 MANHATTAN",BBL:1003760007,Borough:"MANHATTAN","X Coordinate (State Plane)":990087,"Y Coordinate (State Plane)":203032,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72395072171022,Longitude:-73.97894157404646,Location:"(40.72395072171022, -73.97894157404646)"},geometry:{type:"Point",coordinates:[-73.97894157404646,40.72395072171022]}},{type:"Feature",properties:{"Unique Key":51715615,"Created Date":"09/02/2021 10:43:00 PM","Closed Date":"09/02/2021 11:05:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10033,"Incident Address":"718 WEST  178 STREET","Street Name":"WEST  178 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"CBE NB EXIT 1 A UPPERDECK","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and referred it to another agency or utility for further action.","Resolution Action Updated Date":"09/02/2021 11:05:00 PM","Community Board":"12 MANHATTAN",BBL:1021760011,Borough:"MANHATTAN","X Coordinate (State Plane)":1001276,"Y Coordinate (State Plane)":248425,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.848527866176525,Longitude:-73.93845943637704,Location:"(40.848527866176525, -73.93845943637704)"},geometry:{type:"Point",coordinates:[-73.93845943637704,40.848527866176525]}}],C0e={type:T0e,name:E0e,crs:A0e,features:x0e},I0e=""+new URL("ida_311_heatmap.8f0465e0.png",import.meta.url).href,M0e=""+new URL("mod_stormwater.df1cfcc4.png",import.meta.url).href,N0e=""+new URL("sandy_inundation.0ba60b31.png",import.meta.url).href;let qD=null,jc=null,YD=null,E0=null;function R0e(e){qD=new Vg({style:d0e}),jc=new Vg({style:g0e}),YD=new Vg({style:S0e});const t=new Blob([JSON.stringify(C0e)],{type:"application/json"});E0=new KB({url:URL.createObjectURL(t),renderer:{type:"heatmap",colorStops:[{color:"rgba(241,238,246, 0)",ratio:0},{color:"rgba(251,106,74, 0.4)",ratio:.1},{color:"rgba(222,45,38, 0.5)",ratio:.3},{color:"rgba(165,15,21, 0.7)",ratio:.6}],maxDensity:.01,minDensity:0},title:"Hurricane Ida - 311 DEP Flooding Related Requests"}),e.add(YD),e.add(qD),e.add(jc),e.add(E0);const i=["Area not included in analysis:1","Area under analysis","Area not included in analysis:2","National Wetlands Inventory/1","Nuisance Flooding (greater or equal to 4 in and less than 1ft)/1","Deep and Contiguous Flooding (1ft and greater)/1","Future High Tides 2050"];return[{name:"Moderate Stormwater Flood with 2050 Sea Levels",src:M0e,on:r=>{i.forEach(n=>{jc.setStyleLayerVisibility(n,"visible")})},off:r=>{i.forEach(n=>{jc.setStyleLayerVisibility(n,"none")})}},{name:"311 DEP Flood Service Requests (Hur. Ida: Sept 1-2 2021)",src:I0e,on:r=>{E0.visible=!0},off:r=>{E0.visible=!1}},{name:"Sandy Inundation Zone",src:N0e,on:r=>{jc.setStyleLayerVisibility("Sandy Inundation Zone","visible")},off:r=>{jc.setStyleLayerVisibility("Sandy Inundation Zone","none")}}]}const zc=[];function iU(e,t=Pr){let i;const r=new Set;function n(a){if($y(e,a)&&(e=a,i)){const u=!zc.length;for(const d of r)d[1](),zc.push(d,e);if(u){for(let d=0;d<zc.length;d+=2)zc[d][0](zc[d+1]);zc.length=0}}}function o(a){n(a(e))}function s(a,u=Pr){const d=[a,u];return r.add(d),r.size===1&&(i=t(n)||Pr),a(e),()=>{r.delete(d),r.size===0&&(i(),i=null)}}return{set:n,update:o,subscribe:s}}const rU=iU(),nU=iU([]);function P0e(e){let t,i,r;return{c(){t=Bd("div"),No(t,"id","map"),No(t,"class","flex-1 h-full")},m(n,o){pv(n,t,o),i||(r=hV(e[0].call(null,t)),i=!0)},p:Pr,i:Pr,o:Pr,d(n){n&&Dy(t),i=!1,r()}}}function $0e(e){function t(i){const r=new FL,n=new lye({map:r,container:i,center:[-73.98255,40.75925],zoom:12});n.ui.components=["attribution"];const o=new pme({view:n});n.ui.add(o,"top-right");const s=new wB({view:n});return n.ui.add(s,"top-right"),nU.set(R0e(r)),rU.set(r),n.when(()=>{console.log("Map is loaded")}),{destroy:()=>{r.destroy()}}}return[t]}class D0e extends fv{constructor(t){super(),hv(this,t,$0e,P0e,$y,{})}}function L0e(e){let t,i,r,n,o,s,a=e[0].name+"",u,d,h,f;return{c(){t=Bd("div"),i=Bd("img"),o=c4(),s=Bd("div"),u=u4(a),SC(i.src,r=e[0].src)||No(i,"src",r),No(i,"alt",n=e[0].name+" Thumbnail for Toggle"),No(t,"class",d="w-32 min-h-24 bg-white pointer-events-auto drop-shadow-md cursor-pointer text-center "+(e[1]?"outline outline-2 outline-blue-500":"")+" flex flex-col items-center p-2 mb-3 text-xs")},m(y,m){pv(y,t,m),Th(t,i),Th(t,o),Th(t,s),Th(s,u),h||(f=yV(t,"click",e[2]),h=!0)},p(y,[m]){m&1&&!SC(i.src,r=y[0].src)&&No(i,"src",r),m&1&&n!==(n=y[0].name+" Thumbnail for Toggle")&&No(i,"alt",n),m&1&&a!==(a=y[0].name+"")&&gV(u,a),m&2&&d!==(d="w-32 min-h-24 bg-white pointer-events-auto drop-shadow-md cursor-pointer text-center "+(y[1]?"outline outline-2 outline-blue-500":"")+" flex flex-col items-center p-2 mb-3 text-xs")&&No(t,"class",d)},i:Pr,o:Pr,d(y){y&&Dy(t),h=!1,f()}}}function O0e(e,t,i){let r;l4(e,rU,a=>i(3,r=a));let{layer:n={name:"Layer Name",src:"http://graphics8.nytimes.com/newsgraphics/2012/1120-sandy/_assets/city_thumb.png",on:a=>{},off:a=>{}}}=t,o=!0;function s(){o?n.off(r):n.on(r),i(1,o=!o)}return e.$$set=a=>{"layer"in a&&i(0,n=a.layer)},[n,o,s]}class k0e extends fv{constructor(t){super(),hv(this,t,O0e,L0e,$y,{layer:0})}}function KD(e,t,i){const r=e.slice();return r[1]=t[i],r}function ZD(e){let t,i;return t=new k0e({props:{layer:e[1]}}),{c(){w_(t.$$.fragment)},m(r,n){jg(t,r,n),i=!0},p(r,n){const o={};n&1&&(o.layer=r[1]),t.$set(o)},i(r){i||(ec(t.$$.fragment,r),i=!0)},o(r){Jf(t.$$.fragment,r),i=!1},d(r){zg(t,r)}}}function F0e(e){let t,i,r=e[0],n=[];for(let s=0;s<r.length;s+=1)n[s]=ZD(KD(e,r,s));const o=s=>Jf(n[s],1,1,()=>{n[s]=null});return{c(){t=Bd("div");for(let s=0;s<n.length;s+=1)n[s].c();No(t,"class","absolute top-3 left-3 z-10")},m(s,a){pv(s,t,a);for(let u=0;u<n.length;u+=1)n[u].m(t,null);i=!0},p(s,[a]){if(a&1){r=s[0];let u;for(u=0;u<r.length;u+=1){const d=KD(s,r,u);n[u]?(n[u].p(d,a),ec(n[u],1)):(n[u]=ZD(d),n[u].c(),ec(n[u],1),n[u].m(t,null))}for(_V(),u=r.length;u<n.length;u+=1)o(u);SV()}},i(s){if(!i){for(let a=0;a<r.length;a+=1)ec(n[a]);i=!0}},o(s){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)Jf(n[a]);i=!1},d(s){s&&Dy(t),fV(n,s)}}}function B0e(e,t,i){let r;return l4(e,nU,n=>i(0,r=n)),[r]}class U0e extends fv{constructor(t){super(),hv(this,t,B0e,F0e,$y,{})}}function V0e(e){let t,i,r,n,o;return i=new U0e({}),n=new D0e({}),{c(){t=Bd("main"),w_(i.$$.fragment),r=c4(),w_(n.$$.fragment),No(t,"class","flex flex-col md:flex-row h-full absolute bottom-0 left-0 right-0")},m(s,a){pv(s,t,a),jg(i,t,null),Th(t,r),jg(n,t,null),o=!0},p:Pr,i(s){o||(ec(i.$$.fragment,s),ec(n.$$.fragment,s),o=!0)},o(s){Jf(i.$$.fragment,s),Jf(n.$$.fragment,s),o=!1},d(s){s&&Dy(t),zg(i),zg(n)}}}class j0e extends fv{constructor(t){super(),hv(this,t,null,V0e,$y,{})}}new j0e({target:document.getElementById("app")});export{$g as $,yD as A,xD as B,Me as C,_D as D,pD as E,CD as F,AD as G,ID as H,sge as I,qi as J,bt as K,bD as L,SD as M,rB as N,Ne as O,TD as P,ei as Q,hD as R,dwe as S,Ys as T,ED as U,RD as V,cwe as W,l9 as X,ND as Y,XF as Z,Zo as _,GV as a,Ny as a$,wD as a0,vD as a1,eL as a2,Zpe as a3,Ype as a4,ZF as a5,$E as a6,um as a7,MA as a8,Awe as a9,hr as aA,qt as aB,N8 as aC,Rwe as aD,Pwe as aE,Ml as aF,wx as aG,l as aH,c as aI,S as aJ,se as aK,wl as aL,ur as aM,NA as aN,nL as aO,Oo as aP,le as aQ,yn as aR,Tw as aS,Zge as aT,VF as aU,xF as aV,jF as aW,Ct as aX,wpe as aY,Dve as aZ,Npe as a_,hwe as aa,fwe as ab,_we as ac,bwe as ad,ci as ae,$we as af,xwe as ag,Js as ah,fD as ai,mD as aj,gD as ak,Mp as al,dD as am,Yve as an,Po as ao,yv as ap,BD as aq,FD as ar,Sv as as,aB as at,ip as au,bv as av,q as aw,ze as ax,Uve as ay,Fve as az,tge as b,L$ as b$,Lve as b0,B as b1,mi as b2,oA as b3,fge as b4,to as b5,xl as b6,fr as b7,Rp as b8,j1e as b9,Mve as bA,KF as bB,$3 as bC,bp as bD,R as bE,E$ as bF,w$ as bG,b$ as bH,O$ as bI,_$ as bJ,C$ as bK,H$ as bL,n$ as bM,G$ as bN,Kn as bO,W$ as bP,q$ as bQ,rF as bR,sF as bS,oF as bT,wce as bU,Ro as bV,Iy as bW,bw as bX,Xge as bY,awe as bZ,swe as b_,tc as ba,vq as bb,BA as bc,ak as bd,K1e as be,nN as bf,ok as bg,kA as bh,n1e as bi,Gi as bj,tv as bk,L1e as bl,o1e as bm,Jge as bn,Dge as bo,Ov as bp,kE as bq,FY as br,BY as bs,me as bt,fl as bu,LL as bv,Rge as bw,FA as bx,Nve as by,Rve as bz,O as c,ele as c$,B$ as c0,no as c1,y$ as c2,s$ as c3,a$ as c4,l$ as c5,I$ as c6,tD as c7,nD as c8,m$ as c9,R0 as cA,WI as cB,Fwe as cC,Ai as cD,Bwe as cE,rwe as cF,Q1e as cG,H1e as cH,je as cI,i$ as cJ,Uwe as cK,lwe as cL,A3 as cM,Hwe as cN,zwe as cO,jwe as cP,Gwe as cQ,Wwe as cR,iwe as cS,Zf as cT,o0e as cU,Kwe as cV,Ywe as cW,qwe as cX,Zwe as cY,Qae as cZ,Sve as c_,iD as ca,qo as cb,Zve as cc,t1e as cd,Ege as ce,Vwe as cf,ie as cg,N6 as ch,Pte as ci,$te as cj,Ej as ck,nwe as cl,yve as cm,owe as cn,tp as co,zE as cp,dc as cq,Um as cr,B6 as cs,Pge as ct,Ku as cu,Id as cv,Cf as cw,S1e as cx,Mi as cy,Ji as cz,Kve as d,Se as d$,bve as d0,Yt as d1,rt as d2,$p as d3,_ve as d4,cue as d5,due as d6,pue as d7,pn as d8,j8 as d9,Kpe as dA,pwe as dB,ywe as dC,mwe as dD,gwe as dE,vwe as dF,Swe as dG,Twe as dH,Dwe as dI,Owe as dJ,Du as dK,ko as dL,HE as dM,Lwe as dN,xre as dO,ck as dP,YF as dQ,wwe as dR,Ah as dS,Ewe as dT,Iwe as dU,$l as dV,m1 as dW,Ue as dX,Ug as dY,eA as dZ,Uy as d_,Fge as da,uwe as db,X as dc,k8 as dd,$d as de,Qse as df,ole as dg,Cre as dh,Ki as di,dk as dj,W1e as dk,z1e as dl,zie as dm,X1e as dn,oN as dp,Mwe as dq,Yae as dr,Nwe as ds,Cwe as dt,twe as du,K0e as dv,Z0e as dw,vue as dx,ppe as dy,LD as dz,MD as e,gc as e$,Ec as e0,A5 as e1,Fe as e2,U as e3,ii as e4,xue as e5,u1 as e6,he as e7,Dme as e8,Mh as e9,Cve as eA,BL as eB,Bge as eC,A_ as eD,Vi as eE,qs as eF,Gge as eG,Uge as eH,jge as eI,Vge as eJ,zge as eK,sy as eL,dn as eM,oY as eN,nA as eO,Qy as eP,ny as eQ,Hge as eR,Ls as eS,Nl as eT,Tve as eU,a3 as eV,c5 as eW,np as eX,oy as eY,Yf as eZ,iq as e_,Op as ea,e1e as eb,r1e as ec,$v as ed,Qge as ee,Sj as ef,Cv as eg,Np as eh,ji as ei,UY as ej,Oe as ek,Nhe as el,Ove as em,kve as en,pr as eo,lc as ep,Ka as eq,El as er,xv as es,Ni as et,o1 as eu,C_ as ev,j9 as ew,_p as ex,Rle as ey,Nle as ez,$D as f,TH as f$,vc as f0,Cl as f1,vS as f2,at as f3,gS as f4,bS as f5,T1 as f6,dJ as f7,Ipe as f8,D5 as f9,gr as fA,ic as fB,pe as fC,lD as fD,fhe as fE,$u as fF,xt as fG,Fd as fH,cD as fI,qae as fJ,Ep as fK,kV as fL,_me as fM,p7 as fN,f3 as fO,S7 as fP,yw as fQ,Y0e as fR,mw as fS,y7 as fT,lp as fU,Go as fV,p4 as fW,yge as fX,wp as fY,Ale as fZ,hge as f_,_5 as fa,Xy as fb,uc as fc,gt as fd,Us as fe,KA as ff,CI as fg,Lge as fh,l1e as fi,y1e as fj,jve as fk,Ac as fl,Xo as fm,aA as fn,Y as fo,bI as fp,V6 as fq,ow as fr,nw as fs,uye as ft,De as fu,_1e as fv,B5 as fw,W4 as fx,op as fy,yi as fz,q0e as g,eO as g$,vve as g0,Vae as g1,mr as g2,Wse as g3,qse as g4,sse as g5,qq as g6,Hve as g7,Ko as g8,EH as g9,lk as gA,ik as gB,hl as gC,X0e as gD,pfe as gE,QE as gF,KG as gG,Q_ as gH,ige as gI,rge as gJ,X_ as gK,lL as gL,xge as gM,_W as gN,sW as gO,tL as gP,oL as gQ,Sge as gR,NW as gS,gL as gT,IZ as gU,EZ as gV,SZ as gW,wZ as gX,dW as gY,w1e as gZ,A1e as g_,zve as ga,s1e as gb,f1e as gc,Z1e as gd,P6 as ge,hme as gf,D1e as gg,$r as gh,nn as gi,GY as gj,yF as gk,h4 as gl,y4 as gm,iie as gn,Wge as go,$L as gp,Oge as gq,$ge as gr,nG as gs,dG as gt,Dv as gu,bge as gv,hZ as gw,R5 as gx,J1e as gy,U1e as gz,Q0e as h,OK as h$,qy as h0,QZ as h1,wW as h2,XZ as h3,FG as h4,jpe as h5,Hpe as h6,pW as h7,wge as h8,mge as h9,q1e as hA,W6 as hB,gy as hC,ure as hD,P1e as hE,$1e as hF,i1e as hG,Ws as hH,Gd as hI,x7 as hJ,Iie as hK,Gve as hL,V1e as hM,jA as hN,Yge as hO,Kge as hP,qge as hQ,Cge as hR,lO as hS,Jy as hT,Nge as hU,Af as hV,sre as hW,ere as hX,qM as hY,q6 as hZ,Y1e as h_,Rv as ha,Pv as hb,ihe as hc,dhe as hd,TZ as he,hp as hf,Jr as hg,be as hh,MW as hi,RW as hj,kW as hk,jW as hl,mL as hm,fL as hn,yL as ho,VW as hp,qW as hq,YW as hr,CW as hs,al as ht,lge as hu,JE as hv,d7 as hw,cre as hx,are as hy,k1e as hz,zV as i,g4 as i$,wve as i0,Tj as i1,wb as i2,bb as i3,NV as i4,nt as i5,O1e as i6,J0e as i7,gfe as i8,G1e as i9,z0e as iA,lH as iB,ty as iC,wA as iD,H0e as iE,OA as iF,Xve as iG,j3 as iH,sv as iI,Hme as iJ,Qve as iK,Jve as iL,Ume as iM,Ui as iN,WE as iO,Jwe as iP,Xwe as iQ,qE as iR,GE as iS,ewe as iT,Oi as iU,di as iV,gi as iW,C as iX,Hn as iY,qu as iZ,C6 as i_,sw as ia,nge as ib,hW as ic,Qe as id,Xd as ie,wte as ig,cl as ih,$ve as ii,jR as ij,zR as ik,Cy as il,sL as im,aW as io,rW as ip,aL as iq,fw as ir,Yp as is,MZ as it,Ige as iu,Kg as iv,dpe as iw,UG as ix,Nae as iy,FV as iz,k as j,xse as j$,zd as j0,dge as j1,Dr as j2,Iv as j3,Ap as j4,Xn as j5,gge as j6,C5 as j7,hve as j8,pp as j9,Sse as jA,vse as jB,gse as jC,_c as jD,Rr as jE,w8 as jF,Zs as jG,Xre as jH,dse as jI,fse as jJ,V1 as jK,v8 as jL,Lr as jM,Ise as jN,Tse as jO,W_ as jP,Nc as jQ,PA as jR,Nse as jS,Rse as jT,Pse as jU,Xx as jV,Dse as jW,$se as jX,Lse as jY,Sy as jZ,ase as j_,$f as ja,iS as jb,R1e as jc,I1e as jd,M1e as je,x1e as jf,qO as jg,xQ as jh,N1e as ji,C1e as jj,WB as jk,Jye as jl,Fi as jm,Bi as jn,li as jo,Qo as jp,cg as jq,Ty as jr,e3 as js,j1 as jt,yt as ju,Mse as jv,gl as jw,Ei as jx,Cse as jy,mn as jz,I as k,XA as k$,Ese as k0,wse as k1,Hse as k2,Vse as k3,Use as k4,uve as k5,jse as k6,zse as k7,bse as k8,_se as k9,CA as kA,ege as kB,j7 as kC,_ge as kD,p3 as kE,y3 as kF,A7 as kG,xve as kH,uR as kI,U7 as kJ,kle as kK,Q8 as kL,gw as kM,B7 as kN,Yi as kO,Hz as kP,u9 as kQ,sQ as kR,a7 as kS,g5 as kT,Ive as kU,g7 as kV,v7 as kW,xle as kX,d3 as kY,Ile as kZ,Mle as k_,Ase as ka,Fse as kb,jx as kc,pve as kd,hse as ke,pse as kf,yse as kg,mse as kh,c1e as ki,m1e as kj,g1e as kk,uge as kl,vge as km,vee as kn,j6 as ko,$S as kp,nT as kq,JS as kr,Vm as ks,Yn as kt,gre as ku,Ho as kv,wle as kw,dr as kx,lre as ky,qve as kz,Tge as l,tP as l$,mc as l0,mme as l1,kq as l2,Lq as l3,cq as l4,cI as l5,Ii as l6,iy as l7,m7 as l8,Br as l9,ZB as lA,tn as lB,T1e as lC,By as lD,X4 as lE,gv as lF,zy as lG,dy as lH,sl as lI,zi as lJ,nK as lK,Mv as lL,v1e as lM,Ze as lN,oge as lO,RV as lP,NI as lQ,ZA as lR,u1e as lS,a1e as lT,sA as lU,nd as lV,Tue as lW,sm as lX,om as lY,w3 as lZ,Wg as l_,Gy as la,Pl as lb,Xs as lc,J as ld,Hf as le,I_ as lf,vb as lg,iz as lh,on as li,C7 as lj,h3 as lk,Aue as ll,qp as lm,E8 as ln,I8 as lo,yie as lp,pae as lq,mie as lr,D8 as ls,V8 as lt,G1 as lu,l3 as lv,age as lw,T8 as lx,W1 as ly,Cle as lz,G0e as m,Age as m$,Cc as m0,h7 as m1,_7 as m2,h1 as m3,UA as m4,F7 as m5,_E as m6,vw as m7,f7 as m8,fx as m9,Wo as mA,Al as mB,M7 as mC,GA as mD,lve as mE,jN as mF,eve as mG,VN as mH,kse as mI,ave as mJ,dve as mK,K6 as mL,cve as mM,ive as mN,tve as mO,rve as mP,nve as mQ,sve as mR,cse as mS,HN as mT,ove as mU,Ose as mV,pw as mW,_8 as mX,S8 as mY,UV as mZ,MH as m_,fn as ma,jo as mb,r9 as mc,Nv as md,V3 as me,W0e as mf,e7 as mg,vl as mh,CR as mi,ry as mj,Ule as mk,Ble as ml,Cp as mm,k9 as mn,Eve as mo,xp as mp,Fle as mq,Ave as mr,Oz as ms,FC as mt,b as mu,b1e as mv,gve as mw,mve as mx,v3 as my,kge as mz,Vve as n,d1e as n0,p1e as n1,eJ as n2,VG as n3,Zv as n4,X1 as n5,BG as n6,h1e as n7,rL as n8,cge as n9,NZ as na,Bve as nb,E1e as nc,gA as nd,Q5 as ne,pge as nf,Mge as ng,HH as nh,F1e as ni,B1e as nj,fve as nk,Pve as nl,Wve as nm,Qwe as nn,Pt as o,x_ as p,Be as q,T as r,W as s,PD as t,DD as u,nc as v,hn as w,wt as x,kwe as y,c$ as z};
