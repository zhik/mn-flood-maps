(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function Mi(){}function v4(e){return e()}function MC(){return Object.create(null)}function jy(e){e.forEach(v4)}function w4(e){return typeof e=="function"}function Mc(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Tm;function NC(e,t){return Tm||(Tm=document.createElement("a")),Tm.href=t,e===Tm.href}function bV(e){return Object.keys(e).length===0}function _V(e,...t){if(e==null)return Mi;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function Jg(e,t,i){e.$$.on_destroy.push(_V(t,i))}function SV(e){return e&&w4(e.destroy)?e.destroy:Mi}function eo(e,t){e.appendChild(t)}function ho(e,t,i){e.insertBefore(t,i||null)}function vn(e){e.parentNode.removeChild(e)}function TV(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function no(e){return document.createElement(e)}function S_(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function iA(e){return document.createTextNode(e)}function oy(){return iA(" ")}function rA(){return iA("")}function EV(e,t,i,r){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function pt(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function AV(e){return Array.from(e.childNodes)}function xV(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}class CV{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,r=null){this.e||(this.is_svg?this.e=S_(i.nodeName):this.e=no(i.nodeName),this.t=i,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)ho(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(vn)}}let nA;function Rf(e){nA=e}const Ph=[],RC=[],D0=[],PC=[],IV=Promise.resolve();let T_=!1;function MV(){T_||(T_=!0,IV.then(b4))}function E_(e){D0.push(e)}const kw=new Set;let Em=0;function b4(){const e=nA;do{for(;Em<Ph.length;){const t=Ph[Em];Em++,Rf(t),NV(t.$$)}for(Rf(null),Ph.length=0,Em=0;RC.length;)RC.pop()();for(let t=0;t<D0.length;t+=1){const i=D0[t];kw.has(i)||(kw.add(i),i())}D0.length=0}while(Ph.length);for(;PC.length;)PC.pop()();T_=!1,kw.clear(),Rf(e)}function NV(e){if(e.fragment!==null){e.update(),jy(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(E_)}}const L0=new Set;let zu;function _4(){zu={r:0,c:[],p:zu}}function S4(){zu.r||jy(zu.c),zu=zu.p}function oo(e,t){e&&e.i&&(L0.delete(e),e.i(t))}function Zs(e,t,i,r){if(e&&e.o){if(L0.has(e))return;L0.add(e),zu.c.push(()=>{L0.delete(e),r&&(i&&e.d(1),r())}),e.o(t)}else r&&r()}function RV(e,t){Zs(e,1,1,()=>{t.delete(e.key)})}function PV(e,t,i,r,n,o,s,a,u,d,h,f){let y=e.length,m=o.length,g=y;const v={};for(;g--;)v[e[g].key]=g;const w=[],_=new Map,A=new Map;for(g=m;g--;){const R=f(n,o,g),B=i(R);let j=s.get(B);j?r&&j.p(R,t):(j=d(B,R),j.c()),_.set(B,w[g]=j),B in v&&A.set(B,Math.abs(g-v[B]))}const I=new Set,D=new Set;function M(R){oo(R,1),R.m(a,h),s.set(R.key,R),h=R.first,m--}for(;y&&m;){const R=w[m-1],B=e[y-1],j=R.key,Y=B.key;R===B?(h=R.first,y--,m--):_.has(Y)?!s.has(j)||I.has(j)?M(R):D.has(Y)?y--:A.get(j)>A.get(Y)?(D.add(j),M(R)):(I.add(Y),y--):(u(B,s),y--)}for(;y--;){const R=e[y];_.has(R.key)||u(R,s)}for(;m;)M(w[m-1]);return w}function sy(e){e&&e.c()}function ap(e,t,i,r){const{fragment:n,on_mount:o,on_destroy:s,after_update:a}=e.$$;n&&n.m(t,i),r||E_(()=>{const u=o.map(v4).filter(w4);s?s.push(...u):jy(u),e.$$.on_mount=[]}),a.forEach(E_)}function lp(e,t){const i=e.$$;i.fragment!==null&&(jy(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function $V(e,t){e.$$.dirty[0]===-1&&(Ph.push(e),MV(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Rp(e,t,i,r,n,o,s,a=[-1]){const u=nA;Rf(e);const d=e.$$={fragment:null,ctx:null,props:o,update:Mi,not_equal:n,bound:MC(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:MC(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};s&&s(d.root);let h=!1;if(d.ctx=i?i(e,t.props||{},(f,y,...m)=>{const g=m.length?m[0]:y;return d.ctx&&n(d.ctx[f],d.ctx[f]=g)&&(!d.skip_bound&&d.bound[f]&&d.bound[f](g),h&&$V(e,f)),y}):[],d.update(),h=!0,jy(d.before_update),d.fragment=r?r(d.ctx):!1,t.target){if(t.hydrate){const f=AV(t.target);d.fragment&&d.fragment.l(f),f.forEach(vn)}else d.fragment&&d.fragment.c();t.intro&&oo(e.$$.fragment),ap(e,t.target,t.anchor,t.customElement),b4()}Rf(u)}class Pp{$destroy(){lp(this,1),this.$destroy=Mi}$on(t,i){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(i),()=>{const n=r.indexOf(i);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!bV(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function l(e,t,i,r){var n,o=arguments.length,s=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}const DV="modulepreload",LV=function(e,t){return new URL(e,t).href},$C={},U=function(t,i,r){return!i||i.length===0?t():Promise.all(i.map(n=>{if(n=LV(n,r),n in $C)return;$C[n]=!0;const o=n.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":DV,o||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),o)return new Promise((u,d)=>{a.addEventListener("load",u),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};function OV(e){return e&&e.release&&typeof e.release=="function"}function kV(e){return e&&e.acquire&&typeof e.acquire=="function"}class uo{constructor(t,i,r,n=1,o=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=r,this.allocationSize=n,this._pool=new Array(o),this._initialSize=o,this.ctor)for(let s=0;s<o;s++)this._pool[s]=new this.ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let i;if(uo.test.disabled)i=new this.ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this.ctor}i=this._pool.pop()}return this.acquireFunction?this.acquireFunction(i,...t):kV(i)&&i.acquire(...t),i}release(t){t&&!uo.test.disabled&&(this.releaseFunction?this.releaseFunction(t):OV(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}uo.test={disabled:!1};function FV(e){e.length=0}class ji{constructor(t=50,i=50){this._pool=new uo(Array,void 0,FV,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return Fw.acquire()}static release(t){return Fw.release(t)}static prune(){Fw.prune()}}const Fw=new ji(100);function oge(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function sge(e,t){for(const i of e)if(i!=null&&t(i))return i}function A_(e){return e!=null&&typeof e[Symbol.iterator]=="function"}const BV=null;function T(e){return e!=null}function O(e){return e==null}function ko(e,t){return T(e)?t(e):BV}function age(e){return e}function UV(e,t){if(O(e))throw new Error(t);return e}function bv(e,t){return T(e)?e:typeof t=="function"?t():t}function lge(e,t){return T(e)?e:t}function on(e){return T(e)&&e.destroy(),null}function uge(e){return T(e)&&e.dispose(),null}function Dr(e){return T(e)&&e.remove(),null}function x_(e){return T(e)&&e.abort(),null}function cge(e){return T(e)&&e.release(),null}function VV(e,t,i){return T(e)&&T(t)?T(i)?i(e,t):e.equals(t):e===t}function jV(e){return null}function dge(e,t){const i=new Array;for(const r of e)i.push($h(r,null,t));return i}function pge(e,t){for(const i of e)ko(i,t)}function $h(e,t,i){return T(e)?i(e):t}function hge(e){return e.filter(t=>T(t))}function T4(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function fge(e){return e}function _v(e){return $p(()=>e.forEach(t=>T(t)&&t.remove()))}function $p(e){return{remove:()=>{e&&(e(),e=void 0)}}}class Jn{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*Jn._m:t}getInt(){return this._seed=(Jn._a*this._seed+Jn._c)%Jn._m,this._seed}getFloat(){return this.getInt()/(Jn._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Jn._m*r}}Jn._m=2147483647,Jn._a=48271,Jn._c=0;function zV(e,t){return t?e.filter((i,r,n)=>n.findIndex(t.bind(null,i))===r):e.filter((i,r,n)=>n.indexOf(i)===r)}function oA(e,t,i){if(O(e)&&O(t))return!0;if(O(e)||O(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function yge(e,t){let i=e.length!==t.length;e.length=t.length;for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function mge(e,t,i){let r,n;return i?(r=t.filter(o=>!e.some(s=>i(s,o))),n=e.filter(o=>!t.some(s=>i(s,o)))):(r=t.filter(o=>!e.includes(o)),n=e.filter(o=>!t.includes(o))),{added:r,removed:n}}function gge(e){return e&&typeof e.length=="number"}const HV=!!Array.prototype.fill;function GV(e,t){if(HV)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function vge(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class E4{constructor(){this.last=0}}const A4=new E4;function x4(e,t,i,r){r=r||A4;const n=Math.max(0,r.last-10);for(let s=n;s<i;++s)if(e[s]===t)return r.last=s,s;const o=Math.min(n,i);for(let s=0;s<o;++s)if(e[s]===t)return r.last=s,s;return-1}function C4(e,t,i,r){const n=i==null?e.length:i,o=x4(e,t,n,r);if(o!==-1)return e[o]=e[n-1],i==null&&e.pop(),t}const Sn=new Set;function WV(e,t,i=e.length,r=t.length,n,o){if(r===0||i===0)return i;Sn.clear();for(let a=0;a<r;++a)Sn.add(t[a]);n=n||A4;const s=Math.max(0,n.last-10);for(let a=s;a<i;++a)if(Sn.has(e[a])&&(o&&o.push(e[a]),Sn.delete(e[a]),e[a]=e[i-1],--i,--a,Sn.size===0||i===0))return Sn.clear(),i;for(let a=0;a<s;++a)if(Sn.has(e[a])&&(o&&o.push(e[a]),Sn.delete(e[a]),e[a]=e[i-1],--i,--a,Sn.size===0||i===0))return Sn.clear(),i;return Sn.clear(),i}new Jn;function qV(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}let dl;function k(e){return typeof dl[e]=="function"?dl[e]=dl[e](globalThis):dl[e]}var u4,c4,d4,p4;dl=((u4=globalThis.dojoConfig)==null?void 0:u4.has)||((c4=globalThis.esriConfig)==null?void 0:c4.has)?{...(d4=globalThis.dojoConfig)==null?void 0:d4.has,...(p4=globalThis.esriConfig)==null?void 0:p4.has}:{},k.add=(e,t,i,r)=>((r||dl[e]===void 0)&&(dl[e]=t),i&&k(e)),k.cache=dl,k.add("esri-deprecation-warnings",!0),(()=>{var t;k.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(k.add("host-browser",e),k.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),k.add("dom",e),k("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,o=parseFloat(n);if(k.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),k.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),k.add("khtml",n.includes("Konqueror")?o:void 0),k.add("edge",parseFloat(r.split("Edge/")[1])||void 0),k.add("opr",parseFloat(r.split("OPR/")[1])||void 0),k.add("webkit",!k("wp")&&!k("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),k.add("chrome",!k("edge")&&!k("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),k.add("android",!k("wp")&&parseFloat(r.split("Android ")[1])||void 0),k.add("safari",!n.includes("Safari")||k("wp")||k("chrome")||k("android")||k("edge")||k("opr")?void 0:parseFloat(n.split("Version/")[1])),k.add("mac",n.includes("Macintosh")),!k("wp")&&r.match(/(iPhone|iPod|iPad)/)){const s=RegExp.$1.replace(/P/,"p"),a=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",u=parseFloat(a.replace(/_/,".").replace(/_/g,""));k.add(s,u),k.add("ios",u)}k.add("trident",parseFloat(n.split("Trident/")[1])||void 0),k("webkit")||(!r.includes("Gecko")||k("wp")||k("khtml")||k("trident")||k("edge")||k.add("mozilla",o),k("mozilla")&&k.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&k.add("esri-mobile",t),i&&k.add("esri-iPhone",i),k.add("esri-geolocation",!!navigator.geolocation)}k.add("esri-canvas-svg-support",!k("trident")),k.add("esri-wasm","WebAssembly"in globalThis),k.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),k.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),k.add("esri-atomics","Atomics"in globalThis),k.add("esri-workers","Worker"in globalThis),k.add("web-feat:cache","caches"in globalThis),k.add("esri-workers-arraybuffer-transfer",!k("safari")||Number(k("safari"))>=12),k.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),k.add("featurelayer-simplify-payload-size-factors",[1,1,4]),k.add("featurelayer-snapshot-enabled",!0),k.add("featurelayer-snapshot-point-min-threshold",8e4),k.add("featurelayer-snapshot-point-max-threshold",4e5),k.add("featurelayer-snapshot-point-coverage",.1),k.add("featurelayer-advanced-symbols",!1),k.add("featurelayer-pbf",!0),k.add("featurelayer-pbf-statistics",!1),k.add("feature-layers-workers",!0),k.add("feature-polyline-generalization-factor",1),k.add("mapview-transitions-duration",200),k.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),k.add("mapserver-pbf-enabled",!1),k.add("mapimagelayer-popup-identify-max-tolerance",20),k.add("heatmap-allow-raster-fallback",!0),k.add("heatmap-force-raster",!1),k("host-webworker")||k("host-browser")&&(k.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),k.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{k.add("esri-image-decode",!0,!0,!0)}).catch(()=>{k.add("esri-image-decode",!1,!0,!0)})}return!1}),k.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function wge(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function YV(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const r=Math.max(0,i-t),n=new e.constructor(r);for(let o=0;o<r;o++)n[o]=e[t+o];return n}function bge(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function KV(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function ZV(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function JV(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function XV(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function QV(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function ej(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function tj(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function ij(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function rj(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function I4(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&I4(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function P(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=P4(e);if(T(t))return t;if(M4(e))return e.clone();if(N4(e))return e.map(P);if(R4(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=P(e[r]);return i}function C_(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=P4(e);if(T(t))return t;if(N4(e)){let i=!0;const r=e.map(n=>{const o=C_(n);return n!=null&&o==null&&(i=!1),o});return i?r:null}if(M4(e))return e.clone();if(!R4(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const n=e[r],o=C_(n);if(n!=null&&o==null)return null;i[r]=o}return i}return null}function M4(e){return typeof e.clone=="function"}function N4(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function R4(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function DC(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function P4(e){if(KV(e)||ZV(e)||JV(e)||XV(e)||QV(e)||ej(e)||tj(e)||ij(e)||rj(e))return YV(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((i,r)=>{t.set(r,P(i))}),t}if(e instanceof Set){const t=new Set;return e.forEach(i=>{t.add(P(i))}),t}return null}function sA(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function nj(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&oA(e,t):e instanceof Set?t instanceof Set&&sj(e,t):e instanceof Map?t instanceof Map&&aj(e,t):!!DC(e)&&DC(t)&&oj(e,t))}function oj(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function sj(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function aj(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const n=t.get(i);if(n!==r||n===void 0&&!t.has(i))return!1}return!0}function Ni(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function lj(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function O0(e,t,i){return i?Xg(e,t,{policy:i,path:""}):Xg(e,t,null)}function Xg(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let o=null,s="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,s=i.policy(o)),s==="replace")return r[n]=t[n],r;if(r[n]===void 0)return r[n]=P(t[n]),r;let a=r[n],u=t[n];if(a===u)return r;if(Array.isArray(u)||Array.isArray(r))a=a?Array.isArray(a)?r[n]=a.concat():r[n]=[a]:r[n]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(d=>{a.includes(d)||a.push(d)}));else if(u&&typeof u=="object")if(i){const d=i.path;i.path=o,r[n]=Xg(a,u,i),i.path=d}else r[n]=Xg(a,u,null);else r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=u);return r},e||{}):e}function $4(e){return Array.isArray(e)?e:e.split(".")}function LC(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function uj(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...LC(i));return t}return LC(e)}function D4(e,t,i,r){const n=uj(t);if(n.length!==1){const o=n.map(s=>r(e,s,i));return _v(o)}return r(e,n[0],i)}function L4(e){let t=!1;return()=>{t||(t=!0,e())}}function O4(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const r=Ni(t);return lj(r,i)?r.get(i):t[i]}function k4(e,t,i){if(e==null)return e;const r=O4(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:k4(r,t,i+1)}function zy(e,t,i=0){return typeof t!="string"||t.includes(".")?k4(e,$4(t),i):O4(t,e)}function Qg(e,t){return zy(e,t)}function OC(e,t){return zy(t,e)!==void 0}var Fo;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Fo||(Fo={}));class kC{constructor(t){this.autoDestroy=!1,this.properties=t}}function Hy(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const r=Object.create(t.properties),n=t.autoDestroy;for(const o in r)r[o]=P(r[o]);t=new kC(r),t.autoDestroy=n,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new kC({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function cj(e){return Hy(e).properties}function Sv(e,t){const i=cj(e);let r=i[t];return r||(r=i[t]={}),r}function dj(e,t){return O0(e,t,hj)}const pj=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function hj(e){return pj.test(e)?"replace":"merge"}function F4(e,t,i=!1){return U4(e,t,i)}function Dp(e,t){if(t!=null)return t[e]||B4(e.split("."),!1,t)}function hr(e,t,i){const r=e.split("."),n=r.pop(),o=B4(r,!0,i);o&&n&&(o[n]=t)}function B4(e,t,i){let r=i;for(const n of e){if(r==null)return;if(!(n in r)){if(!t)return;r[n]={}}r=r[n]}return r}function U4(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let o=r[n],s=t[n];return o===s?r:o===void 0?(r[n]=P(s),r):(Array.isArray(s)||Array.isArray(r)?(o=o?Array.isArray(o)?r[n]=o.concat():r[n]=[o]:r[n]=[],s&&(Array.isArray(s)||(s=[s]),i?s.forEach(a=>{o.includes(a)||o.push(a)}):r[n]=s.concat())):s&&typeof s=="object"?r[n]=U4(o,s,i):r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=s),r)},e||{}):e}var h4;const Ne={apiKey:void 0,applicationUrl:(h4=globalThis.location)==null?void 0:h4.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(F4(Ne,globalThis.esriConfig,!0),delete Ne.has),!Ne.assetsPath){const e="4.24.7";Ne.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Ne.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Ne,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Ne.request.corsEnabledServers=[],Ne.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const fj=/\{([^\}]+)\}/g;function FC(e){return e==null?"":e}function qo(e,t){return e.replace(fj,typeof t=="object"?(i,r)=>FC(Dp(r,t)):(i,r)=>FC(t(r)))}function aA(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function lA(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function _ge(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const BC={info:0,warn:1,error:2,none:3};class W{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,W._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=W.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=W._loggers;return W._loggers=t,i},set throttlingDisabled(t){W._throttlingDisabled=t}}}static getLogger(t){let i=W._loggers[t];return i||(i=new W({module:t})),i}_log(t,i,...r){if(!!this._matchLevel(t)){if(i!=="always"&&!W._throttlingDisabled){const n=this._argsToKey(r),o=this._loggedMessages[t].get(n);if(i==="once"&&o!=null||i==="oncePerTick"&&o&&o>=W._tickCounter)return;this._loggedMessages[t].set(n,W._tickCounter),W._scheduleTickCounterIncrement()}for(const n of Ne.log.interceptors)if(n(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;T(r);){const n=r[t];if(T(n))return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=Ne.log.level?Ne.log.level:"warn";return BC[this._parentWithMember("level",i)]<=BC[t]}_argsToKey(...t){const i=(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]";return lA(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){W._tickCounterScheduled||(W._tickCounterScheduled=!0,Promise.resolve().then(()=>{W._tickCounter++,W._tickCounterScheduled=!1}))}}W._loggers={},W._tickCounter=0,W._tickCounterScheduled=!1,W._throttlingDisabled=!1;var De;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(De||(De={}));const I_=De.USER+1;function pl(e){switch(e){case"defaults":return De.DEFAULTS;case"service":return De.SERVICE;case"portal-item":return De.PORTAL_ITEM;case"web-scene":return De.WEB_SCENE;case"web-map":return De.WEB_MAP;case"user":return De.USER}}function e1(e){switch(e){case De.DEFAULTS:return"defaults";case De.SERVICE:return"service";case De.PORTAL_ITEM:return"portal-item";case De.WEB_SCENE:return"web-scene";case De.WEB_MAP:return"web-map";case De.USER:return"user"}return void 0}function yj(e){return e1(e)}var qe;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(qe||(qe={}));let t1,Dh=[];const mj=W.getLogger("esri.core.Accessor");function Ee(e){t1!==void 0&&t1.onObservableAccessed(e)}let k0=!1,F0=!1;function Js(e,t,i){if(k0)return uA(e,t,i);V4(e);const r=t.call(i);return j4(),r}function gj(e,t){return Js(void 0,e,t)}function uA(e,t,i){const r=k0;k0=!0,V4(e);let n=null;try{n=t.call(i)}catch(o){F0&&mj.error(o)}return j4(),k0=r,n}function V4(e){t1=e,Dh.push(e)}function j4(){const e=Dh.pop();t1=Dh.length>0?Dh[Dh.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function z4(e,t){if(t.flags&qe.DepTrackingInitialized)return;const i=F0;F0=!1,t.flags&qe.AutoTracked?uA(t,t.metadata.get,e):H4(e,t),F0=i}const vj=[];function H4(e,t){t.flags&qe.ExplicitlyTracking||(t.flags|=qe.ExplicitlyTracking,uA(t,()=>{const i=t.metadata.dependsOn||vj;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=$4(r);for(let o=0,s=e;o<n.length&&s!=null&&typeof s=="object";++o)s=UC(s,n[o],o!==n.length-1)}else UC(e,r,!1)}),t.flags&=~qe.ExplicitlyTracking)}function UC(e,t,i){var o;const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.getItemAt(s)}const n=(o=Ni(e))==null?void 0:o.properties.get(r);return n&&(Ee(n),z4(e,n)),i?e[r]:void 0}class G4{constructor(t,i){this._observers=t,this._observer=i}remove(){qV(this._observers,this._observer)}}class VC{constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=qe.Dirty|(r.nonNullable?qe.NonNullable:0)|(r.hasOwnProperty("value")?qe.HasDefaultValue:0)|(r.get===void 0?qe.DepTrackingInitialized:0)|(r.dependsOn===void 0?qe.AutoTracked:0)}destroy(){if(this.flags&qe.Dirty&&this._observers){const t=this._observers.slice();for(const i of t)i.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Ee(this);const t=this.properties.store,i=this.propertyName,r=this.flags,n=t.get(i);if(r&qe.Computing||~r&qe.Dirty&&t.has(i))return n;this.flags|=qe.Computing;const o=this.properties.host;let s;r&qe.AutoTracked?s=Js(this,this.metadata.get,o):(H4(o,this),s=this.metadata.get.call(o)),t.set(i,s,De.COMPUTED);const a=t.get(i);return a===n?this.flags&=~qe.Dirty:gj(this.commit,this),this.flags&=~qe.Computing,a}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=qe.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let r=0;r<t.length;++r)i.push(t[r].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new G4(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&qe.Overriden&&(this.flags|=qe.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~qe.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class cA{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new cA;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,P(r))}),i}get(t){return this._values.get(t)}originOf(){return De.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function Am(e,t,i){return e!==void 0}function jC(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&qe.NonNullable)||(r.lifecycle,Fo.INITIALIZING,!1))}function wj(e){return e&&typeof e.destroy=="function"}W.getLogger("esri.core.accessorSupport.Properties");class bj{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Fo.INITIALIZING,this.store=new cA,this._origin=De.USER;const i=this.host.constructor.__accessorMetadata__,r=i.properties;for(const n in r){const o=new VC(this,n,r[n]);this.properties.set(n,o)}this.metadatas=r,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=Fo.CONSTRUCTING}constructed(){this.lifecycle=Fo.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const r=this.internalGet(t);r&&wj(r)&&(r.destroy(),~i.flags&qe.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==Fo.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();Ee(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.flags&qe.HasDefaultValue)return"defaults"}return e1(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(Am(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);Am(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const n=this.properties.get(i);if(!Am(n))return"";const o=new Set,s=Js({onObservableAccessed:u=>o.add(u),onTrackingEnd:()=>{}},()=>{var u;return(u=n.metadata.get)==null?void 0:u.call(t)});let a=`${r}${t.declaredClass.split(".").pop()}.${i}: ${s}
`;if(o.size===0)return a;r+="  ";for(const u of o){if(!(u instanceof VC))continue;const d=u.properties.host,h=u.propertyName,f=Ni(d);a+=f?f.getDependsInfo(d,h,r):`${r}${h}: undefined
`}return a}setAtOrigin(t,i,r){const n=this.properties.get(t);if(Am(n))return this._setAtOrigin(n,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&qe.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&qe.Overriden&&(i.flags&=~qe.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!jC(r,t,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:s,value:a}=o;if(Bw.release(o),!s)return;i=a}r.flags|=qe.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!jC(r,t,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:a,value:u}=s;if(Bw.release(s),!a)return;i=u}const o=r.metadata.set;o?o.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=pl(t)}getDefaultOrigin(){return e1(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Fo.INITIALIZING?this._origin:De.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const n=this.store,o=t.propertyName;n.has(o,r)&&sA(i,n.get(o))&&~t.flags&qe.Overriden&&r===n.originOf(o)||(t.invalidate(),n.set(o,i,r),t.commit(),z4(this.host,t))}_cast(t,i){const r=Bw.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}}class _j{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const Bw=new uo(_j);function Sj(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const n=Dp(r,t),o=n==null?"":n;if(o===void 0)throw new Error(`could not find key "${r}" in template`);return o.toString()})}class Tv{constructor(t,i,r){this.name=t,this.details=r,this.message=void 0,this instanceof Tv&&(this.message=i&&Sj(i,r)||"")}toString(){return"["+this.name+"]: "+this.message}}class N extends Tv{constructor(t,i,r){if(super(t,i,r),!(this instanceof N))return new N(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return P(i)}catch{return"[object]"}}))}}catch(t){throw W.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new N(t.name,t.message,t.details)}}N.prototype.type="error";function i1(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))i1(e,r,t[r]);else{if(t.includes(".")){const n=t.split("."),o=n.splice(n.length-1,1)[0];return void i1(Qg(e,n),o,i)}const r=e.__accessor__;r!=null&&Tj(t,r),e[t]=i}}function Tj(e,t){if(k("esri-unknown-property-errors")&&!Ej(e,t))throw new N("set:unknown-property",Aj(e,t))}function Ej(e,t){return t.metadatas[e]!=null}function Aj(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}W.getLogger("esri.core.accessorSupport.set");class W4 extends uo{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=jV(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const xm=[];function r1(e){xm.push(e),xm.length===1&&queueMicrotask(()=>{const t=xm.slice();xm.length=0;for(const i of t)i()})}const xj=29;class Pf{constructor(t,i=xj){this.name=t,this._counter=0,this._items=new Array(i)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,i)=>t-i)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,i)=>t+i,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var M_;(function(e){const t=(o,s,a,u)=>{let d=s,h=s;const f=a>>>1,y=o[d-1];for(;h<=f;){h=d<<1,h<a&&u(o[h-1],o[h])<0&&++h;const m=o[h-1];if(u(m,y)<=0)break;o[d-1]=m,d=h}o[d-1]=y},i=(o,s)=>o<s?-1:o>s?1:0;function r(o,s,a,u){s===void 0&&(s=0),a===void 0&&(a=o.length),u===void 0&&(u=i);for(let h=a>>>1;h>s;h--)t(o,h,a,u);const d=s+1;for(let h=a-1;h>s;h--){const f=o[s];o[s]=o[h],o[h]=f,t(o,d,h,u)}}function*n(o,s,a,u){s===void 0&&(s=0),a===void 0&&(a=o.length),u===void 0&&(u=i);for(let h=a>>>1;h>s;h--)t(o,h,a,u),yield;const d=s+1;for(let h=a-1;h>s;h--){const f=o[s];o[s]=o[h],o[h]=f,t(o,d,h,u),yield}}e.sort=r,e.iterableSort=n})(M_||(M_={}));const zC=M_,Cj=1.5,Ij=1.1;class wl{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new E4,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>HC(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];t(n)&&i.push(n)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,HC(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=x4(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const i=C4(this.data,t,this.length,this._hint);return i!==void 0&&(this.length=this.length-1),this._shrink(),i}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=WV(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){t>=this.length||i>=this.length||t===i||([this.data[t],this.data[i]]=[this.data[i],this.data[t]])}sort(t){zC.sort(this.data,0,this.length,t)}iterableSort(t){return zC.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}filterInPlace(t,i){let r=0;for(let n=0;n<this._length;++n){const o=this.data[n];t.call(i,o,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=o,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,n=this.data;for(let o=0;o<r;++o)t.call(i,n[o],o,n)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=t.call(i,this.data[n],n,this.data);return r}reduce(t,i){let r=i;for(let n=0;n<this.length;++n)r=t(r,this.data[n],n,this.data);return r}has(t){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===t)return!0;return!1}}function HC(e){e.data.length>Cj*e.length&&(e.data.length=Math.floor(e.length*Ij))}function Mj(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const Gy=Mj(globalThis),GC=new Set;function Nj(e,t,i=!1){i&&GC.has(t)||(i&&GC.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function N_(e,t,i={}){if(k("esri-deprecation-warnings")){const{moduleName:r}=i;q4(e,`Property: ${(r?r+"::":"")+t}`,i)}}function q4(e,t,i={}){if(k("esri-deprecation-warnings")){const{replacement:r,version:n,see:o,warnOnce:s}=i;let a=t;r&&(a+=`
	\u{1F6E0}\uFE0F Replacement: ${r}`),n&&(a+=`
	\u2699\uFE0F Version: ${n}`),o&&(a+=`
	\u{1F517} See ${o} for more details.`),Nj(e,a,s)}}function Ev(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function Av(e,t,i){if(!Ev(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const n of r)e.addEventListener(n,i);return{remove(){for(const n of r)e.removeEventListener(n,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function Y4(e,t,i){if(!Ev(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=Av(e,t,n=>{r.remove(),i.call(e,n)});return{remove(){r.remove()}}}const Rj={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Bo({key:e}){return Rj[e]||e}function bt(e="Aborted"){return new N("AbortError",e)}function _t(e,t="Aborted"){if(hn(e))throw bt(t)}function xv(e){return T(e)?"aborted"in e?e:e.signal:e}function hn(e){const t=xv(e);return T(t)&&t.aborted}function bl(e){if(Ki(e))throw e}function R_(e){if(!Ki(e))throw e}function fn(e,t){const i=xv(e);if(!O(i)){if(!i.aborted)return Y4(i,"abort",()=>t());t()}}function dA(e,t){const i=xv(e);if(!O(i))return _t(i),Y4(i,"abort",()=>t(bt()))}function Pj(e,t){const i=xv(t);return O(i)?e:new Promise((r,n)=>{let o=fn(t,()=>n(bt()));const s=()=>o=Dr(o);e.then(s,s),e.then(r,n)})}function Ki(e){return e&&e.name==="AbortError"}async function P_(e){try{return await e}catch(t){if(!Ki(t))throw t}}function Xs(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}async function ri(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(s=>e[s]),n=await ri(r),o={};return i.map((s,a)=>o[s]=n[a]),o}const t=e;return new Promise(i=>{const r=[];let n=t.length;n===0&&i(r),t.forEach(o=>{const s={promise:o||Promise.resolve(o)};r.push(s),s.promise.then(a=>{s.value=a}).catch(a=>{s.error=a}).then(()=>{--n,n===0&&i(r)})})})}async function $j(e){return(await ri(e)).filter(t=>!!t.value).map(t=>t.value)}function Cv(e,t,i){const r=new AbortController;return fn(i,()=>r.abort()),new Promise((n,o)=>{let s=setTimeout(()=>{s=0,n(t)},e);fn(r,()=>{s&&(clearTimeout(s),o(bt()))})})}function ia(e){return e&&typeof e.then=="function"}function $_(e){return ia(e)?e:Promise.resolve(e)}function pA(e,t=-1){let i,r,n,o,s=null;const a=(...u)=>{if(i){r=u,o&&o.reject(bt()),o=Xs();const y=o.promise;if(s){const m=s;s=null,m.abort()}return y}if(n=o||Xs(),o=null,t>0){const y=new AbortController;i=$_(e(...u,y.signal));const m=i;Cv(t).then(()=>{i===m&&(o?y.abort():s=y)})}else i=1,i=$_(e(...u));const d=()=>{const y=r;r=n=i=s=null,y!=null&&a(...y)},h=i,f=n;return h.then(d,d),h.then(f.resolve,f.reject),f.promise};return a}function Dj(){let e,t;const i=new Promise((n,o)=>{e=n,t=o}),r=n=>{e(n)};return r.resolve=n=>e(n),r.reject=n=>t(n),r.timeout=(n,o)=>Gy.setTimeout(()=>r.reject(o),n),r.promise=i,r}function hA(e,t){let i,r=new AbortController;const n=e(r.signal);let o={promise:n,finished:!1,abort:()=>{r&&(r.abort(),r=null)}};const s=()=>{o&&(o.finished=!0,o=null),T(i)&&(i.remove(),i=null),r=null};return n.then(s,s),i=fn(t,()=>{T(o)&&o.abort()}),o}async function WC(e){await Promise.resolve(),_t(e)}function Sge(e){return e}class Lj{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class Oj{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let D_=0;const ah={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},L_=["prepare","preRender","render","postRender","update","finish"],O_=[],pc=new wl;class kj{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const n1={frameTasks:pc,willDispatch:!1,clearFrameTasks:Fj,dispatch:J4,executeFrameTasks:Bj};function Lp(e){const t=new Oj(e);return O_.push(t),n1.willDispatch||(n1.willDispatch=!0,r1(J4)),t}function up(e){const t=new Lj(e);return pc.push(t),o1==null&&(D_=performance.now(),o1=requestAnimationFrame(K4)),new kj(t)}let o1=null;function Fj(e=!1){pc.forAll(t=>{t.removed=!0}),e&&Z4()}function K4(){const e=performance.now();o1=null,o1=pc.length>0?requestAnimationFrame(K4):null,n1.executeFrameTasks(e)}function Bj(e){const t=e-D_;D_=e;const i=1e3/60,r=Math.max(0,t-i);for(let n=0;n<L_.length;n++){const o=performance.now(),s=L_[n];pc.forAll(a=>{var u;a.paused||a.removed||(n===0&&a.ticks++,a.phases[s]&&(ah.time=e,ah.deltaTime=a.ticks===0?0:t,ah.elapsedFrameTime=performance.now()-e,ah.frameDuration=i-r,(u=a.phases[s])==null||u.call(a,ah)))}),Vj[n].record(performance.now()-o)}Z4(),jj.record(performance.now()-e)}const Cm=new wl;function Z4(){pc.forAll(e=>{e.removed&&Cm.push(e)}),pc.removeUnorderedMany(Cm.data,Cm.length),Cm.clear()}function J4(){for(;O_.length;){const e=O_.shift();e.isActive&&e.callback()}n1.willDispatch=!1}function Uj(e=1,t){const i=Dj(),r=()=>{hn(t)?i.reject(bt()):e===0?i():(--e,r1(()=>r()))};return r(),i.promise}const Vj=L_.map(e=>new Pf(e)),jj=new Pf("total");function zj(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let Hj=0;function $f(){return++Hj}class Iv{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let r=0;r<i.length;++r)t.push(i[r].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let Gd=!1;const s1=[];function X4(e,t){let i=new Iv(o),r=null,n=!1;function o(){if(!i||n)return;if(Gd)return void t5(o);const a=r;i.clear(),Gd=!0,n=!0,r=Js(i,e),n=!1,Gd=!1,t(r,a),i5()}function s(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Js(i,e),n=!1,{remove:s}}function Q4(e,t){let i=new Iv(n),r=null;function n(){t(r,s)}function o(){i&&(i.destroy(),i=null),r=null}function s(){return i?(i.clear(),r=Js(i,e),r):null}return s(),{remove:o}}function e5(e){let t=new Iv(r),i=!1;function r(){t&&!i&&(Gd?t5(r):(t.clear(),Gd=!0,i=!0,Js(t,e),i=!1,Gd=!1,i5()))}function n(){t&&(t.destroy(),t=null)}return i=!0,Js(t,e),i=!1,{remove:n}}function t5(e){s1.includes(e)||s1.unshift(e)}function i5(){for(;s1.length;)s1.pop()()}var Df;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Df||(Df={}));class ay{constructor(){this.uid=$f(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,n,o){return this.pool.acquire(Df.Untracked,t,i,r,n,o,sA)}static acquireTracked(t,i,r,n){return this.pool.acquire(Df.Tracked,t,i,r,null,null,n)}notify(t,i){this.type===Df.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,n,o,s,a){this.uid=$f(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=n,this.target=o,this.path=s,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=$f(),this.removed=!0}}ay.pool=new W4(ay);const B0=new ji,Hs=new Set;let a1;function l1(e){Hs.delete(e),Hs.add(e),a1||(a1=Lp(qj))}function Gj(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Wj(e){for(const t of Hs.values())t.target===e&&(t.removed=!0)}function qj(){let e=10;for(;a1&&e--;){a1=null;const t=Yj(),i=B0.acquire();for(const r of t){const n=r.uid;Gj(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Hs)r.removed&&(i.push(r),Hs.delete(r));for(const r of i)ay.pool.release(r);B0.release(i),B0.release(t),k_.forEach(r=>r())}}function Yj(){const e=B0.acquire();e.length=Hs.size;let t=0;for(const i of Hs)e[t]=i,++t;return Hs.clear(),e}const k_=new Set;function Kj(e){return k_.add(e),{remove(){k_.delete(e)}}}function Zj(e,t,i){let r=D4(e,t,i,(n,o,s)=>{let a,u,d=Q4(()=>zy(n,o),(h,f)=>{n.__accessor__.destroyed||a&&a.uid!==u?r.remove():(a||(a=ay.acquireUntracked(h,s,f,n,o),u=a.uid),l1(a))});return{remove:L4(()=>{d.remove(),a&&(a.uid!==u||a.removed||(a.removed=!0,l1(a)),a=null),r=d=null})}});return r}function Jj(e,t,i){const r=D4(e,t,i,(n,o,s)=>{let a=!1;return X4(()=>zy(n,o),(u,d)=>{n.__accessor__.destroyed?r.remove():a||(a=!0,sA(d,u)||s.call(n,u,d,o,n),a=!1)})});return r}function Xj(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?Jj(e,t,i):Zj(e,t,i)}function Qj(e,t,i){let r,n,o=Q4(e,(s,a)=>{r&&r.uid!==n?o.remove():(r||(r=ay.acquireTracked(s,t,a,i),n=r.uid),l1(r))});return{remove:L4(()=>{o.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,l1(r)),r=null),o=null})}}function ez(e,t,i){let r=!1;return X4(e,(n,o)=>{r||(r=!0,i(o,n)||t(n,o),r=!1)})}function tz(e,t,i=!1,r=nj){return i?ez(e,t,r):Qj(e,t,r)}function qC(e){return zj(Hs,t=>t.oldValue===e)}function Mv(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function r5(e,t,i){const r=e.get(t);if(r!==void 0)return r;const n=i();return e.set(t,n),n}const Wd=W.getLogger("esri.core.Accessor");function iz(e){return e==null?e:new Date(e)}function rz(e){return e==null?e:!!e}function Wy(e){return e==null?e:e.toString()}function sn(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function fA(e){return e==null?e:Math.round(parseFloat(e))}function n5(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function u1(e,t){return t!=null&&e&&!(t instanceof e)}function o5(e){return e&&"isCollection"in e}function YC(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function nz(e,t){if(!t||!t.constructor||!o5(t.constructor))return F_(e,t)?t:new e(t);const i=YC(e.prototype.itemType),r=YC(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(F_(e,t),t):new e(t):t}function F_(e,t){return!!n5(t)&&(Wd.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Nv(e)+"'"),!0)}function yA(e,t){return t==null?t:o5(e)?nz(e,t):u1(e,t)?F_(e,t)?t:new e(t):t}function Nv(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const oz=new WeakMap;function sz(e){switch(e){case Number:return sn;case Qe:return fA;case Boolean:return rz;case String:return Wy;case Date:return iz;default:return r5(oz,e,()=>yA.bind(null,e))}}function Ze(e,t){const i=sz(e);return arguments.length===1?i:i(t)}function ly(e,t,i){return arguments.length===1?ly.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function az(e,t){return arguments.length===1?ly(Ze.bind(null,e)):ly(Ze.bind(null,e),t)}function s5(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>s5(e,t-1,r)):e(i)}function c1(e,t,i){if(arguments.length===2)return c1.bind(null,e,t);if(!i)return i;let r=t,n=i=s5(e,t,i);for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let o=0;o<r;o++)i=[i];return i}function lz(e,t,i){return arguments.length===2?c1(Ze.bind(null,e),t):c1(Ze.bind(null,e),t,i)}function a5(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function B_(e,t){if(arguments.length===2)return B_(e).call(null,t);const i=new Set,r=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||i.add(a);let o=null,s=null;return(a,u)=>{if(a==null)return a;const d=typeof a,h=d==="string"||d==="number";return h&&(i.has(a)||n.some(f=>d==="string"&&f===String||d==="number"&&f===Number))||d==="object"&&n.some(f=>!u1(a,f))?a:(h&&r.length?(o||(o=r.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Wd.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof a=="object"&&n.length?(s||(s=n.map(f=>Nv(f)).join(", ")),Wd.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${s}`)):Wd.error("Accessor#set",`'${a}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function Yo(e,t){if(arguments.length===2)return Yo(e).call(null,t);const i={},r=[],n=[];for(const u in e.typeMap){const d=e.typeMap[u];i[u]=Ze(d),r.push(Nv(d)),n.push(u)}const o=()=>`'${r.join("', '")}'`,s=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?u=>u[e.key]:e.key;return u=>{if(e.base&&!u1(e.base,u)||u==null)return u;const d=a(u)||e.defaultKeyValue,h=i[d];if(!h)return Wd.error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${s()})`),null;if(!u1(e.typeMap[d],u))return u;if(typeof e.key=="string"&&!n5(u)){const f={};for(const y in u)y!==e.key&&(f[y]=u[y]);return h(f)}return h(u)}}class Qe{}const Tge={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function uz(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function l5(e){switch(e.type){case"native":return Ze(e.value);case"array":return ly(l5(e.value));case"one-of":return cz(e);default:return null}}function cz(e){let t=null;return(i,r)=>V_(i,e)?i:(t==null&&(t=U_(e)),Wd.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function U_(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Qe:return"integer";case Date:return"date";default:return Nv(e.value)}case"array":return`array of ${U_(e.value)}`;case"one-of":{const t=e.values.map(i=>U_(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function V_(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Qe:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!V_(i,t.value));case"one-of":return t.values.some(i=>V_(e,i))}}function c(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),n=Sv(t,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in e&&W.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=r.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const o=e.aliasOf;if(o){const u=typeof o=="string"?o:o.source,d=typeof o=="string"?null:o.overridable===!0;let h;n.dependsOn=[u],n.get=function(){let f=Qg(this,u);if(typeof f=="function"){h||(h=u.split(".").slice(0,-1).join("."));const y=Qg(this,h);y&&(f=f.bind(y))}return f},n.readOnly||(n.set=d?function(f){f!==void 0?this._override(i,f):this._clearOverride(i)}:function(f){i1(this,u,f)})}const s=e.type,a=e.types;n.cast||(s?n.cast=dz(s):a&&(Array.isArray(a)?n.cast=ly(Yo(a[0])):n.cast=Yo(a))),e.range&&(n.cast=pz(n.cast,e.range)),dj(n,e)}}function u5(e,t,i){const r=Sv(e,i);r.json||(r.json={});let n=r.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function dz(e){let t=0,i=e;if(uz(e))return l5(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(a5(r))return t===0?B_(r):c1(B_(r),t);if(t===1)return az(r);if(t>1)return lz(r,t);const n=e;return n.from?n.from:Ze(n)}function pz(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function hz(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const n=t[r];i[r].forEach(o=>{t[o]=n}),delete t[r]}}}class Zi extends Tv{constructor(t,i,r){if(super(t,i,r),!(this instanceof Zi))return new Zi(t,i,r)}}Zi.prototype.type="warning";function c5(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const j_=W.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function KC(e,t,i){var r,n;e&&(!i&&!t.read||((r=t.read)==null?void 0:r.reader)||((n=t.read)==null?void 0:n.enabled)===!1||mz(e)&&hr("read.reader",Op(e),t))}function Op(e){var i,r,n;const t=(i=e.ndimArray)!=null?i:0;if(t>1)return yz(e);if(t===1)return ZC(e);if("type"in e&&p5(e.type)){const o=(n=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:n.Type,s=ZC(typeof o=="function"?{type:o}:{types:o});return(a,u,d)=>{const h=s(a,u,d);return h&&new e.type(h)}}return mA(e)}function mA(e){return"type"in e?fz(e.type):gz(e.types)}function fz(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void j_.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const o=new e;return o.read(t,r),o}:e.fromJSON}function d5(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(n=>d5(e,n,i,r-1)):e(t,void 0,i)}function yz(e){var n;const t=mA(e),i=d5.bind(null,t),r=(n=e.ndimArray)!=null?n:0;return(o,s,a)=>{if(o==null)return o;o=i(o,a,r);let u=r,d=o;for(;u>0&&Array.isArray(d);)u--,d=d[0];if(d!==void 0)for(let h=0;h<u;h++)o=[o];return o}}function ZC(e){const t=mA(e);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const s=[];for(const a of i){const u=t(a,void 0,n);u!==void 0&&s.push(u)}return s}const o=t(i,void 0,n);return o!==void 0?[o]:void 0}}function p5(e){if(!c5(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?gA(t.Type):h5(t.Type))}function mz(e){return"types"in e?h5(e.types):gA(e.type)}function gA(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||p5(e))}function h5(e){for(const t in e.typeMap)if(!gA(e.typeMap[t]))return!1;return!0}function gz(e){var r;let t=null;const i=(r=e.errorContext)!=null?r:"type";return(n,o,s)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void j_.error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=vz(e));const u=e.key;if(typeof u!="string")return;const d=n[u],h=d?t[d]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const y=`Type '${d||"unknown"}' is not supported`;return s&&s.messages&&n&&s.messages.push(new Zi(`${i}:unsupported`,y,{definition:n,context:s})),void j_.error(y)}const f=new h;return f.read(n,s),f}}function vz(e){var i,r;const t={};for(const n in e.typeMap){const o=e.typeMap[n],s=Hy(o.prototype);if(typeof e.key=="function")continue;const a=s.properties[e.key];if(!a)continue;((i=a.json)==null?void 0:i.type)&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(t[a.json.type[0]]=o);const u=(r=a.json)==null?void 0:r.write;if(!u||!u.writer){t[n]=o;continue}const d=u.target,h=typeof d=="string"?d:e.key,f={};u.writer(n,f,h),f[h]&&(t[f[h]]=o)}return t}function wz(e){if(e.json||(e.json={}),XC(e.json),QC(e.json),JC(e.json),e.json.origins)for(const t in e.json.origins)XC(e.json.origins[t]),QC(e.json.origins[t]),JC(e.json.origins[t]);return!0}function JC(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function XC(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function QC(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const bz=W.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function eI(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(i===1||"type"in e&&c5(e.type))?t.write.writer=Tz:i>1?t.write.writer=Ez(i):t.types?Array.isArray(t.types)?t.write.writer=Sz(t.types[0]):t.write.writer=_z(t.types):t.write.writer=uy}function _z(e){return(t,i,r,n)=>t?f5(t,e,n)?uy(t,i,r,n):void 0:uy(t,i,r,n)}function f5(e,t,i){var r,n;for(const o in t.typeMap)if(e instanceof t.typeMap[o])return!0;if(i!=null&&i.messages){const o=(r=t.errorContext)!=null?r:"type",s=`Values of type '${(n=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?n:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new N(`${o}:unsupported`,s,{definition:e,context:i})),bz.error(s)}return!1}function Sz(e){return(t,i,r,n)=>!t||!Array.isArray(t)?uy(t,i,r,n):uy(t.filter(o=>f5(o,e,n)),i,r,n)}function uy(e,t,i,r){hr(i,d1(e,r),t)}function d1(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?p1(e):e}function p1(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Tz(e,t,i,r){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(o=>d1(o,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[d1(e,r)],hr(i,n,t)}function y5(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>y5(r,t,i-1)):d1(e,t)}function Ez(e){return(t,i,r,n)=>{let o;if(t===null)o=null;else{o=y5(t,n,e);let s=e,a=o;for(;s>0&&Array.isArray(a);)s--,a=a[0];if(a!==void 0)for(let u=0;u<s;u++)o=[o]}hr(r,o,i)}}function z_(e,t){return vA(e,"read",t)}function m5(e,t){return vA(e,"write",t)}function vA(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const n=e.json.origins[i.origin];n&&(t==="any"||t in n)&&(r=n)}return r}function Az(e){const t=xz(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],n=r.types?Cz(r):t;KC(n,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),eI(n,r)}KC(t,e.json,!0),eI(t,e.json)}function xz(e){return e.json.types?H_(e.json):e.type?g5(e):H_(e)}function Cz(e){return e.type?g5(e):H_(e)}function g5(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!a5(i);)i=i[0],t++;return{type:i,ndimArray:t}}function H_(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function Iz(e){wz(e)&&(hz(e),Az(e))}const Uw=new Set,Vw=new Set;function S(e){return t=>{t.prototype.declaredClass=e,Nz(t);const i=[],r=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!Uw.has(n.initialize)&&(Uw.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!Vw.has(n.destroy)&&(Vw.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);Uw.clear(),Vw.clear();class o extends t{constructor(...a){if(super(...a),this.constructor===o&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let u=i.length-1;u>=0;u--)i[u].call(this)}}),r.length){let u=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!u){u=!0;for(let d=0;d<r.length;d++)r[d].call(this)}}})}this.postscript(...a)}}}return o.__accessorMetadata__=Hy(t.prototype),o.prototype.declaredClass=e,o}}function Mz(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;Ee(i);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function Nz(e){const t=e.prototype,i=Hy(t).properties,r={};for(const n of Object.getOwnPropertyNames(i)){const o=i[n];Iz(o),r[n]={enumerable:!0,configurable:!0,get:Mz(n,o),set(s){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&o.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===Fo.CONSTRUCTED&&o.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,s)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:s})}}}Object.defineProperties(e.prototype,r)}var v5;function Rz(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Lh=Symbol("Accessor-Handles");class se{constructor(...t){if(this[v5]=null,this.constructor===se)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new bj(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const o=this;class s extends o{constructor(...u){super(...u),this.inherited=null,n&&n.apply(this,u)}}Hy(s.prototype);for(const a in t){const u=t[a];s.prototype[a]=typeof u=="function"?function(...d){const h=this.inherited;let f;this.inherited=function(...y){if(o.prototype[a])return o.prototype[a].apply(this,y)};try{f=u.apply(this,d)}catch(y){throw this.inherited=h,y}return this.inherited=h,f}:t[a]}for(const a in i){const u=Rz(i[a]);c(u)(s.prototype,a)}return S(r)(s)}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(ko(this[Lh],t=>{t.forEach(i=>i.remove())}),this[Lh]=null,Wj(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===Fo.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Qg(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return i1(this,t,i),this}watch(t,i,r){return Xj(this,t,i,r)}own(t){let i=this[Lh];if(O(i)&&(i=this[Lh]=new Set),A_(t))for(const r of t)i.add(r);else i.add(t)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,i){return this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}v5=Lh;class qd{constructor(){this._emitter=new qd.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(n=null){this.target=n,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(n,o){const s=this._listenersMap&&this._listenersMap.get(n);if(!s)return!1;const a=this.target||this;return[...s].forEach(u=>{u.call(a,o)}),s.length>0}on(n,o){if(Array.isArray(n)){const a=n.map(u=>this.on(u,o));return _v(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const s=this._listenersMap.get(n)||[];return s.push(o),this._listenersMap.set(n,s),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(n)||[],u=a.indexOf(o);u>=0&&a.splice(u,1)}}}once(n,o){const s=this.on(n,a=>{s.remove(),o.call(null,a)});return s}hasEventListener(n){const o=this._listenersMap&&this._listenersMap.get(n);return o!=null&&o.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(o,s){return this._emitter.emit(o,s)}on(o,s){return this._emitter.on(o,s)}once(o,s){return this._emitter.once(o,s)}hasEventListener(o){return this._emitter.hasEventListener(o)}};return n=l([S("esri.core.Evented")],n),n};let i=class extends se{constructor(){super(...arguments),this._emitter=new qd.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=l([S("esri.core.Evented")],i),e.EventedAccessor=i})(qd||(qd={}));const ra=qd;var Ge;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Ge||(Ge={}));function wA(e){return(t,i)=>{t[i]=e}}class w5{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new G4(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const r=t[i];r.onInvalidated(),r.onCommitted()}}}var ks;class Pz{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const zr=new uo(Pz,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),$z=()=>{};function jw(e){return e?e instanceof Nu?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function zw(e){if(e&&e.length)return e[0]}function Dz(e,t,i,r){const n=Math.min(e.length-i,t.length-r);let o=0;for(;o<n&&e[i+o]===t[r+o];)o++;return o}function b5(e,t,i,r){t&&t.forEach((n,o,s)=>{e.push(n),b5(e,i.call(r,n,o,s),i,r)})}const la=new Set,ua=new Set,ca=new Set,Hw=new Map;let Lz=0,Nu=ks=class extends ra.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new w5,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Lz++})}static isCollection(e){return e!=null&&e instanceof ks}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof ks?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Ee(this._observable),this._items}set items(e){this._emitBeforeChanges(Ge.ADD)||(this._splice(0,this.length,jw(e)),this._emitAfterChanges(Ge.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=$z,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(Ee(this._observable),this._emitBeforeChanges(Ge.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(Ge.ADD),this}addMany(e,t=this._items.length){if(Ee(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Ge.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,jw(e)),this._emitAfterChanges(Ge.ADD),this}at(e){if(Ee(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Ge.REMOVE),e}clone(){return Ee(this._observable),this._createNewInstance({items:this._items.map(P)})}concat(...e){Ee(this._observable);const t=e.map(jw);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)e.call(t,i[n],n,i);this._emitAfterChanges(Ge.REMOVE)}every(e,t){return Ee(this._observable),this._items.every(e,t)}filter(e,t){let i;return Ee(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return Ee(this._observable),this._items.find(e,t)}findIndex(e,t){return Ee(this._observable),this._items.findIndex(e,t)}flatten(e,t){Ee(this._observable);const i=[];return b5(i,this,e,t),new ks(i)}forEach(e,t){return Ee(this._observable),this._items.forEach(e,t)}getItemAt(e){return Ee(this._observable),this._items[e]}getNextIndex(e){Ee(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Ee(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Ee(this._observable),this._items.indexOf(e,t)}join(e=","){return Ee(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Ee(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Ee(this._observable);const i=this._items.map(e,t);return new ks({items:i})}reorder(e,t=this.length-1){Ee(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Ge.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Ge.MOVE)}return e}}pop(){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.REMOVE))return;const e=zw(this._splice(this.length-1,1));return this._emitAfterChanges(Ge.REMOVE),e}push(...e){return Ee(this._observable),this._emitBeforeChanges(Ge.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Ge.ADD)),this.length}reduce(e,t){Ee(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Ee(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Ee(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Ee(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Ge.REMOVE))return;const t=zw(this._splice(e,1));return this._emitAfterChanges(Ge.REMOVE),t}removeMany(e){if(Ee(this._observable),!e||!e.length||this._emitBeforeChanges(Ge.REMOVE))return[];const t=e instanceof ks?e.toArray():e,i=this._items,r=[],n=t.length;for(let o=0;o<n;o++){const s=t[o],a=i.indexOf(s);if(a>-1){const u=1+Dz(t,i,o+1,a+1),d=this._splice(a,u);d&&d.length>0&&r.push.apply(r,d),o+=u-1}}return this._emitAfterChanges(Ge.REMOVE),r}reverse(){if(Ee(this._observable),this._emitBeforeChanges(Ge.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Ge.MOVE),this}shift(){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.REMOVE))return;const e=zw(this._splice(0,1));return this._emitAfterChanges(Ge.REMOVE),e}slice(e=0,t=this.length){return Ee(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Ee(this._observable),this._items.some(e,t)}sort(e){if(Ee(this._observable),!this.length||this._emitBeforeChanges(Ge.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Ge.MOVE),this}splice(e,t,...i){Ee(this._observable);const r=(t?Ge.REMOVE:0)|(i.length?Ge.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(e,t,i)||[];return this._emitAfterChanges(r),n}toArray(){return Ee(this._observable),this._items.slice()}toJSON(){return Ee(this._observable),this.toArray()}toLocaleString(){return Ee(this._observable),this._items.toLocaleString()}toString(){return Ee(this._observable),this._items.toString()}unshift(...e){return Ee(this._observable),!e.length||this._emitBeforeChanges(Ge.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Ge.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,n=this.itemType;let o,s;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Lp(()=>this._dispatchChange())),t){if(s=r.splice(e,t),this.hasEventListener("before-remove")){const a=zr.acquire();a.target=this,a.cancellable=!0;for(let u=0,d=s.length;u<d;u++)o=s[u],a.reset(o),this.emit("before-remove",a),a.defaultPrevented&&(s.splice(u,1),r.splice(e,0,o),e+=1,u-=1,d-=1);zr.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=zr.acquire();a.target=this,a.cancellable=!1;const u=s.length;for(let d=0;d<u;d++)a.reset(s[d]),this.emit("after-remove",a);zr.release(a)}}if(i&&i.length){if(n){const h=[];for(const f of i){const y=n.ensureType(f);y==null&&f!=null||h.push(y)}i=h}const a=this.hasEventListener("before-add"),u=this.hasEventListener("after-add"),d=e===this.length;if(a||u){const h=zr.acquire();h.target=this,h.cancellable=!0;const f=zr.acquire();f.target=this,f.cancellable=!1;for(const y of i)a?(h.reset(y),this.emit("before-add",h),h.defaultPrevented||(d?r.push(y):r.splice(e++,0,y),this._set("length",r.length),u&&(f.reset(y),this.emit("after-add",f)))):(d?r.push(y):r.splice(e++,0,y),this._set("length",r.length),f.reset(y),this.emit("after-add",f));zr.release(f),zr.release(h)}else{if(d)for(const h of i)r.push(h);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||s&&s.length)&&this._notifyChangeEvent(i,s),s}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=zr.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,zr.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=zr.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),zr.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;la.clear(),ua.clear(),ca.clear();for(const{added:u,removed:d}of i){if(u)if(ca.size===0&&ua.size===0)for(const h of u)la.add(h);else for(const h of u)ua.has(h)?(ca.add(h),ua.delete(h)):ca.has(h)||la.add(h);if(d)if(ca.size===0&&la.size===0)for(const h of d)ua.add(h);else for(const h of d)la.has(h)?la.delete(h):(ca.delete(h),ua.add(h))}const r=ji.acquire();la.forEach(u=>{r.push(u)});const n=ji.acquire();ua.forEach(u=>{n.push(u)});const o=this._items,s=t.items,a=ji.acquire();if(ca.forEach(u=>{s.indexOf(u)!==o.indexOf(u)&&a.push(u)}),t.listeners&&(r.length||n.length||a.length)){const u={target:this,added:r,removed:n,moved:a},d=t.listeners.length;for(let h=0;h<d;h++){const f=t.listeners[h];f.removed||f.callback.call(this,u)}}ji.release(r),ji.release(n),ji.release(a)}la.clear(),ua.clear(),ca.clear()}};Nu.ofType=e=>{if(!e)return ks;if(Hw.has(e))return Hw.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const n=e.typeMap[r].prototype.declaredClass;t?t+=` | ${n}`:t=n}let i=class extends ks{};return l([wA({Type:e,ensureType:typeof e=="function"?Ze(e):Yo(e)})],i.prototype,"itemType",void 0),i=l([S(`esri.core.Collection<${t}>`)],i),Hw.set(e,i),i},l([c()],Nu.prototype,"length",void 0),l([c()],Nu.prototype,"items",null),Nu=ks=l([S("esri.core.Collection")],Nu);const he=Nu;function hc(e,t,i=he){return t||(t=new i),t===e||(t.removeAll(),Oz(e)?t.addMany(e):e&&t.add(e)),t}function _5(e){return e}function Oz(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}class bA{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new bA;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,P(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i,r;return(r=(i=this._values.get(t))==null?void 0:i.origin)!=null?r:De.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===De.DEFAULTS){const n=this._values.get(t);if(n&&n.origin!=null&&n.origin>r)return}this._values.set(t,new kz(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===De.DEFAULTS?t:De.USER}}class kz{constructor(t,i){this.value=t,this.origin=i}}function S5(e,t,i){t.keys().forEach(n=>{i.set(n,t.get(n),De.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(n=>{e.internalGet(n)&&i.set(n,e.internalGet(n),De.DEFAULTS)})}function Fz(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&OC(r,i))return!0}else for(const n of r)if(n===t||n.includes(".")&&n.indexOf(t)===0&&OC(n,i))return!0;return!1}function Bz(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Uz(e,t,i,r,n){let o=z_(t[i],n);Bz(o)&&(e[i]=!0);for(const s of Object.getOwnPropertyNames(t))o=z_(t[s],n),Fz(o,i,r)&&(e[s]=!0)}function Vz(e,t,i,r){const n=i.metadatas,o=vA(n[t],"any",r),s=o&&o.default;if(s===void 0)return;const a=typeof s=="function"?s.call(e,t,r):s;a!==void 0&&i.set(t,a)}const T5={origin:"service"};function E5(e,t,i=T5){if(!t||typeof t!="object")return;const r=Ni(e),n=r.metadatas,o={};for(const s of Object.getOwnPropertyNames(t))Uz(o,n,s,t,i);r.setDefaultOrigin(i.origin);for(const s of Object.getOwnPropertyNames(o)){const a=z_(n[s],i).read,u=a&&a.source;let d;d=u&&typeof u=="string"?zy(t,u):t[s],a&&a.reader&&(d=a.reader.call(e,d,t,i)),d!==void 0&&r.set(s,d)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const s of Object.getOwnPropertyNames(n))o[s]||Vz(e,s,r,i)}r.setDefaultOrigin("user")}function jz(e,t,i,r=T5){var o;const n={...r,messages:[]};i(n),(o=n.messages)==null||o.forEach(s=>{s.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(s):e.loadWarnings.push(s)})}const zz=W.getLogger("esri.core.accessorSupport.write");function Hz(e,t,i,r,n){var s,a;const o={};return(a=(s=t.write)==null?void 0:s.writer)==null||a.call(e,r,o,i,n),o}function A5(e,t,i,r,n,o){if(!r||!r.write)return!1;const s=e.get(i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(e,s,i,o);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1)return!1;if((s===null&&!n.allowNull&&!n.writerEnsuresNonNull||s===void 0)&&n.isRequired){const a=new N("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return a&&o&&o.messages?o.messages.push(a):a&&!o&&zz.error(a.name,a.message),!1}return!(s===void 0||s===null&&!n.allowNull&&!n.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===De.DEFAULTS)&&Gz(e,i,o,r,s)||!n.ignoreOrigin&&o&&o.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<pl(o.origin))}function Gz(e,t,i,r,n){const o=r.default;if(o===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof o=="function"){if(Array.isArray(n)){const s=o.call(e,t,i);return oA(s,n)}return!1}return o===n}function Wz(e,t,i,r){const n=Ni(e),o=n.metadatas,s=m5(o[t],r);return!!s&&A5(e,n,t,s,i,r)}function x5(e,t,i){var o,s;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return O0(t,e.toJSON(i));const r=Ni(e),n=r.metadatas;for(const a in n){const u=m5(n[a],i);if(!A5(e,r,a,u,void 0,i))continue;const d=e.get(a),h=Hz(e,u,u.write&&typeof u.write.target=="string"?u.write.target:a,d,i);Object.keys(h).length>0&&(t=O0(t,h),(s=(o=i==null?void 0:i.resources)==null?void 0:o.pendingOperations)!=null&&s.length&&Promise.all(i.resources.pendingOperations).then(()=>O0(t,h)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:a,oldOrigin:yj(r.store.originOf(a)),newOrigin:i.origin}))}return t}const qy=e=>{let t=class extends e{constructor(...i){super(...i);const r=Ni(this),n=r.store,o=new bA;r.store=o,S5(r,n,o)}read(i,r){E5(this,i,r)}write(i={},r){return x5(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return qz.call(this,i,r)}};return t=l([S("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function qz(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let V=class extends qy(se){};V=l([S("esri.core.JSONSupport")],V);var el;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(el||(el={}));class Yz{constructor(t){this.instance=t,this._resolver=Xs(),this._status=el.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=el.RESOLVED,this._cleanUp()},()=>{this._status=el.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===el.RESOLVED}isRejected(){return this._status===el.REJECTED}isFulfilled(){return this._status!==el.PENDING}abort(){this._resolver.reject(bt())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=Xs(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},n=>{this.isFulfilled()||this._allPromise!==r||Ki(n)||this._resolver.reject(n)}),t.resolve()}}const Rv=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new Yz(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((n,o)=>{this._promiseProps.when(n,o)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=l([S("esri.core.Promise")],t),t};let h1=class extends Rv(se){};h1=l([S("esri.core.Promise")],h1);const Kz="not-loaded",Zz="loading",Jz="failed",tI="loaded",C5=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=o=>{const s=new Promise((a,u)=>{const d=dA(o,u);this.destroyed&&u(new N("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,u).finally(()=>{d&&d.remove()})});if(this.loadStatus===Kz){this._set("loadStatus",Zz);const a=this._loadController=new AbortController;n({signal:a.signal}),fn(a.signal,()=>{this._promiseProps.abort()})}return r(),s}})),this.when(()=>{this._set("loadStatus",tI),this._loadController=null},r=>{this._set("loadStatus",Jz),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===tI}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new N("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return l([c({readOnly:!0})],t.prototype,"loaded",null),l([c({readOnly:!0})],t.prototype,"loadError",void 0),l([c({clonable:!1})],t.prototype,"loadStatus",void 0),l([c({type:[Zi],readOnly:!0})],t.prototype,"loadWarnings",null),t=l([S("esri.core.Loadable")],t),t};let Oh=class extends C5(h1){};Oh=l([S("esri.core.Loadable")],Oh),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=C5,e.isLoadable=t}(Oh||(Oh={}));const Ko=Oh;function Xz(e,t,i){return ri(e.map((r,n)=>t.apply(i,[r,n])))}async function Qz(e,t,i){return(await ri(e.map((r,n)=>t.apply(i,[r,n])))).map(r=>r.value)}async function Pv(e){if(O(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function Ege(e){try{return{ok:!0,value:await e}}catch(t){return bl(t),{ok:!1,error:t}}}async function I5(e,t){return await e.load(),eH(e,t)}async function eH(e,t){const i=[],r=(...o)=>{for(const s of o)O(s)||(Array.isArray(s)?r(...s):he.isCollection(s)?s.forEach(a=>r(a)):Ko.isLoadable(s)&&i.push(s))};t(r);let n=null;if(await Qz(i,async o=>{(await Pv(tH(o)?o.loadAll():o.load())).ok!==!1||n||(n=o)}),n)throw n.loadError;return e}function tH(e){return"loadAll"in e&&typeof e.loadAll=="function"}const iH=W.getLogger("esri.core.urlUtils"),kp=Ne.request,iI="esri/config: esriConfig.request.proxyUrl is not set.",M5=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,N5=/^\s*http:/i,rH=/^\s*https:/i,nH=/^\s*file:/i,oH=/:\d+$/,sH=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,aH=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),lH=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class Yd{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(aH);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(lH),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const Im={},uH=new Yd(Ne.applicationUrl);let Ci=uH;const cH=dH();let _A=cH;const SA=()=>Ci,R5=()=>_A;function dH(){const e=Ci.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Ci.scheme}://${Ci.host}${Ci.port!=null?`:${Ci.port}`:""}`}${t}`}function rt(e){const t={path:null,query:null},i=new Yd(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=P5(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function P5(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const n=r.indexOf("=");let o,s;n<0?(o=decodeURIComponent(r),s=""):(o=decodeURIComponent(r.slice(0,n)),s=decodeURIComponent(r.slice(n+1)));let a=i[o];typeof a=="string"&&(a=i[o]=[a]),Array.isArray(a)?a.push(s):i[o]=s}return i}function rI(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function fc(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",o=t&&t[i];return o?n+encodeURIComponent(o(r)):Array.isArray(r)?r.map(s=>rI(s)?n+encodeURIComponent(JSON.stringify(s)):n+encodeURIComponent(s)).join("&"):rI(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function pH(e=!1){let t,i=kp.proxyUrl;if(typeof e=="string"){t=vH(e);const r=$v(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw iH.warn(iI),new N("urlutils:proxy-not-set",iI);return t&&G_()&&(i=CA(i)),rt(i)}function Age(e){const t=$v(e);let i,r;if(t){const n=TA(t.proxyUrl);i=n.path,r=n.query?P5(n.query):null}if(i){const n=rt(e);e=i+"?"+n.path;const o=fc({...r,...n.query});o&&(e=`${e}?${o}`)}return e}const lh={path:"",query:""};function TA(e){const t=e.indexOf("?");return t!==-1?(lh.path=e.slice(0,t),lh.query=e.slice(t+1)):(lh.path=e,lh.query=null),lh}function $5(e){return e=(e=f1(e=TH(e=TA(e).path),!0)).toLowerCase()}function hH(e){const t={proxyUrl:e.proxyUrl,urlPrefix:$5(e.urlPrefix)},i=kp.proxyRules,r=t.urlPrefix;let n=i.length;for(let o=0;o<i.length;o++){const s=i[o].urlPrefix;if(r.indexOf(s)===0){if(r.length===s.length)return-1;n=o;break}s.indexOf(r)===0&&(n=o+1)}return i.splice(n,0,t),n}function $v(e){const t=kp.proxyRules,i=$5(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function D5(e,t){return e=nI(e),t=nI(t),f1(e)===f1(t)}function nI(e){const t=(e=Lr(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function L5(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=kp.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function cy(e,t,i=!1){const r=q_(e),n=q_(t);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function EA(e){if(typeof e=="string"){if(!Gi(e))return!0;e=q_(e)}if(cy(e,Ci))return!0;const t=kp.trustedServers||[];for(let i=0;i<t.length;i++){const r=fH(t[i]);for(let n=0;n<r.length;n++)if(cy(e,r[n]))return!0}return!1}function fH(e){return Im[e]||(xA(e)||yn(e)?Im[e]=[new Yd(to(e))]:Im[e]=[new Yd(`http://${e}`),new Yd(`https://${e}`)]),Im[e]}function to(e,t=_A,i){return yn(e)?i&&i.preserveProtocolRelative?e:Ci.scheme==="http"&&Ci.authority===dn(e).slice(2)?`http:${e}`:`https:${e}`:xA(e)?e:Zo(e[0]==="/"?SH(t):t,e)}function AA(e,t=_A,i){if(!Gi(e))return e;const r=Lr(e),n=r.toLowerCase(),o=Lr(t).toLowerCase().replace(/\/+$/,""),s=i?Lr(i).toLowerCase().replace(/\/+$/,""):null;if(s&&o.indexOf(s)!==0)return e;const a=(f,y,m)=>(m=f.indexOf(y,m))===-1?f.length:m;let u=a(n,"/",n.indexOf("//")+2),d=-1;for(;n.slice(0,u+1)===o.slice(0,u)+"/"&&(d=u+1,u!==n.length);)u=a(n,"/",u+1);if(d===-1||s&&d<s.length)return e;e=r.slice(d);const h=o.slice(d-1).replace(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function Lr(e){return e=xH(e=AH(e=EH(e=to(e=e.trim()))))}function Zo(...e){const t=e.filter(T);if(!t||!t.length)return;const i=[];if(Gi(t[0])){const n=t[0],o=n.indexOf("//");o!==-1&&(i.push(n.slice(0,o+1)),bH(t[0])&&(i[0]+="/"),t[0]=n.slice(o+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((n,o)=>o?n.concat(o.split("/")):n,[]);for(let n=0;n<r.length;n++){const o=r[n];o===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!o&&n===r.length-1||o&&(o!=="."||i.length===0))&&i.push(o)}return i.join("/")}function dn(e,t=!1){if(Dv(e)||Nc(e))return null;let i=e.indexOf("://");if(i===-1&&yn(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=f1(e,!0)),e}function Gi(e){return yn(e)||xA(e)}function Dv(e){return e!=null&&e.slice(0,5)==="blob:"}function Nc(e){return e.slice(0,5)==="data:"}function xge(e){const t=O5(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let n=0;n<i.length;n++)r[n]=i.charCodeAt(n);return r.buffer}function Cge(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const yH=/^data:(.*?)(;base64)?,(.*)$/;function O5(e){const t=e.match(yH);if(!t)return null;const[,i,r,n]=t;return{mediaType:i,isBase64:!!r,data:n}}function k5(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function Ige(e,t){mH(e,t)||gH(e,t)}function mH(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function gH(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function yn(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function xA(e){return M5.test(e)}function vH(e){return rH.test(e)||Ci.scheme==="https"&&yn(e)}function wH(e){return N5.test(e)||Ci.scheme==="http"&&yn(e)}function bH(e){return nH.test(e)}function CA(e){return yn(e)?`https:${e}`:e.replace(N5,"https:")}function _H(){return Ci.scheme==="http"}function G_(){return Ci.scheme==="https"}function f1(e,t=!1){return yn(e)?e.slice(2):(e=e.replace(M5,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function SH(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function F5(e){let t=0;if(Gi(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function Mge(e,t){if(!e)return"";const i=rt(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const n=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(n,"")}function TH(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function Lv(e){return e.replace(/\/+$/,"")}function EH(e){if(/^https?:\/\//i.test(e)){const t=TA(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function AH(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function xH(e){const t=kp.httpsDomains;if(!wH(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),oH.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return _H()&&r===Ci.authority&&!sH.test(e)||(G_()&&r===Ci.authority||t&&t.some(n=>r===n||r.endsWith(`.${n}`))||G_()&&!$v(e))&&(e=CA(e)),e}function W_(e,t,i){if(!(t&&i&&e&&Gi(e)))return e;const r=e.indexOf("//"),n=e.indexOf("/",r+2),o=e.indexOf(":",r+2),s=Math.min(n<0?e.length:n,o<0?e.length:o);return e.slice(r+2,s).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(s)}`}function q_(e){return typeof e=="string"?new Yd(to(e)):(e.scheme||(e.scheme=Ci.scheme),e)}function Nge(e){return IH.test(e)}function B5(e,t){const i=rt(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function U5(e,t,i){const r=rt(e),n=r.query||{};return n[t]=String(i),`${r.path}?${fc(n)}`}function Gs(e,t){const i=rt(e),r=i.query||{};for(const o in t)r[o]=t[o];const n=fc(r);return n?`${i.path}?${n}`:i.path}function Rge(e){if(O(e))return null;const t=e.match(CH);return t?t[1]:null}const CH=/.*?\.([^\/]*)$/,IH=/(^data:image\/svg|\.svg$)/i;function X(e,t,i){let r,n;return t===void 0?(n=e,r=[void 0]):typeof t!="string"?(n=e,r=[void 0],i=t):(n=t,r=Array.isArray(e)?e:[e]),(o,s)=>{const a=o.constructor.prototype;for(const u of r){const d=u5(o,u,n);d.write&&typeof d.write=="object"||(d.write={}),i&&(d.write.target=i),d.write.writer=a[s]}}}var yc;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(yc||(yc={}));let p;const b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(p=2e3;p<=2045;p++)b[p]=0;for(p=2056;p<=2065;p++)b[p]=0;for(p=2067;p<=2135;p++)b[p]=0;for(p=2137;p<=2154;p++)b[p]=0;for(p=2161;p<=2170;p++)b[p]=0;for(p=2172;p<=2193;p++)b[p]=0;for(p=2195;p<=2198;p++)b[p]=0;for(p=2200;p<=2203;p++)b[p]=0;for(p=2205;p<=2217;p++)b[p]=0;for(p=2222;p<=2224;p++)b[p]=1;for(p=2225;p<=2250;p++)b[p]=2;for(p=2251;p<=2253;p++)b[p]=1;for(p=2257;p<=2264;p++)b[p]=2;for(p=2274;p<=2279;p++)b[p]=2;for(p=2280;p<=2282;p++)b[p]=1;for(p=2283;p<=2289;p++)b[p]=2;for(p=2290;p<=2292;p++)b[p]=0;for(p=2308;p<=2313;p++)b[p]=0;for(p=2315;p<=2491;p++)b[p]=0;for(p=2494;p<=2866;p++)b[p]=0;for(p=2867;p<=2869;p++)b[p]=1;for(p=2870;p<=2888;p++)b[p]=2;for(p=2891;p<=2895;p++)b[p]=2;for(p=2896;p<=2898;p++)b[p]=1;for(p=2902;p<=2908;p++)b[p]=2;for(p=2915;p<=2920;p++)b[p]=2;for(p=2921;p<=2923;p++)b[p]=1;for(p=2924;p<=2930;p++)b[p]=2;for(p=2931;p<=2962;p++)b[p]=0;for(p=2964;p<=2968;p++)b[p]=2;for(p=2969;p<=2973;p++)b[p]=0;for(p=2975;p<=2991;p++)b[p]=0;for(p=2995;p<=3051;p++)b[p]=0;for(p=3054;p<=3079;p++)b[p]=0;for(p=3081;p<=3088;p++)b[p]=0;for(p=3092;p<=3101;p++)b[p]=0;for(p=3106;p<=3138;p++)b[p]=0;for(p=3146;p<=3151;p++)b[p]=0;for(p=3153;p<=3166;p++)b[p]=0;for(p=3168;p<=3172;p++)b[p]=0;for(p=3174;p<=3203;p++)b[p]=0;for(p=3294;p<=3358;p++)b[p]=0;for(p=3367;p<=3403;p++)b[p]=0;for(p=3408;p<=3416;p++)b[p]=0;for(p=3417;p<=3438;p++)b[p]=2;for(p=3441;p<=3446;p++)b[p]=2;for(p=3447;p<=3450;p++)b[p]=0;for(p=3451;p<=3459;p++)b[p]=2;for(p=3460;p<=3478;p++)b[p]=0;for(p=3554;p<=3559;p++)b[p]=0;for(p=3560;p<=3570;p++)b[p]=2;for(p=3571;p<=3581;p++)b[p]=0;for(p=3594;p<=3597;p++)b[p]=0;for(p=3601;p<=3604;p++)b[p]=0;for(p=3637;p<=3639;p++)b[p]=0;for(p=3665;p<=3667;p++)b[p]=0;for(p=3693;p<=3695;p++)b[p]=0;for(p=3701;p<=3727;p++)b[p]=0;for(p=3728;p<=3739;p++)b[p]=2;for(p=3740;p<=3751;p++)b[p]=0;for(p=3753;p<=3760;p++)b[p]=2;for(p=3761;p<=3773;p++)b[p]=0;for(p=3775;p<=3777;p++)b[p]=0;for(p=3779;p<=3781;p++)b[p]=0;for(p=3783;p<=3785;p++)b[p]=0;for(p=3788;p<=3791;p++)b[p]=0;for(p=3797;p<=3802;p++)b[p]=0;for(p=3814;p<=3816;p++)b[p]=0;for(p=3825;p<=3829;p++)b[p]=0;for(p=3832;p<=3841;p++)b[p]=0;for(p=3844;p<=3852;p++)b[p]=0;for(p=3873;p<=3885;p++)b[p]=0;for(p=3890;p<=3893;p++)b[p]=0;for(p=3907;p<=3912;p++)b[p]=0;for(p=3942;p<=3950;p++)b[p]=0;for(p=3968;p<=3970;p++)b[p]=0;for(p=3973;p<=3976;p++)b[p]=0;for(p=3986;p<=3989;p++)b[p]=0;for(p=3994;p<=3997;p++)b[p]=0;for(p=4048;p<=4051;p++)b[p]=0;for(p=4056;p<=4063;p++)b[p]=0;for(p=4093;p<=4096;p++)b[p]=0;for(p=4390;p<=4398;p++)b[p]=0;for(p=4399;p<=4413;p++)b[p]=2;for(p=4418;p<=4433;p++)b[p]=2;for(p=4455;p<=4457;p++)b[p]=2;for(p=4484;p<=4489;p++)b[p]=0;for(p=4491;p<=4554;p++)b[p]=0;for(p=4568;p<=4589;p++)b[p]=0;for(p=4652;p<=4656;p++)b[p]=0;for(p=4766;p<=4800;p++)b[p]=0;for(p=5014;p<=5016;p++)b[p]=0;for(p=5069;p<=5072;p++)b[p]=0;for(p=5105;p<=5130;p++)b[p]=0;for(p=5173;p<=5188;p++)b[p]=0;for(p=5253;p<=5259;p++)b[p]=0;for(p=5269;p<=5275;p++)b[p]=0;for(p=5292;p<=5311;p++)b[p]=0;for(p=5329;p<=5331;p++)b[p]=0;for(p=5343;p<=5349;p++)b[p]=0;for(p=5355;p<=5357;p++)b[p]=0;for(p=5387;p<=5389;p++)b[p]=0;for(p=5459;p<=5463;p++)b[p]=0;for(p=5479;p<=5482;p++)b[p]=0;for(p=5518;p<=5520;p++)b[p]=0;for(p=5530;p<=5539;p++)b[p]=0;for(p=5550;p<=5552;p++)b[p]=0;for(p=5562;p<=5583;p++)b[p]=0;for(p=5623;p<=5625;p++)b[p]=2;for(p=5631;p<=5639;p++)b[p]=0;for(p=5649;p<=5653;p++)b[p]=0;for(p=5663;p<=5680;p++)b[p]=0;for(p=5682;p<=5685;p++)b[p]=0;for(p=5875;p<=5877;p++)b[p]=0;for(p=5896;p<=5899;p++)b[p]=0;for(p=5921;p<=5940;p++)b[p]=0;for(p=6050;p<=6125;p++)b[p]=0;for(p=6244;p<=6275;p++)b[p]=0;for(p=6328;p<=6348;p++)b[p]=0;for(p=6350;p<=6356;p++)b[p]=0;for(p=6366;p<=6372;p++)b[p]=0;for(p=6381;p<=6387;p++)b[p]=0;for(p=6393;p<=6404;p++)b[p]=0;for(p=6480;p<=6483;p++)b[p]=0;for(p=6511;p<=6514;p++)b[p]=0;for(p=6579;p<=6581;p++)b[p]=0;for(p=6619;p<=6624;p++)b[p]=0;for(p=6625;p<=6627;p++)b[p]=2;for(p=6628;p<=6632;p++)b[p]=0;for(p=6634;p<=6637;p++)b[p]=0;for(p=6669;p<=6692;p++)b[p]=0;for(p=6707;p<=6709;p++)b[p]=0;for(p=6720;p<=6723;p++)b[p]=0;for(p=6732;p<=6738;p++)b[p]=0;for(p=6931;p<=6933;p++)b[p]=0;for(p=6956;p<=6959;p++)b[p]=0;for(p=7005;p<=7007;p++)b[p]=0;for(p=7057;p<=7070;p++)b[p]=2;for(p=7074;p<=7082;p++)b[p]=0;for(p=7109;p<=7118;p++)b[p]=0;for(p=7119;p<=7127;p++)b[p]=1;for(p=7374;p<=7376;p++)b[p]=0;for(p=7528;p<=7586;p++)b[p]=0;for(p=7587;p<=7645;p++)b[p]=2;for(p=7692;p<=7696;p++)b[p]=0;for(p=7755;p<=7787;p++)b[p]=0;for(p=7791;p<=7795;p++)b[p]=0;for(p=7799;p<=7801;p++)b[p]=0;for(p=7803;p<=7805;p++)b[p]=0;for(p=7825;p<=7831;p++)b[p]=0;for(p=7845;p<=7859;p++)b[p]=0;for(p=8013;p<=8032;p++)b[p]=0;for(p=8065;p<=8068;p++)b[p]=1;for(p=8518;p<=8529;p++)b[p]=2;for(p=8533;p<=8536;p++)b[p]=2;for(p=8538;p<=8540;p++)b[p]=2;for(p=8677;p<=8679;p++)b[p]=0;for(p=8836;p<=8840;p++)b[p]=0;for(p=8857;p<=8859;p++)b[p]=0;for(p=8908;p<=8910;p++)b[p]=0;for(p=9154;p<=9159;p++)b[p]=0;for(p=9205;p<=9218;p++)b[p]=0;for(p=9271;p<=9273;p++)b[p]=0;for(p=9295;p<=9297;p++)b[p]=0;for(p=9356;p<=9360;p++)b[p]=0;for(p=9404;p<=9407;p++)b[p]=0;for(p=9476;p<=9482;p++)b[p]=0;for(p=9487;p<=9494;p++)b[p]=0;for(p=9697;p<=9699;p++)b[p]=0;for(p=20002;p<=20032;p++)b[p]=0;for(p=20062;p<=20092;p++)b[p]=0;for(p=20135;p<=20138;p++)b[p]=0;for(p=20248;p<=20258;p++)b[p]=0;for(p=20348;p<=20358;p++)b[p]=0;for(p=20436;p<=20440;p++)b[p]=0;for(p=20822;p<=20824;p++)b[p]=0;for(p=20904;p<=20932;p++)b[p]=0;for(p=20934;p<=20936;p++)b[p]=0;for(p=21004;p<=21032;p++)b[p]=0;for(p=21035;p<=21037;p++)b[p]=0;for(p=21095;p<=21097;p++)b[p]=0;for(p=21148;p<=21150;p++)b[p]=0;for(p=21207;p<=21264;p++)b[p]=0;for(p=21307;p<=21364;p++)b[p]=0;for(p=21413;p<=21423;p++)b[p]=0;for(p=21453;p<=21463;p++)b[p]=0;for(p=21473;p<=21483;p++)b[p]=0;for(p=21780;p<=21782;p++)b[p]=0;for(p=21891;p<=21894;p++)b[p]=0;for(p=21896;p<=21899;p++)b[p]=0;for(p=22171;p<=22177;p++)b[p]=0;for(p=22181;p<=22187;p++)b[p]=0;for(p=22191;p<=22197;p++)b[p]=0;for(p=22234;p<=22236;p++)b[p]=0;for(p=22521;p<=22525;p++)b[p]=0;for(p=22991;p<=22994;p++)b[p]=0;for(p=23028;p<=23038;p++)b[p]=0;for(p=23830;p<=23853;p++)b[p]=0;for(p=23866;p<=23872;p++)b[p]=0;for(p=23877;p<=23884;p++)b[p]=0;for(p=23886;p<=23894;p++)b[p]=0;for(p=23946;p<=23948;p++)b[p]=0;for(p=24311;p<=24313;p++)b[p]=0;for(p=24342;p<=24347;p++)b[p]=0;for(p=24370;p<=24374;p++)b[p]=10;for(p=24375;p<=24381;p++)b[p]=0;for(p=24718;p<=24721;p++)b[p]=0;for(p=24817;p<=24821;p++)b[p]=0;for(p=24877;p<=24882;p++)b[p]=0;for(p=24891;p<=24893;p++)b[p]=0;for(p=25391;p<=25395;p++)b[p]=0;for(p=25828;p<=25838;p++)b[p]=0;for(p=26191;p<=26195;p++)b[p]=0;for(p=26391;p<=26393;p++)b[p]=0;for(p=26701;p<=26722;p++)b[p]=0;for(p=26729;p<=26799;p++)b[p]=2;for(p=26801;p<=26803;p++)b[p]=2;for(p=26811;p<=26813;p++)b[p]=2;for(p=26847;p<=26870;p++)b[p]=2;for(p=26891;p<=26899;p++)b[p]=0;for(p=26901;p<=26923;p++)b[p]=0;for(p=26929;p<=26946;p++)b[p]=0;for(p=26948;p<=26998;p++)b[p]=0;for(p=27037;p<=27040;p++)b[p]=0;for(p=27205;p<=27232;p++)b[p]=0;for(p=27258;p<=27260;p++)b[p]=0;for(p=27391;p<=27398;p++)b[p]=0;for(p=27561;p<=27564;p++)b[p]=0;for(p=27571;p<=27574;p++)b[p]=0;for(p=27581;p<=27584;p++)b[p]=0;for(p=27591;p<=27594;p++)b[p]=0;for(p=28191;p<=28193;p++)b[p]=0;for(p=28348;p<=28358;p++)b[p]=0;for(p=28402;p<=28432;p++)b[p]=0;for(p=28462;p<=28492;p++)b[p]=0;for(p=29118;p<=29122;p++)b[p]=0;for(p=29168;p<=29172;p++)b[p]=0;for(p=29177;p<=29185;p++)b[p]=0;for(p=29187;p<=29195;p++)b[p]=0;for(p=29900;p<=29903;p++)b[p]=0;for(p=30161;p<=30179;p++)b[p]=0;for(p=30491;p<=30494;p++)b[p]=0;for(p=30729;p<=30732;p++)b[p]=0;for(p=31251;p<=31259;p++)b[p]=0;for(p=31265;p<=31268;p++)b[p]=0;for(p=31275;p<=31279;p++)b[p]=0;for(p=31281;p<=31297;p++)b[p]=0;for(p=31461;p<=31469;p++)b[p]=0;for(p=31491;p<=31495;p++)b[p]=0;for(p=31917;p<=31922;p++)b[p]=0;for(p=31965;p<=32e3;p++)b[p]=0;for(p=32001;p<=32003;p++)b[p]=2;for(p=32005;p<=32031;p++)b[p]=2;for(p=32033;p<=32060;p++)b[p]=2;for(p=32064;p<=32067;p++)b[p]=2;for(p=32074;p<=32077;p++)b[p]=2;for(p=32081;p<=32086;p++)b[p]=0;for(p=32107;p<=32130;p++)b[p]=0;for(p=32133;p<=32158;p++)b[p]=0;for(p=32164;p<=32167;p++)b[p]=2;for(p=32180;p<=32199;p++)b[p]=0;for(p=32201;p<=32260;p++)b[p]=0;for(p=32301;p<=32360;p++)b[p]=0;for(p=32601;p<=32662;p++)b[p]=0;for(p=32664;p<=32667;p++)b[p]=2;for(p=32701;p<=32761;p++)b[p]=0;for(p=53001;p<=53004;p++)b[p]=0;for(p=53008;p<=53019;p++)b[p]=0;for(p=53021;p<=53032;p++)b[p]=0;for(p=53034;p<=53037;p++)b[p]=0;for(p=53042;p<=53046;p++)b[p]=0;for(p=53074;p<=53080;p++)b[p]=0;for(p=54001;p<=54004;p++)b[p]=0;for(p=54008;p<=54019;p++)b[p]=0;for(p=54021;p<=54032;p++)b[p]=0;for(p=54034;p<=54037;p++)b[p]=0;for(p=54042;p<=54046;p++)b[p]=0;for(p=54048;p<=54053;p++)b[p]=0;for(p=54074;p<=54080;p++)b[p]=0;for(p=54098;p<=54101;p++)b[p]=0;for(p=102001;p<=102040;p++)b[p]=0;for(p=102042;p<=102063;p++)b[p]=0;for(p=102065;p<=102067;p++)b[p]=0;for(p=102070;p<=102117;p++)b[p]=0;for(p=102122;p<=102216;p++)b[p]=0;for(p=102221;p<=102377;p++)b[p]=0;for(p=102382;p<=102388;p++)b[p]=0;for(p=102389;p<=102398;p++)b[p]=2;for(p=102399;p<=102444;p++)b[p]=0;for(p=102445;p<=102447;p++)b[p]=2;for(p=102448;p<=102458;p++)b[p]=0;for(p=102459;p<=102468;p++)b[p]=2;for(p=102469;p<=102499;p++)b[p]=0;for(p=102500;p<=102519;p++)b[p]=1;for(p=102520;p<=102524;p++)b[p]=0;for(p=102525;p<=102529;p++)b[p]=2;for(p=102530;p<=102588;p++)b[p]=0;for(p=102590;p<=102598;p++)b[p]=0;for(p=102601;p<=102603;p++)b[p]=0;for(p=102605;p<=102628;p++)b[p]=0;for(p=102629;p<=102646;p++)b[p]=2;for(p=102648;p<=102700;p++)b[p]=2;for(p=102701;p<=102703;p++)b[p]=0;for(p=102707;p<=102730;p++)b[p]=2;for(p=102733;p<=102758;p++)b[p]=2;for(p=102767;p<=102900;p++)b[p]=0;for(p=102901;p<=102933;p++)b[p]=2;for(p=102934;p<=102950;p++)b[p]=13;for(p=102951;p<=102955;p++)b[p]=0;for(p=102961;p<=102963;p++)b[p]=0;for(p=102965;p<=102969;p++)b[p]=0;for(p=102971;p<=102973;p++)b[p]=0;for(p=102975;p<=102989;p++)b[p]=0;for(p=102990;p<=102992;p++)b[p]=1;for(p=102997;p<=103002;p++)b[p]=0;for(p=103003;p<=103008;p++)b[p]=2;for(p=103009;p<=103011;p++)b[p]=0;for(p=103012;p<=103014;p++)b[p]=2;for(p=103019;p<=103021;p++)b[p]=0;for(p=103022;p<=103024;p++)b[p]=2;for(p=103029;p<=103031;p++)b[p]=0;for(p=103032;p<=103034;p++)b[p]=2;for(p=103065;p<=103068;p++)b[p]=0;for(p=103074;p<=103076;p++)b[p]=0;for(p=103077;p<=103079;p++)b[p]=1;for(p=103080;p<=103082;p++)b[p]=0;for(p=103083;p<=103085;p++)b[p]=2;for(p=103090;p<=103093;p++)b[p]=0;for(p=103097;p<=103099;p++)b[p]=0;for(p=103100;p<=103102;p++)b[p]=2;for(p=103107;p<=103109;p++)b[p]=0;for(p=103110;p<=103112;p++)b[p]=2;for(p=103113;p<=103116;p++)b[p]=0;for(p=103117;p<=103120;p++)b[p]=2;for(p=103153;p<=103157;p++)b[p]=0;for(p=103158;p<=103162;p++)b[p]=2;for(p=103163;p<=103165;p++)b[p]=0;for(p=103166;p<=103168;p++)b[p]=1;for(p=103169;p<=103171;p++)b[p]=2;for(p=103186;p<=103188;p++)b[p]=0;for(p=103189;p<=103191;p++)b[p]=2;for(p=103192;p<=103195;p++)b[p]=0;for(p=103196;p<=103199;p++)b[p]=2;for(p=103200;p<=103224;p++)b[p]=0;for(p=103225;p<=103227;p++)b[p]=1;for(p=103232;p<=103237;p++)b[p]=0;for(p=103238;p<=103243;p++)b[p]=2;for(p=103244;p<=103246;p++)b[p]=0;for(p=103247;p<=103249;p++)b[p]=2;for(p=103254;p<=103256;p++)b[p]=0;for(p=103257;p<=103259;p++)b[p]=2;for(p=103264;p<=103266;p++)b[p]=0;for(p=103267;p<=103269;p++)b[p]=2;for(p=103300;p<=103375;p++)b[p]=0;for(p=103381;p<=103383;p++)b[p]=0;for(p=103384;p<=103386;p++)b[p]=1;for(p=103387;p<=103389;p++)b[p]=0;for(p=103390;p<=103392;p++)b[p]=2;for(p=103397;p<=103399;p++)b[p]=0;for(p=103400;p<=103471;p++)b[p]=2;for(p=103476;p<=103478;p++)b[p]=0;for(p=103479;p<=103481;p++)b[p]=2;for(p=103486;p<=103488;p++)b[p]=0;for(p=103489;p<=103491;p++)b[p]=2;for(p=103492;p<=103495;p++)b[p]=0;for(p=103496;p<=103499;p++)b[p]=2;for(p=103528;p<=103543;p++)b[p]=0;for(p=103544;p<=103548;p++)b[p]=2;for(p=103549;p<=103551;p++)b[p]=0;for(p=103552;p<=103554;p++)b[p]=1;for(p=103555;p<=103557;p++)b[p]=2;for(p=103558;p<=103560;p++)b[p]=0;for(p=103571;p<=103573;p++)b[p]=0;for(p=103574;p<=103576;p++)b[p]=2;for(p=103577;p<=103580;p++)b[p]=0;for(p=103581;p<=103583;p++)b[p]=2;for(p=103595;p<=103694;p++)b[p]=0;for(p=103696;p<=103699;p++)b[p]=0;for(p=103700;p<=103793;p++)b[p]=2;for(p=103794;p<=103887;p++)b[p]=0;for(p=103900;p<=103971;p++)b[p]=2;const MH={102113:!0,102100:!0,3857:!0,3785:!0},NH={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},oI='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',Mm=[-20037508342788905e-9,20037508342788905e-9],Nm=[-20037508342787e-6,20037508342787e-6],V5={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Mm,origin:Nm,dx:1e-5},102100:{wkTemplate:oI,valid:Mm,origin:Nm,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Mm,origin:Nm,dx:1e-5},3857:{wkTemplate:oI,valid:Mm,origin:Nm,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Qi(e,t){return!O(e)&&!O(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||mc(e)&&mc(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function so(e){return Ri(e)&&e.wkid&&V5[e.wkid]||null}function j5(e){return!!Ri(e)&&(e.wkid?b[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function RH(e){return!(Ov(e)||kv(e))}function dy(e){return Ri(e)&&e.wkid===4326}function Pge(e){return Ri(e)&&e.wkid===yc.CGCS2000}function mc(e){return Ri(e)&&e.wkid!=null&&MH[e.wkid]===!0}function PH(e){return Ri(e)&&e.wkid===32662}function IA(e){return e===yc.GCSMARS2000||e===yc.GCSMARS2000_SPHERE}function Ov(e){return Ri(e)&&e.wkid!=null&&IA(e.wkid)}function MA(e){return e===yc.GCSMOON2000}function kv(e){return Ri(e)&&e.wkid!=null&&MA(e.wkid)}function $H(e){return Ri(e)&&e.wkid!=null&&NH[e.wkid]===!0}function Ri(e){return T(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const DH={wkid:4326,wkt:qo(V5[4326].wkTemplate,{Central_Meridian:"0.0"})},LH={wkid:102100,latestWkid:3857},OH={wkid:32662};var vo;let Ke=vo=class extends V{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return vo.WebMercator;if(e.wkid===4326)return vo.WGS84}const t=new vo;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return dy(this)}get isWebMercator(){return mc(this)}get isGeographic(){return j5(this)}get isWrappable(){return $H(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===vo.WGS84)return vo.WGS84;if(this===vo.WebMercator)return vo.WebMercator;const e=new vo;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=P(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||r?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===t&&n.referenceServiceName===i:n.id===t}return Qi(this,e)}toJSON(e){return this.write(void 0,e)}};Ke.GCS_NAD_1927=null,Ke.WGS84=null,Ke.WebMercator=null,Ke.PlateCarree=null,l([c({readOnly:!0})],Ke.prototype,"isWGS84",null),l([c({readOnly:!0})],Ke.prototype,"isWebMercator",null),l([c({readOnly:!0})],Ke.prototype,"isGeographic",null),l([c({readOnly:!0})],Ke.prototype,"isWrappable",null),l([c({type:Qe,json:{write:!0}})],Ke.prototype,"latestWkid",void 0),l([c({type:Qe,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Ke.prototype,"wkid",void 0),l([c({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Ke.prototype,"wkt",void 0),l([X("wkt"),X("web-scene","wkt")],Ke.prototype,"writeWkt",null),l([c({type:Qe,json:{write:!0}})],Ke.prototype,"vcsWkid",void 0),l([c({type:Qe,json:{write:!0}})],Ke.prototype,"latestVcsWkid",void 0),l([c()],Ke.prototype,"imageCoordinateSystem",void 0),Ke=vo=l([S("esri.geometry.SpatialReference")],Ke),Ke.prototype.toJSON.isDefaultToJSON=!0,Ke.GCS_NAD_1927=new Ke({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Ke.WGS84=new Ke(DH),Ke.WebMercator=new Ke(LH),Ke.PlateCarree=new Ke(OH),Object.freeze&&(Object.freeze(Ke.GCS_NAD_1927),Object.freeze(Ke.WGS84),Object.freeze(Ke.WebMercator));const me=Ke,z5="20220708",H5="7fd01dbc0e83d753fcf101c8ff2a8d215430252d",G5="4.24",kH={async request(e,t){var a;const{default:i}=await U(()=>Promise.resolve().then(()=>eG),void 0,import.meta.url),r=e.options,n=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=n==="native"||n==="native-request-init"?"native-request-init":["blob","json","text"].includes(n)&&((a=L5(e.url))==null?void 0:a.after)?n:"array-buffer";const o=await i(e.url,r),s={data:o.data,ssl:o.ssl};switch(o.requestOptions.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let vt;function $ge(e){vt=e}function Dge(e){const t=vt&&vt.findCredential(e);return t&&t.token?U5(e,"token",t.token):e}k("host-webworker")||(k("edge")||k("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const FH=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function W5(e){const t=dn(e,!0);return t&&t.endsWith(".arcgis.com")&&!FH.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function BH(e,t,i=!1,r){return new Promise((n,o)=>{if(hn(r))return void o(sI());let s=()=>{d(),o(new Error(`Unable to load ${t}`))},a=()=>{const h=e;d(),n(h)},u=()=>{if(!e)return;const h=e;d(),h.src="",o(sI())};const d=()=>{k("esri-image-decode")||(e.removeEventListener("error",s),e.removeEventListener("load",a)),s=null,a=null,e=null,T(r)&&r.removeEventListener("abort",u),u=null,i&&URL.revokeObjectURL(t)};T(r)&&r.addEventListener("abort",u),k("esri-image-decode")?e.decode().then(a,s):(e.addEventListener("error",s),e.addEventListener("load",a))})}function sI(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function UH(e){Ne.request.crossOriginNoCorsDomains||(Ne.request.crossOriginNoCorsDomains={});const t=Ne.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[dn(i)]=0:(t[dn("http://"+i)]=0,t[dn("https://"+i)]=0)}function VH(e){const t=Ne.request.crossOriginNoCorsDomains;if(t){let i=dn(e);if(i)return i=i.toLowerCase(),!cy(i,SA())&&t[i]<Date.now()-36e5}return!1}async function jH(e){var r;const t=Ne.request.crossOriginNoCorsDomains;t&&(t[dn(e).toLowerCase()]=Date.now());const i=rt(e);e=i.path,((r=i.query)==null?void 0:r.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Be(e,t){var d;const i=Nc(e),r=Dv(e);r||i||(e=Lr(e));const n={url:e,requestOptions:{...t}};let o=L5(e);if(o){const h=await ZH(o,n);if(h!=null)return{data:h,getHeader:NA,requestOptions:n.requestOptions,url:n.url};o.after||o.error||(o=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"){if(k("host-webworker")||k("host-node"))throw io("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(i)throw io("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),n);if(t.method==="head"){if(t.body)throw io("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw io("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await qH(),y1)return y1.execute(e,t);const s=new AbortController;fn(t,()=>s.abort());const a={controller:s,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:o,params:n,redoRequest:!1,useIdentity:Yn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},u=await XH(a);return(d=o==null?void 0:o.after)==null||d.call(o,u),u}let y1;const Yn=Ne.request,q5="FormData"in globalThis,zH=[499,498,403,401],HH=["COM_0056","COM_0057","SB_0008"],GH=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],NA=()=>null,Y_=Symbol();function WH(e){const t=dn(e);t&&!Be._corsServers.includes(t)&&Be._corsServers.push(t)}function aI(e){const t=dn(e);return!t||t.endsWith(".arcgis.com")||Be._corsServers.includes(t)||EA(t)}function io(e,t,i,r){let n="Error";const o={url:i.url,requestOptions:i.requestOptions,getHeader:NA,ssl:!1};if(t instanceof N)return t.details?(t.details=P(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=o,t;if(t){const s=r&&(d=>r.headers.get(d)),a=r&&r.status,u=t.message;u&&(n=u),s&&(o.getHeader=s),o.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,o.subCode=t.subcode,o.messageCode=t.messageCode,typeof t.details=="string"?o.messages=[t.details]:o.messages=t.details,o.raw=Y_ in t?t[Y_]:t}return Ki(t)?bt():new N(e,n,o)}async function qH(){k("host-webworker")?y1||(y1=await U(()=>import("./request.a2cd064a.js"),[],import.meta.url)):Be._abortableFetch||(Be._abortableFetch=globalThis.fetch.bind(globalThis))}async function K_(){vt||await U(()=>import("./IdentityManager.39758a50.js"),[],import.meta.url)}async function YH(e){var a;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,n=i.body;let o=null,s=null;if(q5&&"HTMLFormElement"in globalThis&&(n instanceof FormData?o=n:n instanceof HTMLFormElement&&(o=new FormData(n))),typeof n=="string"&&(s=n),e.fetchOptions={cache:i.cacheBust&&!Be._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Yn.priority,redirect:"follow",signal:r},(o||s)&&(e.fetchOptions.body=o||s),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((a=i.query)==null?void 0:a.token)||(o==null?void 0:o.get("token"))),!e.hasToken&&Ne.apiKey&&W5(t)&&(i.query||(i.query={}),i.query.token=Ne.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!Y5(t)&&!hn(r)){let u;i.authMode==="immediate"?(await K_(),u=await vt.getCredential(t,{signal:r}),e.credential=u):i.authMode==="no-prompt"?(await K_(),u=await vt.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=u):vt&&(u=vt.findCredential(t)),u&&(e.credentialToken=u.token,e.useSSL=!!u.ssl)}}function Y5(e){return GH.some(t=>t.test(e))}async function KH(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions,n=Dv(t)||Nc(t),o=i.responseType||"json",s=n?0:i.timeout!=null?i.timeout:Yn.timeout;let a=!1;if(!n){e.useSSL&&(t=CA(t)),i.cacheBust&&r.cache==="default"&&(t=U5(t,"request.preventCache",Date.now()));let y={...i.query};e.credentialToken&&(y.token=e.credentialToken);let m=fc(y);k("esri-url-encodes-apostrophe")&&(m=m.replace(/'/g,"%27"));const g=t.length+1+m.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||g>Yn.maxUrlLength;const w=i.useProxy||!!$v(t);if(w){const _=pH(t);v=_.path,!a&&v.length+1+g>Yn.maxUrlLength&&(a=!0),_.query&&(y={..._.query,...y})}if(r.method==="HEAD"&&(a||w)){if(a)throw g>Yn.maxUrlLength?io("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):io("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw io("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=Gs(t,y):(r.body=fc(y),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Gs(t,y),w&&(e.useProxy=!0,t=`${v}?${t}`),y.token&&q5&&r.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)&&r.body.set("token",y.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!cy(t,SA())){if(EA(t))e.withCredentials=!0;else if(vt){const _=vt.findServerInfo(t);_&&_.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",VH(t)&&await jH(a?Gs(t,y):t))}let u,d,h=0,f=!1;s>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},s));try{if(i.responseType==="native-request-init")d=r,d.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||JH(i.headers)||!n&&!e.useProxy&&Yn.proxyUrl&&!aI(t)){if(u=await Be._abortableFetch(t,r),e.useProxy||WH(t),i.responseType==="native")d=u;else if(r.method!=="HEAD")if(u.ok){switch(o){case"array-buffer":d=await u.arrayBuffer();break;case"blob":case"image":d=await u.blob();break;default:d=await u.text()}if(h&&(clearTimeout(h),h=0),o==="json"||o==="xml"||o==="document")if(d)switch(o){case"json":d=JSON.parse(d);break;case"xml":d=lI(d,"application/xml");break;case"document":d=lI(d,"text/html")}else d=null;if(d){if(o==="array-buffer"||o==="blob"){const y=u.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(y)&&d[o==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(d).json();m.error&&(d=m)}catch{}}o==="image"&&d instanceof Blob&&(d=await uI(URL.createObjectURL(d),e,!0))}}else d=await u.text()}else d=await uI(t,e)}catch(y){if(y.name==="AbortError")throw f?new Error("Timeout exceeded"):bt("Request canceled");if(!(!u&&y instanceof TypeError&&Yn.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||aI(t))throw y;e.redoRequest=!0,hH({proxyUrl:Yn.proxyUrl,urlPrefix:dn(t)})}finally{h&&clearTimeout(h)}return[u,d]}async function ZH(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(n){i=io("request:interceptor",n,t)}if((r instanceof Error||r instanceof N)&&(i=io("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function JH(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function lI(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function XH(e){var o;let t,i;await YH(e);try{do[t,i]=await KH(e);while(!await QH(e,t,i))}catch(s){const a=io("request:server",s,e.params,t);throw a.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(a),a}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((o=i.user)==null?void 0:o.username)&&!EA(r)){const s=dn(r,!0);s&&Yn.trustedServers.push(s)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&UH(i.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&vt){const s=vt.findServerInfo(n.server);let a=s&&s.owningSystemUrl;if(a){a=a.replace(/\/?$/,"/sharing");const u=vt.findCredential(a,n.userId);u&&vt._getIdenticalSvcIdx(a,u)===-1&&u.resources.unshift(a)}}return{data:i,getHeader:t?s=>t.headers.get(s):NA,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function QH(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,o,s,a;if(!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[Y_]=i,n;i!=null&&i.error&&(n=i.error),n&&(o=Number(n.code),s=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a&&a.toUpperCase());const u=r.authMode;if(o===403&&(s===4||n.message&&n.message.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(u!=="no-prompt"||o===498)&&zH.includes(o)&&!Y5(e.params.url)&&(o!==403||!HH.includes(a)&&(s==null||s===2&&e.credentialToken))){await K_();try{const d=await vt.getCredential(e.params.url,{error:io("request:server",n,e.params),prompt:u!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=d,e.credentialToken=d.token,e.useSSL=e.useSSL||d.ssl,!1}catch(d){if(u==="no-prompt")return e.credential=null,e.credentialToken=null,!1;n=d}}if(n)throw n;return!0}function uI(e,t,i=!1){const r=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Yn.priority,n.src=e,BH(n,e,i,r)}Be._abortableFetch=null,Be._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const eG=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"}));function K(e,t,i){let r,n;return t===void 0||Array.isArray(t)?(n=e,i=t,r=[void 0]):(n=t,r=Array.isArray(e)?e:[e]),(o,s)=>{const a=o.constructor.prototype;r.forEach(u=>{const d=u5(o,u,n);d.read&&typeof d.read=="object"||(d.read={}),d.read.reader=a[s],i&&(d.read.source=(d.read.source||[]).concat(i))})}}let wo=class extends V{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=me.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof me)return e;if(e!=null){const i=new me;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};l([c()],wo.prototype,"type",void 0),l([c({readOnly:!0})],wo.prototype,"cache",null),l([c({readOnly:!0})],wo.prototype,"extent",null),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wo.prototype,"hasM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wo.prototype,"hasZ",void 0),l([c({type:me,json:{write:!0}})],wo.prototype,"spatialReference",void 0),l([K("spatialReference")],wo.prototype,"readSpatialReference",null),wo=l([S("esri.geometry.Geometry")],wo);const fr=wo,tG=Object.prototype.toString;function iG(e){const t="__accessorMetadata__"in e?Ze(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return rG.apply(this,i)}}function rG(e,t,i,r){Sv(e,t).cast=r}function nG(e){return(t,i)=>{Sv(t,e).cast=t[i]}}function Fe(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&tG.call(e[0])==="[object Function]"?iG(e[0]):e.length===1&&typeof e[0]=="string"?nG(e[0]):void 0}function oG(e,t,i,r){var n;return e.x=e.x+t,e.y=e.y+i,r!=null&&(e.z=((n=e.z)!=null?n:0)+r),e}function sG(e,t){const i=e.x-t.x,r=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+n*n)}class RA{constructor(t,i,r,n){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const nt=new RA(6378137,1/298.257223563,3e5,.006694379990137799),Ws=new RA(3396190,1/169.8944472236118,23e4),Ml=new RA(1737400,0,0),aG=57.29577951308232,lG=.017453292519943;function cI(e){return e*aG}function dI(e){return e*lG}function Lge(e){return Math.PI/2-2*Math.atan(Math.exp(-e/nt.radius))}function Z_(e){return e.wkid!=null||e.wkt!=null}const Gw=[0,0];function m1(e,t,i,r,n){const o=e,s=n;if(s.spatialReference=i,"x"in o&&"x"in s)[s.x,s.y]=t(o.x,o.y,Gw,r);else if("xmin"in o&&"xmin"in s)[s.xmin,s.ymin]=t(o.xmin,o.ymin,Gw,r),[s.xmax,s.ymax]=t(o.xmax,o.ymax,Gw,r);else if("paths"in o&&"paths"in s||"rings"in o&&"rings"in s){const a="paths"in o?o.paths:o.rings,u=[];let d;for(let h=0;h<a.length;h++){const f=a[h];d=[],u.push(d);for(let y=0;y<f.length;y++)d.push(t(f[y][0],f[y][1],[0,0],r)),f[y].length>2&&d[y].push(f[y][2]),f[y].length>3&&d[y].push(f[y][3])}"paths"in s?s.paths=u:s.rings=u}else if("points"in o&&"points"in s){const a=o.points,u=[];for(let d=0;d<a.length;d++)u[d]=t(a[d][0],a[d][1],[0,0],r),a[d].length>2&&u[d].push(a[d][2]),a[d].length>3&&u[d].push(a[d][3]);s.points=u}return n}function U0(e,t){const i=e&&(Z_(e)?e:e.spatialReference),r=t&&(Z_(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!Qi(r,i)||mc(r)&&dy(i)||mc(i)&&dy(r))}function Fv(e,t){if(O(e))return null;const i=e.spatialReference,r=t&&(Z_(t)?t:t.spatialReference);return U0(i,r)?Qi(i,r)?P(e):mc(r)?m1(e,Dd,me.WebMercator,!1,P(e)):dy(r)?m1(e,Lf,me.WGS84,!1,P(e)):null:null}function Dd(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=dI(t);return i[0]=dI(e)*nt.radius,i[1]=nt.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Lf(e,t,i=[0,0],r=!1){const n=cI(e/nt.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=cI(Math.PI/2-2*Math.atan(Math.exp(-t/nt.radius))),i}function qs(e,t=!1,i=P(e)){return m1(e,Dd,me.WebMercator,t,i)}function kh(e,t=!1,i=P(e)){return m1(e,Lf,me.WGS84,t,i)}var V0;const uh=[0,0];function pI(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const Rm=W.getLogger("esri.geometry.Point");let Di=V0=class extends fr{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,r,n){let o;if(Array.isArray(e))o=e,n=t,e=o[0],t=o[1],i=o[2],r=o[3];else if(e&&typeof e=="object"){if(o=e,e=o.x!=null?o.x:o.longitude,t=o.y!=null?o.y:o.latitude,i=o.z,r=o.m,(n=o.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new me(n)),o.longitude!=null||o.latitude!=null){if(o.longitude==null)Rm.warn(".longitude=","Latitude was defined without longitude");else if(o.latitude==null)Rm.warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&n&&n.isWebMercator){const a=Dd(o.longitude,o.latitude,uh);e=a[0],t=a[1]}}}else pI(i)?(n=i,i=null):pI(r)&&(n=r,r=null);const s={x:e,y:t};return s.x==null&&s.y!=null?Rm.warn(".y=","Y coordinate was defined without an X coordinate"):s.y==null&&s.x!=null&&Rm.warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(s.spatialReference=n),i!=null&&(s.z=i),r!=null&&(s.m=r),s}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return Lf(t,i,uh)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;t&&(t.isWebMercator?this._set("y",Dd(i,e,uh)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return Lf(e,t,uh)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;i&&(i.isWebMercator?this._set("x",Dd(e,t,uh)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new V0;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return V0.copy(e,this),this}equals(e){if(O(e))return!1;const{x:t,y:i,z:r,m:n,spatialReference:o}=this,{z:s,m:a}=e;let{x:u,y:d,spatialReference:h}=e;if(!o.equals(h))if(o.isWebMercator&&h.isWGS84)[u,d]=Dd(u,d),h=o;else{if(!o.isWGS84||!h.isWebMercator)return!1;[u,d]=Lf(u,d),h=o}return t===u&&i===d&&r===s&&n===a&&o.wkid===h.wkid}offset(e,t,i){return oG(this,e,t,i)}normalize(){if(!this.spatialReference)return this;const e=so(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,n=2*r;let o;return t>r?(o=Math.ceil(Math.abs(t-r)/n),t-=o*n):t<i&&(o=Math.ceil(Math.abs(t-i)/n),t+=o*n),this._set("x",t),this}distance(e){return sG(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};l([c({readOnly:!0})],Di.prototype,"cache",null),l([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Di.prototype,"hasM",null),l([c({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Di.prototype,"hasZ",null),l([c({type:Number})],Di.prototype,"latitude",null),l([c({type:Number})],Di.prototype,"longitude",null),l([c({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Fe(e=>isNaN(e)?e:sn(e))],Di.prototype,"x",void 0),l([X("x")],Di.prototype,"writeX",null),l([K("x")],Di.prototype,"readX",null),l([c({type:Number,json:{write:!0}})],Di.prototype,"y",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Di.prototype,"z",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Di.prototype,"m",void 0),Di=V0=l([S("esri.geometry.Point")],Di),Di.prototype.toJSON.isDefaultToJSON=!0;const le=Di,Ww=[0,0];function Bv(e,t){return!!T(t)&&Bi(e,t.x,t.y,t.z)}function Oge(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!cp(e,i))return!1;return!0}function uG(e,t){const{xmin:i,ymin:r,zmin:n,xmax:o,ymax:s,zmax:a}=t;return e.hasZ&&t.hasZ?Bi(e,i,r,n)&&Bi(e,i,s,n)&&Bi(e,o,s,n)&&Bi(e,o,r,n)&&Bi(e,i,r,a)&&Bi(e,i,s,a)&&Bi(e,o,s,a)&&Bi(e,o,r,a):Bi(e,i,r)&&Bi(e,i,s)&&Bi(e,o,s)&&Bi(e,o,r)}function cp(e,t){return Bi(e,t[0],t[1])}function cG(e,t){return Bi(e,t[0],t[1],t[2])}function Bi(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function K5(e,t){return Ww[1]=t.y,Ww[0]=t.x,dG(e,Ww)}function dG(e,t){return Z5(e.rings,t)}function Z5(e,t){if(!e)return!1;if(pG(e))return hI(!1,e,t);let i=!1;for(let r=0,n=e.length;r<n;r++)i=hI(i,e[r],t);return i}function pG(e){return!Array.isArray(e[0][0])}function hI(e,t,i){const[r,n]=i;let o=e,s=0;for(let a=0,u=t.length;a<u;a++){s++,s===u&&(s=0);const[d,h]=t[a],[f,y]=t[s];(h<n&&y>=n||y<n&&h>=n)&&d+(n-h)/(y-h)*(f-d)<r&&(o=!o)}return o}function hG(e,t){return Bv(e,t)}function fG(e,t){const i=e.hasZ&&t.hasZ;let r,n,o;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(o=t.zmin,e.zmax<o)return!1}else if(o=e.zmin,t.zmax<o)return!1}return!0}function yG(e,t){const{points:i,hasZ:r}=t,n=r?cG:cp;for(const o of i)if(n(e,o))return!0;return!1}const gc=[0,0],vc=[0,0],wc=[0,0],bc=[0,0],mG=[gc,vc,wc,bc],J5=[[wc,gc],[gc,vc],[vc,bc],[bc,wc]];function gG(e,t){return vG(e,t.rings)}function vG(e,t){gc[0]=e.xmin,gc[1]=e.ymax,vc[0]=e.xmax,vc[1]=e.ymax,wc[0]=e.xmin,wc[1]=e.ymin,bc[0]=e.xmax,bc[1]=e.ymin;for(const i of mG)if(Z5(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(cp(e,r))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(cp(e,o)||X5(r,o,J5))return!0;r=o}}return!1}function wG(e,t){gc[0]=e.xmin,gc[1]=e.ymax,vc[0]=e.xmax,vc[1]=e.ymax,wc[0]=e.xmin,wc[1]=e.ymin,bc[0]=e.xmax,bc[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(cp(e,n))return!0;for(let o=1;o<r.length;o++){const s=r[o];if(cp(e,s)||X5(n,s,J5))return!0;n=s}}return!1}const Xt=[0,0];function bG(e){for(let t=0;t<e.length;t++){const i=e[t];for(let n=0;n<i.length-1;n++){const o=i[n],s=i[n+1];for(let a=t+1;a<e.length;a++)for(let u=0;u<e[a].length-1;u++){const d=e[a][u],h=e[a][u+1];if(J_(o,s,d,h,Xt)&&!(Xt[0]===o[0]&&Xt[1]===o[1]||Xt[0]===d[0]&&Xt[1]===d[1]||Xt[0]===s[0]&&Xt[1]===s[1]||Xt[0]===h[0]&&Xt[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let o=r-1;n===0&&(o=r-2);const s=i[n],a=i[n+1];for(let u=n+2;u<o;u++){const d=i[u],h=i[u+1];if(J_(s,a,d,h,Xt)&&!(Xt[0]===s[0]&&Xt[1]===s[1]||Xt[0]===d[0]&&Xt[1]===d[1]||Xt[0]===a[0]&&Xt[1]===a[1]||Xt[0]===h[0]&&Xt[1]===h[1]))return!0}}}return!1}function X5(e,t,i){for(let r=0;r<i.length;r++)if(J_(e,t,i[r][0],i[r][1]))return!0;return!1}function J_(e,t,i,r,n){const[o,s]=e,[a,u]=t,[d,h]=i,[f,y]=r,m=f-d,g=o-d,v=a-o,w=y-h,_=s-h,A=u-s,I=w*v-m*A;if(I===0)return!1;const D=(m*_-w*g)/I,M=(v*_-A*g)/I;return D>=0&&D<=1&&M>=0&&M<=1&&(n&&(n[0]=o+D*(a-o),n[1]=s+D*(u-s)),!0)}function _G(e){switch(e){case"esriGeometryEnvelope":case"extent":return fG;case"esriGeometryMultipoint":case"multipoint":return yG;case"esriGeometryPoint":case"point":return hG;case"esriGeometryPolygon":case"polygon":return gG;case"esriGeometryPolyline":case"polyline":return wG}}var qr;function SG(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function da(e,t,i){return t==null?i:i==null?t:e(t,i)}let jt=qr=class extends fr{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,n){return SG(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?me.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:n==null?me.WGS84:n}}static fromBounds(e,t){return new qr({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new qr({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new le({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new qr;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&U0(t,i)&&(e=t.isWebMercator?qs(e):kh(e,!0)),e.type==="point"?Bv(this,e):e.type==="extent"&&uG(this,e)}equals(e){if(this===e)return!0;if(O(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&U0(t,i)&&(e=t.isWebMercator?qs(e):kh(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(O(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&U0(t,i)&&(e=t.isWebMercator?qs(e):kh(e,!0)),_G(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=da(Math.min,this.zmin,e.zmin),this.zmax=da(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=da(Math.min,this.mmin,e.mmin),this.mmax=da(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:O(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=da(Math.max,this.zmin,e.zmin),this.zmax=da(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=da(Math.max,this.mmin,e.mmin),this.mmax=da(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=so(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?kh(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new me(qo(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,n=this.xmin,o=this.xmax;return n>=i&&n<=r&&o>=i&&o<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;if(!(i=i||so(r)))return this;const n=this._getParts(i).map(a=>a.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return n;let o=!0,s=!0;return n.forEach(a=>{a.hasZ||(o=!1),a.hasM||(s=!1)}),{rings:n.map(a=>{const u=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(o){const d=(a.zmax-a.zmin)/2;for(let h=0;h<u.length;h++)u[h].push(d)}if(s){const d=(a.mmax-a.mmin)/2;for(let h=0;h<u.length;h++)u[h].push(d)}return u}),hasZ:o,hasM:s,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:o,spatialReference:s}=this,a=this.width,u=this.xmin,d=this.xmax;let h;e=e||so(s);const[f,y]=e.valid;h=this._normalizeX(this.xmin,e);const m=h.x,g=h.frameId;h=this._normalizeX(this.xmax,e);const v=h.x,w=h.frameId,_=m===v&&a>0;if(a>2*y){const A=new qr(u<d?m:v,n,y,o,s),I=new qr(f,n,u<d?v:m,o,s),D=new qr(0,n,y,o,s),M=new qr(f,n,0,o,s),R=[],B=[];A.contains(D)&&R.push(g),A.contains(M)&&B.push(g),I.contains(D)&&R.push(w),I.contains(M)&&B.push(w);for(let j=g+1;j<w;j++)R.push(j),B.push(j);t.push({extent:A,frameIds:[g]},{extent:I,frameIds:[w]},{extent:D,frameIds:R},{extent:M,frameIds:B})}else m>v||_?t.push({extent:new qr(m,n,y,o,s),frameIds:[g]},{extent:new qr(f,n,v,o,s),frameIds:[w]}):t.push({extent:new qr(m,n,v,o,s),frameIds:[g]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let o=0;o<t.length;o++)t[o].extent.set(n)}return t}_normalizeX(e,t){const[i,r]=t.valid,n=2*r;let o,s=0;return e>r?(o=Math.ceil(Math.abs(e-r)/n),e-=o*n,s=o):e<i&&(o=Math.ceil(Math.abs(e-i)/n),e+=o*n,s=-o),{x:e,frameId:s}}};l([c({readOnly:!0})],jt.prototype,"cache",null),l([c({readOnly:!0})],jt.prototype,"center",null),l([c({readOnly:!0})],jt.prototype,"extent",null),l([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],jt.prototype,"hasM",null),l([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],jt.prototype,"hasZ",null),l([c({readOnly:!0})],jt.prototype,"height",null),l([c({readOnly:!0})],jt.prototype,"width",null),l([c({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],jt.prototype,"xmin",void 0),l([c({type:Number,json:{write:!0}})],jt.prototype,"ymin",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],jt.prototype,"mmin",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],jt.prototype,"zmin",void 0),l([c({type:Number,json:{write:!0}})],jt.prototype,"xmax",void 0),l([c({type:Number,json:{write:!0}})],jt.prototype,"ymax",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],jt.prototype,"mmax",void 0),l([c({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],jt.prototype,"zmax",void 0),jt=qr=l([S("esri.geometry.Extent")],jt),jt.prototype.toJSON.isDefaultToJSON=!0;const Oe=jt;let Of;var f4,y4,m4;const qw=(m4=(f4=globalThis.esriConfig)==null?void 0:f4.locale)!=null?m4:(y4=globalThis.dojoConfig)==null?void 0:y4.locale;function Q5(){var e,t;return(t=qw!=null?qw:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function Or(){return Of===void 0&&(Of=Q5()),Of}const kf=[];function eL(e){return kf.push(e),{remove(){kf.splice(kf.indexOf(e),1)}}}const X_=[];function PA(e){return X_.push(e),{remove(){kf.splice(X_.indexOf(e),1)}}}function TG(){const e=Q5();Of!==e&&(Of=e,[...X_].forEach(t=>{t.call(null,e)}),[...kf].forEach(t=>{t.call(null,e)}))}var g4;(g4=globalThis.addEventListener)==null||g4.call(globalThis,"languagechange",TG);class Se{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=i,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,o)=>{const s=this.toJSON(r);s!==void 0&&hr(o,s,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const i=this.apiToJSON[t];return this.options.useNumericKeys?+i:i}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}}function mi(){return function(e,t){return new Se(e,{ignoreUnknown:!0,...t})}}var Q_;const EG=new Se({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Yr=Q_=class extends se{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new Q_({categories:this.categories?P(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,r;if(this.categories&&(i=this.categories.map(s=>Array.isArray(s)?JSON.stringify(s):s)),this.extent){const s=Fv(this.extent,me.WGS84);T(s)&&(r=`${s.xmin},${s.ymin},${s.xmax},${s.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const o={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map(s=>EG.toJSON(s.trim())).join(","),o.sortOrder=this.sortOrder),{query:{...t,...o}}}};l([c()],Yr.prototype,"categories",void 0),l([c()],Yr.prototype,"disableExtraQuery",void 0),l([c({type:Oe})],Yr.prototype,"extent",void 0),l([c()],Yr.prototype,"filter",void 0),l([c()],Yr.prototype,"num",void 0),l([c()],Yr.prototype,"query",void 0),l([c()],Yr.prototype,"sortField",void 0),l([c()],Yr.prototype,"sortOrder",null),l([c()],Yr.prototype,"start",void 0),Yr=Q_=l([S("esri.portal.PortalQueryParams")],Yr);const Bs=Yr;let Jl=class extends se{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};l([c()],Jl.prototype,"nextQueryParams",void 0),l([c()],Jl.prototype,"queryParams",void 0),l([c()],Jl.prototype,"results",void 0),l([c()],Jl.prototype,"total",void 0),Jl=l([S("esri.portal.PortalQueryResult")],Jl);const AG=Jl;let ys=class extends V{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new N("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};l([c({type:Date})],ys.prototype,"created",void 0),l([c()],ys.prototype,"id",void 0),l([c()],ys.prototype,"portal",void 0),l([c()],ys.prototype,"title",void 0),l([c({readOnly:!0})],ys.prototype,"url",null),l([c()],ys.prototype,"username",void 0),ys=l([S("esri.portal.PortalFolder")],ys);const xG=ys;let zt=class extends V{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new N("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=Ze(Bs,e);return parseFloat(this.portal.currentVersion)>5?(i=i||new Bs,this.portal._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new Bs,i.query="group:"+this.id+(i.query?" "+i.query:""),this.portal.queryItems(i,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(i=>{const r=i.contentCategorySetsGroupQuery;if(r){const n=new Bs;return n.disableExtraQuery=!0,n.num=1,n.query=r,this.portal.queryGroups(n,t)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const r=i.results[0],n=new Bs;return n.num=1,n.query=`typekeywords:"${e}"`,r.queryItems(n,t)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(r=>{const n=r&&r.categorySchema;return n&&n.length?n:[]}):[])}};l([c()],zt.prototype,"access",void 0),l([c({type:Date})],zt.prototype,"created",void 0),l([c()],zt.prototype,"description",void 0),l([c()],zt.prototype,"id",void 0),l([c()],zt.prototype,"isInvitationOnly",void 0),l([c({type:Date})],zt.prototype,"modified",void 0),l([c()],zt.prototype,"owner",void 0),l([c()],zt.prototype,"portal",void 0),l([c()],zt.prototype,"snippet",void 0),l([c()],zt.prototype,"sortField",void 0),l([c()],zt.prototype,"sortOrder",void 0),l([c()],zt.prototype,"tags",void 0),l([c()],zt.prototype,"thumbnail",void 0),l([c({readOnly:!0})],zt.prototype,"thumbnailUrl",null),l([c()],zt.prototype,"title",void 0),l([c({readOnly:!0})],zt.prototype,"url",null),zt=l([S("esri.portal.PortalGroup")],zt);const e2=zt,CG=Object.freeze(Object.defineProperty({__proto__:null,default:e2},Symbol.toStringTag,{value:"Module"}));var t2;let tt=t2=class extends V{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let o=this.userContentUrl;return r&&(o+="/"+(typeof r=="string"?r:r.id)),this.portal._request(o+"/addItem",n).then(s=>(t.id=s.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal._request(t,r).then(()=>{e.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const n=xG.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=e2.fromJSON(i);return r.portal=this.portal,r}):[],t})}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),U(()=>Promise.resolve().then(()=>tL),void 0,import.meta.url).then(({default:r})=>{t=r;const n={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:n})}).then(r=>{let n;return r&&r.items?(n=r.items.map(o=>{const s=t.fromJSON(o);return s.portal=this.portal,s}),Promise.all(n.map(o=>o.load())).catch(o=>o).then(()=>({items:n,nextStart:r.nextStart,total:r.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new e2({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new N("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new N("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new t2;return t.sourceJSON=e,t.read(e),t}};l([c()],tt.prototype,"access",void 0),l([c({type:Date})],tt.prototype,"created",void 0),l([c()],tt.prototype,"culture",void 0),l([c()],tt.prototype,"description",void 0),l([c()],tt.prototype,"email",void 0),l([c()],tt.prototype,"favGroupId",void 0),l([c()],tt.prototype,"fullName",void 0),l([c({type:Date})],tt.prototype,"modified",void 0),l([c()],tt.prototype,"orgId",void 0),l([c()],tt.prototype,"portal",void 0),l([c()],tt.prototype,"preferredView",void 0),l([c()],tt.prototype,"privileges",void 0),l([c()],tt.prototype,"region",void 0),l([c()],tt.prototype,"role",void 0),l([c()],tt.prototype,"roleId",void 0),l([c()],tt.prototype,"sourceJSON",void 0),l([c()],tt.prototype,"thumbnail",void 0),l([c({readOnly:!0})],tt.prototype,"thumbnailUrl",null),l([c()],tt.prototype,"units",void 0),l([c({readOnly:!0})],tt.prototype,"userContentUrl",null),l([c({readOnly:!0})],tt.prototype,"url",null),l([c()],tt.prototype,"username",void 0),l([c()],tt.prototype,"userType",void 0),tt=t2=l([S("esri.portal.PortalUser")],tt);const $A=tt,IG=Object.freeze(Object.defineProperty({__proto__:null,default:$A},Symbol.toStringTag,{value:"Module"}));var Er;let Yw;const fI={PortalGroup:()=>U(()=>Promise.resolve().then(()=>CG),void 0,import.meta.url),PortalItem:()=>U(()=>Promise.resolve().then(()=>tL),void 0,import.meta.url),PortalUser:()=>U(()=>Promise.resolve().then(()=>IG),void 0,import.meta.url)};let Z=Er=class extends qy(Ko){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ne.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Ne.request.trustedServers.includes(t)||Ne.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=$A.fromJSON(e),t.portal=this),t}load(e){const t=U(()=>Promise.resolve().then(()=>GG),void 0,import.meta.url).then(({default:i})=>{_t(e),Yw=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(vt){const r=vt;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==Er.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await U(()=>import("./ElevationLayer.87e4ac68.js"),[],import.meta.url)).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new Bs;return i.query=e||(Ne.apiKey&&W5(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const n=r.results[0];return i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc",n.queryItems(i,t)}return null}).then(r=>{let n;return n=r&&r.total?r.results.filter(o=>o.type==="Web Map").map(o=>new Yw({portalItem:o})):[],n})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):hn(e)?Promise.reject(bt()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new Bs;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const n of t)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(n=>n.results)}return hn(e)?Promise.reject(bt()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Or();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Or();return this._request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return Er._default&&!Er._default.destroyed||(Er._default=new Er),Er._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new N("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Er({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new N("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new N("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Or().toLowerCase()},...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this._request(r,n)}_queryPortal(e,t,i,r){const n=Ze(Bs,t),o=s=>this._request(this.restUrl+e,{...n.toRequestOptions(this),...r}).then(a=>{const u=n.clone();return u.start=a.nextStart,new AG({nextQueryParams:u,queryParams:n,total:a.total,results:Er._resultsToTypedArray(s,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(u=>typeof u.when=="function"?u.when():a)).then(()=>a,u=>(bl(u),a)));return i&&fI[i]?fI[i]().then(({default:s})=>(_t(r),o(s))):o()}_signIn(){if(this.authMode===Er.AUTH_MODE_ANONYMOUS)return Promise.reject(new N("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return vt?vt.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(r=>{const n=Er._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(o=>typeof o.when=="function"?o.when():r)).then(()=>n,()=>n)})}_readBasemap(e){if(e){const t=Yw.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===Er.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:o=!1,method:s="auto",responseType:a="json",signal:u}=t,d={authMode:r,body:n,cacheBust:o,method:s,query:i,responseType:a,timeout:0,signal:u};return Be(this._normalizeSSL(e),d).then(h=>h.data)}static _resultsToTypedArray(e,t,i,r){let n;if(i){const o=T(r)?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(n=n.map(s=>{const a=Object.assign(e?e.fromJSON(s):s,t);return typeof a.load=="function"&&a.load(o),a}))}else n=[];return n}};Z.AUTH_MODE_ANONYMOUS="anonymous",Z.AUTH_MODE_AUTO="auto",Z.AUTH_MODE_IMMEDIATE="immediate",l([c()],Z.prototype,"access",void 0),l([c()],Z.prototype,"allSSL",void 0),l([c()],Z.prototype,"authMode",void 0),l([c()],Z.prototype,"authorizedCrossOriginDomains",void 0),l([K("authorizedCrossOriginDomains")],Z.prototype,"readAuthorizedCrossOriginDomains",null),l([c()],Z.prototype,"basemapGalleryGroupQuery",void 0),l([c()],Z.prototype,"bingKey",void 0),l([c()],Z.prototype,"canListApps",void 0),l([c()],Z.prototype,"canListData",void 0),l([c()],Z.prototype,"canListPreProvisionedItems",void 0),l([c()],Z.prototype,"canProvisionDirectPurchase",void 0),l([c()],Z.prototype,"canSearchPublic",void 0),l([c()],Z.prototype,"canShareBingPublic",void 0),l([c()],Z.prototype,"canSharePublic",void 0),l([c()],Z.prototype,"canSignInArcGIS",void 0),l([c()],Z.prototype,"canSignInIDP",void 0),l([c()],Z.prototype,"colorSetsGroupQuery",void 0),l([c()],Z.prototype,"commentsEnabled",void 0),l([c({type:Date})],Z.prototype,"created",void 0),l([c()],Z.prototype,"credential",void 0),l([c()],Z.prototype,"culture",void 0),l([c()],Z.prototype,"currentVersion",void 0),l([c()],Z.prototype,"customBaseUrl",void 0),l([c()],Z.prototype,"defaultBasemap",void 0),l([K("defaultBasemap")],Z.prototype,"readDefaultBasemap",null),l([c()],Z.prototype,"defaultDevBasemap",void 0),l([K("defaultDevBasemap")],Z.prototype,"readDefaultDevBasemap",null),l([c({type:Oe})],Z.prototype,"defaultExtent",void 0),l([c()],Z.prototype,"defaultVectorBasemap",void 0),l([K("defaultVectorBasemap")],Z.prototype,"readDefaultVectorBasemap",null),l([c()],Z.prototype,"description",void 0),l([c()],Z.prototype,"devBasemapGalleryGroupQuery",void 0),l([c()],Z.prototype,"eueiEnabled",void 0),l([c({readOnly:!0})],Z.prototype,"extraQuery",null),l([c()],Z.prototype,"featuredGroups",void 0),l([c()],Z.prototype,"featuredItemsGroupQuery",void 0),l([c()],Z.prototype,"galleryTemplatesGroupQuery",void 0),l([c()],Z.prototype,"livingAtlasGroupQuery",void 0),l([c()],Z.prototype,"hasCategorySchema",void 0),l([c()],Z.prototype,"helpBase",void 0),l([c()],Z.prototype,"helperServices",void 0),l([c()],Z.prototype,"helpMap",void 0),l([c()],Z.prototype,"homePageFeaturedContent",void 0),l([c()],Z.prototype,"homePageFeaturedContentCount",void 0),l([c()],Z.prototype,"httpPort",void 0),l([c()],Z.prototype,"httpsPort",void 0),l([c()],Z.prototype,"id",void 0),l([c()],Z.prototype,"ipCntryCode",void 0),l([c({readOnly:!0})],Z.prototype,"isOrganization",null),l([c()],Z.prototype,"isPortal",void 0),l([c()],Z.prototype,"isReadOnly",void 0),l([c()],Z.prototype,"layerTemplatesGroupQuery",void 0),l([c()],Z.prototype,"maxTokenExpirationMinutes",void 0),l([c({type:Date})],Z.prototype,"modified",void 0),l([c()],Z.prototype,"name",void 0),l([c()],Z.prototype,"portalHostname",void 0),l([c()],Z.prototype,"portalMode",void 0),l([c()],Z.prototype,"portalProperties",void 0),l([c()],Z.prototype,"region",void 0),l([c({readOnly:!0})],Z.prototype,"restUrl",null),l([c()],Z.prototype,"rotatorPanels",void 0),l([c()],Z.prototype,"showHomePageDescription",void 0),l([c()],Z.prototype,"sourceJSON",void 0),l([c()],Z.prototype,"staticImagesUrl",void 0),l([c({json:{name:"2DStylesGroupQuery"}})],Z.prototype,"stylesGroupQuery2d",void 0),l([c({json:{name:"stylesGroupQuery"}})],Z.prototype,"stylesGroupQuery3d",void 0),l([c()],Z.prototype,"supportsHostedServices",void 0),l([c()],Z.prototype,"symbolSetsGroupQuery",void 0),l([c()],Z.prototype,"templatesGroupQuery",void 0),l([c()],Z.prototype,"thumbnail",void 0),l([c({readOnly:!0})],Z.prototype,"thumbnailUrl",null),l([c()],Z.prototype,"units",void 0),l([c()],Z.prototype,"url",void 0),l([c()],Z.prototype,"urlKey",void 0),l([K("urlKey")],Z.prototype,"readUrlKey",null),l([c()],Z.prototype,"user",void 0),l([K("user")],Z.prototype,"readUser",null),l([c()],Z.prototype,"useStandardizedQuery",void 0),l([c()],Z.prototype,"useVectorBasemaps",void 0),l([c()],Z.prototype,"vectorBasemapGalleryGroupQuery",void 0),Z=Er=l([S("esri.portal.Portal")],Z);const Kt=Z,MG=W.getLogger("esri.assets");function Ue(e){if(!Ne.assetsPath)throw MG.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new N("assets:path-not-set","config.assetsPath is not set");return Zo(Ne.assetsPath,e)}const NG=W.getLogger("esri.portal.PortalItemResource");let Aa=class extends se{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){T(e)&&Gi(e)?NG.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(O(i))throw new N("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:T4(t,"signal")})}async update(e,t){return(await U(()=>import("./resourceUtils.aa64eae4.js"),[],import.meta.url)).addOrUpdateResource(this,"update",e,t)}hasPath(){return T(this.path)}_normalizePath(e,t){return O(e)?e:(e=e.replace(/^\/+/,""),T(t)&&Gi(e)&&(e=AA(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};l([c()],Aa.prototype,"portalItem",void 0),l([c({type:String,value:null})],Aa.prototype,"path",null),l([Fe("path")],Aa.prototype,"_castPath",null),l([c({type:String,readOnly:!0})],Aa.prototype,"url",null),l([c({type:String,readOnly:!0})],Aa.prototype,"itemRelativeUrl",null),Aa=l([S("esri.portal.PortalItemResource")],Aa);const RG=Aa;let Fh=class extends se{constructor(e){super(e),this.created=null,this.rating=null}};l([c()],Fh.prototype,"created",void 0),l([c()],Fh.prototype,"rating",void 0),Fh=l([S("esri.portal.PortalRating")],Fh);const Kw=Fh;var Zc;let xe=Zc=class extends qy(Ko){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return yA(Zc,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(i="Instant App"),i}readExtent(e){return e&&e.length?new Oe(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,o=!1,s=!1,a=!1,u=!1,d=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(o=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(s=t.includes("Table"),a=t.includes("Route Layer"),u=t.includes("Markup"),d=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),n=d&&s?"spatiotemporaltable":s?"table":a?"routelayer":u?"markup":d?"spatiotemporal":o?"featureshosted":h?"utilitynetwork":"features"):n=e==="map service"||e==="wms"||e==="wmts"?o||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):n=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":"maps",n?Ue(i+n+r+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const e=this.get("portal.restUrl");return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=Kt.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:T(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof Kw&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new Kw({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:P(this.applicationProxies),avgRating:this.avgRating,categories:P(this.categories),created:P(this.created),culture:this.culture,description:this.description,extent:P(this.extent),groupCategories:P(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:P(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:P(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:P(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:P(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new Zc({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then(t=>t.rating!=null?(t.created=new Date(t.created),new Kw(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Zc)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")Nc(t)?r.query={data:t}:r.query={url:to(t)},T(i)&&(r.query.filename=i);else{const n=new FormData;T(i)?n.append("file",t,i):n.append("file",t),r.body=n}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await U(()=>import("./resourceUtils.aa64eae4.js"),[],import.meta.url)).fetchResources(this,e,t)}async addResource(e,t,i){const r=await U(()=>import("./resourceUtils.aa64eae4.js"),[],import.meta.url);return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await U(()=>import("./resourceUtils.aa64eae4.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new N("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await U(()=>import("./resourceUtils.aa64eae4.js"),[],import.meta.url)).removeAllResources(this,e)}resourceFromPath(e){return new RG({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:P(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:P(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:P(this.typeKeywords),url:this.url};return I4(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Zc({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};l([c({type:["private","shared","org","public"]})],xe.prototype,"access",void 0),l([c()],xe.prototype,"accessInformation",void 0),l([c({type:String})],xe.prototype,"apiKey",void 0),l([c({json:{read:{source:"appProxies"}}})],xe.prototype,"applicationProxies",void 0),l([c()],xe.prototype,"avgRating",void 0),l([c()],xe.prototype,"categories",void 0),l([c({type:Date})],xe.prototype,"created",void 0),l([c()],xe.prototype,"culture",void 0),l([c()],xe.prototype,"description",void 0),l([c({readOnly:!0})],xe.prototype,"displayName",null),l([c({type:Oe})],xe.prototype,"extent",void 0),l([K("extent")],xe.prototype,"readExtent",null),l([c()],xe.prototype,"groupCategories",void 0),l([c({readOnly:!0})],xe.prototype,"iconUrl",null),l([c()],xe.prototype,"id",void 0),l([c({readOnly:!0})],xe.prototype,"isLayer",null),l([c()],xe.prototype,"itemControl",void 0),l([c({readOnly:!0})],xe.prototype,"itemUrl",null),l([c()],xe.prototype,"licenseInfo",void 0),l([c({type:Date})],xe.prototype,"modified",void 0),l([c()],xe.prototype,"name",void 0),l([c()],xe.prototype,"numComments",void 0),l([c()],xe.prototype,"numRatings",void 0),l([c()],xe.prototype,"numViews",void 0),l([c()],xe.prototype,"owner",void 0),l([c()],xe.prototype,"ownerFolder",void 0),l([c({type:Kt})],xe.prototype,"portal",void 0),l([c()],xe.prototype,"screenshots",void 0),l([c()],xe.prototype,"size",void 0),l([c()],xe.prototype,"snippet",void 0),l([c()],xe.prototype,"sourceJSON",void 0),l([c({type:String})],xe.prototype,"spatialReference",void 0),l([c()],xe.prototype,"tags",void 0),l([c()],xe.prototype,"thumbnail",void 0),l([c({readOnly:!0})],xe.prototype,"thumbnailUrl",null),l([c()],xe.prototype,"title",void 0),l([c()],xe.prototype,"type",void 0),l([c()],xe.prototype,"typeKeywords",void 0),l([c({type:String,json:{read(e,t){var r;if(t.type!=="KML")return e;const i=(r=this.portal)==null?void 0:r.restUrl;return e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null),e}}})],xe.prototype,"url",void 0),l([c({readOnly:!0})],xe.prototype,"userItemUrl",null),xe=Zc=l([S("esri.portal.PortalItem")],xe);const g1=xe,tL=Object.freeze(Object.defineProperty({__proto__:null,default:g1},Symbol.toStringTag,{value:"Module"})),yI=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,PG={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function mI(e){var t;return(t=PG[e])!=null?t:!1}const Bh=[],Kd=new Map;function gI(e){for(const t of Kd.keys())iL(e.pattern,t)&&Kd.delete(t)}function $G(e){return Bh.includes(e)||(gI(e),Bh.unshift(e)),{remove(){const t=Bh.indexOf(e);t>-1&&(Bh.splice(t,1),gI(e))}}}async function DA(e){const t=Or();Kd.has(e)||Kd.set(e,LG(e,t));const i=Kd.get(e);return await OG.add(i),i}function DG(e){if(!yI.test(e))return null;const[,t,i]=yI.exec(e),r=t+(i?"-"+i.toUpperCase():"");return mI(r)?r:mI(t)?t:null}async function LG(e,t){const i=[];for(const r of Bh)if(iL(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(n){i.push(n)}throw i.length?new N("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new N("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function iL(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}PA(()=>{Kd.clear()});const OG=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Xs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function kG(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await DA("esri/t9n/basemaps");return i[e]||i[t]}const i2={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Ue("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ue("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Ue("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ue("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ue("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ue("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ue("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ue("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ue("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ue("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ue("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ue("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};function LA(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function kge(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}const FG=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),BG=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function UG(e){return e.layerContainerType==="basemap"?FG:e.layerContainerType==="operational-layers"?BG:null}function VG(e,t){if(t.restrictedWebMapWriting){const i=UG(t);return!T(i)||i.has(e.type)&&!LA(e)}return!0}function jG(e,t){if(LA(e)){const i=Dp("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&Zw(e,r)}else e.type==="stream"?Zw(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&Zw(e,t)}function Zw(e,t){"maxScale"in e&&(t.maxScale=p1(e.maxScale)),"minScale"in e&&(t.minScale=p1(e.minScale))}function zG(e,t){if(jG(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=p1(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(LA(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function vI(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new N("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(VG(e,i)){const r={};return e.write(r,i)?r:null}return T(t)&&zG(e,t=P(t)),t}var j0;let HG=0;const Jw=W.getLogger("esri.Basemap");let Kr=j0=class extends qy(Ko){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+HG++,this.baseLayers=new he,this.referenceLayers=new he;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Jw.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{Jw.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",hc(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const o=vI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);T(o)&&r.push(o)}),this.referenceLayers.forEach(n=>{const o=vI(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);T(o)&&(o.isReference=!0,r.push(o))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",hc(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return I5(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new j0({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=P(i);return r.url&&yn(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&yn(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;_t(e);const r=[];if(t){const n=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;r.push(kG(o).then(s=>{s&&this.read({title:s},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||r&&r.portal||null,o=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:s}=await U(()=>import("./layersCreator.a55e6e58.js"),["layersCreator.a55e6e58.js","lazyLayerLoader.325b2d59.js","portalLayers.94881436.js","layersLoader.5ff47b23.js","portalItemUtils.dc9c5eea.js"],import.meta.url),a=[];if(_t(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const u={context:{origin:o,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},d=s(this.baseLayers,e.baseMapLayers.filter(f=>!f.isReference),u);a.push(d);const h=s(this.referenceLayers,e.baseMapLayers.filter(f=>f.isReference),u);a.push(h)}await ri(a)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),n=rt(e.itemUrl);return this._set("resourceInfo",{data:r.baseMap,context:{origin:"web-map",portal:e.portal||Kt.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Kt.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=i2[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),q4(Jw,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return j0.fromJSON(t)}return null}};l([c({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:he}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],Kr.prototype,"baseLayers",null),l([c({type:String,json:{origins:{"web-scene":{write:!0}}}})],Kr.prototype,"id",void 0),l([c({type:g1})],Kr.prototype,"portalItem",void 0),l([c()],Kr.prototype,"referenceLayers",null),l([c({readOnly:!0})],Kr.prototype,"resourceInfo",void 0),l([c({type:me})],Kr.prototype,"spatialReference",void 0),l([c()],Kr.prototype,"thumbnailUrl",void 0),l([c({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Kr.prototype,"title",void 0),l([X("title")],Kr.prototype,"writeTitle",null),Kr=j0=l([S("esri.Basemap")],Kr);const v1=Kr,GG=Object.freeze(Object.defineProperty({__proto__:null,default:v1},Symbol.toStringTag,{value:"Module"})),w1={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function rL(e){return w1[e]||w1[e.toLowerCase()]}function OA(e){var t;return(t=w1[e])!=null?t:w1[e.toLowerCase()]}function WG(e){return[...OA(e)]}function Xw(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function nL(e,t,i,r=1){const n=(e%360+360)%360/360,o=i<=.5?i*(t+1):i+t-i*t,s=2*i-o;return[Math.round(255*Xw(s,o,n+1/3)),Math.round(255*Xw(s,o,n)),Math.round(255*Xw(s,o,n-1/3)),r]}function qG(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,n=t?1:17,o=t?e.length===9:e.length===5;let s=Number("0x"+e.substr(1));if(isNaN(s))return null;const a=[0,0,0,1];let u;return o&&(u=s&r,s>>=i,a[3]=n*u/255),u=s&r,s>>=i,a[2]=n*u,u=s&r,s>>=i,a[1]=n*u,u=s&r,s>>=i,a[0]=n*u,a}function ts(){return[0,0,0]}function YG(e){return[e[0],e[1],e[2]]}function Fp(e,t,i){return[e,t,i]}function KG(e){const t=ts(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function ZG(e,t){return new Float64Array(e,t,3)}function oL(){return ts()}function sL(){return Fp(1,1,1)}function aL(){return Fp(1,0,0)}function lL(){return Fp(0,1,0)}function uL(){return Fp(0,0,1)}const JG=oL(),cL=sL(),XG=aL(),QG=lL(),eW=uL();Object.freeze(Object.defineProperty({__proto__:null,create:ts,clone:YG,fromValues:Fp,fromArray:KG,createView:ZG,zeros:oL,ones:sL,unitX:aL,unitY:lL,unitZ:uL,ZEROS:JG,ONES:cL,UNIT_X:XG,UNIT_Y:QG,UNIT_Z:eW},Symbol.toStringTag,{value:"Module"}));const be=1e-6,hl=Math.random,tW=Math.PI/180,iW=180/Math.PI;function kA(e){return e*tW}function rW(e){return e*iW}function nW(e,t){return Math.abs(e-t)<=be*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:be,RANDOM:hl,toRadian:kA,toDegree:rW,equals:nW},Symbol.toStringTag,{value:"Module"}));function FA(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function r2(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function dL(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function oW(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function pL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function hL(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function fL(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function sW(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function aW(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function lW(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function uW(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function cW(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function dW(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function pW(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function yL(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function hW(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function mL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}function gL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function vL(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function fW(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function yW(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function n2(e,t){const i=t[0],r=t[1],n=t[2];let o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function wL(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function mW(e,t,i){const r=t[0],n=t[1],o=t[2],s=i[0],a=i[1],u=i[2];return e[0]=n*u-o*a,e[1]=o*s-r*u,e[2]=r*a-n*s,e}function gW(e,t,i,r){const n=t[0],o=t[1],s=t[2];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=s+r*(i[2]-s),e}function vW(e,t,i,r,n,o){const s=o*o,a=s*(2*o-3)+1,u=s*(o-2)+o,d=s*(o-1),h=s*(3-2*o);return e[0]=t[0]*a+i[0]*u+r[0]*d+n[0]*h,e[1]=t[1]*a+i[1]*u+r[1]*d+n[1]*h,e[2]=t[2]*a+i[2]*u+r[2]*d+n[2]*h,e}function wW(e,t,i,r,n,o){const s=1-o,a=s*s,u=o*o,d=a*s,h=3*o*a,f=3*u*s,y=u*o;return e[0]=t[0]*d+i[0]*h+r[0]*f+n[0]*y,e[1]=t[1]*d+i[1]*h+r[1]*f+n[1]*y,e[2]=t[2]*d+i[2]*h+r[2]*f+n[2]*y,e}function bW(e,t){t=t||1;const i=2*hl()*Math.PI,r=2*hl()-1,n=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=r*t,e}function _W(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12],e[1]=i[1]*r+i[5]*n+i[9]*o+i[13],e[2]=i[2]*r+i[6]*n+i[10]*o+i[14],e}function SW(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=r*i[0]+n*i[3]+o*i[6],e[1]=r*i[1]+n*i[4]+o*i[7],e[2]=r*i[2]+n*i[5]+o*i[8],e}function TW(e,t,i){const r=i[0],n=i[1],o=i[2],s=i[3],a=t[0],u=t[1],d=t[2];let h=n*d-o*u,f=o*a-r*d,y=r*u-n*a,m=n*y-o*f,g=o*h-r*y,v=r*f-n*h;const w=2*s;return h*=w,f*=w,y*=w,m*=2,g*=2,v*=2,e[0]=a+h+m,e[1]=u+f+g,e[2]=d+y+v,e}function EW(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0],o[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),o[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function AW(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),o[1]=n[1],o[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function xW(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),o[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),o[2]=n[2],e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function CW(e,t){r2(Pm,e),r2($m,t),n2(Pm,Pm),n2($m,$m);const i=wL(Pm,$m);return i>1?0:i<-1?Math.PI:Math.acos(i)}const Pm=ts(),$m=ts();function IW(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function MW(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function NW(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=t[0],s=t[1],a=t[2];return Math.abs(i-o)<=be*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-s)<=be*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=be*Math.max(1,Math.abs(n),Math.abs(a))}function RW(e,t,i){const r=i[0]-t[0],n=i[1]-t[1],o=i[2]-t[2];let s=r*r+n*n+o*o;return s>0?(s=1/Math.sqrt(s),e[0]=r*s,e[1]=n*s,e[2]=o*s,e):(e[0]=0,e[1]=0,e[2]=0,e)}const PW=pL,$W=hL,DW=fL,LW=mL,OW=gL,kW=FA,FW=vL;Object.freeze(Object.defineProperty({__proto__:null,length:FA,copy:r2,set:dL,add:oW,subtract:pL,multiply:hL,divide:fL,ceil:sW,floor:aW,abs:lW,sign:uW,min:cW,max:dW,round:pW,scale:yL,scaleAndAdd:hW,distance:mL,squaredDistance:gL,squaredLength:vL,negate:fW,inverse:yW,normalize:n2,dot:wL,cross:mW,lerp:gW,hermite:vW,bezier:wW,random:bW,transformMat4:_W,transformMat3:SW,transformQuat:TW,rotateX:EW,rotateY:AW,rotateZ:xW,angle:CW,str:IW,exactEquals:MW,equals:NW,direction:RW,sub:PW,mul:$W,div:DW,dist:LW,sqrDist:OW,len:kW,sqrLen:FW},Symbol.toStringTag,{value:"Module"}));function BW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function UW(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function VW(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function bL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function _L(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function SL(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function jW(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function zW(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function HW(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function GW(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function WW(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function qW(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function YW(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function TL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(i*i+r*r+n*n+o*o)}function EL(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return i*i+r*r+n*n+o*o}function AL(e){const t=e[0],i=e[1],r=e[2],n=e[3];return Math.sqrt(t*t+i*i+r*r+n*n)}function xL(e){const t=e[0],i=e[1],r=e[2],n=e[3];return t*t+i*i+r*r+n*n}function KW(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function ZW(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function JW(e,t){const i=t[0],r=t[1],n=t[2],o=t[3];let s=i*i+r*r+n*n+o*o;return s>0&&(s=1/Math.sqrt(s),e[0]=i*s,e[1]=r*s,e[2]=n*s,e[3]=o*s),e}function XW(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function CL(e,t,i,r){const n=t[0],o=t[1],s=t[2],a=t[3];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=s+r*(i[2]-s),e[3]=a+r*(i[3]-a),e}function QW(e,t){let i,r,n,o,s,a;t=t||1;do i=2*hl()-1,r=2*hl()-1,s=i*i+r*r;while(s>=1);do n=2*hl()-1,o=2*hl()-1,a=n*n+o*o;while(a>=1);const u=Math.sqrt((1-s)/a);return e[0]=t*i,e[1]=t*r,e[2]=t*n*u,e[3]=t*o*u,e}function eq(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*s,e[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*s,e[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*s,e[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*s,e}function tq(e,t,i){const r=t[0],n=t[1],o=t[2],s=i[0],a=i[1],u=i[2],d=i[3],h=d*r+a*o-u*n,f=d*n+u*r-s*o,y=d*o+s*n-a*r,m=-s*r-a*n-u*o;return e[0]=h*d+m*-s+f*-u-y*-a,e[1]=f*d+m*-a+y*-s-h*-u,e[2]=y*d+m*-u+h*-a-f*-s,e[3]=t[3],e}function iq(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function rq(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function nq(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],s=t[0],a=t[1],u=t[2],d=t[3];return Math.abs(i-s)<=be*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-a)<=be*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-u)<=be*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-d)<=be*Math.max(1,Math.abs(o),Math.abs(d))}const oq=bL,sq=_L,aq=SL,lq=TL,uq=EL,cq=AL,dq=xL;Object.freeze(Object.defineProperty({__proto__:null,copy:BW,set:UW,add:VW,subtract:bL,multiply:_L,divide:SL,ceil:jW,floor:zW,min:HW,max:GW,round:WW,scale:qW,scaleAndAdd:YW,distance:TL,squaredDistance:EL,length:AL,squaredLength:xL,negate:KW,inverse:ZW,normalize:JW,dot:XW,lerp:CL,random:QW,transformMat4:eq,transformQuat:tq,str:iq,exactEquals:rq,equals:nq,sub:oq,mul:sq,div:aq,dist:lq,sqrDist:uq,len:cq,sqrLen:dq},Symbol.toStringTag,{value:"Module"}));const wI=new Float32Array(1);function Fge(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function yr(e,t,i){return Math.min(Math.max(e,t),i)}function Bge(e){return(e&e-1)==0}function Uge(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Vge(e,t,i){return e+(t-e)*i}function pq(e){return e*Math.PI/180}function IL(e){return 180*e/Math.PI}function jge(e){return Math.acos(yr(e,-1,1))}function ML(e){return Math.asin(yr(e,-1,1))}function Qw(e,t,i=1e-6){return isNaN(e)||isNaN(t)?!1:(e>t?e-t:t-e)<=i}function zge(e){return NL(Math.max(-bI,Math.min(e,bI)))}function NL(e){return wI[0]=e,wI[0]}function Hge(e,t){const i=FA(e),r=ML(e[2]/i),n=Math.atan2(e[1]/i,e[0]/i);return dL(t,i,r,n),t}function Gge(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Qw(t,1)&&Qw(i,1)&&Qw(r,1))}const bI=NL(34028234663852886e22);function Dm(e){return yr(fA(e),0,255)}function Lm(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class Rt{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,r,n=new Rt){return n.r=Math.round(t.r+(i.r-t.r)*r),n.g=Math.round(t.g+(i.g-t.g)*r),n.b=Math.round(t.b+(i.b-t.b)*r),n.a=t.a+(i.a-t.a)*r,n._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),o=r[1];if(o==="rgb"&&n.length===3||o==="rgba"&&n.length===4){const s=n[0];if(s.charAt(s.length-1)==="%"){const a=n.map(u=>2.56*parseFloat(u));return n.length===4&&(a[3]=parseFloat(n[3])),Rt.fromArray(a,i)}return Rt.fromArray(n.map(a=>parseFloat(a)),i)}if(o==="hsl"&&n.length===3||o==="hsla"&&n.length===4)return Rt.fromArray(nL(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(t,i=new Rt){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,n=(1<<r)-1;let o=Number("0x"+t.substr(1));return isNaN(o)?null:(["b","g","r"].forEach(s=>{const a=o&n;o>>=r,i[s]=r===4?17*a:a}),i.a=1,i)}static fromArray(t,i=new Rt){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=rL(t)?OA(t):null;return r&&Rt.fromArray(r,i)||Rt.fromRgb(t,i)||Rt.fromHex(t,i)}static fromJSON(t){return t&&new Rt([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return T(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return T(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var i,r,n,o;return typeof t=="string"?Rt.fromString(t,this):Array.isArray(t)?Rt.fromArray(t,this):(this._set((i=t.r)!=null?i:0,(r=t.g)!=null?r:0,(n=t.b)!=null?n:0,(o=t.a)!=null?o:1),t instanceof Rt||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Rt.AlphaMode.ALWAYS){const i=Dm(this.r),r=Dm(this.g),n=Dm(this.b);return t===Rt.AlphaMode.ALWAYS||this.a!==1?[i,r,n,Dm(255*this.a)]:[i,r,n]}clone(){return new Rt(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return T(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(Lm(this.r,0,255)),this.g=Math.round(Lm(this.g,0,255)),this.b=Math.round(Lm(this.b,0,255)),this.a=Lm(this.a,0,1),this}_set(t,i,r,n){this.r=t,this.g=i,this.b=r,this.a=n}}Rt.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Rt||(Rt={}));const ie=Rt;function Wge(e){}function hq(e){return()=>e}function pe(e,t={}){var n;const i=e instanceof Se?e:new Se(e,t),r={type:(n=t==null?void 0:t.ignoreUnknown)==null||n?i.apiValues:String,json:{type:i.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),c(r)}var o2;let z0=o2=class extends V{constructor(e){super(e),this.type="none"}clone(){return new o2({type:this.type})}};l([pe({none:"none",stayAbove:"stay-above"})],z0.prototype,"type",void 0),z0=o2=l([S("esri.ground.NavigationConstraint")],z0);function Uv(e){const t=fA(100*(1-e));return Math.max(0,Math.min(t,100))}function py(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var s2;const _I=W.getLogger("esri.Ground");let ms=s2=class extends qy(Ko){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new he;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&_I.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{_I.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",hc(e,this._get("layers")))}writeLayers(e,t,i,r){const n=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(o=>{if("write"in o){const s={};hq(o)().write(s,r)&&n.push(s)}else r&&r.messages&&r.messages.push(new N("layer:unsupported",`Layers (${o.title}, ${o.id}) of type '${o.declaredClass}' cannot be persisted in the ground`,{layer:o}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return I5(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await U(()=>import("./ElevationQuery.c83c4c73.js"),[],import.meta.url);_t(t);const r=new i,n=this.layers.filter(SI).toArray();return r.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await U(()=>import("./ElevationQuery.c83c4c73.js"),[],import.meta.url);_t(t);const r=new i,n=this.layers.filter(SI).toArray();return r.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:P(this.surfaceColor),navigationConstraint:P(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new s2({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",n=t&&t.portal||null,o=t&&t.url||null;return U(()=>import("./layersCreator.a55e6e58.js"),["layersCreator.a55e6e58.js","lazyLayerLoader.325b2d59.js","portalLayers.94881436.js","layersLoader.5ff47b23.js","portalItemUtils.dc9c5eea.js"],import.meta.url).then(({populateOperationalLayers:s})=>{_t(i);const a=[];if(e.layers&&Array.isArray(e.layers)){const u={context:{origin:r,url:o,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(s(this.layers,e.layers,u))}return ri(a)}).then(()=>{})}};function fq(e){return e&&"createElevationSampler"in e}function SI(e){return e.type==="elevation"||fq(e)}l([c({json:{read:!1}})],ms.prototype,"layers",null),l([X("layers")],ms.prototype,"writeLayers",null),l([c({readOnly:!0})],ms.prototype,"resourceInfo",void 0),l([c({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Qe,read:{reader:py,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Uv(e)},target:"transparency"}}})],ms.prototype,"opacity",void 0),l([c({type:ie,json:{type:[Qe],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],ms.prototype,"surfaceColor",void 0),l([c({type:z0,json:{write:!0}})],ms.prototype,"navigationConstraint",void 0),ms=s2=l([S("esri.Ground")],ms);const b1=ms;let H0=class extends se{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!he.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||he.isCollection(e)?e.forEach(r=>this._isHandle(r)&&i.push(r)):i.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(i=>i.forEach(e));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||he.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let i=0;i<t.length;i++)t[i].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};l([c({readOnly:!0})],H0.prototype,"size",null),H0=l([S("esri.core.Handles")],H0);const gi=H0;function q(e,t,i={}){return BA(e,t,i,RL)}function mn(e,t,i={}){return BA(e,t,i,PL)}function BA(e,t,i={},r){let n=null;const o=i.once?(s,a)=>{r(s)&&(Dr(n),t(s,a))}:(s,a)=>{r(s)&&t(s,a)};if(n=tz(e,o,i.sync,i.equals),i.initial){const s=e();o(s,s)}return n}function Nl(e,t,i,r={}){let n=null,o=null,s=null;function a(){var h;n&&o&&(o.remove(),(h=r.onListenerRemove)==null||h.call(r,n),n=null,o=null)}function u(h){r.once&&r.once&&Dr(s),i(h)}const d=q(e,(h,f)=>{var y;a(),Ev(h)&&(n=h,o=Av(h,t,u),(y=r.onListenerAdd)==null||y.call(r,h))},{sync:r.sync,initial:!0});return s=$p(()=>{d.remove(),a()}),s}function hy(e,t){return yq(e,PL,t)}function yq(e,t,i){if(hn(i))return Promise.reject(bt());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let n=null;function o(){n=Dr(n)}return new Promise((s,a)=>{n=_v([fn(i,()=>{o(),a(bt())}),BA(e,u=>{o(),s(u)},{sync:!1,once:!0},t!=null?t:RL)])})}function RL(e){return!0}function PL(e){return!!e}const dp={sync:!0},ze={initial:!0},tl={sync:!0,initial:!0};let Zd=class extends se{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new gi,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,q)}addWhen(e,t,i={}){return this._installWatch(e,t,i,mn)}addOnCollectionChange(e,t,{initial:i=!1,final:r=!1}={}){const n=++this.handleId;return this.handles.add([Nl(e,"after-changes",this._createSyncUpdatingCallback(),dp),Nl(e,"change",t,{onListenerAdd:i?o=>t({added:o.toArray(),removed:[]}):void 0,onListenerRemove:r?o=>t({added:[],removed:o.toArray()}):void 0})],n),{remove:()=>this.handles.remove(n)}}addPromise(e){if(O(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(Om)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const n=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,n);const o=r(e,t,i);return this.handles.add(o,n),{remove:()=>this.handles.remove(n)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=q(e,i,{sync:!0,equals:()=>!1});return this.handles.add(r,t),r}_createSyncUpdatingCallback(){return()=>{this.handles.remove(Om),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Lp(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(Om))}),Om)}}};l([c({readOnly:!0})],Zd.prototype,"updating",void 0),Zd=l([S("esri.core.support.WatchUpdatingTracking")],Zd);const Om=-42;var TI;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(TI||(TI={}));const Ll=e=>{let t=class extends e{destroy(){var i,r;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(r=this._get("updatingHandles"))==null||r.destroy())}get handles(){return this._get("handles")||new gi}get updatingHandles(){return this._get("updatingHandles")||new Zd}};return l([c({readOnly:!0})],t.prototype,"handles",null),l([c({readOnly:!0})],t.prototype,"updatingHandles",null),t=l([S("esri.core.HandleOwner")],t),t};let fy=class extends Ll(se){};fy=l([S("esri.core.HandleOwner")],fy);let Jc=class extends Ll(he){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(e5(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=T(this.getCollections)?this.getCollections():null;if(O(e))return void this.removeAll();let t=0;for(const i of e)T(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new he(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of t)if(r){if(i(r)){const n=this.indexOf(r,e);n>=0?n!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(r);if(Array.isArray(n))for(const o of n)e=this._processCollection(e,o);else e=this._processCollection(e,n)}}return e}};l([c()],Jc.prototype,"getCollections",void 0),l([c()],Jc.prototype,"getChildrenFunction",void 0),l([c()],Jc.prototype,"itemFilterFunction",void 0),Jc=l([S("esri.core.CollectionFlattener")],Jc);const pp=Jc;function mq(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&((t=e==null?void 0:e.capabilities)==null?void 0:t.operations)&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const EI=W.getLogger("esri.support.basemapUtils");function gq(){return{}}function vq(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function wq(e,t){let i;if(typeof e=="string"){if(!(e in i2)){const r=Object.entries(i2).filter(([n,o])=>Ne.apiKey&&!o.classic||!Ne.apiKey&&o.classic&&!o.deprecated).map(([n])=>`"${n}"`).join(", ");return EI.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=v1.fromId(e),t&&(t[e]=i))}else i=Ze(v1,e);return i!=null&&i.destroyed&&(EI.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function bq(e){return new pp({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}})}const _q=W.getLogger("esri.support.groundUtils"),AI={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Sq(e){let t=null;if(typeof e=="string")if(e in AI){const i=AI[e];t=new b1({resourceInfo:{data:{layers:[i]}}})}else _q.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Ze(b1,e);return t}function hp(e,t,i=!1){let{hasM:r,hasZ:n}=e;Array.isArray(t)?t.length!==4||r||n?t.length===3&&i&&!r?(n=!0,r=!1):t.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=r}var a2;function xI(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function Tq(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let xa=a2=class extends fr{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):Tq(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Oe,i=this.hasZ,r=this.hasM,n=i?3:2,o=e[0],s=xI(Math.min),a=xI(Math.max);let u,d,h,f,[y,m]=o,[g,v]=o;for(let w=0,_=e.length;w<_;w++){const A=e[w],[I,D]=A;if(y=s(y,I),m=s(m,D),g=a(g,I),v=a(v,D),i&&A.length>2){const M=A[2];u=s(u,M),h=a(h,M)}if(r&&A.length>n){const M=A[n];d=s(d,M),f=a(f,M)}}return t.xmin=y,t.ymin=m,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,i?(t.zmin=u,t.zmax=h):(t.zmin=null,t.zmax=null),r?(t.mmin=d,t.mmax=f):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=P(this.points)}addPoint(e){return hp(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:P(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new a2(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new le(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new le(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(hp(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};l([c({readOnly:!0})],xa.prototype,"cache",null),l([c()],xa.prototype,"extent",null),l([c({type:[[Number]],json:{write:{isRequired:!0}}})],xa.prototype,"points",void 0),l([X("points")],xa.prototype,"writePoints",null),xa=a2=l([S("esri.geometry.Multipoint")],xa),xa.prototype.toJSON.isDefaultToJSON=!0;const Bp=xa;function Eq(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function Aq(e,t,i){const r=e[0]+i*(t[0]-e[0]),n=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,n,e[2]+i*(t[2]-e[2])]:[r,n]}function xq(e,t,i,r){const[n,o]=t,[s,a]=i[r],[u,d]=i[r+1],h=u-s,f=d-a,y=h*h+f*f,m=(n-s)*h+(o-a)*f,g=Math.min(1,Math.max(0,m/y));return e[0]=s+h*g,e[1]=a+f*g,e}function Cq(e,t){return Aq(e,t,.5)}function UA(e,t,i){const r=e.length;let n=0,o=0,s=0;for(let a=0;a<r;a++){const u=e[a],d=e[(a+1)%r];let h=2;n+=u[0]*d[1]-d[0]*u[1],u.length>2&&d.length>2&&i&&(o+=u[0]*d[2]-d[0]*u[2],h=3),u.length>h&&d.length>h&&t&&(s+=u[0]*d[h]-d[0]*u[h])}return n<=0&&o<=0&&s<=0}function qge(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!UA(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function Yge(e){if("rings"in e)for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]])}function Kge(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Iq(e){return e?Mq(e.rings,e.hasZ):null}function Mq(e,t){if(!e||!e.length)return null;const i=[],r=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let o=0,s=e.length;o<s;o++){const a=Nq(e[o],t,n);a&&r.push(a)}if(r.sort((o,s)=>{let a=o[2]-s[2];return a===0&&t&&(a=o[4]-s[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const o=e[0]&&e[0].length?Rq(e[0],t):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function Nq(e,t,i){let r=0,n=0,o=0,s=0,a=0;const u=e.length?e[0][0]:0,d=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let y=0;y<e.length;y++){const m=e[y],g=e[(y+1)%e.length],[v,w,_]=m,A=v-u,I=w-d,D=t?_-h:void 0,[M,R,B]=g,j=M-u,Y=R-d,ee=t?B-h:void 0,re=A*Y-j*I;if(s+=re,r+=(A+j)*re,n+=(I+Y)*re,t&&m.length>2&&g.length>2){const ue=A*ee-j*D;o+=(D+ee)*ue,a+=ue}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),w<i[2]&&(i[2]=w),w>i[3]&&(i[3]=w),t&&(_<i[4]&&(i[4]=_),_>i[5]&&(i[5]=_))}if(s>0&&(s*=-1),a>0&&(a*=-1),!s)return null;s*=.5,a*=.5;const f=[r/(6*s)+u,n/(6*s)+d,s];return t&&(i[4]===i[5]||a===0?(f[3]=(i[4]+i[5])/2,f[4]=0):(f[3]=o/(6*a)+h,f[4]=a)),f}function Rq(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let n=0,o=0,s=0,a=0;for(let u=0,d=e.length;u<d-1;u++){const h=e[u],f=e[u+1];if(h&&f){i[0]=h[0],i[1]=h[1],r[0]=f[0],r[1]=f[1],t&&h.length>2&&f.length>2&&(i[2]=h[2],r[2]=f[2]);const y=Eq(i,r);if(y){n+=y;const m=Cq(h,f);o+=y*m[0],s+=y*m[1],t&&m.length>2&&(a+=y*m[2])}}}return n>0?t?[o/n,s/n,a/n]:[o/n,s/n]:e.length?e[0]:null}function $L(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function DL(e){return e.points!==void 0}function LL(e){return e.x!==void 0&&e.y!==void 0}function OL(e){return e.paths!==void 0}function kL(e){return e.rings!==void 0}function FL(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}const fl=FL(Math.min),yl=FL(Math.max);function Zge(e,t){return OL(t)?fp(e,t.paths,!1,!1):kL(t)?fp(e,t.rings,!1,!1):DL(t)?VA(e,t.points,!1,!1,!1,!1):$L(t)?BL(e,t):(LL(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function Jge(e,t){return OL(t)?fp(e,t.paths,!0,!1):kL(t)?fp(e,t.rings,!0,!1):DL(t)?VA(e,t.points,!0,!1,!0,!1):$L(t)?BL(e,t,!0,!1,!0,!1):(LL(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function fp(e,t,i,r){const n=i?3:2;if(!t.length||!t[0].length)return null;let o,s,a,u,[d,h]=t[0][0],[f,y]=t[0][0];for(let m=0;m<t.length;m++){const g=t[m];for(let v=0;v<g.length;v++){const w=g[v],[_,A]=w;if(d=fl(d,_),h=fl(h,A),f=yl(f,_),y=yl(y,A),i&&w.length>2){const I=w[2];o=fl(o,I),s=yl(s,I)}if(r&&w.length>n){const I=w[n];a=fl(o,I),u=yl(s,I)}}}return i?r?(e[0]=d,e[1]=h,e[2]=o,e[3]=a,e[4]=f,e[5]=y,e[6]=s,e[7]=u,e.length=8,e):(e[0]=d,e[1]=h,e[2]=o,e[3]=f,e[4]=y,e[5]=s,e.length=6,e):r?(e[0]=d,e[1]=h,e[2]=a,e[3]=f,e[4]=y,e[5]=u,e.length=6,e):(e[0]=d,e[1]=h,e[2]=f,e[3]=y,e.length=4,e)}function BL(e,t,i,r,n,o){const s=t.xmin,a=t.xmax,u=t.ymin,d=t.ymax;let h=t.zmin,f=t.zmax,y=t.mmin,m=t.mmax;return n?(h=h||0,f=f||0,o?(y=y||0,m=m||0,e[0]=s,e[1]=u,e[2]=h,e[3]=y,e[4]=a,e[5]=d,e[6]=f,e[7]=m,e):(e[0]=s,e[1]=u,e[2]=h,e[3]=a,e[4]=d,e[5]=f,e)):o?(y=y||0,m=m||0,e[0]=s,e[1]=u,e[2]=y,e[3]=a,e[4]=d,e[5]=m,e):(e[0]=s,e[1]=u,e[2]=a,e[3]=d,e)}function VA(e,t,i,r,n,o){const s=i?3:2,a=r&&o,u=i&&n;if(!t.length||!t[0].length)return null;let d,h,f,y,[m,g]=t[0],[v,w]=t[0];for(let _=0;_<t.length;_++){const A=t[_],[I,D]=A;if(m=fl(m,I),g=fl(g,D),v=yl(v,I),w=yl(w,D),u&&A.length>2){const M=A[2];d=fl(d,M),h=yl(h,M)}if(a&&A.length>s){const M=A[s];f=fl(d,M),y=yl(h,M)}}return n?(d=d||0,h=h||0,o?(f=f||0,y=y||0,e[0]=m,e[1]=g,e[2]=d,e[3]=f,e[4]=v,e[5]=w,e[6]=h,e[7]=y,e):(e[0]=m,e[1]=g,e[2]=d,e[3]=v,e[4]=w,e[5]=h,e)):o?(f=f||0,y=y||0,e[0]=m,e[1]=g,e[2]=f,e[3]=v,e[4]=w,e[5]=y,e):(e[0]=m,e[1]=g,e[2]=v,e[3]=w,e)}function Pq(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function $q(e){return e.points!==void 0}function Dq(e){return e.x!==void 0&&e.y!==void 0}function Lq(e){return e.paths!==void 0}function Oq(e){return e.rings!==void 0}const jA=[];function UL(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function VL(e,t,i,r,n,o){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:n,zmax:o}}function jL(e,t,i,r,n,o){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:n,mmax:o}}function zL(e,t,i,r,n,o,s,a){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:n,ymax:o,zmax:s,mmax:a}}function zA(e,t=!1,i=!1){return t?i?zL(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):VL(e[0],e[1],e[2],e[3],e[4],e[5]):i?jL(e[0],e[1],e[2],e[3],e[4],e[5]):UL(e[0],e[1],e[2],e[3])}function Xge(e){return e?Pq(e)?e:Dq(e)?Fq(e):Oq(e)?HL(e):Lq(e)?GL(e):$q(e)?kq(e):null:null}function kq(e){const{hasZ:t,hasM:i,points:r}=e;return zA(VA(jA,r,t,i),t,i)}function Fq(e){const{x:t,y:i,z:r,m:n}=e,o=n!=null;return r!=null?o?zL(t,i,r,n,t,i,r,n):VL(t,i,r,t,i,r):o?jL(t,i,n,t,i,n):UL(t,i,t,i)}function HL(e){const{hasZ:t,hasM:i,rings:r}=e,n=fp(jA,r,t,i);return n?zA(n,t,i):null}function GL(e){const{hasZ:t,hasM:i,paths:r}=e,n=fp(jA,r,t,i);return n?zA(n,t,i):null}var G0;function CI(e){return!Array.isArray(e[0])}let bo=G0=class extends fr{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,n=!1;for(const s of t)s.hasZ&&(r=!0),s.hasM&&(n=!0);const o={rings:t.map(s=>{const a=[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]];if(r&&s.hasZ){const u=s.zmin+.5*(s.zmax-s.zmin);for(let d=0;d<a.length;d++)a[d].push(u)}if(n&&s.hasM){const u=s.mmin+.5*(s.mmax-s.mmin);for(let d=0;d<a.length;d++)a[d].push(u)}return a}),spatialReference:i};return r&&(o.hasZ=!0),n&&(o.hasM=!0),new G0(o)}normalizeCtorArgs(e,t){let i,r,n=null,o=null;return e&&!Array.isArray(e)?(n=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||me.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),o=n[0]&&n[0][0],o&&(i===void 0&&r===void 0?(i=o.length>2,r=o.length>3):i===void 0?i=r?o.length>3:o.length>2:r===void 0&&(r=i?o.length>3:o.length>2)),{rings:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Iq(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new le;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=HL(this);if(!t)return null;const i=new Oe(t);return i.spatialReference=e,i}get isSelfIntersecting(){return bG(this.rings)}writeRings(e,t){t.rings=P(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(CI(e)){const r=[];for(let n=0,o=e.length;n<o;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new G0;return e.spatialReference=this.spatialReference,e.rings=P(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(O(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(T(t)!==T(i)||T(t)&&T(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([n,o,s,a],[u,d,h,f])=>n===u&&o===d&&(s==null&&h==null||s===h)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const o=this.rings[n],s=e.rings[n];if(!oA(o,s,r))return!1}return!0}contains(e){if(!e)return!1;const t=Fv(e,this.spatialReference);return K5(this,T(t)?t:e)}isClockwise(e){let t;return t=CI(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,UA(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new le(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new le(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new le(i[0],i[1],i[2],i[3],this.spatialReference):new le(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(hp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new le(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new le(n,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(hp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([c({readOnly:!0})],bo.prototype,"cache",null),l([c({readOnly:!0})],bo.prototype,"centroid",null),l([c({readOnly:!0})],bo.prototype,"extent",null),l([c({readOnly:!0})],bo.prototype,"isSelfIntersecting",null),l([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],bo.prototype,"rings",void 0),l([X("rings")],bo.prototype,"writeRings",null),bo=G0=l([S("esri.geometry.Polygon")],bo),bo.prototype.toJSON.isDefaultToJSON=!0;const mr=bo;var l2;function Bq(e){return!Array.isArray(e[0])}let Ca=l2=class extends fr{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,n=null,o=null;return e&&!Array.isArray(e)?(n=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||me.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),o=n[0]&&n[0][0],o&&(i===void 0&&r===void 0?(i=o.length>2,r=!1):i===void 0?i=!r&&o.length>3:r===void 0&&(r=!i&&o.length>3)),{paths:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=GL(this);if(!t)return null;const i=new Oe(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=P(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(Bq(e)){const r=[];for(let n=0,o=e.length;n<o;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new l2;return e.spatialReference=this.spatialReference,e.paths=P(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new le(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new le(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new le(i[0],i[1],i[2],i[3],this.spatialReference):new le(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(hp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new le(n,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new le(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(hp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([c({readOnly:!0})],Ca.prototype,"cache",null),l([c({readOnly:!0})],Ca.prototype,"extent",null),l([c({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ca.prototype,"paths",void 0),l([X("paths")],Ca.prototype,"writePaths",null),Ca=l2=l([S("esri.geometry.Polyline")],Ca),Ca.prototype.toJSON.isDefaultToJSON=!0;const Hi=Ca,HA=mi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),II=mi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function WL(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function GA(e){return e.points!==void 0}function WA(e){return e.x!==void 0&&e.y!==void 0}function qA(e){return e.paths!==void 0}function sc(e){return e.rings!==void 0}function Ji(e){return O(e)?null:e instanceof fr?e:WA(e)?le.fromJSON(e):qA(e)?Hi.fromJSON(e):sc(e)?mr.fromJSON(e):GA(e)?Bp.fromJSON(e):WL(e)?Oe.fromJSON(e):null}function Up(e){return e?WA(e)?"esriGeometryPoint":qA(e)?"esriGeometryPolyline":sc(e)?"esriGeometryPolygon":WL(e)?"esriGeometryEnvelope":GA(e)?"esriGeometryMultipoint":null:null}const Uq={esriGeometryPoint:le,esriGeometryPolyline:Hi,esriGeometryPolygon:mr,esriGeometryEnvelope:Oe,esriGeometryMultipoint:Bp};function qL(e){return e&&Uq[e]||null}const Rc={base:fr,key:"type",typeMap:{extent:Oe,multipoint:Bp,point:le,polyline:Hi,polygon:mr}};Yo(Rc);let Vq=0;const Vv=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Vq++})}};return t=l([S("esri.core.Identifiable")],t),t};let MI=class extends Vv(class{}){};MI=l([S("esri.core.Identifiable")],MI);const jq=W.getLogger("esri.layers.support.fromPortalItem");async function zq(e){const t="portalItem"in e?e:{portalItem:e},i=await U(()=>import("./portalLayers.94881436.js"),["portalLayers.94881436.js","lazyLayerLoader.325b2d59.js","layersLoader.5ff47b23.js","portalItemUtils.dc9c5eea.js"],import.meta.url);try{return await i.fromItem(t)}catch(r){const n=t&&t.portalItem,o=n&&n.id||"unset",s=n&&n.portal&&n.portal.url||Ne.portalUrl;throw jq.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+s+"', id: '"+o+"')",r),r}}let Hq=0,Ht=class extends ra.EventedMixin(Vv(Ko)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Oe(-180,-90,180,90,me.WGS84),this.id=Date.now().toString(16)+"-layer-"+Hq++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=me.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await U(()=>import("./arcgisLayers.1ad7c662.js"),["arcgisLayers.1ad7c662.js","lazyLayerLoader.325b2d59.js"],import.meta.url)).fromUrl(t)}static fromPortalItem(e){return zq(e)}initialize(){this.when().catch(e=>{var t,i;Ki(e)||W.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?rt(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Be(e,{query:{f:"json"},responseType:"json"})).data;throw new N("layer:no-attribution-data","Layer does not have attribution data")}};l([c({type:String})],Ht.prototype,"attributionDataUrl",void 0),l([c({type:Oe})],Ht.prototype,"fullExtent",void 0),l([c({readOnly:!0})],Ht.prototype,"hasAttributionData",null),l([c({type:String,clonable:!1})],Ht.prototype,"id",void 0),l([c({type:Boolean,nonNullable:!0})],Ht.prototype,"legendEnabled",void 0),l([c({type:["show","hide","hide-children"]})],Ht.prototype,"listMode",void 0),l([c({type:Number,range:{min:0,max:1},nonNullable:!0})],Ht.prototype,"opacity",void 0),l([c({clonable:!1})],Ht.prototype,"parent",void 0),l([c({readOnly:!0})],Ht.prototype,"parsedUrl",null),l([c({type:Boolean})],Ht.prototype,"popupEnabled",void 0),l([c({type:Boolean})],Ht.prototype,"attributionVisible",void 0),l([c({type:me})],Ht.prototype,"spatialReference",void 0),l([c({type:String})],Ht.prototype,"title",void 0),l([c({readOnly:!0,json:{read:!1}})],Ht.prototype,"type",void 0),l([c()],Ht.prototype,"url",void 0),l([c({type:Boolean,nonNullable:!0})],Ht.prototype,"visible",void 0),Ht=l([S("esri.layers.Layer")],Ht);const yp=Ht;function u2(e,t,i){let r,n;if(e)for(let o=0,s=e.length;o<s;o++){if(r=e.getItemAt(o),r[t]===i)return r;if((r==null?void 0:r.type)==="group"&&(n=u2(r.layers,t,i),n))return n}}const NI=W.getLogger("esri.support.LayersMixin"),Gq=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new he;const r=s=>{s.parent&&"remove"in s.parent&&s.parent.remove(s)},n=s=>{s.parent=this,this.layerAdded(s),s.type!=="elevation"&&s.type!=="base-elevation"||NI.error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as an operational layer and will therefore be ignored.`)},o=s=>{s.parent=null,this.layerRemoved(s)};this.layers.on("before-add",s=>r(s.item)),this.layers.on("after-add",s=>n(s.item)),this.layers.on("after-remove",s=>o(s.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",hc(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof yp){const o=i;o.parent===this?this.reorder(o,r):n.add(o,r)}else ia(i)?i.then(o=>{this.destroyed||this.add(o,r)}):NI.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;r=n.getNextIndex(r),i.slice().forEach(o=>{o.parent!==this?(n.add(o,r),r+=1):this.reorder(o,r)})}findLayerById(i){return u2(this.layers,"id",i)}findLayerByUid(i){return u2(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return l([c()],t.prototype,"layers",null),t=l([S("esri.support.LayersMixin")],t),t},YL="esri.support.TablesMixin",Wq=W.getLogger(YL);function c2(e,t,i){if(e)for(let r=0,n=e.length;r<n;r++){const o=e.getItemAt(r);if(o[t]===i)return o;if((o==null?void 0:o.type)==="group"){const s=c2(o.tables,t,i);if(s)return s}}}const qq=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new he,this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&Wq.error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",hc(i,this._get("tables")))}findTableById(i){return c2(this.tables,"id",i)}findTableByUid(i){return c2(this.tables,"uid",i)}};return l([c()],t.prototype,"tables",null),t=l([S(YL)],t),t};let _o=class extends qq(Gq(ra.EventedMixin(se))){constructor(e){super(e),this.allLayers=new pp({getCollections:()=>{var t,i,r;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=bq(this),this.basemap=null,this.editableLayers=new pp({getCollections:()=>[this.allLayers],itemFilterFunction:mq}),this.ground=new b1,this._basemapCache=gq()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),vq(this._basemapCache),this._basemapCache=null}castBasemap(e){return wq(e,this._basemapCache)}castGround(e){const t=Sq(e);return O(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};l([c({readOnly:!0,dependsOn:[]})],_o.prototype,"allLayers",void 0),l([c({readOnly:!0})],_o.prototype,"allTables",void 0),l([c({type:v1})],_o.prototype,"basemap",void 0),l([Fe("basemap")],_o.prototype,"castBasemap",null),l([c({readOnly:!0})],_o.prototype,"editableLayers",void 0),l([c({type:b1,nonNullable:!0})],_o.prototype,"ground",void 0),l([Fe("ground")],_o.prototype,"castGround",null),_o=l([S("esri.Map")],_o);const KL=_o;var mp;function Yq(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>r)return mp.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return mp.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(mp||(mp={}));let eb;function Qs(){return eb||(eb=(async()=>{const e=await U(()=>import("./arcadeUtils.f209e074.js").then(t=>t.t),[],import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),eb}const Qge=(e,t,i)=>Yy.create(e,t,i,null,["$feature"]),e1e=(e,t,i)=>Yy.create(e,t,i,null,["$feature","$view"]),Kq=(e,t,i,r)=>Yy.create(e,t,i,r,["$feature","$view"]);class Yy{constructor(t,i,r,n,o,s,a,u){this.script=t,this.evaluate=o;const d=Array.isArray(a)?a:a.fields;this.fields=d,this._syntaxTree=n,this._arcade=i,this._arcadeDictionary=r,this._arcadeFeature=s,this._spatialReference=u,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,n,o,s){const{arcade:a,Feature:u,Dictionary:d}=await Qs(),h=me.fromJSON(i),f=a.parseScript(t,s),y=o.reduce((M,R)=>({...M,[R]:null}),{});let m=null;T(n)&&(m=new d(n),m.immutable=!0,y.$config=null);const g=a.scriptUsesGeometryEngine(f)&&a.enableGeometrySupport(),v=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),w=a.scriptIsAsync(f)&&a.enableAsyncSupport(),_={vars:y,spatialReference:h,useAsync:!!w},A=new d;A.immutable=!1,A.setField("scale",0);const I=a.compileScript(f,_),D=M=>("$view"in M&&M.$view&&(A.setField("scale",M.$view.scale),M.$view=A),m&&(M.$config=m),I({vars:M,spatialReference:h}));return await Promise.all([g,v,w]),new Yy(t,a,d,f,D,new u,r,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const Zq=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Jq=["field","normalizationField"];function _1(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(RI(Zq,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)RI(Jq,r,t)}}function RI(e,t,i){if(e)for(const r of e){const n=Dp(r,t),o=n&&typeof n!="function"&&i.get(n);o&&hr(r,o.name,t)}}function YA(e,t){if(e!=null&&(t==null?void 0:t.fields.length))if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const tb=new Set;function ZL(e,t){return e&&t?(tb.clear(),yy(tb,e,t),Array.from(tb).sort()):[]}function yy(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of i)pn(e,t,n);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const n of i)e.add(n)}}function pn(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function t1e(e,t){return O(t)||O(e)?[]:t.includes("*")?e.fields.map(i=>i.name):t}async function Xi(e,t,i){var o;if(!i)return;const{arcadeUtils:r}=await Qs(),n=r.extractFieldNames(i,(o=t==null?void 0:t.fields)==null?void 0:o.map(s=>s.name));for(const s of n)pn(e,t,s)}async function JL(e,t,i){if(i&&i!=="1=1"){const r=(await U(()=>import("./WhereClause.3e515281.js"),[],import.meta.url)).WhereClause.create(i,t);if(!r.isStandardized)throw new N("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});yy(e,t,r.fieldNames)}}function Xq({displayField:e,fields:t}){return e||(t&&t.length?ib(t,"name-or-title")||ib(t,"unique-identifier")||ib(t,"type-or-category")||Qq(t):null)}function Qq(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function ib(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function i1e(e,t){if(!t)return;const i=Dp("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function eY(e,t,i){i.outStatistic.onStatisticValueExpression?Xi(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}async function r1e(e,t,i){var n,o;if(!t||!i||!("fields"in i))return;const r=[];if((n=i.popupTemplate)!=null&&n.expressionInfos&&r.push(...i.popupTemplate.expressionInfos.map(s=>Xi(e,t.fieldsIndex,s.expression))),Array.isArray((o=i.popupTemplate)==null?void 0:o.content)){const s=i.popupTemplate.content;for(const a of s)a.type==="expression"&&a.expressionInfo&&r.push(Xi(e,t.fieldsIndex,a.expressionInfo.expression))}i.fields&&r.push(...i.fields.map(s=>eY(e,t.fieldsIndex,s))),await Promise.all(r)}async function n1e(e,t,i){t&&(t.timeInfo&&T(i)&&i.timeExtent&&yy(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&yy(e,t.fieldsIndex,[t.floorInfo.floorField]),T(i)&&T(i.where)&&await JL(e,t.fieldsIndex,i.where))}async function o1e(e,t,i){t&&i&&await Promise.all(i.map(r=>tY(e,t,r)))}async function tY(e,t,i){t&&i&&(i.valueExpression?await Xi(e,t.fieldsIndex,i.valueExpression):i.field&&pn(e,t.fieldsIndex,i.field))}function s1e(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?ZL(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function a1e(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(n=>iY(e,r,n)))}async function iY(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Xi(e,t,r.expression);else{const o=r.expression.match(/{[^}]*}/g);o&&o.forEach(s=>{pn(e,t,s.slice(1,-1))})}await JL(e,t,n)}function rY(e){const t=e.defaultValue;return t!==void 0&&e9(e,t)?t:e.nullable?null:void 0}function XL(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function nY(e){return e===null||XL(e)}const KA="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function oY(e){return e===null||KA(e)}function QL(e){return e!=null&&typeof e=="string"}function sY(e){return e===null||QL(e)}function aY(){return!0}function e9(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?oY:KA;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?nY:XL;break;case"string":case"esriFieldTypeString":i=e.nullable?sY:QL;break;default:i=aY}return arguments.length===1?i:i(t)}const lY=["integer","small-integer","single","double"],uY=new Set([...lY,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function ZA(e){return e!=null&&uY.has(e.type)}function l1e(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var S1,T1;function u1e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function c1e(e,t){return e.nullable&&t===null?null:ZA(e)&&!cY(e.type,Number(t))?S1.OUT_OF_RANGE:e9(e,t)?e.domain?Yq(e.domain,t):null:T1.INVALID_TYPE}function cY(e,t){const i=typeof e=="string"?t9(e):e;return!!i&&(i.isInteger?KA(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}function t9(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return dY;case"esriFieldTypeInteger":case"integer":return pY;case"esriFieldTypeSingle":case"single":return hY;case"esriFieldTypeDouble":case"double":return fY}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(S1||(S1={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(T1||(T1={}));const dY={min:-32768,max:32767,isInteger:!0},pY={min:-2147483648,max:2147483647,isInteger:!0},hY={min:-34e37,max:12e37,isInteger:!1},fY={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function d1e(e,t,i){switch(e){case mp.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case mp.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case T1.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case S1.OUT_OF_RANGE:{const{min:r,max:n}=t9(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${n}`}}}function yY(e,t){return!mY(e,t,null)}function mY(e,t,i){if(!t||!t.attributes||!e){if(T(i))for(const o of e)i.add(o);return!0}const r=t.attributes;let n=!1;for(const o of e)if(!(o in r)){if(n=!0,!T(i))break;i.add(o)}return n}function i9(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let W0=class extends V{constructor(e){super(e),this.type=null}};l([c({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],W0.prototype,"type",void 0),W0=l([S("esri.popup.content.Content")],W0);const Pc=W0;var d2;let Xl=d2=class extends Pc{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new d2({description:this.description,displayType:this.displayType,title:this.title})}};l([c({type:String,json:{write:!0}})],Xl.prototype,"description",void 0),l([c({type:["auto","preview","list"],json:{write:!0}})],Xl.prototype,"displayType",void 0),l([c({type:String,json:{write:!0}})],Xl.prototype,"title",void 0),l([c({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Xl.prototype,"type",void 0),Xl=d2=l([S("esri.popup.content.AttachmentsContent")],Xl);const my=Xl;var p2;let Ql=p2=class extends Pc{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new p2({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?P(this.outFields):null})}};l([c()],Ql.prototype,"creator",void 0),l([c()],Ql.prototype,"destroyer",void 0),l([c()],Ql.prototype,"outFields",void 0),l([c({type:["custom"],readOnly:!0})],Ql.prototype,"type",void 0),Ql=p2=l([S("esri.popup.content.CustomContent")],Ql);const gY=Ql;var h2;let Xc=h2=class extends V{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new h2({title:this.title,expression:this.expression})}};l([c({type:String,json:{write:!0}})],Xc.prototype,"title",void 0),l([c({type:String,json:{write:!0}})],Xc.prototype,"expression",void 0),l([c({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Xc.prototype,"returnType",void 0),Xc=h2=l([S("esri.popup.ElementExpressionInfo")],Xc);const r9=Xc;var f2;let Uh=f2=class extends Pc{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new f2({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};l([c({type:r9,json:{write:!0}})],Uh.prototype,"expressionInfo",void 0),l([c({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Uh.prototype,"type",void 0),Uh=f2=l([S("esri.popup.content.ExpressionContent")],Uh);const JA=Uh,gy=mi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});gy.toJSON.bind(gy);gy.fromJSON.bind(gy);const mo={year:"numeric",month:"numeric",day:"numeric"},ch={year:"numeric",month:"long",day:"numeric"},dh={year:"numeric",month:"short",day:"numeric"},ph={year:"numeric",month:"long",weekday:"long",day:"numeric"},Zr={hour:"numeric",minute:"numeric"},Tn={...Zr,second:"numeric"},XA={"short-date":mo,"short-date-short-time":{...mo,...Zr},"short-date-short-time-24":{...mo,...Zr,hour12:!1},"short-date-long-time":{...mo,...Tn},"short-date-long-time-24":{...mo,...Tn,hour12:!1},"short-date-le":mo,"short-date-le-short-time":{...mo,...Zr},"short-date-le-short-time-24":{...mo,...Zr,hour12:!1},"short-date-le-long-time":{...mo,...Tn},"short-date-le-long-time-24":{...mo,...Tn,hour12:!1},"long-month-day-year":ch,"long-month-day-year-short-time":{...ch,...Zr},"long-month-day-year-short-time-24":{...ch,...Zr,hour12:!1},"long-month-day-year-long-time":{...ch,...Tn},"long-month-day-year-long-time-24":{...ch,...Tn,hour12:!1},"day-short-month-year":dh,"day-short-month-year-short-time":{...dh,...Zr},"day-short-month-year-short-time-24":{...dh,...Zr,hour12:!1},"day-short-month-year-long-time":{...dh,...Tn},"day-short-month-year-long-time-24":{...dh,...Tn,hour12:!1},"long-date":ph,"long-date-short-time":{...ph,...Zr},"long-date-short-time-24":{...ph,...Zr,hour12:!1},"long-date-long-time":{...ph,...Tn},"long-date-long-time-24":{...ph,...Tn,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Zr,"long-time":Tn},vy=mi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});vy.apiValues;vy.toJSON.bind(vy);vy.fromJSON.bind(vy);const vY={ar:"ar-u-nu-latn-ca-gregory"};let q0=new WeakMap,n9=XA["short-date-short-time"];function wY(e){const t=e||n9;if(!q0.has(t)){const i=Or(),r=vY[Or()]||i;q0.set(t,new Intl.DateTimeFormat(r,t))}return q0.get(t)}function QA(e){return XA[e]||null}function Jo(e,t){return wY(t).format(e)}PA(()=>{q0=new WeakMap,n9=XA["short-date-short-time"]});const bY={ar:"ar-u-nu-latn"};let Y0=new WeakMap,o9={};function _Y(e){const t=e||o9;if(!Y0.has(t)){const i=Or(),r=bY[Or()]||i;Y0.set(t,new Intl.NumberFormat(r,e))}return Y0.get(t)}function s9(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Rl(e,t){return e===-0&&(e=0),_Y(t).format(e)}PA(()=>{Y0=new WeakMap,o9={}});var y2;let eu=y2=class extends V{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new y2({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?Jo(e,{...QA(this.dateFormat),...this.dateTimeFormatOptions}):Rl(e,s9(this))}formatRasterPixelValue(e){let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map(n=>this.format(Number(n))).join(i):e}};l([pe(gy)],eu.prototype,"dateFormat",void 0),l([c({type:Object,json:{read:!1}})],eu.prototype,"dateTimeFormatOptions",void 0),l([c({type:Boolean,json:{write:!0}})],eu.prototype,"digitSeparator",void 0),l([c({type:Qe,json:{write:!0}})],eu.prototype,"places",void 0),eu=y2=l([S("esri.popup.support.FieldInfoFormat")],eu);const Ld=eu;var m2;let Nn=m2=class extends V{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new m2({fieldName:this.fieldName,format:this.format?P(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};l([c({type:String,json:{write:!0}})],Nn.prototype,"fieldName",void 0),l([c({type:Ld,json:{write:!0}})],Nn.prototype,"format",void 0),l([c({type:Boolean,json:{write:!0,default:!1}})],Nn.prototype,"isEditable",void 0),l([c({type:String,json:{write:!0}})],Nn.prototype,"label",void 0),l([pe(new Se({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Nn.prototype,"stringFieldOption",void 0),l([c({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Nn.prototype,"statisticType",void 0),l([c({type:String,json:{write:!0}})],Nn.prototype,"tooltip",void 0),l([c({type:Boolean,json:{write:!0}})],Nn.prototype,"visible",void 0),Nn=m2=l([S("esri.popup.FieldInfo")],Nn);const Ky=Nn;var g2;let gs=g2=class extends Pc{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new g2(P({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};l([c({type:Object,json:{write:!0}})],gs.prototype,"attributes",void 0),l([c({type:String,json:{write:!0}})],gs.prototype,"description",void 0),l([c({type:[Ky]})],gs.prototype,"fieldInfos",void 0),l([X("fieldInfos")],gs.prototype,"writeFieldInfos",null),l([c({type:String,json:{write:!0}})],gs.prototype,"title",void 0),l([c({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],gs.prototype,"type",void 0),gs=g2=l([S("esri.popup.content.FieldsContent")],gs);const gp=gs;let tu=class extends V{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};l([c({type:String,json:{write:!0}})],tu.prototype,"altText",void 0),l([c({type:String,json:{write:!0}})],tu.prototype,"caption",void 0),l([c({type:String,json:{write:!0}})],tu.prototype,"title",void 0),l([c({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],tu.prototype,"type",void 0),tu=l([S("esri.popup.content.mixins.MediaInfo")],tu);const ex=tu;var v2;let Qc=v2=class extends se{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new v2({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};l([c()],Qc.prototype,"fieldName",void 0),l([c()],Qc.prototype,"tooltip",void 0),l([c()],Qc.prototype,"value",void 0),Qc=v2=l([S("esri.popup.content.support.ChartMediaInfoValueSeries")],Qc);const a9=Qc;var w2;let iu=w2=class extends V{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new w2({fields:P(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};l([c({type:[String],json:{write:!0}})],iu.prototype,"fields",void 0),l([c({type:String,json:{write:!0}})],iu.prototype,"normalizeField",void 0),l([c({type:[a9],json:{read:!1}})],iu.prototype,"series",void 0),l([c({type:String,json:{write:!0}})],iu.prototype,"tooltipField",void 0),iu=w2=l([S("esri.popup.content.support.ChartMediaInfoValue")],iu);const SY=iu;let Vh=class extends ex{constructor(e){super(e),this.type=null,this.value=null}};l([c({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Vh.prototype,"type",void 0),l([c({type:SY,json:{write:!0}})],Vh.prototype,"value",void 0),Vh=l([S("esri.popup.content.mixins.ChartMediaInfo")],Vh);const jv=Vh,zv=mi()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var b2;let K0=b2=class extends jv{constructor(e){super(e),this.type="bar-chart"}clone(){return new b2({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([c({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:zv.write}})],K0.prototype,"type",void 0),K0=b2=l([S("esri.popup.content.BarChartMediaInfo")],K0);const l9=K0;var _2;let Z0=_2=class extends jv{constructor(e){super(e),this.type="column-chart"}clone(){return new _2({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([c({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:zv.write}})],Z0.prototype,"type",void 0),Z0=_2=l([S("esri.popup.content.ColumnChartMediaInfo")],Z0);const u9=Z0;var S2;let jh=S2=class extends V{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new S2({linkURL:this.linkURL,sourceURL:this.sourceURL})}};l([c({type:String,json:{write:!0}})],jh.prototype,"linkURL",void 0),l([c({type:String,json:{write:!0}})],jh.prototype,"sourceURL",void 0),jh=S2=l([S("esri.popup.content.support.ImageMediaInfoValue")],jh);const TY=jh;var T2;let ed=T2=class extends ex{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new T2({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};l([c({type:Number,json:{write:!0}})],ed.prototype,"refreshInterval",void 0),l([c({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],ed.prototype,"type",void 0),l([c({type:TY,json:{write:!0}})],ed.prototype,"value",void 0),ed=T2=l([S("esri.popup.content.ImageMediaInfo")],ed);const c9=ed;var E2;let J0=E2=class extends jv{constructor(e){super(e),this.type="line-chart"}clone(){return new E2({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([c({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:zv.write}})],J0.prototype,"type",void 0),J0=E2=l([S("esri.popup.content.LineChartMediaInfo")],J0);const d9=J0;var A2;let X0=A2=class extends jv{constructor(e){super(e),this.type="pie-chart"}clone(){return new A2({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};l([c({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:zv.write}})],X0.prototype,"type",void 0),X0=A2=l([S("esri.popup.content.PieChartMediaInfo")],X0);const p9=X0,h9={base:ex,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":l9,"column-chart":u9,"line-chart":d9,"pie-chart":p9,image:c9}};var x2;let Rn=x2=class extends Pc{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?c9.fromJSON(t):t.type==="barchart"?l9.fromJSON(t):t.type==="columnchart"?u9.fromJSON(t):t.type==="linechart"?d9.fromJSON(t):t.type==="piechart"?p9.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new x2(P({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};l([c()],Rn.prototype,"activeMediaInfoIndex",void 0),l([c({type:Object,json:{write:!0}})],Rn.prototype,"attributes",void 0),l([c({type:String,json:{write:!0}})],Rn.prototype,"description",void 0),l([c({types:[h9]})],Rn.prototype,"mediaInfos",void 0),l([K("mediaInfos")],Rn.prototype,"readMediaInfos",null),l([X("mediaInfos")],Rn.prototype,"writeMediaInfos",null),l([c({type:String,json:{write:!0}})],Rn.prototype,"title",void 0),l([c({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Rn.prototype,"type",void 0),Rn=x2=l([S("esri.popup.content.MediaContent")],Rn);const wy=Rn;var C2;let zh=C2=class extends Pc{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new C2({text:this.text})}};l([c({type:String,json:{write:!0}})],zh.prototype,"text",void 0),l([c({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],zh.prototype,"type",void 0),zh=C2=l([S("esri.popup.content.TextContent")],zh);const vp=zh,EY={base:null,key:"type",typeMap:{attachment:my,media:wy,text:vp,expression:JA,field:gp}};var I2;let ru=I2=class extends V{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new I2({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([c({type:String,json:{write:!0}})],ru.prototype,"name",void 0),l([c({type:String,json:{write:!0}})],ru.prototype,"title",void 0),l([c({type:String,json:{write:!0}})],ru.prototype,"expression",void 0),l([c({type:["string","number"],json:{write:!0}})],ru.prototype,"returnType",void 0),ru=I2=l([S("esri.popup.ExpressionInfo")],ru);const f9=ru;var M2;let Hh=M2=class extends V{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new M2({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};l([c({type:Boolean,json:{write:!0}})],Hh.prototype,"returnTopmostRaster",void 0),l([c({type:Boolean,json:{write:!0}})],Hh.prototype,"showNoDataRecords",void 0),Hh=M2=l([S("esri.popup.LayerOptions")],Hh);const AY=Hh;var N2;let Gh=N2=class extends V{constructor(e){super(e),this.field=null,this.order=null}clone(){return new N2({field:this.field,order:this.order})}};l([c({type:String,json:{write:!0}})],Gh.prototype,"field",void 0),l([c({type:["asc","desc"],json:{write:!0}})],Gh.prototype,"order",void 0),Gh=N2=l([S("esri.popup.support.RelatedRecordsInfoFieldOrder")],Gh);const y9=Gh;var R2;let Wh=R2=class extends V{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new R2({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?P(this.orderByFields):null})}};l([c({type:Boolean,json:{write:!0}})],Wh.prototype,"showRelatedRecords",void 0),l([c({type:[y9],json:{write:!0}})],Wh.prototype,"orderByFields",void 0),Wh=R2=l([S("esri.popup.RelatedRecordsInfo")],Wh);const xY=Wh;var P2;let Pn=P2=class extends Vv(se){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new P2({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};l([c()],Pn.prototype,"active",void 0),l([c()],Pn.prototype,"className",void 0),l([c()],Pn.prototype,"disabled",void 0),l([c()],Pn.prototype,"id",void 0),l([c()],Pn.prototype,"indicator",void 0),l([c()],Pn.prototype,"title",void 0),l([c()],Pn.prototype,"type",void 0),l([c()],Pn.prototype,"visible",void 0),Pn=P2=l([S("esri.support.actions.ActionBase")],Pn);const Hv=Pn;var $2;let Q0=$2=class extends Hv{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new $2({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};l([c()],Q0.prototype,"image",void 0),Q0=$2=l([S("esri.support.Action.ActionButton")],Q0);const Vp=Q0;var D2;let qh=D2=class extends Hv{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new D2({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};l([c()],qh.prototype,"image",void 0),l([c()],qh.prototype,"value",void 0),qh=D2=l([S("esri.support.Action.ActionToggle")],qh);const m9=qh;var L2;const CY=he.ofType({key:"type",defaultKeyValue:"button",base:Hv,typeMap:{button:Vp,toggle:m9}}),IY={base:Pc,key:"type",typeMap:{media:wy,custom:gY,text:vp,attachments:my,fields:gp,expression:JA}},g9="esri.PopupTemplate",MY=W.getLogger(g9),NY=["attachments","fields","media","text","expression"];let Dt=L2=class extends V{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>Yo(IY,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||ia(e)?e:(MY.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,i,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(n=>NY.includes(n.type)).map(n=>n&&n.toJSON(r)),t.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(t):n.type==="media"?this._writeMediaContent(n,t):n.type==="text"&&this._writeTextContent(n,t)})):t.description=e}writeFieldInfos(e,t,i,r){const{content:n}=this,o=Array.isArray(n)?n:null;if(e){const s=o?o.filter(u=>u.type==="fields"):[],a=s.length&&s.every(u=>{var d;return(d=u.fieldInfos)==null?void 0:d.length});t.fieldInfos=e.filter(Boolean).map(u=>{const d=u.toJSON(r);return a&&(d.visible=!1),d})}if(o)for(const s of o)s.type==="fields"&&this._writeFieldsContent(s,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?P(e.toArray()):[];return new L2({actions:t,content:Array.isArray(this.content)?P(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?P(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?P(this.fieldInfos):null,layerOptions:this.layerOptions?P(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?P(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?P(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),yy(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=P(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const n=t.fieldInfos.find(o=>o.fieldName.toLowerCase()===r.fieldName.toLowerCase());n?n.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=P(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:i}){const r={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!t||r.mediaInfos||(n.mediaInfos=t,r.mediaInfos=!0),wy.fromJSON(n)):n.type==="text"?(n.text||!e||r.description||(n.text=e,r.description=!0),vp.fromJSON(n)):n.type==="attachments"?my.fromJSON(n):n.type==="fields"?gp.fromJSON(n):n.type==="expression"?JA.fromJSON(n):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i}){const r=[];return e?r.push(new vp({text:e})):r.push(new gp),Array.isArray(t)&&t.length&&r.push(wy.fromJSON({mediaInfos:t})),i&&r.push(my.fromJSON({displayType:"auto"})),r.length?r:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((r,n)=>[...r,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,n=r||{},{fields:o=[],normalizeField:s,tooltipField:a,sourceURL:u,linkURL:d}=n,h=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(u),...this._extractFieldNames(d),...o];return s&&h.push(s),a&&h.push(a),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>Xi(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.includes("relationships/")&&!t.includes("expression/")):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,n=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const r=/\{(\w+):.+\}/,n=i.filter(o=>!(o.indexOf("{relationships/")===0||o.indexOf("{expression/")===0)).map(o=>o.replace(r,"{$1}"));return n?n.map(o=>o.slice(1,-1)):[]}};l([c({type:CY})],Dt.prototype,"actions",void 0),l([c()],Dt.prototype,"content",void 0),l([Fe("content")],Dt.prototype,"castContent",null),l([K("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],Dt.prototype,"readContent",null),l([X("content",{popupElements:{type:he.ofType(EY)},showAttachments:{type:Boolean},mediaInfos:{type:he.ofType(h9)},description:{type:String}})],Dt.prototype,"writeContent",null),l([c({type:[f9],json:{write:!0}})],Dt.prototype,"expressionInfos",void 0),l([c({type:[Ky]})],Dt.prototype,"fieldInfos",void 0),l([X("fieldInfos")],Dt.prototype,"writeFieldInfos",null),l([c({type:AY})],Dt.prototype,"layerOptions",void 0),l([X("layerOptions")],Dt.prototype,"writeLayerOptions",null),l([c({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Dt.prototype,"lastEditInfoEnabled",void 0),l([c()],Dt.prototype,"outFields",void 0),l([c()],Dt.prototype,"overwriteActions",void 0),l([c()],Dt.prototype,"returnGeometry",void 0),l([c({json:{type:String}})],Dt.prototype,"title",void 0),l([X("title")],Dt.prototype,"writeTitle",null),l([c({type:xY,json:{write:!0}})],Dt.prototype,"relatedRecordsInfo",void 0),Dt=L2=l([S(g9)],Dt);const Ol=Dt,PI=new Se({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let RY=0,td=class extends V{constructor(e){super(e),this.id="sym"+RY++,this.type=null,this.color=new ie([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};l([c({type:PI.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:PI.write}}})],td.prototype,"type",void 0),l([c({type:ie,json:{write:{allowNull:!0}}})],td.prototype,"color",void 0),l([K("color")],td.prototype,"readColor",null),td=l([S("esri.symbols.Symbol")],td);const vr=td;var O2;let Ia=O2=class extends vr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(n=>{const o=n.valueExpressionInfo;return Xi(e,t,o.expression)});await Promise.all(r)}}}clone(){return new O2({data:P(this.data)})}hash(){return lA(JSON.stringify(this.data)).toString()}};l([c({json:{write:!1}})],Ia.prototype,"color",void 0),l([c({json:{write:!0}})],Ia.prototype,"data",void 0),l([K("data",["symbol"])],Ia.prototype,"readData",null),l([X("data",{})],Ia.prototype,"writeData",null),l([pe({CIMSymbolReference:"cim"},{readOnly:!0})],Ia.prototype,"type",void 0),Ia=O2=l([S("esri.symbols.CIMSymbol")],Ia);const Zy=Ia;let id=class extends V{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};l([c({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],id.prototype,"enabled",void 0),l([X("enabled")],id.prototype,"writeEnabled",null),l([c({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],id.prototype,"type",void 0),id=l([S("esri.symbols.Symbol3DLayer")],id);const is=id,PY=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,$Y="screenUtils.toPt: input not recognized!",v9=96;function w9(e){return e?e/72*v9:0}function Xo(e){return e?72*e/v9:0}function je(e){if(typeof e=="string"){const t=e.match(PY);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",o=r==="px"?Xo(i):i;return n?-o:o}return console.warn($Y),null}return e}function dr(e=0,t=0){return{x:e,y:t}}function p1e(e=0,t=0){return[e,t]}function DY(e,t){const i=t.transparency!=null?py(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new ie([r[0]||0,r[1]||0,r[2]||0,i]):null}function LY(e,t){t.color=e.toJSON().slice(0,3);const i=Uv(e.a);i!==0&&(t.transparency=i)}const kl={type:ie,json:{type:[Qe],default:null,read:{source:["color","transparency"],reader:DY},write:{target:{color:{type:[Qe]},transparency:{type:Qe}},writer:LY}}},Qo={type:Number,cast:je,json:{write:!0}};let nu=class extends V{constructor(e){super(e),this.color=new ie([0,0,0,1]),this.extensionLength=0,this.size=Xo(1)}clone(){}cloneProperties(){return{color:P(this.color),size:this.size,extensionLength:this.extensionLength}}};l([c({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],nu.prototype,"type",void 0),l([c(kl)],nu.prototype,"color",void 0),l([c({...Qo,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],nu.prototype,"extensionLength",void 0),l([c(Qo)],nu.prototype,"size",void 0),nu=l([S("esri.symbols.edges.Edges3D")],nu);const tx=nu;var k2;let eg=k2=class extends tx{constructor(e){super(e),this.type="sketch"}clone(){return new k2(this.cloneProperties())}};l([pe({sketch:"sketch"},{readOnly:!0})],eg.prototype,"type",void 0),eg=k2=l([S("esri.symbols.edges.SketchEdges3D")],eg);const OY=eg;var F2;let tg=F2=class extends tx{constructor(e){super(e),this.type="solid"}clone(){return new F2(this.cloneProperties())}};l([pe({solid:"solid"},{readOnly:!0})],tg.prototype,"type",void 0),tg=F2=l([S("esri.symbols.support.SolidEdges3D")],tg);const kY=tg,b9={types:{key:"type",base:tx,typeMap:{solid:kY,sketch:OY}},json:{write:!0}};var B2;let kr=B2=class extends V{constructor(e){super(e),this.color=null}clone(){const e={color:T(this.color)?this.color.clone():null};return new B2(e)}};l([c(kl)],kr.prototype,"color",void 0),kr=B2=l([S("esri.symbols.support.Symbol3DMaterial")],kr);var U2;let Ma=U2=class extends is{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new U2({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:T(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};l([pe({Extrude:"extrude"},{readOnly:!0})],Ma.prototype,"type",void 0),l([c({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ma.prototype,"size",void 0),l([c({type:kr,json:{write:!0}})],Ma.prototype,"material",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ma.prototype,"castShadows",void 0),l([c(b9)],Ma.prototype,"edges",void 0),Ma=U2=l([S("esri.symbols.ExtrudeSymbol3DLayer")],Ma);const _9=Ma;let Yh=class extends vr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};l([pe({esriSLS:"simple-line"},{readOnly:!0})],Yh.prototype,"type",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Yh.prototype,"width",void 0),Yh=l([S("esri.symbols.LineSymbol")],Yh);const FY=Yh,BY=["begin","end","begin-end"],S9=["arrow","circle","square","diamond","cross","x"];var V2;let So=V2=class extends V{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new V2({color:P(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};l([c({type:["begin","end","begin-end"],json:{write:!0}})],So.prototype,"placement",void 0),l([pe({"line-marker":"line-marker"},{readOnly:!0}),c({json:{origins:{"web-map":{write:!1}}}})],So.prototype,"type",void 0),l([c({type:S9})],So.prototype,"style",void 0),l([X("style")],So.prototype,"writeStyle",null),l([c({type:ie,value:null,json:{write:{allowNull:!0}}})],So.prototype,"color",null),l([K("color")],So.prototype,"readColor",null),l([X("color")],So.prototype,"writeColor",null),So=V2=l([S("esri.symbols.LineSymbolMarker")],So);const UY=So;var j2;const rb=new Se({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let vs=j2=class extends FY{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,n,o){if(e&&typeof e!="string")return e;const s={};return e!=null&&(s.style=e),t!=null&&(s.color=t),i!=null&&(s.width=je(i)),r!=null&&(s.cap=r),n!=null&&(s.join=n),o!=null&&(s.miterLimit=je(o)),s}clone(){var e;return new j2({color:P(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};l([pe({esriSLS:"simple-line"},{readOnly:!0})],vs.prototype,"type",void 0),l([c({type:rb.apiValues,json:{read:rb.read,write:rb.write}})],vs.prototype,"style",void 0),l([c({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],vs.prototype,"cap",void 0),l([c({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],vs.prototype,"join",void 0),l([c({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":UY}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],vs.prototype,"marker",void 0),l([c({type:Number,json:{read:!1,write:!1}})],vs.prototype,"miterLimit",void 0),vs=j2=l([S("esri.symbols.SimpleLineSymbol")],vs);const Ur=vs;let Kh=class extends vr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};l([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ur}},json:{default:null,write:!0}})],Kh.prototype,"outline",void 0),l([c({type:["simple-fill","picture-fill"],readOnly:!0})],Kh.prototype,"type",void 0),Kh=l([S("esri.symbols.FillSymbol")],Kh);const T9=Kh;let ig=class extends V{constructor(e){super(e)}clone(){}};l([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ig.prototype,"type",void 0),ig=l([S("esri.symbols.patterns.LinePattern3D")],ig);const E9=ig,VY=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var z2;const jY=mi()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Zh=z2=class extends E9{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new z2(e)}};l([c({type:["style"]})],Zh.prototype,"type",void 0),l([pe(jY),c({type:VY})],Zh.prototype,"style",void 0),Zh=z2=l([S("esri.symbols.patterns.LineStylePattern3D")],Zh);const ix=Zh;let rg=class extends V{constructor(e){super(e)}clone(){}};l([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],rg.prototype,"type",void 0),rg=l([S("esri.symbols.patterns.Pattern3D")],rg);const A9=rg,zY=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var H2;let Jh=H2=class extends A9{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new H2(e)}};l([c({type:["style"]})],Jh.prototype,"type",void 0),l([c({type:zY,json:{read:!0,write:!0}})],Jh.prototype,"style",void 0),Jh=H2=l([S("esri.symbols.patterns.StylePattern3D")],Jh);const x9=Jh,HY={types:{key:"type",base:A9,typeMap:{style:x9}},json:{write:!0}},C9={types:{key:"type",base:E9,typeMap:{style:ix}},json:{write:!0}},Ff=new ie("white");new ie("black");const GY=new ie([255,255,255,0]);function WY(e){return e.r===0&&e.g===0&&e.b===0}var G2;let Bf=G2=class extends kr{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:T(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new G2(e)}};l([pe({multiply:"multiply",replace:"replace",tint:"tint"})],Bf.prototype,"colorMixMode",void 0),Bf=G2=l([S("esri.symbols.support.Symbol3DFillMaterial")],Bf);function Pl(e=JY){return[e[0],e[1],e[2],e[3]]}function h1e(e){return[e[0],e[1],e[2],e[3]]}function qY(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function f1e(e,t,i,r,n=Pl()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function y1e(e,t=Pl()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function m1e(e,t){return new Oe({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function g1e(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function YY(e){return O(e)||e[0]>=e[2]?0:e[2]-e[0]}function KY(e){return e[1]>=e[3]?0:e[3]-e[1]}function v1e(e){return YY(e)*KY(e)}function w1e(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function b1e(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function _1e(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function ZY(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function S1e(e){return e?qY(e,$I):Pl($I)}const $I=[1/0,1/0,-1/0,-1/0],JY=[0,0,0,0];function rx(e=iK){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function nx(e,t,i,r,n,o,s=rx()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s[4]=n,s[5]=o,s}function T1e(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Oe(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function E1e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function A1e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function XY(e){return e[0]>=e[3]?0:e[3]-e[0]}function QY(e){return e[1]>=e[4]?0:e[4]-e[1]}function eK(e){return e[2]>=e[5]?0:e[5]-e[2]}function x1e(e,t=[0,0,0]){return t[0]=XY(e),t[1]=QY(e),t[2]=eK(e),t}function C1e(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function I1e(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function tK(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function M1e(e){return e?tK(e,LI):rx(LI)}function N1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function DI(e){return e.length===6}function R1e(e,t,i){if(O(e)||O(t))return e===t;if(!DI(e)||!DI(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const LI=[1/0,1/0,1/0,-1/0,-1/0,-1/0],iK=[0,0,0,0,0,0];rx();function P1e(e,{isPrimitive:t,width:i,depth:r,height:n}){const o=t?10:1;if(i==null&&n==null&&r==null)return[o*e[0],o*e[1],o*e[2]];const s=Fp(i,r,n);let a;for(let u=0;u<3;u++){const d=s[u];if(d!=null){a=d/e[u];break}}for(let u=0;u<3;u++)s[u]==null&&(s[u]=e[u]*a);return s}const rK=nx(-.5,-.5,-.5,.5,.5,.5),nK=nx(-.5,-.5,0,.5,.5,1),oK=nx(-.5,-.5,0,.5,.5,.5);function $1e(e){switch(e){case"sphere":case"cube":case"diamond":return rK;case"cylinder":case"cone":case"inverted-cone":return nK;case"tetrahedron":return oK;default:return}}const ox=["butt","square","round"],sK=[...ox,"none"],I9=["miter","bevel","round"];var W2;let ou=W2=class extends V{constructor(e){super(e),this.color=new ie([0,0,0,1]),this.size=Xo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:T(this.color)?this.color.clone():null,size:this.size,pattern:T(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new W2(e)}};l([c(kl)],ou.prototype,"color",void 0),l([c(Qo)],ou.prototype,"size",void 0),l([c(C9)],ou.prototype,"pattern",void 0),l([c({type:ox,json:{default:"butt",write:{overridePolicy(){return{enabled:T(this.pattern)}}}}})],ou.prototype,"patternCap",void 0),ou=W2=l([S("esri.symbols.support.Symbol3DOutline")],ou);var ng;let ws=ng=class extends is{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:T(this.edges)?this.edges.clone():null,enabled:this.enabled,material:T(this.material)?this.material.clone():null,pattern:T(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:T(this.outline)?this.outline.clone():null};return new ng(e)}static fromSimpleFillSymbol(e){var r,n,o,s,a,u;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new ix({style:e.outline.style}):null,i={size:(n=(r=e.outline)==null?void 0:r.width)!=null?n:0,color:((s=(o=e.outline)==null?void 0:o.color)!=null?s:Ff).clone(),pattern:t};return t&&((a=e.outline)==null?void 0:a.cap)&&(i.patternCap=e.outline.cap),new ng({material:new Bf({color:((u=e.color)!=null?u:GY).clone()}),pattern:e.style&&e.style!=="solid"?new x9({style:e.style}):null,outline:i})}};l([pe({Fill:"fill"},{readOnly:!0})],ws.prototype,"type",void 0),l([c({type:Bf,json:{write:!0}})],ws.prototype,"material",void 0),l([c(HY)],ws.prototype,"pattern",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ws.prototype,"castShadows",void 0),l([c({type:ou,json:{write:!0}})],ws.prototype,"outline",void 0),l([c(b9)],ws.prototype,"edges",void 0),ws=ng=l([S("esri.symbols.FillSymbol3DLayer")],ws);const Gv=ws,aK=["none","underline","line-through"],lK=["normal","italic","oblique"],uK=["normal","lighter","bold","bolder"],M9={type:Number,cast:e=>{const t=sn(e);return t===0?1:yr(t,.1,4)},nonNullable:!0},cK=["left","right","center"],dK=["baseline","top","middle","bottom"],N9={type:cK,nonNullable:!0},R9={type:dK,nonNullable:!0};var q2;let bs=q2=class extends V{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return je(e)}clone(){return new q2({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};l([c({type:aK,json:{default:"none",write:!0}})],bs.prototype,"decoration",void 0),l([c({type:String,json:{write:!0}})],bs.prototype,"family",void 0),l([c({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],bs.prototype,"size",void 0),l([Fe("size")],bs.prototype,"castSize",null),l([c({type:lK,json:{default:"normal",write:!0}})],bs.prototype,"style",void 0),l([c({type:uK,json:{default:"normal",write:!0}})],bs.prototype,"weight",void 0),bs=q2=l([S("esri.symbols.Font")],bs);const Wv=bs;function jp(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=to(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=AA(e,t.portalItem.itemUrl);hK.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return Y2(e,t&&t.portal)}function Jy(e,t,i=by.YES){if(!e)return e;!Gi(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=to(e);if(t){const n=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(n){const o=Y2(n,t.portal);r=AA(Y2(r,t.portal),o,o),r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=ax(r,t&&t.portal),Gi(r)&&(r=Lr(r)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!Gi(r)&&!Nc(r)&&i===by.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function sx(e,t,i){return jp(e,i)}function _c(e,t,i,r){const n=Jy(e,r);n!==void 0&&(t[i]=n)}const pK=/\/items\/([^\/]+)\/resources\//,hK=/^\.\/resources\//;function fK(e){const t=T(e)?e.match(pK):null;return T(t)?t[1]:null}function ax(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?W_(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function Y2(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=SA();return cy(r,`${r.scheme}://${i}`)?W_(e,t.portalHostname,i):W_(e,i,t.portalHostname)}var by;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(by||(by={}));const D1e=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:jp,toJSON:Jy,read:sx,write:_c,itemIdFromResourceUrl:fK,ensureMainOnlineDomain:ax,get MarkKeep(){return by}},Symbol.toStringTag,{value:"Module"}));var K2;const yK=mi()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let su=K2=class extends V{constructor(e){super(e)}readHref(e,t,i){return e?jp(e,i):t.dataURI}writeHref(e,t,i,r){e&&(Nc(e)?t.dataURI=e:(t.href=Jy(e,r),Gi(t.href)&&(t.href=Lr(t.href))))}clone(){return new K2({href:this.href,primitive:this.primitive})}};l([c({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],su.prototype,"href",void 0),l([K("href")],su.prototype,"readHref",null),l([X("href",{href:{type:String},dataURI:{type:String}})],su.prototype,"writeHref",null),l([pe(yK)],su.prototype,"primitive",void 0),su=K2=l([S("esri.symbols.support.IconSymbol3DLayerResource")],su);var Z2;let Od=Z2=class extends se{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new Z2({x:this.x,y:this.y})}};l([c({type:Number})],Od.prototype,"x",void 0),l([c({type:Number})],Od.prototype,"y",void 0),Od=Z2=l([S("esri.symbols.support.Symbol3DAnchorPosition2D")],Od);var J2;let Xh=J2=class extends V{constructor(e){super(e),this.color=new ie([0,0,0,1]),this.size=Xo(1)}clone(){const e={color:T(this.color)?this.color.clone():null,size:this.size};return new J2(e)}};l([c(kl)],Xh.prototype,"color",void 0),l([c(Qo)],Xh.prototype,"size",void 0),Xh=J2=l([S("esri.symbols.support.Symbol3DIconOutline")],Xh);var rd;const mK=W.getLogger("esri.symbols.IconSymbol3DLayer");let To=rd=class extends is{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new rd({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:T(this.material)?this.material.clone():null,outline:T(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Ff,i=OI(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Ff).clone()}:null;return new rd({size:e.size,resource:{primitive:vK(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||WY(e.color)?Ff:e.color,i=OI(e);return new rd({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new rd({resource:{href:k5({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function OI(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=kI(e.xoffset),n=kI(e.yoffset);return(r||n)&&t&&i?{x:-r/t,y:n/i}:null}function kI(e){return isFinite(e)?e:0}l([c({type:kr,json:{write:!0}})],To.prototype,"material",void 0),l([c({type:su,json:{write:!0}})],To.prototype,"resource",void 0),l([pe({Icon:"icon"},{readOnly:!0})],To.prototype,"type",void 0),l([c(Qo)],To.prototype,"size",void 0),l([pe({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),c({json:{default:"center"}})],To.prototype,"anchor",void 0),l([c({type:Od,json:{type:[Number],read:{reader:e=>new Od({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],To.prototype,"anchorPosition",void 0),l([c({type:Xh,json:{write:!0}})],To.prototype,"outline",void 0),To=rd=l([S("esri.symbols.IconSymbol3DLayer")],To);const gK={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function vK(e){return gK[e]||(mK.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Hu=To;W.getLogger("esri.core.Clonable");const wr=e=>{let t=class extends e{clone(){var u;const i=UV(Ni(this),"unable to clone instance of non-accessor class"),r=i.metadatas,n=i.store,o={},s=new Map;for(const d in r){const h=r[d],f=n==null?void 0:n.originOf(d),y=h.clonable;if(h.readOnly||y===!1||f!==De.USER&&f!==De.DEFAULTS&&f!==De.WEB_MAP&&f!==De.WEB_SCENE)continue;const m=this[d];let g=null;g=typeof y=="function"?y(m):y==="reference"?m:C_(m),m!=null&&g==null||(f===De.DEFAULTS?s.set(d,g):o[d]=g)}const a=new(Object.getPrototypeOf(this)).constructor(o);if(s.size){const d=(u=Ni(a))==null?void 0:u.store;if(d)for(const[h,f]of s)d.set(h,f,De.DEFAULTS)}return a}};return t=l([S("esri.core.Clonable")],t),t};let FI=class extends wr(se){};FI=l([S("esri.core.Clonable")],FI);let au=class extends wr(V){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return T(e)&&e.placement===this.placement&&e.style===this.style&&(O(this.color)&&O(e.color)||T(this.color)&&T(e.color)&&this.color.toJSON()===e.color.toJSON())}};l([c({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],au.prototype,"type",void 0),l([c({type:BY,json:{default:"begin-end",write:!0}})],au.prototype,"placement",void 0),l([c({type:S9,json:{default:"arrow",write:!0}})],au.prototype,"style",void 0),l([c({type:ie,json:{type:[Qe],default:null,write:!0}})],au.prototype,"color",void 0),au=l([S("esri.symbols.LineStyleMarker3D")],au);const X2=au;var og;let Eo=og=class extends is{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Xo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:T(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:T(this.pattern)?this.pattern.clone():null,marker:T(this.marker)?this.marker.clone():null};return new og(e)}static fromSimpleLineSymbol(e){var i,r,n;const t={enabled:!0,size:(i=e.width)!=null?i:Xo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new ix({style:e.style}):null,material:new kr({color:(e.color||Ff).clone()}),marker:e.marker?new X2({placement:e.marker.placement,style:e.marker.style,color:(n=(r=e.marker.color)==null?void 0:r.clone())!=null?n:null}):null};return new og(t)}};l([c({type:kr,json:{write:!0}})],Eo.prototype,"material",void 0),l([pe({Line:"line"},{readOnly:!0})],Eo.prototype,"type",void 0),l([c({type:I9,json:{write:!0,default:"miter"}})],Eo.prototype,"join",void 0),l([c({type:ox,json:{write:!0,default:"butt"}})],Eo.prototype,"cap",void 0),l([c(Qo)],Eo.prototype,"size",void 0),l([c(C9)],Eo.prototype,"pattern",void 0),l([c({types:{key:"type",base:X2,typeMap:{style:X2}},json:{write:!0}})],Eo.prototype,"marker",void 0),Eo=og=l([S("esri.symbols.LineSymbol3DLayer")],Eo);const Xy=Eo;var Q2;const wK=mi()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Qh=Q2=class extends V{clone(){return new Q2({href:this.href,primitive:this.primitive})}};l([c({type:String,json:{read:sx,write:_c}})],Qh.prototype,"href",void 0),l([pe(wK)],Qh.prototype,"primitive",void 0),Qh=Q2=l([S("esri.symbols.support.ObjectSymbol3DLayerResource")],Qh);var eS;let Ru=eS=class extends se{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new eS({x:this.x,y:this.y,z:this.z})}};l([c({type:Number})],Ru.prototype,"x",void 0),l([c({type:Number})],Ru.prototype,"y",void 0),l([c({type:Number})],Ru.prototype,"z",void 0),Ru=eS=l([S("esri.symbols.support.Symbol3DAnchorPosition3D")],Ru);var tS;let bi=tS=class extends is{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new tS({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:T(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};l([c({type:kr,json:{write:!0}})],bi.prototype,"material",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],bi.prototype,"castShadows",void 0),l([c({type:Qh,json:{write:!0}})],bi.prototype,"resource",void 0),l([pe({Object:"object"},{readOnly:!0})],bi.prototype,"type",void 0),l([c({type:Number,json:{write:!0}})],bi.prototype,"width",void 0),l([c({type:Number,json:{write:!0}})],bi.prototype,"height",void 0),l([c({type:Number,json:{write:!0}})],bi.prototype,"depth",void 0),l([pe({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),c({json:{default:"origin"}})],bi.prototype,"anchor",void 0),l([c({type:Ru,json:{type:[Number],read:{reader:e=>new Ru({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],bi.prototype,"anchorPosition",void 0),l([c({type:Number,json:{write:!0}})],bi.prototype,"heading",void 0),l([c({type:Number,json:{write:!0}})],bi.prototype,"tilt",void 0),l([c({type:Number,json:{write:!0}})],bi.prototype,"roll",void 0),l([c({readOnly:!0})],bi.prototype,"isPrimitive",null),bi=tS=l([S("esri.symbols.ObjectSymbol3DLayer")],bi);const lx=bi;var iS;let Li=iS=class extends is{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new iS({enabled:this.enabled,material:T(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};l([c({type:kr,json:{write:!0}})],Li.prototype,"material",void 0),l([c({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Li.prototype,"castShadows",void 0),l([pe({Path:"path"},{readOnly:!0})],Li.prototype,"type",void 0),l([c({type:["circle","quad"],json:{write:!0,default:"circle"}})],Li.prototype,"profile",void 0),l([c({type:I9,json:{write:!0,default:"miter"}})],Li.prototype,"join",void 0),l([c({type:sK,json:{write:!0,default:"butt"}})],Li.prototype,"cap",void 0),l([c({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Li.prototype,"width",void 0),l([K("width",["width","size","height"])],Li.prototype,"readWidth",null),l([c({type:Number,json:{write:!0}})],Li.prototype,"height",void 0),l([K("height",["height","size","width"])],Li.prototype,"readHeight",null),l([c({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Li.prototype,"anchor",void 0),l([c({type:["heading","all"],json:{write:!0,default:"all"}})],Li.prototype,"profileRotation",void 0),Li=iS=l([S("esri.symbols.PathSymbol3DLayer")],Li);const ux=Li;var rS;let kd=rS=class extends V{constructor(){super(...arguments),this.color=new ie([0,0,0,1]),this.size=0}clone(){const e={color:P(this.color),size:this.size};return new rS(e)}};l([c(kl)],kd.prototype,"color",void 0),l([c(Qo)],kd.prototype,"size",void 0),kd=rS=l([S("esri.symbols.support.Symbol3DHalo")],kd);let Uf=class extends wr(V){constructor(e){super(e),this.color=null}};l([c(kl)],Uf.prototype,"color",void 0),Uf=l([S("esri.symbols.support.Symbol3DTextBackground")],Uf);var sg;let er=sg=class extends is{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){T(e)&&T(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const n={...r,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return T(this._userSize)?this._userSize:T(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,T(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new sg({enabled:this.enabled,font:this.font&&P(this.font),halo:this.halo&&P(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:T(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:P(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new sg({font:T(e.font)?e.font.clone():new Wv,halo:bK(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new kr({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Uf({color:e.backgroundColor.clone()}):null})}};function bK(e,t){return e&&t>0?new kd({color:P(e),size:t}):null}l([c({type:Wv,json:{write:!0}})],er.prototype,"font",null),l([X("font")],er.prototype,"writeFont",null),l([c({type:kd,json:{write:!0}})],er.prototype,"halo",void 0),l([c({...N9,json:{default:"center",write:!0}})],er.prototype,"horizontalAlignment",void 0),l([c({...M9,json:{default:1,write:!0}})],er.prototype,"lineHeight",void 0),l([c({type:kr,json:{write:!0}})],er.prototype,"material",void 0),l([c({type:Uf,json:{write:!0}})],er.prototype,"background",void 0),l([c(Qo)],er.prototype,"size",null),l([c({type:String,json:{write:!0}})],er.prototype,"text",void 0),l([pe({Text:"text"},{readOnly:!0})],er.prototype,"type",void 0),l([c({...R9,json:{default:"baseline",write:!0}})],er.prototype,"verticalAlignment",void 0),er=sg=l([S("esri.symbols.TextSymbol3DLayer")],er);const zp=er;var nS;let Na=nS=class extends is{constructor(e){super(e),this.color=oS.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new nS({color:P(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};l([c({type:ie,nonNullable:!0,json:{type:[Qe],write:(e,t,i)=>t[i]=e.toArray(ie.AlphaMode.UNLESS_OPAQUE),default:()=>oS.clone(),defaultEquals:e=>e.toCss(!0)===oS.toCss(!0)}})],Na.prototype,"color",void 0),l([pe({Water:"water"},{readOnly:!0})],Na.prototype,"type",void 0),l([c({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Na.prototype,"waterbodySize",void 0),l([c({type:Number,json:{write:!0,default:null}})],Na.prototype,"waveDirection",void 0),l([c({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Na.prototype,"waveStrength",void 0),Na=nS=l([S("esri.symbols.WaterSymbol3DLayer")],Na);const oS=new ie([0,119,190]),P9=Na;var sS;let lu=sS=class extends se{constructor(){super(...arguments),this.portal=null}clone(){return new sS({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};l([c({type:String})],lu.prototype,"name",void 0),l([c({type:String})],lu.prototype,"styleUrl",void 0),l([c({type:String})],lu.prototype,"styleName",void 0),l([c({type:Kt})],lu.prototype,"portal",void 0),lu=sS=l([S("esri.symbols.support.StyleOrigin")],lu);const aS=lu;var lS;let Vf=lS=class extends se{clone(){return new lS({url:this.url})}};l([c({type:String})],Vf.prototype,"url",void 0),Vf=lS=l([S("esri.symbols.support.Thumbnail")],Vf);const $9={icon:Hu,object:lx,line:Xy,path:ux,fill:Gv,extrude:_9,text:zp,water:P9},_K=he.ofType({base:is,key:"type",typeMap:$9,errorContext:"symbol-layer"}),SK=W.getLogger("esri.symbols.Symbol3D");let Ao=class extends vr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||he;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.initialized&&SK.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){hc(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const r=jp(e.styleUrl,i);return new aS({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new aS({portal:i&&i.portal||Kt.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new Zi("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let n=Jy(e.styleUrl,r);Gi(n)&&(n=Lr(n)),t.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!D5(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new Zi("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof is||e&&$9[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};l([c({json:{read:!1,write:!1}})],Ao.prototype,"color",null),l([c({type:_K,nonNullable:!0,json:{write:!0}}),Fe(_5)],Ao.prototype,"symbolLayers",null),l([c({type:aS})],Ao.prototype,"styleOrigin",void 0),l([K("styleOrigin")],Ao.prototype,"readStyleOrigin",null),l([X("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Ao.prototype,"writeStyleOrigin",null),l([c({type:Vf,json:{read:!1}})],Ao.prototype,"thumbnail",void 0),l([c({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Ao.prototype,"type",void 0),Ao=l([S("esri.symbols.Symbol3D")],Ao);const Hp=Ao;let ef=class extends V{constructor(e){super(e),this.visible=!0}clone(){}};l([c({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],ef.prototype,"type",void 0),l([c({readOnly:!0})],ef.prototype,"visible",void 0),ef=l([S("esri.symbols.callouts.Callout3D")],ef);const D9=ef;var uS;let ag=uS=class extends V{constructor(){super(...arguments),this.color=new ie("white")}clone(){return new uS({color:P(this.color)})}};l([c(kl)],ag.prototype,"color",void 0),ag=uS=l([S("esri.symbols.callouts.LineCallout3DBorder")],ag);const L9=ag;Object.freeze(Object.defineProperty({__proto__:null,default:L9},Symbol.toStringTag,{value:"Module"}));var cS;let Ra=cS=class extends D9{constructor(e){super(e),this.type="line",this.color=new ie([0,0,0,1]),this.size=Xo(1),this.border=null}get visible(){return this.size>0&&T(this.color)&&this.color.a>0}clone(){return new cS({color:P(this.color),size:this.size,border:P(this.border)})}};l([pe({line:"line"},{readOnly:!0})],Ra.prototype,"type",void 0),l([c(kl)],Ra.prototype,"color",void 0),l([c(Qo)],Ra.prototype,"size",void 0),l([c({type:L9,json:{write:!0}})],Ra.prototype,"border",void 0),l([c({readOnly:!0})],Ra.prototype,"visible",null),Ra=cS=l([S("esri.symbols.callouts.LineCallout3D")],Ra);const TK=Ra;function cx(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function O9(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!cx(e)}const k9={types:{key:"type",base:D9,typeMap:{line:TK}},json:{write:!0}};var dS;let Pu=dS=class extends V{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new dS({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};l([c(Qo)],Pu.prototype,"screenLength",void 0),l([c({type:Number,json:{write:!0,default:0}})],Pu.prototype,"minWorldLength",void 0),l([c({type:Number,json:{write:!0}})],Pu.prototype,"maxWorldLength",void 0),Pu=dS=l([S("esri.symbols.support.Symbol3DVerticalOffset")],Pu);var lg;const F9=he.ofType({base:null,key:"type",typeMap:{text:zp}});let Pa=lg=class extends Hp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new F9,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return O9(this)}hasVisibleVerticalOffset(){return cx(this)}clone(){return new lg({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail),callout:P(this.callout),verticalOffset:P(this.verticalOffset)})}static fromTextSymbol(e){return new lg({symbolLayers:[zp.fromTextSymbol(e)]})}};l([c({type:Pu,json:{write:!0}})],Pa.prototype,"verticalOffset",void 0),l([c(k9)],Pa.prototype,"callout",void 0),l([c({json:{read:!1,write:!1}})],Pa.prototype,"styleOrigin",void 0),l([c({type:F9})],Pa.prototype,"symbolLayers",void 0),l([pe({LabelSymbol3D:"label-3d"},{readOnly:!0})],Pa.prototype,"type",void 0),Pa=lg=l([S("esri.symbols.LabelSymbol3D")],Pa);const qv=Pa;var ug;const B9=he.ofType({base:null,key:"type",typeMap:{line:Xy,path:ux}}),EK=he.ofType({base:null,key:"type",typeMap:{line:Xy,path:ux}});let tf=ug=class extends Hp{constructor(e){super(e),this.symbolLayers=new B9,this.type="line-3d"}clone(){return new ug({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleLineSymbol(e){return new ug({symbolLayers:[Xy.fromSimpleLineSymbol(e)]})}};l([c({type:B9,json:{type:EK}})],tf.prototype,"symbolLayers",void 0),l([pe({LineSymbol3D:"line-3d"},{readOnly:!0})],tf.prototype,"type",void 0),tf=ug=l([S("esri.symbols.LineSymbol3D")],tf);const Yv=tf;let $a=class extends vr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};l([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],$a.prototype,"angle",void 0),l([c({type:["simple-marker","picture-marker"],readOnly:!0})],$a.prototype,"type",void 0),l([c({type:Number,cast:je,json:{write:!0}})],$a.prototype,"xoffset",void 0),l([c({type:Number,cast:je,json:{write:!0}})],$a.prototype,"yoffset",void 0),l([c({type:Number,cast:e=>e==="auto"?e:je(e),json:{write:!0}})],$a.prototype,"size",void 0),$a=l([S("esri.symbols.MarkerSymbol")],$a);const U9=$a;var pS;const V9=he.ofType({base:null,key:"type",typeMap:{fill:Gv}});let rf=pS=class extends Hp{constructor(e){super(e),this.symbolLayers=new V9,this.type="mesh-3d"}clone(){return new pS({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}};l([c({type:V9})],rf.prototype,"symbolLayers",void 0),l([pe({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],rf.prototype,"type",void 0),rf=pS=l([S("esri.symbols.MeshSymbol3D")],rf);const dx=rf;function AK(e,t,i){return t.imageData?k5({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):j9(t.url,i)}function j9(e,t){return CK(t)&&!Gi(e)&&t.layer.parsedUrl?Zo(t.layer.parsedUrl.path,"images",e):jp(e,t)}function xK(e,t,i,r){if(Nc(e)){const n=O5(e);t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&_c(i.url,t,"url",r)}else _c(e,t,"url",r)}const z9={json:{read:{source:["imageData","url"],reader:AK},write:{writer(e,t,i,r){xK(e,t,this.source,r)}}}},H9={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=j9(t.url,i)),r}}}};function CK(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var hS;let Jr=hS=class extends T9{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),i!=null&&(n.width=je(i)),r!=null&&(n.height=je(r)),n}clone(){const e=new hS({color:P(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",P(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};l([pe({esriPFS:"picture-fill"},{readOnly:!0})],Jr.prototype,"type",void 0),l([c(z9)],Jr.prototype,"url",void 0),l([c({type:Number,json:{write:!0}})],Jr.prototype,"xscale",void 0),l([c({type:Number,json:{write:!0}})],Jr.prototype,"yscale",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Jr.prototype,"width",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Jr.prototype,"height",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Jr.prototype,"xoffset",void 0),l([c({type:Number,cast:je,json:{write:!0}})],Jr.prototype,"yoffset",void 0),l([c(H9)],Jr.prototype,"source",void 0),Jr=hS=l([S("esri.symbols.PictureFillSymbol")],Jr);const G9=Jr;var fS;let $n=fS=class extends U9{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=je(t)),i!=null&&(r.height=je(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new fS({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",P(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};l([c({json:{write:!1}})],$n.prototype,"color",void 0),l([pe({esriPMS:"picture-marker"},{readOnly:!0})],$n.prototype,"type",void 0),l([c(z9)],$n.prototype,"url",void 0),l([c(H9)],$n.prototype,"source",void 0),l([c({type:Number,cast:je,json:{write:!0}})],$n.prototype,"height",void 0),l([K("height",["height","size"])],$n.prototype,"readHeight",null),l([c({type:Number,cast:je,json:{write:!0}})],$n.prototype,"width",void 0),l([c({json:{write:!1}})],$n.prototype,"size",void 0),$n=fS=l([S("esri.symbols.PictureMarkerSymbol")],$n);const Qy=$n;var Da;const W9=he.ofType({base:null,key:"type",typeMap:{icon:Hu,object:lx,text:zp}});let uu=Da=class extends Hp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new W9,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return O9(this)}hasVisibleVerticalOffset(){return cx(this)}clone(){return new Da({verticalOffset:P(this.verticalOffset),callout:P(this.callout),styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Da({symbolLayers:[Hu.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Da({symbolLayers:[Hu.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var i,r;return((r=(i=e.data)==null?void 0:i.symbol)==null?void 0:r.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new Da({symbolLayers:[Hu.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new Da({symbolLayers:[Hu.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Da({symbolLayers:[zp.fromTextSymbol(e)]})}};l([c({type:Pu,json:{write:!0}})],uu.prototype,"verticalOffset",void 0),l([c(k9)],uu.prototype,"callout",void 0),l([c({type:W9,json:{origins:{"web-scene":{write:!0}}}})],uu.prototype,"symbolLayers",void 0),l([pe({PointSymbol3D:"point-3d"},{readOnly:!0})],uu.prototype,"type",void 0),uu=Da=l([S("esri.symbols.PointSymbol3D")],uu);const Gu=uu;var nf;const q9=he.ofType({base:null,key:"type",typeMap:{extrude:_9,fill:Gv,icon:Hu,line:Xy,object:lx,text:zp,water:P9}});let of=nf=class extends Hp{constructor(e){super(e),this.symbolLayers=new q9,this.type="polygon-3d"}clone(){return new nf({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromJSON(e){const t=new nf;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:T(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new nf({symbolLayers:[Gv.fromSimpleFillSymbol(e)]})}};l([c({type:q9,json:{write:!0}})],of.prototype,"symbolLayers",void 0),l([pe({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],of.prototype,"type",void 0),of=nf=l([S("esri.symbols.PolygonSymbol3D")],of);const em=of;var yS;const nb=new Se({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let cu=yS=class extends T9{constructor(...e){super(...e),this.color=new ie([0,0,0,.25]),this.outline=new Ur,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new yS({color:P(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};l([c()],cu.prototype,"color",void 0),l([c()],cu.prototype,"outline",void 0),l([pe({esriSFS:"simple-fill"},{readOnly:!0})],cu.prototype,"type",void 0),l([c({type:nb.apiValues,json:{read:nb.read,write:nb.write}})],cu.prototype,"style",void 0),cu=yS=l([S("esri.symbols.SimpleFillSymbol")],cu);const na=cu;var mS;const ob=new Se({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let xo=mS=class extends U9{constructor(...e){super(...e),this.color=new ie([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ur}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=je(t)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new mS({angle:this.angle,color:P(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};l([c()],xo.prototype,"color",void 0),l([X("color")],xo.prototype,"writeColor",null),l([pe({esriSMS:"simple-marker"},{readOnly:!0})],xo.prototype,"type",void 0),l([c()],xo.prototype,"size",void 0),l([c({type:ob.apiValues,json:{read:ob.read,write:ob.write}})],xo.prototype,"style",void 0),l([c({type:String,json:{write:!0}})],xo.prototype,"path",null),l([c({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ur}},json:{default:null,write:!0}})],xo.prototype,"outline",void 0),xo=mS=l([S("esri.symbols.SimpleMarkerSymbol")],xo);const Fl=xo;var gS;let st=gS=class extends vr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Wv,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return je(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new gS({angle:this.angle,backgroundColor:P(this.backgroundColor),borderLineColor:P(this.borderLineColor),borderLineSize:this.borderLineSize,color:P(this.color),font:this.font&&this.font.clone(),haloColor:P(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};l([c({type:ie,json:{write:!0}})],st.prototype,"backgroundColor",void 0),l([c({type:ie,json:{write:!0}})],st.prototype,"borderLineColor",void 0),l([c({type:Number,json:{write:!0}})],st.prototype,"borderLineSize",void 0),l([c({type:Wv,json:{write:!0}})],st.prototype,"font",void 0),l([c({...N9,json:{write:!0}})],st.prototype,"horizontalAlignment",void 0),l([c({type:Boolean,json:{write:!0}})],st.prototype,"kerning",void 0),l([c({type:ie,json:{write:!0}})],st.prototype,"haloColor",void 0),l([c({type:Number,cast:je,json:{write:!0}})],st.prototype,"haloSize",void 0),l([c({type:Boolean,json:{write:!0}})],st.prototype,"rightToLeft",void 0),l([c({type:Boolean,json:{write:!0}})],st.prototype,"rotated",void 0),l([c({type:String,json:{write:!0}})],st.prototype,"text",void 0),l([pe({esriTS:"text"},{readOnly:!0})],st.prototype,"type",void 0),l([c({...R9,json:{write:!0}})],st.prototype,"verticalAlignment",void 0),l([c({type:Number,cast:je,json:{write:!0}})],st.prototype,"xoffset",void 0),l([c({type:Number,cast:je,json:{write:!0}})],st.prototype,"yoffset",void 0),l([c({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],st.prototype,"angle",void 0),l([c({type:Number,json:{write:!0}})],st.prototype,"width",void 0),l([c({type:Number})],st.prototype,"lineWidth",void 0),l([X("lineWidth")],st.prototype,"writeLineWidth",null),l([Fe("lineWidth")],st.prototype,"castLineWidth",null),l([c(M9)],st.prototype,"lineHeight",void 0),l([X("lineHeight")],st.prototype,"writeLineHeight",null),st=gS=l([S("esri.symbols.TextSymbol")],st);const $c=st;var vS;const IK=W.getLogger("esri.symbols.WebStyleSymbol");let Dn=vS=class extends vr{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const e=T(this.portal)?this.portal:Kt.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new vS({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=T(t)?t.cache:null,r=i?this.fetchCacheKey:null;if(T(i)){const a=i.get(r);if(a)return a.clone()}const n=await MK();_t(t);const o=n.resolveWebStyleSymbol(this,{portal:this.portal},e,t);o.catch(a=>{IK.error("#fetchSymbol()","Failed to create symbol from style",a)});const s=await o;return e==="webRef"&&s.type==="point-3d"||e==="cimRef"&&s.type==="cim"?(T(i)&&i.set(r,s.clone()),s):null}};function MK(){return U(()=>import("./webStyleSymbolUtils.c93a5563.js"),["webStyleSymbolUtils.c93a5563.js","devEnvironmentUtils.8c6e6b72.js"],import.meta.url)}l([c({json:{write:!1}})],Dn.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],Dn.prototype,"styleName",void 0),l([c({type:Kt,json:{write:!1}})],Dn.prototype,"portal",void 0),l([c({type:String,json:{read:sx,write:_c}})],Dn.prototype,"styleUrl",void 0),l([c({type:Vf,json:{read:!1}})],Dn.prototype,"thumbnail",void 0),l([c({type:String,json:{write:!0}})],Dn.prototype,"name",void 0),l([pe({styleSymbolReference:"web-style"},{readOnly:!0})],Dn.prototype,"type",void 0),l([c()],Dn.prototype,"fetchCacheKey",null),Dn=vS=l([S("esri.symbols.WebStyleSymbol")],Dn);const Dc=Dn;function Kv(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function wp(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const ac={base:vr,key:"type",typeMap:{"simple-fill":na,"picture-fill":G9,"picture-marker":Qy,"simple-line":Ur,"simple-marker":Fl,text:$c,"label-3d":qv,"line-3d":Yv,"mesh-3d":dx,"point-3d":Gu,"polygon-3d":em,"web-style":Dc,cim:Zy},errorContext:"symbol"},NK={base:vr,key:"type",typeMap:{"picture-marker":Qy,"simple-marker":Fl,text:$c,"web-style":Dc,cim:Zy},errorContext:"symbol"},RK=Op({types:ac}),Y9={base:vr,key:"type",typeMap:{"simple-fill":na,"picture-fill":G9,"picture-marker":Qy,"simple-line":Ur,"simple-marker":Fl,text:$c,"line-3d":Yv,"mesh-3d":dx,"point-3d":Gu,"polygon-3d":em,"web-style":Dc,cim:Zy},errorContext:"symbol"},PK={base:vr,key:"type",typeMap:{text:$c,"label-3d":qv},errorContext:"symbol"},BI={base:vr,key:"type",typeMap:{"line-3d":Yv,"mesh-3d":dx,"point-3d":Gu,"polygon-3d":em,"web-style":Dc,cim:Zy},errorContext:"symbol"},$K={base:vr,key:"type",typeMap:{"label-3d":qv},errorContext:"symbol"},K9=Yo(ac);function DK(e){if(!e)return null;const t={};for(const i in e){const r=Ji(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function LK(e){if(!T(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let tr=class extends wr(V){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:$f(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&T(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:LK(this.aggregateGeometries),geometry:T(this.geometry)?this.geometry.toJSON():null,symbol:T(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){T(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}};l([c({value:null,json:{read:DK}})],tr.prototype,"aggregateGeometries",null),l([c({value:null})],tr.prototype,"attributes",null),l([c({value:null,types:Rc,json:{read:Ji}})],tr.prototype,"geometry",null),l([c({type:Boolean})],tr.prototype,"isAggregate",void 0),l([c({clonable:"reference"})],tr.prototype,"layer",void 0),l([c({type:Ol})],tr.prototype,"popupTemplate",void 0),l([c({clonable:"reference"})],tr.prototype,"sourceLayer",void 0),l([c({value:null,types:ac})],tr.prototype,"symbol",null),l([c({type:Boolean,value:!0})],tr.prototype,"visible",null),tr=l([S("esri.Graphic")],tr),function(e){e.generateUID=$f}(tr||(tr={}));const Pi=tr;class px{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,n=0,o=!1){return(r-=n)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),o&&r===i&&(r=t),r+n}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return yr(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,n=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(n)?r:n}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}}function hx(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}hx(new px(0,2*Math.PI));hx(new px(-Math.PI,Math.PI));const OK=hx(new px(0,360));let _s=class extends wr(V){constructor(...e){super(...e),this.position=new le([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return t!=null&&(n.heading=t),i!=null&&(n.tilt=i),r!=null&&(n.fov=r),n}return e}writePosition(e,t,i,r){const n=e.clone();n.x=sn(e.x||0),n.y=sn(e.y||0),n.z=e.hasZ?sn(e.z||0):e.z,t[i]=n.write({},r)}readPosition(e,t){const i=new le;return i.read(e,t),i.x=sn(i.x||0),i.y=sn(i.y||0),i.z=i.hasZ?sn(i.z||0):i.z,i}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};l([c({type:le,json:{write:{isRequired:!0}}})],_s.prototype,"position",void 0),l([X("position")],_s.prototype,"writePosition",null),l([K("position")],_s.prototype,"readPosition",null),l([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Fe(e=>OK.normalize(sn(e)))],_s.prototype,"heading",void 0),l([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Fe(e=>yr(sn(e),-180,180))],_s.prototype,"tilt",void 0),l([c({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_s.prototype,"fov",void 0),_s=l([S("esri.Camera")],_s);const kK=_s;var wS;let La=wS=class extends V{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new wS({rotation:this.rotation,scale:this.scale,targetGeometry:T(this.targetGeometry)?this.targetGeometry.clone():null,camera:T(this.camera)?this.camera.clone():null})}};function sb(){return{enabled:!this.camera}}l([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:sb}}}}})],La.prototype,"rotation",void 0),l([Fe("rotation")],La.prototype,"castRotation",null),l([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:sb}}}}})],La.prototype,"scale",void 0),l([c({types:Rc,json:{read:Ji,write:!0,origins:{"web-scene":{read:Ji,write:{overridePolicy:sb}}}}})],La.prototype,"targetGeometry",void 0),l([c({type:kK,json:{write:!0}})],La.prototype,"camera",void 0),La=wS=l([S("esri.Viewpoint")],La);const Vo=La;class E1{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}var Wi;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Wi||(Wi={}));let FK=0;function Z9(){return FK++}function BK(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function A1(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function J9(e,t,i,r){if(t.type===Wi.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Wi.INVOKE&&t.type!==Wi.RESPONSE)return void e.postMessage(t);let n;BK(i)?(n=UI(i.transferList),t.data=i.result):(n=UI(r),t.data=i),n?e.postMessage(t,n):e.postMessage(t)}function _y(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function UI(e){if(!e||!e.length)return null;if(k("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!UK(i));return t.length?t:null}function UK(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const VK={statsWorker:()=>U(()=>import("./statsWorker.90fb1ea1.js"),["statsWorker.90fb1ea1.js","quantizationUtils.37e0ea7c.js","utils.49e2a80e.js","ClassBreaksDefinition.ce71bb0f.js"],import.meta.url),geometryEngineWorker:()=>U(()=>import("./geometryEngineWorker.dfc67929.js"),["geometryEngineWorker.dfc67929.js","geometryEngineJSON.a34a7363.js","geometryEngineBase.cf4f989f.js","json.d1a0fa35.js"],import.meta.url),CSVSourceWorker:()=>U(()=>import("./CSVSourceWorker.cb2755a4.js"),["CSVSourceWorker.cb2755a4.js","json.d1a0fa35.js","FeatureStore.bc9d590e.js","PooledRBush.393dd9c5.js","centroid.4f125de8.js","projectionSupport.2b6172e4.js","QueryEngine.e83aa2bb.js","QueryEngineResult.8e48cd4d.js","quantizationUtils.37e0ea7c.js","WhereClause.3e515281.js","utils.49e2a80e.js","ClassBreaksDefinition.ce71bb0f.js","utils.fe3e1a22.js","timeSupport.ff2bdc06.js"],import.meta.url),EdgeProcessingWorker:()=>U(()=>import("./EdgeProcessingWorker.f2aeb13a.js"),["EdgeProcessingWorker.f2aeb13a.js","deduplicate.80d3712d.js","InterleavedLayout.1dd00258.js","BufferView.e0746094.js","types.e5a283d2.js","VertexAttribute.5551e0d8.js"],import.meta.url),ElevationSamplerWorker:()=>U(()=>import("./ElevationSamplerWorker.86521e2b.js"),["ElevationSamplerWorker.86521e2b.js","PooledRBush.393dd9c5.js","georeference.a18d1e91.js","quatf64.ddec7ef6.js","mat4f64.a79dd289.js","quat.6334f140.js","BufferView.e0746094.js","vec33.18707c6e.js"],import.meta.url),FeatureServiceSnappingSourceWorker:()=>U(()=>import("./FeatureServiceSnappingSourceWorker.c22a4c87.js"),["FeatureServiceSnappingSourceWorker.c22a4c87.js","FeatureStore.bc9d590e.js","PooledRBush.393dd9c5.js","centroid.4f125de8.js","QueryEngine.e83aa2bb.js","QueryEngineResult.8e48cd4d.js","quantizationUtils.37e0ea7c.js","WhereClause.3e515281.js","utils.49e2a80e.js","ClassBreaksDefinition.ce71bb0f.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","utils.fe3e1a22.js","timeSupport.ff2bdc06.js"],import.meta.url),GeoJSONSourceWorker:()=>U(()=>import("./GeoJSONSourceWorker.64581f0c.js"),["GeoJSONSourceWorker.64581f0c.js","FeatureStore.bc9d590e.js","PooledRBush.393dd9c5.js","centroid.4f125de8.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","QueryEngine.e83aa2bb.js","QueryEngineResult.8e48cd4d.js","quantizationUtils.37e0ea7c.js","WhereClause.3e515281.js","utils.49e2a80e.js","ClassBreaksDefinition.ce71bb0f.js","utils.fe3e1a22.js","timeSupport.ff2bdc06.js","geojson.7eb3d38b.js","sourceUtils.d6b2808a.js"],import.meta.url),LercWorker:()=>U(()=>import("./LercWorker.d6513cb8.js"),[],import.meta.url),MemorySourceWorker:()=>U(()=>import("./MemorySourceWorker.1e84dfd6.js"),["MemorySourceWorker.1e84dfd6.js","objectIdUtils.773397d7.js","FeatureStore.bc9d590e.js","PooledRBush.393dd9c5.js","centroid.4f125de8.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","QueryEngine.e83aa2bb.js","QueryEngineResult.8e48cd4d.js","quantizationUtils.37e0ea7c.js","WhereClause.3e515281.js","utils.49e2a80e.js","ClassBreaksDefinition.ce71bb0f.js","utils.fe3e1a22.js","timeSupport.ff2bdc06.js","sourceUtils.d6b2808a.js"],import.meta.url),PBFDecoderWorker:()=>U(()=>import("./PBFDecoderWorker.c8cbe41a.js"),[],import.meta.url),Pipeline:()=>U(()=>import("./Pipeline.ad451733.js"),["Pipeline.ad451733.js","QueryEngine.e83aa2bb.js","QueryEngineResult.8e48cd4d.js","quantizationUtils.37e0ea7c.js","WhereClause.3e515281.js","utils.49e2a80e.js","ClassBreaksDefinition.ce71bb0f.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","utils.fe3e1a22.js","timeSupport.ff2bdc06.js","FeatureStore2D.959dc10c.js","CircularArray.9bd71b73.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","visualVariablesUtils.2d08429a.js","Utils.0ab6f103.js","Texture.844ef494.js","visualVariablesUtils.621fe5a7.js","ogcFeatureUtils.56ab4941.js","geojson.7eb3d38b.js"],import.meta.url),PointCloudWorker:()=>U(()=>import("./PointCloudWorker.74ea69c2.js"),["PointCloudWorker.74ea69c2.js","quat.6334f140.js","quatf64.ddec7ef6.js","vec3f32.8d37ecf5.js","PointCloudUniqueValueRenderer.fec3fffc.js","VertexAttribute.5551e0d8.js"],import.meta.url),RasterWorker:()=>U(()=>import("./RasterWorker.b0138306.js"),["RasterWorker.b0138306.js","pixelUtils.87d53e33.js","RasterSymbolizer.0925736b.js","rasterProjectionHelper.4b5b5e3f.js","dataUtils.eb6622c5.js","utils.2f18ce67.js"],import.meta.url),SceneLayerSnappingSourceWorker:()=>U(()=>import("./SceneLayerSnappingSourceWorker.281e2a3e.js"),["SceneLayerSnappingSourceWorker.281e2a3e.js","lineSegment.acc01af7.js","vectorStacks.9ea6e77c.js","quatf64.ddec7ef6.js","mat4f64.a79dd289.js","sphere.501efd63.js","QueryEngineResult.8e48cd4d.js","quantizationUtils.37e0ea7c.js","WhereClause.3e515281.js","utils.49e2a80e.js","ClassBreaksDefinition.ce71bb0f.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","utils.fe3e1a22.js","Util.e6d08642.js","EdgeProcessingWorker.f2aeb13a.js","deduplicate.80d3712d.js","InterleavedLayout.1dd00258.js","BufferView.e0746094.js","types.e5a283d2.js","VertexAttribute.5551e0d8.js"],import.meta.url),SceneLayerWorker:()=>U(()=>import("./SceneLayerWorker.474b52f9.js"),["SceneLayerWorker.474b52f9.js","sphere.501efd63.js","vectorStacks.9ea6e77c.js","quatf64.ddec7ef6.js","mat4f64.a79dd289.js"],import.meta.url),WFSSourceWorker:()=>U(()=>import("./WFSSourceWorker.afebc6b1.js"),["WFSSourceWorker.afebc6b1.js","FeatureStore.bc9d590e.js","PooledRBush.393dd9c5.js","centroid.4f125de8.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","QueryEngine.e83aa2bb.js","QueryEngineResult.8e48cd4d.js","quantizationUtils.37e0ea7c.js","WhereClause.3e515281.js","utils.49e2a80e.js","ClassBreaksDefinition.ce71bb0f.js","utils.fe3e1a22.js","timeSupport.ff2bdc06.js","geojson.7eb3d38b.js","sourceUtils.d6b2808a.js","wfsUtils.04caf14f.js","xmlUtils.986ddba5.js"],import.meta.url),WorkerTileHandler:()=>U(()=>import("./WorkerTileHandler.890c414e.js"),["WorkerTileHandler.890c414e.js","BidiEngine.ec67919b.js","config.40d47db8.js","TileClipper.c27e2183.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js"],import.meta.url)},{CLOSE:VI,ABORT:jI,INVOKE:zI,RESPONSE:hh,OPEN_PORT:HI,ON:jK}=Wi,zK=2;class HK{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Wi.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class cr{constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new HK(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new cr(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=n),cr.clients.set(n,r),i.port2}static loadWorker(t){const i=VK[t];return i?i():Promise.resolve(null)}close(){this._post({type:VI}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const n=r&&r.signal,o=r&&r.transferList;if(!this._port)return Promise.reject(new N("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const s=Z9();return new Promise((a,u)=>{if(hn(n))return this._processWork(),void u(bt());const d=fn(n,()=>{const f=this._outJobs.get(s);f&&(this._outJobs.delete(s),this._processWork(),Dr(f.abortHandle),this._post({type:jI,jobId:s}),u(bt()))}),h={resolve:a,reject:u,abortHandle:d,debugInfo:t};this._outJobs.set(s,h),this._post({type:zI,jobId:s,methodName:t,abortable:n!=null},i,o)})}on(t,i){const r=new MessageChannel;function n(o){i(o.data)}return this._port.postMessage({type:Wi.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove(){r.port1.postMessage({type:Wi.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:HI,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=zK)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:n,deferred:o}=t;this.invoke(i,r,n).then(s=>o.resolve(s)).catch(s=>o.reject(s))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Dr(t.abortHandle),t.reject(bt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){T(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=_y(t);if(i)switch(i.type){case hh:this._onResponseMessage(i);break;case zI:this._invokeQueue.push(i);break;case jI:this._onAbortMessage(i);break;case VI:this._onCloseMessage();break;case HI:this._onOpenPortMessage(i);break;case jK:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&cr.clients.get(this)===t&&t.destroy(),cr.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:o}=t,s=o?new AbortController:null,a=this._inJobs;let u,d=this._client,h=d[i];try{if(!h&&i&&i.includes(".")){const f=i.split(".");for(let y=0;y<f.length-1;y++)d=d[f[y]],h=d[f[y+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);u=h.call(d,n,{client:this,signal:s?s.signal:null})}catch(f){return void this._post({type:hh,jobId:r,error:A1(f)})}ia(u)?(a.set(r,{controller:s,promise:u}),u.then(f=>{a.has(r)&&(a.delete(r),this._post({type:hh,jobId:r},f))},f=>{a.has(r)&&(a.delete(r),Ki(f)||this._post({type:hh,jobId:r,error:A1(f||{message:`Error encountered at method ${i}`})}))})):this._post({type:hh,jobId:r},u)}_onOpenPortMessage(t){new cr(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,o=>{i.postMessage(o)}),n=Av(t.port,"message",o=>{_y(o).type===Wi.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,o=this._outJobs;if(!o.has(i))return;const s=o.get(i);this._processWork(),o.delete(i),Dr(s.abortHandle),r?s.reject(N.fromJSON(JSON.parse(r))):s.resolve(n)}_post(t,i,r){return J9(this._port,t,i,r)}}cr.kernelInfo={revision:H5,version:G5,buildDate:z5},cr.clients=new Map;const GK=W.getLogger("esri.core.workers.Connection");class WK{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new E1}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,n)=>{let o=!0;const s=a=>{_t(i.signal),o&&(o=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const u=t[a];ia(u)?this._clientPromises[a]=u.then(d=>(this._clients[a]=new cr(d,i,()=>this._ongoingJobsQueue.pop()),s(r),this._clients[a]),()=>(s(n),null)):(this._clients[a]=new cr(u,i,()=>this._ongoingJobsQueue.pop()),this._clientPromises[a]=Promise.resolve(this._clients[a]),s(r))}})}broadcast(t,i,r){const n=new Array(this._clientPromises.length);for(let o=0;o<this._clientPromises.length;++o){const s=this._clientPromises[o];n[o]=s.then(a=>a.invoke(t,i,r))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(bt(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,r){let n=null;Array.isArray(r)?(GK.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r;const o=Xs();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:n,deferred:o});for(let s=0;s<this._clientPromises.length;s++){const a=this._clients[s];a?a.jobAdded():this._clientPromises[s].then(u=>u.jobAdded())}return o.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>_v(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(o=>{i[n]=o.openPort(),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const X9=W.getLogger("esri.intl");function Wn(e,t,i={}){const{format:r={}}=i;return qo(e,n=>qK(n,t,r))}function qK(e,t,i){let r,n;const o=e.indexOf(":");if(o===-1?r=e.trim():(r=e.slice(0,o).trim(),n=e.slice(o+1).trim()),!r)return"";const s=Dp(r,t);if(s==null)return"";const a=i[n]||i[r];return a?YK(s,a):n?KK(s,n):fx(s)}function YK(e,t){switch(t.type){case"date":return Jo(e,t.intlOptions);case"number":return Rl(e,t.intlOptions);default:return X9.warn("missing format descriptor for key {key}"),fx(e)}}function KK(e,t){switch(t.toLowerCase()){case"dateformat":return Jo(e);case"numberformat":return Rl(e);default:return X9.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Jo(e):/^numberformat/i.test(t)?Rl(e):fx(e)}}function fx(e){switch(typeof e){case"string":return e;case"number":return Rl(e);case"boolean":return""+e;default:return e instanceof Date?Jo(e):""}}async function ZK(e,t,i,r){const n=t.exec(i);if(!n)throw new N("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const o=n[1]?`${n[1]}/`:"",s=n[2],a=DG(r),u=`${o}${s}.json`,d=a?`${o}${s}_${a}.json`:u;let h;try{h=await GI(e(d))}catch(f){if(d===u)throw new N("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f});try{h=await GI(e(u))}catch(y){throw new N("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:y})}}return h}async function GI(e){if(T(WI.fetchBundleAsset))return WI.fetchBundleAsset(e);const t=await Be(e,{responseType:"text"});return JSON.parse(t.data)}class JK{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?o=>new URL(o,new URL(r,window.location.href)).href:r instanceof URL?o=>new URL(o,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return ZK(this.getAssetUrl,this.matcher,t,i)}}function XK(e){return new JK(e)}const WI={};$G(XK({pattern:"esri/",location:Ue}));const qI={};function QK(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function eZ(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=qI.baseUrl),(i=qI.packages)==null||i.forEach(r=>{QK(t.packages,r)}),t}class tZ{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}}class cg{constructor(){this._dispatcher=new tZ,this._workerPostMessage({type:Wi.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){r1(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){r1(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=_y(t);if(i&&i.type===Wi.OPEN){const{modulePath:r,jobId:n}=i;let o=await cr.loadWorker(r);o||(o=await U(()=>import(r),[],import.meta.url));const s=cr.connect(o);this._workerPostMessage({type:Wi.OPENED,jobId:n,data:s})}}}const bS=W.getLogger("esri.core.workers"),{HANDSHAKE:iZ}=Wi,rZ='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let km,Fm;const YI="Failed to create Worker. Fallback to execute module in main thread";async function nZ(){if(!k("esri-workers")||(k("mozilla"),0))return KI(new cg);if(!km&&!Fm)try{const t=rZ.replace('"{CONFIGURATION}"',`'${oZ()}'`);km=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Fm=t||{}}let e;if(km)try{e=new Worker(km,{name:"esri-worker-"+sZ++})}catch{bS.warn(YI,Fm),e=new cg}else bS.warn(YI,Fm),e=new cg;return KI(e)}async function KI(e){return new Promise(t=>{function i(n){const o=_y(n);o&&o.type===iZ&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(n){n.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),bS.warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new cg).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function oZ(){let e;if(Ne.default!=null){const n={...Ne};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Ne));e.assetsPath=to(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Or(),e.has={"esri-csp-restrictions":k("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":k("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":k("esri-2d-query-centroid-enabled"),"featurelayer-pbf":k("featurelayer-pbf"),"featurelayer-simplify-thresholds":k("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":k("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":k("featurelayer-simplify-mobile-factor"),"esri-atomics":k("esri-atomics"),"esri-shared-array-buffer":k("esri-shared-array-buffer"),"esri-tiles-debug":k("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":k("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":k("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=to(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=to(e.workers.workerPath):e.workers.workerPath=to(Ue("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Ne.workers.loaderConfig,i=eZ({baseUrl:t==null?void 0:t.baseUrl,locale:Or(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]}),r={version:G5,buildDate:z5,revision:H5};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}let sZ=0;const aZ=W.getLogger("esri.core.workers"),{ABORT:ZI,INVOKE:lZ,OPEN:uZ,OPENED:cZ,RESPONSE:fh}=Wi;class yx{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),aZ.error(r)})}static async create(t){const i=await nZ();return new yx(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,n=Z9();return new Promise((o,s)=>{const a={resolve:o,reject:s,abortHandle:dA(r,()=>{this._outJobs.delete(n),this._post({type:ZI,jobId:n})})};this._outJobs.set(n,a),this._post({type:uZ,jobId:n,modulePath:t})})}_onMessage(t){const i=_y(t);if(i)switch(i.type){case cZ:this._onOpenedMessage(i);break;case fh:this._onResponseMessage(i);break;case ZI:this._onAbortMessage(i);break;case lZ:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:o}=t,s=o?new AbortController:null,a=this._inJobs,u=kH[i];let d;try{if(typeof u!="function")throw new TypeError(`${i} is not a function`);d=u.call(null,n,{signal:s?s.signal:null})}catch(h){return void this._post({type:fh,jobId:r,error:A1(h)})}ia(d)?(a.set(r,{controller:s,promise:d}),d.then(h=>{a.has(r)&&(a.delete(r),this._post({type:fh,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),Ki(h)||this._post({type:fh,jobId:r,error:A1(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:fh,jobId:r},d)}_onOpenedMessage(t){const{jobId:i,data:r}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Dr(n.abortHandle),n.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,o=this._outJobs.get(i);o&&(this._outJobs.delete(i),Dr(o.abortHandle),r?o.reject(N.fromJSON(JSON.parse(r))):o.resolve(n))}_post(t,i,r){return J9(this.worker,t,i,r)}}let Wu=k("esri-workers-debug")?1:k("host-browser")?navigator.hardwareConcurrency-1:0;Wu||(Wu=k("safari")&&k("mac")||k("trident")?7:2);let JI=0;const dg=[];function dZ(){eO()}async function Bm(e,t){const i=new WK;return await i.open(e,t),i}async function Q9(e,t={}){if(typeof e!="string")throw new N("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(k("host-webworker")&&!k("esri-workers")&&(i="local"),i==="local"){let r=await cr.loadWorker(e);r||(r=await U(()=>import(e),[],import.meta.url)),_t(t.signal);const n=t.client||r;return Bm([cr.connect(r)],{...t,client:n})}if(await eO(),_t(t.signal),i==="dedicated"){const r=JI++%Wu;return Bm([await dg[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,Wu);if(r<Wu){const n=new Array(r);for(let o=0;o<r;++o){const s=JI++%Wu;n[o]=dg[s].open(e,t)}return Bm(n,t)}}return Bm(dg.map(r=>r.open(e,t)),t)}let Um=null;async function eO(){if(Um)return Um;new AbortController;const e=[];for(let t=0;t<Wu;t++){const i=yx.create(t).then(r=>(dg[t]=r,r));e.push(i)}return Um=Promise.all(e),Um}function mx(e){return new me({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const tO=mx(nt),x1=mx(Ws),C1=mx(Ml),pZ=new me({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${nt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function L1e(e){return e&&(Ov(e)||e===x1)?x1:e&&(kv(e)||e===C1)?C1:tO}function hZ(e){return e&&(Ov(e)||e===x1)?Ws:e&&(kv(e)||e===C1)?Ml:nt}function O1e(e){return IA(e)?Ws:MA(e)?Ml:nt}const iO=39.37,fZ=nt.radius*Math.PI/200,rO=/UNIT\[([^\]]+)\]\]$/i,lc=b,nO=/UNIT\[([^\]]+)\]/i,yZ=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),mZ=mi()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),go=e=>e*e,pa=e=>e*e*e,Sy={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:go(.001)},"square-centimeters":{inBaseUnits:go(.01)},"square-decimeters":{inBaseUnits:go(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:go(1e3)},"square-inches":{inBaseUnits:go(.0254)},"square-feet":{inBaseUnits:go(.3048)},"square-yards":{inBaseUnits:go(.9144)},"square-miles":{inBaseUnits:go(1609.344)},"square-us-feet":{inBaseUnits:go(1200/3937)},acres:{inBaseUnits:.0015625*go(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*pa(.001)},"cubic-centimeters":{inBaseUnits:1e3*pa(.01)},"cubic-decimeters":{inBaseUnits:1e3*pa(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*pa(1e3)},"cubic-inches":{inBaseUnits:1e3*pa(.0254)},"cubic-feet":{inBaseUnits:1e3*pa(.3048)},"cubic-yards":{inBaseUnits:1e3*pa(.9144)},"cubic-miles":{inBaseUnits:1e3*pa(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},gZ=(()=>{const e={};for(const t in Sy)for(const i in Sy[t].units)e[i]=t;return e})();function vZ(e,t,i){return e*Sy[i].units[t].inBaseUnits}function wZ(e,t,i){return e/Sy[i].units[t].inBaseUnits}function _S(e){const t=gZ[e];if(!t)throw new Error("unknown type");return t}function XI(e,t=null){return t=t||_S(e),Sy[t].baseUnit===e}function Xr(e,t,i){if(t===i)return e;const r=_S(t);if(r!==_S(i))throw new Error("incompatible units");const n=XI(t,r)?e:vZ(e,t,r);return XI(i,r)?n:wZ(n,i,r)}function bZ(e,t,i){return Xr(e,t,"meters")/(i*Math.PI/180)}function oO(e){return mZ.fromJSON(e.toLowerCase())||null}function bp(e){if(e&&typeof e=="object"&&!RH(e))return 1;const t=Bl(e);return t>1e5?1:t}function _Z(e){return Bl(e)>=(e instanceof me?hZ(e).metersPerDegree:1e5)?"meters":TZ(e)}function Bl(e,t=nt.metersPerDegree){return bv(SZ(e,!0),t)}function SZ(e,t=!1){let i,r,n=null;if(e!=null&&(typeof e=="object"?(i=e.wkid,r=e.wkt):typeof e=="number"?i=e:typeof e=="string"&&(r=e)),i){if(IA(i))return Ws.metersPerDegree;if(MA(i))return Ml.metersPerDegree;n=lc.values[lc[i]],!n&&t&&yZ.has(i)&&(n=fZ)}else r&&(lO(r)?n=QI(rO.exec(r),n):aO(r)&&(n=QI(nO.exec(r),n)));return n}function QI(e,t){return e&&e[1]?sO(e[1]):t}function sO(e){return parseFloat(e.split(",")[1])}function TZ(e){let t,i,r=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,i=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(i=e)),t)r=lc.units[lc[t]];else if(i){const n=lO(i)?rO:aO(i)?nO:null;if(n){const o=n.exec(i);o&&o[1]&&(r=AZ(o[1]))}}return T(r)?oO(r):null}function aO(e){return/^GEOCCS/i.test(e)}function lO(e){return/^PROJCS/i.test(e)}const EZ=1e-7;function AZ(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!lc.units.includes(i)){const r=sO(e);i=null;const n=lc.values;for(let o=0;o<n.length;++o)if(Math.abs(r-n[o])<EZ){i=lc.units[o];break}}return i}const uO={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},cO={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},xZ=mi()(uO),CZ=mi()(cO);mi()({...uO,...cO});function IZ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ul(e,t,i,r,n,o,s,a,u,d,h,f,y,m,g,v,w){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=s,e[6]=a,e[7]=u,e[8]=d,e[9]=h,e[10]=f,e[11]=y,e[12]=m,e[13]=g,e[14]=v,e[15]=w,e}function gx(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oa(e,t){if(e===t){const i=t[1],r=t[2],n=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=n,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function MZ(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],v=t[13],w=t[14],_=t[15],A=i*a-r*s,I=i*u-n*s,D=i*d-o*s,M=r*u-n*a,R=r*d-o*a,B=n*d-o*u,j=h*v-f*g,Y=h*w-y*g,ee=h*_-m*g,re=f*w-y*v,ue=f*_-m*v,ge=y*_-m*w;let ne=A*ge-I*ue+D*re+M*ee-R*Y+B*j;return ne?(ne=1/ne,e[0]=(a*ge-u*ue+d*re)*ne,e[1]=(n*ue-r*ge-o*re)*ne,e[2]=(v*B-w*R+_*M)*ne,e[3]=(y*R-f*B-m*M)*ne,e[4]=(u*ee-s*ge-d*Y)*ne,e[5]=(i*ge-n*ee+o*Y)*ne,e[6]=(w*D-g*B-_*I)*ne,e[7]=(h*B-y*D+m*I)*ne,e[8]=(s*ue-a*ee+d*j)*ne,e[9]=(r*ee-i*ue-o*j)*ne,e[10]=(g*R-v*D+_*A)*ne,e[11]=(f*D-h*R-m*A)*ne,e[12]=(a*Y-s*re-u*j)*ne,e[13]=(i*re-r*Y+n*j)*ne,e[14]=(v*I-g*M-w*A)*ne,e[15]=(h*M-f*I+y*A)*ne,e):null}function NZ(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],v=t[13],w=t[14],_=t[15];return e[0]=a*(y*_-m*w)-f*(u*_-d*w)+v*(u*m-d*y),e[1]=-(r*(y*_-m*w)-f*(n*_-o*w)+v*(n*m-o*y)),e[2]=r*(u*_-d*w)-a*(n*_-o*w)+v*(n*d-o*u),e[3]=-(r*(u*m-d*y)-a*(n*m-o*y)+f*(n*d-o*u)),e[4]=-(s*(y*_-m*w)-h*(u*_-d*w)+g*(u*m-d*y)),e[5]=i*(y*_-m*w)-h*(n*_-o*w)+g*(n*m-o*y),e[6]=-(i*(u*_-d*w)-s*(n*_-o*w)+g*(n*d-o*u)),e[7]=i*(u*m-d*y)-s*(n*m-o*y)+h*(n*d-o*u),e[8]=s*(f*_-m*v)-h*(a*_-d*v)+g*(a*m-d*f),e[9]=-(i*(f*_-m*v)-h*(r*_-o*v)+g*(r*m-o*f)),e[10]=i*(a*_-d*v)-s*(r*_-o*v)+g*(r*d-o*a),e[11]=-(i*(a*m-d*f)-s*(r*m-o*f)+h*(r*d-o*a)),e[12]=-(s*(f*w-y*v)-h*(a*w-u*v)+g*(a*y-u*f)),e[13]=i*(f*w-y*v)-h*(r*w-n*v)+g*(r*y-n*f),e[14]=-(i*(a*w-u*v)-s*(r*w-n*v)+g*(r*u-n*a)),e[15]=i*(a*y-u*f)-s*(r*y-n*f)+h*(r*u-n*a),e}function RZ(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],s=e[5],a=e[6],u=e[7],d=e[8],h=e[9],f=e[10],y=e[11],m=e[12],g=e[13],v=e[14],w=e[15];return(t*s-i*o)*(f*w-y*v)-(t*a-r*o)*(h*w-y*g)+(t*u-n*o)*(h*v-f*g)+(i*a-r*s)*(d*w-y*m)-(i*u-n*s)*(d*v-f*m)+(r*u-n*a)*(d*g-h*m)}function dO(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],y=t[9],m=t[10],g=t[11],v=t[12],w=t[13],_=t[14],A=t[15];let I=i[0],D=i[1],M=i[2],R=i[3];return e[0]=I*r+D*a+M*f+R*v,e[1]=I*n+D*u+M*y+R*w,e[2]=I*o+D*d+M*m+R*_,e[3]=I*s+D*h+M*g+R*A,I=i[4],D=i[5],M=i[6],R=i[7],e[4]=I*r+D*a+M*f+R*v,e[5]=I*n+D*u+M*y+R*w,e[6]=I*o+D*d+M*m+R*_,e[7]=I*s+D*h+M*g+R*A,I=i[8],D=i[9],M=i[10],R=i[11],e[8]=I*r+D*a+M*f+R*v,e[9]=I*n+D*u+M*y+R*w,e[10]=I*o+D*d+M*m+R*_,e[11]=I*s+D*h+M*g+R*A,I=i[12],D=i[13],M=i[14],R=i[15],e[12]=I*r+D*a+M*f+R*v,e[13]=I*n+D*u+M*y+R*w,e[14]=I*o+D*d+M*m+R*_,e[15]=I*s+D*h+M*g+R*A,e}function PZ(e,t,i){const r=i[0],n=i[1],o=i[2];if(t===e)e[12]=t[0]*r+t[4]*n+t[8]*o+t[12],e[13]=t[1]*r+t[5]*n+t[9]*o+t[13],e[14]=t[2]*r+t[6]*n+t[10]*o+t[14],e[15]=t[3]*r+t[7]*n+t[11]*o+t[15];else{const s=t[0],a=t[1],u=t[2],d=t[3],h=t[4],f=t[5],y=t[6],m=t[7],g=t[8],v=t[9],w=t[10],_=t[11];e[0]=s,e[1]=a,e[2]=u,e[3]=d,e[4]=h,e[5]=f,e[6]=y,e[7]=m,e[8]=g,e[9]=v,e[10]=w,e[11]=_,e[12]=s*r+h*n+g*o+t[12],e[13]=a*r+f*n+v*o+t[13],e[14]=u*r+y*n+w*o+t[14],e[15]=d*r+m*n+_*o+t[15]}return e}function $Z(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function DZ(e,t,i,r){let n,o,s,a,u,d,h,f,y,m,g,v,w,_,A,I,D,M,R,B,j,Y,ee,re,ue=r[0],ge=r[1],ne=r[2],Tt=Math.sqrt(ue*ue+ge*ge+ne*ne);return Tt<be?null:(Tt=1/Tt,ue*=Tt,ge*=Tt,ne*=Tt,n=Math.sin(i),o=Math.cos(i),s=1-o,a=t[0],u=t[1],d=t[2],h=t[3],f=t[4],y=t[5],m=t[6],g=t[7],v=t[8],w=t[9],_=t[10],A=t[11],I=ue*ue*s+o,D=ge*ue*s+ne*n,M=ne*ue*s-ge*n,R=ue*ge*s-ne*n,B=ge*ge*s+o,j=ne*ge*s+ue*n,Y=ue*ne*s+ge*n,ee=ge*ne*s-ue*n,re=ne*ne*s+o,e[0]=a*I+f*D+v*M,e[1]=u*I+y*D+w*M,e[2]=d*I+m*D+_*M,e[3]=h*I+g*D+A*M,e[4]=a*R+f*B+v*j,e[5]=u*R+y*B+w*j,e[6]=d*R+m*B+_*j,e[7]=h*R+g*B+A*j,e[8]=a*Y+f*ee+v*re,e[9]=u*Y+y*ee+w*re,e[10]=d*Y+m*ee+_*re,e[11]=h*Y+g*ee+A*re,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function LZ(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[4],s=t[5],a=t[6],u=t[7],d=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+d*r,e[5]=s*n+h*r,e[6]=a*n+f*r,e[7]=u*n+y*r,e[8]=d*n-o*r,e[9]=h*n-s*r,e[10]=f*n-a*r,e[11]=y*n-u*r,e}function OZ(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],s=t[1],a=t[2],u=t[3],d=t[8],h=t[9],f=t[10],y=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-d*r,e[1]=s*n-h*r,e[2]=a*n-f*r,e[3]=u*n-y*r,e[8]=o*r+d*n,e[9]=s*r+h*n,e[10]=a*r+f*n,e[11]=u*r+y*n,e}function kZ(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],s=t[1],a=t[2],u=t[3],d=t[4],h=t[5],f=t[6],y=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+d*r,e[1]=s*n+h*r,e[2]=a*n+f*r,e[3]=u*n+y*r,e[4]=d*n-o*r,e[5]=h*n-s*r,e[6]=f*n-a*r,e[7]=y*n-u*r,e}function pO(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function FZ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function BZ(e,t,i){let r,n,o,s=i[0],a=i[1],u=i[2],d=Math.sqrt(s*s+a*a+u*u);return d<be?null:(d=1/d,s*=d,a*=d,u*=d,r=Math.sin(t),n=Math.cos(t),o=1-n,e[0]=s*s*o+n,e[1]=a*s*o+u*r,e[2]=u*s*o-a*r,e[3]=0,e[4]=s*a*o-u*r,e[5]=a*a*o+n,e[6]=u*a*o+s*r,e[7]=0,e[8]=s*u*o+a*r,e[9]=a*u*o-s*r,e[10]=u*u*o+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function UZ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function VZ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jZ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function hO(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=r+r,u=n+n,d=o+o,h=r*a,f=r*u,y=r*d,m=n*u,g=n*d,v=o*d,w=s*a,_=s*u,A=s*d;return e[0]=1-(m+v),e[1]=f+A,e[2]=y-_,e[3]=0,e[4]=f-A,e[5]=1-(h+v),e[6]=g+w,e[7]=0,e[8]=y+_,e[9]=g-w,e[10]=1-(h+m),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function zZ(e,t){const i=HZ,r=-t[0],n=-t[1],o=-t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=r*r+n*n+o*o+s*s;return f>0?(i[0]=2*(a*s+h*r+u*o-d*n)/f,i[1]=2*(u*s+h*n+d*r-a*o)/f,i[2]=2*(d*s+h*o+a*n-u*r)/f):(i[0]=2*(a*s+h*r+u*o-d*n),i[1]=2*(u*s+h*n+d*r-a*o),i[2]=2*(d*s+h*o+a*n-u*r)),hO(e,t,i),e}const HZ=ts();function GZ(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function WZ(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],s=t[5],a=t[6],u=t[8],d=t[9],h=t[10];return e[0]=Math.sqrt(i*i+r*r+n*n),e[1]=Math.sqrt(o*o+s*s+a*a),e[2]=Math.sqrt(u*u+d*d+h*h),e}function qZ(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function YZ(e,t,i,r){const n=t[0],o=t[1],s=t[2],a=t[3],u=n+n,d=o+o,h=s+s,f=n*u,y=n*d,m=n*h,g=o*d,v=o*h,w=s*h,_=a*u,A=a*d,I=a*h,D=r[0],M=r[1],R=r[2];return e[0]=(1-(g+w))*D,e[1]=(y+I)*D,e[2]=(m-A)*D,e[3]=0,e[4]=(y-I)*M,e[5]=(1-(f+w))*M,e[6]=(v+_)*M,e[7]=0,e[8]=(m+A)*R,e[9]=(v-_)*R,e[10]=(1-(f+g))*R,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function KZ(e,t,i,r,n){const o=t[0],s=t[1],a=t[2],u=t[3],d=o+o,h=s+s,f=a+a,y=o*d,m=o*h,g=o*f,v=s*h,w=s*f,_=a*f,A=u*d,I=u*h,D=u*f,M=r[0],R=r[1],B=r[2],j=n[0],Y=n[1],ee=n[2],re=(1-(v+_))*M,ue=(m+D)*M,ge=(g-I)*M,ne=(m-D)*R,Tt=(1-(y+_))*R,br=(w+A)*R,lt=(g+I)*B,_r=(w-A)*B,_n=(1-(y+v))*B;return e[0]=re,e[1]=ue,e[2]=ge,e[3]=0,e[4]=ne,e[5]=Tt,e[6]=br,e[7]=0,e[8]=lt,e[9]=_r,e[10]=_n,e[11]=0,e[12]=i[0]+j-(re*j+ne*Y+lt*ee),e[13]=i[1]+Y-(ue*j+Tt*Y+_r*ee),e[14]=i[2]+ee-(ge*j+br*Y+_n*ee),e[15]=1,e}function ZZ(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=i+i,a=r+r,u=n+n,d=i*s,h=r*s,f=r*a,y=n*s,m=n*a,g=n*u,v=o*s,w=o*a,_=o*u;return e[0]=1-f-g,e[1]=h+_,e[2]=y-w,e[3]=0,e[4]=h-_,e[5]=1-d-g,e[6]=m+v,e[7]=0,e[8]=y+w,e[9]=m-v,e[10]=1-d-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function JZ(e,t,i,r,n,o,s){const a=1/(i-t),u=1/(n-r),d=1/(o-s);return e[0]=2*o*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(n+r)*u,e[10]=(s+o)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*d,e[15]=0,e}function XZ(e,t,i,r,n){const o=1/Math.tan(t/2);let s;return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(s=1/(r-n),e[10]=(n+r)*s,e[14]=2*n*r*s):(e[10]=-1,e[14]=-2*r),e}function QZ(e,t,i,r){const n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),u=2/(s+a),d=2/(n+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=-(s-a)*u*.5,e[9]=(n-o)*d*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function eJ(e,t,i,r,n,o,s){const a=1/(t-i),u=1/(r-n),d=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+i)*a,e[13]=(n+r)*u,e[14]=(s+o)*d,e[15]=1,e}function tJ(e,t,i,r){let n,o,s,a,u,d,h,f,y,m;const g=t[0],v=t[1],w=t[2],_=r[0],A=r[1],I=r[2],D=i[0],M=i[1],R=i[2];return Math.abs(g-D)<be&&Math.abs(v-M)<be&&Math.abs(w-R)<be?gx(e):(h=g-D,f=v-M,y=w-R,m=1/Math.sqrt(h*h+f*f+y*y),h*=m,f*=m,y*=m,n=A*y-I*f,o=I*h-_*y,s=_*f-A*h,m=Math.sqrt(n*n+o*o+s*s),m?(m=1/m,n*=m,o*=m,s*=m):(n=0,o=0,s=0),a=f*s-y*o,u=y*n-h*s,d=h*o-f*n,m=Math.sqrt(a*a+u*u+d*d),m?(m=1/m,a*=m,u*=m,d*=m):(a=0,u=0,d=0),e[0]=n,e[1]=a,e[2]=h,e[3]=0,e[4]=o,e[5]=u,e[6]=f,e[7]=0,e[8]=s,e[9]=d,e[10]=y,e[11]=0,e[12]=-(n*g+o*v+s*w),e[13]=-(a*g+u*v+d*w),e[14]=-(h*g+f*v+y*w),e[15]=1,e)}function iJ(e,t,i,r){const n=t[0],o=t[1],s=t[2],a=r[0],u=r[1],d=r[2];let h=n-i[0],f=o-i[1],y=s-i[2],m=h*h+f*f+y*y;m>0&&(m=1/Math.sqrt(m),h*=m,f*=m,y*=m);let g=u*y-d*f,v=d*h-a*y,w=a*f-u*h;return m=g*g+v*v+w*w,m>0&&(m=1/Math.sqrt(m),g*=m,v*=m,w*=m),e[0]=g,e[1]=v,e[2]=w,e[3]=0,e[4]=f*w-y*v,e[5]=y*g-h*w,e[6]=h*v-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=y,e[11]=0,e[12]=n,e[13]=o,e[14]=s,e[15]=1,e}function rJ(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function nJ(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function oJ(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function fO(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function sJ(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function aJ(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function lJ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function uJ(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6],d=e[7],h=e[8],f=e[9],y=e[10],m=e[11],g=e[12],v=e[13],w=e[14],_=e[15],A=t[0],I=t[1],D=t[2],M=t[3],R=t[4],B=t[5],j=t[6],Y=t[7],ee=t[8],re=t[9],ue=t[10],ge=t[11],ne=t[12],Tt=t[13],br=t[14],lt=t[15];return Math.abs(i-A)<=be*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(r-I)<=be*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(n-D)<=be*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(o-M)<=be*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(s-R)<=be*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(a-B)<=be*Math.max(1,Math.abs(a),Math.abs(B))&&Math.abs(u-j)<=be*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(d-Y)<=be*Math.max(1,Math.abs(d),Math.abs(Y))&&Math.abs(h-ee)<=be*Math.max(1,Math.abs(h),Math.abs(ee))&&Math.abs(f-re)<=be*Math.max(1,Math.abs(f),Math.abs(re))&&Math.abs(y-ue)<=be*Math.max(1,Math.abs(y),Math.abs(ue))&&Math.abs(m-ge)<=be*Math.max(1,Math.abs(m),Math.abs(ge))&&Math.abs(g-ne)<=be*Math.max(1,Math.abs(g),Math.abs(ne))&&Math.abs(v-Tt)<=be*Math.max(1,Math.abs(v),Math.abs(Tt))&&Math.abs(w-br)<=be*Math.max(1,Math.abs(w),Math.abs(br))&&Math.abs(_-lt)<=be*Math.max(1,Math.abs(_),Math.abs(lt))}function cJ(e){const t=be,i=e[0],r=e[1],n=e[2],o=e[4],s=e[5],a=e[6],u=e[8],d=e[9],h=e[10];return Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(r*r+s*s+d*d))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const dJ=dO,pJ=fO;Object.freeze(Object.defineProperty({__proto__:null,copy:IZ,set:Ul,identity:gx,transpose:oa,invert:MZ,adjoint:NZ,determinant:RZ,multiply:dO,translate:PZ,scale:$Z,rotate:DZ,rotateX:LZ,rotateY:OZ,rotateZ:kZ,fromTranslation:pO,fromScaling:FZ,fromRotation:BZ,fromXRotation:UZ,fromYRotation:VZ,fromZRotation:jZ,fromRotationTranslation:hO,fromQuat2:zZ,getTranslation:GZ,getScaling:WZ,getRotation:qZ,fromRotationTranslationScale:YZ,fromRotationTranslationScaleOrigin:KZ,fromQuat:ZZ,frustum:JZ,perspective:XZ,perspectiveFromFieldOfView:QZ,ortho:eJ,lookAt:tJ,targetTo:iJ,str:rJ,frob:nJ,add:oJ,subtract:fO,multiplyScalar:sJ,multiplyScalarAndAdd:aJ,exactEquals:lJ,equals:uJ,isOrthoNormal:cJ,mul:dJ,sub:pJ},Symbol.toStringTag,{value:"Module"}));let ab,$=null;function yO(){return!!$}function hJ(){return!!k("esri-wasm")}function mO(){return ab||(ab=U(()=>import("./pe-wasm.41ba155b.js"),[],import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Ue(`esri/geometry/support/${t}`)})).then(e=>{vO(e)}),ab)}var SS,at,TS;(function(e){function t(o,s,a){$.ensureCache.prepare();const u=$u(a),d=a===u,h=$.ensureFloat64(u),f=$._pe_geog_to_proj($.getPointer(o),s,h);return f&&ll(a,s,h,d),f}function i(o,s,a,u){switch(u){case at.PE_TRANSFORM_P_TO_G:return r(o,s,a);case at.PE_TRANSFORM_G_TO_P:return t(o,s,a)}return 0}function r(o,s,a){return n(o,s,a,0)}function n(o,s,a,u){$.ensureCache.prepare();const d=$u(a),h=a===d,f=$.ensureFloat64(d),y=$._pe_proj_to_geog_center($.getPointer(o),s,f,u);return y&&ll(a,s,f,h),y}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=n})(SS||(SS={})),function(e){function t(){e.PE_BUFFER_MAX=$.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=$.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=$.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=$.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=$.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=$.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=$.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=$.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=$.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=$.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=$.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=$.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=$.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=$.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=$.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=$.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=$.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=$.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=$.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=$.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=$.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=$.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=$.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=$.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=$.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=$.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=$.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=$.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=$.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=$.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(at||(at={})),function(e){const t={},i={},r=m=>{if(m){const g=m.getType();switch(g){case at.PE_TYPE_GEOGCS:m=$.castObject(m,$.PeGeogcs);break;case at.PE_TYPE_PROJCS:m=$.castObject(m,$.PeProjcs);break;case at.PE_TYPE_GEOGTRAN:m=$.castObject(m,$.PeGeogtran);break;default:g&at.PE_TYPE_UNIT&&(m=$.castObject(m,$.PeUnit))}}return m};function n(){$.PeFactory.prototype.initialize(null)}function o(m){return s(at.PE_TYPE_COORDSYS,m)}function s(m,g){let v=null,w=t[m];if(w||(w={},t[m]=w),w.hasOwnProperty(String(g)))v=w[g];else{const _=$.PeFactory.prototype.factoryByType(m,g);$.compare(_,$.NULL)||(v=_,w[g]=v)}return v=r(v),v}function a(m,g){let v=null,w=i[m];if(w||(w={},i[m]=w),w.hasOwnProperty(g))v=w[g];else{const _=$.PeFactory.prototype.fromString(m,g);$.compare(_,$.NULL)||(v=_,w[g]=v)}return v=r(v),v}function u(m){return s(at.PE_TYPE_GEOGCS,m)}function d(m){return s(at.PE_TYPE_GEOGTRAN,m)}function h(m){return $.PeFactory.prototype.getCode(m)}function f(m){return s(at.PE_TYPE_PROJCS,m)}function y(m){return s(at.PE_TYPE_UNIT,m)}e.initialize=n,e.coordsys=o,e.factoryByType=s,e.fromString=a,e.geogcs=u,e.geogtran=d,e.getCode=h,e.projcs=f,e.unit=y}(TS||(TS={}));let gO=null;var I1,ES,AS,xS,M1,CS,N1,R1,IS;function vO(e){function t(o,s,a){o[s]=a(o[s])}$=e,at.init(),I1.init(),M1.init(),N1.init(),R1.init(),gO=class extends $.PeGCSExtent{destroy(){$.destroy(this)}};const i=[$.PeDatum,$.PeGeogcs,$.PeGeogtran,$.PeObject,$.PeParameter,$.PePrimem,$.PeProjcs,$.PeSpheroid,$.PeUnit];for(const o of i)t(o.prototype,"getName",s=>function(){return s.call(this,new Array(at.PE_NAME_MAX))});for(const o of[$.PeGeogtran,$.PeProjcs])t(o.prototype,"getParameters",s=>function(){const a=new Array(at.PE_PARM_MAX);let u=s.call(this);for(let d=0;d<a.length;d++){const h=$.getValue(u,"*");a[d]=h?$.wrapPointer(h,$.PeParameter):null,u+=Int32Array.BYTES_PER_ELEMENT}return a});t($.PeHorizon.prototype,"getCoord",o=>function(){const s=this.getSize();if(!s)return null;const a=[];return ll(a,s,o.call(this)),a}),t($.PeGTlistExtendedEntry.prototype,"getEntries",o=>{const s=$._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const u=o.call(this);if(!$.compare(u,$.NULL)){a=[u];const d=this.getSteps();if(d>1){const h=$.getPointer(u);for(let f=1;f<d;f++)a.push($.wrapPointer(h+s*f,$.PeGTlistExtendedGTs))}}return a}});const r=$._pe_getPeHorizonSize(),n=o=>function(){let s=this._cache;if(s||(s=new Map,this._cache=s),s.has(o))return s.get(o);let a=null;const u=o.call(this);if(!$.compare(u,$.NULL)){a=[u];const d=u.getNump();if(d>1){const h=$.getPointer(u);for(let f=1;f<d;f++)a.push($.wrapPointer(h+r*f,$.PeHorizon))}}return s.set(o,a),a};t($.PeProjcs.prototype,"horizonGcsGenerate",n),t($.PeProjcs.prototype,"horizonPcsGenerate",n),$.PeObject.prototype.toString=function(o=at.PE_STR_OPTS_NONE){$.ensureCache.prepare();const s=$.getPointer(this),a=$.ensureInt8(new Array(at.PE_BUFFER_MAX));return $.UTF8ToString($._pe_object_to_string_ext(s,o,a))}}function as(e){if(!e)return;const t=$.getClass(e);if(!t)return;const i=$.getCache(t);if(!i)return;const r=$.getPointer(e);r&&delete i[r]}function Vm(e,t){const i=[],r=new Array(t);for(let n=0;n<e;n++)i.push($.ensureInt8(r));return i}function $u(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function ll(e,t,i,r=!1){if(r)for(let n=0;n<2*t;n++)e[n]=$.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let o=0;o<t;o++)n&&(e[o]=new Array(2)),e[o][0]=$.getValue(i,"double"),e[o][1]=$.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=$.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=$._pe_getPeGTlistExtendedEntrySize()}function r(n,o,s,a,u,d){let h=null;const f=new $.PeInteger(d);try{const y=$.PeGTlistExtended.prototype.getGTlist(n,o,s,a,u,f);if((d=f.val)&&(h=[y],d>1)){const m=$.getPointer(y);for(let g=1;g<d;g++)h.push($.wrapPointer(m+t*g,$.PeGTlistExtendedEntry))}}finally{$.destroy(f)}return h}e.init=i,e.getGTlist=r})(I1||(I1={})),function(e){function t(i){if(i&&i.length){for(const r of i)as(r),r.getEntries().forEach(n=>{as(n);const o=n.getGeogtran();as(o),o.getParameters().forEach(as),[o.getGeogcs1(),o.getGeogcs2()].forEach(s=>{as(s);const a=s.getDatum();as(a),as(a.getSpheroid()),as(s.getPrimem()),as(s.getUnit())})});$.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(ES||(ES={})),function(e){function t(i,r,n,o,s){$.ensureCache.prepare();const a=$u(n),u=n===a,d=$.ensureFloat64(a);let h=0;o&&(h=$.ensureFloat64(o));const f=$._pe_geog_to_geog($.getPointer(i),r,d,h,s);return f&&ll(n,r,d,u),f}e.geogToGeog=t}(AS||(AS={})),function(e){const t=(d,h,f,y,m,g)=>{let v,w;switch($.ensureCache.prepare(),d){case"dd":v=$._pe_geog_to_dd,w=at.PE_DD_MAX;break;case"ddm":v=$._pe_geog_to_ddm,w=at.PE_DDM_MAX;break;case"dms":v=$._pe_geog_to_dms,w=at.PE_DMS_MAX}let _=0;h&&(_=$.getPointer(h));const A=$u(y),I=$.ensureFloat64(A),D=Vm(f,w),M=v(_,f,I,m,$.ensureInt32(D));if(M)for(let R=0;R<f;R++)g[R]=$.UTF8ToString(D[R]);return M},i=(d,h,f,y,m)=>{let g;switch($.ensureCache.prepare(),d){case"dd":g=$._pe_dd_to_geog;break;case"ddm":g=$._pe_ddm_to_geog;break;case"dms":g=$._pe_dms_to_geog}let v=0;h&&(v=$.getPointer(h));const w=y.map(D=>$.ensureString(D)),_=$.ensureInt32(w),A=$.ensureFloat64(new Array(2*f)),I=g(v,f,_,A);return I&&ll(m,f,A),I};function r(d,h,f,y,m){return t("dms",d,h,f,y,m)}function n(d,h,f,y){return i("dms",d,h,f,y)}function o(d,h,f,y,m){return t("ddm",d,h,f,y,m)}function s(d,h,f,y){return i("ddm",d,h,f,y)}function a(d,h,f,y,m){return t("dd",d,h,f,y,m)}function u(d,h,f,y){return i("dd",d,h,f,y)}e.geogToDms=r,e.dmsToGeog=n,e.geogToDdm=o,e.ddmToGeog=s,e.geogToDd=a,e.ddToGeog=u}(xS||(xS={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=$.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=$.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=$.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=$.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=$.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,o,s,a,u,d,h){$.ensureCache.prepare();let f=0;n&&(f=$.getPointer(n));const y=$u(s),m=$.ensureFloat64(y),g=Vm(o,at.PE_MGRS_MAX),v=$.ensureInt32(g),w=$._pe_geog_to_mgrs_extended(f,o,m,a,u,d,v);if(w)for(let _=0;_<o;_++)h[_]=$.UTF8ToString(g[_]);return w}function r(n,o,s,a,u){$.ensureCache.prepare();let d=0;n&&(d=$.getPointer(n));const h=s.map(g=>$.ensureString(g)),f=$.ensureInt32(h),y=$.ensureFloat64(new Array(2*o)),m=$._pe_mgrs_to_geog_extended(d,o,f,a,y);return m&&ll(u,o,y),m}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(M1||(M1={})),function(e){function t(r,n,o,s,a,u,d){$.ensureCache.prepare();let h=0;r&&(h=$.getPointer(r));const f=$u(o),y=$.ensureFloat64(f),m=Vm(n,at.PE_MGRS_MAX),g=$.ensureInt32(m),v=$._pe_geog_to_usng(h,n,y,s,a,u,g);if(v)for(let w=0;w<n;w++)d[w]=$.UTF8ToString(m[w]);return v}function i(r,n,o,s){$.ensureCache.prepare();let a=0;r&&(a=$.getPointer(r));const u=o.map(y=>$.ensureString(y)),d=$.ensureInt32(u),h=$.ensureFloat64(new Array(2*n)),f=$._pe_usng_to_geog(a,n,d,h);return f&&ll(s,n,h),f}e.geogToUsng=t,e.usngToGeog=i}(CS||(CS={})),function(e){function t(){e.PE_UTM_OPTS_NONE=$.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=$.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=$.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,o,s,a,u){$.ensureCache.prepare();let d=0;n&&(d=$.getPointer(n));const h=$u(s),f=$.ensureFloat64(h),y=Vm(o,at.PE_UTM_MAX),m=$.ensureInt32(y),g=$._pe_geog_to_utm(d,o,f,a,m);if(g)for(let v=0;v<o;v++)u[v]=$.UTF8ToString(y[v]);return g}function r(n,o,s,a,u){$.ensureCache.prepare();let d=0;n&&(d=$.getPointer(n));const h=s.map(g=>$.ensureString(g)),f=$.ensureInt32(h),y=$.ensureFloat64(new Array(2*o)),m=$._pe_utm_to_geog(d,o,f,a,y);return m&&ll(u,o,y),m}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(N1||(N1={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=$.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=$.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=$.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=$.PePCSInfo.prototype.PE_POLE_POINT}function r(n,o=e.PE_PCSINFO_OPTION_DOMAIN){let s,a;return t.has(n)&&(a=t.get(n),a[o]&&(s=a[o])),s||(s=$.PePCSInfo.prototype.generate(n,o),a||(a=[],t.set(n,a)),a[o]=s),s}e.init=i,e.generate=r}(R1||(R1={})),function(e){function t(){return $.PeVersion.prototype.version_string()}e.versionString=t}(IS||(IS={}));const fJ=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return $},isLoaded:yO,isSupported:hJ,load:mO,get PeCSTransformations(){return SS},get PeDefs(){return at},get PeFactory(){return TS},get PeGCSExtent(){return gO},get PeGTlistExtended(){return I1},get PeGTlistExtendedEntry(){return ES},get PeGTTransformations(){return AS},get PeNotationDms(){return xS},get PeNotationMgrs(){return M1},get PeNotationUsng(){return CS},get PeNotationUtm(){return N1},get PePCSInfo(){return R1},get PeVersion(){return IS},_init:vO},Symbol.toStringTag,{value:"Module"})),ha=nt.radius,En=nt.eccentricitySquared,yJ={a1:ha*En,a2:ha*En*ha*En,a3:ha*En*En/2,a4:ha*En*ha*En*2.5,a5:ha*En+ha*En*En/2,a6:1-En};1/294.9786982,1/298.257222101,nt.radius,nt.flattening,Ml.radius,Ml.flattening,1/192.0430107526882,Ws.radius,Ws.flattening,1/10.2079945799458,1/43.61604095563141,Ws.radius;let jm=0;class Jd{constructor(t=null){this.uid=jm++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new Jd;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=jm++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=jm++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=jm++}getInverse(){const t=new Jd;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class ml{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof Jd?this.steps.push(i):this.steps.push(new Jd({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new ml;let r="";for(const n of t.steps){const o=Jd.fromGE(n);i.steps.push(o),r+=o.uid.toString()+","}return i._cached_projection={},i._gtlistentry=null,i._chain=r,i}getInverse(){const t=new ml;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cached_projection[ml.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const o of this.steps)r+=o.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);const n=this._cached_projection[ml.cacheKey(t,i)];return n===void 0?null:n}}function wO(e,t,i){if(O(t)||O(i)||i.vcsWkid||Qi(t,i))return null;const r=bp(t)/bp(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>mJ(n,r);case"polyline":case"esriGeometryPolyline":return n=>vJ(n,r);case"polygon":case"esriGeometryPolygon":return n=>gJ(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>wJ(n,r);case"extent":case"esriGeometryExtent":return n=>bJ(n,r);default:return null}}function mJ(e,t){e&&e.z!=null&&(e.z*=t)}function gJ(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function vJ(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function wJ(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function bJ(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let _l=null,P1=null,lb=null,ub={};const bO=new w5;function Sc(){return!!_l&&yO()}function Tc(e){return O(lb)&&(lb=Promise.all([mO(),U(()=>import("./geometryEngineBase.cf4f989f.js"),[],import.meta.url).then(t=>t.g),U(()=>import("./hydrated.4d858bfb.js"),[],import.meta.url)])),lb.then(([,t,{hydratedAdapter:i}])=>{_t(e),P1=i,_l=t.default,_l._enableProjection(fJ),bO.notify()})}function Gp(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:eM(P1,e,e[0].spatialReference,t,i,r):eM(P1,[e],e.spatialReference,t,i,r)[0]}function eM(e,t,i,r,n=null,o=null){if(O(i)||O(r))return t;if($l(i,r,n))return t.map(s=>TJ(s,i,r));if(O(n)){const s=ml.cacheKey(i,r);ub[s]!==void 0?n=ub[s]:(n=_J(i,r,null),O(n)&&(n=new ml),ub[s]=n)}if(O(_l))throw new vx;return T(o)?_l._project(e,t,i,r,n,o):_l._project(e,t,i,r,n)}function k1e(e,t){return O(e)?{pending:null,geometry:null}:Qi(e.spatialReference,t)?{pending:null,geometry:e}:Ri(e.spatialReference)&&Ri(t)?$l(e.spatialReference,t)||Sc()?{pending:null,geometry:SJ(e,t)}:(Ee(bO),{pending:Tc(),geometry:null}):{pending:null,geometry:null}}function _J(e,t,i=null){if(O(_l))throw new vx;if(O(e)||O(t))return null;const r=_l._getTransformation(P1,e,t,i,i==null?void 0:i.spatialReference);return r!==null?ml.fromGE(r):null}class vx extends N{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var x;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(x||(x={}));function SJ(e,t){try{const i=Gp(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=wO(i.type,e.spatialReference,t);return T(r)&&r(i),i}catch(i){if(!(i instanceof vx))throw i;return null}}function $l(e,t,i){return!i&&(!!Qi(e,t)||Ri(e)&&Ri(t)&&!!EO(e,t,AO))}async function F1e(e,t,i,r){if(Sc())return WC(r);if(Array.isArray(e)){for(const{source:n,dest:o,geographicTransformation:s}of e)if(!$l(n,o,s))return Tc(r)}else if(!$l(e,t,i))return Tc(r);return WC(r)}function TJ(e,t,i){return e?"x"in e?EJ(e,t,new le,i,0):"xmin"in e?CJ(e,t,new Oe,i,0):"rings"in e?_O(e,t,new mr,i,0):"paths"in e?xJ(e,t,new Hi,i,0):"points"in e?AJ(e,t,new Bp,i,0):null:null}function EJ(e,t,i,r,n){Ut[0]=e.x,Ut[1]=e.y;const o=e.z;return Ut[2]=o!==void 0?o:n,tm(Ut,t,0,Ut,r,0,1)?(i.x=Ut[0],i.y=Ut[1],i.spatialReference=r,o===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Ut[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function AJ(e,t,i,r,n){const{points:o,hasZ:s,hasM:a}=e,u=[],d=o.length,h=[];for(const f of o)h.push(f[0],f[1],s?f[2]:n);if(!tm(h,t,0,h,r,0,d))return null;for(let f=0;f<d;++f){const y=3*f,m=h[y],g=h[y+1];s&&a?u.push([m,g,h[y+2],o[f][3]]):s?u.push([m,g,h[y+2]]):a?u.push([m,g,o[f][2]]):u.push([m,g])}return i.points=u,i.spatialReference=r,i.hasZ=s,i.hasM=a,i}function xJ(e,t,i,r,n){const{paths:o,hasZ:s,hasM:a}=e,u=[];return SO(o,s,a,t,u,r,n)?(i.paths=u,i.spatialReference=r,i.hasZ=s,i.hasM=a,i):null}function B1e(e,t,i=t.spatialReference,r=0){return T(i)&&T(_O(e,e.spatialReference,t,i,r))}function _O(e,t,i,r,n){const{rings:o,hasZ:s,hasM:a}=e,u=[];return SO(o,s,a,t,u,r,n)?(i.rings=u,i.spatialReference=r,i.hasZ=s,i.hasM=a,i):null}function CJ(e,t,i,r,n){const{xmin:o,ymin:s,xmax:a,ymax:u,hasZ:d,hasM:h}=e;return tM(o,s,d?e.zmin:n,t,Ut,r)?(i.xmin=Ut[0],i.ymin=Ut[1],d&&(i.zmin=Ut[2]),tM(a,u,d?e.zmax:n,t,Ut,r)?(i.xmax=Ut[0],i.ymax=Ut[1],d&&(i.zmax=Ut[2]),h&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function U1e(e,t,i,r=0){Ut[0]=e.x,Ut[1]=e.y;const n=e.z;return Ut[2]=n!==void 0?n:r,tm(Ut,e.spatialReference,0,t,i,0,1)}function tM(e,t,i,r,n,o){return zm[0]=e,zm[1]=t,zm[2]=i,tm(zm,r,0,n,o,0,1)}function tm(e,t,i,r,n,o,s=1){const a=EO(t,n,AO);if(O(a))return!1;if(a===Xe){if(e===r&&i===o)return!0;const d=i+3*s;for(let h=i,f=o;h<d;h++,f++)r[f]=e[h];return!0}const u=i+3*s;for(let d=i,h=o;d<u;d+=3,h+=3)a(e,d,r,h);return!0}function SO(e,t,i,r,n,o,s=0){const a=new Array;for(const d of e)for(const h of d)a.push(h[0],h[1],t?h[2]:s);if(!tm(a,r,0,a,o,0,a.length/3))return!1;let u=0;n.length=0;for(const d of e){const h=new Array;for(const f of d)t&&i?h.push([a[u++],a[u++],a[u++],f[3]]):t?h.push([a[u++],a[u++],a[u++]]):i?(h.push([a[u++],a[u++],f[2]]),u++):(h.push([a[u++],a[u++]]),u++);n.push(h)}return!0}function V1e(e,t,i,r){if(O(e)||O(r))return!1;const n=$1(e,HJ),o=$1(r,GJ);if(n===o&&!iM(o)&&(n!==x.UNKNOWN||Qi(e,r)))return pO(i,t),!0;if(iM(o)){const s=sf[n][x.LON_LAT],a=sf[x.LON_LAT][o];return!O(s)&&!O(a)&&(s(t,0,fa,0),a(fa,0,ya,0),TO(Uo*fa[0],Uo*fa[1],i),i[12]=ya[0],i[13]=ya[1],i[14]=ya[2],!0)}if((o===x.WEB_MERCATOR||o===x.PLATE_CARREE)&&(n===x.WGS84||n===x.CGCS2000&&o===x.PLATE_CARREE||n===x.SPHERICAL_ECEF||n===x.WEB_MERCATOR)){const s=sf[n][x.LON_LAT],a=sf[x.LON_LAT][o];return!O(s)&&!O(a)&&(s(t,0,fa,0),a(fa,0,ya,0),n===x.SPHERICAL_ECEF?IJ(Uo*fa[0],Uo*fa[1],i):gx(i),i[12]=ya[0],i[13]=ya[1],i[14]=ya[2],!0)}return!1}function iM(e){return e===x.SPHERICAL_ECEF||e===x.SPHERICAL_MARS_PCPF||e===x.SPHERICAL_MOON_PCPF}function TO(e,t,i){const r=Math.sin(e),n=Math.cos(e),o=Math.sin(t),s=Math.cos(t),a=i;return a[0]=-r,a[4]=-o*n,a[8]=s*n,a[12]=0,a[1]=n,a[5]=-o*r,a[9]=s*r,a[13]=0,a[2]=0,a[6]=s,a[10]=o,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function IJ(e,t,i){return TO(e,t,i),oa(i,i),i}function $1(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Bl(e,1)),e.wkt===tO.wkt?t.spatialReferenceId=x.SPHERICAL_ECEF:dy(e)?t.spatialReferenceId=x.WGS84:mc(e)?t.spatialReferenceId=x.WEB_MERCATOR:PH(e)?t.spatialReferenceId=x.PLATE_CARREE:e.wkt===pZ.wkt?t.spatialReferenceId=x.WGS84_ECEF:e.wkid===yc.CGCS2000?t.spatialReferenceId=x.CGCS2000:e.wkt===x1.wkt?t.spatialReferenceId=x.SPHERICAL_MARS_PCPF:e.wkt===C1.wkt?t.spatialReferenceId=x.SPHERICAL_MOON_PCPF:Ov(e)?t.spatialReferenceId=x.GCSMARS2000:kv(e)?t.spatialReferenceId=x.GCSMOON2000:t.spatialReferenceId=x.UNKNOWN)}function Xe(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function Xd(e,t,i,r){i[r++]=_p*(e[t++]/nt.radius),i[r++]=_p*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/nt.radius))),i[r]=e[t]}function MJ(e,t,i,r){Xd(e,t,i,r),Ku(i,r,i,r)}function NJ(e,t,i,r){Xd(e,t,i,r),Ju(i,r,i,r)}function RJ(e,t,i,r,n){const o=.4999999*Math.PI,s=yr(Uo*e[t+1],-o,o),a=Math.sin(s);i[r++]=Uo*e[t]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=e[t+2]}function Ty(e,t,i,r){RJ(e,t,i,r,nt)}const rM=nt.radius*Math.PI/180,nM=180/(nt.radius*Math.PI);function qu(e,t,i,r){i[r]=e[t]*rM,i[r+1]=e[t+1]*rM,i[r+2]=e[t+2]}function Yu(e,t,i,r){i[r]=e[t]*nM,i[r+1]=e[t+1]*nM,i[r+2]=e[t+2]}function PJ(e,t,i,r){Xd(e,t,i,r),qu(i,r,i,r)}function $J(e,t,i,r){Xu(e,t,i,r),qu(i,r,i,r)}function DJ(e,t,i,r){Zu(e,t,i,r),qu(i,r,i,r)}function LJ(e,t,i,r){Yu(e,t,i,r),Ku(i,r,i,r)}function OJ(e,t,i,r){Yu(e,t,i,r),Ty(i,r,i,r)}function kJ(e,t,i,r){Yu(e,t,i,r),Ju(i,r,i,r)}function wx(e,t,i,r,n){const o=n+e[t+2],s=Uo*e[t+1],a=Uo*e[t],u=Math.cos(s);i[r++]=Math.cos(a)*u*o,i[r++]=Math.sin(a)*u*o,i[r]=Math.sin(s)*o}function oM(e,t,i,r){wx(e,t,i,r,Ml.radius)}function sM(e,t,i,r){wx(e,t,i,r,Ws.radius)}function Ku(e,t,i,r){wx(e,t,i,r,nt.radius)}function bx(e,t,i,r,n){const o=e[t],s=e[t+1],a=e[t+2],u=Math.sqrt(o*o+s*s+a*a),d=ML(a/(u===0?1:u)),h=Math.atan2(s,o);i[r++]=_p*h,i[r++]=_p*d,i[r]=u-n}function aM(e,t,i,r){bx(e,t,i,r,Ml.radius)}function lM(e,t,i,r){bx(e,t,i,r,Ws.radius)}function Zu(e,t,i,r){bx(e,t,i,r,nt.radius)}function FJ(e,t,i,r){Zu(e,t,i,r),Ty(i,r,i,r)}function BJ(e,t,i,r){Zu(e,t,i,r),Ju(i,r,i,r)}function UJ(e,t,i,r,n){const o=Uo*e[t],s=Uo*e[t+1],a=e[t+2],u=Math.sin(s),d=Math.cos(s),h=n.radius/Math.sqrt(1-n.eccentricitySquared*u*u);i[r++]=(h+a)*d*Math.cos(o),i[r++]=(h+a)*d*Math.sin(o),i[r++]=(h*(1-n.eccentricitySquared)+a)*u}function Ju(e,t,i,r){UJ(e,t,i,r,nt)}function Xu(e,t,i,r){const n=yJ,o=e[t],s=e[t+1],a=e[t+2];let u,d,h,f,y,m,g,v,w,_,A,I,D,M,R,B,j,Y,ee,re,ue;u=Math.abs(a),d=o*o+s*s,h=Math.sqrt(d),f=d+a*a,y=Math.sqrt(f),re=Math.atan2(s,o),m=a*a/f,g=d/f,M=n.a2/y,R=n.a3-n.a4/y,g>.3?(v=u/y*(1+g*(n.a1+M+m*R)/y),ee=Math.asin(v),_=v*v,w=Math.sqrt(1-_)):(w=h/y*(1-m*(n.a5-M-g*R)/y),ee=Math.acos(w),_=1-w*w,v=Math.sqrt(_)),A=1-nt.eccentricitySquared*_,I=nt.radius/Math.sqrt(A),D=n.a6*I,M=h-I*w,R=u-D*v,j=w*M+v*R,B=w*R-v*M,Y=B/(D/A+j),ee+=Y,ue=j+B*Y/2,a<0&&(ee=-ee),i[r++]=_p*re,i[r++]=_p*ee,i[r]=ue}function VJ(e,t,i,r){Xu(e,t,i,r),Ku(i,r,i,r)}function jJ(e,t,i,r){Xu(e,t,i,r),Ty(i,r,i,r)}const sf={[x.WGS84]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:Xe,[x.SPHERICAL_ECEF]:Ku,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Ty,[x.PLATE_CARREE]:qu,[x.WGS84]:Xe,[x.WGS84_ECEF]:Ju},[x.CGCS2000]:{[x.CGCS2000]:Xe,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:Xe,[x.SPHERICAL_ECEF]:Ku,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:qu,[x.WGS84]:null,[x.WGS84_ECEF]:Ju},[x.GCSMARS2000]:{[x.CGCS2000]:null,[x.GCSMARS2000]:Xe,[x.GCSMOON2000]:null,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:sM,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.GCSMOON2000]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:Xe,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:oM,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.WEB_MERCATOR]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Xd,[x.WGS84_COMPARABLE_LON_LAT]:Xd,[x.SPHERICAL_ECEF]:MJ,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Xe,[x.PLATE_CARREE]:PJ,[x.WGS84]:Xd,[x.WGS84_ECEF]:NJ},[x.WGS84_ECEF]:{[x.CGCS2000]:Xu,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Xu,[x.WGS84_COMPARABLE_LON_LAT]:Xu,[x.SPHERICAL_ECEF]:VJ,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:jJ,[x.PLATE_CARREE]:$J,[x.WGS84]:Xu,[x.WGS84_ECEF]:Xe},[x.SPHERICAL_ECEF]:{[x.CGCS2000]:Zu,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Zu,[x.WGS84_COMPARABLE_LON_LAT]:Zu,[x.SPHERICAL_ECEF]:Xe,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:FJ,[x.PLATE_CARREE]:DJ,[x.WGS84]:Zu,[x.WGS84_ECEF]:BJ},[x.SPHERICAL_MARS_PCPF]:{[x.CGCS2000]:null,[x.GCSMARS2000]:lM,[x.GCSMOON2000]:null,[x.LON_LAT]:lM,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:Xe,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.SPHERICAL_MOON_PCPF]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:aM,[x.LON_LAT]:aM,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:Xe,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.UNKNOWN]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:null,[x.WGS84_COMPARABLE_LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:Xe,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.LON_LAT]:{[x.CGCS2000]:Xe,[x.GCSMARS2000]:Xe,[x.GCSMOON2000]:Xe,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:Xe,[x.SPHERICAL_ECEF]:Ku,[x.SPHERICAL_MARS_PCPF]:sM,[x.SPHERICAL_MOON_PCPF]:oM,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Ty,[x.PLATE_CARREE]:qu,[x.WGS84]:Xe,[x.WGS84_ECEF]:Ju},[x.WGS84_COMPARABLE_LON_LAT]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Xe,[x.WGS84_COMPARABLE_LON_LAT]:Xe,[x.SPHERICAL_ECEF]:Ku,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:qu,[x.WGS84]:Xe,[x.WGS84_ECEF]:Ju},[x.PLATE_CARREE]:{[x.CGCS2000]:Yu,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Yu,[x.WGS84_COMPARABLE_LON_LAT]:Yu,[x.SPHERICAL_ECEF]:LJ,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:OJ,[x.PLATE_CARREE]:Xe,[x.WGS84]:Yu,[x.WGS84_ECEF]:kJ}};function EO(e,t,i=_x()){return O(e)||O(t)?null:zJ(e,t,i).projector}function zJ(e,t,i){if(O(e)||O(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=$1(e,i.source),n=$1(t,i.dest);return r===x.UNKNOWN&&n===x.UNKNOWN?Qi(e,t)?i.projector=Xe:i.projector=null:i.projector=sf[r][n],i}function _x(){return{source:{spatialReference:null,spatialReferenceId:x.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:x.UNKNOWN,metersPerUnit:1},projector:Xe}}const HJ={spatialReference:null,spatialReferenceId:x.UNKNOWN},GJ={spatialReference:null,spatialReferenceId:x.UNKNOWN},AO=_x();_x();const Uo=pq(1),_p=IL(1),zm=ts(),fa=ts(),ya=ts(),Ut=ts();var MS;let Co=MS=class extends V{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new MS({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};l([c({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Co.prototype,"cols",void 0),l([c({type:Qe,json:{write:!0}})],Co.prototype,"level",void 0),l([c({type:String,json:{write:!0}})],Co.prototype,"levelValue",void 0),l([c({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Co.prototype,"origin",void 0),l([c({type:Number,json:{write:!0}})],Co.prototype,"resolution",void 0),l([c({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Co.prototype,"rows",void 0),l([c({type:Number,json:{write:!0}})],Co.prototype,"scale",void 0),Co=MS=l([S("esri.layers.support.LOD")],Co);const Sx=Co;var Oa;const uM=new Se({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Gt=Oa=class extends V{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:n=me.WebMercator,numLODs:o=24}=e;if(!Ri(n)){const f=[];if(i)for(let y=0;y<i.length;y++){const m=i[y];f.push({level:y,scale:m,resolution:m})}else{let y=5e-4;for(let m=o-1;m>=0;m--)f.unshift({level:m,scale:y,resolution:y}),y*=2}return new Oa({dpi:96,lods:f,origin:new le(0,0,n),size:[r,r],spatialReference:n})}const s=so(n),a=e.origin?new le({x:e.origin.x,y:e.origin.y,spatialReference:n}):new le(s?{x:s.origin[0],y:s.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),u=96,d=1/(Bl(n)*39.37*u),h=[];if(i)for(let f=0;f<i.length;f++){const y=i[f],m=y*d;h.push({level:f,scale:y,resolution:m})}else{let f=j5(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const y=Math.ceil(o/t);h.push({level:0,scale:f,resolution:f*d});for(let m=1;m<y;m++){const g=f/2**t,v=g*d;h.push({level:m,scale:g,resolution:v}),f=g}}return new Oa({dpi:u,lods:h,origin:a,size:[r,r],spatialReference:n})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=so(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return le.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach(n=>{r.push(n.scale),t=n.scale>t?n.scale:t,i=n.scale<i?n.scale:i,this._levelToLOD[n.level]=n})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const n=t[r],o=t[r+1];if(n<=e)return r;if(o===e)return r+1;if(n>e&&o<e)return r+Math.log(n/e)/Math.log(n/o)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let o,s;if(typeof t=="number")o=t,s=i;else if(Qi(t.spatialReference,this.spatialReference))o=t.x,s=t.y,r=i;else{const d=Fv(t,this.spatialReference);if(O(d))return null;o=d.x,s=d.y,r=i}const a=n.resolution*this.size[0],u=n.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Pl()}),r.level=e,r.row=Math.floor((this.origin.y-s)/u+.001),r.col=Math.floor((o-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=Oa.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Oa.ExtrapolateOptions.POWER_OF_TWO){const s=this.lods[this.lods.length-1];s.level<e.level&&(i=s)}if(!i)return;const r=e.level-i.level,n=i.resolution*this.size[0]/2**r,o=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Pl()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+r,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return Oa.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let n=0;n<r;n++){const o=this.lods[n],s=o.resolution*t;i.push(new Sx({level:o.level,scale:o.scale,resolution:s}))}return new Oa({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};l([c({type:Number,json:{write:!0}})],Gt.prototype,"compressionQuality",void 0),l([c({type:Number,json:{write:!0}})],Gt.prototype,"dpi",void 0),l([c({type:String,json:{read:uM.read,write:uM.write,origins:{"web-scene":{read:!1,write:!1}}}})],Gt.prototype,"format",void 0),l([c({readOnly:!0})],Gt.prototype,"isWrappable",null),l([c({type:le,json:{write:!0}})],Gt.prototype,"origin",void 0),l([K("origin")],Gt.prototype,"readOrigin",null),l([c({type:[Sx],value:null,json:{write:!0}})],Gt.prototype,"lods",null),l([c({readOnly:!0})],Gt.prototype,"minScale",void 0),l([c({readOnly:!0})],Gt.prototype,"maxScale",void 0),l([c({readOnly:!0})],Gt.prototype,"scales",void 0),l([c({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Gt.prototype,"size",void 0),l([K("size",["rows","cols"])],Gt.prototype,"readSize",null),l([X("size",{cols:{type:Qe},rows:{type:Qe}})],Gt.prototype,"writeSize",null),l([c({type:me,json:{write:!0}})],Gt.prototype,"spatialReference",void 0),Gt=Oa=l([S("esri.layers.support.TileInfo")],Gt),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Gt||(Gt={}));const Us=Gt,pg={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},cb={xsmall:544,small:768,medium:992,large:1200};function WJ(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function db(e,t){return t?pg[e].valueToClassName[t].split(" "):[]}const qJ=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new gi,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=cb}initialize(){this._breakpointsHandles.add(q(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),ze))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=on(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=WJ(i);if(!r){const n=JSON.stringify(cb,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}i=r?i:cb,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=ji.acquire(),r=ji.acquire();let n,o=!1;for(n in pg){const s=this[n],a=pg[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});s!==a&&(o=!0,this[n]=a,db(n,s).forEach(u=>r.push(u)),db(n,a).forEach(u=>i.push(u)))}o&&(this._applyClassNameChanges(i,r),ji.release(i),ji.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(o=>n.classList.remove(o)),i.forEach(o=>n.classList.add(o)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in pg)db(r,this[r]).forEach(n=>i.classList.remove(n))}};return l([c()],t.prototype,"breakpoints",null),l([c()],t.prototype,"orientation",void 0),l([c()],t.prototype,"widthBreakpoint",void 0),l([c()],t.prototype,"heightBreakpoint",void 0),t=l([S("esri.views.BreakpointsOwner")],t),t};function Tx(e){return typeof e=="string"?document.getElementById(e):e}function xO(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function cM(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function dM(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var YJ="[object Object]";function KJ(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function ZJ(e,t){return function(i){return e(t(i))}}var JJ=Function.prototype,CO=Object.prototype,IO=JJ.toString,XJ=CO.hasOwnProperty,QJ=IO.call(Object),eX=CO.toString,tX=ZJ(Object.getPrototypeOf,Object);function iX(e){return!!e&&typeof e=="object"}function rX(e){if(!iX(e)||eX.call(e)!=YJ||KJ(e))return!1;var t=tX(e);if(t===null)return!0;var i=XJ.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&IO.call(i)==QJ}var nX=rX,Du={exports:{}},St={},Ey={exports:{}},Lc={};function MO(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function oX(e,t,i){}function sX(e,t,i){}var aX=/javascript\s*\:/img;function lX(e,t){return aX.test(t)?"":t}Lc.whiteList=MO();Lc.getDefaultWhiteList=MO;Lc.onAttr=oX;Lc.onIgnoreAttr=sX;Lc.safeAttrValue=lX;var uX={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},yh=uX;function cX(e,t){e=yh.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,n=0,o=0,s="";function a(){if(!r){var h=yh.trim(e.slice(n,o)),f=h.indexOf(":");if(f!==-1){var y=yh.trim(h.slice(0,f)),m=yh.trim(h.slice(f+1));if(y){var g=t(n,s.length,y,m,h);g&&(s+=g+"; ")}}}n=o+1}for(;o<i;o++){var u=e[o];if(u==="/"&&e[o+1]==="*"){var d=e.indexOf("*/",o+2);if(d===-1)break;o=d+1,n=o+1,r=!1}else u==="("?r=!0:u===")"?r=!1:u===";"?r||a():u===`
`&&a()}return yh.trim(s)}var dX=cX,Hm=Lc,pX=dX;function pM(e){return e==null}function hX(e){var t={};for(var i in e)t[i]=e[i];return t}function NO(e){e=hX(e||{}),e.whiteList=e.whiteList||Hm.whiteList,e.onAttr=e.onAttr||Hm.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Hm.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Hm.safeAttrValue,this.options=e}NO.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onAttr,o=i.onIgnoreAttr,s=i.safeAttrValue,a=pX(e,function(u,d,h,f,y){var m=r[h],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(f):m instanceof RegExp&&(g=m.test(f)),g!==!0&&(g=!1),f=s(h,f),!!f){var v={position:d,sourcePosition:u,source:y,isWhite:g};if(g){var w=n(h,f,v);return pM(w)?h+":"+f:w}else{var w=o(h,f,v);if(!pM(w))return w}}});return a};var fX=NO;(function(e,t){var i=Lc,r=fX;function n(s,a){var u=new r(a);return u.process(s)}t=e.exports=n,t.FilterCSS=r;for(var o in i)t[o]=i[o]})(Ey,Ey.exports);var Ex={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},yX=Ey.exports.FilterCSS,mX=Ey.exports.getDefaultWhiteList,D1=Ex;function RO(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var PO=new yX;function gX(e,t,i){}function vX(e,t,i){}function wX(e,t,i){}function bX(e,t,i){}function $O(e){return e.replace(SX,"&lt;").replace(TX,"&gt;")}function _X(e,t,i,r){if(i=BO(i),t==="href"||t==="src"){if(i=D1.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(Gm.lastIndex=0,Gm.test(i))return""}else if(t==="style"){if(hM.lastIndex=0,hM.test(i)||(fM.lastIndex=0,fM.test(i)&&(Gm.lastIndex=0,Gm.test(i))))return"";r!==!1&&(r=r||PO,i=r.process(i))}return i=UO(i),i}var SX=/</g,TX=/>/g,EX=/"/g,AX=/&quot;/g,xX=/&#([a-zA-Z0-9]*);?/gim,CX=/&colon;?/gim,IX=/&newline;?/gim,Gm=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,hM=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,fM=/u\s*r\s*l\s*\(.*/gi;function DO(e){return e.replace(EX,"&quot;")}function LO(e){return e.replace(AX,'"')}function OO(e){return e.replace(xX,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function kO(e){return e.replace(CX,":").replace(IX," ")}function FO(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return D1.trim(t)}function BO(e){return e=LO(e),e=OO(e),e=kO(e),e=FO(e),e}function UO(e){return e=DO(e),e=$O(e),e}function MX(){return""}function NX(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(s){return i?!0:D1.indexOf(e,s)!==-1}var n=[],o=!1;return{onIgnoreTag:function(s,a,u){if(r(s))if(u.isClosing){var d="[/removed]",h=u.position+d.length;return n.push([o!==!1?o:u.position,h]),o=!1,d}else return o||(o=u.position),"[removed]";else return t(s,a,u)},remove:function(s){var a="",u=0;return D1.forEach(n,function(d){a+=s.slice(u,d[0]),u=d[1]}),a+=s.slice(u),a}}}function RX(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var n=e.indexOf("-->",r);if(n===-1)break;i=n+3}return t}function PX(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}St.whiteList=RO();St.getDefaultWhiteList=RO;St.onTag=gX;St.onIgnoreTag=vX;St.onTagAttr=wX;St.onIgnoreTagAttr=bX;St.safeAttrValue=_X;St.escapeHtml=$O;St.escapeQuote=DO;St.unescapeQuote=LO;St.escapeHtmlEntities=OO;St.escapeDangerHtml5Entities=kO;St.clearNonPrintableCharacter=FO;St.friendlyAttrValue=BO;St.escapeAttrValue=UO;St.onIgnoreTagStripAll=MX;St.StripTagBody=NX;St.stripCommentTag=RX;St.stripBlankChar=PX;St.cssFilter=PO;St.getDefaultCSSWhiteList=mX;var Zv={},il=Ex;function $X(e){var t=il.spaceIndex(e);if(t===-1)var i=e.slice(1,-1);else var i=e.slice(1,t+1);return i=il.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function DX(e){return e.slice(0,2)==="</"}function LX(e,t,i){var r="",n=0,o=!1,s=!1,a=0,u=e.length,d="",h="";e:for(a=0;a<u;a++){var f=e.charAt(a);if(o===!1){if(f==="<"){o=a;continue}}else if(s===!1){if(f==="<"){r+=i(e.slice(n,a)),o=a,n=a;continue}if(f===">"){r+=i(e.slice(n,o)),h=e.slice(o,a+1),d=$X(h),r+=t(o,r.length,d,h,DX(h)),n=a+1,o=!1;continue}if(f==='"'||f==="'")for(var y=1,m=e.charAt(a-y);m.trim()===""||m==="=";){if(m==="="){s=f;continue e}m=e.charAt(a-++y)}}else if(f===s){s=!1;continue}}return n<e.length&&(r+=i(e.substr(n))),r}var OX=/[^a-zA-Z0-9_:\.\-]/gim;function kX(e,t){var i=0,r=[],n=!1,o=e.length;function s(f,y){if(f=il.trim(f),f=f.replace(OX,"").toLowerCase(),!(f.length<1)){var m=t(f,y||"");m&&r.push(m)}}for(var a=0;a<o;a++){var u=e.charAt(a),d,h;if(n===!1&&u==="="){n=e.slice(i,a),i=a+1;continue}if(n!==!1&&a===i&&(u==='"'||u==="'")&&e.charAt(a-1)==="="){if(h=e.indexOf(u,a+1),h===-1)break;d=il.trim(e.slice(i+1,h)),s(n,d),n=!1,a=h,i=a+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(h=FX(e,a),h===-1){d=il.trim(e.slice(i,a)),s(d),n=!1,i=a+1;continue}else{a=h-1;continue}else if(h=BX(e,a-1),h===-1){d=il.trim(e.slice(i,a)),d=yM(d),s(n,d),n=!1,i=a+1;continue}else continue}return i<e.length&&(n===!1?s(e.slice(i)):s(n,yM(il.trim(e.slice(i))))),il.trim(r.join(" "))}function FX(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function BX(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function UX(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function yM(e){return UX(e)?e.substr(1,e.length-2):e}Zv.parseTag=LX;Zv.parseAttr=kX;var VX=Ey.exports.FilterCSS,qn=St,VO=Zv,jX=VO.parseTag,zX=VO.parseAttr,hg=Ex;function Wm(e){return e==null}function HX(e){var t=hg.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=hg.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=hg.trim(e.slice(0,-1))),{html:e,closing:i}}function GX(e){var t={};for(var i in e)t[i]=e[i];return t}function jO(e){e=GX(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=qn.onIgnoreTagStripAll),e.whiteList=e.whiteList||e.allowList||qn.whiteList,e.onTag=e.onTag||qn.onTag,e.onTagAttr=e.onTagAttr||qn.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||qn.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||qn.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||qn.safeAttrValue,e.escapeHtml=e.escapeHtml||qn.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new VX(e.css))}jO.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onTag,o=i.onIgnoreTag,s=i.onTagAttr,a=i.onIgnoreTagAttr,u=i.safeAttrValue,d=i.escapeHtml,h=t.cssFilter;i.stripBlankChar&&(e=qn.stripBlankChar(e)),i.allowCommentTag||(e=qn.stripCommentTag(e));var f=!1;if(i.stripIgnoreTagBody){var f=qn.StripTagBody(i.stripIgnoreTagBody,o);o=f.onIgnoreTag}var y=jX(e,function(m,g,v,w,_){var A={sourcePosition:m,position:g,isClosing:_,isWhite:r.hasOwnProperty(v)},I=n(v,w,A);if(!Wm(I))return I;if(A.isWhite){if(A.isClosing)return"</"+v+">";var D=HX(w),M=r[v],R=zX(D.html,function(j,Y){var ee=hg.indexOf(M,j)!==-1,re=s(v,j,Y,ee);if(!Wm(re))return re;if(ee)return Y=u(v,j,Y,h),Y?j+'="'+Y+'"':j;var re=a(v,j,Y,ee);return Wm(re)?void 0:re}),w="<"+v;return R&&(w+=" "+R),D.closing&&(w+=" /"),w+=">",w}else{var I=o(v,w,A);return Wm(I)?d(w):I}},d);return f&&(y=f.remove(y)),y};var WX=jO;(function(e,t){var i=St,r=Zv,n=WX;function o(u,d){var h=new n(d);return h.process(u)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=n;for(var s in i)t[s]=i[s];for(var s in r)t[s]=r[s];function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(Du,Du.exports);var qX=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(o,s,a,u){return o==="a"&&s==="href"||(o==="img"||o==="source")&&s==="src"?r.sanitizeUrl(a):Du.exports.safeAttrValue(o,s,a,u)}};var n;t&&!i?n=t:t&&i?(n=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(o){o==="whiteList"?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):n[o]=t[o]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new Du.exports.FilterXSS(n)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i!=null?i:{}).isProtocolRequired,n=r===void 0?!0:r,o=this._trim(t.substring(0,t.indexOf(":"))),s=t==="/",a=/^#/.test(t),u=o&&this.allowedProtocols.indexOf(o.toLowerCase())>-1;return s||a||u?Du.exports.escapeAttrValue(t):!o&&!n?Du.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,n):Du.exports.safeAttrValue(t,i,r,n)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var n=!1,o=void 0;if(Array.isArray(t))o=t.reduce(function(a,u){var d=r.validate(u,i);return d.isValid?a.concat([u]):(n=!0,a.concat([d.sanitized]))},[]);else if(nX(t)){var s=Object.keys(t);o=s.reduce(function(a,u){var d=t[u],h=r.validate(d,i);return h.isValid?a[u]=d:(n=!0,a[u]=h.sanitized),a},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return n?o:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Jv=new Map;function zO(){Jv.clear()}function YX(e){return Jv.get(e)}function KX(e,t){Jv.set(e,t)}function pb(e){Jv.delete(e)}var Ec,Sp,ZX=function(e){if("WebkitTransition"in e.style)Ec="webkitTransitionEnd",Sp="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");Ec="transitionend",Sp="animationend"}},HO=function(e){Ec||ZX(e)},JX=function(e,t){return t===void 0&&(t=e+"-active"),function(i){HO(i);var r=!1,n=function(o){r||(r=!0,i.removeEventListener(Ec,n),i.removeEventListener(Sp,n),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(Ec,n),i.addEventListener(Sp,n),requestAnimationFrame(function(){i.classList.add(t)})}},XX=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){HO(i);var n=!1,o=function(s){n||(n=!0,i.removeEventListener(Ec,o),i.removeEventListener(Sp,o),r())};i.classList.add(e),i.addEventListener(Ec,o),i.addEventListener(Sp,o),requestAnimationFrame(function(){i.classList.add(t)})}};const QX=W.getLogger("esri.widgets.support.widgetUtils");function GO(e){const t=ji.acquire();for(let r=0;r<arguments.length;r++){const n=arguments[r],o=typeof n;if(o==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(o==="object")for(const s in n)n[s]&&t.push(s)}const i=t.join(" ");return ji.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{zO();for(const r of i)e.get(r.target)(r)});return(i,r,n)=>(e.has(i)&&QX.error("Already observing element",i),e.set(i,r),t.observe(i,n),$p(()=>{t.unobserve(i),e.delete(i)}))})();function gl(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function mM(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Qu(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function eQ(e,t){return(e==="enter"?JX:XX)(t)}const tQ=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],iQ=tQ.reduce((e,t)=>(e[t]=[],e),{}),rQ=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],WO=new qX({whiteList:iQ,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(rQ.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function nQ(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=i.top+i.height,o=r.top+r.height,s=i.top,a=r.top;(n>o||s<a)&&e.scrollIntoView({block:"end"})}function qO(e){return e==="Enter"||e===" "}const YO="http://www.w3.org/",Xv=`${YO}2000/svg`,KO=`${YO}1999/xlink`;let L1,gM=[],Ax=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},xx=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),ZO=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},oQ=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(xx(e[r],t))return r}return-1},hb=(e,t,i,r)=>{let n=e[t];if(n.vnodeSelector==="")return;let o=n.properties;if(!(o&&(o.key===void 0?o.bind:o.key))){for(let s=0;s<e.length;s++)if(s!==t){let a=e[s];if(xx(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},sQ=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},NS=[],RS=!1,JO=e=>{(e.children||[]).forEach(JO),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},vM=()=>{RS=!1,NS.forEach(JO),NS.length=0},wM=e=>{NS.push(e),RS||(RS=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(vM,{timeout:16}):setTimeout(vM,16))},bM=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),wM(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),wM(e))},aQ=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,n=Object.keys(t),o=n.length;for(let s=0;s<o;s++){let a=n[s],u=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")PS(e,u,!0);else if(a==="classes"){let d=Object.keys(u),h=d.length;for(let f=0;f<h;f++){let y=d[f];u[y]&&e.classList.add(y)}}else if(a==="styles"){let d=Object.keys(u),h=d.length;for(let f=0;f<h;f++){let y=d[f],m=u[y];m&&(ZO(m),i.styleApplyer(e,y,m))}}else if(a!=="key"&&u!=null){let d=typeof u;d==="function"?(a.lastIndexOf("on",0)===0&&(r&&(u=r(a,u,e,t)),a==="oninput"&&function(){let h=u;u=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=u):i.namespace===Xv?a==="href"?e.setAttributeNS(KO,a,u):e.setAttribute(a,u):d==="string"&&a!=="value"?a==="innerHTML"?e[a]=WO.sanitize(u):e.setAttribute(a,u):e[a]=u}}},lQ=(e,t,i)=>{if(t)for(let r of t)Fd(r,e,void 0,i)},XO=(e,t,i)=>{lQ(e,t.children,i),t.text&&(e.textContent=t.text),aQ(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},Fd=(e,t,i,r)=>{let n,o=0,s=e.vnodeSelector,a=t.ownerDocument;if(s==="")n=e.domNode=a.createTextNode(e.text),i!==void 0?t.insertBefore(n,i):t.appendChild(n);else{for(let u=0;u<=s.length;++u){let d=s.charAt(u);if(u===s.length||d==="."||d==="#"){let h=s.charAt(o-1),f=s.slice(o,u);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(r=Ax(r,{namespace:Xv})),r.namespace!==void 0?n=e.domNode=a.createElementNS(r.namespace,f):(n=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(n,i):n.parentNode!==t&&t.appendChild(n)),o=u+1}}XO(n,e,r)}},PS=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},uQ=(e,t,i,r)=>{if(!i)return;let n=!1,o=Object.keys(i),s=o.length;for(let a=0;a<s;a++){let u=o[a],d=i[u],h=t[u];if(u==="class")h!==d&&(PS(e,h,!1),PS(e,d,!0));else if(u==="classes"){let f=e.classList,y=Object.keys(d),m=y.length;for(let g=0;g<m;g++){let v=y[g],w=!!d[v];w!==!!h[v]&&(n=!0,w?f.add(v):f.remove(v))}}else if(u==="styles"){let f=Object.keys(d),y=f.length;for(let m=0;m<y;m++){let g=f[m],v=d[g];v!==h[g]&&(n=!0,v?(ZO(v),r.styleApplyer(e,g,v)):r.styleApplyer(e,g,""))}}else if(d||typeof h!="string"||(d=""),u==="value"){let f=e[u];f!==d&&(e["oninput-value"]?f===e["oninput-value"]:d!==h)&&(e[u]=d,e["oninput-value"]=void 0),d!==h&&(n=!0)}else if(d!==h){let f=typeof d;f==="function"&&r.eventHandlerInterceptor||(r.namespace===Xv?u==="href"?e.setAttributeNS(KO,u,d):e.setAttribute(u,d):f==="string"?u==="innerHTML"?e[u]=WO.sanitize(d):u==="role"&&d===""?e.removeAttribute(u):e.setAttribute(u,d):e[u]!==d&&(e[u]=d),n=!0)}}return n},cQ=(e,t,i,r,n)=>{if(i===r)return!1;r=r||gM;let o,s=(i=i||gM).length,a=r.length,u=0,d=0,h=!1;for(;d<a;){let f=u<s?i[u]:void 0,y=r[d];if(f!==void 0&&xx(f,y))h=L1(f,y,n)||h,u++;else{let m=oQ(i,y,u+1);if(m>=0){for(o=u;o<m;o++)bM(i[o]),hb(i,o,e,"removed");h=L1(i[m],y,n)||h,u=m+1}else Fd(y,t,u<s?i[u].domNode:void 0,n),sQ(y),hb(r,d,e,"added")}d++}if(s>u)for(o=u;o<s;o++)bM(i[o]),hb(i,o,e,"removed");return h};L1=(e,t,i)=>{let r=e.domNode,n=!1;if(e===t)return!1;let o=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let s=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(s,r),t.domNode=s,n=!0,n}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=Ax(i,{namespace:Xv})),e.text!==t.text&&(o=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,o=cQ(t,r,e.children,t.children,i)||o,o=uQ(r,e.properties,t.properties,i)||o,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return o&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),n};let mh=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,L1(r,i,t)},domNode:e.domNode});const dQ={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let nd=e=>Ax(dQ,e),vl={create:(e,t)=>(t=nd(t),Fd(e,document.createElement("div"),void 0,t),mh(e,t)),append:(e,t,i)=>(i=nd(i),Fd(t,e,void 0,i),mh(t,i)),insertBefore:(e,t,i)=>(i=nd(i),Fd(t,e.parentNode,e,i),mh(t,i)),merge:(e,t,i)=>(i=nd(i),t.domNode=e,XO(e,t,i),mh(t,i)),replace:(e,t,i)=>(i=nd(i),Fd(t,e.parentNode,e,i),e.parentNode.removeChild(e),mh(t,i))},QO,pQ=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};QO=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let hQ=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?QO(i.children,n=>n.domNode===r):void 0}),i},fQ=(e,t,i)=>{let r=function(n){i("domEvent",n);let o=t(),s=pQ(n.currentTarget,o.domNode);s.reverse();let a,u=hQ(o.getLastRender(),s);return e.scheduleRender(),u&&(a=u.properties[`on${n.type}`].apply(u.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,o,s,a)=>r},$S=e=>{let t,i,r=nd(e),n=r.performanceLogger,o=!0,s=!1,a=[],u=[],d=(f,y,m)=>{let g,v=()=>g;r.eventHandlerInterceptor=fQ(t,v,n),g=f(y,m(),r),a.push(g),u.push(m)},h=()=>{if(i=void 0,o){o=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let y=u[f]();n("rendered",void 0),a[f].update(y),n("patched",void 0)}n("renderDone",void 0),o=!0}};return t={renderNow:h,scheduleRender:()=>{i||s||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),s=!0},resume:()=>{s=!1,o=!0,t.scheduleRender()},append:(f,y)=>{d(vl.append,f,y)},insertBefore:(f,y)=>{d(vl.insertBefore,f,y)},merge:(f,y)=>{d(vl.merge,f,y)},replace:(f,y)=>{d(vl.replace,f,y)},detach:f=>{for(let y=0;y<u.length;y++)if(u[y]===f)return u.splice(y,1),a.splice(y,1)[0];throw new Error("renderFunction was not found")}},t},ka=class extends se{constructor(){super(...arguments),this.items=new he,this._watchUpdatingTracking=new Zd,this._callbacks=new Map,this._projector=$S(),this._hiddenProjector=$S()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const r=()=>i.render();this._callbacks.set(i,r),this._projector.append(this.surface,r)}for(const i of t.removed){const r=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(r.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r=null;const n=()=>(r=e.render(),r);i.append(t,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const s=r.domNode.getBoundingClientRect();o.left=s.left,o.top=s.top,o.right=s.right,o.bottom=s.bottom}for(i.detach(n);t.firstChild;)t.removeChild(t.firstChild);return o}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}};l([c({readOnly:!0})],ka.prototype,"surface",void 0),l([c({readOnly:!0})],ka.prototype,"items",void 0),l([c({readOnly:!0})],ka.prototype,"needsRender",null),l([c({readOnly:!0})],ka.prototype,"_watchUpdatingTracking",void 0),l([c({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],ka.prototype,"updating",void 0),ka=l([S("esri.views.overlay.ViewOverlay")],ka);const _M=ka;function Cx(e,t,i,r){let n=null,o=1e3;typeof t=="number"?(o=t,r=i):(n=t!=null?t:null,o=i);let s,a=0;const u=()=>{a=0,e.apply(r,s)},d=(...h)=>{n&&n.apply(r,h),s=h,o?a||(a=setTimeout(u,o)):u()};return d.remove=()=>{a&&(clearTimeout(a),a=0)},d.forceUpdate=()=>{a&&(clearTimeout(a),u())},d.hasPendingUpdates=()=>!!a,d}function J(e,t){const i=t?{...t,source:e}:e;return c({aliasOf:i})}const yQ="randomUUID"in crypto;function mQ(){if(yQ)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const gQ={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},vQ={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},wQ=e=>({...vQ,...e}),bQ=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},_Q=(e,t)=>e.find(t),SM=(e,t,i=!1)=>{let r=e;return t.forEach((n,o)=>{const s=r!=null&&r.children?_Q(r.children,a=>a.domNode===n):void 0;i&&!s&&o!==t.length-1||(r=s)}),r},SQ=e=>{let t;const i={...gQ,...e},r=wQ(i),n=r.performanceLogger;let o,s=!0,a=!1;const u=[],d=[],h=(y,m,g)=>{var _;let v;r.eventHandlerInterceptor=(A,I,D,M)=>function(R){let B;n("domEvent",R);const j=bQ(R.currentTarget,v.domNode),Y=j.some(re=>{var ue;return customElements.get((ue=re==null?void 0:re.tagName)==null?void 0:ue.toLowerCase())});if(R.eventPhase===Event.CAPTURING_PHASE||!Y)j.reverse(),B=SM(v.getLastRender(),j);else{const re=R.composedPath(),ue=re.slice(re.indexOf(R.currentTarget),re.indexOf(v.domNode)).filter(ge=>ge.getRootNode()===ge.ownerDocument).reverse();B=SM(v.getLastRender(),ue,!0)}let ee;return B&&(ee=i.handleInterceptedEvent(t,B,this,R)),n("domEventProcessed",R),ee},(_=i.postProcessProjectionOptions)==null||_.call(i,r);const w=g();v=y(m,w,r),u.push(v),d.push(g),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,w)};let f=()=>{if(o=void 0,s){s=!1,n("renderStart",void 0);for(let y=0;y<u.length;y++){const m=d[y]();n("rendered",void 0),u[y].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return i.modifyDoRenderImplementation&&(f=i.modifyDoRenderImplementation(f,u,d)),t={renderNow:f,scheduleRender:()=>{o||a||(o=requestAnimationFrame(f))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),a=!0},resume:()=>{a=!1,s=!0,t.scheduleRender()},append:(y,m)=>{h(vl.append,y,m)},insertBefore:(y,m)=>{h(vl.insertBefore,y,m)},merge:(y,m)=>{h(vl.merge,y,m)},replace:(y,m)=>{h(vl.replace,y,m)},detach:y=>{for(let m=0;m<d.length;m++)if(d[m]===y)return d.splice(m,1),u.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},$e={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let od,e6,Qv,t6=!1,O1=!1,Ix=!1,Pr=!1,TM=null,DS=!1;const Wp=typeof window<"u"?window:{};$e.cssVarShim&&Wp.CSS;const ao=Wp.document||{head:{}},j1e=Wp.HTMLElement||class{},hi={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},k1=$e.shadowDomShim&&$e.shadowDom?(()=>(ao.head.attachShadow+"").indexOf("[native")>-1)():!0,TQ=(()=>{let e=!1;try{ao.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),EQ=e=>Promise.resolve(e),AQ=$e.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,i6=(e,t,i,r)=>{i&&i.map(([n,o,s])=>{const a=CQ(e,n),u=xQ(t,s),d=IQ(n);hi.ael(a,o,u,d),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>hi.rel(a,o,u,d))})},xQ=(e,t)=>i=>{try{$e.lazyLoad||e.$hostElement$[t](i)}catch(r){im(r)}},CQ=(e,t)=>t&4?ao:t&8?Wp:t&16?ao.body:e,IQ=e=>TQ?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,EM="http://www.w3.org/1999/xlink",Ac=(e,t="")=>()=>{},AM=new WeakMap,MQ=(e,t,i)=>{let r=U1.get(e);AQ&&i?(r=r||new CSSStyleSheet,r.replace(t)):r=t,U1.set(e,r)},NQ=(e,t,i,r)=>{let n=r6(t,i),o=U1.get(n);if(e=e.nodeType===11?e:ao,o)if(typeof o=="string"){e=e.head||e;let s=AM.get(e),a;s||AM.set(e,s=new Set),s.has(n)||(a=ao.createElement("style"),a.innerHTML=o,e.insertBefore(a,e.querySelector("link")),s&&s.add(n))}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n},RQ=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=Ac("attachStyles",t.$tagName$),o=NQ(k1&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=o,i.classList.add(o+"-h"),r&2&&i.classList.add(o+"-s")),n()},r6=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),PQ=e=>lee.map(t=>t(e)).find(t=>!!t),xM={},$Q="http://www.w3.org/2000/svg",DQ="http://www.w3.org/1999/xhtml",LQ=e=>e!=null,Mx=e=>(e=typeof e,e==="object"||e==="function"),n6=(e,t,...i)=>{let r=null,n=null,o=null,s=!1,a=!1,u=[];const d=f=>{for(let y=0;y<f.length;y++)r=f[y],Array.isArray(r)?d(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!Mx(r))&&(r=String(r)),s&&a?u[u.length-1].$text$+=r:u.push(s?F1(null,r):r),a=s)};if(d(i),t&&($e.isDev&&e==="input"&&BQ(t),$e.vdomKey&&t.key&&(n=t.key),$e.slotRelocation&&t.name&&(o=t.name),$e.vdomClass)){const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(y=>f[y]).join(" "))}if($e.isDev&&u.some(o6)&&aee(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),$e.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,u,kQ);const h=F1(e,null);return h.$attrs$=t,u.length>0&&(h.$children$=u),$e.vdomKey&&(h.$key$=n),$e.slotRelocation&&(h.$name$=o),h},F1=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return $e.vdomAttribute&&(i.$attrs$=null),$e.vdomKey&&(i.$key$=null),$e.slotRelocation&&(i.$name$=null),i},OQ={},o6=e=>e&&e.$tag$===OQ,kQ={forEach:(e,t)=>e.map(CM).forEach(t),map:(e,t)=>e.map(CM).map(t).map(FQ)},CM=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),FQ=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),n6(e.vtag,i,...e.vchildren||[])}const t=F1(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},BQ=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const r=t.indexOf("type"),n=t.indexOf("min"),o=t.indexOf("max"),s=t.indexOf("step");(i<r||i<n||i<o||i<s)&&y6('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},IM=(e,t,i,r,n,o)=>{if(i!==r){let s=PM(e,t),a=t.toLowerCase();if(t==="class"){const u=e.classList,d=MM(i),h=MM(r);u.remove(...d.filter(f=>f&&!h.includes(f))),u.add(...h.filter(f=>f&&!d.includes(f)))}else if(t==="style"){for(const u in i)(!r||r[u]==null)&&(u.includes("-")?e.style.removeProperty(u):e.style[u]="");for(const u in r)(!i||r[u]!==i[u])&&(u.includes("-")?e.style.setProperty(u,r[u]):e.style[u]=r[u])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):PM(Wp,a)?t=a.slice(2):t=a[2]+t.slice(3),i&&hi.rel(e,t,i,!1),r&&hi.ael(e,t,r,!1);else{const u=Mx(r);if((s||u&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{let h=r==null?"":r;t==="list"?s=!1:(i==null||e[t]!=h)&&(e[t]=h)}}catch{}let d=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,d=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(d?e.removeAttributeNS(EM,t):e.removeAttribute(t)):(!s||o&4||n)&&!u&&(r=r===!0?"":r,d?e.setAttributeNS(EM,t,r):e.setAttribute(t,r))}}},UQ=/\s/,MM=e=>e?e.split(UQ):[],s6=(e,t,i,r)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||xM,s=t.$attrs$||xM;for(r in o)r in s||IM(n,r,o[r],void 0,i,t.$flags$);for(r in s)IM(n,r,o[r],s[r],i,t.$flags$)},B1=(e,t,i,r)=>{let n=t.$children$[i],o=0,s,a,u;if(t6||(Ix=!0,n.$tag$==="slot"&&(od&&r.classList.add(od+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)s=n.$elm$=ao.createTextNode(n.$text$);else if(n.$flags$&1)s=n.$elm$=ao.createTextNode("");else{if(Pr||(Pr=n.$tag$==="svg"),s=n.$elm$=ao.createElementNS(Pr?$Q:DQ,n.$flags$&2?"slot-fb":n.$tag$),Pr&&n.$tag$==="foreignObject"&&(Pr=!1),s6(null,n,Pr),LQ(od)&&s["s-si"]!==od&&s.classList.add(s["s-si"]=od),n.$children$)for(o=0;o<n.$children$.length;++o)a=B1(e,n,o,s),a&&s.appendChild(a);n.$tag$==="svg"?Pr=!1:s.tagName==="foreignObject"&&(Pr=!0)}return s["s-hn"]=Qv,n.$flags$&3&&(s["s-sr"]=!0,s["s-cr"]=e6,s["s-sn"]=n.$name$||"",u=e&&e.$children$&&e.$children$[i],u&&u.$tag$===n.$tag$&&e.$elm$&&Ay(e.$elm$,!1)),s},Ay=(e,t)=>{hi.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==Qv&&n["s-ol"]&&(u6(n).insertBefore(n,Nx(n)),n["s-ol"].remove(),n["s-ol"]=void 0,Ix=!0),t&&Ay(n,t)}hi.$flags$&=-2},a6=(e,t,i,r,n,o)=>{let s=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(s.shadowRoot&&s.tagName===Qv&&(s=s.shadowRoot);n<=o;++n)r[n]&&(a=B1(null,i,n,e),a&&(r[n].$elm$=a,s.insertBefore(a,Nx(t))))},l6=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,p6(r),O1=!0,n["s-ol"]?n["s-ol"].remove():Ay(n,!0),n.remove())},VQ=(e,t,i,r)=>{let n=0,o=0,s=0,a=0,u=t.length-1,d=t[0],h=t[u],f=r.length-1,y=r[0],m=r[f],g,v;for(;n<=u&&o<=f;)if(d==null)d=t[++n];else if(h==null)h=t[--u];else if(y==null)y=r[++o];else if(m==null)m=r[--f];else if(qm(d,y))sd(d,y),d=t[++n],y=r[++o];else if(qm(h,m))sd(h,m),h=t[--u],m=r[--f];else if(qm(d,m))(d.$tag$==="slot"||m.$tag$==="slot")&&Ay(d.$elm$.parentNode,!1),sd(d,m),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++n],m=r[--f];else if(qm(h,y))(d.$tag$==="slot"||m.$tag$==="slot")&&Ay(h.$elm$.parentNode,!1),sd(h,y),e.insertBefore(h.$elm$,d.$elm$),h=t[--u],y=r[++o];else{for(s=-1,a=n;a<=u;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===y.$key$){s=a;break}s>=0?(v=t[s],v.$tag$!==y.$tag$?g=B1(t&&t[o],i,s,e):(sd(v,y),t[s]=void 0,g=v.$elm$),y=r[++o]):(g=B1(t&&t[o],i,o,e),y=r[++o]),g&&u6(d.$elm$).insertBefore(g,Nx(d.$elm$))}n>u?a6(e,r[f+1]==null?null:r[f+1].$elm$,i,r,o,f):o>f&&l6(t,n,u)},qm=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,Nx=e=>e&&e["s-ol"]||e,u6=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,sd=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,o=t.$tag$,s=t.$text$;let a;s===null?(Pr=o==="svg"?!0:o==="foreignObject"?!1:Pr,o==="slot"||s6(e,t,Pr),r!==null&&n!==null?VQ(i,r,t,n):n!==null?(e.$text$!==null&&(i.textContent=""),a6(i,null,t,n,0,n.length-1)):r!==null&&l6(r,0,r.length-1),Pr&&o==="svg"&&(Pr=!1)):(a=i["s-cr"])?a.parentNode.textContent=s:e.$text$!==s&&(i.data=s)},c6=e=>{let t=e.childNodes,i,r,n,o,s,a;for(r=0,n=t.length;r<n;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(s=i["s-sn"],i.hidden=!1,o=0;o<n;o++)if(a=t[o].nodeType,t[o]["s-hn"]!==i["s-hn"]||s!==""){if(a===1&&s===t[o].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&t[o].textContent.trim()!==""){i.hidden=!0;break}}c6(i)}},Xn=[],d6=e=>{let t,i,r,n,o,s,a=0,u=e.childNodes,d=u.length;for(;a<d;a++){if(t=u[a],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=t["s-sn"],s=r.length-1;s>=0;s--)i=r[s],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(NM(i,n)?(o=Xn.find(h=>h.$nodeToRelocate$===i),O1=!0,i["s-sn"]=i["s-sn"]||n,o?o.$slotRefNode$=t:Xn.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&Xn.map(h=>{NM(h.$nodeToRelocate$,i["s-sn"])&&(o=Xn.find(f=>f.$nodeToRelocate$===i),o&&!h.$slotRefNode$&&(h.$slotRefNode$=o.$slotRefNode$))})):Xn.some(h=>h.$nodeToRelocate$===i)||Xn.push({$nodeToRelocate$:i}));t.nodeType===1&&d6(t)}},NM=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",p6=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(p6)},jQ=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||F1(null,null),o=o6(t)?t:n6(null,null,t);Qv=i.tagName,r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map(([s,a])=>o.$attrs$[a]=i[s])),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=n.$elm$=i.shadowRoot||i,od=i["s-sc"],e6=i["s-cr"],t6=k1&&(r.$flags$&1)!==0,O1=!1,sd(n,o);{if(hi.$flags$|=1,Ix){d6(o.$elm$);let s,a,u,d,h,f,y=0;for(;y<Xn.length;y++)s=Xn[y],a=s.$nodeToRelocate$,a["s-ol"]||(u=ao.createTextNode(""),u["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=u,a));for(y=0;y<Xn.length;y++)if(s=Xn[y],a=s.$nodeToRelocate$,s.$slotRefNode$){for(d=s.$slotRefNode$.parentNode,h=s.$slotRefNode$.nextSibling,u=a["s-ol"];u=u.previousSibling;)if(f=u["s-nr"],f&&f["s-sn"]===a["s-sn"]&&d===f.parentNode&&(f=f.nextSibling,!f||!f["s-nr"])){h=f;break}(!h&&d!==a.parentNode||a.nextSibling!==h)&&a!==h&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),d.insertBefore(a,h))}else a.nodeType===1&&(a.hidden=!0)}O1&&c6(o.$elm$),hi.$flags$&=-2,Xn.length=0}},zQ=e=>$e.lazyLoad?qp(e).$hostElement$:e,z1e=(e,t,i)=>{const r=zQ(e);return{emit:n=>($e.isDev&&!r.isConnected&&y6(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),HQ(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n}))}},HQ=(e,t,i)=>{const r=hi.ce(t,i);return e.dispatchEvent(r),r},GQ=(e,t)=>{},Rx=(e,t)=>(e.$flags$|=16,GQ(e,e.$ancestorComponent$),dee(()=>WQ(e,t))),WQ=(e,t)=>{const i=e.$hostElement$,r=Ac("scheduleUpdate",e.$cmpMeta$.$tagName$),n=i;let o;return t?o=Qd(n,"componentWillLoad"):o=Qd(n,"componentWillUpdate"),o=RM(o,()=>Qd(n,"componentWillRender")),r(),RM(o,()=>qQ(e,n,t))},qQ=async(e,t,i)=>{const r=e.$hostElement$,n=Ac("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&RQ(e);const o=Ac("render",e.$cmpMeta$.$tagName$);YQ(e,t,r),o(),n(),KQ(e)},YQ=(e,t,i)=>{try{TM=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,($e.hasRenderFn||$e.reflect)&&($e.vdomRender||$e.reflect)&&($e.hydrateServerSide||jQ(e,t))}catch(a){im(a,e.$hostElement$)}return TM=null,null},KQ=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=Ac("postUpdate",t),n=i;e.$ancestorComponent$,Qd(n,"componentDidRender"),e.$flags$&64?(Qd(n,"componentDidUpdate"),r()):(e.$flags$|=64,Qd(n,"componentDidLoad"),r())},H1e=e=>{if($e.updatable){const t=qp(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&Rx(t,!1),i}return!1},Qd=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){im(r)}},RM=(e,t)=>e&&e.then?e.then(t):t(),ZQ=(e,t)=>e!=null&&!Mx(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,JQ=(e,t)=>qp(e).$instanceValues$.get(t),XQ=(e,t,i,r)=>{const n=qp(e),o=e,s=n.$instanceValues$.get(t),a=n.$flags$,u=o;i=ZQ(i,r.$members$[t][0]);const d=Number.isNaN(s)&&Number.isNaN(i);if(i!==s&&!d){n.$instanceValues$.set(t,i);{if(r.$watchers$&&a&128){const f=r.$watchers$[t];f&&f.map(y=>{try{u[y](i,s,t)}catch(m){im(m,o)}})}if((a&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(i,s,t)===!1)return;Rx(n,!1)}}}},QQ=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),n=e.prototype;r.map(([o,[s]])=>{(s&31||s&32)&&Object.defineProperty(n,o,{get(){return JQ(this,o)},set(a){XQ(this,o,a,t)},configurable:!0,enumerable:!0})});{const o=new Map;n.attributeChangedCallback=function(s,a,u){hi.jmp(()=>{const d=o.get(s);if(this.hasOwnProperty(d))u=this[d],delete this[d];else if(n.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==u)return;this[d]=u===null&&typeof this[d]=="boolean"?!1:u})},e.observedAttributes=r.filter(([s,a])=>a[0]&15).map(([s,a])=>{const u=a[1]||s;return o.set(u,s),a[0]&512&&t.$attrsToReflect$.push([s,u]),u})}}return e},eee=async(e,t,i,r,n)=>{if((t.$flags$&32)===0&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),n.style)){let s=n.style;typeof s!="string"&&(s=s[t.$modeName$=PQ(e)]);const a=r6(i,t.$modeName$);if(!U1.has(a)){const u=Ac("registerStyles",i.$tagName$);MQ(a,s,!!(i.$flags$&1)),u()}}t.$ancestorComponent$,(()=>Rx(t,!0))()},tee=e=>{},iee=e=>{if((hi.$flags$&1)===0){const t=qp(e),i=t.$cmpMeta$,r=Ac("connectedCallback",i.$tagName$);t.$flags$&1?(i6(e,t,i.$listeners$),tee(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&ree(e),i.$members$&&Object.entries(i.$members$).map(([n,[o]])=>{if(o&31&&e.hasOwnProperty(n)){const s=e[n];delete e[n],e[n]=s}}),eee(e,t,i)),r()}},ree=e=>{const t=e["s-cr"]=ao.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},nee=e=>{if((hi.$flags$&1)===0){const t=qp(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},G1e=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};$e.member&&(i.$members$=t[2]),$e.hostListener&&(i.$listeners$=t[3]),$e.watchCallback&&(i.$watchers$=e.$watchers$),$e.reflect&&(i.$attrsToReflect$=[]),$e.shadowDom&&!k1&&i.$flags$&1&&(i.$flags$|=8);const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){see(this,i)},connectedCallback(){iee(this),$e.connectedCallback&&r&&r.call(this)},disconnectedCallback(){nee(this),$e.disconnectedCallback&&n&&n.call(this)},__attachShadow(){k1?$e.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,QQ(e,i)},W1e=e=>{const t=new URL(e,hi.$resourcesUrl$);return t.origin!==Wp.location.origin?t.href:t.pathname},oee=e=>hi.$resourcesUrl$=e,h6=new WeakMap,qp=e=>h6.get(e),see=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return $e.isDev&&(i.$renderCount$=0),$e.method&&$e.lazyLoad&&(i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r)),$e.asyncLoading&&(i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[]),i6(e,i,t.$listeners$),h6.set(e,i)},PM=(e,t)=>t in e,im=(e,t)=>(0,console.error)(e,t),f6=$e.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],aee=(...e)=>console.error(...f6,...e),y6=(...e)=>console.warn(...f6,...e),U1=new Map,lee=[],$M=[],m6=[],uee=(e,t)=>i=>{e.push(i),DS||(DS=!0,t&&hi.$flags$&4?cee(LS):hi.raf(LS))},DM=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){im(i)}e.length=0},LS=()=>{DM($M),DM(m6),(DS=$M.length>0)&&hi.raf(LS)},cee=e=>EQ().then(e),dee=uee(m6,!0),q1e={isDev:!!$e.isDev,isBrowser:!0,isServer:!1,isTesting:!!$e.isTesting};let g6;function pee(){oee(to(Ue(g6)))}g6="components/assets";const v6=Symbol("widget"),hee=[],fee={},V1=new WeakMap;function w6(e,t){let i=t.children;if(i&&i.length)for(let n=0;n<i.length;++n)i[n]=w6(e,i[n]);else i=hee;const r=t.vnodeSelector;if(Px(r)){const n=t.properties||fee,o=n.key||r;return{vnodeSelector:"div",properties:{key:o,afterCreate:yee,afterUpdate:mee,afterRemoved:b6,parentWidget:e,widgetConstructor:r,widgetProperties:{...n,key:o,children:i}},children:void 0,text:void 0,domNode:null}}return t}function yee(e,t,i,{parentWidget:r,widgetConstructor:n,widgetProperties:o}){var a;const s=new n(o);s.container=e,V1.set(e,s),(a=s.afterCreate)==null||a.call(s,s,e),r._internalHandles.add($p(()=>b6(e)))}function mee(e,t,i,{widgetProperties:r}){var o;const n=V1.get(e);n&&(n.set(r),(o=n.afterUpdate)==null||o.call(n,n,e))}function b6(e){const t=V1.get(e);t&&(t.destroy(),V1.delete(e))}function Px(e){return typeof e=="function"&&e[v6]}const LM=new Set;function gee(e){LM.add(e),e.finally(()=>LM.delete(e))}const _6="esri.widgets.Widget",vee=W.getLogger(_6);let wee=0;const bee={widgetIcon:"esri-icon-checkbox-unchecked"};function S6(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?S6(e[i],t[i]):e[i]=t[i]);return e}const _ee=SQ({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,n,o,s)=>{const a=t(r,n,o,s),u=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in o)||u){const d=r[2].toLowerCase()+r.slice(3),h=m=>a.call(o,m);o.addEventListener(d,h,u);const f=()=>o.removeEventListener(d,h,u),y=s.afterRemoved;s.afterRemoved=m=>{y==null||y(m),f()}}return a}},handleInterceptedEvent(e,t,i,r){const{eventPhase:n,type:o}=r,s=n===Event.CAPTURING_PHASE;let a=`on${o}${s?"capture":""}`;const u=t.properties;(a in u||(a=`on${o[0].toUpperCase()}${o.slice(1)}${s?"Capture":""}`,a in u))&&(zO(),e.scheduleRender(),u[a].call(u.bind||i,r))}});let fb=!1,Lt=class extends Rv(ra.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new gi,this._projector=_ee,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=bee.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=pA(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await ri(this._messageBundleProps.map(async({bundlePath:s,propertyName:a})=>{let u=await DA(s);this.uiStrings&&Object.keys(this.uiStrings)&&(u=S6(P(u),this.uiStrings)),this[a]=u}));for(const s of o)s.error&&vee.error("widget-intl:locale-error",this.declaredClass,s.error)}await this.loadLocale()}),pee();const i="esri-widget-uid-"+mQ(),r=this.render.bind(this);this._trackingTarget=new Iv(()=>this.scheduleRender());const n=()=>{var h;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const o=r();let{properties:s}=o;s||(o.properties=s={});let{key:a,styles:u}=s;a||(s.key=i),u||(s.styles=u={}),u.display||(u.display="");let d=0;return(h=o.children)==null||h.forEach(f=>{if(Px(f.vnodeSelector))return;let{properties:y}=f;y||(f.properties=y={}),y.key||(y.key=`${this.id}--${d++}`)}),w6(this,o)};this.render=()=>{if(fb)return n();let o=YX(this);if(o)return o;this._trackingTarget.clear(),fb=!0;try{o=Js(this._trackingTarget,n)}catch(s){throw console.error(s),s}finally{fb=!1}return KX(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),gee(this._resourcesFetch)}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(R_)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(on(this._trackingTarget),on(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,pb(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return Tx(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+wee++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(pb(this),this._projector.scheduleRender())}classes(...e){return GO.apply(this,e)}renderNow(){pb(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this._internalHandles.add(q(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&Ev(i)&&this._internalHandles.add(this._delegatedEventNames.map(n=>Av(i,n,o=>{this.emit(n,o)})),"delegated-events")},ze)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(R_),this.scheduleRender()};this._internalHandles.add([eL(e),q(()=>this.uiStrings,e),mn(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};Lt[v6]=!0,l([c()],Lt.prototype,"_readyForTrueRender",void 0),l([c({value:null})],Lt.prototype,"container",null),l([Fe("container")],Lt.prototype,"castContainer",null),l([c({aliasOf:"container"})],Lt.prototype,"domNode",void 0),l([c()],Lt.prototype,"iconClass",void 0),l([c()],Lt.prototype,"id",null),l([c()],Lt.prototype,"label",void 0),l([c()],Lt.prototype,"renderable",null),l([c()],Lt.prototype,"uiStrings",void 0),l([c()],Lt.prototype,"viewModel",void 0),l([c()],Lt.prototype,"visible",void 0),l([c()],Lt.prototype,"key",void 0),l([c()],Lt.prototype,"children",void 0),l([c()],Lt.prototype,"afterCreate",void 0),l([c()],Lt.prototype,"afterUpdate",void 0),l([c()],Lt.prototype,"afterRemoved",void 0),Lt=l([S(_6)],Lt);const vi=Lt;function See(e){return 32+e.length}function Tee(){return 16}function Y1e(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=See(r);break;case"number":t+=Tee();break;case"boolean":t+=4}}return t}function K1e(e,t){return 32+e.length*t}var xy;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(xy||(xy={}));const OM=["B","kB","MB","GB","TB"];function Eee(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(xy.KILOBYTES));i=yr(i,0,OM.length-1);const r=Rl(t/xy.KILOBYTES**i,{maximumFractionDigits:2});return qo(e.units.bytes[OM[i]],{fileSize:r})}function Aee(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const n=t.find(o=>o.name===i);return n?xee({tagName:r,tags:n.tags}):null}function xee(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(n=>n.name===t);return r&&r.value||null}var OS;const Cee={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let ir=OS=class extends V{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=Aee({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return Cee[t]||null}clone(){return new OS({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};l([c({type:String})],ir.prototype,"contentType",void 0),l([c()],ir.prototype,"exifInfo",void 0),l([c({readOnly:!0})],ir.prototype,"orientationInfo",null),l([c({type:Qe})],ir.prototype,"id",void 0),l([c({type:String})],ir.prototype,"globalId",void 0),l([c({type:String})],ir.prototype,"keywords",void 0),l([c({type:String})],ir.prototype,"name",void 0),l([c({json:{read:!1}})],ir.prototype,"parentGlobalId",void 0),l([c({json:{read:!1}})],ir.prototype,"parentObjectId",void 0),l([c({type:Qe})],ir.prototype,"size",void 0),l([c({json:{read:!1}})],ir.prototype,"url",void 0),ir=OS=l([S("esri.layers.support.AttachmentInfo")],ir);const Iee=ir;var kS;let Qt=kS=class extends V{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new kS(P({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};l([c({type:[String],json:{write:!0}})],Qt.prototype,"attachmentTypes",void 0),l([c({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Qt.prototype,"attachmentsWhere",void 0),l([c({type:Boolean,json:{write:!0}})],Qt.prototype,"cacheHint",void 0),l([c({type:[String],json:{write:!0}})],Qt.prototype,"keywords",void 0),l([c({type:[Number],json:{write:!0}})],Qt.prototype,"globalIds",void 0),l([c({json:{write:!0}})],Qt.prototype,"name",void 0),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],Qt.prototype,"num",void 0),l([c({type:[Number],json:{write:!0}})],Qt.prototype,"objectIds",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],Qt.prototype,"returnMetadata",void 0),l([c({type:[Number],json:{write:!0}})],Qt.prototype,"size",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],Qt.prototype,"start",void 0),l([X("start"),X("num")],Qt.prototype,"writeStart",null),l([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Qt.prototype,"where",void 0),Qt=kS=l([S("esri.rest.support.AttachmentQuery")],Qt),Qt.from=Ze(Qt);const FS=Qt,Mee="esri.widgets.Feature.support.featureUtils",kM=W.getLogger(Mee),Nee=/href=(""|'')/gi,Ree=/(\{([^\{\r\n]+)\})/g,Pee=/\'/g,T6=/^\s*expression\//i,$ee=/(\n)/gi,Dee=/[\u00A0-\u9999<>\&]/gim,Lee=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,Oee=/^(?:mailto:|tel:)/,E6="relationships/",BS=QA("short-date-short-time");function A6(e){if(!O(e))return e.get("sourceLayer")||e.get("layer")}async function j1(e,t){return typeof e=="function"?e.call(null,t):e}function x6(e=""){if(e)return!Oee.test(e.trim().toLowerCase())}function C6(e){return!!e&&T6.test(e)}function kee(e,t){if(!C6(t)||!e)return null;const i=t.replace(T6,"").toLowerCase();let r;return e.some(n=>n.name.toLowerCase()===i&&(r=n,!0)),r}function I6(e,t){const i=kee(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function Fee(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function Bee(e){return e.replace(Nee,"")}function z1(e,t){const i=$x(t,e);return i?i.name:e}function Uee(e,t){return e&&e.map(i=>z1(i,t))}function $x(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function M6(e){return`${e}`.trim()}function ec({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:n,fieldInfoMap:o}){return r?US({formattedAttributes:t,template:Hee(r,{...t,...n,...e},i),fieldInfoMap:o}):""}function US({formattedAttributes:e,template:t,fieldInfoMap:i}){return M6(Bee(qo(qo(t,r=>Fee(r,i)),e)))}function Vee(e,t,i=!1){const r=t[e];if(typeof r=="string"){const n="%27",o=(i?encodeURIComponent(r):r).replace(Pee,n);t[e]=o}}function jee(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>Vee(r,i,t)),i}function zee(e,t,i){const r=(t=M6(t))&&t[0]!=="{";return qo(e,jee(i,r))}function VS(e,t){return e.replace(Ree,(i,r,n)=>{const o=$x(t,n);return o?`{${o.name}}`:r})}function Hee(e,t,i){const r=VS(e,i);return r&&r.replace(Lee,(n,o,s)=>zee(n,o||s,t))}function Gee(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function Wee(e){return(e==null?void 0:e.type)==="feature"}function FM(e){return!!(e!=null&&e.layer)}function qee(e){return(e==null?void 0:e.type)==="map-image"}function Yee(e,t){var d;const i=t.fieldInfos,r=t.fieldName,n=(d=N6(i,r))==null?void 0:d.clone(),o=t.preventPlacesFormatting,s=t.layer,a=$x(s,r);if(n&&(a==null?void 0:a.type)==="date"){const h=n.format||new Ld;h.dateFormat=h.dateFormat||"short-date-short-time",h.dateTimeFormatOptions=!FM(s)&&Wee(s)&&s.datesInUnknownTimezone||FM(s)&&qee(s.layer)&&s.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=h}const u=n&&n.format;return typeof e=="string"&&i9(r)&&u?u.formatRasterPixelValue(e):typeof(e=Gee(e,u))=="string"||e==null||u==null?rm(e):o?Rl(e,{...s9(u),minimumFractionDigits:0,maximumFractionDigits:20}):u.format(e)}function N6(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==i)&&(r=n,!0)),r}function Kee({fieldName:e,graphic:t,layer:i}){if(Vs(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const n=i.getFeatureType(t);return n?n.name:null}function Zee({fieldName:e,value:t,graphic:i,layer:r}){if(Vs(e)||!r||typeof r.getFieldDomain!="function")return null;const n=r.getFieldDomain(e,{feature:i});return n&&n.type==="coded-value"?n.getName(t):null}function Jee(e,t){const{creatorField:i,creationDateField:r,editorField:n,editDateField:o}=e;if(!t)return;const s=t[o];if(typeof s=="number"){const u=t[n];return{type:"edit",date:Jo(s,BS),user:u}}const a=t[r];if(typeof a=="number"){const u=t[i];return{type:"create",date:Jo(a,BS),user:u}}return null}function Xee(e,t){const i=new Map;return e&&e.forEach(r=>{const n=z1(r.fieldName,t);r.fieldName=n,i.set(n.toLowerCase(),r)}),i}function BM(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const o=n&&n.fieldInfos;o&&t.push(...o)}}),t}function Dx(e){return e.replace(Dee,t=>`&#${t.charCodeAt(0)};`)}function rm(e){return typeof e=="string"?e.replace($ee,'<br class="esri-text-new-line" />'):e}function R6(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:o,graphic:s}=e;if(t==null)return"";const a=Zee({fieldName:i,value:t,graphic:s,layer:o});if(a)return a;const u=Kee({fieldName:i,graphic:s,layer:o});if(u)return u;if(n.get(i.toLowerCase()))return Yee(t,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:o});const d=o&&o.fieldsIndex;return d&&d.isDateField(i)?Jo(t,BS):rm(t)}function yb({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:o}){const s={};return o==null||o.forEach(a=>rte({attributes:s,relatedInfo:a,fieldInfoMap:n,fieldInfos:e,layer:i})),Object.keys(t).forEach(a=>{const u=t[a];s[a]=R6({fieldName:a,fieldInfos:e,fieldInfoMap:n,layer:i,value:u,graphic:r})}),s}async function Qee(e,t){var h,f;const{layer:i,graphic:r,outFields:n,objectIds:o,returnGeometry:s,spatialReference:a}=e,u=o[0];if(typeof u!="number"&&typeof u!="string"){const y="Could not query required fields for the specified feature. The feature's ID is invalid.",m={layer:i,graphic:r,objectId:u,requiredFields:n};return kM.warn(y,m),null}if(!((f=(h=i.capabilities)==null?void 0:h.operations)!=null&&f.supportsQuery)){const y="The specified layer cannot be queried. The following fields will not be available.",m={layer:i,graphic:r,requiredFields:n,returnGeometry:s};return kM.warn(y,m),null}const d=i.createQuery();return d.objectIds=o,d.outFields=n!=null&&n.length?n:[i.objectIdField],d.returnGeometry=!!s,d.returnZ=!!s,d.returnM=!!s,d.outSpatialReference=a,(await i.queryFeatures(d,t)).features[0]}async function ete(e){var r;if(!((r=e.expressionInfos)!=null&&r.length))return!1;const t=await Qs(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function tte({graphic:e,popupTemplate:t,layer:i,spatialReference:r},n){if(!i||!t||(typeof i.load=="function"&&await i.load(n),!e.attributes))return;const o=e.attributes[i.objectIdField];if(o==null)return;const s=[o],a=await t.getRequiredFields(i.fieldsIndex),u=yY(a,e),d=u?[]:a,h=t.returnGeometry||await ete(t);if(u&&!h)return;const f=await Qee({layer:i,graphic:e,outFields:d,objectIds:s,returnGeometry:h,spatialReference:r},n);f&&(f.geometry&&(e.geometry=f.geometry),f.attributes&&(e.attributes={...e.attributes,...f.attributes}))}function Vs(e=""){return!!e&&e.includes(E6)}function ite(e){return e?`${E6}${e.layerId}/${e.fieldName}`:""}function UM({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:o}){e&&t&&i&&Object.keys(t.attributes).forEach(s=>{const a=ite({layerId:i.relation.id.toString(),fieldName:s}),u=t.attributes[s];e[a]=R6({fieldName:a,fieldInfos:r,fieldInfoMap:n,layer:o,value:u,graphic:t})})}function rte({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(o=>UM({attributes:e,graphic:o,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(o=>UM({attributes:e,graphic:o,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n})))}const VM=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},P6=({layer:e,method:t,query:i,definitionExpression:r})=>{var s,a;if(!((a=(s=e.capabilities)==null?void 0:s.query)!=null&&a.supportsCacheHint)||t==="attachments")return;const n=T(i.where)&&i.where,o=T(i.geometry)&&i.geometry;VM(r)||VM(n)||(o==null?void 0:o.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},nte=({query:e,layer:t,method:i})=>{P6({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},ote=({queryPayload:e,layer:t,method:i})=>{P6({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},jM={editing:!1,operations:{add:!0,update:!0,delete:!0}},$6=he.ofType(Iee),ste="graphic.layer.capabilities.operations.supportsResizeAttachments";let Ln=class extends se{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...jM},this.activeAttachmentInfo=null,this.attachmentInfos=new $6,this.graphic=null,this.mode="view",this.own(q(()=>this.graphic,()=>this._graphicChanged(),ze))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...jM,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(ste)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new N("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getFeatureId(),r=new FS({objectIds:[i],returnMetadata:!0}),n=[],o=e.queryAttachments(r).then(a=>a[i]||n).catch(()=>n);this._getAttachmentsPromise=o,this.notifyChange("state");const s=await o;return t.removeAll(),s.length&&t.addMany(s),this._getAttachmentsPromise=null,this.notifyChange("state"),s}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:n}=this;if(!e)throw new N("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!n.operations.add)throw new N("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new N("invalid-layer","addAttachment(): A valid layer is required.");const o=t.addAttachment(r,e).then(a=>this._queryAttachment(a.objectId)),s=await o;return i.add(s),s}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:n}=this;if(!e)throw new N("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!n.operations.delete)throw new N("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new N("invalid-layer","deleteAttachment(): A valid layer is required.");const o=t.deleteAttachments(r,[e.id]).then(()=>e),s=await o;return i.remove(s),s}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:r,graphic:n,abilities:o}=this;if(!e)throw new N("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new N("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!o.operations.update)throw new N("invalid-abilities","updateAttachment(): Update abilities are required.");const s=r.findIndex(d=>d===t);if(!i||typeof i.updateAttachment!="function")throw new N("invalid-layer","updateAttachment(): A valid layer is required.");const a=i.updateAttachment(n,t.id,e).then(d=>this._queryAttachment(d.objectId)),u=await a;return r.splice(s,1,u),u}async _queryAttachment(e){if(!e)throw new N("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,i=this._getFeatureId(),r=new FS({objectIds:[i],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(r).then(n=>n[i][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:i}=e,{attributes:r}=t;return r&&r[i]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=A6(e);this._attachmentLayer=t?t.type==="scene"&&T(t.associatedLayer)?t.associatedLayer:t:null}};l([c()],Ln.prototype,"abilities",void 0),l([Fe("abilities")],Ln.prototype,"castAbilities",null),l([c()],Ln.prototype,"activeAttachmentInfo",void 0),l([c({readOnly:!0,type:$6})],Ln.prototype,"attachmentInfos",void 0),l([c({type:Pi})],Ln.prototype,"graphic",void 0),l([c()],Ln.prototype,"mode",void 0),l([c({readOnly:!0})],Ln.prototype,"state",null),l([c({readOnly:!0})],Ln.prototype,"supportsResizeAttachments",null),Ln=l([S("esri.widgets.Attachments.AttachmentsViewModel")],Ln);const Lx=Ln;function ate(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function lte(e){const t=Ue("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function pi(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var ute=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},D6=function(e,t){for(var i=0,r=e.length;i<r;i++){var n=e[i];Array.isArray(n)?D6(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=ute(n)),t.push(n))}},cte=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var n=[];return D6(i,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function C(e,t,...i){return typeof e!="function"||Px(e)?cte(e,t,...i):e(t,...i)}const zM={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},te={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},mb=window.CSS;let _i=class extends vi{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new Lx,this.visibleElements={...zM},this._supportsImageOrientation=mb&&mb.supports&&mb.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([Nl(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),q(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),ze)])}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return{...zM,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new N("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new N("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new N("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return C("div",{class:this.classes(te.base,te.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?C("div",{key:"error-message",class:te.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return C("div",{class:te.loaderContainer,key:"loader"},C("div",{class:te.loader}))}renderProgressBar(){return this.visibleElements.progressBar?C("div",{class:te.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?C("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(te.esriButton,te.esriButtonTertiary,te.esriButtonSmall,te.esriButtonHalf,e&&te.buttonDisabled)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?C("button",{type:"submit",disabled:i,class:this.classes(te.esriButton,te.esriButtonSecondary,te.esriButtonSmall,te.esriButtonHalf,{[te.buttonDisabled]:i})},this.messages.add):null,o=t?C("span",{key:"file-name",class:te.fileName},t.name):null,s=C("form",{bind:this,afterCreate:Qu,afterRemoved:mM,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},C("fieldset",{class:te.fileFieldset},o,C("label",{class:this.classes(te.fileLabel,te.esriButton,te.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,C("input",{class:te.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,r);return C("div",{key:"add-form-container",class:te.formNode},s)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:r,submitting:n}=this,{contentType:o,size:s,url:a}=e,{abilities:u}=i,d=n||!r,h=u.editing&&u.operations.delete&&t.deleteButton?C("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:A=>this._submitDeleteAttachment(A,e),class:this.classes(te.esriButton,te.esriButtonSmall,te.esriButtonTertiary,te.deleteButton,{[te.buttonDisabled]:n})},this.messages.delete):null,f=u.editing&&u.operations.update&&t.updateButton?C("button",{disabled:d,key:"update-button",type:"submit",class:this.classes(te.esriButton,te.esriButtonSmall,te.esriButtonThird,{[te.buttonDisabled]:d})},this.messages.update):null,y=this.visibleElements.cancelUpdateButton?C("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(te.esriButton,te.esriButtonSmall,te.esriButtonTertiary,te.esriButtonThird,{[te.buttonDisabled]:n})},this.messages.cancel):null,m=r?C("span",{key:"file-name",class:te.fileName},r.name):null,g=u.editing&&u.operations.update?C("fieldset",{key:"file",class:te.fileFieldset},m,C("label",{class:this.classes(te.fileLabel,te.esriButton,te.esriButtonSecondary)},this.messages.changeFile,C("input",{class:te.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,v=C("fieldset",{key:"size",class:te.metadataFieldset},C("label",null,Eee(this.messagesUnits,s))),w=C("fieldset",{key:"content-type",class:te.metadataFieldset},C("label",null,o)),_=C("form",{bind:this,afterCreate:Qu,afterRemoved:mM,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},C("div",{class:te.metadata},v,w),g,C("div",{class:te.actions},h,y,f));return C("div",{key:"edit-form-container",class:te.formNode},C("a",{class:te.itemLink,href:a,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),C("div",{class:te.itemLinkOverlay},C("span",{class:te.itemLinkOverlayIcon},C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},C("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),C("path",{fill:"none",d:"M0 0h32v32H0z"}))))),_)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:i}=this.viewModel,{contentType:r,name:n,url:o}=e,s=i&&ate(r),a=this._getCSSTransform(e,s),u=a?{transform:a,"image-orientation":"none"}:{},d=o.includes("?")?"&":"?",h=s?`${o}${d}w=${t}`:lte(r),f={[te.itemMaskIcon]:!s},y={[te.itemImageResizable]:i};return C("div",{class:this.classes(f,te.itemMask)},C("img",{styles:u,alt:n,src:h,class:this.classes(y,te.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i}=this,{abilities:r}=i,{name:n,url:o}=e,s=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),a=r.editing?C("span",{"aria-hidden":"true",class:this.classes(te.itemChevronIcon,gl(this.container)?te.iconLeft:te.iconRight)}):null,u=[s,C("label",{class:te.itemLabel},C("span",{class:te.itemFilename},n||this.messages.noTitle),a)],d=r.editing?C("button",{key:"details-button",bind:this,class:te.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},u):C("a",{key:"details-link",class:te.itemButton,href:o,target:"_blank"},u);return C("li",{class:te.item,key:e},d)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:n}=t,o=r&&r.length,s={[te.containerList]:e!=="preview",[te.containerPreview]:e==="preview"},a=n.editing&&n.operations.add&&i.addButton?C("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(te.esriButton,te.esriButtonTertiary,te.addAttachmentButton),type:"button"},C("span",{"aria-hidden":"true",class:this.classes(te.itemAddIcon,te.iconPlus)}),this.messages.add):null,u=o?C("ul",{class:te.items},r.toArray().map(d=>this.renderAttachmentInfo({attachmentInfo:d,displayType:e}))):C("div",{class:te.empty},this.messages.noAttachments);return C("div",{key:"attachments-container",class:this.classes(te.container,s)},u,a)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&t&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};l([J("viewModel.abilities")],_i.prototype,"abilities",void 0),l([c()],_i.prototype,"displayType",void 0),l([c({readOnly:!0})],_i.prototype,"effectiveDisplayType",null),l([J("viewModel.graphic")],_i.prototype,"graphic",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_i.prototype,"label",void 0),l([c(),pi("esri/widgets/Attachments/t9n/Attachments")],_i.prototype,"messages",void 0),l([c(),pi("esri/core/t9n/Units")],_i.prototype,"messagesUnits",void 0),l([c({readOnly:!0})],_i.prototype,"selectedFile",void 0),l([c({readOnly:!0})],_i.prototype,"submitting",void 0),l([c({readOnly:!0})],_i.prototype,"error",void 0),l([c({type:Lx})],_i.prototype,"viewModel",void 0),l([c()],_i.prototype,"visibleElements",void 0),l([Fe("visibleElements")],_i.prototype,"castVisibleElements",null),_i=l([S("esri.widgets.Attachments")],_i);const dte=_i;let af=class extends Lx{constructor(e){super(e),this.description=null,this.title=null}};l([c()],af.prototype,"description",void 0),l([c()],af.prototype,"title",void 0),af=l([S("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],af);const Ox=af,pte={heading:"esri-widget__heading"};function kx(e,t){const i=hte(e.level),r=`h${i}`;return delete e.level,C(r,{...e,class:GO(pte.heading,e.class),role:"heading","aria-level":String(i)},t)}function hte(e){return yr(Math.ceil(e),1,6)}const gb={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let ad=class extends vi{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return C("div",{class:gb.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?C(kx,{level:this.headingLevel,class:gb.title},e):null}renderDescription(){const{description:e}=this;return e?C("div",{key:"description",class:gb.description},e):null}};l([c()],ad.prototype,"description",void 0),l([c()],ad.prototype,"headingLevel",void 0),l([c()],ad.prototype,"title",void 0),ad=l([S("esri.widgets.Feature.support.FeatureElementInfo")],ad);const Fx=ad,fte={base:"esri-feature-attachments"};let Io=class extends vi{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new dte,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new Ox}initialize(){this._featureElementInfo=new Fx,this.own([q(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),ze),q(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,ze)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var t;const{attachmentsWidget:e}=this;return C("div",{class:fte.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};l([c({readOnly:!0})],Io.prototype,"attachmentsWidget",void 0),l([J("viewModel.description")],Io.prototype,"description",void 0),l([J("attachmentsWidget.displayType")],Io.prototype,"displayType",void 0),l([J("viewModel.graphic")],Io.prototype,"graphic",void 0),l([c()],Io.prototype,"headingLevel",void 0),l([J("viewModel.title")],Io.prototype,"title",void 0),l([c({type:Ox})],Io.prototype,"viewModel",void 0),Io=l([S("esri.widgets.Feature.FeatureAttachments")],Io);const yte=Io;let Fa=class extends Ll(se){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(q(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},ze))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(j1(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=j1(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};l([c({readOnly:!0})],Fa.prototype,"created",void 0),l([c()],Fa.prototype,"creator",void 0),l([c()],Fa.prototype,"destroyer",void 0),l([c({type:Pi})],Fa.prototype,"graphic",void 0),l([c({readOnly:!0})],Fa.prototype,"state",null),Fa=l([S("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Fa);const H1=Fa;function lr(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:gte(e[t])}}}function mte(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function gte(e){return function(t,...i){mte(t)?qO(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function vte(e){return e.split(",").map(t=>t.trim())}function L6(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:vte(e);i.push(...r)}}const O6="calcite-theme-";function wte(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function k6(){return wte().startsWith("dark")}function bte(){return`${O6}${k6()?"dark":"light"}`}function _te(e){Ste(e),e.classList.add(bte())}function Ste(e){Array.from(e.classList).forEach(t=>{t.startsWith(O6)&&e.classList.remove(t)})}function F6(e){return e&&typeof e.render=="function"}function Tte(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const vb={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let ld=class extends vi{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(r=>{x6(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}renderLoading(){return C("div",{class:vb.loaderContainer,key:"loader"},C("div",{class:vb.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?C("div",{key:e,bind:e,afterCreate:this._attachToNode}):F6(e)?C("div",{key:e},!e.destroyed&&e.render()):C("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return C("div",{class:vb.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};l([J("viewModel.creator")],ld.prototype,"creator",void 0),l([J("viewModel.graphic")],ld.prototype,"graphic",void 0),l([c({type:H1})],ld.prototype,"viewModel",void 0),ld=l([S("esri.widgets.Feature.FeatureContent")],ld);const fg=ld;let Ss=class extends se{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const n=r.clone();n.label=I6(n,e),i.push(n)}),i}};l([c()],Ss.prototype,"attributes",void 0),l([c({type:[f9]})],Ss.prototype,"expressionInfos",void 0),l([c()],Ss.prototype,"description",void 0),l([c({type:[Ky]})],Ss.prototype,"fieldInfos",void 0),l([c({readOnly:!0})],Ss.prototype,"formattedFieldInfos",null),l([c()],Ss.prototype,"title",void 0),Ss=l([S("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Ss);const ew=Ss,Ete=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Ate(e){let t=null;return Ete.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function xte(e,t){if(typeof t!="string"||!t)return t;const i=Ate(t);if(!i)return t;const r=t.match(i.pattern),n=r&&r[2],o=qo(qo(i.label,{messages:e,hierPart:n}),{appName:i.appName}),s=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${s} href="$1"${a}>${o}</a>`)}const gh={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let On=class extends vi{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new ew,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Fx,this.own(q(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),ze))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,n=e.label||r,o=i?i[r]==null?"":i[r]:"",s=!(!e.format||!e.format.dateFormat),a=typeof o=="number"&&!s?this._forceLTR(o):xte(this.messagesURIUtils,o),u={[gh.fieldDataDate]:s};return C("tr",{key:`fields-element-info-row-${r}-${t}`},C("th",{key:`fields-element-info-row-header-${r}-${t}`,class:gh.fieldHeader,innerHTML:n}),C("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(gh.fieldData,u),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?C("table",{class:gh.esriTable,summary:this.messages.fieldsSummary},C("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return C("div",{class:gh.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};l([J("viewModel.attributes")],On.prototype,"attributes",void 0),l([J("viewModel.description")],On.prototype,"description",void 0),l([J("viewModel.expressionInfos")],On.prototype,"expressionInfos",void 0),l([J("viewModel.fieldInfos")],On.prototype,"fieldInfos",void 0),l([J("viewModel.title")],On.prototype,"title",void 0),l([c({type:ew})],On.prototype,"viewModel",void 0),l([c(),pi("esri/widgets/Feature/t9n/Feature")],On.prototype,"messages",void 0),l([c(),pi("esri/widgets/support/t9n/uriUtils")],On.prototype,"messagesURIUtils",void 0),On=l([S("esri.widgets.Feature.FeatureFields")],On);const B6=On,Cte={maximumFractionDigits:20};function Ite(e){return Rl(e,Cte)}var jS;let du=jS=class extends V{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e==null?0:e}clone(){return new jS({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};l([c({type:ie,json:{type:[Qe],write:!0}})],du.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],du.prototype,"label",void 0),l([c({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],du.prototype,"value",void 0),l([X("value")],du.prototype,"writeValue",null),du=jS=l([S("esri.renderers.visualVariables.support.ColorStop")],du);const Mte=du;function tw(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Nte(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Rte(e,t,i,r,n,o,s,a,u,d,h,f,y,m,g,v){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=i,w[3]=r,w[4]=n,w[5]=o,w[6]=s,w[7]=a,w[8]=u,w[9]=d,w[10]=h,w[11]=f,w[12]=y,w[13]=m,w[14]=g,w[15]=v,w}function Pte(e,t){return new Float32Array(e,t,16)}const $te=tw();Object.freeze(Object.defineProperty({__proto__:null,create:tw,clone:Nte,fromValues:Rte,createView:Pte,IDENTITY:$te},Symbol.toStringTag,{value:"Module"}));const Dte=(e,t)=>{const i=Ul(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return oa(i,i)},Lte=(e,t)=>{const i=Ul(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return oa(i,i)},Ote=(e,t)=>{const i=1-t,r=Ul(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return oa(r,r)},kte=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),n=Ul(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return oa(n,n)},Fte=(e,t)=>{const i=1-2*t,r=Ul(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return oa(r,r)},Bte=(e,t)=>{const i=Ul(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return oa(i,i)},Ute=(e,t)=>{const i=1-t,r=Ul(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return oa(r,r)};class iw{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=ur(t.strength,i.strength,r),this.radius=ur(t.radius,i.radius,r),this.threshold=ur(t.threshold,i.threshold,r)}clone(){return new iw(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:jf(this.radius),strength:this.strength,threshold:this.threshold}}}class rw{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(ur(t.radius,i.radius,r))}clone(){return new rw(this.radius)}toJSON(){return{type:"blur",radius:jf(this.radius)}}}class Cy{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=ur(t.amount,i.amount,r),this._updateMatrix()}clone(){return new Cy(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||tw();switch(this.type){case"brightness":this._colorMatrix=Dte(t,this.amount);break;case"contrast":this._colorMatrix=Lte(t,this.amount);break;case"grayscale":this._colorMatrix=Ote(t,this.amount);break;case"invert":this._colorMatrix=Fte(t,this.amount);break;case"saturate":this._colorMatrix=Bte(t,this.amount);break;case"sepia":this._colorMatrix=Ute(t,this.amount)}}}class nw{constructor(t,i,r,n){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=ur(t.offsetX,i.offsetX,r),this.offsetY=ur(t.offsetY,i.offsetY,r),this.blurRadius=ur(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(ur(t.color[0],i.color[0],r)),this.color[1]=Math.round(ur(t.color[1],i.color[1],r)),this.color[2]=Math.round(ur(t.color[2],i.color[2],r)),this.color[3]=ur(t.color[3],i.color[3],r)}clone(){return new nw(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:jf(this.offsetX),yoffset:jf(this.offsetY),blurRadius:jf(this.blurRadius),color:t}}}class ow{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=ur(t.angle,i.angle,r),this._updateMatrix()}clone(){return new ow(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||tw();this._colorMatrix=kte(t,this.angle)}}class sw{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=ur(t.amount,i.amount,r)}clone(){return new sw(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function ur(e,t,i){return e+(t-e)*i}function jf(e){return Math.round(1e3*Xo(e))/1e3}function Vte(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new Cy(e.type,0);case"saturate":case"brightness":case"contrast":return new Cy(e.type,1);case"opacity":return new sw(1);case"hue-rotate":return new ow(0);case"blur":return new rw(0);case"drop-shadow":return new nw(0,0,0,[...OA("transparent")]);case"bloom":return new iw(0,0,1)}}function jte(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,n)=>r.type===i[n].type)}function zte(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let n=r.length;n<i.length;n++)r.push(Vte(i[n]))}function Hte(e){const t=e[0];return!!t&&"type"in t}var HM,GM,U6={exports:{}};function V6(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=WM(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new N("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:WM(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!jte(t[i].effects,t[i+1].effects))throw new N("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});zte(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function WM(e){let t;if(!e)return[];try{t=U6.exports.parse(e)}catch(i){throw new N("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>Gte(i))}function Gte(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Wte(e);case"opacity":return qte(e);case"hue-rotate":return Yte(e);case"blur":return Kte(e);case"drop-shadow":return Zte(e);case"bloom":return Jte(e)}}catch(t){throw t.details.filter=e,t}throw new N("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Wte(e){let t=1;return Yp(e.parameters,1),e.parameters.length===1&&(t=Kn(e.parameters[0])),new Cy(e.name,t)}function qte(e){let t=1;return Yp(e.parameters,1),e.parameters.length===1&&(t=Kn(e.parameters[0])),new sw(t)}function Yte(e){let t=0;return Yp(e.parameters,1),e.parameters.length===1&&(t=rie(e.parameters[0])),new ow(t)}function Kte(e){let t=0;return Yp(e.parameters,1),e.parameters.length===1&&(t=Vx(e.parameters[0]),nm(t,e.parameters[0])),new rw(t)}function Zte(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new N("effect:type-error","Accepts only one color",{});i=nie(r)}else{const n=Vx(r);if(Object.isFrozen(t))throw new N("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&nm(n,r)}if(t.length<2||t.length>3)throw new N("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new nw(t[0],t[1],t[2]||0,i||j6("black"))}function Jte(e){let t=1,i=0,r=0;return Yp(e.parameters,3),e.parameters[0]&&(t=Kn(e.parameters[0])),e.parameters[1]&&(i=Vx(e.parameters[1]),nm(i,e.parameters[1])),e.parameters[2]&&(r=Kn(e.parameters[2])),new iw(t,i,r)}function Yp(e,t){if(e.length>t)throw new N("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function aw(e){if(e.type==="color")return"<color>";if(e.unit){if(Ux[e.unit])return"<length>";if(Bx[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function nm(e,t){if(e<0)throw new N("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function Xte(e){if(e.type!=="quantity"||e.unit!==null)throw new N("effect:type-error",`Expected <double>, Actual: ${aw(e)}`,{term:e})}function Qte(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new N("effect:type-error",`Expected <double> or <percentage>, Actual: ${aw(e)}`,{term:e})}GM=function(){function e(n,o){function s(){this.constructor=n}s.prototype=o.prototype,n.prototype=new s}function t(n,o,s,a){var u=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(u,t.prototype),u.expected=o,u.found=s,u.location=a,u.name="SyntaxError",u}function i(n,o,s){return s=s||" ",n.length>o?n:(o-=n.length,n+(s+=s.repeat(o)).slice(0,o))}function r(n,o){var s,a={},u=(o=o!==void 0?o:{}).grammarSource,d={start:CC},h=CC,f="none",y=")",m=",",g="(",v="%",w="px",_="cm",A="mm",I="in",D="pt",M="pc",R="deg",B="rad",j="grad",Y="turn",ee="#",re=".",ue="e",ge=/^[ \t\n\r]/,ne=/^[a-z\-]/,Tt=/^[0-9a-fA-F]/,br=/^[+\-]/,lt=/^[0-9]/,_r=ss("none"),_n=Zt("none",!1),fU=Zt(")",!1),bC=Zt(",",!1),yU=ss("whitespace"),_C=sh([" ","	",`
`,"\r"],!1,!1),mU=ss("function"),gU=Zt("(",!1),vU=ss("identifier"),SC=sh([["a","z"],"-"],!1,!1),wU=ss("percentage"),bU=Zt("%",!1),_U=ss("length"),SU=Zt("px",!1),TU=Zt("cm",!1),EU=Zt("mm",!1),AU=Zt("in",!1),xU=Zt("pt",!1),CU=Zt("pc",!1),IU=ss("angle"),MU=Zt("deg",!1),NU=Zt("rad",!1),RU=Zt("grad",!1),PU=Zt("turn",!1),$U=ss("number"),DU=ss("color"),LU=Zt("#",!1),TC=sh([["0","9"],["a","f"],["A","F"]],!1,!1),EC=sh(["+","-"],!1,!1),aa=sh([["0","9"]],!1,!1),OU=Zt(".",!1),kU=Zt("e",!1),FU=function(){return[]},BU=function(E,F){return{type:"function",name:E,parameters:F||[]}},UU=function(E,F){return F.length>0?wV(E,F,3):[E]},VU=function(E){return{type:"quantity",value:E.value,unit:E.unit}},jU=function(E){return{type:"color",colorType:E.type,value:E.value}},zU=function(E){return E},HU=function(){return _m()},GU=function(E){return{value:E,unit:"%"}},WU=function(E){return{value:E,unit:"px"}},qU=function(E){return{value:E,unit:"cm"}},YU=function(E){return{value:E,unit:"mm"}},KU=function(E){return{value:E,unit:"in"}},ZU=function(E){return{value:E,unit:"pt"}},JU=function(E){return{value:E,unit:"pc"}},XU=function(E){return{value:E,unit:"deg"}},QU=function(E){return{value:E,unit:"rad"}},eV=function(E){return{value:E,unit:"grad"}},tV=function(E){return{value:E,unit:"turn"}},iV=function(E){return{value:E,unit:null}},rV=function(){return{type:"hex",value:_m()}},nV=function(E){return{type:"function",value:E}},oV=function(){return{type:"named",value:_m()}},sV=function(){return parseFloat(_m())},L=0,ut=0,bm=[{line:1,column:1}],yo=0,Dw=[],ae=0;if("startRule"in o){if(!(o.startRule in d))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');h=d[o.startRule]}function _m(){return n.substring(ut,L)}function Zt(E,F){return{type:"literal",text:E,ignoreCase:F}}function sh(E,F,z){return{type:"class",parts:E,inverted:F,ignoreCase:z}}function aV(){return{type:"end"}}function ss(E){return{type:"other",description:E}}function AC(E){var F,z=bm[E];if(z)return z;for(F=E-1;!bm[F];)F--;for(z={line:(z=bm[F]).line,column:z.column};F<E;)n.charCodeAt(F)===10?(z.line++,z.column=1):z.column++,F++;return bm[E]=z,z}function xC(E,F){var z=AC(E),Ie=AC(F);return{source:u,start:{offset:E,line:z.line,column:z.column},end:{offset:F,line:Ie.line,column:Ie.column}}}function Te(E){L<yo||(L>yo&&(yo=L,Dw=[]),Dw.push(E))}function lV(E,F,z){return new t(t.buildMessage(E,F),E,F,z)}function CC(){var E;return(E=uV())===a&&(E=cV()),E}function uV(){var E,F;return ae++,E=L,Jt(),n.substr(L,4)===f?(F=f,L+=4):(F=a,ae===0&&Te(_n)),F!==a?(Jt(),ut=E,E=FU()):(L=E,E=a),ae--,E===a&&ae===0&&Te(_r),E}function cV(){var E,F;if(E=[],(F=Lw())!==a)for(;F!==a;)E.push(F),F=Lw();else E=a;return E}function Lw(){var E,F,z,Ie;return E=L,Jt(),(F=pV())!==a?(Jt(),(z=dV())===a&&(z=null),Jt(),n.charCodeAt(L)===41?(Ie=y,L++):(Ie=a,ae===0&&Te(fU)),Ie!==a?(Jt(),ut=E,E=BU(F,z)):(L=E,E=a)):(L=E,E=a),E}function dV(){var E,F,z,Ie,oi,ht,jr,Sm;if(E=L,(F=Ow())!==a){for(z=[],Ie=L,oi=Jt(),n.charCodeAt(L)===44?(ht=m,L++):(ht=a,ae===0&&Te(bC)),ht===a&&(ht=null),jr=Jt(),(Sm=Ow())!==a?Ie=oi=[oi,ht,jr,Sm]:(L=Ie,Ie=a);Ie!==a;)z.push(Ie),Ie=L,oi=Jt(),n.charCodeAt(L)===44?(ht=m,L++):(ht=a,ae===0&&Te(bC)),ht===a&&(ht=null),jr=Jt(),(Sm=Ow())!==a?Ie=oi=[oi,ht,jr,Sm]:(L=Ie,Ie=a);ut=E,E=UU(F,z)}else L=E,E=a;return E}function Ow(){var E,F;return E=L,(F=hV())===a&&(F=fV())===a&&(F=yV())===a&&(F=mV()),F!==a&&(ut=E,F=VU(F)),(E=F)===a&&(E=L,(F=gV())!==a&&(ut=E,F=jU(F)),E=F),E}function Jt(){var E,F;for(ae++,E=[],ge.test(n.charAt(L))?(F=n.charAt(L),L++):(F=a,ae===0&&Te(_C));F!==a;)E.push(F),ge.test(n.charAt(L))?(F=n.charAt(L),L++):(F=a,ae===0&&Te(_C));return ae--,F=a,ae===0&&Te(yU),E}function pV(){var E,F,z;return ae++,E=L,(F=IC())!==a?(n.charCodeAt(L)===40?(z=g,L++):(z=a,ae===0&&Te(gU)),z!==a?(ut=E,E=zU(F)):(L=E,E=a)):(L=E,E=a),ae--,E===a&&(F=a,ae===0&&Te(mU)),E}function IC(){var E,F,z;if(ae++,E=L,F=[],ne.test(n.charAt(L))?(z=n.charAt(L),L++):(z=a,ae===0&&Te(SC)),z!==a)for(;z!==a;)F.push(z),ne.test(n.charAt(L))?(z=n.charAt(L),L++):(z=a,ae===0&&Te(SC));else F=a;return F!==a&&(ut=E,F=HU()),ae--,(E=F)===a&&(F=a,ae===0&&Te(vU)),E}function hV(){var E,F,z;return ae++,E=L,Jt(),(F=Vr())!==a?(n.charCodeAt(L)===37?(z=v,L++):(z=a,ae===0&&Te(bU)),z!==a?(ut=E,E=GU(F)):(L=E,E=a)):(L=E,E=a),ae--,E===a&&ae===0&&Te(wU),E}function fV(){var E,F,z;return ae++,E=L,Jt(),(F=Vr())!==a?(n.substr(L,2)===w?(z=w,L+=2):(z=a,ae===0&&Te(SU)),z!==a?(ut=E,E=WU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Jt(),(F=Vr())!==a?(n.substr(L,2)===_?(z=_,L+=2):(z=a,ae===0&&Te(TU)),z!==a?(ut=E,E=qU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Jt(),(F=Vr())!==a?(n.substr(L,2)===A?(z=A,L+=2):(z=a,ae===0&&Te(EU)),z!==a?(ut=E,E=YU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Jt(),(F=Vr())!==a?(n.substr(L,2)===I?(z=I,L+=2):(z=a,ae===0&&Te(AU)),z!==a?(ut=E,E=KU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Jt(),(F=Vr())!==a?(n.substr(L,2)===D?(z=D,L+=2):(z=a,ae===0&&Te(xU)),z!==a?(ut=E,E=ZU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,Jt(),(F=Vr())!==a?(n.substr(L,2)===M?(z=M,L+=2):(z=a,ae===0&&Te(CU)),z!==a?(ut=E,E=JU(F)):(L=E,E=a)):(L=E,E=a)))))),ae--,E===a&&ae===0&&Te(_U),E}function yV(){var E,F,z;return ae++,E=L,(F=Vr())!==a?(n.substr(L,3)===R?(z=R,L+=3):(z=a,ae===0&&Te(MU)),z!==a?(ut=E,E=XU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,(F=Vr())!==a?(n.substr(L,3)===B?(z=B,L+=3):(z=a,ae===0&&Te(NU)),z!==a?(ut=E,E=QU(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,(F=Vr())!==a?(n.substr(L,4)===j?(z=j,L+=4):(z=a,ae===0&&Te(RU)),z!==a?(ut=E,E=eV(F)):(L=E,E=a)):(L=E,E=a),E===a&&(E=L,(F=Vr())!==a?(n.substr(L,4)===Y?(z=Y,L+=4):(z=a,ae===0&&Te(PU)),z!==a?(ut=E,E=tV(F)):(L=E,E=a)):(L=E,E=a)))),ae--,E===a&&(F=a,ae===0&&Te(IU)),E}function mV(){var E,F;return ae++,E=L,Jt(),(F=Vr())!==a?(ut=E,E=iV(F)):(L=E,E=a),ae--,E===a&&ae===0&&Te($U),E}function gV(){var E,F,z,Ie;if(ae++,E=L,n.charCodeAt(L)===35?(F=ee,L++):(F=a,ae===0&&Te(LU)),F!==a){if(z=[],Tt.test(n.charAt(L))?(Ie=n.charAt(L),L++):(Ie=a,ae===0&&Te(TC)),Ie!==a)for(;Ie!==a;)z.push(Ie),Tt.test(n.charAt(L))?(Ie=n.charAt(L),L++):(Ie=a,ae===0&&Te(TC));else z=a;z!==a?(ut=E,E=rV()):(L=E,E=a)}else L=E,E=a;return E===a&&(E=L,(F=Lw())!==a&&(ut=E,F=nV(F)),(E=F)===a&&(E=L,(F=IC())!==a&&(ut=E,F=oV()),E=F)),ae--,E===a&&(F=a,ae===0&&Te(DU)),E}function Vr(){var E,F,z,Ie,oi,ht,jr;for(E=L,br.test(n.charAt(L))?(n.charAt(L),L++):ae===0&&Te(EC),F=L,z=[],lt.test(n.charAt(L))?(Ie=n.charAt(L),L++):(Ie=a,ae===0&&Te(aa));Ie!==a;)z.push(Ie),lt.test(n.charAt(L))?(Ie=n.charAt(L),L++):(Ie=a,ae===0&&Te(aa));if(n.charCodeAt(L)===46?(Ie=re,L++):(Ie=a,ae===0&&Te(OU)),Ie!==a){if(oi=[],lt.test(n.charAt(L))?(ht=n.charAt(L),L++):(ht=a,ae===0&&Te(aa)),ht!==a)for(;ht!==a;)oi.push(ht),lt.test(n.charAt(L))?(ht=n.charAt(L),L++):(ht=a,ae===0&&Te(aa));else oi=a;oi!==a?F=z=[z,Ie,oi]:(L=F,F=a)}else L=F,F=a;if(F===a)if(F=[],lt.test(n.charAt(L))?(z=n.charAt(L),L++):(z=a,ae===0&&Te(aa)),z!==a)for(;z!==a;)F.push(z),lt.test(n.charAt(L))?(z=n.charAt(L),L++):(z=a,ae===0&&Te(aa));else F=a;if(F!==a){if(z=L,n.charCodeAt(L)===101?(Ie=ue,L++):(Ie=a,ae===0&&Te(kU)),Ie!==a){if(br.test(n.charAt(L))?(oi=n.charAt(L),L++):(oi=a,ae===0&&Te(EC)),oi===a&&(oi=null),ht=[],lt.test(n.charAt(L))?(jr=n.charAt(L),L++):(jr=a,ae===0&&Te(aa)),jr!==a)for(;jr!==a;)ht.push(jr),lt.test(n.charAt(L))?(jr=n.charAt(L),L++):(jr=a,ae===0&&Te(aa));else ht=a;ht!==a?z=Ie=[Ie,oi,ht]:(L=z,z=a)}else L=z,z=a;z===a&&(z=null),ut=E,E=sV()}else L=E,E=a;return E}function vV(E,F){return E.map(function(z){return z[F]})}function wV(E,F,z){return[E].concat(vV(F,z))}if((s=h())!==a&&L===n.length)return s;throw s!==a&&L<n.length&&Te(aV()),lV(Dw,yo<n.length?n.charAt(yo):null,yo<n.length?xC(yo,yo+1):xC(yo,yo))}return e(t,Error),t.prototype.format=function(n){var o="Error: "+this.message;if(this.location){var s,a=null;for(s=0;s<n.length;s++)if(n[s].source===this.location.source){a=n[s].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,d=this.location.source+":"+u.line+":"+u.column;if(a){var h=this.location.end,f=i("",u.line.toString().length),y=a[u.line-1],m=u.line===h.line?h.column:y.length+1;o+=`
 --> `+d+`
`+f+` |
`+u.line+" | "+y+`
`+f+" | "+i("",u.column-1)+i("",m-u.column,"^")}else o+=`
 at `+d}return o},t.buildMessage=function(n,o){var s={literal:function(m){return'"'+u(m.text)+'"'},class:function(m){var g=m.parts.map(function(v){return Array.isArray(v)?d(v[0])+"-"+d(v[1]):d(v)});return"["+(m.inverted?"^":"")+g+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function a(m){return m.charCodeAt(0).toString(16).toUpperCase()}function u(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function d(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function h(m){return s[m.type](m)}function f(m){var g,v,w=m.map(h);if(w.sort(),w.length>0){for(g=1,v=1;g<w.length;g++)w[g-1]!==w[g]&&(w[v]=w[g],v++);w.length=v}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}function y(m){return m?'"'+u(m)+'"':"end of input"}return"Expected "+f(n)+" but "+y(o)+" found."},{SyntaxError:t,parse:r}},(HM=U6).exports&&(HM.exports=GM());const Bx={deg:1,grad:.9,rad:180/Math.PI,turn:360};function eie(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Bx[e.unit]!=null))throw new N("effect:type-error",`Expected <angle>, Actual: ${aw(e)}`,{term:e})}const Ux={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function tie(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Ux[e.unit]!=null))throw new N("effect:type-error",`Expected <length>, Actual: ${aw(e)}`,{term:e})}function Kn(e){Qte(e);const t=e.value;return nm(t,e),e.unit==="%"?.01*t:t}function iie(e){return Xte(e),nm(e.value,e),e.value}function rie(e){return eie(e),e.value*Bx[e.unit]||0}function Vx(e){return tie(e),e.value*Ux[e.unit]||0}function nie(e){switch(e.colorType){case"hex":return qG(e.value);case"named":return j6(e.value);case"function":return aie(e.value)}}function j6(e){if(!rL(e))throw new N("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return WG(e)}const oie=/^rgba?/i,sie=/^hsla?/i;function aie(e){if(Yp(e.parameters,4),oie.test(e.name))return[Kn(e.parameters[0]),Kn(e.parameters[1]),Kn(e.parameters[2]),e.parameters[3]?Kn(e.parameters[3]):1];if(sie.test(e.name))return nL(iie(e.parameters[0]),Kn(e.parameters[1]),Kn(e.parameters[2]),e.parameters[3]?Kn(e.parameters[3]):1);throw new N("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function jx(e,t,i){var r;try{return uie(e)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function zx(e,t,i,r){try{const n=lie(e);hr(i,n,t)}catch(n){r.messages&&r.messages.push(n)}}function lie(e){const t=V6(e);return t?Hte(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function uie(e){if(!e||e.length===0)return null;if(cie(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:qM(i.value)});return t}return qM(e)}function cie(e){const t=e[0];return!!t&&"scale"in t}function qM(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[ls(i,"amount")];break;case"blur":r=[ls(i,"radius","pt")];break;case"hue-rotate":r=[ls(i,"angle","deg")];break;case"drop-shadow":r=[ls(i,"xoffset","pt"),ls(i,"yoffset","pt"),ls(i,"blurRadius","pt"),die(i,"color")];break;case"bloom":r=[ls(i,"strength"),ls(i,"radius","pt"),ls(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;V6(n),t.push(n)}return t.join(" ")}function ls(e,t,i){if(e[t]==null)throw new N("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function die(e,t){if(e[t]==null)throw new N("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const wb=-3;var rl;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(rl||(rl={}));class Z1e{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,n=0){this._storage.put(this._namespace+t,i,r,n)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class z6{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new wl,this._users=new wl}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,n){const o=this._db.get(t);if(o&&(this._size-=o.size,this._db.delete(t),o.entry!==i&&this._notifyRemove(t,o.entry,rl.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,rl.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const s=1+Math.max(n,wb)-wb;this._db.set(t,{entry:i,size:r,lifetime:s,lives:s}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const n=this._db.get(t);if(n&&n.entry===i){for(this._size-=n.size;r>this._maxSize;){const o=this._notifyRemove(t,i,rl.SOME);if(!(T(o)&&o>0))return void this._db.delete(t);r=o}n.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((s,a)=>{const u=s.lifetime;r[u]=(r[u]||0)+s.size,this._users.forAll(d=>{const h=d.namespace;if(a.startsWith(h)){const f=i[h]||0;i[h]=f+s.size}})});const n={};this._users.forAll(s=>{const a=s.namespace;if(!isNaN(s.hitRate)&&s.hitRate>0){const u=i[a]||0;i[a]=u,n[a]=Math.round(100*s.hitRate)+"%"}else n[a]="0%"});const o=Object.keys(i);o.sort((s,a)=>i[a]-i[s]),o.forEach(s=>t[s]=Math.round(i[s]/2**20)+"MB / "+n[s]);for(let s=r.length-1;s>=0;--s){const a=r[s];a&&(t["Priority "+(s+wb-1)]=Math.round(a/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,rl.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,rl.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let n;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const s=o[1](i,r);return typeof s=="number"&&(n=s),!0}return!1}),n}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,rl.SOME);T(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class pie{constructor(t,i){this._storage=new z6,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}new pie(1e3);new ie([128,128,128]);const hie=new ie("white");function Bc(e,t){if(!e)return null;let i=null;return wp(e)?i=fie(e):Kv(e)&&(i=e.color?new ie(e.color):null),i?Iy(i,t):null}function fie(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{r.type==="object"&&r.resource.href!=null||(i=r.type==="water"?r.color:T(r.material)?r.material.color:null)}),i?new ie(i):null}function Iy(e,t){if(t==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new ie(i)}function yie(e,t,i){const r=e.symbolLayers;if(!r)return;const n=o=>{const s=T(o)?o:null;return Iy(t=t||s||i!=null&&hie,i)};r.forEach(o=>{if(o.type!=="object"||o.resource.href==null||t)if(o.type==="water")o.color=n(o.color);else{const s=T(o.material)?o.material.color:null,a=n(s);O(o.material)?o.material=new kr({color:a}):o.material.color=a,i!=null&&"outline"in o&&T(o.outline)&&T(o.outline.color)&&(o.outline.color=Iy(o.outline.color,i))}})}function mie(e,t,i){(t=t||e.color)&&(e.color=Iy(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=Iy(e.outline.color,i))}function bb(e,t,i){e&&(t||i!=null)&&(t&&(t=new ie(t)),wp(e)?yie(e,t,i):Kv(e)&&mie(e,t,i))}async function gie(e,t){const i=e.symbolLayers;i&&await Xz(i,async r=>vie(r,t))}async function vie(e,t){switch(e.type){case"extrude":bie(e,t);break;case"icon":case"line":case"text":wie(e,t);break;case"path":Sie(e,t);break;case"object":await _ie(e,t)}}function wie(e,t){const i=H6(t);T(i)&&(e.size=i)}function H6(e){for(const t of e)if(typeof t=="number")return t;return null}function bie(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function _ie(e,t){const{resourceSize:i,symbolSize:r}=await Tie(e),n=G6(t,i,r);e.width=zf(t[0],r[0],i[0],n),e.depth=zf(t[1],r[1],i[1],n),e.height=zf(t[2],r[2],i[2],n)}function Sie(e,t){const i=G6(t,cL,[e.width,void 0,e.height]);e.width=zf(t[0],e.width,1,i),e.height=zf(t[2],e.height,1,i)}function G6(e,t,i){for(let r=0;r<3;r++){const n=e[r];switch(n){case"symbol-value":return i[r]!=null?i[r]/t[r]:1;case"proportional":break;default:if(n&&t[r])return n/t[r]}}return 1}async function Tie(e){const t=await U(()=>import("./symbolLayerUtils.43103cad.js"),[],import.meta.url),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:n,depth:o}=e,s=[r,o,n];let a=1;for(let u=0;u<3;u++)if(s[u]!=null){a=s[u]/i[u];break}for(let u=0;u<3;u++)s[u]==null&&(s[u]=i[u]*a);return{resourceSize:i,symbolSize:s}}function zf(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t!=null?t:i;default:return e}}function Eie(e,t){const i=H6(t);if(!O(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function Aie(e,t){if(e&&t)return wp(e)?gie(e,t):void(Kv(e)&&Eie(e,t))}function xie(e,t,i){if(e&&t!=null)if(wp(e)){const r=e.symbolLayers;r&&r.forEach(n=>{if(n&&n.type==="object")switch(i){case"tilt":n.tilt=t;break;case"roll":n.roll=t;break;default:n.heading=t}})}else Kv(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}const Cie="<",Iie=">",Mie=QA("short-date");function Nie(e,t,i,r){let n="";t===0?n=`${Cie} `:t===i&&(n=`${Iie} `);let o=null;return o=r?Jo(e,Mie):Ite(e),n+o}const Rie=new ie([64,64,64]);function Pie(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((n,o)=>i.includes(o)?Nie(n,o,r,t):null)}async function $ie(e,t,i){let r=!1,n=[],o=[];if(e.stops){const d=e.stops;n=d.map(h=>h.value),r=d.some(h=>!!h.label),r&&(o=d.map(h=>h.label))}const s=n[0],a=n[n.length-1];if(s==null&&a==null)return null;const u=r?null:Pie(n,i);return(await Promise.all(n.map(async(d,h)=>({value:d,color:e.type==="opacity"?await Die(d,e,t):(await U(()=>Promise.resolve().then(()=>p3),void 0,import.meta.url)).getColor(e,d),label:r?o[h]:u[h]})))).reverse()}async function Die(e,t,i=Rie){const r=new ie(i),n=(await U(()=>Promise.resolve().then(()=>p3),void 0,import.meta.url)).getOpacity(t,e);return n!=null&&(r.a=n),r}var zS;let lf=zS=class extends V{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new zS({color:this.color,ratio:this.ratio})}};l([c({type:ie,json:{type:[Qe],default:null,write:!0}})],lf.prototype,"color",void 0),l([c({type:Number,json:{write:!0}})],lf.prototype,"ratio",void 0),lf=zS=l([S("esri.renderers.support.HeatmapColorStop")],lf);const Hf=lf;function Lie(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new Hf({ratio:1,color:r.color})),i++)}return t.map((r,n)=>{var s,a;let o="";return n===0?o=((s=e.legendOptions)==null?void 0:s.minLabel)||"low":n===i&&(o=((a=e.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:o,ratio:r.ratio}}).reverse()}W.getLogger("esri.renderers.support.utils");function Sr(e,t,i){r5(e,t,()=>[]).push(...i)}async function Oie(e){var i,r;const t=new Map;if("visualVariables"in e&&e.visualVariables){const n=e.visualVariables.filter(o=>o.type==="color");for(const o of n){const s=o.field||o.valueExpression,a=(await $ie(o)).map(u=>u.color);Sr(t,s,a)}}if(e.type==="heatmap"){const n=Lie(e).map(o=>o.color);Sr(t,e.field,n)}else if(e.type==="pie-chart"){for(const n of e.attributes)Sr(t,n.field,[n.color]);Sr(t,null,[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,Bc(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const n of e.attributes)Sr(t,n.field,[n.color]);Sr(t,null,[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of e.uniqueValueInfos)Sr(t,n.value.toString(),[Bc(n.symbol,null)]);else{const n=e.uniqueValueInfos.map(d=>Bc(d.symbol,null)),{field:o,field2:s,field3:a,valueExpression:u}=e;(o||u)&&Sr(t,o||u,n),s&&Sr(t,s,n),a&&Sr(t,a,n)}else if(e.type==="class-breaks"){const n=e.classBreakInfos.map(o=>Bc(o.symbol,null));Sr(t,e.field||e.valueExpression,n)}else e.type==="simple"&&Sr(t,null,[Bc(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&Sr(t,null,[Bc(e.defaultSymbol,null)]),t.forEach((n,o)=>{const s=zV(n.filter(Boolean),(a,u)=>JSON.stringify(a)===JSON.stringify(u));t.set(o,s)}),t}var HS;let uf=HS=class extends V{constructor(e){super(e),this.name=null,this.code=null}clone(){return new HS({name:this.name,code:this.code})}};l([c({type:String,json:{write:!0}})],uf.prototype,"name",void 0),l([c({type:[String,Number],json:{write:!0}})],uf.prototype,"code",void 0),uf=HS=l([S("esri.layers.support.CodedValue")],uf);const kie=new Se({inherited:"inherited",codedValue:"coded-value",range:"range"});let cf=class extends V{constructor(e){super(e),this.name=null,this.type=null}};l([c({type:String,json:{write:!0}})],cf.prototype,"name",void 0),l([pe(kie)],cf.prototype,"type",void 0),cf=l([S("esri.layers.support.Domain")],cf);const lw=cf;var GS;let df=GS=class extends lw{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new GS({codedValues:P(this.codedValues),name:this.name})}};l([c({type:[uf],json:{write:!0}})],df.prototype,"codedValues",void 0),l([pe({codedValue:"coded-value"})],df.prototype,"type",void 0),df=GS=l([S("esri.layers.support.CodedValueDomain")],df);const W6=df;var WS;let yg=WS=class extends lw{constructor(e){super(e),this.type="inherited"}clone(){return new WS}};l([pe({inherited:"inherited"})],yg.prototype,"type",void 0),yg=WS=l([S("esri.layers.support.InheritedDomain")],yg);const q6=yg;var qS;let ud=qS=class extends lw{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new qS({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};l([c({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],ud.prototype,"maxValue",void 0),l([c({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],ud.prototype,"minValue",void 0),l([pe({range:"range"})],ud.prototype,"type",void 0),ud=qS=l([S("esri.layers.support.RangeDomain")],ud);const Y6=ud,K6={key:"type",base:lw,typeMap:{range:Y6,"coded-value":W6,inherited:q6}};function Hx(e){if(!e||!e.type)return null;switch(e.type){case"range":return Y6.fromJSON(e);case"codedValue":return W6.fromJSON(e);case"inherited":return q6.fromJSON(e)}return null}const Fie=new Se({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var YS;const Bie=new Se({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Oi=YS=class extends V{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?i.value:null}readValueType(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?Bie.fromJSON(i.fieldValueType):null}clone(){return new YS({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};l([c({type:String,json:{write:!0}})],Oi.prototype,"alias",void 0),l([c({type:[String,Number],json:{write:{allowNull:!0}}})],Oi.prototype,"defaultValue",void 0),l([c()],Oi.prototype,"description",void 0),l([K("description")],Oi.prototype,"readDescription",null),l([c({types:K6,json:{read:{reader:Hx},write:!0}})],Oi.prototype,"domain",void 0),l([c({type:Boolean,json:{write:!0}})],Oi.prototype,"editable",void 0),l([c({type:Qe,json:{write:!0}})],Oi.prototype,"length",void 0),l([c({type:String,json:{write:!0}})],Oi.prototype,"name",void 0),l([c({type:Boolean,json:{write:!0}})],Oi.prototype,"nullable",void 0),l([pe(Fie)],Oi.prototype,"type",void 0),l([c()],Oi.prototype,"valueType",void 0),l([K("valueType",["description"])],Oi.prototype,"readValueType",null),Oi=YS=l([S("esri.layers.support.Field")],Oi);const om=Oi;var KS;let cd=KS=class extends V{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new KS({mapLayerId:e,gdbVersion:t})}};l([pe({mapLayer:"map-layer"})],cd.prototype,"type",void 0),l([c({type:Qe,json:{write:!0}})],cd.prototype,"mapLayerId",void 0),l([c({type:String,json:{write:!0}})],cd.prototype,"gdbVersion",void 0),cd=KS=l([S("esri.layers.support.source.MapLayerSource")],cd);var ZS;let Ts=ZS=class extends V{constructor(e){super(e),this.type="query-table"}clone(){var s;const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:n}=this,o={workspaceId:e,query:t,oidFields:i,spatialReference:(s=r==null?void 0:r.clone())!=null?s:void 0,geometryType:n};return new ZS(o)}};l([pe({queryTable:"query-table"})],Ts.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Ts.prototype,"workspaceId",void 0),l([c({type:String,json:{write:!0}})],Ts.prototype,"query",void 0),l([c({type:String,json:{write:!0}})],Ts.prototype,"oidFields",void 0),l([c({type:me,json:{write:!0}})],Ts.prototype,"spatialReference",void 0),l([pe(HA)],Ts.prototype,"geometryType",void 0),Ts=ZS=l([S("esri.layers.support.source.QueryTableDataSource")],Ts);var JS;let dd=JS=class extends V{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new JS({workspaceId:e,dataSourceName:t})}};l([pe({raster:"raster"})],dd.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],dd.prototype,"dataSourceName",void 0),l([c({type:String,json:{write:!0}})],dd.prototype,"workspaceId",void 0),dd=JS=l([S("esri.layers.support.source.RasterDataSource")],dd);var XS;let pu=XS=class extends V{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new XS({workspaceId:e,gdbVersion:t,dataSourceName:i})}};l([pe({table:"table"})],pu.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],pu.prototype,"workspaceId",void 0),l([c({type:String,json:{write:!0}})],pu.prototype,"gdbVersion",void 0),l([c({type:String,json:{write:!0}})],pu.prototype,"dataSourceName",void 0),pu=XS=l([S("esri.layers.support.source.TableDataSource")],pu);var QS,eT;const Uie=mi()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Ar=QS=class extends V{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return YM()(e,t,i)}castLeftTableSource(e){return Yo(tT(),e)}readRightTableSource(e,t,i){return YM()(e,t,i)}castRightTableSource(e){return Yo(tT(),e)}clone(){var s,a;const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:n}=this,o={leftTableKey:e,rightTableKey:t,leftTableSource:(s=i==null?void 0:i.clone())!=null?s:void 0,rightTableSource:(a=r==null?void 0:r.clone())!=null?a:void 0,joinType:n};return new QS(o)}};l([pe({joinTable:"join-table"})],Ar.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Ar.prototype,"leftTableKey",void 0),l([c({type:String,json:{write:!0}})],Ar.prototype,"rightTableKey",void 0),l([c({json:{write:!0}})],Ar.prototype,"leftTableSource",void 0),l([K("leftTableSource")],Ar.prototype,"readLeftTableSource",null),l([Fe("leftTableSource")],Ar.prototype,"castLeftTableSource",null),l([c({json:{write:!0}})],Ar.prototype,"rightTableSource",void 0),l([K("rightTableSource")],Ar.prototype,"readRightTableSource",null),l([Fe("rightTableSource")],Ar.prototype,"castRightTableSource",null),l([pe(Uie)],Ar.prototype,"joinType",void 0),Ar=QS=l([S("esri.layers.support.source.JoinTableDataSource")],Ar);let _b=null;function YM(){return _b||(_b=Op({types:tT()})),_b}let Sb=null;function tT(){return Sb||(Sb={key:"type",base:null,typeMap:{"data-layer":Zn,"map-layer":cd}}),Sb}const Vie={key:"type",base:null,typeMap:{"join-table":Ar,"query-table":Ts,raster:dd,table:pu}};let Zn=eT=class extends V{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new eT({fields:e,dataSource:t})}};l([pe({dataLayer:"data-layer"})],Zn.prototype,"type",void 0),l([c({type:[om],json:{write:!0}})],Zn.prototype,"fields",void 0),l([c({types:Vie,json:{write:!0}})],Zn.prototype,"dataSource",void 0),Zn=eT=l([S("esri.layers.support.source.DataLayerSource")],Zn),Zn.from=Ze(Zn);function uw(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function sm(e){return typeof e=="string"?rt(e):P(e)}function cw(e,t,i){const r={};for(const n in e){if(n==="declaredClass")continue;const o=e[n];if(o!=null&&typeof o!="function")if(Array.isArray(o)){r[n]=[];for(let s=0;s<o.length;s++)r[n][s]=cw(o[s])}else if(typeof o=="object")if(o.toJSON){const s=o.toJSON(i&&i[n]);r[n]=t?s:JSON.stringify(s)}else r[n]=t?o:JSON.stringify(o);else r[n]=o}return r}const Ym={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Hi({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:me.WebMercator}),minus180Line:new Hi({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:me.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Hi({paths:[[[180,-180],[180,180]]],spatialReference:me.WGS84}),minus180Line:new Hi({paths:[[[-180,-180],[-180,180]]],spatialReference:me.WGS84})}};function tc(e,t){return Math.ceil((e-t)/(2*t))}function Z6(e,t){const i=Gf(e);for(const r of i)for(const n of r)n[0]+=t;return e}function Gf(e){return sc(e)?e.rings:e.paths}async function jie(e,t,i,r){const n=typeof e=="string"?rt(e):e,o=t[0].spatialReference,s={...r,query:{...n.query,f:"json",sr:JSON.stringify(o),target:JSON.stringify({geometryType:Up(t[0]),geometries:t}),cutter:JSON.stringify(i)}},a=await Be(n.path+"/cut",s),{cutIndexes:u,geometries:d=[]}=a.data;return{cutIndexes:u,geometries:d.map(h=>{const f=Ji(h);return f.spatialReference=o,f})}}async function zie(e,t,i){const r=typeof e=="string"?rt(e):e,n=t[0].spatialReference,o=Up(t[0]),s={...i,query:{...r.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(Hie(t))}};return Gie((await Be(r.path+"/simplify",s)).data,o,n)}function Hie(e){return{geometryType:Up(e[0]),geometries:e.map(t=>t.toJSON())}}function Gie(e,t,i){const r=qL(t);return e.map(n=>{const o=r.fromJSON(n);return o.spatialReference=i,o})}const J6=W.getLogger("esri.geometry.support.normalizeUtils");function Wie(e){return e.type==="polygon"}function qie(e){return e[0].type==="polygon"}function Yie(e){return e[0].type==="polyline"}function Kie(e,t){if(!(e instanceof Hi||e instanceof mr)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw J6.error(n),new N(n)}const i=Gf(e),r=[];for(const n of i){const o=[];r.push(o),o.push([n[0][0],n[0][1]]);for(let s=0;s<n.length-1;s++){const a=n[s][0],u=n[s][1],d=n[s+1][0],h=n[s+1][1],f=Math.sqrt((d-a)*(d-a)+(h-u)*(h-u)),y=(h-u)/f,m=(d-a)/f,g=f/t;if(g>1){for(let A=1;A<=g-1;A++){const I=A*t,D=m*I+a,M=y*I+u;o.push([D,M])}const v=(f+Math.floor(g-1)*t)/2,w=m*v+a,_=y*v+u;o.push([w,_])}o.push([d,h])}}return Wie(e)?new mr({rings:r,spatialReference:e.spatialReference}):new Hi({paths:r,spatialReference:e.spatialReference})}function KM(e,t,i){if(t){const r=Kie(e,1e6);e=kh(r,!0)}return i&&(e=Z6(e,i)),e}function ZM(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const n=tc(r,t);e[0]=r+n*(-2*t)}else if(r<i){const n=tc(r,i);e[0]=r+n*(-2*i)}}else{const r=e.x;if(r>t){const n=tc(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<i){const n=tc(r,i);e=e.clone().offset(n*(-2*i),0)}}return e}function Zie(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const n=t.cutIndexes[r],o=t.geometries[r],s=Gf(o);for(let a=0;a<s.length;a++){const u=s[a];u.some(d=>{if(d[0]<180)return!0;{let h=0;for(let y=0;y<u.length;y++){const m=u[y][0];h=m>h?m:h}h=Number(h.toFixed(9));const f=-360*tc(h,180);for(let y=0;y<u.length;y++){const m=o.getPoint(a,y);o.setPoint(a,y,m.clone().offset(f,0))}return!0}})}if(n===i){if(qie(e))for(const a of Gf(o))e[n]=e[n].addRing(a);else if(Yie(e))for(const a of Gf(o))e[n]=e[n].addPath(a)}else i=n,e[n]=o}return e}async function X6(e,t,i){var D;if(!Array.isArray(e))return X6([e],t);t&&typeof t!="string"&&J6.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(D=t==null?void 0:t.url)!=null?D:Ne.geometryServiceUrl;let n,o,s,a,u,d,h,f,y=0;const m=[],g=[];for(const M of e)if(O(M))g.push(M);else if(n||(n=M.spatialReference,o=so(n),s=n.isWebMercator,d=s?102100:4326,a=Ym[d].maxX,u=Ym[d].minX,h=Ym[d].plus180Line,f=Ym[d].minus180Line),o)if(M.type==="mesh")g.push(M);else if(M.type==="point")g.push(ZM(M.clone(),a,u));else if(M.type==="multipoint"){const R=M.clone();R.points=R.points.map(B=>ZM(B,a,u)),g.push(R)}else if(M.type==="extent"){const R=M.clone()._normalize(!1,!1,o);g.push(R.rings?new mr(R):R)}else if(M.extent){const R=M.extent,B=tc(R.xmin,u)*(2*a);let j=B===0?M.clone():Z6(M.clone(),B);R.offset(B,0),R.intersects(h)&&R.xmax!==a?(y=R.xmax>y?R.xmax:y,j=KM(j,s),m.push(j),g.push("cut")):R.intersects(f)&&R.xmin!==u?(y=R.xmax*(2*a)>y?R.xmax*(2*a):y,j=KM(j,s,360),m.push(j),g.push("cut")):g.push(j)}else g.push(M.clone());else g.push(M);let v=tc(y,a),w=-90;const _=v,A=new Hi;for(;v>0;){const M=360*v-180;A.addPath([[M,w],[M,-1*w]]),w*=-1,v--}if(m.length>0&&_>0){const M=Zie(m,await jie(r,m,A,i)),R=[],B=[];for(let ee=0;ee<g.length;ee++){const re=g[ee];if(re!=="cut")B.push(re);else{const ue=M.shift(),ge=e[ee];T(ge)&&ge.type==="polygon"&&ge.rings&&ge.rings.length>1&&ue.rings.length>=ge.rings.length?(R.push(ue),B.push("simplify")):B.push(s?qs(ue):ue)}}if(!R.length)return B;const j=await zie(r,R,i),Y=[];for(let ee=0;ee<B.length;ee++){const re=B[ee];re!=="simplify"?Y.push(re):Y.push(s?qs(j.shift()):j.shift())}return Y}const I=[];for(let M=0;M<g.length;M++){const R=g[M];if(R!=="cut")I.push(R);else{const B=m.shift();I.push(s===!0?qs(B):B)}}return I}function J1e(e,t){const i=so(t);if(i){const[r,n]=i.valid,o=n-r;if(e<r)for(;e<r;)e+=o;if(e>n)for(;e>n;)e-=o}return e}function Q6(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let n=0;n<r.length;n++)t[i][n]=Q6(r[n])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var nl;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(nl||(nl={}));const JM=4294967296,Jie=new TextDecoder("utf-8"),Xie=k("safari")||k("ios")?6:k("ff")?12:32;class uc{constructor(t,i,r=0,n=t?t.byteLength:0){this._tag=0,this._dataType=nl.unknown,this._init(t,i,r,n)}_init(t,i,r,n){this._data=t,this._dataView=i,this._pos=r,this._end=n}clone(){return new uc(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*JM;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*JM;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,n){const o=this.getMessage(),s=t(o,i,r,n);return o.release(),s}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=uc.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){uc.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case nl.varint:this._decodeVarint();break;case nl.fixed64:this._skip(8);break;case nl.delimited:this._skip(this._getLength());break;case nl.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i,r=this._pos,n=0;if(this._end-r>=10)do{if(i=t[r++],n|=127&i,(128&i)==0||(i=t[r++],n|=(127&i)<<7,(128&i)==0)||(i=t[r++],n|=(127&i)<<14,(128&i)==0)||(i=t[r++],n|=(127&i)<<21,(128&i)==0)||(i=t[r++],n+=268435456*(127&i),(128&i)==0)||(i=t[r++],n+=34359738368*(127&i),(128&i)==0)||(i=t[r++],n+=4398046511104*(127&i),(128&i)==0)||(i=t[r++],n+=562949953421312*(127&i),(128&i)==0)||(i=t[r++],n+=72057594037927940*(127&i),(128&i)==0)||(i=t[r++],n+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let o=1;for(;r!==this._end&&(i=t[r],(128&i)!=0);)++r,n+=(127&i)*o,o*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=i*o}return this._pos=r,n}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==nl.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>Xie){const s=t.subarray(i,r);return Jie.decode(s)}let n="",o="";for(let s=i;s<r;++s){const a=t[s];128&a?o+="%"+a.toString(16):(n+=decodeURIComponent(o)+String.fromCharCode(a),o="")}return o.length&&(n+=decodeURIComponent(o)),n}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}}uc.pool=new uo(uc,null,e=>{e._data=null,e._dataView=null});class qi{constructor(t=[],i=[],r=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,n,o]=t,s=n-i,a=o-r;return new qi([5],[i,r,s,0,0,a,-s,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let o=0;o<n;o++)t(this.coords[2*(o+i)],this.coords[2*(o+i)+1]);i+=n}}clone(t){return t?(t.set(this.coords),new qi(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new qi(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class es{constructor(t=null,i={},r,n){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new es(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function Qie(e){return!(O(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class X1e extends es{}class dw{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new dw;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const ek=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Q1e{constructor(t){this.options=t,this.geometryTypes=ek,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new dw}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||Qi(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=bp(this.options.sourceSpatialReference)/bp(t.spatialReference);if(i!==1)for(const r of t.features){if(!Qie(r))continue;const n=r.geometry.coords;for(let o=2;o<n.length;o+=3)n[o]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new es}createSpatialReference(){return{wkid:0}}createGeometry(){return new qi}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new qi}}const XM=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],QM=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],eN=["upperLeft","lowerLeft"];function tN(e){return e>=XM.length?null:XM[e]}function ere(e){return e>=QM.length?null:QM[e]}function iN(e){return e>=eN.length?null:eN[e]}function rN(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function tre(e,t,i){const n=t.createPointGeometry(i);for(;e.next();)switch(e.tag()){case 3:{const o=e.getUInt32(),s=e.pos()+o;let a=0;for(;e.pos()<s;)t.addCoordinatePoint(n,e.getSInt64(),a++);break}default:e.skip()}return n}function ire(e,t,i){const o=t.createGeometry(i),s=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const a=e.getUInt32(),u=e.pos()+a;let d=0;for(;e.pos()<u;)t.addLength(o,e.getUInt32(),d++);break}case 3:{const a=e.getUInt32(),u=e.pos()+a;let d=0;for(t.allocateCoordinates(o);e.pos()<u;)t.addCoordinate(o,e.getSInt64(),d),d++,d===s&&(d=0);break}default:e.skip()}return o}function rre(e){const n=new qi;let o="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const s=e.getUInt32(),a=e.pos()+s;for(;e.pos()<a;)n.lengths.push(e.getUInt32());break}case 3:{const s=e.getUInt32(),a=e.pos()+s;for(;e.pos()<a;)n.coords.push(e.getSInt64());break}case 1:o=ek[e.getEnum()];break;default:e.skip()}return{queryGeometry:n,queryGeometryType:o}}function nre(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function ore(e){const a={type:tN(0)};for(;e.next();)switch(e.tag()){case 1:a.name=e.getString();break;case 2:a.type=tN(e.getEnum());break;case 3:a.alias=e.getString();break;case 4:a.sqlType=ere(e.getEnum());break;case 5:e.skip();break;case 6:a.defaultValue=e.getString();break;default:e.skip()}return a}function sre(e){const r={};for(;e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.isSystemMaintained=e.getBool();break;default:e.skip()}return r}function are(e,t,i,r){const a=t.createFeature(i);let u=0;for(;e.next();)switch(e.tag()){case 1:{const d=r[u++].name;a.attributes[d]=e.processMessage(nre);break}case 2:a.geometry=e.processMessageWithArgs(ire,t,i);break;case 4:a.centroid=e.processMessageWithArgs(tre,t,i);break;default:e.skip()}return a}function lre(e){const o=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:o[0]=e.getDouble();break;case 2:o[1]=e.getDouble();break;case 4:o[2]=e.getDouble();break;case 3:o[3]=e.getDouble();break;default:e.skip()}return o}function ure(e){const o=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:o[0]=e.getDouble();break;case 2:o[1]=e.getDouble();break;case 4:o[2]=e.getDouble();break;case 3:o[3]=e.getDouble();break;default:e.skip()}return o}function cre(e){const n={originPosition:iN(0)};for(;e.next();)switch(e.tag()){case 1:n.originPosition=iN(e.getEnum());break;case 2:n.scale=e.processMessage(lre);break;case 3:n.translate=e.processMessage(ure);break;default:e.skip()}return n}function dre(e){const n={};for(;e.next();)switch(e.tag()){case 1:n.shapeAreaFieldName=e.getString();break;case 2:n.shapeLengthFieldName=e.getString();break;case 3:n.units=e.getString();break;default:e.skip()}return n}function pre(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function hre(e,t){const v=t.createFeatureResult();v.geometryType=rN(t,0);let w=!1;for(;e.next();)switch(e.tag()){case 1:v.objectIdFieldName=e.getString();break;case 3:v.globalIdFieldName=e.getString();break;case 4:v.geohashFieldName=e.getString();break;case 5:v.geometryProperties=e.processMessage(dre);break;case 7:v.geometryType=rN(t,e.getEnum());break;case 8:v.spatialReference=e.processMessageWithArgs(pre,t);break;case 10:v.hasZ=e.getBool();break;case 11:v.hasM=e.getBool();break;case 12:v.transform=e.processMessage(cre);break;case 9:{const _=e.getBool();v.exceededTransferLimit=_;break}case 13:t.addField(v,e.processMessage(ore));break;case 15:w||(t.prepareFeatures(v),w=!0),t.addFeature(v,e.processMessageWithArgs(are,t,v,v.fields));break;case 2:v.uniqueIdField=e.processMessage(sre);break;default:e.skip()}return t.finishFeatureResult(v),v}function fre(e,t){const n={};let o=null;for(;e.next();)switch(e.tag()){case 4:o=e.processMessageWithArgs(rre);break;case 1:n.featureResult=e.processMessageWithArgs(hre,t);break;default:e.skip()}return T(o)&&n.featureResult&&t.addQueryGeometry(n,o),n}function yre(e,t){try{const r=new uc(new Uint8Array(e),new DataView(e)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(fre,t):r.skip();return n}catch(i){throw new N("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function mre(e,t){const i=yre(e,t),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,o=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const s=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[s])}return r&&(r.queryGeometry=n,r.queryGeometryType=o),r}function iT(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=wO(i.geometryType,t,e.outSpatialReference);if(!O(r))for(const n of i.features)r(n.geometry)}const nN="Layer does not support extent calculation.";function tk(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function ik(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r;let o,s,a;if(T(i)&&(s=i.spatialReference,a=i.spatialReference.wkid||JSON.stringify(i.spatialReference),n.geometryType=Up(i),n.geometry=tk(i,e.compactGeometryEnabled),n.inSR=a),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete n.outFields:r.outFields.includes("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?(n.outSR=r.outSR.wkid||JSON.stringify(r.outSR),o=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR,o=s),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&T(s)&&T(e.quantizationParameters)&&T(e.quantizationParameters.extent)&&s.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const u=r.timeExtent,{start:d,end:h}=u;d==null&&h==null||(n.time=d===h?d:`${d==null?"null":d},${h==null?"null":h}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&T(s)&&T(o)&&s.equals(o)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function rk(e,t,i,r){const n=T(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await Kp(e,t,"json",r);return iT(t,i,n.data),n}async function gre(e,t,i,r){if(T(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const n=await nk(e,t,r),o=n;return o.data=mre(n.data,i),o}function nk(e,t,i){return Kp(e,t,"pbf",i)}function vre(e,t,i){return T(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Kp(e,t,"json",i,{returnIdsOnly:!0})}function wre(e,t,i){return T(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Kp(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function bre(e,t,i){return T(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):Kp(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(nN);if(n.hasOwnProperty("count"))throw new Error(nN);return r})}function Kp(e,t,i,r={},n={}){const o=typeof e=="string"?rt(e):e,s=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",X6(s,null,r).then(a=>{const u=a&&a[0];T(u)&&((t=t.clone()).geometry=u);const d=Q6({...o.query,f:i,...n,...ik(t,n)});return Be(Zo(o.path,"query"),{...r,query:{...d,...r.query}})})}const eve=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:tk,executeQuery:rk,executeQueryForCount:wre,executeQueryForExtent:bre,executeQueryForIds:vre,executeQueryPBF:gre,executeQueryPBFBuffer:nk,queryToQueryStringParameters:ik,runQuery:Kp},Symbol.toStringTag,{value:"Module"}));var rT;const nT=new Se({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let ei=rT=class extends V{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var n;const i=me.fromJSON(t.spatialReference),r=[];for(let o=0;o<e.length;o++){const s=e[o],a=Pi.fromJSON(s),u=s.geometry&&s.geometry.spatialReference;T(a.geometry)&&!u&&(a.geometry.spatialReference=i);const d=s.aggregateGeometries,h=a.aggregateGeometries;if(d&&T(h))for(const f in h){const y=h[f],m=(n=d[f])==null?void 0:n.spatialReference;T(y)&&!m&&(y.spatialReference=i)}r.push(a)}return r}writeGeometryType(e,t,i,r){if(e)return void nT.write(e,t,i,r);const{features:n}=this;if(n){for(const o of n)if(o&&T(o.geometry))return void nT.write(o.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=Ji(e);return!i&&t.spatialReference&&(r.spatialReference=me.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&T(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new rT(this.cloneProperties())}cloneProperties(){return P({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const n=e&&e[i];r.geometry=n&&n.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,n]}=e,o=d=>Math.round((d-r)/t),s=d=>Math.round((n-d)/i),a=this.features,u=this._getQuantizationFunction(this.geometryType,o,s);for(let d=0,h=a.length;d<h;d++)u(a[d].geometry)||(a.splice(d,1),d--,h--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[o,s]}=i,a=h=>h*o+r,u=h=>n-h*s,d=this._getHydrationFunction(e,a,u);for(const{geometry:h}of t)T(h)&&d(h);return this.transform=null,this}_quantizePoints(e,t,i){let r,n;const o=[];for(let s=0,a=e.length;s<a;s++){const u=e[s];if(s>0){const d=t(u[0]),h=i(u[1]);d===r&&h===n||(o.push([d-r,h-n]),r=d,n=h)}else r=t(u[0]),n=i(u[1]),o.push([r,n])}return o.length>0?o:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const n=sc(r)?r.rings:r.paths,o=[];for(let s=0,a=n.length;s<a;s++){const u=n[s],d=this._quantizePoints(u,t,i);d&&o.push(d)}return o.length>0?(sc(r)?r.rings=o:r.paths=o,r):null}:e==="multipoint"?r=>{const n=this._quantizePoints(r.points,t,i);return n.length>0?(r.points=n,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const n=sc(r)?r.rings:r.paths;let o,s;for(let a=0,u=n.length;a<u;a++){const d=n[a];for(let h=0,f=d.length;h<f;h++){const y=d[h];h>0?(o+=y[0],s+=y[1]):(o=y[0],s=y[1]),y[0]=t(o),y[1]=i(s)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const n=r.points;let o,s;for(let a=0,u=n.length;a<u;a++){const d=n[a];a>0?(o+=d[0],s+=d[1]):(o=d[0],s=d[1]),d[0]=t(o),d[1]=i(s)}}:void 0}};l([c({type:String,json:{write:!0}})],ei.prototype,"displayFieldName",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ei.prototype,"exceededTransferLimit",void 0),l([c({type:[Pi],json:{write:!0}})],ei.prototype,"features",void 0),l([K("features")],ei.prototype,"readFeatures",null),l([c({type:[om],json:{write:!0}})],ei.prototype,"fields",void 0),l([c({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:nT.read}}})],ei.prototype,"geometryType",void 0),l([X("geometryType")],ei.prototype,"writeGeometryType",null),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ei.prototype,"hasM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ei.prototype,"hasZ",void 0),l([c({types:Rc,json:{write:!0}})],ei.prototype,"queryGeometry",void 0),l([K("queryGeometry")],ei.prototype,"readQueryGeometry",null),l([c({type:me,json:{write:!0}})],ei.prototype,"spatialReference",void 0),l([X("spatialReference")],ei.prototype,"writeSpatialReference",null),l([c({json:{write:!0}})],ei.prototype,"transform",void 0),ei=rT=l([S("esri.rest.support.FeatureSet")],ei),ei.prototype.toJSON.isDefaultToJSON=!0;const am=ei,tve=Object.freeze(Object.defineProperty({__proto__:null,default:am},Symbol.toStringTag,{value:"Module"})),oN={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},_re={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Sre(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function cc(e,t,i){const r=new Date(e.getTime());if(t&&i){const n=_re[i],{getter:o,setter:s,multiplier:a}=n;if(i==="months"){const u=Sre(r.getFullYear(),r.getMonth()+t);r.getDate()>u&&r.setDate(u)}r[s](r[o]()+t*a)}return r}function sN(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function Tre(e,t,i){return e===0?0:e*oN[t]/oN[i]}var kn;let Rr=kn=class extends V{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return aN}static get empty(){return Ere}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(kn.allTime)}get isEmpty(){return this.equals(kn.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new kn({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=T(this.start)?this.start.getTime():this.start,i=T(this.end)?this.end.getTime():this.end,r=T(e.start)?e.start.getTime():e.start,n=T(e.end)?e.end.getTime():e.end;return t===r&&i===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=ko(this.start,r=>sN(r,e)),i=ko(this.end,r=>cc(sN(r,e),1,e));return new kn({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return kn.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=$h(this.start,-1/0,a=>a.getTime()),i=$h(this.end,1/0,a=>a.getTime()),r=$h(e.start,-1/0,a=>a.getTime()),n=$h(e.end,1/0,a=>a.getTime());let o,s;if(r>=t&&r<=i?o=r:t>=r&&t<=n&&(o=t),i>=r&&i<=n?s=i:n>=t&&n<=i&&(s=n),!isNaN(o)&&!isNaN(s)){const a=new kn;return a.start=o===-1/0?null:new Date(o),a.end=s===1/0?null:new Date(s),a}return kn.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new kn,{start:r,end:n}=this;return T(r)&&(i.start=cc(r,e,t)),T(n)&&(i.end=cc(n,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return aN.clone();const t=T(this.start)&&T(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=T(this.end)&&T(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new kn({start:t,end:i})}};l([c({type:Date,json:{write:{allowNull:!0}}})],Rr.prototype,"end",void 0),l([K("end")],Rr.prototype,"readEnd",null),l([X("end")],Rr.prototype,"writeEnd",null),l([c({readOnly:!0,json:{read:!1}})],Rr.prototype,"isAllTime",null),l([c({readOnly:!0,json:{read:!1}})],Rr.prototype,"isEmpty",null),l([c({type:Date,json:{write:{allowNull:!0}}})],Rr.prototype,"start",void 0),l([K("start")],Rr.prototype,"readStart",null),l([X("start")],Rr.prototype,"writeStart",null),Rr=kn=l([S("esri.TimeExtent")],Rr);const aN=new Rr,Ere=new Rr({start:void 0,end:void 0}),rs=Rr;var oT;const lN=new Se({upperLeft:"upper-left",lowerLeft:"lower-left"});let hu=oT=class extends V{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new oT(P({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};l([c({type:Oe,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],hu.prototype,"extent",void 0),l([c({type:["view","edit"],json:{write:!0}})],hu.prototype,"mode",void 0),l([c({type:String,json:{read:lN.read,write:lN.write}})],hu.prototype,"originPosition",void 0),l([c({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],hu.prototype,"tolerance",void 0),hu=oT=l([S("esri.rest.support.QuantizationParameters")],hu);const ok=hu;var sT;const uN=new Se({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Fn=sT=class extends V{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=P(e))}clone(){return new sT({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:P(this.statisticParameters)})}};l([c({type:Number,json:{write:!0}})],Fn.prototype,"maxPointCount",void 0),l([c({type:Number,json:{write:!0}})],Fn.prototype,"maxRecordCount",void 0),l([c({type:Number,json:{write:!0}})],Fn.prototype,"maxVertexCount",void 0),l([c({type:String,json:{write:!0}})],Fn.prototype,"onStatisticField",void 0),l([c({type:String,json:{write:!0}})],Fn.prototype,"outStatisticFieldName",void 0),l([c({type:String,json:{read:{source:"statisticType",reader:uN.read},write:{target:"statisticType",writer:uN.write}}})],Fn.prototype,"statisticType",void 0),l([c({type:Object})],Fn.prototype,"statisticParameters",void 0),l([X("statisticParameters")],Fn.prototype,"writeStatisticParameters",null),Fn=sT=l([S("esri.rest.support.StatisticDefinition")],Fn);const sk=Fn;var ep;const Are=new Se({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),xre=new Se({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let fe=ep=class extends V{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return yA(ep,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const n=e[r];Array.isArray(n)?i[r]=n.map(o=>o instanceof Date?o.getTime():o):n instanceof Date?i[r]=n.getTime():i[r]=n}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new ep(P({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:T(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};fe.MAX_MAX_RECORD_COUNT_FACTOR=5,l([c({json:{write:!0}})],fe.prototype,"aggregateIds",void 0),l([c({type:Boolean,json:{write:!0}})],fe.prototype,"cacheHint",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"compactGeometryEnabled",void 0),l([c({json:{write:!0}})],fe.prototype,"datumTransformation",void 0),l([Fe("datumTransformation")],fe.prototype,"castDatumTransformation",null),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"defaultSpatialReferenceEnabled",void 0),l([c({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],fe.prototype,"distance",void 0),l([c({type:Zn,json:{write:!0}})],fe.prototype,"dynamicDataSource",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"formatOf3DObjects",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"gdbVersion",void 0),l([c({types:Rc,json:{read:Ji,write:!0}})],fe.prototype,"geometry",void 0),l([c({type:Number,json:{write:!0}})],fe.prototype,"geometryPrecision",void 0),l([c({type:[String],json:{write:!0}})],fe.prototype,"groupByFieldsForStatistics",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"having",void 0),l([c({type:Date})],fe.prototype,"historicMoment",void 0),l([X("historicMoment")],fe.prototype,"writeHistoricMoment",null),l([c({type:Number,json:{write:!0}})],fe.prototype,"maxAllowableOffset",void 0),l([c({type:Number,cast:e=>e<1?1:e>ep.MAX_MAX_RECORD_COUNT_FACTOR?ep.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],fe.prototype,"maxRecordCountFactor",void 0),l([c({type:["xyFootprint"],json:{write:!0}})],fe.prototype,"multipatchOption",void 0),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],fe.prototype,"num",void 0),l([c({json:{write:!0}})],fe.prototype,"objectIds",void 0),l([c({type:[String],json:{write:!0}})],fe.prototype,"orderByFields",void 0),l([c({type:[String],json:{write:!0}})],fe.prototype,"outFields",void 0),l([c({type:me,json:{name:"outSR",write:!0}})],fe.prototype,"outSpatialReference",void 0),l([c({type:[sk],json:{write:{enabled:!0,overridePolicy(){return{enabled:T(this.outStatistics)&&this.outStatistics.length>0}}}}})],fe.prototype,"outStatistics",void 0),l([c({json:{write:!0}})],fe.prototype,"parameterValues",void 0),l([X("parameterValues")],fe.prototype,"writeParameterValues",null),l([c({type:le,json:{write:!0}})],fe.prototype,"pixelSize",void 0),l([c({type:ok,json:{write:!0}})],fe.prototype,"quantizationParameters",void 0),l([c({type:[Object],json:{write:!0}})],fe.prototype,"rangeValues",void 0),l([c({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],fe.prototype,"relationParameter",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"resultType",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnCentroid",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnDistinctValues",void 0),l([c({type:Boolean,json:{default:!0,write:!0}})],fe.prototype,"returnExceededLimitFeatures",void 0),l([c({type:Boolean,json:{write:!0}})],fe.prototype,"returnGeometry",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnQueryGeometry",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"returnM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fe.prototype,"returnZ",void 0),l([c({type:me,json:{write:!0}})],fe.prototype,"sourceSpatialReference",void 0),l([pe(Are,{ignoreUnknown:!1,name:"spatialRel"})],fe.prototype,"spatialRelationship",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],fe.prototype,"start",void 0),l([X("start"),X("num")],fe.prototype,"writeStart",null),l([c({type:String,json:{write:!0}})],fe.prototype,"sqlFormat",void 0),l([c({type:String,json:{write:!0}})],fe.prototype,"text",void 0),l([c({type:rs,json:{write:!0}})],fe.prototype,"timeExtent",void 0),l([c({type:Boolean,json:{default:!1,write:!0}})],fe.prototype,"timeReferenceUnknownClient",void 0),l([pe(xre,{ignoreUnknown:!1}),c({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],fe.prototype,"units",void 0),l([c({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],fe.prototype,"where",void 0),l([X("where")],fe.prototype,"writeWhere",null),fe=ep=l([S("esri.rest.support.Query")],fe);const zi=fe;async function Tb(e,t,i){const r=await Cre(e,t,i);return am.fromJSON(r)}async function Cre(e,t,i){const r=sm(e),n={...i},o=zi.from(t),{data:s}=await rk(r,o,o.sourceSpatialReference,n);return s}function fi(e,t){return e?t?4:3:t?3:2}const Zp=W.getLogger("esri.layers.graphics.featureConversionUtils"),ak={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},lk=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o},G1=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o,e[i+2]=t[r+2]},Ire=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o,e[i+2]=t[r+3]},uk=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o,e[i+2]=t[r+2],e[i+3]=t[r+3]};function Gx(e,t,i,r){if(e){if(i)return t&&r?uk:G1;if(t&&r)return Ire}else if(t&&r)return G1;return lk}function Eb({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function Ab({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function cN({scale:e,translate:t},i){return i*e[0]+t[0]}function dN({scale:e,translate:t},i){return t[1]-i*e[1]}function ive(e,t,i){return e?t?i?Yx(e):Wx(e):i?qx(e):pw(e):null}function pw(e){const t=e.coords;return{x:t[0],y:t[1]}}function ck(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function Wx(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function Mre(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function qx(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function Nre(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function Yx(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function Rre(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function Pre(e,t,i,r){let n=pw;i&&r?n=Yx:i?n=Wx:r&&(n=qx);for(const o of t){const{geometry:s,attributes:a}=o,u=T(s)?n(s):null;e.push({attributes:a,geometry:u})}return e}function dk(e,t){return e&&t?Rre:e?Mre:t?Nre:ck}function pk(e,t,i,r,n){const o=dk(i,r);for(const s of t){const{geometry:a,attributes:u}=s;let d;a&&(d=o(new qi,a)),e.push(new es(d,u,null,u[n]))}return e}function $re(e,t,i,r){for(const n of t){const{geometry:o,attributes:s}=n;let a;o&&(a=hk(o,i,r)),e.push({attributes:s,geometry:a})}return e}function hk(e,t,i){if(O(e))return null;const r=fi(t,i),n=[];for(let o=0;o<e.coords.length;o+=r){const s=[];for(let a=0;a<r;a++)s.push(e.coords[o+a]);n.push(s)}return t?i?{points:n,hasZ:t,hasM:i}:{points:n,hasZ:t}:i?{points:n,hasM:i}:{points:n}}function fk(e,t,i,r,n){const o=fi(i,r);for(const s of t){const a=s.geometry,u=s.attributes;let d;a&&(d=yk(new qi,a,o)),e.push(new es(d,u,null,u[n]))}return e}function yk(e,t,i=fi(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let n=0;for(const o of t.points)for(let s=0;s<i;s++)r[n++]=o[s];return e}function Dre(e,t,i,r){for(const n of t){const{geometry:o,attributes:s}=n;let a;T(o)&&(a=mk(o,i,r)),e.push({attributes:s,geometry:a})}return e}function mk(e,t,i){if(!e)return null;const r=fi(t,i),{coords:n,lengths:o}=e,s=[];let a=0;for(const u of o){const d=[];for(let h=0;h<u;h++){const f=[];for(let y=0;y<r;y++)f.push(n[a++]);d.push(f)}s.push(d)}return t?i?{paths:s,hasZ:t,hasM:i}:{paths:s,hasZ:t}:i?{paths:s,hasM:i}:{paths:s}}function gk(e,t,i,r,n){const o=fi(i,r);for(const s of t){const a=s.geometry,u=s.attributes;let d;a&&(d=vk(new qi,a,o)),e.push(new es(d,u,null,u[n]))}return e}function vk(e,t,i=fi(t.hasZ,t.hasM)){const{lengths:r,coords:n}=e;let o=0;for(const s of t.paths){for(const a of s)for(let u=0;u<i;u++)n[o++]=a[u];r.push(s.length)}return e}function Lre(e,t,i,r){for(const n of t){const{geometry:o,attributes:s,centroid:a}=n;let u;if(T(o)&&(u=wk(o,i,r)),T(a)){const d=pw(a);e.push({attributes:s,centroid:d,geometry:u})}else e.push({attributes:s,geometry:u})}return e}function wk(e,t,i){if(!e)return null;const r=fi(t,i),{coords:n,lengths:o}=e,s=[];let a=0;for(const u of o){const d=[];for(let h=0;h<u;h++){const f=[];for(let y=0;y<r;y++)f.push(n[a++]);d.push(f)}s.push(d)}return t?i?{rings:s,hasZ:t,hasM:i}:{rings:s,hasZ:t}:i?{rings:s,hasM:i}:{rings:s}}function bk(e,t,i,r,n){for(const o of t){const s=o.geometry,a=o.centroid,u=o.attributes;let d;s&&(d=_k(new qi,s,i,r)),T(a)?e.push(new es(d,u,ck(new qi,a),u[n])):e.push(new es(d,u,null,u[n]))}return e}function _k(e,t,i=t.hasZ,r=t.hasM){return Ore(e,t.rings,i,r),e}function Ore(e,t,i,r){const n=fi(i,r),{lengths:o,coords:s}=e;let a=0;o.length=s.length=0;for(const u of t){for(const d of u)for(let h=0;h<n;h++)s[a++]=d[h];o.push(u.length)}return e}const tp=[],Wf=[];function rve(e,t,i,r,n){tp[0]=e;const[o]=Sk(Wf,tp,t,i,r,n);return tp.length=Wf.length=0,o}function Sk(e,t,i,r,n,o){if(e.length=0,!i){for(const s of t){const a=s.attributes[o];e.push(new es(null,s.attributes,null,a))}return e}switch(i){case"esriGeometryPoint":return pk(e,t,r,n,o);case"esriGeometryMultipoint":return fk(e,t,r,n,o);case"esriGeometryPolyline":return gk(e,t,r,n,o);case"esriGeometryPolygon":return bk(e,t,r,n,o);default:Zp.error("convertToFeatureSet:unknown-geometry",new N(`Unable to parse unknown geometry type '${i}'`)),e.length=0}return e}function nve(e,t,i,r,n,o){const s=e.length;switch(i){case"esriGeometryPoint":pk(e,t,r,n,o);break;case"esriGeometryMultipoint":fk(e,t,r,n,o);break;case"esriGeometryPolyline":gk(e,t,r,n,o);break;case"esriGeometryPolygon":bk(e,t,r,n,o);break;default:Zp.error("convertToFeatureSet:unknown-geometry",new N(`Unable to parse unknown geometry type '${i}'`))}for(let a=0;a<t.length;a++)e[a+s].geometryType=i,e[a+s].insertAfter=t[a].insertAfter,e[a+s].groupId=t[a].groupId;return e}function ove(e,t,i,r){Wf[0]=e,Tk(tp,Wf,t,i,r);const n=tp[0];return tp.length=Wf.length=0,n}function sve(e,t,i){if(O(e))return null;const r=new qi;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),WA(e)?dk(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(r,e):sc(e)?_k(r,e,t,i):qA(e)?vk(r,e,fi(t,i)):GA(e)?yk(r,e,fi(t,i)):void Zp.error("convertFromGeometry:unknown-geometry",new N(`Unable to parse unknown geometry type '${e}'`))}function kre(e,t,i,r){const n=e&&("coords"in e?e:e.geometry);if(O(n))return null;switch(t){case"esriGeometryPoint":{let o=pw;return i&&r?o=Yx:i?o=Wx:r&&(o=qx),o(n)}case"esriGeometryMultipoint":return hk(n,i,r);case"esriGeometryPolyline":return mk(n,i,r);case"esriGeometryPolygon":return wk(n,i,r);default:return void Zp.error("convertToGeometry:unknown-geometry",new N(`Unable to parse unknown geometry type '${t}'`))}}function Fre(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function Tk(e,t,i,r,n){if(e.length=0,O(i))return Fre(e,t);switch(i){case"esriGeometryPoint":return Pre(e,t,r,n);case"esriGeometryMultipoint":return $re(e,t,r,n);case"esriGeometryPolyline":return Dre(e,t,r,n);case"esriGeometryPolygon":return Lre(e,t,r,n);default:Zp.error("convertToFeatureSet:unknown-geometry",new N(`Unable to parse unknown geometry type '${i}'`))}return e}function ave(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:n,hasM:o,hasZ:s,features:a,geometryType:u,exceededTransferLimit:d,uniqueIdField:h,queryGeometry:f,queryGeometryType:y}=e,m={features:Tk([],a,u,s,o),fields:n,geometryType:u,objectIdFieldName:t,spatialReference:i,uniqueIdField:h,queryGeometry:kre(f,y,!1,!1)};return r&&(m.transform=r),d&&(m.exceededTransferLimit=d),o&&(m.hasM=o),s&&(m.hasZ=s),m}function lve(e,t){const i=new dw,{hasM:r,hasZ:n,features:o,objectIdFieldName:s,spatialReference:a,geometryType:u,exceededTransferLimit:d,transform:h,fields:f}=e;return f&&(i.fields=f),i.geometryType=u,i.objectIdFieldName=s||t,i.spatialReference=a,i.objectIdFieldName?(o&&Sk(i.features,o,u,n,r,i.objectIdFieldName),d&&(i.exceededTransferLimit=d),r&&(i.hasM=r),n&&(i.hasZ=n),h&&(i.transform=h),i):(Zp.error(new N("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function uve(e){const{transform:t,features:i,hasM:r,hasZ:n}=e;if(!t)return e;for(const o of i)T(o.geometry)&&hN(o.geometry,o.geometry,r,n,t),T(o.centroid)&&hN(o.centroid,o.centroid,r,n,t);return e.transform=null,e}function cve(e,t){const{geometryType:i,features:r,hasM:n,hasZ:o}=t;if(!e)return t;for(let s=0;s<r.length;s++){const a=r[s],u=a.weakClone();u.geometry=new qi,pN(u.geometry,a.geometry,n,o,i,e),a.centroid&&(u.centroid=new qi,pN(u.centroid,a.centroid,n,o,"esriGeometryPoint",e)),r[s]=u}return t.transform=e,t}function pN(e,t,i,r,n,o,s=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),O(t)||!t.coords.length)return null;const u=ak[n],{coords:d,lengths:h}=t,f=fi(i,r),y=fi(i&&s,r&&a),m=Gx(i,r,s,a);if(!h.length)return m(e.coords,d,0,0,Eb(o,d[0]),Ab(o,d[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let g,v,w,_,A=0,I=0,D=I;for(const M of h){if(M<u)continue;let R=0;I=D,w=g=Eb(o,d[A]),_=v=Ab(o,d[A+1]),m(e.coords,d,I,A,w,_),R++,A+=f,I+=y;for(let B=1;B<M;B++,A+=f)w=Eb(o,d[A]),_=Ab(o,d[A+1]),w===g&&_===v||(m(e.coords,d,I,A,w-g,_-v),I+=y,R++,g=w,v=_);R>=u&&(e.lengths.push(R),D=I)}return e.coords.length=D,e.coords.length?e:null}function dve(e,t,i,r,n,o,s=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const u=ak[n],{coords:d,lengths:h}=t,f=fi(i,r),y=fi(i&&s,r&&a),m=Gx(i,r,s,a);if(!h.length)return m(e.coords,d,0,0,d[0],d[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let g=0;const v=o*o;for(const w of h){if(w<u){g+=w*f;continue}const _=e.coords.length/y,A=g,I=g+(w-1)*f;m(e.coords,d,e.coords.length,A,d[A],d[A+1]),aT(e.coords,d,f,v,m,A,I),m(e.coords,d,e.coords.length,I,d[I],d[I+1]);const D=e.coords.length/y-_;D>=u?e.lengths.push(D):e.coords.length=_*y,g+=w*f}return e.coords.length?e:null}function Bre(e,t,i,r){const n=e[t],o=e[t+1],s=e[i],a=e[i+1],u=e[r],d=e[r+1];let h=s,f=a,y=u-h,m=d-f;if(y!==0||m!==0){const g=((n-h)*y+(o-f)*m)/(y*y+m*m);g>1?(h=u,f=d):g>0&&(h+=y*g,f+=m*g)}return y=n-h,m=o-f,y*y+m*m}function aT(e,t,i,r,n,o,s){let a,u=r,d=0;for(let h=o+i;h<s;h+=i)a=Bre(t,h,o,s),a>u&&(d=h,u=a);u>r&&(d-o>i&&aT(e,t,i,r,n,o,d),n(e,t,e.length,d,t[d],t[d+1]),s-d>i&&aT(e,t,i,r,n,d,s))}function pve(e,t,i,r){if(O(t)||!t.coords||!t.coords.length)return null;const n=fi(i,r);let o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(t&&t.coords){const d=t.coords;for(let h=0;h<d.length;h+=n){const f=d[h],y=d[h+1];o=Math.min(o,f),a=Math.max(a,f),s=Math.min(s,y),u=Math.max(u,y)}}return e[0]=o,e[1]=s,e[2]=a,e[3]=u,e}function hN(e,t,i,r,n){const{coords:o,lengths:s}=t,a=i?r?uk:G1:r?G1:lk,u=fi(i,r);if(!o.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!s.length)return a(e.coords,o,0,0,cN(n,o[0]),dN(n,o[1])),e!==t&&(e.lengths.length=0,e.coords.length=u),e;const[d,h]=n.scale;let f=0;for(let y=0;y<s.length;y++){const m=s[y];e.lengths[y]=m;let g=cN(n,o[f]),v=dN(n,o[f+1]);a(e.coords,o,f,f,g,v),f+=u;for(let w=1;w<m;w++,f+=u)g+=o[f]*d,v-=o[f+1]*h,a(e.coords,o,f,f,g,v)}return e!==t&&(e.lengths.length=s.length,e.coords.length=o.length),e}function hve(e,t,i,r,n,o){const s=fi(i,r),a=Gx(i,r,n,o),u=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let d=0;d<u.length;d+=s)a(e.coords,u,e.coords.length,d,u[d],u[d+1]);return e}function Ure(e,t,i,r){let n=0,o=e[r*t],s=e[r*(t+1)];for(let a=1;a<i;a++){const u=o+e[r*(t+a)],d=s+e[r*(t+a)+1],h=(u-o)*(d+s);o=u,s=d,n+=h}return .5*n}function fve(e,t){const{coords:i,lengths:r}=e;let n=0,o=0;for(let s=0;s<r.length;s++)o+=Ure(i,n,r[s],t),n+=s;return Math.abs(o)}function yve(e,t){if(O(e))return null;const i=e.clone(),r=e.coords,n=e.lengths;let o=0;for(let s=0;s<n.length;s++){const a=n[s];let u=r[t*o],d=r[t*o+1];for(let h=1;h<a;h++){const f=u+r[t*(o+h)],y=d+r[t*(o+h)+1];i.coords[t*(o+h)]=f,i.coords[t*(o+h)+1]=y,u=f,d=y}o+=a}return i}var lT;let ct=lT=class extends V{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new lT(P({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};l([c({type:Boolean,json:{write:!0}})],ct.prototype,"cacheHint",void 0),l([c({type:Zn,json:{write:!0}})],ct.prototype,"dynamicDataSource",void 0),l([c({type:String,json:{write:!0}})],ct.prototype,"gdbVersion",void 0),l([c({type:Number,json:{write:!0}})],ct.prototype,"geometryPrecision",void 0),l([c({type:Date})],ct.prototype,"historicMoment",void 0),l([X("historicMoment")],ct.prototype,"_writeHistoricMoment",null),l([c({type:Number,json:{write:!0}})],ct.prototype,"maxAllowableOffset",void 0),l([c({type:[Number],json:{write:!0}})],ct.prototype,"objectIds",void 0),l([c({type:[String],json:{write:!0}})],ct.prototype,"orderByFields",void 0),l([c({type:[String],json:{write:!0}})],ct.prototype,"outFields",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ct.prototype,"outSpatialReference",void 0),l([c({json:{write:!0}})],ct.prototype,"relationshipId",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],ct.prototype,"start",void 0),l([X("start"),X("num")],ct.prototype,"writeStart",null),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],ct.prototype,"num",void 0),l([c({json:{write:!0}})],ct.prototype,"returnGeometry",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ct.prototype,"returnM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ct.prototype,"returnZ",void 0),l([c({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ct.prototype,"where",void 0),ct=lT=l([S("esri.rest.support.RelationshipQuery")],ct),ct.from=Ze(ct);const uT=ct;var cT;let pd=cT=class extends V{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new cT({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};l([c({type:[String],json:{write:!0}})],pd.prototype,"groupByFields",void 0),l([c({type:Number,json:{write:!0}})],pd.prototype,"topCount",void 0),l([c({type:[String],json:{write:!0}})],pd.prototype,"orderByFields",void 0),pd=cT=l([S("esri.rest.support.TopFilter")],pd);const Vre=pd;var dT;const fN=new Se({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),yN=new Se({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let it=dT=class extends V{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new dT(P({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};l([c({type:Boolean,json:{write:!0}})],it.prototype,"cacheHint",void 0),l([c({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],it.prototype,"distance",void 0),l([c({types:Rc,json:{read:Ji,write:!0}})],it.prototype,"geometry",void 0),l([c({type:Number,json:{write:!0}})],it.prototype,"geometryPrecision",void 0),l([c({type:Number,json:{write:!0}})],it.prototype,"maxAllowableOffset",void 0),l([c({type:Number,json:{read:{source:"resultRecordCount"}}})],it.prototype,"num",void 0),l([c({json:{write:!0}})],it.prototype,"objectIds",void 0),l([c({type:[String],json:{write:!0}})],it.prototype,"orderByFields",void 0),l([c({type:[String],json:{write:!0}})],it.prototype,"outFields",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],it.prototype,"outSpatialReference",void 0),l([c({type:String,json:{write:!0}})],it.prototype,"resultType",void 0),l([c({json:{write:!0}})],it.prototype,"returnGeometry",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],it.prototype,"returnM",void 0),l([c({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],it.prototype,"returnZ",void 0),l([c({type:Number,json:{read:{source:"resultOffset"}}})],it.prototype,"start",void 0),l([X("start"),X("num")],it.prototype,"writeStart",null),l([c({type:String,json:{read:{source:"spatialRel",reader:fN.read},write:{target:"spatialRel",writer:fN.write}}})],it.prototype,"spatialRelationship",void 0),l([c({type:rs,json:{write:!0}})],it.prototype,"timeExtent",void 0),l([c({type:Vre,json:{write:!0}})],it.prototype,"topFilter",void 0),l([c({type:String,json:{read:yN.read,write:{writer:yN.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],it.prototype,"units",void 0),l([c({type:String,json:{write:!0}})],it.prototype,"where",void 0),it=dT=l([S("esri.rest.support.TopFeaturesQuery")],it),it.from=Ze(it);const Km=it,jre="esri.widgets.Feature.support.relatedFeatureUtils",mN=W.getLogger(jre),gN=new Map;function pT(e){if(!Vs(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function zre(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(n=>n.id===parseInt(e,10)&&(i=n,!0)),i}function Hre({originRelationship:e,relationships:t,layerId:i}){let r;return t&&t.some(n=>(`${n.relatedTableId}`===i&&n.id===e.id&&(r=n),!!r)),r}function Gre(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function Wre(e,t){const i=zre(e,t);if(!!i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function qre(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,n=i&&i.value;t.relatedFeatures=n?n.features:[];const o=r&&r.value;t.relatedStatsFeatures=o?o.features:[]}function Yre(e,t,i,r){const n=new uT;return n.outFields=["*"],n.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(n,r)}function Kre(e,t,i){let r=0;const n=[];for(;r<t.length;)n.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return n.join(" OR ")}async function Zre(e,t,i,r){const n=i.layerId.toString(),{layerInfo:o,relation:s,relatedFields:a,outStatistics:u,url:d,sourceSpatialReference:h}=t,f=Hre({originRelationship:s,relationships:o.relationships,layerId:n});if(f.relationshipTableId&&f.keyFieldInRelationshipTable){const m=(await Yre(e,f,i,r))[e.attributes[i.objectIdField]];if(!m)return null;const g=m.features.map(v=>v.attributes[o.objectIdField]);if((u==null?void 0:u.length)>0&&o.supportsStatistics){const v=new zi;v.where=Kre(o.objectIdField,g,1e3),v.outFields=a,v.outStatistics=u,v.sourceSpatialReference=h;const w={features:Promise.resolve(m),statsFeatures:Tb(d,v)};return ri(w)}}const y=f==null?void 0:f.keyField;if(y){const m=ZA(tne(o.fields,y)),g=Gre(e.attributes,s.keyField),v=m?`${y}=${g}`:`${y}='${g}'`,w=Tb(d,new zi({where:v,outFields:t.relatedFields,sourceSpatialReference:h}),r),_=t.outStatistics&&t.outStatistics.length>0&&o.supportsStatistics?Tb(d,new zi({where:v,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:h}),r):null,A={features:w};return _&&(A.statsFeatures=_),ri(A)}return null}function Jre(e,t){return Be(e,{query:{f:"json"},signal:t&&t.signal})}function Xre({relatedInfos:e,layer:t},i){const r={};return e.forEach((n,o)=>{const{relation:s}=n;if(!s){const f=new N("relation-required","A relation is required on a layer to retrieve related records.");throw mN.error(f),f}const{relatedTableId:a}=s;if(typeof a!="number"){const f=new N("A related table ID is required on a layer to retrieve related records.");throw mN.error(f),f}const u=`${t.url}/${a}`,d=gN.get(u),h=d||Jre(u,i);d||gN.set(u,h),r[o]=h}),ri(r)}function Qre({graphic:e,relatedInfos:t,layer:i},r){const n={};return t.forEach((o,s)=>{o.layerInfo&&(n[s]=Zre(e,o,i,r))}),ri(n)}function ene({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const r=new sk({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(r)}}function tne(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const vN={chartAnimation:!0};let Wt=class extends se{constructor(e){super(e),this.abilities={...vN},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...vN,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:r,fieldInfoMap:n,layer:o}=this;return t==null?void 0:t.map(s=>{const a=s==null?void 0:s.clone();if(!a)return null;if(a.title=ec({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:o,text:a.title}),a.caption=ec({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:o,text:a.caption}),a.altText=ec({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:o,text:a.altText}),a.type==="image"){const{value:u}=a;return this._setImageValue({value:u,formattedAttributes:i,layer:o}),a.value.sourceURL?a:void 0}if(a.type==="pie-chart"||a.type==="line-chart"||a.type==="column-chart"||a.type==="bar-chart"){const{value:u}=a;return this._setChartValue({value:u,chartType:a.type,attributes:e,formattedAttributes:i,layer:o}),a}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:r,layer:n}=e,{linkURL:o,sourceURL:s}=i;if(s){const a=VS(s,n);i.sourceURL=US({formattedAttributes:r,template:a,fieldInfoMap:t})}if(o){const a=VS(o,n);i.linkURL=US({formattedAttributes:r,template:a,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:r,chartType:n,layer:o}=e,{popupTemplate:s,relatedInfos:a}=this,{fields:u,normalizeField:d}=t;if(t.fields=Uee(u,o),d&&(t.normalizeField=z1(d,o)),!u.some(f=>!!(r[f]!=null||Vs(f)&&a.size)))return;const h=s==null?void 0:s.fieldInfos;u.forEach(f=>{if(Vs(f))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:h,fieldName:f,formattedAttributes:r,chartType:n,value:t})]);const y=this._getChartOption({value:t,attributes:i,chartType:n,formattedAttributes:r,fieldName:f,fieldInfos:h});t.series.push(y)})}_getRelatedChartInfos(e){var g;const{fieldInfos:t,fieldName:i,formattedAttributes:r,chartType:n,value:o}=e,s=[],a=pT(i),{layerId:u,fieldName:d}=a,h=(g=this.relatedInfos)==null?void 0:g.get(u.toString());if(!h)return s;const{relatedFeatures:f,relation:y}=h;if(!y||!f)return s;const{cardinality:m}=y;return f.forEach(v=>{const{attributes:w}=v;w&&Object.keys(w).forEach(_=>{_===d&&s.push(this._getChartOption({value:o,attributes:w,formattedAttributes:r,fieldName:i,chartType:n,relatedFieldName:_,fieldInfos:t}))})}),m==="one-to-many"||m==="many-to-many"?s:[s[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var I,D,M,R,B,j;const{value:t,attributes:i,formattedAttributes:r,fieldName:n,relatedFieldName:o,fieldInfos:s,chartType:a}=e,{layer:u,fieldInfoMap:d}=this,{normalizeField:h,tooltipField:f}=t,y=h?Vs(h)?i[pT(h).fieldName]:i[h]:null,m=o&&i[o]!==void 0?i[o]:i[n]!==void 0?i[n]:r[n],g=new a9({fieldName:n,value:m===void 0?null:m&&y?m/y:m});if(Vs(n)){const Y=d.get(n.toLowerCase()),ee=d.get(f.toLowerCase()),re=(I=Y==null?void 0:Y.fieldName)!=null?I:n,ue=(B=(R=(M=r[(D=ee==null?void 0:ee.fieldName)!=null?D:f])!=null?M:Y==null?void 0:Y.label)!=null?R:Y==null?void 0:Y.fieldName)!=null?B:o,ge=r[re];return g.tooltip=this._getTooltip({label:ue,value:ge,chartType:a}),g}const v=N6(s,n),w=z1(n,u),_=f&&r[f]!==void 0?r[f]:I6(v||new Ky({fieldName:w}),(j=this.popupTemplate)==null?void 0:j.expressionInfos),A=r[w];return g.tooltip=this._getTooltip({label:_,value:A,chartType:a}),g}};l([c()],Wt.prototype,"abilities",void 0),l([Fe("abilities")],Wt.prototype,"castAbilities",null),l([c()],Wt.prototype,"activeMediaInfoIndex",void 0),l([c({readOnly:!0})],Wt.prototype,"activeMediaInfo",null),l([c()],Wt.prototype,"attributes",void 0),l([c()],Wt.prototype,"description",void 0),l([c()],Wt.prototype,"fieldInfoMap",void 0),l([c()],Wt.prototype,"formattedAttributes",void 0),l([c()],Wt.prototype,"expressionAttributes",void 0),l([c({readOnly:!0})],Wt.prototype,"formattedMediaInfos",null),l([c()],Wt.prototype,"layer",void 0),l([c({readOnly:!0})],Wt.prototype,"formattedMediaInfoCount",null),l([c()],Wt.prototype,"mediaInfos",void 0),l([c()],Wt.prototype,"popupTemplate",void 0),l([c()],Wt.prototype,"relatedInfos",void 0),l([c()],Wt.prototype,"title",void 0),Wt=l([S("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Wt);const ic=Wt;var wN=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],ine=[].concat(wN.slice(30,39),wN.slice(28,30).reverse()),rne=[{name:"default",colors:ine},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const bN="en-us",Kx=new Map([["ar",()=>U(()=>import("./ar.5d7bdca7.js"),["ar.5d7bdca7.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.a)],["bg-bg",()=>U(()=>import("./bg_BG.e6ba29c2.js"),["bg_BG.e6ba29c2.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.b)],["bs-ba",()=>U(()=>import("./bs_BA.14911a00.js"),["bs_BA.14911a00.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.b)],["ca-es",()=>U(()=>import("./ca_ES.1a938920.js"),["ca_ES.1a938920.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.c)],["cs-cz",()=>U(()=>import("./cs_CZ.8624de8a.js"),["cs_CZ.8624de8a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.c)],["da-dk",()=>U(()=>import("./da_DK.aef5a9c8.js"),["da_DK.aef5a9c8.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.d)],["de-de",()=>U(()=>import("./de_DE.b08b4cf1.js"),["de_DE.b08b4cf1.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.d)],["de-ch",()=>U(()=>import("./de_CH.0b6cd702.js"),["de_CH.0b6cd702.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.d)],["el-gr",()=>U(()=>import("./el_GR.8e618bc9.js"),["el_GR.8e618bc9.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["en-us",()=>U(()=>import("./en_US.41c717af.js"),["en_US.41c717af.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["en-ca",()=>U(()=>import("./en_CA.f60d00bf.js"),["en_CA.f60d00bf.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["es-es",()=>U(()=>import("./es_ES.1f0f76f4.js"),["es_ES.1f0f76f4.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["et-ee",()=>U(()=>import("./et_EE.a7babafb.js"),["et_EE.a7babafb.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.e)],["fi-fi",()=>U(()=>import("./fi_FI.fdc0a8b3.js"),["fi_FI.fdc0a8b3.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.f)],["fr-fr",()=>U(()=>import("./fr_FR.9fb72c1a.js"),["fr_FR.9fb72c1a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.f)],["he-il",()=>U(()=>import("./he_IL.3941bb8a.js"),["he_IL.3941bb8a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.h)],["hr-hr",()=>U(()=>import("./hr_HR.0f5af0f2.js"),["hr_HR.0f5af0f2.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.h)],["hu-hu",()=>U(()=>import("./hu_HU.b4dae139.js"),["hu_HU.b4dae139.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.h)],["id-id",()=>U(()=>import("./id_ID.f5b918ea.js"),["id_ID.f5b918ea.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.i)],["it-it",()=>U(()=>import("./it_IT.94769a92.js"),["it_IT.94769a92.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.i)],["ja-jp",()=>U(()=>import("./ja_JP.8eb86db8.js"),["ja_JP.8eb86db8.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.j)],["ko-kr",()=>U(()=>import("./ko_KR.8ba7fd29.js"),["ko_KR.8ba7fd29.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.k)],["lt-lt",()=>U(()=>import("./lt_LT.d8c1cc92.js"),["lt_LT.d8c1cc92.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.l)],["lv-lv",()=>U(()=>import("./lv_LV.ceb923a4.js"),["lv_LV.ceb923a4.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.l)],["nb-no",()=>U(()=>import("./nb_NO.d0457d8e.js"),["nb_NO.d0457d8e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.n)],["nl-nl",()=>U(()=>import("./nl_NL.fbf1ad03.js"),["nl_NL.fbf1ad03.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.n)],["pl-pl",()=>U(()=>import("./pl_PL.44d49398.js"),["pl_PL.44d49398.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.p)],["pt-br",()=>U(()=>import("./pt_BR.89b1d3a7.js"),["pt_BR.89b1d3a7.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.p)],["pt-pt",()=>U(()=>import("./pt_PT.2abd4e91.js"),["pt_PT.2abd4e91.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.p)],["ro-ro",()=>U(()=>import("./ro_RO.fb4fff60.js"),["ro_RO.fb4fff60.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.r)],["ru-ru",()=>U(()=>import("./ru_RU.684f53ee.js"),["ru_RU.684f53ee.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.r)],["sk-sk",()=>U(()=>import("./sk_SK.eaca904e.js"),["sk_SK.eaca904e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["sl-sl",()=>U(()=>import("./sl_SL.cff9b92a.js"),["sl_SL.cff9b92a.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["sr-rs",()=>U(()=>import("./sr_RS.44ddc4cf.js"),["sr_RS.44ddc4cf.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["sv-se",()=>U(()=>import("./sv_SE.16043ad0.js"),["sv_SE.16043ad0.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.s)],["th-th",()=>U(()=>import("./th_TH.99f2a35e.js"),["th_TH.99f2a35e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.t)],["tr-tr",()=>U(()=>import("./tr_TR.ab1c9f2f.js"),["tr_TR.ab1c9f2f.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.t)],["uk-ua",()=>U(()=>import("./uk_UA.ae3608ad.js"),["uk_UA.ae3608ad.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.u)],["vi-vn",()=>U(()=>import("./vi_VN.7d19f32e.js"),["vi_VN.7d19f32e.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.v)],["zh-cn",()=>U(()=>import("./zh_Hans.0f482448.js"),["zh_Hans.0f482448.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.z)],["zh-hk",()=>U(()=>import("./zh_Hant.f458376f.js"),["zh_Hant.f458376f.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.z)],["zh-tw",()=>U(()=>import("./zh_Hant.f458376f.js"),["zh_Hant.f458376f.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(e=>e.z)]]);function nne(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of Kx.keys())if(r.startsWith(t)){i=r;break}return i}function one(e){return e?Kx.has(e.toLowerCase())?e.toLowerCase():nne(e)||bN:bN}let Uc,vh;async function sne(e=Or()){if(e=one(e),Uc&&e===vh)return Uc;Uc=U(()=>import("./index.7ba26017.js"),["index.7ba26017.js","_commonjsHelpers.01f5fe30.js"],import.meta.url).then(t=>t.i),vh=e;try{const[t,i]=await Promise.all([Uc,Kx.get(vh)()]);vh===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return Uc=null,vh=null,null}return Uc}function ane(e,t="default"){const i=rne.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const ft={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},xb=.05,Cb=.95,Ib=15,us="color",ma="tooltip",wh="value",_N="default-line-value";let rr=class extends vi{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new ic,this.messages=null,this._getChartDependencies=async i=>{const r=await sne(),{destroyed:n,viewModel:o}=this;if(n||!o||!i)return;const{activeMediaInfo:s}=o,a=await this._getRendererColors(r);this._renderChart({chartDiv:i,mediaInfo:s,chartsModule:r,colorMap:a})}}initialize(){this._featureElementInfo=new Fx,this.own([q(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),ze),q(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),ze)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return C("div",{bind:this,class:ft.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?C("div",{key:"media-element-container",class:ft.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:n,refreshInterval:o,altText:s,title:a,type:u}=e,{sourceURL:d,linkURL:h}=n,f=x6(h)?"_blank":"_self",y=f==="_blank"?"noreferrer":"",m=o?t:null,g=m?m.timestamp:0,v=m?m.sourceURL:d,w=C("img",{alt:s||a,key:`media-${u}-${i}-${r}-${g}`,src:v});return(h?C("a",{title:a,href:h,rel:y,target:f},w):null)||w}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return C("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:ft.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?C("div",{key:"media-title",class:ft.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?C("div",{key:"media-caption",class:ft.mediaItemCaption,innerHTML:e.caption}):null;return C("div",{key:"media-container",class:ft.mediaItemContainer},C("div",{key:"media-item-container",class:ft.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,r=t?this.classes(ft.mediaButton,ft.mediaPrevious):this.classes(ft.mediaButton,ft.mediaNext),n=t?this.classes(ft.mediaIcon,ft.mediaPreviousIconLTR,ft.iconLeftTriangleArrow):this.classes(ft.mediaIcon,ft.mediaNextIconLTR,ft.iconRightTriangleArrow),o=t?this.classes(ft.mediaIcon,ft.mediaPreviousIconRTL,ft.iconRightTriangleArrow):this.classes(ft.mediaIcon,ft.mediaNextIconRTL,ft.iconLeftTriangleArrow),s=t?"media-previous":"media-next",a=t?this._previous:this._next;return C("button",{type:"button",key:s,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:a},C("span",{"aria-hidden":"true",class:n}),C("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var o;const{am4core:t}=e,i=(o=this.viewModel)==null?void 0:o.layer,r=new Map;if(!i)return r;const n=await Oie(i.renderer);return n.delete(null),Array.from(n.values()).every(s=>(s==null?void 0:s.length)===1)&&(r.set(_N,t.color({r:50,g:50,b:50,a:1})),Array.from(n.keys()).forEach(s=>{s&&r.set(s,t.color(n.get(s)[0].toCss(!0)))})),r}_handleMediaKeyup(e){const t=Bo(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:n,colorMap:o}=e,{value:s,type:a}=n,{am4core:u}=i,d=ane(u);function h(m){m instanceof u.ColorSet&&d&&(m.list=d)}k6()&&u.useTheme(i.am4themes_dark);const f=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!f.matches?u.useTheme(i.am4themes_animated):u.unuseTheme(i.am4themes_animated),u.useTheme(h);const y=a==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",n.altText||n.title),y.data=s.series.map(m=>({[ma]:m.tooltip,[wh]:m.value,[us]:o.get(m.fieldName)})).filter(m=>a!=="pie-chart"||m.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:n}=i,o=r.create(t,n.PieChart);o.rtl=gl(this.container);const s=o.series.push(new n.PieSeries);return s.labels.template.disabled=!0,s.ticks.template.disabled=!0,s.dataFields.value=wh,s.dataFields.category=ma,this._customizeChartTooltip(s.tooltip,r),s.slices.template.tooltipText=o.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",s.slices.template.propertyFields.fill=us,s.slices.template.propertyFields.stroke=us,o}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:n}=r,{am4core:o,am4charts:s}=i,a=e.xAxes.push(new s.CategoryAxis);a.dataFields.category=ma,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,o),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dy=-a.tooltip.contentHeight});const u=e.yAxes.push(new s.ValueAxis),d=u.renderer.labels.template;u.renderer.minLabelPosition=xb,u.renderer.maxLabelPosition=Cb,u.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(u.tooltip,o),d.wrap=!0;const h=e.series.push(new s.ColumnSeries);h.dataFields.valueY=wh,h.dataFields.categoryX=ma,h.columns.template.propertyFields.fill=us,h.columns.template.propertyFields.stroke=us,e.cursor=new s.XYCursor,n.series.length>Ib&&(e.scrollbarX=new o.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:n}=r,{am4core:o,am4charts:s}=i,a=e.yAxes.push(new s.CategoryAxis);a.dataFields.category=ma,a.renderer.inversed=!0,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,o),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dx=a.tooltip.contentWidth});const u=e.xAxes.push(new s.ValueAxis),d=u.renderer.labels.template;u.renderer.minLabelPosition=xb,u.renderer.maxLabelPosition=Cb,u.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(u.tooltip,o),d.wrap=!0;const h=e.series.push(new s.ColumnSeries);h.dataFields.valueX=wh,h.dataFields.categoryY=ma,h.columns.template.propertyFields.fill=us,h.columns.template.propertyFields.stroke=us,e.cursor=new s.XYCursor,n.series.length>Ib&&(e.scrollbarY=new o.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:n}=t,{value:o}=r,{am4core:s,am4charts:a}=i,u=e.xAxes.push(new a.CategoryAxis);u.dataFields.category=ma,u.renderer.labels.template.disabled=!0,this._customizeChartTooltip(u.tooltip,s),u.tooltip.events.on("sizechanged",()=>{u.tooltip.dy=-u.tooltip.contentHeight});const d=e.yAxes.push(new a.ValueAxis),h=d.renderer.labels.template;d.renderer.minLabelPosition=xb,d.renderer.maxLabelPosition=Cb,d.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(d.tooltip,s),h.wrap=!0;const f=e.series.push(new a.LineSeries);f.dataFields.categoryX=ma,f.dataFields.valueY=wh,f.strokeWidth=1;const y=n.get(_N);y&&(f.stroke=y);const m=f.bullets.push(new a.CircleBullet);m.propertyFields.fill=us,m.propertyFields.stroke=us,e.cursor=new a.XYCursor,o.series.length>Ib&&(e.scrollbarX=new s.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:n}=r,{am4core:o,am4charts:s}=i,a=o.create(t,s.XYChart);return a.rtl=gl(this.container),n==="column-chart"&&this._createColumnChart(a,e),n==="bar-chart"&&this._createBarChart(a,e),n==="line-chart"&&this._createLineChart(a,e),a}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=n}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[r,n=""]=e.split("#");return`${r}${i}timestamp=${t}${n?"#":""}${n}`}};l([J("viewModel.attributes")],rr.prototype,"attributes",void 0),l([J("viewModel.activeMediaInfoIndex")],rr.prototype,"activeMediaInfoIndex",void 0),l([J("viewModel.description")],rr.prototype,"description",void 0),l([J("viewModel.fieldInfoMap")],rr.prototype,"fieldInfoMap",void 0),l([J("viewModel.layer")],rr.prototype,"layer",void 0),l([J("viewModel.mediaInfos")],rr.prototype,"mediaInfos",void 0),l([J("viewModel.popupTemplate")],rr.prototype,"popupTemplate",void 0),l([J("viewModel.relatedInfos")],rr.prototype,"relatedInfos",void 0),l([J("viewModel.title")],rr.prototype,"title",void 0),l([c({type:ic})],rr.prototype,"viewModel",void 0),l([c(),pi("esri/widgets/Feature/t9n/Feature")],rr.prototype,"messages",void 0),rr=l([S("esri.widgets.Feature.FeatureMedia")],rr);const Ek=rr;class lne{constructor(t,i){this.definition=null,this.context=null,this.definition=t,this.context=i}}class ns{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let i=0;i<this.length();i++)t.push(this.get(i));return t}}class Oc extends ns{constructor(t,i,r,n,o,s){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=i,this._hasZ=r,this._hasM=n,this._cacheId=o,this._partId=s}get(t){if(this._lazyPt[t]===void 0){const i=this._elements[t];if(i===void 0)return;const r=this._hasZ,n=this._hasM;let o=null;o=r&&!n?new le(i[0],i[1],i[2],void 0,this._spRef):n&&!r?new le(i[0],i[1],void 0,i[2],this._spRef):r&&n?new le(i[0],i[1],i[2],i[3],this._spRef):new le(i[0],i[1],this._spRef),o.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=o}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof Oc&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class Zx extends ns{constructor(t,i,r,n,o){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=r,this._hasM=n,this._spRef=i,this._cacheId=o}get(t){if(this._lazyPath[t]===void 0){const i=this._elements[t];if(i===void 0)return;this._lazyPath[t]=new Oc(i,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof Zx&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}var wn={};Object.defineProperty(wn,"__esModule",{value:!0});function SN(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function os(e,t,i){return t&&SN(e.prototype,t),i&&SN(e,i),e}function ke(){return ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},ke.apply(this,arguments)}function bn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,My(e,t)}function hT(e){return hT=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},hT(e)}function My(e,t){return My=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},My(e,t)}function une(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mg(e,t,i){return une()?mg=Reflect.construct:mg=function(n,o,s){var a=[null];a.push.apply(a,o);var u=Function.bind.apply(n,a),d=new u;return s&&My(d,s.prototype),d},mg.apply(null,arguments)}function cne(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function fT(e){var t=typeof Map=="function"?new Map:void 0;return fT=function(r){if(r===null||!cne(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return mg(r,arguments,hT(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),My(n,r)},fT(e)}function Ak(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,o;for(o=0;o<r.length;o++)n=r[o],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function dne(e,t){if(!!e){if(typeof e=="string")return TN(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return TN(e,t)}}function TN(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Sl(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=dne(e))||t&&e&&typeof e.length=="number"){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kc=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}return t}(fT(Error)),pne=function(e){bn(t,e);function t(i){return e.call(this,"Invalid DateTime: "+i.toMessage())||this}return t}(kc),hne=function(e){bn(t,e);function t(i){return e.call(this,"Invalid Interval: "+i.toMessage())||this}return t}(kc),fne=function(e){bn(t,e);function t(i){return e.call(this,"Invalid Duration: "+i.toMessage())||this}return t}(kc),pf=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}return t}(kc),xk=function(e){bn(t,e);function t(i){return e.call(this,"Invalid unit "+i)||this}return t}(kc),an=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}return t}(kc),ga=function(e){bn(t,e);function t(){return e.call(this,"Zone is an abstract class")||this}return t}(kc),Q="numeric",co="short",Fr="long",yT={year:Q,month:Q,day:Q},Ck={year:Q,month:co,day:Q},yne={year:Q,month:co,day:Q,weekday:co},Ik={year:Q,month:Fr,day:Q},Mk={year:Q,month:Fr,day:Q,weekday:Fr},Nk={hour:Q,minute:Q},Rk={hour:Q,minute:Q,second:Q},Pk={hour:Q,minute:Q,second:Q,timeZoneName:co},$k={hour:Q,minute:Q,second:Q,timeZoneName:Fr},Dk={hour:Q,minute:Q,hourCycle:"h23"},Lk={hour:Q,minute:Q,second:Q,hourCycle:"h23"},Ok={hour:Q,minute:Q,second:Q,hourCycle:"h23",timeZoneName:co},kk={hour:Q,minute:Q,second:Q,hourCycle:"h23",timeZoneName:Fr},Fk={year:Q,month:Q,day:Q,hour:Q,minute:Q},Bk={year:Q,month:Q,day:Q,hour:Q,minute:Q,second:Q},Uk={year:Q,month:co,day:Q,hour:Q,minute:Q},Vk={year:Q,month:co,day:Q,hour:Q,minute:Q,second:Q},mne={year:Q,month:co,day:Q,weekday:co,hour:Q,minute:Q},jk={year:Q,month:Fr,day:Q,hour:Q,minute:Q,timeZoneName:co},zk={year:Q,month:Fr,day:Q,hour:Q,minute:Q,second:Q,timeZoneName:co},Hk={year:Q,month:Fr,day:Q,weekday:Fr,hour:Q,minute:Q,timeZoneName:Fr},Gk={year:Q,month:Fr,day:Q,weekday:Fr,hour:Q,minute:Q,second:Q,timeZoneName:Fr};function Ve(e){return typeof e>"u"}function dc(e){return typeof e=="number"}function hw(e){return typeof e=="number"&&e%1===0}function gne(e){return typeof e=="string"}function vne(e){return Object.prototype.toString.call(e)==="[object Date]"}function Wk(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function wne(e){return Array.isArray(e)?e:[e]}function EN(e,t,i){if(e.length!==0)return e.reduce(function(r,n){var o=[t(n),n];return r&&i(r[0],o[0])===r[0]?r:o},null)[1]}function bne(e,t){return t.reduce(function(i,r){return i[r]=e[r],i},{})}function Tp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function js(e,t,i){return hw(e)&&e>=t&&e<=i}function _ne(e,t){return e-t*Math.floor(e/t)}function Bt(e,t){t===void 0&&(t=2);var i=e<0,r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function ol(e){if(!(Ve(e)||e===null||e===""))return parseInt(e,10)}function Vl(e){if(!(Ve(e)||e===null||e===""))return parseFloat(e)}function Jx(e){if(!(Ve(e)||e===null||e==="")){var t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function Xx(e,t,i){i===void 0&&(i=!1);var r=Math.pow(10,t),n=i?Math.trunc:Math.round;return n(e*r)/r}function lm(e){return e%4===0&&(e%100!==0||e%400===0)}function qf(e){return lm(e)?366:365}function W1(e,t){var i=_ne(t-1,12)+1,r=e+(t-i)/12;return i===2?lm(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Qx(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function q1(e){var t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||r===3?53:52}function mT(e){return e>99?e:e>60?1900+e:2e3+e}function qk(e,t,i,r){r===void 0&&(r=null);var n=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);var s=ke({timeZoneName:t},o),a=new Intl.DateTimeFormat(i,s).formatToParts(n).find(function(u){return u.type.toLowerCase()==="timezonename"});return a?a.value:null}function fw(e,t){var i=parseInt(e,10);Number.isNaN(i)&&(i=0);var r=parseInt(t,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function Yk(e){var t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new an("Invalid unit value "+e);return t}function Y1(e,t){var i={};for(var r in e)if(Tp(e,r)){var n=e[r];if(n==null)continue;i[t(r)]=Yk(n)}return i}function Yf(e,t){var i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return""+n+Bt(i,2)+":"+Bt(r,2);case"narrow":return""+n+i+(r>0?":"+r:"");case"techie":return""+n+Bt(i,2)+Bt(r,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function yw(e){return bne(e,["hour","minute","second","millisecond"])}var Kk=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Sne=["January","February","March","April","May","June","July","August","September","October","November","December"],Zk=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Tne=["J","F","M","A","M","J","J","A","S","O","N","D"];function Jk(e){switch(e){case"narrow":return[].concat(Tne);case"short":return[].concat(Zk);case"long":return[].concat(Sne);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Xk=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Qk=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ene=["M","T","W","T","F","S","S"];function e8(e){switch(e){case"narrow":return[].concat(Ene);case"short":return[].concat(Qk);case"long":return[].concat(Xk);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var t8=["AM","PM"],Ane=["Before Christ","Anno Domini"],xne=["BC","AD"],Cne=["B","A"];function i8(e){switch(e){case"narrow":return[].concat(Cne);case"short":return[].concat(xne);case"long":return[].concat(Ane);default:return null}}function Ine(e){return t8[e.hour<12?0:1]}function Mne(e,t){return e8(t)[e.weekday-1]}function Nne(e,t){return Jk(t)[e.month-1]}function Rne(e,t){return i8(t)[e.year<0?0:1]}function Pne(e,t,i,r){i===void 0&&(i="always"),r===void 0&&(r=!1);var n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&o){var s=e==="days";switch(t){case 1:return s?"tomorrow":"next "+n[e][0];case-1:return s?"yesterday":"last "+n[e][0];case 0:return s?"today":"this "+n[e][0]}}var a=Object.is(t,-0)||t<0,u=Math.abs(t),d=u===1,h=n[e],f=r?d?h[1]:h[2]||h[1]:d?n[e][0]:e;return a?u+" "+f+" ago":"in "+u+" "+f}function AN(e,t){for(var i="",r=Sl(e),n;!(n=r()).done;){var o=n.value;o.literal?i+=o.val:i+=t(o.val)}return i}var $ne={D:yT,DD:Ck,DDD:Ik,DDDD:Mk,t:Nk,tt:Rk,ttt:Pk,tttt:$k,T:Dk,TT:Lk,TTT:Ok,TTTT:kk,f:Fk,ff:Uk,fff:jk,ffff:Hk,F:Bk,FF:Vk,FFF:zk,FFFF:Gk},zs=function(){e.create=function(r,n){return n===void 0&&(n={}),new e(r,n)},e.parseFormat=function(r){for(var n=null,o="",s=!1,a=[],u=0;u<r.length;u++){var d=r.charAt(u);d==="'"?(o.length>0&&a.push({literal:s,val:o}),n=null,o="",s=!s):s||d===n?o+=d:(o.length>0&&a.push({literal:!1,val:o}),o=d,n=d)}return o.length>0&&a.push({literal:s,val:o}),a},e.macroTokenToFormatOpts=function(r){return $ne[r]};function e(i,r){this.opts=r,this.loc=i,this.systemLoc=null}var t=e.prototype;return t.formatWithSystemDefault=function(r,n){this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem());var o=this.systemLoc.dtFormatter(r,ke({},this.opts,n));return o.format()},t.formatDateTime=function(r,n){n===void 0&&(n={});var o=this.loc.dtFormatter(r,ke({},this.opts,n));return o.format()},t.formatDateTimeParts=function(r,n){n===void 0&&(n={});var o=this.loc.dtFormatter(r,ke({},this.opts,n));return o.formatToParts()},t.resolvedOptions=function(r,n){n===void 0&&(n={});var o=this.loc.dtFormatter(r,ke({},this.opts,n));return o.resolvedOptions()},t.num=function(r,n){if(n===void 0&&(n=0),this.opts.forceSimple)return Bt(r,n);var o=ke({},this.opts);return n>0&&(o.padTo=n),this.loc.numberFormatter(o).format(r)},t.formatDateTimeFromString=function(r,n){var o=this,s=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",u=function(_,A){return o.loc.extract(r,_,A)},d=function(_){return r.isOffsetFixed&&r.offset===0&&_.allowZ?"Z":r.isValid?r.zone.formatOffset(r.ts,_.format):""},h=function(){return s?Ine(r):u({hour:"numeric",hourCycle:"h12"},"dayperiod")},f=function(_,A){return s?Nne(r,_):u(A?{month:_}:{month:_,day:"numeric"},"month")},y=function(_,A){return s?Mne(r,_):u(A?{weekday:_}:{weekday:_,month:"long",day:"numeric"},"weekday")},m=function(_){var A=e.macroTokenToFormatOpts(_);return A?o.formatWithSystemDefault(r,A):_},g=function(_){return s?Rne(r,_):u({era:_},"era")},v=function(_){switch(_){case"S":return o.num(r.millisecond);case"u":case"SSS":return o.num(r.millisecond,3);case"s":return o.num(r.second);case"ss":return o.num(r.second,2);case"uu":return o.num(Math.floor(r.millisecond/10),2);case"uuu":return o.num(Math.floor(r.millisecond/100));case"m":return o.num(r.minute);case"mm":return o.num(r.minute,2);case"h":return o.num(r.hour%12===0?12:r.hour%12);case"hh":return o.num(r.hour%12===0?12:r.hour%12,2);case"H":return o.num(r.hour);case"HH":return o.num(r.hour,2);case"Z":return d({format:"narrow",allowZ:o.opts.allowZ});case"ZZ":return d({format:"short",allowZ:o.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:o.opts.allowZ});case"ZZZZ":return r.zone.offsetName(r.ts,{format:"short",locale:o.loc.locale});case"ZZZZZ":return r.zone.offsetName(r.ts,{format:"long",locale:o.loc.locale});case"z":return r.zoneName;case"a":return h();case"d":return a?u({day:"numeric"},"day"):o.num(r.day);case"dd":return a?u({day:"2-digit"},"day"):o.num(r.day,2);case"c":return o.num(r.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return o.num(r.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return a?u({month:"numeric",day:"numeric"},"month"):o.num(r.month);case"LL":return a?u({month:"2-digit",day:"numeric"},"month"):o.num(r.month,2);case"LLL":return f("short",!0);case"LLLL":return f("long",!0);case"LLLLL":return f("narrow",!0);case"M":return a?u({month:"numeric"},"month"):o.num(r.month);case"MM":return a?u({month:"2-digit"},"month"):o.num(r.month,2);case"MMM":return f("short",!1);case"MMMM":return f("long",!1);case"MMMMM":return f("narrow",!1);case"y":return a?u({year:"numeric"},"year"):o.num(r.year);case"yy":return a?u({year:"2-digit"},"year"):o.num(r.year.toString().slice(-2),2);case"yyyy":return a?u({year:"numeric"},"year"):o.num(r.year,4);case"yyyyyy":return a?u({year:"numeric"},"year"):o.num(r.year,6);case"G":return g("short");case"GG":return g("long");case"GGGGG":return g("narrow");case"kk":return o.num(r.weekYear.toString().slice(-2),2);case"kkkk":return o.num(r.weekYear,4);case"W":return o.num(r.weekNumber);case"WW":return o.num(r.weekNumber,2);case"o":return o.num(r.ordinal);case"ooo":return o.num(r.ordinal,3);case"q":return o.num(r.quarter);case"qq":return o.num(r.quarter,2);case"X":return o.num(Math.floor(r.ts/1e3));case"x":return o.num(r.ts);default:return m(_)}};return AN(e.parseFormat(n),v)},t.formatDurationFromString=function(r,n){var o=this,s=function(y){switch(y[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=function(y){return function(m){var g=s(m);return g?o.num(y.get(g),m.length):m}},u=e.parseFormat(n),d=u.reduce(function(f,y){var m=y.literal,g=y.val;return m?f:f.concat(g)},[]),h=r.shiftTo.apply(r,d.map(s).filter(function(f){return f}));return AN(u,a(h))},e}(),ro=function(){function e(i,r){this.reason=i,this.explanation=r}var t=e.prototype;return t.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},e}(),Jp=function(){function e(){}var t=e.prototype;return t.offsetName=function(r,n){throw new ga},t.formatOffset=function(r,n){throw new ga},t.offset=function(r){throw new ga},t.equals=function(r){throw new ga},os(e,[{key:"type",get:function(){throw new ga}},{key:"name",get:function(){throw new ga}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new ga}},{key:"isValid",get:function(){throw new ga}}]),e}(),Mb=null,r8=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.offsetName=function(n,o){var s=o.format,a=o.locale;return qk(n,s,a)},i.formatOffset=function(n,o){return Yf(this.offset(n),o)},i.offset=function(n){return-new Date(n).getTimezoneOffset()},i.equals=function(n){return n.type==="system"},os(t,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return Mb===null&&(Mb=new t),Mb}}]),t}(Jp),gg={};function Dne(e){return gg[e]||(gg[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),gg[e]}var Lne={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function One(e,t){var i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),n=r[1],o=r[2],s=r[3],a=r[4],u=r[5],d=r[6],h=r[7];return[s,n,o,a,u,d,h]}function kne(e,t){for(var i=e.formatToParts(t),r=[],n=0;n<i.length;n++){var o=i[n],s=o.type,a=o.value,u=Lne[s];s==="era"?r[u]=a:Ve(u)||(r[u]=parseInt(a,10))}return r}var Zm={},Fc=function(e){bn(t,e),t.create=function(n){return Zm[n]||(Zm[n]=new t(n)),Zm[n]},t.resetCache=function(){Zm={},gg={}},t.isValidSpecifier=function(n){return this.isValidZone(n)},t.isValidZone=function(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}};function t(r){var n;return n=e.call(this)||this,n.zoneName=r,n.valid=t.isValidZone(r),n}var i=t.prototype;return i.offsetName=function(n,o){var s=o.format,a=o.locale;return qk(n,s,a,this.name)},i.formatOffset=function(n,o){return Yf(this.offset(n),o)},i.offset=function(n){var o=new Date(n);if(isNaN(o))return NaN;var s=Dne(this.name),a=s.formatToParts?kne(s,o):One(s,o),u=a[0],d=a[1],h=a[2],f=a[3],y=a[4],m=a[5],g=a[6];f==="BC"&&(u=-Math.abs(u)+1);var v=y===24?0:y,w=Qx({year:u,month:d,day:h,hour:v,minute:m,second:g,millisecond:0}),_=+o,A=_%1e3;return _-=A>=0?A:1e3+A,(w-_)/(60*1e3)},i.equals=function(n){return n.type==="iana"&&n.name===this.name},os(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(Jp),Nb=null,lo=function(e){bn(t,e),t.instance=function(n){return n===0?t.utcInstance:new t(n)},t.parseSpecifier=function(n){if(n){var o=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(o)return new t(fw(o[1],o[2]))}return null};function t(r){var n;return n=e.call(this)||this,n.fixed=r,n}var i=t.prototype;return i.offsetName=function(){return this.name},i.formatOffset=function(n,o){return Yf(this.fixed,o)},i.offset=function(){return this.fixed},i.equals=function(n){return n.type==="fixed"&&n.fixed===this.fixed},os(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return this.fixed===0?"UTC":"UTC"+Yf(this.fixed,"narrow")}},{key:"ianaName",get:function(){return this.fixed===0?"Etc/UTC":"Etc/GMT"+Yf(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return Nb===null&&(Nb=new t(0)),Nb}}]),t}(Jp),n8=function(e){bn(t,e);function t(r){var n;return n=e.call(this)||this,n.zoneName=r,n}var i=t.prototype;return i.offsetName=function(){return null},i.formatOffset=function(){return""},i.offset=function(){return NaN},i.equals=function(){return!1},os(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(Jp);function ul(e,t){if(Ve(e)||e===null)return t;if(e instanceof Jp)return e;if(gne(e)){var i=e.toLowerCase();return i==="local"||i==="system"?t:i==="utc"||i==="gmt"?lo.utcInstance:lo.parseSpecifier(i)||Fc.create(e)}else return dc(e)?lo.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new n8(e)}var xN=function(){return Date.now()},CN="system",IN=null,MN=null,NN=null,RN,Ft=function(){function e(){}return e.resetCaches=function(){ii.resetCache(),Fc.resetCache()},os(e,null,[{key:"now",get:function(){return xN},set:function(i){xN=i}},{key:"defaultZone",get:function(){return ul(CN,r8.instance)},set:function(i){CN=i}},{key:"defaultLocale",get:function(){return IN},set:function(i){IN=i}},{key:"defaultNumberingSystem",get:function(){return MN},set:function(i){MN=i}},{key:"defaultOutputCalendar",get:function(){return NN},set:function(i){NN=i}},{key:"throwOnInvalid",get:function(){return RN},set:function(i){RN=i}}]),e}(),Fne=["base"],Bne=["padTo","floor"],PN={};function Une(e,t){t===void 0&&(t={});var i=JSON.stringify([e,t]),r=PN[i];return r||(r=new Intl.ListFormat(e,t),PN[i]=r),r}var gT={};function vT(e,t){t===void 0&&(t={});var i=JSON.stringify([e,t]),r=gT[i];return r||(r=new Intl.DateTimeFormat(e,t),gT[i]=r),r}var wT={};function Vne(e,t){t===void 0&&(t={});var i=JSON.stringify([e,t]),r=wT[i];return r||(r=new Intl.NumberFormat(e,t),wT[i]=r),r}var bT={};function jne(e,t){t===void 0&&(t={});var i=t;i.base;var r=Ak(i,Fne),n=JSON.stringify([e,r]),o=bT[n];return o||(o=new Intl.RelativeTimeFormat(e,t),bT[n]=o),o}var hf=null;function zne(){return hf||(hf=new Intl.DateTimeFormat().resolvedOptions().locale,hf)}function Hne(e){var t=e.indexOf("-u-");if(t===-1)return[e];var i,r=e.substring(0,t);try{i=vT(e).resolvedOptions()}catch{i=vT(r).resolvedOptions()}var n=i,o=n.numberingSystem,s=n.calendar;return[r,o,s]}function Gne(e,t,i){return(i||t)&&(e+="-u",i&&(e+="-ca-"+i),t&&(e+="-nu-"+t)),e}function Wne(e){for(var t=[],i=1;i<=12;i++){var r=Vt.utc(2016,i,1);t.push(e(r))}return t}function qne(e){for(var t=[],i=1;i<=7;i++){var r=Vt.utc(2016,11,13+i);t.push(e(r))}return t}function Jm(e,t,i,r,n){var o=e.listingMode(i);return o==="error"?null:o==="en"?r(t):n(t)}function Yne(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}var Kne=function(){function e(i,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1,n.padTo,n.floor;var o=Ak(n,Bne);if(!r||Object.keys(o).length>0){var s=ke({useGrouping:!1},n);n.padTo>0&&(s.minimumIntegerDigits=n.padTo),this.inf=Vne(i,s)}}var t=e.prototype;return t.format=function(r){if(this.inf){var n=this.floor?Math.floor(r):r;return this.inf.format(n)}else{var o=this.floor?Math.floor(r):Xx(r,3);return Bt(o,this.padTo)}},e}(),Zne=function(){function e(i,r,n){this.opts=n;var o;if(i.zone.isUniversal){var s=-1*(i.offset/60),a=s>=0?"Etc/GMT+"+s:"Etc/GMT"+s;i.offset!==0&&Fc.create(a).valid?(o=a,this.dt=i):(o="UTC",n.timeZoneName?this.dt=i:this.dt=i.offset===0?i:Vt.fromMillis(i.ts+i.offset*60*1e3))}else i.zone.type==="system"?this.dt=i:(this.dt=i,o=i.zone.name);var u=ke({},this.opts);o&&(u.timeZone=o),this.dtf=vT(r,u)}var t=e.prototype;return t.format=function(){return this.dtf.format(this.dt.toJSDate())},t.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},t.resolvedOptions=function(){return this.dtf.resolvedOptions()},e}(),Jne=function(){function e(i,r,n){this.opts=ke({style:"long"},n),!r&&Wk()&&(this.rtf=jne(i,n))}var t=e.prototype;return t.format=function(r,n){return this.rtf?this.rtf.format(r,n):Pne(n,r,this.opts.numeric,this.opts.style!=="long")},t.formatToParts=function(r,n){return this.rtf?this.rtf.formatToParts(r,n):[]},e}(),ii=function(){e.fromOpts=function(r){return e.create(r.locale,r.numberingSystem,r.outputCalendar,r.defaultToEN)},e.create=function(r,n,o,s){s===void 0&&(s=!1);var a=r||Ft.defaultLocale,u=a||(s?"en-US":zne()),d=n||Ft.defaultNumberingSystem,h=o||Ft.defaultOutputCalendar;return new e(u,d,h,a)},e.resetCache=function(){hf=null,gT={},wT={},bT={}},e.fromObject=function(r){var n=r===void 0?{}:r,o=n.locale,s=n.numberingSystem,a=n.outputCalendar;return e.create(o,s,a)};function e(i,r,n,o){var s=Hne(i),a=s[0],u=s[1],d=s[2];this.locale=a,this.numberingSystem=r||u||null,this.outputCalendar=n||d||null,this.intl=Gne(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}var t=e.prototype;return t.listingMode=function(){var r=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return r&&n?"en":"intl"},t.clone=function(r){return!r||Object.getOwnPropertyNames(r).length===0?this:e.create(r.locale||this.specifiedLocale,r.numberingSystem||this.numberingSystem,r.outputCalendar||this.outputCalendar,r.defaultToEN||!1)},t.redefaultToEN=function(r){return r===void 0&&(r={}),this.clone(ke({},r,{defaultToEN:!0}))},t.redefaultToSystem=function(r){return r===void 0&&(r={}),this.clone(ke({},r,{defaultToEN:!1}))},t.months=function(r,n,o){var s=this;return n===void 0&&(n=!1),o===void 0&&(o=!0),Jm(this,r,o,Jk,function(){var a=n?{month:r,day:"numeric"}:{month:r},u=n?"format":"standalone";return s.monthsCache[u][r]||(s.monthsCache[u][r]=Wne(function(d){return s.extract(d,a,"month")})),s.monthsCache[u][r]})},t.weekdays=function(r,n,o){var s=this;return n===void 0&&(n=!1),o===void 0&&(o=!0),Jm(this,r,o,e8,function(){var a=n?{weekday:r,year:"numeric",month:"long",day:"numeric"}:{weekday:r},u=n?"format":"standalone";return s.weekdaysCache[u][r]||(s.weekdaysCache[u][r]=qne(function(d){return s.extract(d,a,"weekday")})),s.weekdaysCache[u][r]})},t.meridiems=function(r){var n=this;return r===void 0&&(r=!0),Jm(this,void 0,r,function(){return t8},function(){if(!n.meridiemCache){var o={hour:"numeric",hourCycle:"h12"};n.meridiemCache=[Vt.utc(2016,11,13,9),Vt.utc(2016,11,13,19)].map(function(s){return n.extract(s,o,"dayperiod")})}return n.meridiemCache})},t.eras=function(r,n){var o=this;return n===void 0&&(n=!0),Jm(this,r,n,i8,function(){var s={era:r};return o.eraCache[r]||(o.eraCache[r]=[Vt.utc(-40,1,1),Vt.utc(2017,1,1)].map(function(a){return o.extract(a,s,"era")})),o.eraCache[r]})},t.extract=function(r,n,o){var s=this.dtFormatter(r,n),a=s.formatToParts(),u=a.find(function(d){return d.type.toLowerCase()===o});return u?u.value:null},t.numberFormatter=function(r){return r===void 0&&(r={}),new Kne(this.intl,r.forceSimple||this.fastNumbers,r)},t.dtFormatter=function(r,n){return n===void 0&&(n={}),new Zne(r,this.intl,n)},t.relFormatter=function(r){return r===void 0&&(r={}),new Jne(this.intl,this.isEnglish(),r)},t.listFormatter=function(r){return r===void 0&&(r={}),Une(this.intl,r)},t.isEnglish=function(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(r){return this.locale===r.locale&&this.numberingSystem===r.numberingSystem&&this.outputCalendar===r.outputCalendar},os(e,[{key:"fastNumbers",get:function(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Yne(this)),this.fastNumbersCached}}]),e}();function Xp(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.reduce(function(n,o){return n+o.source},"");return RegExp("^"+r+"$")}function Qp(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(n,o){var s=n[0],a=n[1],u=n[2],d=o(r,u),h=d[0],f=d[1],y=d[2];return[ke({},s,h),f||a,y]},[{},null,1]).slice(0,2)}}function eh(e){if(e==null)return[null,null];for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];for(var n=0,o=i;n<o.length;n++){var s=o[n],a=s[0],u=s[1],d=a.exec(e);if(d)return u(d)}return[null,null]}function o8(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r,n){var o={},s;for(s=0;s<t.length;s++)o[t[s]]=ol(r[n+s]);return[o,null,n+s]}}var s8=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Xne="(?:"+s8.source+"?(?:\\[("+Kk.source+")\\])?)?",e3=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,a8=RegExp(""+e3.source+Xne),t3=RegExp("(?:T"+a8.source+")?"),Qne=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,eoe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,toe=/(\d{4})-?(\d{3})/,ioe=o8("weekYear","weekNumber","weekDay"),roe=o8("year","ordinal"),noe=/(\d{4})-(\d\d)-(\d\d)/,l8=RegExp(e3.source+" ?(?:"+s8.source+"|("+Kk.source+"))?"),ooe=RegExp("(?: "+l8.source+")?");function ip(e,t,i){var r=e[t];return Ve(r)?i:ol(r)}function soe(e,t){var i={year:ip(e,t),month:ip(e,t+1,1),day:ip(e,t+2,1)};return[i,null,t+3]}function th(e,t){var i={hours:ip(e,t,0),minutes:ip(e,t+1,0),seconds:ip(e,t+2,0),milliseconds:Jx(e[t+3])};return[i,null,t+4]}function um(e,t){var i=!e[t]&&!e[t+1],r=fw(e[t+1],e[t+2]),n=i?null:lo.instance(r);return[{},n,t+3]}function cm(e,t){var i=e[t]?Fc.create(e[t]):null;return[{},i,t+1]}var aoe=RegExp("^T?"+e3.source+"$"),loe=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function uoe(e){var t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],s=e[5],a=e[6],u=e[7],d=e[8],h=t[0]==="-",f=u&&u[0]==="-",y=function(g,v){return v===void 0&&(v=!1),g!==void 0&&(v||g&&h)?-g:g};return[{years:y(Vl(i)),months:y(Vl(r)),weeks:y(Vl(n)),days:y(Vl(o)),hours:y(Vl(s)),minutes:y(Vl(a)),seconds:y(Vl(u),u==="-0"),milliseconds:y(Jx(d),f)}]}var coe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function i3(e,t,i,r,n,o,s){var a={year:t.length===2?mT(ol(t)):ol(t),month:Zk.indexOf(i)+1,day:ol(r),hour:ol(n),minute:ol(o)};return s&&(a.second=ol(s)),e&&(a.weekday=e.length>3?Xk.indexOf(e)+1:Qk.indexOf(e)+1),a}var doe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function poe(e){var t=e[1],i=e[2],r=e[3],n=e[4],o=e[5],s=e[6],a=e[7],u=e[8],d=e[9],h=e[10],f=e[11],y=i3(t,n,r,i,o,s,a),m;return u?m=coe[u]:d?m=0:m=fw(h,f),[y,new lo(m)]}function hoe(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var foe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,yoe=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,moe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function $N(e){var t=e[1],i=e[2],r=e[3],n=e[4],o=e[5],s=e[6],a=e[7],u=i3(t,n,r,i,o,s,a);return[u,lo.utcInstance]}function goe(e){var t=e[1],i=e[2],r=e[3],n=e[4],o=e[5],s=e[6],a=e[7],u=i3(t,a,i,r,n,o,s);return[u,lo.utcInstance]}var voe=Xp(Qne,t3),woe=Xp(eoe,t3),boe=Xp(toe,t3),_oe=Xp(a8),u8=Qp(soe,th,um,cm),Soe=Qp(ioe,th,um,cm),Toe=Qp(roe,th,um,cm),Eoe=Qp(th,um,cm);function Aoe(e){return eh(e,[voe,u8],[woe,Soe],[boe,Toe],[_oe,Eoe])}function xoe(e){return eh(hoe(e),[doe,poe])}function Coe(e){return eh(e,[foe,$N],[yoe,$N],[moe,goe])}function Ioe(e){return eh(e,[loe,uoe])}var Moe=Qp(th);function Noe(e){return eh(e,[aoe,Moe])}var Roe=Xp(noe,ooe),Poe=Xp(l8),$oe=Qp(th,um,cm);function Doe(e){return eh(e,[Roe,u8],[Poe,$oe])}var Loe="Invalid Duration",c8={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Ooe=ke({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},c8),Hr=146097/400,Vc=146097/4800,koe=ke({years:{quarters:4,months:12,weeks:Hr/7,days:Hr,hours:Hr*24,minutes:Hr*24*60,seconds:Hr*24*60*60,milliseconds:Hr*24*60*60*1e3},quarters:{months:3,weeks:Hr/28,days:Hr/4,hours:Hr*24/4,minutes:Hr*24*60/4,seconds:Hr*24*60*60/4,milliseconds:Hr*24*60*60*1e3/4},months:{weeks:Vc/7,days:Vc,hours:Vc*24,minutes:Vc*24*60,seconds:Vc*24*60*60,milliseconds:Vc*24*60*60*1e3}},c8),fu=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Foe=fu.slice(0).reverse();function jl(e,t,i){i===void 0&&(i=!1);var r={values:i?t.values:ke({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new ci(r)}function Boe(e){return e<0?Math.floor(e):Math.ceil(e)}function d8(e,t,i,r,n){var o=e[n][i],s=t[i]/o,a=Math.sign(s)===Math.sign(r[n]),u=!a&&r[n]!==0&&Math.abs(s)<=1?Boe(s):Math.trunc(s);r[n]+=u,t[i]-=u*o}function Uoe(e,t){Foe.reduce(function(i,r){return Ve(t[r])?i:(i&&d8(e,t,i,t,r),r)},null)}var ci=function(){function e(i){var r=i.conversionAccuracy==="longterm"||!1;this.values=i.values,this.loc=i.loc||ii.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=i.invalid||null,this.matrix=r?koe:Ooe,this.isLuxonDuration=!0}e.fromMillis=function(r,n){return e.fromObject({milliseconds:r},n)},e.fromObject=function(r,n){if(n===void 0&&(n={}),r==null||typeof r!="object")throw new an("Duration.fromObject: argument expected to be an object, got "+(r===null?"null":typeof r));return new e({values:Y1(r,e.normalizeUnit),loc:ii.fromObject(n),conversionAccuracy:n.conversionAccuracy})},e.fromDurationLike=function(r){if(dc(r))return e.fromMillis(r);if(e.isDuration(r))return r;if(typeof r=="object")return e.fromObject(r);throw new an("Unknown duration argument "+r+" of type "+typeof r)},e.fromISO=function(r,n){var o=Ioe(r),s=o[0];return s?e.fromObject(s,n):e.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},e.fromISOTime=function(r,n){var o=Noe(r),s=o[0];return s?e.fromObject(s,n):e.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},e.invalid=function(r,n){if(n===void 0&&(n=null),!r)throw new an("need to specify a reason the Duration is invalid");var o=r instanceof ro?r:new ro(r,n);if(Ft.throwOnInvalid)throw new fne(o);return new e({invalid:o})},e.normalizeUnit=function(r){var n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[r&&r.toLowerCase()];if(!n)throw new xk(r);return n},e.isDuration=function(r){return r&&r.isLuxonDuration||!1};var t=e.prototype;return t.toFormat=function(r,n){n===void 0&&(n={});var o=ke({},n,{floor:n.round!==!1&&n.floor!==!1});return this.isValid?zs.create(this.loc,o).formatDurationFromString(this,r):Loe},t.toHuman=function(r){var n=this;r===void 0&&(r={});var o=fu.map(function(s){var a=n.values[s];return Ve(a)?null:n.loc.numberFormatter(ke({style:"unit",unitDisplay:"long"},r,{unit:s.slice(0,-1)})).format(a)}).filter(function(s){return s});return this.loc.listFormatter(ke({type:"conjunction",style:r.listStyle||"narrow"},r)).format(o)},t.toObject=function(){return this.isValid?ke({},this.values):{}},t.toISO=function(){if(!this.isValid)return null;var r="P";return this.years!==0&&(r+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(r+=this.months+this.quarters*3+"M"),this.weeks!==0&&(r+=this.weeks+"W"),this.days!==0&&(r+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(r+="T"),this.hours!==0&&(r+=this.hours+"H"),this.minutes!==0&&(r+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(r+=Xx(this.seconds+this.milliseconds/1e3,3)+"S"),r==="P"&&(r+="T0S"),r},t.toISOTime=function(r){if(r===void 0&&(r={}),!this.isValid)return null;var n=this.toMillis();if(n<0||n>=864e5)return null;r=ke({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},r);var o=this.shiftTo("hours","minutes","seconds","milliseconds"),s=r.format==="basic"?"hhmm":"hh:mm";(!r.suppressSeconds||o.seconds!==0||o.milliseconds!==0)&&(s+=r.format==="basic"?"ss":":ss",(!r.suppressMilliseconds||o.milliseconds!==0)&&(s+=".SSS"));var a=o.toFormat(s);return r.includePrefix&&(a="T"+a),a},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.toMillis=function(){return this.as("milliseconds")},t.valueOf=function(){return this.toMillis()},t.plus=function(r){if(!this.isValid)return this;for(var n=e.fromDurationLike(r),o={},s=Sl(fu),a;!(a=s()).done;){var u=a.value;(Tp(n.values,u)||Tp(this.values,u))&&(o[u]=n.get(u)+this.get(u))}return jl(this,{values:o},!0)},t.minus=function(r){if(!this.isValid)return this;var n=e.fromDurationLike(r);return this.plus(n.negate())},t.mapUnits=function(r){if(!this.isValid)return this;for(var n={},o=0,s=Object.keys(this.values);o<s.length;o++){var a=s[o];n[a]=Yk(r(this.values[a],a))}return jl(this,{values:n},!0)},t.get=function(r){return this[e.normalizeUnit(r)]},t.set=function(r){if(!this.isValid)return this;var n=ke({},this.values,Y1(r,e.normalizeUnit));return jl(this,{values:n})},t.reconfigure=function(r){var n=r===void 0?{}:r,o=n.locale,s=n.numberingSystem,a=n.conversionAccuracy,u=this.loc.clone({locale:o,numberingSystem:s}),d={loc:u};return a&&(d.conversionAccuracy=a),jl(this,d)},t.as=function(r){return this.isValid?this.shiftTo(r).get(r):NaN},t.normalize=function(){if(!this.isValid)return this;var r=this.toObject();return Uoe(this.matrix,r),jl(this,{values:r},!0)},t.shiftTo=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(!this.isValid)return this;if(n.length===0)return this;n=n.map(function(A){return e.normalizeUnit(A)});for(var s={},a={},u=this.toObject(),d,h=Sl(fu),f;!(f=h()).done;){var y=f.value;if(n.indexOf(y)>=0){d=y;var m=0;for(var g in a)m+=this.matrix[g][y]*a[g],a[g]=0;dc(u[y])&&(m+=u[y]);var v=Math.trunc(m);s[y]=v,a[y]=(m*1e3-v*1e3)/1e3;for(var w in u)fu.indexOf(w)>fu.indexOf(y)&&d8(this.matrix,u,w,s,y)}else dc(u[y])&&(a[y]=u[y])}for(var _ in a)a[_]!==0&&(s[d]+=_===d?a[_]:a[_]/this.matrix[d][_]);return jl(this,{values:s},!0).normalize()},t.negate=function(){if(!this.isValid)return this;for(var r={},n=0,o=Object.keys(this.values);n<o.length;n++){var s=o[n];r[s]=this.values[s]===0?0:-this.values[s]}return jl(this,{values:r},!0)},t.equals=function(r){if(!this.isValid||!r.isValid||!this.loc.equals(r.loc))return!1;function n(u,d){return u===void 0||u===0?d===void 0||d===0:u===d}for(var o=Sl(fu),s;!(s=o()).done;){var a=s.value;if(!n(this.values[a],r.values[a]))return!1}return!0},os(e,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),bh="Invalid Interval";function Voe(e,t){return!e||!e.isValid?Kf.invalid("missing or invalid start"):!t||!t.isValid?Kf.invalid("missing or invalid end"):t<e?Kf.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO()):null}var Kf=function(){function e(i){this.s=i.start,this.e=i.end,this.invalid=i.invalid||null,this.isLuxonInterval=!0}e.invalid=function(r,n){if(n===void 0&&(n=null),!r)throw new an("need to specify a reason the Interval is invalid");var o=r instanceof ro?r:new ro(r,n);if(Ft.throwOnInvalid)throw new hne(o);return new e({invalid:o})},e.fromDateTimes=function(r,n){var o=Th(r),s=Th(n),a=Voe(o,s);return a==null?new e({start:o,end:s}):a},e.after=function(r,n){var o=ci.fromDurationLike(n),s=Th(r);return e.fromDateTimes(s,s.plus(o))},e.before=function(r,n){var o=ci.fromDurationLike(n),s=Th(r);return e.fromDateTimes(s.minus(o),s)},e.fromISO=function(r,n){var o=(r||"").split("/",2),s=o[0],a=o[1];if(s&&a){var u,d;try{u=Vt.fromISO(s,n),d=u.isValid}catch{d=!1}var h,f;try{h=Vt.fromISO(a,n),f=h.isValid}catch{f=!1}if(d&&f)return e.fromDateTimes(u,h);if(d){var y=ci.fromISO(a,n);if(y.isValid)return e.after(u,y)}else if(f){var m=ci.fromISO(s,n);if(m.isValid)return e.before(h,m)}}return e.invalid("unparsable",'the input "'+r+`" can't be parsed as ISO 8601`)},e.isInterval=function(r){return r&&r.isLuxonInterval||!1};var t=e.prototype;return t.length=function(r){return r===void 0&&(r="milliseconds"),this.isValid?this.toDuration.apply(this,[r]).get(r):NaN},t.count=function(r){if(r===void 0&&(r="milliseconds"),!this.isValid)return NaN;var n=this.start.startOf(r),o=this.end.startOf(r);return Math.floor(o.diff(n,r).get(r))+1},t.hasSame=function(r){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,r):!1},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(r){return this.isValid?this.s>r:!1},t.isBefore=function(r){return this.isValid?this.e<=r:!1},t.contains=function(r){return this.isValid?this.s<=r&&this.e>r:!1},t.set=function(r){var n=r===void 0?{}:r,o=n.start,s=n.end;return this.isValid?e.fromDateTimes(o||this.s,s||this.e):this},t.splitAt=function(){var r=this;if(!this.isValid)return[];for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];for(var a=o.map(Th).filter(function(m){return r.contains(m)}).sort(),u=[],d=this.s,h=0;d<this.e;){var f=a[h]||this.e,y=+f>+this.e?this.e:f;u.push(e.fromDateTimes(d,y)),d=y,h+=1}return u},t.splitBy=function(r){var n=ci.fromDurationLike(r);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];for(var o=this.s,s=1,a,u=[];o<this.e;){var d=this.start.plus(n.mapUnits(function(h){return h*s}));a=+d>+this.e?this.e:d,u.push(e.fromDateTimes(o,a)),o=a,s+=1}return u},t.divideEqually=function(r){return this.isValid?this.splitBy(this.length()/r).slice(0,r):[]},t.overlaps=function(r){return this.e>r.s&&this.s<r.e},t.abutsStart=function(r){return this.isValid?+this.e==+r.s:!1},t.abutsEnd=function(r){return this.isValid?+r.e==+this.s:!1},t.engulfs=function(r){return this.isValid?this.s<=r.s&&this.e>=r.e:!1},t.equals=function(r){return!this.isValid||!r.isValid?!1:this.s.equals(r.s)&&this.e.equals(r.e)},t.intersection=function(r){if(!this.isValid)return this;var n=this.s>r.s?this.s:r.s,o=this.e<r.e?this.e:r.e;return n>=o?null:e.fromDateTimes(n,o)},t.union=function(r){if(!this.isValid)return this;var n=this.s<r.s?this.s:r.s,o=this.e>r.e?this.e:r.e;return e.fromDateTimes(n,o)},e.merge=function(r){var n=r.sort(function(a,u){return a.s-u.s}).reduce(function(a,u){var d=a[0],h=a[1];return h?h.overlaps(u)||h.abutsStart(u)?[d,h.union(u)]:[d.concat([h]),u]:[d,u]},[[],null]),o=n[0],s=n[1];return s&&o.push(s),o},e.xor=function(r){for(var n,o=null,s=0,a=[],u=r.map(function(g){return[{time:g.s,type:"s"},{time:g.e,type:"e"}]}),d=(n=Array.prototype).concat.apply(n,u),h=d.sort(function(g,v){return g.time-v.time}),f=Sl(h),y;!(y=f()).done;){var m=y.value;s+=m.type==="s"?1:-1,s===1?o=m.time:(o&&+o!=+m.time&&a.push(e.fromDateTimes(o,m.time)),o=null)}return e.merge(a)},t.difference=function(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e.xor([this].concat(o)).map(function(a){return r.intersection(a)}).filter(function(a){return a&&!a.isEmpty()})},t.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":bh},t.toISO=function(r){return this.isValid?this.s.toISO(r)+"/"+this.e.toISO(r):bh},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():bh},t.toISOTime=function(r){return this.isValid?this.s.toISOTime(r)+"/"+this.e.toISOTime(r):bh},t.toFormat=function(r,n){var o=n===void 0?{}:n,s=o.separator,a=s===void 0?" \u2013 ":s;return this.isValid?""+this.s.toFormat(r)+a+this.e.toFormat(r):bh},t.toDuration=function(r,n){return this.isValid?this.e.diff(this.s,r,n):ci.invalid(this.invalidReason)},t.mapEndpoints=function(r){return e.fromDateTimes(r(this.s),r(this.e))},os(e,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return this.invalidReason===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),ff=function(){function e(){}return e.hasDST=function(i){i===void 0&&(i=Ft.defaultZone);var r=Vt.now().setZone(i).set({month:12});return!i.isUniversal&&r.offset!==r.set({month:6}).offset},e.isValidIANAZone=function(i){return Fc.isValidZone(i)},e.normalizeZone=function(i){return ul(i,Ft.defaultZone)},e.months=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o,a=n.numberingSystem,u=a===void 0?null:a,d=n.locObj,h=d===void 0?null:d,f=n.outputCalendar,y=f===void 0?"gregory":f;return(h||ii.create(s,u,y)).months(i)},e.monthsFormat=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o,a=n.numberingSystem,u=a===void 0?null:a,d=n.locObj,h=d===void 0?null:d,f=n.outputCalendar,y=f===void 0?"gregory":f;return(h||ii.create(s,u,y)).months(i,!0)},e.weekdays=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o,a=n.numberingSystem,u=a===void 0?null:a,d=n.locObj,h=d===void 0?null:d;return(h||ii.create(s,u,null)).weekdays(i)},e.weekdaysFormat=function(i,r){i===void 0&&(i="long");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o,a=n.numberingSystem,u=a===void 0?null:a,d=n.locObj,h=d===void 0?null:d;return(h||ii.create(s,u,null)).weekdays(i,!0)},e.meridiems=function(i){var r=i===void 0?{}:i,n=r.locale,o=n===void 0?null:n;return ii.create(o).meridiems()},e.eras=function(i,r){i===void 0&&(i="short");var n=r===void 0?{}:r,o=n.locale,s=o===void 0?null:o;return ii.create(s,null,"gregory").eras(i)},e.features=function(){return{relative:Wk()}},e}();function DN(e,t){var i=function(o){return o.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},r=i(t)-i(e);return Math.floor(ci.fromMillis(r).as("days"))}function joe(e,t,i){for(var r=[["years",function(v,w){return w.year-v.year}],["quarters",function(v,w){return w.quarter-v.quarter}],["months",function(v,w){return w.month-v.month+(w.year-v.year)*12}],["weeks",function(v,w){var _=DN(v,w);return(_-_%7)/7}],["days",DN]],n={},o,s,a=0,u=r;a<u.length;a++){var d=u[a],h=d[0],f=d[1];if(i.indexOf(h)>=0){var y;o=h;var m=f(e,t);if(s=e.plus((y={},y[h]=m,y)),s>t){var g;e=e.plus((g={},g[h]=m-1,g)),m-=1}else e=s;n[h]=m}}return[e,n,s,o]}function zoe(e,t,i,r){var n=joe(e,t,i),o=n[0],s=n[1],a=n[2],u=n[3],d=t-o,h=i.filter(function(g){return["hours","minutes","seconds","milliseconds"].indexOf(g)>=0});if(h.length===0){if(a<t){var f;a=o.plus((f={},f[u]=1,f))}a!==o&&(s[u]=(s[u]||0)+d/(a-o))}var y=ci.fromObject(s,r);if(h.length>0){var m;return(m=ci.fromMillis(d,r)).shiftTo.apply(m,h).plus(y)}else return y}var r3={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},LN={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Hoe=r3.hanidec.replace(/[\[|\]]/g,"").split("");function Goe(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var i=0;i<e.length;i++){var r=e.charCodeAt(i);if(e[i].search(r3.hanidec)!==-1)t+=Hoe.indexOf(e[i]);else for(var n in LN){var o=LN[n],s=o[0],a=o[1];r>=s&&r<=a&&(t+=r-s)}}return parseInt(t,10)}else return t}function An(e,t){var i=e.numberingSystem;return t===void 0&&(t=""),new RegExp(""+r3[i||"latn"]+t)}var Woe="missing Intl.DateTimeFormat.formatToParts support";function We(e,t){return t===void 0&&(t=function(r){return r}),{regex:e,deser:function(r){var n=r[0];return t(Goe(n))}}}var qoe=String.fromCharCode(160),p8="[ "+qoe+"]",h8=new RegExp(p8,"g");function Yoe(e){return e.replace(/\./g,"\\.?").replace(h8,p8)}function ON(e){return e.replace(/\./g,"").replace(h8," ").toLowerCase()}function xn(e,t){return e===null?null:{regex:RegExp(e.map(Yoe).join("|")),deser:function(r){var n=r[0];return e.findIndex(function(o){return ON(n)===ON(o)})+t}}}function kN(e,t){return{regex:e,deser:function(r){var n=r[1],o=r[2];return fw(n,o)},groups:t}}function Rb(e){return{regex:e,deser:function(i){var r=i[0];return r}}}function Koe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Zoe(e,t){var i=An(t),r=An(t,"{2}"),n=An(t,"{3}"),o=An(t,"{4}"),s=An(t,"{6}"),a=An(t,"{1,2}"),u=An(t,"{1,3}"),d=An(t,"{1,6}"),h=An(t,"{1,9}"),f=An(t,"{2,4}"),y=An(t,"{4,6}"),m=function(_){return{regex:RegExp(Koe(_.val)),deser:function(I){var D=I[0];return D},literal:!0}},g=function(_){if(e.literal)return m(_);switch(_.val){case"G":return xn(t.eras("short",!1),0);case"GG":return xn(t.eras("long",!1),0);case"y":return We(d);case"yy":return We(f,mT);case"yyyy":return We(o);case"yyyyy":return We(y);case"yyyyyy":return We(s);case"M":return We(a);case"MM":return We(r);case"MMM":return xn(t.months("short",!0,!1),1);case"MMMM":return xn(t.months("long",!0,!1),1);case"L":return We(a);case"LL":return We(r);case"LLL":return xn(t.months("short",!1,!1),1);case"LLLL":return xn(t.months("long",!1,!1),1);case"d":return We(a);case"dd":return We(r);case"o":return We(u);case"ooo":return We(n);case"HH":return We(r);case"H":return We(a);case"hh":return We(r);case"h":return We(a);case"mm":return We(r);case"m":return We(a);case"q":return We(a);case"qq":return We(r);case"s":return We(a);case"ss":return We(r);case"S":return We(u);case"SSS":return We(n);case"u":return Rb(h);case"uu":return Rb(a);case"uuu":return We(i);case"a":return xn(t.meridiems(),0);case"kkkk":return We(o);case"kk":return We(f,mT);case"W":return We(a);case"WW":return We(r);case"E":case"c":return We(i);case"EEE":return xn(t.weekdays("short",!1,!1),1);case"EEEE":return xn(t.weekdays("long",!1,!1),1);case"ccc":return xn(t.weekdays("short",!0,!1),1);case"cccc":return xn(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return kN(new RegExp("([+-]"+a.source+")(?::("+r.source+"))?"),2);case"ZZZ":return kN(new RegExp("([+-]"+a.source+")("+r.source+")?"),2);case"z":return Rb(/[a-z_+-/]{1,256}?/i);default:return m(_)}},v=g(e)||{invalidReason:Woe};return v.token=e,v}var Joe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function Xoe(e,t,i){var r=e.type,n=e.value;if(r==="literal")return{literal:!0,val:n};var o=i[r],s=Joe[r];if(typeof s=="object"&&(s=s[o]),s)return{literal:!1,val:s}}function Qoe(e){var t=e.map(function(i){return i.regex}).reduce(function(i,r){return i+"("+r.source+")"},"");return["^"+t+"$",e]}function ese(e,t,i){var r=e.match(t);if(r){var n={},o=1;for(var s in i)if(Tp(i,s)){var a=i[s],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(o,o+u))),o+=u}return[r,n]}else return[r,{}]}function tse(e){var t=function(s){switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},i=null,r;Ve(e.z)||(i=Fc.create(e.z)),Ve(e.Z)||(i||(i=new lo(e.Z)),r=e.Z),Ve(e.q)||(e.M=(e.q-1)*3+1),Ve(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ve(e.u)||(e.S=Jx(e.u));var n=Object.keys(e).reduce(function(o,s){var a=t(s);return a&&(o[a]=e[s]),o},{});return[n,i,r]}var Pb=null;function ise(){return Pb||(Pb=Vt.fromMillis(1555555555555)),Pb}function rse(e,t){if(e.literal)return e;var i=zs.macroTokenToFormatOpts(e.val);if(!i)return e;var r=zs.create(t,i),n=r.formatDateTimeParts(ise()),o=n.map(function(s){return Xoe(s,t,i)});return o.includes(void 0)?e:o}function nse(e,t){var i;return(i=Array.prototype).concat.apply(i,e.map(function(r){return rse(r,t)}))}function f8(e,t,i){var r=nse(zs.parseFormat(i),e),n=r.map(function(_){return Zoe(_,e)}),o=n.find(function(_){return _.invalidReason});if(o)return{input:t,tokens:r,invalidReason:o.invalidReason};var s=Qoe(n),a=s[0],u=s[1],d=RegExp(a,"i"),h=ese(t,d,u),f=h[0],y=h[1],m=y?tse(y):[null,null,void 0],g=m[0],v=m[1],w=m[2];if(Tp(y,"a")&&Tp(y,"H"))throw new pf("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:d,rawMatches:f,matches:y,result:g,zone:v,specificOffset:w}}function ose(e,t,i){var r=f8(e,t,i),n=r.result,o=r.zone,s=r.specificOffset,a=r.invalidReason;return[n,o,s,a]}var y8=[0,31,59,90,120,151,181,212,243,273,304,334],m8=[0,31,60,91,121,152,182,213,244,274,305,335];function ln(e,t){return new ro("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function g8(e,t,i){var r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);var n=r.getUTCDay();return n===0?7:n}function v8(e,t,i){return i+(lm(e)?m8:y8)[t-1]}function w8(e,t){var i=lm(e)?m8:y8,r=i.findIndex(function(o){return o<t}),n=t-i[r];return{month:r+1,day:n}}function _T(e){var t=e.year,i=e.month,r=e.day,n=v8(t,i,r),o=g8(t,i,r),s=Math.floor((n-o+10)/7),a;return s<1?(a=t-1,s=q1(a)):s>q1(t)?(a=t+1,s=1):a=t,ke({weekYear:a,weekNumber:s,weekday:o},yw(e))}function FN(e){var t=e.weekYear,i=e.weekNumber,r=e.weekday,n=g8(t,1,4),o=qf(t),s=i*7+r-n-3,a;s<1?(a=t-1,s+=qf(a)):s>o?(a=t+1,s-=qf(t)):a=t;var u=w8(a,s),d=u.month,h=u.day;return ke({year:a,month:d,day:h},yw(e))}function $b(e){var t=e.year,i=e.month,r=e.day,n=v8(t,i,r);return ke({year:t,ordinal:n},yw(e))}function BN(e){var t=e.year,i=e.ordinal,r=w8(t,i),n=r.month,o=r.day;return ke({year:t,month:n,day:o},yw(e))}function sse(e){var t=hw(e.weekYear),i=js(e.weekNumber,1,q1(e.weekYear)),r=js(e.weekday,1,7);return t?i?r?!1:ln("weekday",e.weekday):ln("week",e.week):ln("weekYear",e.weekYear)}function ase(e){var t=hw(e.year),i=js(e.ordinal,1,qf(e.year));return t?i?!1:ln("ordinal",e.ordinal):ln("year",e.year)}function b8(e){var t=hw(e.year),i=js(e.month,1,12),r=js(e.day,1,W1(e.year,e.month));return t?i?r?!1:ln("day",e.day):ln("month",e.month):ln("year",e.year)}function _8(e){var t=e.hour,i=e.minute,r=e.second,n=e.millisecond,o=js(t,0,23)||t===24&&i===0&&r===0&&n===0,s=js(i,0,59),a=js(r,0,59),u=js(n,0,999);return o?s?a?u?!1:ln("millisecond",n):ln("second",r):ln("minute",i):ln("hour",t)}var Db="Invalid DateTime",UN=864e13;function Xm(e){return new ro("unsupported zone",'the zone "'+e.name+'" is not supported')}function Lb(e){return e.weekData===null&&(e.weekData=_T(e.c)),e.weekData}function _h(e,t){var i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Vt(ke({},i,t,{old:i}))}function S8(e,t,i){var r=e-t*60*1e3,n=i.offset(r);if(t===n)return[r,t];r-=(n-t)*60*1e3;var o=i.offset(r);return n===o?[r,n]:[e-Math.min(n,o)*60*1e3,Math.max(n,o)]}function VN(e,t){e+=t*60*1e3;var i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function vg(e,t,i){return S8(Qx(e),t,i)}function jN(e,t){var i=e.o,r=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o=ke({},e.c,{year:r,month:n,day:Math.min(e.c.day,W1(r,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7}),s=ci.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Qx(o),u=S8(a,i,e.zone),d=u[0],h=u[1];return s!==0&&(d+=s,h=e.zone.offset(d)),{ts:d,o:h}}function Sh(e,t,i,r,n,o){var s=i.setZone,a=i.zone;if(e&&Object.keys(e).length!==0){var u=t||a,d=Vt.fromObject(e,ke({},i,{zone:u,specificOffset:o}));return s?d:d.setZone(a)}else return Vt.invalid(new ro("unparsable",'the input "'+n+`" can't be parsed as `+r))}function Qm(e,t,i){return i===void 0&&(i=!0),e.isValid?zs.create(ii.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Ob(e,t){var i=e.c.year>9999||e.c.year<0,r="";return i&&e.c.year>=0&&(r+="+"),r+=Bt(e.c.year,i?6:4),t?(r+="-",r+=Bt(e.c.month),r+="-",r+=Bt(e.c.day)):(r+=Bt(e.c.month),r+=Bt(e.c.day)),r}function zN(e,t,i,r,n,o){var s=Bt(e.c.hour);return t?(s+=":",s+=Bt(e.c.minute),(e.c.second!==0||!i)&&(s+=":")):s+=Bt(e.c.minute),(e.c.second!==0||!i)&&(s+=Bt(e.c.second),(e.c.millisecond!==0||!r)&&(s+=".",s+=Bt(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!o?s+="Z":e.o<0?(s+="-",s+=Bt(Math.trunc(-e.o/60)),s+=":",s+=Bt(Math.trunc(-e.o%60))):(s+="+",s+=Bt(Math.trunc(e.o/60)),s+=":",s+=Bt(Math.trunc(e.o%60)))),o&&(s+="["+e.zone.ianaName+"]"),s}var T8={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},lse={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},use={ordinal:1,hour:0,minute:0,second:0,millisecond:0},E8=["year","month","day","hour","minute","second","millisecond"],cse=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],dse=["year","ordinal","hour","minute","second","millisecond"];function HN(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new xk(e);return t}function GN(e,t){var i=ul(t.zone,Ft.defaultZone),r=ii.fromObject(t),n=Ft.now(),o,s;if(Ve(e.year))o=n;else{for(var a=Sl(E8),u;!(u=a()).done;){var d=u.value;Ve(e[d])&&(e[d]=T8[d])}var h=b8(e)||_8(e);if(h)return Vt.invalid(h);var f=i.offset(n),y=vg(e,f,i);o=y[0],s=y[1]}return new Vt({ts:o,zone:i,loc:r,o:s})}function WN(e,t,i){var r=Ve(i.round)?!0:i.round,n=function(f,y){f=Xx(f,r||i.calendary?0:2,!0);var m=t.loc.clone(i).relFormatter(i);return m.format(f,y)},o=function(f){return i.calendary?t.hasSame(e,f)?0:t.startOf(f).diff(e.startOf(f),f).get(f):t.diff(e,f).get(f)};if(i.unit)return n(o(i.unit),i.unit);for(var s=Sl(i.units),a;!(a=s()).done;){var u=a.value,d=o(u);if(Math.abs(d)>=1)return n(d,u)}return n(e>t?-0:0,i.units[i.units.length-1])}function qN(e){var t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}var Vt=function(){function e(i){var r=i.zone||Ft.defaultZone,n=i.invalid||(Number.isNaN(i.ts)?new ro("invalid input"):null)||(r.isValid?null:Xm(r));this.ts=Ve(i.ts)?Ft.now():i.ts;var o=null,s=null;if(!n){var a=i.old&&i.old.ts===this.ts&&i.old.zone.equals(r);if(a){var u=[i.old.c,i.old.o];o=u[0],s=u[1]}else{var d=r.offset(this.ts);o=VN(this.ts,d),n=Number.isNaN(o.year)?new ro("invalid input"):null,o=n?null:o,s=n?null:d}}this._zone=r,this.loc=i.loc||ii.create(),this.invalid=n,this.weekData=null,this.c=o,this.o=s,this.isLuxonDateTime=!0}e.now=function(){return new e({})},e.local=function(){var r=qN(arguments),n=r[0],o=r[1],s=o[0],a=o[1],u=o[2],d=o[3],h=o[4],f=o[5],y=o[6];return GN({year:s,month:a,day:u,hour:d,minute:h,second:f,millisecond:y},n)},e.utc=function(){var r=qN(arguments),n=r[0],o=r[1],s=o[0],a=o[1],u=o[2],d=o[3],h=o[4],f=o[5],y=o[6];return n.zone=lo.utcInstance,GN({year:s,month:a,day:u,hour:d,minute:h,second:f,millisecond:y},n)},e.fromJSDate=function(r,n){n===void 0&&(n={});var o=vne(r)?r.valueOf():NaN;if(Number.isNaN(o))return e.invalid("invalid input");var s=ul(n.zone,Ft.defaultZone);return s.isValid?new e({ts:o,zone:s,loc:ii.fromObject(n)}):e.invalid(Xm(s))},e.fromMillis=function(r,n){if(n===void 0&&(n={}),dc(r))return r<-UN||r>UN?e.invalid("Timestamp out of range"):new e({ts:r,zone:ul(n.zone,Ft.defaultZone),loc:ii.fromObject(n)});throw new an("fromMillis requires a numerical input, but received a "+typeof r+" with value "+r)},e.fromSeconds=function(r,n){if(n===void 0&&(n={}),dc(r))return new e({ts:r*1e3,zone:ul(n.zone,Ft.defaultZone),loc:ii.fromObject(n)});throw new an("fromSeconds requires a numerical input")},e.fromObject=function(r,n){n===void 0&&(n={}),r=r||{};var o=ul(n.zone,Ft.defaultZone);if(!o.isValid)return e.invalid(Xm(o));var s=Ft.now(),a=Ve(n.specificOffset)?o.offset(s):n.specificOffset,u=Y1(r,HN),d=!Ve(u.ordinal),h=!Ve(u.year),f=!Ve(u.month)||!Ve(u.day),y=h||f,m=u.weekYear||u.weekNumber,g=ii.fromObject(n);if((y||d)&&m)throw new pf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&d)throw new pf("Can't mix ordinal dates with month/day");var v=m||u.weekday&&!y,w,_,A=VN(s,a);v?(w=cse,_=lse,A=_T(A)):d?(w=dse,_=use,A=$b(A)):(w=E8,_=T8);for(var I=!1,D=Sl(w),M;!(M=D()).done;){var R=M.value,B=u[R];Ve(B)?I?u[R]=_[R]:u[R]=A[R]:I=!0}var j=v?sse(u):d?ase(u):b8(u),Y=j||_8(u);if(Y)return e.invalid(Y);var ee=v?FN(u):d?BN(u):u,re=vg(ee,a,o),ue=re[0],ge=re[1],ne=new e({ts:ue,zone:o,o:ge,loc:g});return u.weekday&&y&&r.weekday!==ne.weekday?e.invalid("mismatched weekday","you can't specify both a weekday of "+u.weekday+" and a date of "+ne.toISO()):ne},e.fromISO=function(r,n){n===void 0&&(n={});var o=Aoe(r),s=o[0],a=o[1];return Sh(s,a,n,"ISO 8601",r)},e.fromRFC2822=function(r,n){n===void 0&&(n={});var o=xoe(r),s=o[0],a=o[1];return Sh(s,a,n,"RFC 2822",r)},e.fromHTTP=function(r,n){n===void 0&&(n={});var o=Coe(r),s=o[0],a=o[1];return Sh(s,a,n,"HTTP",n)},e.fromFormat=function(r,n,o){if(o===void 0&&(o={}),Ve(r)||Ve(n))throw new an("fromFormat requires an input string and a format");var s=o,a=s.locale,u=a===void 0?null:a,d=s.numberingSystem,h=d===void 0?null:d,f=ii.fromOpts({locale:u,numberingSystem:h,defaultToEN:!0}),y=ose(f,r,n),m=y[0],g=y[1],v=y[2],w=y[3];return w?e.invalid(w):Sh(m,g,o,"format "+n,r,v)},e.fromString=function(r,n,o){return o===void 0&&(o={}),e.fromFormat(r,n,o)},e.fromSQL=function(r,n){n===void 0&&(n={});var o=Doe(r),s=o[0],a=o[1];return Sh(s,a,n,"SQL",r)},e.invalid=function(r,n){if(n===void 0&&(n=null),!r)throw new an("need to specify a reason the DateTime is invalid");var o=r instanceof ro?r:new ro(r,n);if(Ft.throwOnInvalid)throw new pne(o);return new e({invalid:o})},e.isDateTime=function(r){return r&&r.isLuxonDateTime||!1};var t=e.prototype;return t.get=function(r){return this[r]},t.resolvedLocaleOptions=function(r){r===void 0&&(r={});var n=zs.create(this.loc.clone(r),r).resolvedOptions(this),o=n.locale,s=n.numberingSystem,a=n.calendar;return{locale:o,numberingSystem:s,outputCalendar:a}},t.toUTC=function(r,n){return r===void 0&&(r=0),n===void 0&&(n={}),this.setZone(lo.instance(r),n)},t.toLocal=function(){return this.setZone(Ft.defaultZone)},t.setZone=function(r,n){var o=n===void 0?{}:n,s=o.keepLocalTime,a=s===void 0?!1:s,u=o.keepCalendarTime,d=u===void 0?!1:u;if(r=ul(r,Ft.defaultZone),r.equals(this.zone))return this;if(r.isValid){var h=this.ts;if(a||d){var f=r.offset(this.ts),y=this.toObject(),m=vg(y,f,r);h=m[0]}return _h(this,{ts:h,zone:r})}else return e.invalid(Xm(r))},t.reconfigure=function(r){var n=r===void 0?{}:r,o=n.locale,s=n.numberingSystem,a=n.outputCalendar,u=this.loc.clone({locale:o,numberingSystem:s,outputCalendar:a});return _h(this,{loc:u})},t.setLocale=function(r){return this.reconfigure({locale:r})},t.set=function(r){if(!this.isValid)return this;var n=Y1(r,HN),o=!Ve(n.weekYear)||!Ve(n.weekNumber)||!Ve(n.weekday),s=!Ve(n.ordinal),a=!Ve(n.year),u=!Ve(n.month)||!Ve(n.day),d=a||u,h=n.weekYear||n.weekNumber;if((d||s)&&h)throw new pf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&s)throw new pf("Can't mix ordinal dates with month/day");var f;o?f=FN(ke({},_T(this.c),n)):Ve(n.ordinal)?(f=ke({},this.toObject(),n),Ve(n.day)&&(f.day=Math.min(W1(f.year,f.month),f.day))):f=BN(ke({},$b(this.c),n));var y=vg(f,this.o,this.zone),m=y[0],g=y[1];return _h(this,{ts:m,o:g})},t.plus=function(r){if(!this.isValid)return this;var n=ci.fromDurationLike(r);return _h(this,jN(this,n))},t.minus=function(r){if(!this.isValid)return this;var n=ci.fromDurationLike(r).negate();return _h(this,jN(this,n))},t.startOf=function(r){if(!this.isValid)return this;var n={},o=ci.normalizeUnit(r);switch(o){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(o==="weeks"&&(n.weekday=1),o==="quarters"){var s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)},t.endOf=function(r){var n;return this.isValid?this.plus((n={},n[r]=1,n)).startOf(r).minus(1):this},t.toFormat=function(r,n){return n===void 0&&(n={}),this.isValid?zs.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,r):Db},t.toLocaleString=function(r,n){return r===void 0&&(r=yT),n===void 0&&(n={}),this.isValid?zs.create(this.loc.clone(n),r).formatDateTime(this):Db},t.toLocaleParts=function(r){return r===void 0&&(r={}),this.isValid?zs.create(this.loc.clone(r),r).formatDateTimeParts(this):[]},t.toISO=function(r){var n=r===void 0?{}:r,o=n.format,s=o===void 0?"extended":o,a=n.suppressSeconds,u=a===void 0?!1:a,d=n.suppressMilliseconds,h=d===void 0?!1:d,f=n.includeOffset,y=f===void 0?!0:f,m=n.extendedZone,g=m===void 0?!1:m;if(!this.isValid)return null;var v=s==="extended",w=Ob(this,v);return w+="T",w+=zN(this,v,u,h,y,g),w},t.toISODate=function(r){var n=r===void 0?{}:r,o=n.format,s=o===void 0?"extended":o;return this.isValid?Ob(this,s==="extended"):null},t.toISOWeekDate=function(){return Qm(this,"kkkk-'W'WW-c")},t.toISOTime=function(r){var n=r===void 0?{}:r,o=n.suppressMilliseconds,s=o===void 0?!1:o,a=n.suppressSeconds,u=a===void 0?!1:a,d=n.includeOffset,h=d===void 0?!0:d,f=n.includePrefix,y=f===void 0?!1:f,m=n.extendedZone,g=m===void 0?!1:m,v=n.format,w=v===void 0?"extended":v;if(!this.isValid)return null;var _=y?"T":"";return _+zN(this,w==="extended",u,s,h,g)},t.toRFC2822=function(){return Qm(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},t.toHTTP=function(){return Qm(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return this.isValid?Ob(this,!0):null},t.toSQLTime=function(r){var n=r===void 0?{}:r,o=n.includeOffset,s=o===void 0?!0:o,a=n.includeZone,u=a===void 0?!1:a,d=n.includeOffsetSpace,h=d===void 0?!0:d,f="HH:mm:ss.SSS";return(u||s)&&(h&&(f+=" "),u?f+="z":s&&(f+="ZZ")),Qm(this,f,!0)},t.toSQL=function(r){return r===void 0&&(r={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(r):null},t.toString=function(){return this.isValid?this.toISO():Db},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1e3):NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(r){if(r===void 0&&(r={}),!this.isValid)return{};var n=ke({},this.c);return r.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(r,n,o){if(n===void 0&&(n="milliseconds"),o===void 0&&(o={}),!this.isValid||!r.isValid)return ci.invalid("created by diffing an invalid DateTime");var s=ke({locale:this.locale,numberingSystem:this.numberingSystem},o),a=wne(n).map(ci.normalizeUnit),u=r.valueOf()>this.valueOf(),d=u?this:r,h=u?r:this,f=zoe(d,h,a,s);return u?f.negate():f},t.diffNow=function(r,n){return r===void 0&&(r="milliseconds"),n===void 0&&(n={}),this.diff(e.now(),r,n)},t.until=function(r){return this.isValid?Kf.fromDateTimes(this,r):this},t.hasSame=function(r,n){if(!this.isValid)return!1;var o=r.valueOf(),s=this.setZone(r.zone,{keepLocalTime:!0});return s.startOf(n)<=o&&o<=s.endOf(n)},t.equals=function(r){return this.isValid&&r.isValid&&this.valueOf()===r.valueOf()&&this.zone.equals(r.zone)&&this.loc.equals(r.loc)},t.toRelative=function(r){if(r===void 0&&(r={}),!this.isValid)return null;var n=r.base||e.fromObject({},{zone:this.zone}),o=r.padding?this<n?-r.padding:r.padding:0,s=["years","months","days","hours","minutes","seconds"],a=r.unit;return Array.isArray(r.unit)&&(s=r.unit,a=void 0),WN(n,this.plus(o),ke({},r,{numeric:"always",units:s,unit:a}))},t.toRelativeCalendar=function(r){return r===void 0&&(r={}),this.isValid?WN(r.base||e.fromObject({},{zone:this.zone}),this,ke({},r,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},e.min=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(!n.every(e.isDateTime))throw new an("min requires all arguments be DateTimes");return EN(n,function(s){return s.valueOf()},Math.min)},e.max=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(!n.every(e.isDateTime))throw new an("max requires all arguments be DateTimes");return EN(n,function(s){return s.valueOf()},Math.max)},e.fromFormatExplain=function(r,n,o){o===void 0&&(o={});var s=o,a=s.locale,u=a===void 0?null:a,d=s.numberingSystem,h=d===void 0?null:d,f=ii.fromOpts({locale:u,numberingSystem:h,defaultToEN:!0});return f8(f,r,n)},e.fromStringExplain=function(r,n,o){return o===void 0&&(o={}),e.fromFormatExplain(r,n,o)},os(e,[{key:"isValid",get:function(){return this.invalid===null}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Lb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Lb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Lb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?$b(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?ff.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?ff.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?ff.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?ff.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return lm(this.year)}},{key:"daysInMonth",get:function(){return W1(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?qf(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?q1(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return yT}},{key:"DATE_MED",get:function(){return Ck}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return yne}},{key:"DATE_FULL",get:function(){return Ik}},{key:"DATE_HUGE",get:function(){return Mk}},{key:"TIME_SIMPLE",get:function(){return Nk}},{key:"TIME_WITH_SECONDS",get:function(){return Rk}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Pk}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return $k}},{key:"TIME_24_SIMPLE",get:function(){return Dk}},{key:"TIME_24_WITH_SECONDS",get:function(){return Lk}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return Ok}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return kk}},{key:"DATETIME_SHORT",get:function(){return Fk}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return Bk}},{key:"DATETIME_MED",get:function(){return Uk}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return Vk}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return mne}},{key:"DATETIME_FULL",get:function(){return jk}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return zk}},{key:"DATETIME_HUGE",get:function(){return Hk}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Gk}}]),e}();function Th(e){if(Vt.isDateTime(e))return e;if(e&&e.valueOf&&dc(e.valueOf()))return Vt.fromJSDate(e);if(e&&typeof e=="object")return Vt.fromObject(e);throw new an("Unknown datetime argument: "+e+", of type "+typeof e)}var pse="2.4.0",K1=wn.DateTime=Vt;wn.Duration=ci;wn.FixedOffsetZone=lo;wn.IANAZone=Fc;wn.Info=ff;wn.Interval=Kf;wn.InvalidZone=n8;wn.Settings=Ft;wn.SystemZone=r8;wn.VERSION=pse;wn.Zone=Jp;const kb={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function A8(e){e||(e=Or());let t=e in kb;if(!t){const o=e.split("-");o.length>1&&o[0]in kb&&(e=o[0],t=!0),t||(e="en")}const[i,r,n="#,##0.###"]=kb[e];return{decimal:i,group:r,pattern:n}}function hse(e,t){const i=A8((t={...t}).locale);t.customs=i;const r=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:fse(e,r,t)}const x8=/[#0,]*[#0](?:\.0*#*)?/;function fse(e,t,i){const r=(i=i||{}).customs.group,n=i.customs.decimal,o=t.split(";"),s=o[0];if((t=o[e<0?1:0]||"-"+s).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xA4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const a=x8,u=s.match(a);if(!u)throw new Error("unable to find a number expression in pattern: "+t);return i.fractional===!1&&(i.places=0),t.replace(a,yse(e,u[0],{decimal:n,group:r,places:i.places,round:i.round}))}function yse(e,t,i){(i=i||{}).places===!0&&(i.places=0),i.places===1/0&&(i.places=6);const r=t.split("."),n=typeof i.places=="string"&&i.places.indexOf(",");let o=i.places;n?o=i.places.substring(n+1):o>=0||(o=(r[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(o))));const s=String(Math.abs(e)).split("."),a=s[1]||"";if(r[1]||i.places){n&&(i.places=i.places.substring(0,n));const g=i.places!==void 0?i.places:r[1]&&r[1].lastIndexOf("0")+1;g>a.length&&(s[1]=a.padEnd(Number(g),"0")),o<a.length&&(s[1]=a.substr(0,Number(o)))}else s[1]&&s.pop();const u=r[0].replace(",","");let d=u.indexOf("0");d!==-1&&(d=u.length-d,d>s[0].length&&(s[0]=s[0].padStart(d,"0")),u.includes("#")||(s[0]=s[0].substr(s[0].length-d)));let h,f,y=r[0].lastIndexOf(",");if(y!==-1){h=r[0].length-y-1;const g=r[0].substr(0,y);y=g.lastIndexOf(","),y!==-1&&(f=g.length-y-1)}const m=[];for(let g=s[0];g;){const v=g.length-h;m.push(v>0?g.substr(v):g),g=v>0?g.slice(0,v):"",f&&(h=f,f=void 0)}return s[0]=m.reverse().join(i.group||","),s.join(i.decimal||".")}function mse(e){const t=A8((e=e||{}).locale),i=e.pattern||t.pattern,r=t.group,n=t.decimal;let o=1;if(i.includes("%"))o/=100;else if(i.includes("\u2030"))o/=1e3;else if(i.includes("\xA4"))throw new Error("currency notation not supported");const s=i.split(";");return s.length===1&&s.push("-"+s[0]),{regexp:Ny(s,u=>(u="(?:"+aA(u,".")+")").replace(x8,d=>{const h={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:n,exponent:!1},f=d.split(".");let y=e.places;f.length===1&&o!==1&&(f[1]="###"),f.length===1||y===0?h.fractional=!1:(y===void 0&&(y=e.pattern?f[1].lastIndexOf("0")+1:1/0),y&&e.fractional==null&&(h.fractional=!0),!e.places&&y<f[1].length&&(y+=","+f[1].length),h.places=y);const m=f[0].split(",");return m.length>1&&(h.groupSize=m.pop().length,m.length>1&&(h.groupSize2=m.pop().length)),"("+vse(h)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:n,factor:o}}function gse(e,t){const i=mse(t),r=new RegExp("^"+i.regexp+"$").exec(e);if(!r)return NaN;let n=r[1];if(!r[1]){if(!r[2])return NaN;n=r[2],i.factor*=-1}return n=n.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(n)*i.factor}function vse(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=YN(e),i=Ny(e.fractional,n=>{let o="";return n&&e.places!==0&&(o="\\"+e.decimal,e.places===1/0?o="(?:"+o+"\\d+)?":o+="\\d{"+e.places+"}"),o},!0);let r=t+i;return i&&(r="(?:(?:"+r+")|(?:"+i+"))"),r+Ny(e.exponent,n=>n?"([eE]"+YN({signed:e.eSigned})+")":"")}function YN(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",Ny(e.signed,t=>t?"[-+]":"",!0)+Ny(e.separator,t=>{if(!t)return"(?:\\d+)";(t=aA(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const i=e.groupSize,r=e.groupSize2;if(r){const n="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+i+"})";return i-r>0?"(?:"+n+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":n}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0)}const Ny=(e,t,i)=>{if(!(e instanceof Array))return t(e);const r=[];for(let n=0;n<e.length;n++)r.push(t(e[n]));return wse(r.join("|"),i)},wse=(e,t)=>"("+(t?"?:":"")+e+")";var KN,ZN;function mve(e){return om.fromJSON(e.toJSON())}function bse(e){return e.toJSON?e.toJSON():e}function gve(e){return typeof e=="string"||e instanceof String}function vve(e){return typeof e=="number"}function JN(e){return e instanceof Date}function wve(e,t){return e===t||!(!JN(e)||!JN(t))&&e.getTime()===t.getTime()}function bve(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function _ve(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Oe({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function Sve(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(KN||(KN={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(ZN||(ZN={}));const Tve=1e3,Eve={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},XN={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},Ave={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function xve(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function Cve(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(n=t.cmp,function(s){return function(a,u){const d={key:a,value:s[a]},h={key:u,value:s[u]};return n(d,h)}});var n;const o=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let u,d;if(Array.isArray(a)){for(d="[",u=0;u<a.length;u++)u&&(d+=","),d+=s(a[u])||"null";return d+"]"}if(a===null)return"null";if(o.includes(a)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=o.push(a)-1,f=Object.keys(a).sort(r&&r(a));for(d="",u=0;u<f.length;u++){const y=f[u],m=s(a[y]);m&&(d&&(d+=","),d+=JSON.stringify(y)+":"+m)}return o.splice(h,1),"{"+d+"}"}(e)}class C8{constructor(t){this.value=t}}class I8{constructor(t){this.value=t}}class n3{constructor(t){this.fn=t}}class o3{constructor(t,i){this.paramCount=i,this.fn=t}}const _se=n3,Sse=I8,Tse=C8,Ese=o3,$r={type:"VOID"},Ase={type:"BREAK"},xse={type:"CONTINUE"};function Ry(e,t,i){return t===""||t==null||t===i||t===i?e:e=e.split(t).join(i)}function s3(e){return e instanceof n3||e instanceof lne||e instanceof o3}function Z1(e){return!!ui(e)||!!Vi(e)||!!Ai(e)||!!Ui(e)||e===null||e===$r||typeof e=="number"}function Cse(e,t){return e===void 0?t:e}function ui(e){return typeof e=="string"||e instanceof String}function Ui(e){return typeof e=="boolean"}function Vi(e){return typeof e=="number"}function Ise(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function gn(e){return e instanceof Array}function Mse(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function Nse(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function Rse(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function xc(e){return e instanceof ns}function Ai(e){return e instanceof Date}function Pse(e,t,i){if(e.length<t||e.length>i)throw new Error("Function called with wrong number of Parameters")}function $se(e){return e<0?-Math.round(-e):Math.round(e)}function Dse(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?i:3&i|8).toString(16)})}function a3(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=Ry(t,"\u2030",""),t=Ry(t,"\xA4",""),hse(e,{pattern:t})):e.toString()}function mw(e,t){const i=K1.fromJSDate(e);return t==null||t===""?i.toISO({suppressMilliseconds:!0}):i.toFormat(M8(t),{locale:Or(),numberingSystem:"latn"})}function M8(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const i=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i))switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}function Ye(e,t,i){switch(i){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function Lse(e,t,i){if(e===null){if(t===null||t===$r)return Ye(null,null,i);if(Vi(t))return Ye(0,t,i);if(ui(t)||Ui(t))return Ye(0,mt(t),i);if(Ai(t))return Ye(0,t.getTime(),i)}if(e===$r){if(t===null||t===$r)return Ye(null,null,i);if(Vi(t))return Ye(0,t,i);if(ui(t)||Ui(t))return Ye(0,mt(t),i);if(Ai(t))return Ye(0,t.getTime(),i)}else if(Vi(e)){if(Vi(t))return Ye(e,t,i);if(Ui(t))return Ye(e,mt(t),i);if(t===null||t===$r)return Ye(e,0,i);if(ui(t))return Ye(e,mt(t),i);if(Ai(t))return Ye(e,t.getTime(),i)}else if(ui(e)){if(ui(t))return Ye(Tl(e),Tl(t),i);if(Ai(t))return Ye(mt(e),t.getTime(),i);if(Vi(t))return Ye(mt(e),t,i);if(t===null||t===$r)return Ye(mt(e),0,i);if(Ui(t))return Ye(mt(e),mt(t),i)}else if(Ai(e)){if(Ai(t))return Ye(e,t,i);if(t===null||t===$r)return Ye(e.getTime(),0,i);if(Vi(t))return Ye(e.getTime(),t,i);if(Ui(t)||ui(t))return Ye(e.getTime(),mt(t),i)}else if(Ui(e)){if(Ui(t))return Ye(e,t,i);if(Vi(t))return Ye(mt(e),mt(t),i);if(Ai(t))return Ye(mt(e),t.getTime(),i);if(t===null||t===$r)return Ye(mt(e),0,i);if(ui(t))return Ye(mt(e),mt(t),i)}return!!N8(e,t)&&(i==="<="||i===">=")}function N8(e,t){if(e===t||e===null&&t===$r||t===null&&e===$r)return!0;if(Ai(e)&&Ai(t))return e.getTime()===t.getTime();if(e instanceof Zx||e instanceof Oc)return e.equalityTest(t);if(e instanceof le&&t instanceof le){const i=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(i!=null)return i===r}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function Tl(e,t){if(ui(e))return e;if(e===null)return"";if(Vi(e))return a3(e,t);if(Ui(e))return e.toString();if(Ai(e))return mw(e,t);if(e instanceof fr)return JSON.stringify(e.toJSON());if(gn(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=J1(e[r]);return"["+i.join(",")+"]"}if(e instanceof ns){const i=[];for(let r=0;r<e.length();r++)i[r]=J1(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():s3(e)?"object, Function":""}function Ose(e){const t=[];if(gn(e)===!1)return null;if(e instanceof ns){for(let i=0;i<e.length();i++)t[i]=mt(e.get(i));return t}for(let i=0;i<e.length;i++)t[i]=mt(e[i]);return t}function wg(e,t){if(ui(e))return e;if(e===null)return"";if(Vi(e))return a3(e,t);if(Ui(e))return e.toString();if(Ai(e))return mw(e,t);if(e instanceof fr)return e instanceof Oe?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+ST(e.spatialReference)+"}":ST(e.toJSON(),(i,r)=>i.key===r.key?0:i.key==="spatialReference"?1:r.key==="spatialReference"||i.key<r.key?-1:i.key>r.key?1:0);if(gn(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=J1(e[r]);return"["+i.join(",")+"]"}if(e instanceof ns){const i=[];for(let r=0;r<e.length();r++)i[r]=J1(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():s3(e)?"object, Function":""}function J1(e){if(e===null)return"null";if(Ui(e)||Vi(e)||ui(e))return JSON.stringify(e);if(e instanceof fr||e instanceof ns||e instanceof Array)return wg(e);if(e instanceof Date)return JSON.stringify(mw(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===$r)return"null";return"null"}function mt(e,t){return Vi(e)?e:e===null||e===""?0:Ai(e)?NaN:Ui(e)?e?1:0:gn(e)||e===""||e===void 0?NaN:t!==void 0&&ui(e)?(t=Ry(t,"\u2030",""),t=Ry(t,"\xA4",""),gse(e,{pattern:t})):e===$r?0:Number(e)}function kse(e){if(Ai(e))return e;if(ui(e)){const t=R8(e);if(t)return t.toJSDate()}return null}function Fse(e){return Ai(e)?K1.fromJSDate(e):ui(e)?R8(e):null}function R8(e){const t=/ (\d\d)/;let i=K1.fromISO(e);return i.isValid||t.test(e)&&(e=e.replace(t,"T$1"),i=K1.fromISO(e),i.isValid)?i:null}function Bse(e){return Ui(e)?e:ui(e)?(e=e.toLowerCase())==="true":!!Vi(e)&&e!==0&&!isNaN(e)}function Use(e,t){return O(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function Vse(e){if(e===null)return null;if(e instanceof le)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof mr){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof Hi){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof Bp?e.points.length===0?null:e:e instanceof Oe?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function P8(e,t){if(!e||!e.domain)return t;let i=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=Tl(t);else{if(t==null)return null;if(t==="")return t;t=mt(t)}for(let r=0;r<e.domain.codedValues.length;r++){const n=e.domain.codedValues[r];n.code===t&&(i=n)}return i===null?t:i.name}function $8(e,t){if(!e||!e.domain)return t;let i=null;t=Tl(t);for(let r=0;r<e.domain.codedValues.length;r++){const n=e.domain.codedValues[r];n.name===t&&(i=n)}return i===null?t:i.code}function gw(e,t,i=null,r=null){if(!t||!t.fields)return null;let n,o,s=null;for(let a=0;a<t.fields.length;a++){const u=t.fields[a];u.name.toLowerCase()===e.toString().toLowerCase()&&(s=u)}if(s===null)throw new Error("Field not found");return r===null&&i&&t.typeIdField&&(r=i.hasField(t.typeIdField)?i.field(t.typeIdField):null),r!=null&&t.types.some(function(a){return a.id===r&&(n=a.domains&&a.domains[s.name],n&&n.type==="inherited"&&(n=QN(s.name,t),o=!0),!0)}),o||n||(n=QN(e,t)),{field:s,domain:n}}function QN(e,t){let i;return t.fields.some(function(r){return r.name.toLowerCase()===e.toLowerCase()&&(i=r.domain),!!i}),i}function ST(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(n=t.cmp,function(s){return function(a,u){const d={key:a,value:s[a]},h={key:u,value:s[u]};return n(d,h)}});var n;const o=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let u,d;if(Array.isArray(a)){for(d="[",u=0;u<a.length;u++)u&&(d+=","),d+=s(a[u])||"null";return d+"]"}if(a===null)return"null";if(o.includes(a)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=o.push(a)-1,f=Object.keys(a).sort(r&&r(a));for(d="",u=0;u<f.length;u++){const y=f[u],m=s(a[y]);m&&(d&&(d+=","),d+=JSON.stringify(y)+":"+m)}return o.splice(h,1),"{"+d+"}"}(e)}function jse(e){if(e===null)return null;const t=[];for(const i of e)i&&i.arcadeDeclaredClass&&i.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(i.geometry()):t.push(i);return t}function Ep(e,t){if(!(t instanceof le))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function zse(e,t){if(gn(e)||xc(e)){let i=!1,r=!1,n=[],o=t;if(gn(e)){for(const s of e)Ep(n,s);n.length>0&&(o=e[0].spatialReference,i=e[0].hasZ,r=e[0].hasM)}else if(e instanceof Oc)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else{if(!xc(e))throw new Error("Invalid Argument");for(const s of e.toArray())Ep(n,s);n.length>0&&(o=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return n.length===0?null:(UA(n,r,i)===!1&&(n=n.slice(0).reverse()),new mr({rings:[n],spatialReference:o,hasZ:i,hasM:r}))}return e}function Hse(e,t){if(gn(e)||xc(e)){let i=!1,r=!1,n=[],o=t;if(gn(e)){for(const s of e)Ep(n,s);n.length>0&&(o=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof Oc)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(xc(e)){for(const s of e.toArray())Ep(n,s);n.length>0&&(o=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return n.length===0?null:new Hi({paths:[n],spatialReference:o,hasZ:i,hasM:r})}return e}function Gse(e,t){if(gn(e)||xc(e)){let i=!1,r=!1,n=[],o=t;if(gn(e)){for(const s of e)Ep(n,s);n.length>0&&(o=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof Oc)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(xc(e)){for(const s of e.toArray())Ep(n,s);n.length>0&&(o=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return n.length===0?null:new Bp({points:n,spatialReference:o,hasZ:i,hasM:r})}return e}function Wse(e,t=!1){const i=[];if(e===null)return i;if(gn(e)===!0){for(let r=0;r<e.length;r++){const n=Tl(e[r]);n===""&&t!==!0||i.push(n)}return i}if(e instanceof ns){for(let r=0;r<e.length();r++){const n=Tl(e.get(r));n===""&&t!==!0||i.push(n)}return i}if(Z1(e)){const r=Tl(e);return r===""&&t!==!0||i.push(r),i}return[]}let Fb=0;function qse(e){return Fb++,Fb%100==0?(Fb=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function Yse(e,t,i){switch(i){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function Py(e,t=null){return e==null?null:Ui(e)||Vi(e)||ui(e)?e:e instanceof fr?(t==null?void 0:t.keepGeometryType)===!0?e:e.toJSON():e instanceof ns?e.toArray().map(i=>Py(i,t)):e instanceof Array?e.map(i=>Py(i,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}async function Kse(e,t,i,r,n){const o=await l3(e,t,i);n[r]=o}async function l3(e,t=null,i=null){if(e instanceof ns&&(e=e.toArray()),e==null)return null;if(Z1(e)||e instanceof fr||e instanceof Date)return Py(e,i);if(e instanceof Array){const r=[],n=[];for(const o of e)o===null||Z1(o)||o instanceof fr||o instanceof Date?n.push(Py(o,i)):(n.push(null),r.push(Kse(o,t,i,n.length-1,n)));return r.length>0&&await Promise.all(r),n}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,i):null}function Zse(e,t,i){const r=e.fullSchema();return r===null||!r.fields?null:gw(t,r,e,i)}function Jse(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(i=>({name:i.name,code:i.id})):[]}:null}function Xse(e,t,i,r){const n=e.fullSchema();if(n===null||!n.fields)return null;const o=gw(t,n,e,r);if(i===void 0)try{i=e.field(t)}catch{return null}return P8(o,i)}function Qse(e,t,i,r){const n=e.fullSchema();if(n===null||!n.fields)return null;if(i===void 0){try{i=e.field(t)}catch{return null}return i}return $8(gw(t,n,e,r),i)}function eae(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const i=[];for(const r of t.fields)i.push(bse(r));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:XN[t.geometryType]===void 0?"":XN[t.geometryType],fields:i}}const Ive=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:C8,ImplicitResultE:I8,NativeFunctionE:n3,SizzleFunctionE:o3,NativeFunction:_se,ImplicitResult:Sse,ReturnResult:Tse,SizzleFunction:Ese,voidOperation:$r,breakResult:Ase,continueResult:xse,multiReplace:Ry,isFunctionParameter:s3,isSimpleType:Z1,defaultUndefined:Cse,isString:ui,isBoolean:Ui,isNumber:Vi,isInteger:Ise,isArray:gn,isFeature:Mse,isFeatureSet:Nse,isFeatureSetCollection:Rse,isImmutableArray:xc,isDate:Ai,pcCheck:Pse,absRound:$se,generateUUID:Dse,formatNumber:a3,formatDate:mw,standardiseDateFormat:M8,greaterThanLessThan:Lse,equalityTest:N8,toString:Tl,toNumberArray:Ose,toStringExplicit:wg,toNumber:mt,toDate:kse,toDateTime:Fse,toBoolean:Bse,fixSpatialReference:Use,fixNullGeometry:Vse,getDomainValue:P8,getDomainCode:$8,getDomain:gw,stableStringify:ST,autoCastFeatureToGeometry:jse,autoCastArrayOfPointsToPolygon:zse,autoCastArrayOfPointsToPolyline:Hse,autoCastArrayOfPointsToMultiPoint:Gse,toStringArray:Wse,tick:qse,binaryOperator:Yse,castAsJson:Py,castAsJsonAsync:l3,featureFullDomain:Zse,featureSubtypes:Jse,featureDomainValueLookup:Xse,featureDomainCodeLookup:Qse,featureSchema:eae},Symbol.toStringTag,{value:"Module"}));var TT;let yf=TT=class extends V{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new TT({minValue:this.minValue,maxValue:this.maxValue})}};l([c({type:Number,json:{write:!0}})],yf.prototype,"minValue",void 0),l([c({type:Number,json:{write:!0}})],yf.prototype,"maxValue",void 0),yf=TT=l([S("esri.renderer.support.AuthoringInfoClassBreakInfo")],yf);var ET;let sl=ET=class extends V{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new ET({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:P(this.classBreakInfos)})}};l([c({type:String,json:{write:!0}})],sl.prototype,"field",void 0),l([c({type:String,json:{write:!0}})],sl.prototype,"normalizationField",void 0),l([c({type:String,json:{write:!0}})],sl.prototype,"label",void 0),l([c({type:[yf],json:{write:!0}})],sl.prototype,"classBreakInfos",void 0),sl=ET=l([S("esri.renderers.support.AuthoringInfoFieldInfo")],sl);var AT;const e0=new Se({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),t0=new Se({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),eR={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},tR=["high-to-low","above-and-below","centered-on","extremes"],iR=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],rR=["seconds","minutes","hours","days","months","years"];let nr=AT=class extends V{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new AT({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};l([c({types:eR,json:{write:!0}})],nr.prototype,"endTime",void 0),l([Fe("endTime")],nr.prototype,"castEndTime",null),l([c({type:String,json:{write:!0}})],nr.prototype,"field",void 0),l([c({type:Number,json:{write:!0}})],nr.prototype,"maxSliderValue",void 0),l([c({type:Number,json:{write:!0}})],nr.prototype,"minSliderValue",void 0),l([c({types:eR,json:{write:!0}})],nr.prototype,"startTime",void 0),l([Fe("startTime")],nr.prototype,"castStartTime",null),l([c({type:e0.apiValues,value:null,json:{type:e0.jsonValues,read:e0.read,write:e0.write}})],nr.prototype,"style",null),l([c({type:iR,value:null,json:{type:iR,origins:{"web-scene":{type:tR,write:{writer:(e,t)=>{tR.includes(e)&&(t.theme=e)}}}},write:!0}})],nr.prototype,"theme",null),l([c({type:t0.apiValues,json:{type:t0.jsonValues,read:t0.read,write:t0.write}})],nr.prototype,"type",void 0),l([c({type:rR,json:{type:rR,write:!0}})],nr.prototype,"units",void 0),nr=AT=l([S("esri.renderers.support.AuthoringInfoVisualVariable")],nr);const tae=nr;let bg=class extends V{constructor(e){super(e),this.type=null}};l([c({readOnly:!0,json:{read:!1,write:!0}})],bg.prototype,"type",void 0),bg=l([S("esri.rest.support.ColorRamp")],bg);const u3=bg;var xT;let yu=xT=class extends u3{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new xT({fromColor:P(this.fromColor),toColor:P(this.toColor),algorithm:this.algorithm})}};l([pe({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],yu.prototype,"algorithm",void 0),l([c({type:ie,json:{type:[Qe],write:!0}})],yu.prototype,"fromColor",void 0),l([c({type:ie,json:{type:[Qe],write:!0}})],yu.prototype,"toColor",void 0),l([c({type:["algorithmic"]})],yu.prototype,"type",void 0),yu=xT=l([S("esri.rest.support.AlgorithmicColorRamp")],yu);const c3=yu;var CT;let mf=CT=class extends u3{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new CT({colorRamps:P(this.colorRamps)})}};l([c({type:[c3],json:{write:!0}})],mf.prototype,"colorRamps",void 0),l([c({type:["multipart"]})],mf.prototype,"type",void 0),mf=CT=l([S("esri.rest.support.MultipartColorRamp")],mf);const D8=mf,iae={key:"type",base:u3,typeMap:{algorithmic:c3,multipart:D8}};function rae(e){return e&&e.type?e.type==="algorithmic"?c3.fromJSON(e):e.type==="multipart"?D8.fromJSON(e):null:null}var IT;const zl=new Se({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),i0=new Se({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),nR=new Se({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),oR=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],nae=["high-to-low","above-and-below","above","below","90-10"],oae=["flow-line","wave-front"],sae=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Mt=IT=class extends V{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return rae(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new IT({classificationMethod:this.classificationMethod,colorRamp:P(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:P(this.field1),field2:P(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};l([c({type:zl.apiValues,value:null,json:{type:zl.jsonValues,read:zl.read,write:zl.write,origins:{"web-document":{default:"manual",type:zl.jsonValues,read:zl.read,write:zl.write}}}})],Mt.prototype,"classificationMethod",null),l([c({types:iae,json:{write:!0}})],Mt.prototype,"colorRamp",void 0),l([K("colorRamp")],Mt.prototype,"readColorRamp",null),l([c({type:[String],value:null,json:{write:!0}})],Mt.prototype,"fields",null),l([c({type:sl,value:null,json:{write:!0}})],Mt.prototype,"field1",null),l([c({type:sl,value:null,json:{write:!0}})],Mt.prototype,"field2",null),l([c({type:oae,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Mt.prototype,"flowTheme",null),l([c({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Mt.prototype,"focus",null),l([c({type:Number,value:null,json:{type:Qe,write:!0}})],Mt.prototype,"numClasses",null),l([c({type:oR,json:{type:oR,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Mt.prototype,"lengthUnit",void 0),l([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Mt.prototype,"maxSliderValue",void 0),l([c({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Mt.prototype,"minSliderValue",void 0),l([c({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Mt.prototype,"statistics",null),l([c({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Mt.prototype,"standardDeviationInterval",null),l([c({type:i0.apiValues,value:null,json:{type:i0.jsonValues,read:i0.read,write:i0.write,origins:{"web-scene":{type:nR.jsonValues,write:{writer:nR.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Mt.prototype,"type",null),l([c({type:[tae],json:{write:!0}})],Mt.prototype,"visualVariables",void 0),l([c({type:sae,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Mt.prototype,"univariateSymbolStyle",null),l([c({type:nae,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Mt.prototype,"univariateTheme",null),Mt=IT=l([S("esri.renderers.support.AuthoringInfo")],Mt);const L8=Mt,Bb=new Se({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let gf=class extends V{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};l([c({type:L8,json:{write:!0}})],gf.prototype,"authoringInfo",void 0),l([c({type:Bb.apiValues,readOnly:!0,json:{type:Bb.jsonValues,read:!1,write:{writer:Bb.write,ignoreOrigin:!0}}})],gf.prototype,"type",void 0),gf=l([S("esri.renderers.Renderer")],gf);const sa=gf;var MT;let rp=MT=class extends V{constructor(){super(...arguments),this.title=null}clone(){return new MT({title:this.title})}};l([c({type:String,json:{write:!0}})],rp.prototype,"title",void 0),rp=MT=l([S("esri.renderers.support.LegendOptions")],rp);var NT;let _g=NT=class extends rp{constructor(){super(...arguments),this.showLegend=null}clone(){return new NT({title:this.title,showLegend:this.showLegend})}};l([c({type:Boolean,json:{write:!0}})],_g.prototype,"showLegend",void 0),_g=NT=l([S("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],_g);const O8=_g,aae=W.getLogger("esri.renderers.visualVariables.VisualVariable"),Ub=new Se({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Bn=class extends V{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(aae.error(".field: field must be a string value"),null):Wy(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};l([c()],Bn.prototype,"index",void 0),l([c({type:Ub.apiValues,readOnly:!0,json:{read:Ub.read,write:Ub.write}})],Bn.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Bn.prototype,"field",void 0),l([Fe("field")],Bn.prototype,"castField",null),l([c({type:String,json:{write:!0}})],Bn.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],Bn.prototype,"valueExpressionTitle",void 0),l([c({readOnly:!0})],Bn.prototype,"arcadeRequired",null),l([c({type:O8,json:{write:!0}})],Bn.prototype,"legendOptions",void 0),Bn=l([S("esri.renderers.visualVariables.VisualVariable")],Bn);const dm=Bn;var RT;let mu=RT=class extends dm{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new RT({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([c({readOnly:!0})],mu.prototype,"cache",null),l([c({type:["color"],json:{type:["colorInfo"]}})],mu.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],mu.prototype,"normalizationField",void 0),l([c({type:[Mte],json:{write:!0}})],mu.prototype,"stops",null),mu=RT=l([S("esri.renderers.visualVariables.ColorVariable")],mu);const k8=mu;var PT;let Ba=PT=class extends V{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return py(t.transparency)}writeOpacity(e,t,i){t[i]=Uv(e)}clone(){return new PT({label:this.label,opacity:this.opacity,value:this.value})}};l([c({type:String,json:{write:!0}})],Ba.prototype,"label",void 0),l([c({type:Number,json:{type:Qe,write:{target:"transparency"}}})],Ba.prototype,"opacity",void 0),l([K("opacity",["transparency"])],Ba.prototype,"readOpacity",null),l([X("opacity")],Ba.prototype,"writeOpacity",null),l([c({type:Number,json:{write:!0}})],Ba.prototype,"value",void 0),Ba=PT=l([S("esri.renderers.visualVariables.support.OpacityStop")],Ba);const lae=Ba;var $T;let gu=$T=class extends dm{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new $T({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([c({readOnly:!0})],gu.prototype,"cache",null),l([c({type:["opacity"],json:{type:["transparencyInfo"]}})],gu.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],gu.prototype,"normalizationField",void 0),l([c({type:[lae],json:{write:!0}})],gu.prototype,"stops",null),gu=$T=l([S("esri.renderers.visualVariables.OpacityVariable")],gu);const F8=gu;var DT;let Es=DT=class extends dm{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const n=`visualVariables[${this.index}]`;r.messages.push(new N("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:r}))}}clone(){return new DT({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};l([c({readOnly:!0})],Es.prototype,"cache",null),l([c({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Es.prototype,"axis",void 0),l([c({type:["rotation"],json:{type:["rotationInfo"]}})],Es.prototype,"type",void 0),l([c({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Es.prototype,"rotationType",void 0),l([c({type:String,json:{write:!0}})],Es.prototype,"valueExpressionTitle",void 0),l([X("web-scene","valueExpressionTitle")],Es.prototype,"writeValueExpressionTitleWebScene",null),Es=DT=l([S("esri.renderers.visualVariables.RotationVariable")],Es);const B8=Es;var LT;let hd=LT=class extends V{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new LT({label:this.label,size:this.size,value:this.value})}};l([c({type:String,json:{write:!0}})],hd.prototype,"label",void 0),l([c({type:Number,cast:je,json:{write:!0}})],hd.prototype,"size",void 0),l([c({type:Number,json:{write:!0}})],hd.prototype,"value",void 0),hd=LT=l([S("esri.renderers.visualVariables.support.SizeStop")],hd);const uae=hd;var OT;let Sg=OT=class extends O8{constructor(){super(...arguments),this.customValues=null}clone(){return new OT({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};l([c({type:[Number],json:{write:!0}})],Sg.prototype,"customValues",void 0),Sg=OT=l([S("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Sg);const cae=Sg;var Ys,Yt;function Bd(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function $y(e){return e!=null&&!isNaN(e)&&isFinite(e)}function U8(e){return e.valueExpression?Ys.Expression:e.field&&typeof e.field=="string"?Ys.Field:Ys.Unknown}function dae(e,t){const i=t||U8(e),r=e.valueUnit||"unknown";return i===Ys.Unknown?Yt.Constant:e.stops?Yt.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Yt.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Yt.Proportional:Yt.Additive:Yt.Identity:Yt.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Ys||(Ys={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Yt||(Yt={}));const V8={inches:Xr(1,"meters","inches"),feet:Xr(1,"meters","feet"),"us-feet":Xr(1,"meters","us-feet"),yards:Xr(1,"meters","yards"),miles:Xr(1,"meters","miles"),"nautical-miles":Xr(1,"meters","nautical-miles"),millimeters:Xr(1,"meters","millimeters"),centimeters:Xr(1,"meters","centimeters"),decimeters:Xr(1,"meters","decimeters"),meters:Xr(1,"meters","meters"),kilometers:Xr(1,"meters","kilometers"),"decimal-degrees":1/bZ(1,"meters",nt.radius)},Dl=W.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),sR=new Pi,Tg=Math.PI,j8=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function z8(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Dl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof t=="number",o=n?null:t,s=o&&o.attributes;let a=n?t:null;const u=r.field,{ipData:d,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!u&&!h){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if(O(i)||O(i.arcade))return void Dl.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,w=v.getViewInfo(g),_=v.createExecContext(o,w);if(!f){const A=v.createSyntaxTree(r.valueExpression);f=v.createFunction(A),r.cache.compiledFunc=f}a=v.executeFunction(f,_)}else s&&(a=s[u]);const y=r.normalizationField,m=s?parseFloat(s[y]):void 0;if(a!=null&&(!y||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=d3(a,d);if(g){const v=g[0],w=g[1],_=v===w?r.stops[v].color:ie.blendColors(r.stops[v].color,r.stops[w].color,g[2],T(i)?i.color:void 0);return new ie(_)}}}function H8(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Dl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof t=="number",o=n?null:t,s=o&&o.attributes;let a=n?t:null;const u=r.field,{ipData:d,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!u&&!h){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if(O(i)||O(i.arcade))return void Dl.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,w=v.getViewInfo(g),_=v.createExecContext(o,w);if(!f){const A=v.createSyntaxTree(r.valueExpression);f=v.createFunction(A),r.cache.compiledFunc=f}a=v.executeFunction(f,_)}else s&&(a=s[u]);const y=r.normalizationField,m=s?parseFloat(s[y]):void 0;if(a!=null&&(!y||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=d3(a,d);if(g){const v=g[0],w=g[1];if(v===w)return r.stops[v].opacity;{const _=r.stops[v].opacity;return _+(r.stops[w].opacity-_)*g[2]}}}}function G8(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Dl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",o=n==="heading"&&r.rotationType==="arithmetic"?90:0,s=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,u=a&&a.attributes,d=r.field,{hasExpression:h}=r.cache;let f=r.cache.compiledFunc,y=0;if(!d&&!h)return y;if(h){if(O(i)||O(i.arcade))return void Dl.error("Use of arcade expressions requires an arcade context");const m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,v=g.getViewInfo(m),w=g.createExecContext(a,v);if(!f){const _=g.createSyntaxTree(r.valueExpression);f=g.createFunction(_),r.cache.compiledFunc=f}y=g.executeFunction(f,w)}else u&&(y=u[d]||0);return y=typeof y!="number"||isNaN(y)?null:o+s*y,y}function pae(e,t,i){const r=typeof t=="number",n=r?null:t,o=n&&n.attributes;let s=r?t:null;const{isScaleDriven:a}=e.cache;let u=e.cache.compiledFunc;if(a){const h=T(i)?i.scale:void 0,f=T(i)?i.view:void 0;s=h==null||f==="3d"?hae(e):h}else if(!r)switch(e.inputValueType){case Ys.Expression:{if(O(i)||O(i.arcade))return void Dl.error("Use of arcade expressions requires an arcade context");const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},f=i.arcade.arcadeUtils,y=f.getViewInfo(h),m=f.createExecContext(n,y);if(!u){const g=f.createSyntaxTree(e.valueExpression);u=f.createFunction(g),e.cache.compiledFunc=u}s=f.executeFunction(u,m);break}case Ys.Field:o&&(s=o[e.field]);break;case Ys.Unknown:s=null}if(!$y(s))return null;if(r||!e.normalizationField)return s;const d=o?parseFloat(o[e.normalizationField]):null;return $y(d)&&d!==0?s/d:null}function hae(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function vw(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(o=>o.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Dl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=q8(pae(r,t,i),r,t,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function pr(e,t,i){return e==null?null:Bd(e)?vw(e,t,i):$y(e)?e:null}function W8(e,t,i){return $y(i)&&e>i?i:$y(t)&&e<t?t:e}function fae(e,t,i,r){return e+(pr(t.minSize,i,r)||t.minDataValue)}function yae(e,t,i){const r=e.stops;let n=r&&r.length&&r[0].size;return n==null&&(n=e.minSize),pr(n,t,i)}function mae(e,t,i,r){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=pr(t.minSize,i,r),s=pr(t.maxSize,i,r),a=T(r)?r.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return s;if(t.scaleBy==="area"&&a){const u=a==="circle",d=u?Tg*(o/2)**2:o*o,h=d+n*((u?Tg*(s/2)**2:s*s)-d);return u?2*Math.sqrt(h/Tg):Math.sqrt(h)}return o+n*(s-o)}function gae(e,t,i,r){const n=T(r)?r.shape:void 0,o=e/t.minDataValue,s=pr(t.minSize,i,r),a=pr(t.maxSize,i,r);let u=null;return u=n==="circle"?2*Math.sqrt(o*(s/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(o*s**2):o*s,W8(u,s,a)}function vae(e,t,i,r,n){const[o,s,a]=d3(e,n);if(o===s)return pr(t.stops[o].size,i,r);{const u=pr(t.stops[o].size,i,r);return u+(pr(t.stops[s].size,i,r)-u)*a}}function wae(e,t,i,r){const n=(T(r)&&r.resolution?r.resolution:1)*V8[t.valueUnit],o=pr(t.minSize,i,r),s=pr(t.maxSize,i,r),{valueRepresentation:a}=t;let u=null;return u=a==="area"?2*Math.sqrt(e/Tg)/n:a==="radius"||a==="distance"?2*e/n:e/n,W8(u,o,s)}function q8(e,t,i,r,n){switch(t.transformationType){case Yt.Additive:return fae(e,t,i,r);case Yt.Constant:return yae(t,i,r);case Yt.ClampedLinear:return mae(e,t,i,r);case Yt.Proportional:return gae(e,t,i,r);case Yt.Stops:return vae(e,t,i,r,n);case Yt.RealWorldSize:return wae(e,t,i,r);case Yt.Identity:return e;case Yt.Unknown:return null}}function bae(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const n={scale:t,view:i};let o=pr(e.minSize,sR,n),s=pr(e.maxSize,sR,n);if(o!=null||s!=null){if(o>s){const a=s;s=o,o=a}return{minSize:o,maxSize:s}}}function _ae(e,t,i){if(!e.visualVariables)return;const r=[],n=[],o=[],s=[],a=[];for(const u of e.visualVariables)switch(u.type){case"color":n.push(u);break;case"opacity":o.push(u);break;case"rotation":a.push(u);break;case"size":s.push(u)}return n.forEach(u=>{const d=z8(u,t,i);r.push({variable:u,value:d})}),o.forEach(u=>{const d=H8(u,t,i);r.push({variable:u,value:d})}),a.forEach(u=>{const d=G8(u,t,i);r.push({variable:u,value:d})}),s.forEach(u=>{const d=vw(u,t,i);r.push({variable:u,value:d})}),r.filter(u=>u.value!=null)}function d3(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((n,o)=>e<n?(r=o,!0):(i=o,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function Sae(e,t,i){const r=["proportional","proportional","proportional"];for(const n of e){const o=n.useSymbolValue?"symbol-value":vw(n,t,i);switch(n.axis){case"width":r[0]=o;break;case"depth":r[1]=o;break;case"height":r[2]=o;break;case"width-and-depth":r[0]=o,r[1]=o;break;case"all":case void 0:case null:r[0]=o,r[1]=o,r[2]=o;break;default:n.axis}}return r}const p3=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Sae,getColor:z8,getOpacity:H8,getRotationAngle:G8,getSize:vw,getSizeForValue:q8,getSizeFromNumberOrVariable:pr,getSizeRangeAtScale:bae,getVisualVariableValues:_ae,viewScaleRE:j8},Symbol.toStringTag,{value:"Module"}));var kT;const jc=W.getLogger("esri.renderers.visualVariables.SizeVariable"),r0=new Se({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),FT=new Se({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function aR(e){if(e!=null)return typeof e=="string"||typeof e=="number"?je(e):e.type==="size"?Bd(e)?e:(delete(e={...e}).type,new He(e)):void 0}function lR(e,t,i){if(typeof e!="object")return e;const r=new He;return r.read(e,i),r}let He=kT=class extends dm{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:j8.test(this.valueExpression)}}set expression(e){jc.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){Bd(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Bd(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return U8(this)}set maxDataValue(e){e&&this.stops&&(jc.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(jc.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return aR(e)}readMaxSize(e,t,i){return lR(e,t,i)}set minDataValue(e){e&&this.stops&&(jc.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(jc.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return aR(e)}readMinSize(e,t,i){return lR(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(jc.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return dae(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const n=this.index,o=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new N("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:o+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?FT.read(e):null}clone(){return new kT({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Bd(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Bd(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Yt.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Yt.Stops){const e=this.stops,t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([c({readOnly:!0})],He.prototype,"cache",null),l([c({type:r0.apiValues,json:{type:r0.jsonValues,origins:{"web-map":{read:!1}},read:r0.read,write:r0.write}})],He.prototype,"axis",void 0),l([c({type:String,value:null,json:{read:!1}})],He.prototype,"expression",null),l([c()],He.prototype,"index",null),l([c({type:String,readOnly:!0})],He.prototype,"inputValueType",null),l([c({type:cae,json:{write:!0}})],He.prototype,"legendOptions",void 0),l([c({type:Number,value:null,json:{write:!0}})],He.prototype,"maxDataValue",null),l([c({type:Number,value:null,json:{write:!0}})],He.prototype,"maxSize",null),l([Fe("maxSize")],He.prototype,"castMaxSize",null),l([K("maxSize")],He.prototype,"readMaxSize",null),l([c({type:Number,value:null,json:{write:!0}})],He.prototype,"minDataValue",null),l([c({type:Number,value:null,json:{write:!0}})],He.prototype,"minSize",null),l([Fe("minSize")],He.prototype,"castMinSize",null),l([K("minSize")],He.prototype,"readMinSize",null),l([c({type:String,json:{write:!0}})],He.prototype,"normalizationField",void 0),l([c({readOnly:!0})],He.prototype,"arcadeRequired",null),l([c({type:String})],He.prototype,"scaleBy",void 0),l([c({type:[uae],value:null,json:{write:!0}})],He.prototype,"stops",null),l([c({type:["outline"],json:{write:!0}})],He.prototype,"target",void 0),l([c({type:String,readOnly:!0})],He.prototype,"transformationType",null),l([c({type:["size"],json:{type:["sizeInfo"]}})],He.prototype,"type",void 0),l([c({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],He.prototype,"useSymbolValue",void 0),l([c({type:String,json:{write:!0}})],He.prototype,"valueExpression",void 0),l([K("valueExpression",["valueExpression","expression"])],He.prototype,"readValueExpression",null),l([X("web-scene","valueExpression")],He.prototype,"writeValueExpressionWebScene",null),l([c({type:["radius","diameter","area","width","distance"],json:{write:!0}})],He.prototype,"valueRepresentation",void 0),l([c({type:FT.apiValues,json:{write:FT.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],He.prototype,"valueUnit",void 0),l([K("valueUnit")],He.prototype,"readValueUnit",null),He=kT=l([S("esri.renderers.visualVariables.SizeVariable")],He);const Y8=He,Tae=W.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),Eae={color:k8,size:Y8,opacity:F8,rotation:B8},Aae=new Se({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),xae=/^\[([^\]]+)\]$/i;let Eg=class extends se{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let r=null;return r=t.target===i.target?0:t.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:n}=t,o=r&&r.match(xae),s=o&&o[1];if(s&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:s})),e)return e.map(a=>{const u=Aae.read(a.type),d=Eae[u];d||(Tae.warn(`Unknown variable type: ${u}`),i&&i.messages&&i.messages.push(new Zi("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:a,context:i})));const h=new d;return h.read(a,i),h})}writeVariables(e,t){const i=[];for(const r of e){const n=r.toJSON(t);n&&i.push(n)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};l([c()],Eg.prototype,"visualVariables",null),Eg=l([S("esri.renderers.visualVariables.VisualVariableFactory")],Eg);const Cae=Eg,Iae={base:dm,key:"type",typeMap:{opacity:F8,color:k8,rotation:B8,size:Y8}},ih=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Cae}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,o){r[n]=this._vvFactory.writeVariables(i,o)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(o=>o.type===i&&(typeof r=="string"?o.target===r:r!==!1||!o.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const o of n)o&&(o.field&&pn(i,r,o.field),o.normalizationField&&pn(i,r,o.normalizationField),o.valueExpression&&await Xi(i,r,o.valueExpression))}};return l([c({types:[Iae],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),l([K("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),l([X("visualVariables")],t.prototype,"writeVisualVariables",null),t=l([S("esri.renderers.mixins.VisualVariablesMixin")],t),t},Eh={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Mae(e,t=Eh){var a,u;if(!e)return{symbol:null};const{retainId:i=Eh.retainId,ignoreDrivers:r=Eh.ignoreDrivers,hasLabelingContext:n=Eh.hasLabelingContext,retainCIM:o=Eh.retainCIM}=t;let s;if(wp(e)||e instanceof Dc)s=e.clone();else if(e.type==="cim"){const d=(u=(a=e.data)==null?void 0:a.symbol)==null?void 0:u.type;if(d!=="CIMPointSymbol")return{error:new N("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${d||"unknown"}' is unsupported in 3D`,{symbol:e})};s=o?e.clone():Gu.fromCIMSymbol(e)}else if(e instanceof Ur)s=Yv.fromSimpleLineSymbol(e);else if(e instanceof Fl)s=Gu.fromSimpleMarkerSymbol(e);else if(e instanceof Qy)s=Gu.fromPictureMarkerSymbol(e);else if(e instanceof na)s=em.fromSimpleFillSymbol(e);else{if(!(e instanceof $c))return{error:new N("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};s=n?qv.fromTextSymbol(e):Gu.fromTextSymbol(e)}if(i&&s.type!=="cim"&&(s.id=e.id),r&&wp(s))for(let d=0;d<s.symbolLayers.length;++d)s.symbolLayers.getItemAt(d)._ignoreDrivers=!0;return{symbol:s}}const Nae=["building-scene","integrated-mesh","point-cloud","scene"];function X1(e,t,i,r){const n=K8(e,{},{context:r,isLabelSymbol:!1});T(n)&&(t[i]=n)}function uR(e,t,i,r){const n=K8(e,{},{context:r,isLabelSymbol:!0});T(n)&&(t[i]=n)}function cR(e){return e instanceof Hp||e instanceof Dc}function K8(e,t,i){var a;if(O(e))return null;const{context:r,isLabelSymbol:n}=i,o=r==null?void 0:r.origin,s=r==null?void 0:r.messages;if(o==="web-scene"&&!cR(e)){const u=Mae(e,{retainCIM:!0,hasLabelingContext:n});return T(u.symbol)?u.symbol.write(t,r):(s==null||s.push(new N("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:u.error})),null)}return(o==="web-map"||o==="portal-item"&&!Nae.includes((a=r==null?void 0:r.layer)==null?void 0:a.type))&&cR(e)?(s==null||s.push(new N("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function Mve(e,t){return RK(e,null,t)}const pm={types:Y9,json:{write:{writer:X1},origins:{"web-scene":{types:BI,write:{writer:X1},read:{reader:Op({types:BI})}}}}},Z8={types:{base:vr,key:"type",typeMap:{"simple-fill":ac.typeMap["simple-fill"],"picture-fill":ac.typeMap["picture-fill"],"polygon-3d":ac.typeMap["polygon-3d"]}},json:{write:{writer:X1},origins:{"web-scene":{type:em,write:{writer:X1}}}}};var BT;let Ua=BT=class extends V{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new BT({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};l([c({type:String,json:{write:!0}})],Ua.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],Ua.prototype,"label",void 0),l([c({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Ua.prototype,"minValue",void 0),l([c({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Ua.prototype,"maxValue",void 0),l([c(pm)],Ua.prototype,"symbol",void 0),Ua=BT=l([S("esri.renderers.support.ClassBreakInfo")],Ua);const Q1=Ua;var UT;const n0=W.getLogger("esri.renderers.ClassBreaksRenderer"),J8="log",Ag="percent-of-total",xg="field",o0=new Se({esriNormalizeByLog:J8,esriNormalizeByPercentOfTotal:Ag,esriNormalizeByField:xg}),Rae=Ze(Q1);let Ot=UT=class extends ih(sa){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(n=>{const o=new Q1;return o.read(n,i),o.minValue==null&&(o.minValue=r),o.maxValue==null&&(o.maxValue=o.minValue),r=o.maxValue,o})}writeClassBreakInfos(e,t,i,r){const n=e.map(o=>o.write({},r));this._areClassBreaksConsecutive()&&n.forEach(o=>delete o.classMinValue),t[i]=n}castField(e){return e==null?e:typeof e=="function"?(n0.error(".field: field must be a string value"),null):Wy(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&xg||i&&Ag||null,t&&i&&n0.warn("warning: both normalizationField and normalizationTotal are set!")):e!==xg&&e!==Ag||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new Q1({minValue:e,maxValue:t,symbol:K9(i)}):Rae(P(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(O(t)||O(t.arcade))&&n0.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(O(t)||O(t.arcade))&&(i={...i,arcade:await Qs()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(O(t)||O(t.arcade)))return void n0.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(O(t)||O(t.arcade))){const n=await Qs(),{arcadeUtils:o}=n;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new UT({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:P(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:P(this.visualVariables),legendOptions:P(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Xi(e,t,this.valueExpression)];pn(e,t,this.field),pn(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o}=bv(t,{});let s=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const a=o.arcadeUtils;if(!s){const d=a.createSyntaxTree(this.valueExpression);s=a.createFunction(d),this._compiledValueExpression.compiledFunction=s}this._compiledValueExpression.valueExpression=this.valueExpression;const u=a.executeFunction(s,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let n=parseFloat(i[t]);if(r){const o=this.normalizationTotal,s=parseFloat(i[this.normalizationField]);if(r===J8)n=Math.log(n)*Math.LOG10E;else if(r!==Ag||isNaN(o)){if(r===xg&&!isNaN(s)){if(isNaN(n)||isNaN(s))return-1;n/=s}}else n=n/o*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};l([c(Z8)],Ot.prototype,"backgroundFillSymbol",void 0),l([c({type:[Q1]})],Ot.prototype,"classBreakInfos",void 0),l([K("classBreakInfos")],Ot.prototype,"readClassBreakInfos",null),l([X("classBreakInfos")],Ot.prototype,"writeClassBreakInfos",null),l([c({type:String,json:{write:!0}})],Ot.prototype,"defaultLabel",void 0),l([c(pm)],Ot.prototype,"defaultSymbol",void 0),l([c({type:String,json:{write:!0}})],Ot.prototype,"field",void 0),l([Fe("field")],Ot.prototype,"castField",null),l([c({type:Boolean})],Ot.prototype,"isMaxInclusive",void 0),l([c({type:rp,json:{write:!0}})],Ot.prototype,"legendOptions",void 0),l([c({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ot.prototype,"minValue",null),l([c({type:String,json:{write:!0}})],Ot.prototype,"normalizationField",void 0),l([c({type:Number,cast:e=>sn(e),json:{write:!0}})],Ot.prototype,"normalizationTotal",void 0),l([c({type:o0.apiValues,value:null,json:{type:o0.jsonValues,read:o0.read,write:o0.write}})],Ot.prototype,"normalizationType",null),l([pe({classBreaks:"class-breaks"})],Ot.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Ot.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],Ot.prototype,"valueExpressionTitle",void 0),Ot=UT=l([S("esri.renderers.ClassBreaksRenderer")],Ot);const X8=Ot;class Q8{constructor(t,i){this._storage=new z6,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const dR=W.getLogger("esri.renderers.support.DictionaryLoader"),Pae={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class h3{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Q8(100),this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(m){if(Ki(m))return this._dictionaryPromise=null,null}const n={};if(this.fieldMap)for(const m of this._symbolFields){const g=this.fieldMap[m];if(g&&t.attributes[g]!=null){const v=""+t.attributes[g];n[m]=v}else n[m]=""}const o=r(n,i);if(!o||typeof o!="string")return null;const s=lA(o).toString(),a=this._symbolCache.get(s);if(a)return a.catch(()=>{this._symbolCache.pop(s)}),a;const u=o.split(";"),d=[],h=[];for(const m of u)if(m)if(m.includes("po:")){const g=m.substr(3).split("|");if(g.length===3){const v=g[0],w=g[1];let _=g[2];if(w==="DashTemplate")_=_.split(" ").map(A=>Number(A));else if(w==="Color"){const A=new ie(_).toRgba();_=[A[0],A[1],A[2],255*A[3]]}else _=Number(_);h.push({primitiveName:v,propertyName:w,value:_})}}else if(m.includes("|")){for(const g of m.split("|"))if(this._itemNames.has(g)){d.push(g);break}}else this._itemNames.has(m)&&d.push(m);const f=!T(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",y=this._cimPartsToCIMSymbol(d,h,f,i);return this._symbolCache.put(s,y,1),y}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void dR.error("no valid URL!");const i=Be(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:T(t)?t.signal:null}),[{data:r}]=await Promise.all([i,Qs()]);if(!r)throw this._dictionaryPromise=null,new N("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=r.expression,o=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=o.symbol;const s={};if(this.config){const u=this.config;for(const d in u)s[d]=u[d]}if(o.configuration)for(const u of o.configuration)s.hasOwnProperty(u.name)||(s[u.name]=u.value);const a=[];if(T(t)&&t.fields&&this.fieldMap)for(const u of this._symbolFields){const d=this.fieldMap[u],h=t.fields.filter(f=>f.name===d);h.length>0&&a.push({...h[0],name:u})}return this._dictionaryPromise=Kq(n,T(t)?t.spatialReference:null,a,s).then(u=>{const d={scale:0};return(h,f)=>{const y=u.repurposeFeature({geometry:null,attributes:h});return d.scale=T(f)?f.scale:void 0,u.evaluate({$feature:y,$view:d})}}).catch(u=>(dR.error("Creating dictinoary expression failed:",u),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,i,r,n){const o=new Array(t.length);for(let u=0;u<t.length;u++)o[u]=this._getSymbolPart(t[u],n);const s=await Promise.all(o),a=this.fieldMap;for(const u of s)e7(u,a);return new Zy({data:this._combineSymbolParts(s,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),n=Be(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,n);try{return(await n).data}catch(o){throw this._ongoingRequests.delete(t),o}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const n={...t[0]};if(t.length>1){n.symbolLayers=[];for(const o of t){const s=o;n.symbolLayers.unshift(...s.symbolLayers)}}return r&&(n.callout=Pae),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:i}}}function e7(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const n=i[r];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&$ae(n,t)}}function $ae(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const n=r.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":e7(n,t);break;case"CIMTextSymbol":n.fieldMap=t}}}const Nve=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:h3},Symbol.toStringTag,{value:"Module"}));var VT;let Un=VT=class extends ih(sa){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new h3(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new VT({config:P(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:P(this.fieldMap),url:P(this.url),visualVariables:P(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Xi(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};l([c({type:h3})],Un.prototype,"_loader",null),l([c({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Un.prototype,"config",void 0),l([c({type:Object,json:{write:!0}})],Un.prototype,"fieldMap",void 0),l([c({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Un.prototype,"scaleExpression",void 0),l([X("scaleExpression")],Un.prototype,"writeData",null),l([c({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Un.prototype,"scaleExpressionTitle",void 0),l([c({type:String,json:{write:!0}})],Un.prototype,"url",void 0),l([X("visualVariables")],Un.prototype,"writeVisualVariables",null),Un=VT=l([S("esri.renderers.DictionaryRenderer")],Un);const Dae=Un;var jT;const Lae=W.getLogger("esri.renderers.support.AttributeColorInfo");let As=jT=class extends V{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Lae.error(".field: field must be a string value"),null):Wy(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new jT({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([c({type:ie,json:{type:[Number],write:!0}})],As.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],As.prototype,"field",void 0),l([Fe("field")],As.prototype,"castField",null),l([c({type:String,json:{write:!0}})],As.prototype,"label",void 0),l([c({type:String,json:{write:!0}})],As.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],As.prototype,"valueExpressionTitle",void 0),As=jT=l([S("esri.renderers.support.AttributeColorInfo")],As);const t7=As;var zT;let Cg=zT=class extends V{constructor(){super(...arguments),this.unit=null}clone(){return new zT({unit:this.unit})}};l([c({type:String,json:{write:!0}})],Cg.prototype,"unit",void 0),Cg=zT=l([S("esri.renderers.support.DotDensityLegendOptions")],Cg);const Oae=Cg;var HT;let Si=HT=class extends ih(sa){constructor(e){super(e),this.attributes=null,this.backgroundColor=new ie([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Ur,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new na({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new HT({attributes:P(this.attributes),backgroundColor:P(this.backgroundColor),dotBlendingEnabled:P(this.dotBlendingEnabled),dotShape:P(this.dotShape),dotSize:P(this.dotSize),dotValue:P(this.dotValue),legendOptions:P(this.legendOptions),outline:P(this.outline),referenceScale:P(this.referenceScale),visualVariables:P(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await Xi(e,t,i.valueExpression),i.field&&e.add(i.field)}};l([c({type:[t7],json:{write:!0}})],Si.prototype,"attributes",void 0),l([c({type:ie,json:{write:!0}})],Si.prototype,"backgroundColor",void 0),l([c({type:Boolean}),J("dotBlendingEnabled")],Si.prototype,"blendDots",void 0),l([c({type:Boolean,json:{write:!0}})],Si.prototype,"dotBlendingEnabled",void 0),l([c({type:String,json:{write:!1}})],Si.prototype,"dotShape",void 0),l([c({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],Si.prototype,"dotSize",void 0),l([c({type:Oae,json:{write:!0}})],Si.prototype,"legendOptions",void 0),l([c({type:Ur,json:{default:null,write:!0}})],Si.prototype,"outline",void 0),l([c({type:Number,json:{write:!0}})],Si.prototype,"dotValue",void 0),l([c({type:Number}),J("dotValue")],Si.prototype,"referenceDotValue",void 0),l([c({type:Number,json:{write:!0}})],Si.prototype,"referenceScale",void 0),l([c({type:Number,json:{write:!0}})],Si.prototype,"seed",void 0),l([pe({dotDensity:"dot-density"})],Si.prototype,"type",void 0),Si=HT=l([S("esri.renderers.DotDensityRenderer")],Si);const kae=Si;let fd=class extends wr(V){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};l([c({type:String,json:{write:!0}})],fd.prototype,"minLabel",void 0),l([c({type:String,json:{write:!0}})],fd.prototype,"maxLabel",void 0),l([c({type:String,json:{write:!0}})],fd.prototype,"title",void 0),fd=l([S("esri.renderers.support.HeatmapLegendOptions")],fd);function ww(){return[0,0,0,0]}function Fae(e){return[e[0],e[1],e[2],e[3]]}function rh(e,t,i,r){return[e,t,i,r]}function Bae(e){const t=ww(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Uae(e,t){return new Float64Array(e,t,4)}function i7(){return ww()}function r7(){return rh(1,1,1,1)}function n7(){return rh(1,0,0,0)}function o7(){return rh(0,1,0,0)}function s7(){return rh(0,0,1,0)}function a7(){return rh(0,0,0,1)}const Vae=i7(),jae=r7(),zae=n7(),Hae=o7(),Gae=s7(),Wae=a7();Object.freeze(Object.defineProperty({__proto__:null,create:ww,clone:Fae,fromValues:rh,fromArray:Bae,createView:Uae,zeros:i7,ones:r7,unitX:n7,unitY:o7,unitZ:s7,unitW:a7,ZEROS:Vae,ONES:jae,UNIT_X:zae,UNIT_Y:Hae,UNIT_Z:Gae,UNIT_W:Wae},Symbol.toStringTag,{value:"Module"}));const f3=2.4;function qae(e){return Xo(e*f3)}function Yae(e){return w9(e)/f3}function Kae(e,t,i,r){let{color:n,ratio:o}=t,{color:s,ratio:a}=i;a===o&&(a===1?o-=1e-6:a+=1e-6);const u=yr((r-o)/(a-o),0,1);CL(e,n.toArray(),s.toArray(),u)}function Rve(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,u)=>a.ratio-u.ratio).map(({color:a,ratio:u})=>({color:a,ratio:Math.max(u,.001)})),e.length<1)return i;let r=e[0],n=e[0],o=1;const s=ww();for(let a=0;a<512;a++){const u=(a+.5)/512;for(;u>n.ratio&&o<e.length;)r=n,n=e[o++];Kae(s,r,n,u),i.set(s,4*a)}return i}function Pve(e,t,i,r){const{radius:n,fieldOffset:o,field:s}=t,a=Math.round(w9(n)),u=new Float64Array(i*r);let d,h=Number.NEGATIVE_INFINITY;const f=Xae(s,o),y=new Set;for(const m of e){const g=m.getCursor();for(;g.next();){const v=g.getObjectId();if(y.has(v))continue;y.add(v);const w=g.readLegacyPointGeometry(),_=128;if(w.x<-_||w.x>=i+_||w.y<-_||w.y>r+_)continue;const A=+f(g),I=Math.max(0,Math.round(w.x)-a),D=Math.max(0,Math.round(w.y)-a),M=Math.min(r,Math.round(w.y)+a),R=Math.min(i,Math.round(w.x)+a);for(let B=D;B<M;B++)for(let j=I;j<R;j++){const Y=B*i+j,ee=Jae(w.x-j,w.y-B,a);d=u[Y]+=ee*A,d>h&&(h=d)}}}return{matrix:u.buffer,max:h}}function $ve(e,t,i,r,n,o){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const s=e.getImageData(0,0,t,t);i&&r&&s.data.set(new Uint8ClampedArray(Zae(t,i,r,n,o))),e.putImageData(s,0,0)}function Zae(e,t,i,r,n){const o=new Uint32Array(e*e),s="buffer"in t?t:new Float64Array(t),a="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),u=a.length/(n-r);for(let d=0;d<s.length;d++){const h=s[d],f=Math.floor((h-r)*u);o[d]=a[yr(f,0,a.length-1)]}return o.buffer}function Jae(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Dve(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function Xae(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var GT;const Qae=W.getLogger("esri.renderers.HeatmapRenderer");function pR(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:o,minPixelIntensity:s,...a}=e;return a}}return e}let qt=GT=class extends sa{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Hf({ratio:0,color:new ie("rgba(255, 140, 0, 0)")}),new Hf({ratio:.75,color:new ie("rgba(255, 140, 0, 1)")}),new Hf({ratio:.9,color:new ie("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return pR(e)}get blurRadius(){return Yae(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",qae(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(f3**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||Ni(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,Lp(()=>{N_(Qae,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=pR(e),super.read(e,t)}getSymbol(){const e=this.referenceScale!==0?5:1,t=Math.min(this.radius*e,Xo(256));return new Fl({size:t})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await pn(e,t,i),r&&typeof r=="string"&&await Xi(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new GT({colorStops:P(this.colorStops),field:this.field,legendOptions:P(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([c({type:L8,json:{write:!1}})],qt.prototype,"authoringInfo",void 0),l([c({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],qt.prototype,"blurRadius",null),l([c({type:[Hf],json:{write:!0}})],qt.prototype,"colorStops",void 0),l([c({type:String,json:{write:!0}})],qt.prototype,"field",void 0),l([c({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],qt.prototype,"fieldOffset",void 0),l([c({type:fd,json:{write:!0}})],qt.prototype,"legendOptions",void 0),l([c({type:Number,json:{write:!0}})],qt.prototype,"maxDensity",void 0),l([c({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],qt.prototype,"maxPixelIntensity",null),l([c({type:Number,json:{write:!0}})],qt.prototype,"minDensity",void 0),l([c({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],qt.prototype,"minPixelIntensity",null),l([c({type:Number,cast:je,json:{write:!0}})],qt.prototype,"radius",void 0),l([c({type:Number,range:{min:0},json:{default:0,write:!0}})],qt.prototype,"referenceScale",void 0),l([pe({heatmap:"heatmap"})],qt.prototype,"type",void 0),l([c({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],qt.prototype,"valueExpression",void 0),l([c({type:String})],qt.prototype,"valueExpressionTitle",void 0),l([c({readOnly:!0})],qt.prototype,"_pixelIntensityToDensity",null),qt=GT=l([S("esri.renderers.HeatmapRenderer")],qt);const l7=qt;let Lu=class extends wr(V){constructor(){super(...arguments),this.color=new ie([0,0,0,0]),this.label=null,this.threshold=0}};l([c({type:ie,json:{write:!0}})],Lu.prototype,"color",void 0),l([c({type:String,json:{write:!0}})],Lu.prototype,"label",void 0),l([c({type:Number,range:{min:0,max:1},json:{write:!0}})],Lu.prototype,"threshold",void 0),Lu=l([S("esri.renderers.support.OthersCategory")],Lu);let Ig=class extends wr(V){constructor(){super(...arguments),this.title=null}};l([c({type:String,json:{write:!0}})],Ig.prototype,"title",void 0),Ig=l([S("esri.renderers.support.PieChartLegendOptions")],Ig);let xr=class extends ih(wr(sa)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ie([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Lu,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new Fl({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await Xi(e,t,i.valueExpression),i.field&&e.add(i.field)}};l([c({type:[t7],json:{write:!0}})],xr.prototype,"attributes",void 0),l([c({type:na,json:{default:null,write:!0}})],xr.prototype,"backgroundFillSymbol",void 0),l([c({type:ie,json:{write:!0}})],xr.prototype,"defaultColor",void 0),l([c({type:String,json:{write:!0}})],xr.prototype,"defaultLabel",void 0),l([c({type:Number,range:{min:0,max:1},json:{write:!0}})],xr.prototype,"holePercentage",void 0),l([c({type:Lu,json:{write:!0}})],xr.prototype,"othersCategory",void 0),l([c({type:Ig,json:{write:!0}})],xr.prototype,"legendOptions",void 0),l([c({type:Ur,json:{default:null,write:!0}})],xr.prototype,"outline",void 0),l([c({type:Number,cast:je,json:{write:!0}})],xr.prototype,"size",void 0),l([pe({pieChart:"pie-chart"})],xr.prototype,"type",void 0),xr=l([S("esri.renderers.PieChartRenderer")],xr);const ele=xr;var WT;let vu=WT=class extends ih(sa){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new WT({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:P(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};l([c({type:String,json:{write:!0}})],vu.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],vu.prototype,"label",void 0),l([c(pm)],vu.prototype,"symbol",void 0),l([pe({simple:"simple"})],vu.prototype,"type",void 0),vu=WT=l([S("esri.renderers.SimpleRenderer")],vu);const y3=vu,tle=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function qT(e){return e instanceof se}function hR(e){return e instanceof he?Object.keys(e.items):qT(e)?Ni(e).keys():e?Object.keys(e):[]}function s0(e,t){return e instanceof he?e.items[t]:e[t]}function ile(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Zf(e){return e?e.declaredClass:null}function u7(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=hR(e),n=hR(t);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||ile(e,t))return{type:"complete",oldValue:e,newValue:t};const o=n.filter(f=>!r.includes(f)),s=r.filter(f=>!n.includes(f)),a=r.filter(f=>n.includes(f)&&s0(e,f)!==s0(t,f)).concat(o,s).sort(),u=Zf(e);if(u&&tle.includes(u)&&a.length)return{type:"complete",oldValue:e,newValue:t};let d;const h=qT(e)&&qT(t);for(const f of a){const y=s0(e,f),m=s0(t,f);let g;if((h||typeof y!="function"&&typeof m!="function")&&y!==m&&(y!=null||m!=null)){if(i&&i[f]&&typeof i[f]=="function")g=i[f](y,m);else if(y instanceof Date&&m instanceof Date){if(y.getTime()===m.getTime())continue;g={type:"complete",oldValue:y,newValue:m}}else g=typeof y=="object"&&typeof m=="object"&&Zf(y)===Zf(m)?u7(y,m):{type:"complete",oldValue:y,newValue:m};T(g)&&(T(d)?d.diff[f]=g:d={type:"partial",diff:{[f]:g}})}}return d}function rle(e,t){if(O(e))return!1;const i=t.split(".");let r=e;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const o=r.diff[n];if(!o)return!1;r=o}}return!0}function Lve(e,t){for(const i of t)if(rle(e,i))return!0;return!1}function nle(e,t){if(!(typeof e=="function"||typeof t=="function"||O(e)&&O(t)))return O(e)||O(t)||typeof e=="object"&&typeof t=="object"&&Zf(e)!==Zf(t)?{type:"complete",oldValue:e,newValue:t}:u7(e,t)}var YT;let Va=YT=class extends V{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new YT({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};l([c({type:String,json:{write:!0}})],Va.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],Va.prototype,"label",void 0),l([c(pm)],Va.prototype,"symbol",void 0),l([c({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],Va.prototype,"value",void 0),l([Fe("value")],Va.prototype,"castValue",null),Va=YT=l([S("esri.renderers.support.UniqueValueInfo")],Va);const ev=Va,ole=()=>!!k("enable-feature:force-wosr"),Vb={};async function sle(e,t){try{return{data:(await cle(e,t)).data,baseUrl:F5(e),styleUrl:e}}catch(i){return bl(i),null}}function ale(e,t,i){const r=T(t.portal)?t.portal:Kt.getDefault();let n;const o=`${r.url} - ${r.user&&r.user.username} - ${e}`;return Vb[o]||(Vb[o]=lle(e,r,i).then(s=>(n=s,s.fetchData())).then(s=>({data:s,baseUrl:n.itemUrl,styleName:e}))),Vb[o]}function lle(e,t,i){return t.load(i).then(()=>{const r=new Bs({disableExtraQuery:!0,query:`owner:${fR} AND type:${yR} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{let n=null;const o=e.toLowerCase();if(r&&Array.isArray(r)){for(const s of r)if(s.typeKeywords.some(a=>a.toLowerCase()===o)&&s.type===yR&&s.owner===fR){n=s;break}}if(!n)throw new N("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(i)})}function ule(e,t,i){return e.styleUrl?sle(e.styleUrl,i):e.styleName?ale(e.styleName,t,i):Promise.reject(new N("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Ove(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function kve(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!ole()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function cle(e,t){const i={responseType:"json",query:{f:"json"},...t};return Be(Lr(e),i)}const fR="esri_en",yR="Style",Fve="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var vf;const Hl=W.getLogger("esri.renderers.UniqueValueRenderer"),dle=Ze(ev);let yt=vf=class extends ih(sa){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let o=0;o<i.length;o++){const s=t.find(a=>a.value===i[o].value);s?nle(s,i[o])?(n.changed.push({type:"complete",oldValue:s,newValue:i[o]}),r=!0):n.unchanged.push({oldValue:s,newValue:i[o]}):(n.added.push(i[o]),r=!0)}for(let o=0;o<t.length;o++)i.find(s=>s.value===t[o].value)||(n.removed.push(t[o]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:Wy(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new N("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Hl.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,i){return i.portal||Kt.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=jp(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Jy(e.styleUrl,r))}set uniqueValueInfos(e){this.styleOrigin?Hl.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Hl.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?dle(e):new ev({value:e,symbol:K9(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i}removeUniqueValueInfo(e){if(this.styleOrigin)Hl.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(O(t)||O(t.arcade))&&(i={...i,arcade:await Qs()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(O(t)||O(t.arcade)))return void Hl.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(O(i)||O(i.arcade))){const n=await Qs(),{arcadeUtils:o}=n;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new vf({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:P(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:P(this.visualVariables),legendOptions:P(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:P(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=P(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(P(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Xi(e,t,this.valueExpression)];pn(e,t,this.field),pn(e,t,this.field2),pn(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return ule(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const r=new Dc({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const n=new ev({value:i.name,symbol:r});t.push(n),this._valueInfoMap[i.name]=n}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o}=bv(t,{});let s=this._cache.compiledFunc;const a=o.arcadeUtils;if(!s){const d=a.createSyntaxTree(this.valueExpression);s=a.createFunction(d),this._cache.compiledFunc=s}const u=a.executeFunction(s,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._valueInfoMap[u+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const n=this.field2,o=this.field3,s=[];t&&s.push(i[t]),n&&s.push(i[n]),o&&s.push(i[o]),r=s.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new vf(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Kt.getDefault());const r=i.populateFromStyle();return r.catch(n=>{Hl.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(e,t){const i=new vf(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(n=>{Hl.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};l([c({readOnly:!0})],yt.prototype,"_cache",null),l([pe({uniqueValue:"unique-value"})],yt.prototype,"type",void 0),l([c(Z8)],yt.prototype,"backgroundFillSymbol",void 0),l([c({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],yt.prototype,"field",void 0),l([Fe("field")],yt.prototype,"castField",null),l([X("field")],yt.prototype,"writeField",null),l([c({type:String,json:{write:!0}})],yt.prototype,"field2",void 0),l([c({type:String,json:{write:!0}})],yt.prototype,"field3",void 0),l([c({type:String,json:{write:!0}})],yt.prototype,"valueExpression",void 0),l([c({type:String,json:{write:!0}})],yt.prototype,"valueExpressionTitle",void 0),l([c({type:rp,json:{write:!0}})],yt.prototype,"legendOptions",void 0),l([c({type:String,json:{write:!0}})],yt.prototype,"defaultLabel",void 0),l([c(F4({...pm},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],yt.prototype,"defaultSymbol",null),l([c({type:String,json:{write:!0}})],yt.prototype,"fieldDelimiter",void 0),l([c({type:Kt,readOnly:!0})],yt.prototype,"portal",void 0),l([K("portal",["styleName"])],yt.prototype,"readPortal",null),l([c({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],yt.prototype,"styleOrigin",void 0),l([K("styleOrigin",["styleName","styleUrl"])],yt.prototype,"readStyleOrigin",null),l([X("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],yt.prototype,"writeStyleOrigin",null),l([c({type:[ev],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],yt.prototype,"uniqueValueInfos",null),yt=vf=l([S("esri.renderers.UniqueValueRenderer")],yt);const m3=yt,hm={key:"type",base:sa,typeMap:{heatmap:l7,simple:y3,"unique-value":m3,"class-breaks":X8,"dot-density":kae,dictionary:Dae,"pie-chart":ele},errorContext:"renderer"},c7={key:"type",base:sa,typeMap:{simple:y3,"unique-value":m3,"class-breaks":X8,heatmap:l7},errorContext:"renderer"};function Bve(e,t){return d7(e,null,t)}const ple=Op({types:hm});function d7(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Zi("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):ple(e,t,i):null}class g3{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(I_),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new g3,r=this._originStores[De.DEFAULTS];r&&r.forEach((n,o)=>{i.set(o,P(n),De.DEFAULTS)});for(let n=De.SERVICE;n<I_;n++){const o=this._originStores[n];o&&o.forEach((s,a)=>{t&&t.has(a)||i.set(a,P(s),n)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=De.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const o=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),o!==i}return!1}delete(t,i=De.USER){const r=this._originStores[i];if(!r)return;const n=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let o=i-1;o>=0;o--){const s=this._originStores[o];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,o);break}}}return n}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],n=r&&r.get(t),o=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,i),o!==n}originOf(t){return this._propertyOriginMap.get(t)||De.DEFAULTS}forEach(t){this._values.forEach(t)}}const p7=e=>{let t=class extends e{constructor(...i){super(...i);const r=Ni(this),n=r.store,o=new g3;r.store=o,S5(r,n,o)}read(i,r){E5(this,i,r)}getAtOrigin(i,r){const n=jb(this),o=pl(r);if(typeof i=="string")return n.get(i,o);const s={};return i.forEach(a=>{s[a]=n.get(a,o)}),s}originOf(i){return e1(this.originIdOf(i))}originIdOf(i){return jb(this).originOf(i)}revert(i,r){const n=jb(this),o=pl(r),s=Ni(this);let a;a=typeof i=="string"?i==="*"?n.keys(o):[i]:i,a.forEach(u=>{s.invalidate(u),n.revert(u,o),s.commit(u)})}};return t=l([S("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function jb(e){return Ni(e).store}let mR=class extends p7(se){};mR=l([S("esri.core.ReadOnlyMultiOriginJSONSupport")],mR);const hle=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return zb(this).delete(i,pl(r))}write(i={},r){return x5(this,i=i||{},r),i}setAtOrigin(i,r,n){Ni(this).setAtOrigin(i,r,pl(n))}removeOrigin(i){const r=zb(this),n=pl(i),o=r.keys(n);for(const s of o)r.originOf(s)===n&&r.set(s,r.get(s,n),De.USER)}updateOrigin(i,r){const n=zb(this),o=pl(r),s=this.get(i);for(let a=o+1;a<I_;++a)n.delete(i,a);n.set(i,s,o)}toJSON(i){return this.write({},i)}};return t=l([S("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function zb(e){return Ni(e).store}const bw=e=>{let t=class extends hle(p7(e)){constructor(...i){super(...i)}};return t=l([S("esri.core.MultiOriginJSONSupport")],t),t};let gR=class extends bw(se){};gR=l([S("esri.core.MultiOriginJSONSupport")],gR);async function fle(e,t){const{WhereClause:i}=await U(()=>import("./WhereClause.3e515281.js"),[],import.meta.url);return i.create(e,t)}function yle(e,t){return T(e)?T(t)?`(${e}) AND (${t})`:e:t}var KT;let wu=KT=class extends V{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new KT({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([c({type:String,json:{write:!0}})],wu.prototype,"expression",void 0),l([c({type:String,json:{write:!0}})],wu.prototype,"name",void 0),l([c({type:["boolean","date","number","string"],json:{write:!0}})],wu.prototype,"returnType",void 0),l([c({type:String,json:{write:!0}})],wu.prototype,"title",void 0),wu=KT=l([S("esri.form.ExpressionInfo")],wu);const mle=wu;let bu=class extends V{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};l([c({type:String,json:{write:!0}})],bu.prototype,"description",void 0),l([c({type:String,json:{write:!0}})],bu.prototype,"label",void 0),l([c()],bu.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],bu.prototype,"visibilityExpression",void 0),bu=l([S("esri.form.elements.Element")],bu);const Ap=bu;var ZT;let Mg=ZT=class extends V{constructor(e){super(e),this.type=null}clone(){return new ZT({type:this.type})}};l([c({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Mg.prototype,"type",void 0),Mg=ZT=l([S("esri.form.elements.inputs.AttachmentInput")],Mg);const gle=Mg;var JT;let _u=JT=class extends Ap{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new JT({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};l([c({type:String,json:{write:!0}})],_u.prototype,"attachmentKeyword",void 0),l([c({type:Boolean,json:{write:!0}})],_u.prototype,"editable",void 0),l([c({type:gle,json:{read:{source:"inputType"},write:{target:"inputType"}}})],_u.prototype,"input",void 0),l([c({type:["attachment"],json:{read:!1,write:!0}})],_u.prototype,"type",void 0),_u=JT=l([S("esri.form.elements.AttachmentElement")],_u);const vR=_u;let Ng=class extends V{constructor(e){super(e),this.type=null}};l([c()],Ng.prototype,"type",void 0),Ng=l([S("esri.form.elements.inputs.Input")],Ng);const nh=Ng;let wf=class extends nh{constructor(e){super(e),this.maxLength=null,this.minLength=0}};l([c({type:Number,json:{write:!0}})],wf.prototype,"maxLength",void 0),l([c({type:Number,json:{write:!0}})],wf.prototype,"minLength",void 0),wf=l([S("esri.form.elements.inputs.TextInput")],wf);const v3=wf;var XT;let Rg=XT=class extends v3{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new XT({maxLength:this.maxLength,minLength:this.minLength})}};l([c({type:["barcode-scanner"],json:{read:!1,write:!0}})],Rg.prototype,"type",void 0),Rg=XT=l([S("esri.form.elements.inputs.BarcodeScannerInput")],Rg);const vle=Rg;var QT;let yd=QT=class extends nh{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new QT({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};l([c({type:String,json:{write:!0}})],yd.prototype,"noValueOptionLabel",void 0),l([c({type:Boolean,json:{write:!0}})],yd.prototype,"showNoValueOption",void 0),l([c({type:["combo-box"],json:{read:!1,write:!0}})],yd.prototype,"type",void 0),yd=QT=l([S("esri.form.elements.inputs.ComboBoxInput")],yd);const wle=yd;var eE;function wR(e){return e!=null?new Date(e):null}function bR(e){return e?e.getTime():null}let Vn=eE=class extends nh{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return wR(t.max)}writeMax(e,t){t.max=bR(e)}readMin(e,t){return wR(t.min)}writeMin(e,t){t.min=bR(e)}clone(){return new eE({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};l([c({type:Boolean,json:{write:!0}})],Vn.prototype,"includeTime",void 0),l([c({type:Date,json:{type:Number,write:!0}})],Vn.prototype,"max",void 0),l([K("max")],Vn.prototype,"readMax",null),l([X("max")],Vn.prototype,"writeMax",null),l([c({type:Date,json:{type:Number,write:!0}})],Vn.prototype,"min",void 0),l([K("min")],Vn.prototype,"readMin",null),l([X("min")],Vn.prototype,"writeMin",null),l([c({type:["datetime-picker"],json:{read:!1,write:!0}})],Vn.prototype,"type",void 0),Vn=eE=l([S("esri.form.elements.inputs.DateTimePickerInput")],Vn);const ble=Vn;var tE;let md=tE=class extends nh{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new tE({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};l([c({type:String,json:{write:!0}})],md.prototype,"noValueOptionLabel",void 0),l([c({type:Boolean,json:{write:!0}})],md.prototype,"showNoValueOption",void 0),l([c({type:["radio-buttons"],json:{read:!1,write:!0}})],md.prototype,"type",void 0),md=tE=l([S("esri.form.elements.inputs.RadioButtonsInput")],md);const _le=md;var iE;let gd=iE=class extends nh{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new iE({offValue:this.offValue,onValue:this.onValue})}};l([c({type:[String,Number],json:{write:!0}})],gd.prototype,"offValue",void 0),l([c({type:[String,Number],json:{write:!0}})],gd.prototype,"onValue",void 0),l([c({type:["switch"],json:{read:!1,write:!0}})],gd.prototype,"type",void 0),gd=iE=l([S("esri.form.elements.inputs.SwitchInput")],gd);const Sle=gd;var rE;let Pg=rE=class extends v3{constructor(e){super(e),this.type="text-area"}clone(){return new rE({maxLength:this.maxLength,minLength:this.minLength})}};l([c({type:["text-area"],json:{read:!1,write:!0}})],Pg.prototype,"type",void 0),Pg=rE=l([S("esri.form.elements.inputs.TextAreaInput")],Pg);const Tle=Pg;var nE;let $g=nE=class extends v3{constructor(e){super(e),this.type="text-box"}clone(){return new nE({maxLength:this.maxLength,minLength:this.minLength})}};l([c({type:["text-box"],json:{read:!1,write:!0}})],$g.prototype,"type",void 0),$g=nE=l([S("esri.form.elements.inputs.TextBoxInput")],$g);const Ele=$g,Ale={base:nh,key:"type",typeMap:{"barcode-scanner":vle,"combo-box":wle,"datetime-picker":ble,"radio-buttons":_le,switch:Sle,"text-area":Tle,"text-box":Ele}};var oE;let Qr=oE=class extends Ap{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new oE({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};l([c({types:K6,json:{read:{reader:Hx},write:!0}})],Qr.prototype,"domain",void 0),l([c({type:Boolean,json:{write:!0}})],Qr.prototype,"editable",void 0),l([c({type:String,json:{write:!0}})],Qr.prototype,"editableExpression",void 0),l([c({type:String,json:{write:!0}})],Qr.prototype,"fieldName",void 0),l([c({type:String,json:{write:!0}})],Qr.prototype,"hint",void 0),l([c({types:Ale,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Qr.prototype,"input",void 0),l([c({type:String,json:{write:!0}})],Qr.prototype,"requiredExpression",void 0),l([c({type:String,json:{read:!1,write:!0}})],Qr.prototype,"type",void 0),l([c({type:String,json:{write:!0}})],Qr.prototype,"valueExpression",void 0),Qr=oE=l([S("esri.form.elements.FieldElement")],Qr);const _R=Qr;var sE;let xs=sE=class extends Ap{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new sE({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:P(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};l([c({type:Number,json:{write:!0}})],xs.prototype,"displayCount",void 0),l([c({type:["list"],json:{write:!0}})],xs.prototype,"displayType",void 0),l([c({type:Boolean,json:{write:!0}})],xs.prototype,"editable",void 0),l([c({type:[y9],json:{write:!0}})],xs.prototype,"orderByFields",void 0),l([c({type:Number,json:{write:!0}})],xs.prototype,"relationshipId",void 0),l([c({type:["relationship"],json:{read:!1,write:!0}})],xs.prototype,"type",void 0),xs=sE=l([S("esri.form.elements.RelationshipElement")],xs);const SR=xs;function h7(e){return{typesWithGroup:{base:Ap,key:"type",typeMap:{attachment:vR,field:_R,group:e,relationship:SR}},typesWithoutGroup:{base:Ap,key:"type",typeMap:{attachment:vR,field:_R,relationship:SR}}}}function f7(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function y7(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}function m7(e,t,i=!0){return e?e.map(r=>Yo(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var aE;let Do=aE=class extends Ap{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return m7(e,Hb,!1)}readElements(e,t){return f7(t.formElements,Hb,!1)}writeElements(e,t){t.formElements=y7(e,Hb,!1)}clone(){return new aE({description:this.description,elements:P(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};l([c({json:{write:!0}})],Do.prototype,"elements",void 0),l([Fe("elements")],Do.prototype,"castElements",null),l([K("elements",["formElements"])],Do.prototype,"readElements",null),l([X("elements")],Do.prototype,"writeElements",null),l([c({type:["collapsed","expanded"],json:{write:!0}})],Do.prototype,"initialState",void 0),l([c({type:String,json:{read:!1,write:!0}})],Do.prototype,"type",void 0),Do=aE=l([S("esri.form.elements.GroupElement")],Do);const Hb=h7(Do),xle=Do;var lE;const Gb=h7(xle);let Mo=lE=class extends V{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return m7(e,Gb)}readElements(e,t){return f7(t.formElements,Gb)}writeElements(e,t){t.formElements=y7(e,Gb)}clone(){return new lE({description:this.description,expressionInfos:P(this.expressionInfos),elements:P(this.elements),title:this.title})}};l([c({type:String,json:{write:!0}})],Mo.prototype,"description",void 0),l([c({json:{write:!0}})],Mo.prototype,"elements",void 0),l([Fe("elements")],Mo.prototype,"castElements",null),l([K("elements",["formElements"])],Mo.prototype,"readElements",null),l([X("elements")],Mo.prototype,"writeElements",null),l([c({type:[mle],json:{write:!0}})],Mo.prototype,"expressionInfos",void 0),l([c({type:String,json:{write:!0}})],Mo.prototype,"title",void 0),Mo=lE=l([S("esri.form.FormTemplate")],Mo);const Cle=Mo;var bf;const tv=mi()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),g7=tv.jsonValues.slice();C4(g7,"orthometric");const Jf=mi()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let jn=bf=class extends V{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return tv.write(e,t,i)}readHeightModel(e,t,i){return tv.read(e)||(i&&i.messages&&i.messages.push(Ile(e,{context:i})),null)}readHeightUnit(e,t,i){return Jf.read(e)||(i&&i.messages&&i.messages.push(TR(e,{context:i})),null)}readHeightUnitService(e,t,i){return oO(e)||Jf.read(e)||(i&&i.messages&&i.messages.push(TR(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new bf({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=_Z(t);return new bf({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new bf;return t.read(e,{origin:"web-scene"}),t}};function TR(e,t){return new Zi("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Ile(e,t){return new Zi("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}l([c({type:tv.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g7,default:"ellipsoidal"}}}})],jn.prototype,"heightModel",void 0),l([X("web-scene","heightModel")],jn.prototype,"writeHeightModel",null),l([K(["web-scene","service"],"heightModel")],jn.prototype,"readHeightModel",null),l([c({type:Jf.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Jf.jsonValues,write:Jf.write}}}})],jn.prototype,"heightUnit",void 0),l([K("web-scene","heightUnit")],jn.prototype,"readHeightUnit",null),l([K("service","heightUnit")],jn.prototype,"readHeightUnitService",null),l([c({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],jn.prototype,"vertCRS",void 0),l([K("service","vertCRS",["vertCRS","ellipsoid","geoid"])],jn.prototype,"readVertCRS",null),jn=bf=l([S("esri.geometry.HeightModelInfo")],jn);const _w=jn;function ER(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const n of r)n.length>2&&(n[2]*=i)}function Mle(e,t,i){if(!e&&!t||!i)return;const r=bp(i);AR(e,i,r),AR(t,i,r)}function AR(e,t,i){if(e)for(const r of e)Nle(r.geometry,t,i)}function Nle(e,t,i){if(O(e)||!e.spatialReference||Qi(e.spatialReference,t))return;const r=bp(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)ER(e,e.rings,r);else if("paths"in e)ER(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=r)}}let Rle=0;const Wb=W.getLogger("esri.layers.graphics.sources.MemorySource");let Ls=class extends Ko.LoadableMixin(Rv(Ll(he))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=T(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);iT(e,this.layer.spatialReference,i);const r=am.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const n=this.layer.objectIdField;for(const o of r.features){const s=o.attributes[n],a=this._idToClientGraphic.get(s);a&&(o.geometry=a.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new N("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return iT(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:Oe.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new N("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=d=>"objectId"in d&&d.objectId!=null?d.objectId:"attributes"in d&&d.attributes[t]!=null?d.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const d of e.deleteFeatures){const h=o(d);h!=null&&r.push(h)}const s=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const d of e.updateFeatures)if(n.push(this._serializeFeature(d)),s){const h=o(d);h!=null&&s.set(h,d)}}Mle(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:a,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:r});return this.fullExtent=a,i&&i.finish(u.uidToObjectId),this._updateClientGraphicIds(s,u),this._createEditsResult(u)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||O(e))return;const i=[];for(const{geometry:r}of e)!T(r)||r.type!=="mesh"||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const r=e.get(i.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new N("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let o=0;o<e.length;o++){const s=e[o],a=this._serializeFeature(s);!r&&T(s.geometry)&&(r=s.geometry.type),i[o]=a,t.set(`${a.uid}`,s)}const n=this;return{features:i,inferredGeometryType:r,finish(o){const s=n.sourceJSON.objectIdField;for(const a in o){const u=o[a],d=t.get(a);d&&(d.attributes||(d.attributes={}),u===-1?delete d.attributes[s]:d.attributes[s]=u,n._addIdToClientGraphic(d))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get layerOrSourceGeometryType(){var e,t,i;return(i=(e=this.layer)==null?void 0:e.geometryType)!=null?i:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(Rle++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return O(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?mr.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await Q9("MemorySourceWorker",{strategy:k("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:n,hasZ:o,timeInfo:s}=this.layer,a=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",y=>{Wb.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),y.preventDefault()}));const d={features:u.features,fields:t&&t.map(y=>y.toJSON()),geometryType:II.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&n,hasZ:this.layerOrSourceGeometryType==="mesh"||o,objectIdField:r,spatialReference:a?null:i&&i.toJSON(),timeInfo:s?s.toJSON():null},h=await this._connection.invoke("load",d,{signal:e});for(const y of h.warnings)Wb.warn(y.message,{layer:this.layer,warning:y});h.featureErrors.length&&Wb.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);const f=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(f.geometryType=II.toJSON(u.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(h.assignedObjectIds)}};l([wA({Type:Pi,ensureType:Ze(Pi)})],Ls.prototype,"itemType",void 0),l([c()],Ls.prototype,"type",void 0),l([c({constructOnly:!0})],Ls.prototype,"layer",void 0),l([c({readOnly:!0})],Ls.prototype,"workerGeometryType",null),l([c()],Ls.prototype,"sourceJSON",void 0),Ls=l([S("esri.layers.graphics.sources.MemorySource")],Ls);function Ple(e){return"portalItem"in e}const v7=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Ple(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return l([c({type:String})],t.prototype,"apiKey",null),t=l([S("esri.layers.mixins.APIKeyMixin")],t),t},w7={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},b7=Object.values(w7),_7=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${b7.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),$le=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${b7.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Dle=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Uve(e){return!!_7.test(e)}function xp(e){if(O(e))return null;const t=rt(e),i=t.path.match(_7)||t.path.match($le);if(!i)return null;const[,r,n,o,s]=i,a=n.indexOf("/");return{title:w3(a!==-1?n.slice(a+1):n),serverType:w7[o.toLowerCase()],sublayer:s!=null&&s!==""?parseInt(s,10):null,url:{path:r}}}function Lle(e){const t=rt(e).path.match(Dle);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function w3(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Ole(e,t){const i=[];if(e){const r=xp(e);T(r)&&r.title&&i.push(r.title)}if(t){const r=w3(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function S7(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",n="//features",o=(e=e.toLowerCase()).includes(t),s=e.includes(i)||e.includes(r)||e.includes(n);return o&&s}function kle(e,t){return e&&Lv(B5(e,t))}function Fle(e){let{url:t}=e;if(!t)return{url:t};t=B5(t,e.logger);const i=rt(t),r=xp(i.path);let n;if(T(r))r.sublayer!=null&&e.layer.layerId==null&&(n=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const o=Lle(i.path);T(o)&&(t=o.serviceUrl,n=o.sublayerId)}return{url:Lv(t),layerId:n}}function Ble(e,t,i,r,n){_c(t,r,"url",n),r.url&&e.layerId!=null&&(r.url=Zo(r.url,i,e.layerId.toString()))}function Vve(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),o=t.includes("/wmsserver");return i&&(r||n||o)}const T7=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=xp(this.url);if(T(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",kle(i,W.getLogger(this.declaredClass)))}};return l([c()],t.prototype,"title",null),l([c({type:String})],t.prototype,"url",null),t=l([S("esri.layers.mixins.ArcGISService")],t),t},xR={read:{reader:jx},write:{allowNull:!0,writer:zx}},b3=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return l([c({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),l([c({json:{read:!1,write:!1,origins:{"web-map":xR,"portal-item":xR}}})],t.prototype,"effect",void 0),t=l([S("esri.layers.mixins.BlendLayer")],t),t},_3=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return l([c({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=l([S("esri.layers.mixins.CustomParametersMixin")],t),t};var uE;const qb=new Se({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Yb=new Se({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let No=uE=class extends V{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:o,units:s,distance:a}=this;return new zi({geometry:P(i),objectIds:P(o),spatialRelationship:r,timeExtent:P(n),where:t,units:s,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:n,units:o,distance:s}=this;return new uE({geometry:P(t),objectIds:P(n),spatialRelationship:i,timeExtent:P(r),where:e,units:o,distance:s})}};l([c({type:String,json:{write:!0}})],No.prototype,"where",void 0),l([c({types:Rc,json:{write:!0}})],No.prototype,"geometry",void 0),l([c({type:qb.apiValues,json:{name:"spatialRel",read:{reader:qb.read},write:{allowNull:!1,writer:qb.write,overridePolicy(){return{enabled:T(this.geometry)}}}}})],No.prototype,"spatialRelationship",void 0),l([c({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],No.prototype,"distance",void 0),l([c({type:[Number],json:{write:!0}})],No.prototype,"objectIds",void 0),l([c({type:Yb.apiValues,json:{read:Yb.read,write:{writer:Yb.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],No.prototype,"units",void 0),l([c({type:rs,json:{write:!0}})],No.prototype,"timeExtent",void 0),No=uE=l([S("esri.layers.support.FeatureFilter")],No);const Ule=No;var cE;const CR={read:{reader:jx},write:{writer:zx,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},IR={read:{reader:jx},write:{writer:zx,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},MR={name:"showExcludedLabels",default:!0};let Su=cE=class extends V{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,n;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const o=Object.keys(i.filter);if(o.length>1||o[0]!=="where")return(r=t.messages)==null||r.push(new N("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=t.messages)==null||n.push(new N("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new cE({filter:T(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};l([c({type:Ule,json:{write:{allowNull:!0,writer(e,t,i,r){const n=e==null?void 0:e.write({},r);n&&Object.keys(n).length!==0?hr(i,n,t):hr(i,null,t)}}}})],Su.prototype,"filter",void 0),l([c({json:{write:!0,origins:{"web-map":CR,"portal-item":CR}}})],Su.prototype,"includedEffect",void 0),l([c({json:{write:!0,origins:{"web-map":IR,"portal-item":IR}}})],Su.prototype,"excludedEffect",void 0),l([c({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":MR,"portal-item":MR}}})],Su.prototype,"excludedLabelsVisible",void 0),Su=cE=l([S("esri.layers.support.FeatureEffect")],Su);const Vle=Su,NR={write:{allowNull:!0}},E7=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return l([c({type:Vle,json:{origins:{"web-map":NR,"portal-item":NR}}})],t.prototype,"featureEffect",void 0),t=l([S("esri.layers.mixins.FeatureEffectLayer")],t),t},jle={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function zle(e){if(!e)return e;const{start:t,end:i}=e;return new rs({start:T(t)?cc(t,-t.getTimezoneOffset(),"minutes"):t,end:T(i)?cc(i,-i.getTimezoneOffset(),"minutes"):i})}function Hle(e){if(!e)return e;const{start:t,end:i}=e;return new rs({start:T(t)?cc(t,t.getTimezoneOffset(),"minutes"):t,end:T(i)?cc(i,i.getTimezoneOffset(),"minutes"):i})}var dE;let _f=dE=class extends V{async collectRequiredFields(e,t){return Xi(e,t,this.expression)}clone(){return new dE({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};l([c({type:String,json:{write:!0}})],_f.prototype,"expression",void 0),l([c({type:String,json:{write:!0}})],_f.prototype,"title",void 0),_f=dE=l([S("esri.layers.support.FeatureExpressionInfo")],_f);const RR=_f;function Gle(){const e=Object.keys(V8);return e.sort(),e}const Wle=Gle();var pE;const a0=mi()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),PR=new Se({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Cs=pE=class extends V{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):T(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new pE({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&VV(this.featureExpressionInfo,e.featureExpressionInfo)}};l([c({type:RR,json:{write:!0}})],Cs.prototype,"featureExpressionInfo",void 0),l([K("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Cs.prototype,"readFeatureExpressionInfo",null),l([X("featureExpressionInfo",{featureExpressionInfo:{type:RR},"featureExpression.value":{type:[0]}})],Cs.prototype,"writeFeatureExpressionInfo",null),l([c({type:a0.apiValues,nonNullable:!0,json:{type:a0.jsonValues,read:a0.read,write:{writer:a0.write,isRequired:!0}}})],Cs.prototype,"mode",null),l([c({type:Number,json:{write:!0}})],Cs.prototype,"offset",void 0),l([c({type:Wle,json:{type:String,read:PR.read,write:PR.write}})],Cs.prototype,"unit",null),Cs=pE=l([S("esri.layers.support.ElevationInfo")],Cs);const qle=Cs,A7={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},Sw={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},Tw={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},x7={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:_c}}},C7={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},I7={value:null,type:qle,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function jve(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Xf={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},Yle={...Xf,json:{...Xf.json,origins:{"web-document":{...Xf.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?py(t.layerDefinition.drawingInfo.transparency):void 0:py(t.drawingInfo.transparency)}}},zve={type:rs,readOnly:!0,get(){var a,u;if(!((a=this.layer)!=null&&a.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=(u=this.view)==null?void 0:u.timeExtent;let n=this.layer.timeExtent;e&&(n=Hle(n));let o=i?r&&n?r.intersection(n):r||n:n;if(!o||o.isEmpty||o.isAllTime)return o;t&&(o=o.offset(-t.value,t.unit)),e&&(o=zle(o));const s=this._get("timeExtent");return o.equals(s)?s:o}},Hve={type:Oe,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Oe.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=me.fromJSON(t.spatialReference)),i}}}},read:!1}},M7={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Kle={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},Zle={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},N7={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},S3=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,n,o){(o&&o.layerContainerType==="ground"||i&&Wz(this,n,{},o))&&(r[n]=i)}writeOperationalLayerType(i,r,n,o){!i||o&&o.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i||"Layer"}read(i,r){r&&(r.layer=this),jz(this,i,n=>super.read(i,n),r)}write(i,r){var s,a;if(r!=null&&r.origin){const u=`${r.origin}/${r.layerContainerType||"operational-layers"}`,d=jle[u];let h=d&&d[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&u==="web-scene/operational-layers"&&(h=!1),!h)return(s=r.messages)==null||s.push(new N("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${u}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),o=!!r&&!!r.messages&&!!r.messages.filter(u=>u instanceof N&&u.name==="web-document-write:property-required").length;return Dv(n==null?void 0:n.url)?((a=r==null?void 0:r.messages)==null||a.push(new N("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:n}beforeSave(){}};return l([c({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),l([c(N7)],t.prototype,"listMode",void 0),l([X("listMode")],t.prototype,"writeListMode",null),l([c({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),l([X("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),l([c(Xf)],t.prototype,"opacity",void 0),l([c({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),l([X([void 0,"web-scene"],"title")],t.prototype,"writeTitle",null),l([c({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=l([S("esri.layers.mixins.OperationalLayer")],t),t};var hE;const Kb=new Se({asc:"ascending",desc:"descending"});let vd=hE=class extends V{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new hE({field:this.field,valueExpression:this.valueExpression,order:this.order})}};l([c({type:String,json:{write:!0}})],vd.prototype,"field",void 0),l([c({type:String,json:{write:!0}})],vd.prototype,"valueExpression",void 0),l([c({type:Kb.apiValues,json:{read:Kb.read,write:Kb.write}})],vd.prototype,"order",void 0),vd=hE=l([S("esri.layers.support.OrderByInfo")],vd);const R7=vd;function Jle(e,t,i){if(!e)return null;const r=e.find(o=>!!o.field);if(!r)return null;const n=new R7;return n.read(r,i),[n]}function Xle(e,t,i,r){const n=e.find(o=>!!o.field);n&&hr(i,[n.toJSON()],t)}const P7=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return l([c({type:[R7],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:Jle},write:{target:"layerDefinition.orderBy",writer:Xle}}})],t.prototype,"orderBy",void 0),t=l([S("esri.layers.mixins.OrderedLayer")],t),t},Qle=W.getLogger("esri.layers.mixins.PortalLayer"),$7=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var i;(i=this.portalItem)==null||i.destroy(),this.portalItem=null}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new g1({id:r.itemId,portal:n&&n.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const n=await U(()=>import("./layersLoader.5ff47b23.js").then(o=>o.l),["layersLoader.5ff47b23.js","lazyLayerLoader.325b2d59.js"],import.meta.url);return _t(r),await n.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData},r)}catch(n){throw Ki(n)||Qle.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(bl(r),!0)))}async _fetchUserHasEditingPrivileges(i){const r=this.url?vt==null?void 0:vt.findCredential(this.url):null;if(!r)return!0;const n=l0.credential===r?l0.user:await this._fetchEditingUser(i);return l0.credential=r,l0.user=n,O(n)||n.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var h,f;const r=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(r)return r;const n=vt.findServerInfo(this.url);if(!(n!=null&&n.owningSystemUrl))return null;const o=`${n.owningSystemUrl}/sharing/rest`,s=Kt.getDefault();if(s&&s.loaded&&Lr(s.restUrl)===Lr(o))return s.user;const a=`${o}/community/self`,u=T(i)?i.signal:null,d=await Pv(Be(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return d.ok?$A.fromJSON(d.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const n=r&&r.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Kt.getDefault());return n&&o&&!D5(o.restUrl,n.restUrl)?(r.messages&&r.messages.push(new N("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return l([c({type:g1})],t.prototype,"portalItem",null),l([K("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),l([X("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),l([c({clonable:!1})],t.prototype,"resourceReferences",void 0),l([c({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=l([S("esri.layers.mixins.PortalLayer")],t),t},l0={credential:null,user:null},Dy=new he,Qf=new WeakMap;function eue(e){D7(e)&&Dy.push(e)}function tue(e){D7(e)&&Dy.includes(e)&&Dy.remove(e)}function D7(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function L7(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:L7(t,e%t):0}let Zb=0,u0=0;function iue(){var t;const e=Date.now();for(const i of Dy)i.refreshInterval&&e-((t=Qf.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(Qf.set(i,e),i.refresh(e))}e5(()=>{const e=Date.now();let t=0;for(const i of Dy)t=L7(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Qf.get(i)||Qf.set(i,e):Qf.delete(i);if(t!==u0){if(u0=t,clearInterval(Zb),u0===0)return void(Zb=0);Zb=setInterval(iue,u0)}});const O7=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=pA(()=>this.hasDataChanged()),this.when().then(()=>{eue(this)},()=>{})}destroy(){tue(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){P_(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{W.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return l([c({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),l([c({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),l([c()],t.prototype,"refreshParameters",null),t=l([S("esri.layers.mixins.RefreshableLayer")],t),t},T3=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&rue(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return l([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),l([c({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),l([c({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=l([S("esri.layers.mixins.ScaleRangeLayer")],t),t};function rue(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const rc=mi()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var fE;let Sf=fE=class extends V{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Tre(this.value,this.unit,"milliseconds")}clone(){return new fE({value:this.value,unit:this.unit})}};l([c({type:Number,json:{write:!0},nonNullable:!0})],Sf.prototype,"value",void 0),l([c({type:rc.apiValues,json:{type:rc.jsonValues,read:rc.read,write:rc.write},nonNullable:!0})],Sf.prototype,"unit",void 0),Sf=fE=l([S("esri.TimeInterval")],Sf);const Ly=Sf;var yE;let wd=yE=class extends V{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new yE({respectsDaylightSaving:e,timezone:t})}};l([c({type:Boolean,json:{write:!0}})],wd.prototype,"respectsDaylightSaving",void 0),l([K("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],wd.prototype,"readRespectsDaylightSaving",null),l([c({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],wd.prototype,"timezone",void 0),wd=yE=l([S("esri.layers.support.TimeReference")],wd);const nue=wd;var mE;let Ti=mE=class extends V{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new rs({start:i,end:r})}writeFullTimeExtent(e,t){e&&T(e.start)&&T(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new Ly({value:t.timeInterval,unit:rc.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new Ly({value:t.defaultTimeInterval,unit:rc.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:o,fullTimeExtent:s,trackIdField:a,useTime:u}=this;return new mE({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:P(o),fullTimeExtent:P(s),trackIdField:a,useTime:u})}};l([c({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Ti.prototype,"cumulative",void 0),l([c({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Ti.prototype,"endField",void 0),l([c({type:rs,json:{write:{enabled:!0,allowNull:!0}}})],Ti.prototype,"fullTimeExtent",void 0),l([K("fullTimeExtent",["timeExtent"])],Ti.prototype,"readFullTimeExtent",null),l([X("fullTimeExtent")],Ti.prototype,"writeFullTimeExtent",null),l([c({type:Boolean,json:{write:!0}})],Ti.prototype,"hasLiveData",void 0),l([c({type:Ly,json:{write:{enabled:!0,allowNull:!0}}})],Ti.prototype,"interval",void 0),l([K("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ti.prototype,"readInterval",null),l([X("interval")],Ti.prototype,"writeInterval",null),l([c({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Ti.prototype,"startField",void 0),l([c({type:nue,json:{write:{enabled:!0,allowNull:!0}}})],Ti.prototype,"timeReference",void 0),l([c({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ti.prototype,"trackIdField",void 0),l([c({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Ti.prototype,"useTime",void 0),Ti=mE=l([S("esri.layers.support.TimeInfo")],Ti);const k7=Ti,F7=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const o=n.timeOffset,s=rc.fromJSON(n.timeOffsetUnits);return o&&s?new Ly({value:o,unit:s}):null}set timeInfo(i){YA(i,this.fieldsIndex),this._set("timeInfo",i)}};return l([c({type:rs,json:{write:!1}})],t.prototype,"timeExtent",void 0),l([c({type:Ly})],t.prototype,"timeOffset",void 0),l([K("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),l([c({value:null,type:k7,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),l([c({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=l([S("esri.layers.mixins.TemporalLayer")],t),t};var gE;let Os=gE=class extends V{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:i,isUnique:r,description:n}=this;return new gE({name:e,fields:t,isAscending:i,isUnique:r,description:n})}};l([c({constructOnly:!0})],Os.prototype,"name",void 0),l([c({constructOnly:!0})],Os.prototype,"fields",void 0),l([c({constructOnly:!0})],Os.prototype,"isAscending",void 0),l([c({constructOnly:!0})],Os.prototype,"isUnique",void 0),l([c({constructOnly:!0})],Os.prototype,"description",void 0),Os=gE=l([S("esri.layers.support.FeatureIndex")],Os);let El=class extends V{constructor(){super(...arguments),this.type=null}};l([c({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],El.prototype,"type",void 0),El=l([S("esri.layers.support.FeatureReduction")],El);var vE;let bd=vE=class extends V{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new vE({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};l([c({type:String,json:{write:!0}})],bd.prototype,"statisticType",void 0),l([c({type:String,json:{write:!0}})],bd.prototype,"onStatisticField",void 0),l([c({type:String,json:{write:!0}})],bd.prototype,"onStatisticValueExpression",void 0),bd=vE=l([S("esri.layers.support.OutStatistic")],bd);const oue=bd;var wE;let Tf=wE=class extends V{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new wE({name:this.name,outStatistic:this.outStatistic.clone()})}};l([c({type:String,json:{write:!0}})],Tf.prototype,"name",void 0),l([c({type:oue,json:{write:!0}})],Tf.prototype,"outStatistic",void 0),Tf=wE=l([S("esri.layers.support.AggregateField")],Tf);const B7=Tf,E3="__begin__",A3="__end__",sue=new RegExp(E3,"ig"),aue=new RegExp(A3,"ig"),$R=new RegExp("^"+E3,"i"),DR=new RegExp(A3+"$","i"),iv='"',lue=iv+" + ",uue=" + "+iv;function cue(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function due(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function x3(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=cue(e.labelExpression),t.type="conventional"),t}function pue(e){const t=x3(e);if(!t)return null;switch(t.type){case"conventional":return bE(t.expression);case"arcade":return t.expression}return null}function hue(e){const t=x3(e);if(!t)return null;switch(t.type){case"conventional":return yue(t.expression);case"arcade":return U7(t.expression)}return null}function bE(e){let t;return e?(t=qo(e,i=>E3+'$feature["'+i+'"]'+A3),t=$R.test(t)?t.replace($R,""):iv+t,t=DR.test(t)?t.replace(DR,""):t+iv,t=t.replace(sue,lue).replace(aue,uue)):t='""',t}const fue=/^\s*\{([^}]+)\}\s*$/i;function yue(e){const t=e.match(fue);return t&&t[1].trim()||null}const mue=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,gue=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,vue=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function U7(e){if(!e)return null;let t=mue.exec(e)||gue.exec(e);return t?t[1]||t[3]:(t=vue.exec(e),t?t[2]:null)}var _E;let ja=_E=class extends V{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?bE(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=bE(this.value)),e!=null&&(t[i]=e)}clone(){return new _E({expression:this.expression,title:this.title,value:this.value})}};l([c({type:String,json:{write:{writerEnsuresNonNull:!0}}})],ja.prototype,"expression",void 0),l([K("expression",["expression","value"])],ja.prototype,"readExpression",null),l([X("expression")],ja.prototype,"writeExpression",null),l([c({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ja.prototype,"title",void 0),l([c({json:{read:!1,write:!1}})],ja.prototype,"value",void 0),ja=_E=l([S("esri.layers.support.LabelExpressionInfo")],ja);const V7=ja,j7=[252,146,31,255],z7={type:"esriSMS",style:"esriSMSCircle",size:6,color:j7,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},H7={type:"esriSLS",style:"esriSLSSolid",width:.75,color:j7},G7={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},wue={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},bue={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},_ue={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Sue={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};Fl.fromJSON(z7);Ur.fromJSON(H7);na.fromJSON(G7);const Tue=$c.fromJSON(wue),Gve=Fl.fromJSON(bue),Wve=Ur.fromJSON(_ue),qve=na.fromJSON(Sue);var SE;const c0=new Se({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function W7(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function Eue(e){return(e==null?void 0:e.type)==="map-image"}function q7(e){var t,i;return!!Eue(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function Aue(e){return W7(e)||q7(e.layer)}let At=SE=class extends V{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Tue,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=(r,n,o)=>{switch(n){case"=":return r==o;case"<>":return r!=o;case">":return r>o;case">=":return r>=o;case"<":return r<o;case"<=":return r<=o}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const n=i(t[r[0]],r[1],r[2]),o=r[3],s=i(t[r[4]],r[5],r[6]);switch(o){case"AND":return n&&s;case"OR":return n||s}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=due(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=U7(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&W7(r))e=new V7({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(r);n.expression&&(t[i]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return x3(this)}getLabelExpressionArcade(){return pue(this)}getLabelExpressionSingleField(){return hue(this)}hash(){return JSON.stringify(this)}clone(){return new SE({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:P(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:P(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};l([c({type:String,json:{write:!0}})],At.prototype,"name",void 0),l([c({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],At.prototype,"allowOverrun",void 0),l([c({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],At.prototype,"deconflictionStrategy",void 0),l([c({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&q7(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],At.prototype,"labelExpression",void 0),l([K("labelExpression")],At.prototype,"readLabelExpression",null),l([X("labelExpression")],At.prototype,"writeLabelExpression",null),l([c({type:V7,json:{write:{overridePolicy:(e,t,i)=>Aue(i)?{allowNull:!0}:{enabled:!1}}}})],At.prototype,"labelExpressionInfo",void 0),l([X("labelExpressionInfo")],At.prototype,"writeLabelExpressionInfo",null),l([c({type:c0.apiValues,json:{type:c0.jsonValues,read:c0.read,write:c0.write}})],At.prototype,"labelPlacement",void 0),l([c({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],At.prototype,"labelPosition",void 0),l([c({type:Number})],At.prototype,"maxScale",void 0),l([X("maxScale")],At.prototype,"writeMaxScale",null),l([c({type:Number})],At.prototype,"minScale",void 0),l([X("minScale")],At.prototype,"writeMinScale",null),l([c({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],At.prototype,"repeatLabel",void 0),l([c({type:Number,cast:je,json:{write:!0,origins:{"web-scene":{write:!1}}}})],At.prototype,"repeatLabelDistance",void 0),l([c({types:PK,json:{origins:{"web-scene":{types:$K,write:uR,default:null}},write:uR,default:null}})],At.prototype,"symbol",void 0),l([c({type:Boolean,json:{write:!0}})],At.prototype,"useCodedValues",void 0),l([c({type:String,json:{write:!0}})],At.prototype,"where",void 0),At=SE=l([S("esri.layers.support.LabelClass")],At);const fm=At;var TE;let zn=TE=class extends El{constructor(e){super(e),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new TE({fields:P(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:P(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:P(this.popupTemplate),renderer:P(this.renderer)})}};l([pe({binning:"binning"})],zn.prototype,"type",void 0),l([c({type:Number,json:{write:!0}})],zn.prototype,"fixedBinLevel",void 0),l([c({type:[fm],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],zn.prototype,"labelingInfo",void 0),l([c(Tw)],zn.prototype,"labelsVisible",void 0),l([c(Sw)],zn.prototype,"popupEnabled",void 0),l([c({type:Ol,json:{name:"popupInfo",write:!0}})],zn.prototype,"popupTemplate",void 0),l([c({type:[B7],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],zn.prototype,"fields",void 0),l([c({types:hm,json:{write:!0}})],zn.prototype,"renderer",void 0),zn=TE=l([S("esri.layers.support.FeatureReductionBinning")],zn);const xue=zn;var EE;let or=EE=class extends V{constructor(e){super(e),this.type="cluster",this.clusterRadius=je("80px"),this.clusterMinSize=je("12px"),this.clusterMaxSize=je("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new EE({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:P(this.labelingInfo),labelsVisible:this.labelsVisible,fields:P(this.fields),renderer:P(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:P(this.popupTemplate)})}};l([c({type:["cluster"],readOnly:!0,json:{write:!0}})],or.prototype,"type",void 0),l([c({type:Number,cast:e=>e==="auto"?e:je(e),json:{write:!0}})],or.prototype,"clusterRadius",void 0),l([c({type:Number,cast:je,json:{write:!0}})],or.prototype,"clusterMinSize",void 0),l([c({type:Number,cast:je,json:{write:!0}})],or.prototype,"clusterMaxSize",void 0),l([c(Sw)],or.prototype,"popupEnabled",void 0),l([c({type:Ol,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],or.prototype,"popupTemplate",void 0),l([c({types:hm,json:{write:!0}})],or.prototype,"renderer",void 0),l([c({types:NK})],or.prototype,"symbol",void 0),l([c({type:[fm],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],or.prototype,"labelingInfo",void 0),l([c(Tw)],or.prototype,"labelsVisible",void 0),l([c({type:[B7],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],or.prototype,"fields",void 0),or=EE=l([S("esri.layers.support.FeatureReductionCluster")],or);const Y7=or;var AE;let Dg=AE=class extends El{constructor(e){super(e),this.type="selection"}clone(){return new AE}};l([c({type:["selection"]})],Dg.prototype,"type",void 0),Dg=AE=l([S("esri.layers.support.FeatureReductionSelection")],Dg);const LR=Dg,OR={key:"type",base:El,typeMap:{selection:Y7}},K7={types:{key:"type",base:El,typeMap:{selection:LR,cluster:Y7,binning:xue}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:OR},"portal-item":{types:OR},"web-scene":{types:{key:"type",base:El,typeMap:{selection:LR}}}}}},kR=new Se({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let za=class extends wr(V){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};l([c({json:{write:!0}})],za.prototype,"name",void 0),l([c({json:{write:!0}})],za.prototype,"description",void 0),l([c({json:{read:kR.read,write:kR.write}})],za.prototype,"drawingTool",void 0),l([c({json:{write:!0}})],za.prototype,"prototype",void 0),l([c({json:{write:!0}})],za.prototype,"thumbnail",void 0),za=l([S("esri.layers.support.FeatureTemplate")],za);const Ew=za;let Is=class extends wr(V){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=Hx(e[i]);return t}writeDomains(e,t){var r;const i={};for(const n of Object.keys(e))e[n]&&(i[n]=(r=e[n])==null?void 0:r.toJSON());t.domains=i}};l([c({json:{write:!0}})],Is.prototype,"id",void 0),l([c({json:{write:!0}})],Is.prototype,"name",void 0),l([c({json:{write:!0}})],Is.prototype,"domains",void 0),l([K("domains")],Is.prototype,"readDomains",null),l([X("domains")],Is.prototype,"writeDomains",null),l([c({type:[Ew],json:{write:!0}})],Is.prototype,"templates",void 0),Is=l([S("esri.layers.support.FeatureType")],Is);const C3=Is;function Cue(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function FR(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function BR(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class Iue{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const i=[];for(const r of t){const n=r&&r.name;if(n){const o=UR(n);this._fieldsMap.set(n,r),this._fieldsMap.set(o,r),i.push(o),Cue(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):ZA(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),FR(r)||BR(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)FR(t)||BR(t)||t.nullable||rY(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(UR(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name}}function UR(e){return e.toLowerCase().trim()}const Mue=W.getLogger("esri.layers.support.fieldProperties");function Z7(){return{fields:{type:[om],value:null},fieldsIndex:{readOnly:!0,get(){return new Iue(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||Mue.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return ZL(this.fieldsIndex,e)}}}}let _d=class extends wr(V){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};l([c({type:String,json:{read:{source:"shapeAreaFieldName"}}})],_d.prototype,"shapeAreaField",void 0),l([c({type:String,json:{read:{source:"shapeLengthFieldName"}}})],_d.prototype,"shapeLengthField",void 0),l([c({type:String,json:{read:e=>xZ.read(e)||CZ.read(e)}})],_d.prototype,"units",void 0),_d=l([S("esri.layers.support.GeometryFieldsInfo")],_d);const Nue=_d,Rue=/\[([^\[\]]+)\]/gi;function xE(e,t,i){return e?e.map(r=>{const n=new fm;if(n.read(r,i),n.labelExpression){const o=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replace(Rue,(s,a)=>`[${Pue(a,o)}]`)}return n}):null}function Pue(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const n=t[r].name;if(n.toLowerCase()===i)return n}return e}var CE;let Sd=CE=class extends V{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new he}clone(){return new CE({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};l([c({type:String,json:{write:!0}})],Sd.prototype,"floorField",void 0),l([c({json:{read:!1,write:!1}})],Sd.prototype,"viewAllMode",void 0),l([c({json:{read:!1,write:!1}})],Sd.prototype,"viewAllLevelIds",void 0),Sd=CE=l([S("esri.layers.support.LayerFloorInfo")],Sd);const $ue=Sd,VR=new Se({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),jR=new Se({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let en=class extends wr(V){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};l([c({json:{read:VR.read,write:VR.write}})],en.prototype,"cardinality",void 0),l([c({json:{read:!0,write:!0}})],en.prototype,"composite",void 0),l([c({json:{read:!0,write:!0}})],en.prototype,"id",void 0),l([c({json:{read:!0,write:!0}})],en.prototype,"keyField",void 0),l([c({json:{read:!0,write:!0}})],en.prototype,"keyFieldInRelationshipTable",void 0),l([c({json:{read:!0,write:!0}})],en.prototype,"name",void 0),l([c({json:{read:!0,write:!0}})],en.prototype,"relatedTableId",void 0),l([c({json:{read:!0,write:!0}})],en.prototype,"relationshipTableId",void 0),l([c({json:{read:jR.read,write:jR.write}})],en.prototype,"role",void 0),en=l([S("esri.layers.support.Relationship")],en);const Due=en,Hn=[];function Lue(e,t){if(S7(e.url))return!0;const{wkid:i}=t;for(const r of Hn){if(e.version>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Hn.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),Hn.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Hn.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Hn.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Hn.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),Hn.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),Hn.push([10.61,()=>new Set([102497])]),Hn.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),Hn.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),Hn.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function Oue(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await Pv(r.populateFromStyle());if(_t(i),n.ok===!1){const o=n.error;t&&t.messages&&t.messages.push(new Zi("renderer:style-reference",`Failed to create unique value renderer from style reference: ${o.message}`,{error:o,context:t})),e.clear("renderer",t.origin)}}}const kue=["oid","global-id"],Fue=["oid","global-id","guid"];function J7({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:n},o){if(!i)return null;const s=Hue({editFieldsInfo:t,fields:i,objectIdField:r},o);if(!s.length)return null;const a=que({titleBase:n,fields:i,displayField:e}),u=Wue();return new Ol({title:a,content:u,fieldInfos:s})}const Bue=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],Uue=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!X7(e.name,t)&&(!i||e.name!==i)&&!kue.includes(e.type)&&!Bue.some(n=>n.test(e.name));function Vue(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort(jue),e}function jue(e,t){return e.type==="oid"?-1:t.type==="oid"?1:zR(e)?-1:zR(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function X7(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:n,editorField:o}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),n&&n.toLowerCase(),o&&o.toLowerCase()].includes(e.toLowerCase())}function zue(e,t){return e.editable&&!Fue.includes(e.type)&&!X7(e.name,t)}function Hue({editFieldsInfo:e,fields:t,objectIdField:i},r){return Vue(t,(r==null?void 0:r.ignoreFieldTypes)||Yue).map(n=>new Ky({fieldName:n.name,isEditable:zue(n,e),label:n.alias,format:Gue(n),visible:Uue(n,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function Gue(e){switch(e.type){case"small-integer":case"integer":case"single":return new Ld({digitSeparator:!0,places:0});case"double":return new Ld({digitSeparator:!0,places:2});case"date":return new Ld({dateFormat:"long-month-day-year"});default:return e.type==="string"&&i9(e.name)?new Ld({digitSeparator:!0,places:0}):null}}function Wue(){return[new gp,new my]}function que(e){const t=Xq(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i}function zR(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const Yue=["geometry","blob","raster","guid","xml"],Jb=new Se({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Kue={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Et="FeatureLayer",HR=W.getLogger("esri.layers.FeatureLayer");function d0(e,t){return new N("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function GR(e){return e&&e instanceof he}function ve(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function p0(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function Zue(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Ah(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}const Xb=Z7();function Qb(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let G=class extends E7(b3(P7(F7(T3(O7(T7(S3($7(bw(_3(v7(wr(yp))))))))))))){constructor(...e){super(...e),this._handles=new gi,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=me.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(he.ofType(Os)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=on(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=T(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(r=>this._initLayerProperties(r)));const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(bl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstLayerId(t);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new N("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{analytics:this._readAnalyticsCapabilities(t),attachment:this._readAttachmentCapabilities(t),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),queryTopFeatures:this._readQueryTopFeaturesCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&hr(i,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}get parsedUrl(){const e=this.url?rt(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=Zo(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Zo(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){_1(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const r=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(r){const n=d7(r,t,i)||void 0;return n||HR.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),n}if(t.defaultSymbol)return t.types&&t.types.length?new m3({defaultSymbol:e_(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:e_(n.symbol,n,i)}))}):new y3({symbol:e_(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(GR(t)&&this._resetMemorySource(t),GR(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof he?new Ls({layer:this,items:e}):e:null}readSource(e,t){const i=am.fromJSON(t.featureSet);return new Ls({layer:this,items:i&&i.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e=e&&e.map(o=>Ew.fromJSON(o)),this._fixTemplates(e,r),this._fixTemplates(e,n),e}readTitle(e,t){const i=t.layerDefinition&&t.layerDefinition.name||t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const n=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?Ole(this.url,i):i;let o=i;if(!o&&this.url){const s=xp(this.url);T(s)&&(o=s.title)}return o?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==o&&(o=n+" - "+o),w3(o)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e&&e.map(o=>(o=C3.fromJSON(o),this._fixTemplates(o.templates,r),this._fixTemplates(o.templates,n),o))}set url(e){const t=Fle({layer:this,url:e,nonStandardUrlAllowed:!0,logger:HR});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,i,r){Ble(this,e,null,t,r)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new N(Et,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,i){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new N(Et,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,i)})}async applyEdits(e,t){const i=await U(()=>import("./editingSupport.d094fbda.js"),[],import.meta.url);return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return J7(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await Pj(U(()=>import("./FeatureLayerSource.8dcab723.js"),["FeatureLayerSource.8dcab723.js","executeForIds.590036d9.js"],import.meta.url),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new zi,t=this.get("capabilities.data"),i=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"];const r=T(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,n=yle(this.definitionExpression,r);e.where=n||"1=1";const{timeOffset:o,timeExtent:s}=this;return e.timeExtent=o!=null&&s!=null?s.offset(-o.value,o.unit):s||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new N(Et,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new N(Et,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let n=null;return i.some(o=>{const{id:s}=o;return s!=null&&(s.toString()===r.toString()&&(n=o),!!n)}),n}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const n=r.domains&&r.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=FS.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new N(Et,"this layer doesn't support attachments");const{attachmentTypes:i,objectIds:r,globalIds:n,num:o,size:s,start:a,where:u}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const d=r&&r.length>1,h=i&&i.length,f=n&&n.length,y=s&&s.length;if(d||h||f||y||o||a||u)throw new N(Et,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||u))throw new N(Et,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new N(Et,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(zi.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(zi.from(e)||this.createQuery(),t);throw new N(Et,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(zi.from(e)||this.createQuery(),t);throw new N(Et,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(zi.from(e)||this.createQuery(),t);throw new N(Et,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(uT.from(e),t);throw new N(Et,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(uT.from(e),t);throw new N(Et,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(Km.from(e),t).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i});throw new N(Et,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(Km.from(e),t);throw new N(Et,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(Km.from(e),t);throw new N(Et,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(Km.from(e),t);throw new N(Et,"Layer source does not support queryFeatureCount capability")})}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var o;t={...t,writeLayerSchema:(o=t==null?void 0:t.writeLayerSchema)!=null?o:this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:n}=t;if(this.dynamicDataSource)return n==null||n.push(d0(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return n==null||n.push(d0(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return n==null||n.push(d0(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return n==null||n.push(d0(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new N(Et,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||Lue(this,e))}async save(e){return(await U(()=>import("./featureLayerUtils.47b7e8e2.js"),["featureLayerUtils.47b7e8e2.js","originUtils.68552ec1.js","multiOriginJSONSupportUtils.8128aa52.js","arcgisLayers.1ad7c662.js","lazyLayerLoader.325b2d59.js","portalItemUtils.dc9c5eea.js"],import.meta.url)).save(this,e)}async saveAs(e,t){return(await U(()=>import("./featureLayerUtils.47b7e8e2.js"),["featureLayerUtils.47b7e8e2.js","originUtils.68552ec1.js","multiOriginJSONSupportUtils.8128aa52.js","arcgisLayers.1ad7c662.js","lazyLayerLoader.325b2d59.js","portalItemUtils.dc9c5eea.js"],import.meta.url)).saveAs(this,e,t)}_readEditingEnabled(e,t,i){var n;let r=(n=e.layerDefinition)==null?void 0:n.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var n,o;if(!e){const s=(o=(n=this.capabilities)==null?void 0:n.operations)!=null&&o.supportsSync?"Query,Sync":"Query";hr("layerDefinition.capabilities",s,t),i&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=s)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:i}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[i]?void 0:Promise.reject(new N(Et,`feature is missing the identifying attribute ${i}`)):Promise.reject(new N(Et,"'attributes' are required on a feature to query attachments")):Promise.reject(new N(Et,"A feature is required to add/delete/update attachments")):Promise.reject(new N(Et,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return Be(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),_1(this.renderer,this.fieldsIndex),YA(this.timeInfo,this.fieldsIndex),Oue(this,{origin:"service"})}async hasDataChanged(){var e,t;if((e=this.source)!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await((t=this.source)==null?void 0:t.refresh());if(T(r)&&(this.sourceJSON={...this.sourceJSON,...r},this.read(r,{origin:"service",url:this.parsedUrl})),i)return!0}catch{}if(this.definitionExpression)try{return(await fle(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){var t;const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((t=this.fields)==null?void 0:t.some(i=>i.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new N("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new N("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(e){return{supportsCacheHint:Ah(e.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Ah(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:ve(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const n=Kue[r.name];n&&(i[n]=!!r.isEnabled)}),i}_readDataCapabilities(e){return{isVersioned:ve(e,"isDataVersioned",!1),supportsAttachment:ve(e,"hasAttachments",!1),supportsM:ve(e,"hasM",!1),supportsZ:ve(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:ve(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const i=e?e.toLowerCase().split(",").map(f=>f.trim()):[],r=this.url?xp(this.url):null,n=i.includes(T(r)&&r.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone;let s=o&&i.includes("create"),a=o&&i.includes("delete"),u=o&&i.includes("update");const d=i.includes("changetracking"),h=t.advancedQueryCapabilities;return o&&!(s||a||u)&&(s=a=u=!0),{supportsCalculate:ve(t,"supportsCalculate",!1),supportsTruncate:ve(t,"supportsTruncate",!1),supportsValidateSql:ve(t,"supportsValidateSql",!1),supportsAdd:s,supportsDelete:a,supportsEditing:o,supportsChangeTracking:d,supportsQuery:n,supportsQueryAnalytics:ve(h,"supportsQueryAnalytic",!1),supportsQueryAttachments:ve(h,"supportsQueryAttachments",!1),supportsQueryTopFeatures:ve(h,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ve(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:ve(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var u;const t=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,r=e.archivingInfo,n=(u=this.url)==null?void 0:u.includes("MapServer"),o=!k("mapserver-pbf-enabled")&&n&&this.version<10.81,s=S7(this.url),a=(e.supportedQueryFormats||"").split(",").reduce((d,h)=>{const f=h.toLowerCase().trim();return f&&d.add(f),d},new Set);return{supportsStatistics:ve(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:ve(t,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:ve(t,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Zue(t),supportsCentroid:ve(t,"supportsReturningGeometryCentroid",!1),supportsDistance:ve(t,"supportsQueryWithDistance",!1),supportsDistinct:ve(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ve(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ve(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:ve(t,"supportsHavingClause",!1),supportsOrderBy:ve(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ve(t,"supportsPagination",!1),supportsQuantization:ve(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ve(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:ve(e,"supportsReturningQueryGeometry",!1),supportsResultType:ve(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:ve(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:ve(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ve(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:ve(t,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:ve(i,"allowOthersToQuery",!0),supportsHistoricMoment:ve(r,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&a.has("pbf"),supportsDisjointSpatialRelationship:ve(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:ve(t,"supportsQueryWithCacheHint",!1)||Ah(t,"query"),supportsDefaultSpatialReference:ve(t,"supportsDefaultSR",!1),supportsCompactGeometry:s,maxRecordCountFactor:p0(e,"maxRecordCountFactor",void 0),maxRecordCount:p0(e,"maxRecordCount",void 0),standardMaxRecordCount:p0(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:p0(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,i=ve(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ve(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Ah(t,"queryRelated")}}_readQueryTopFeaturesCapabilities(e){return{supportsCacheHint:Ah(e.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ve(e,"allowGeometryUpdates",!0),supportsGlobalId:ve(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ve(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ve(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ve(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ve(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ve(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ve(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ve(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ve(t,"allowOthersToUpdate",!0)}}};l([c({readOnly:!0,json:{read:!1}})],G.prototype,"capabilities",void 0),l([K("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],G.prototype,"readCapabilities",null),l([c({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],G.prototype,"charts",void 0),l([c({readOnly:!0})],G.prototype,"createQueryVersion",null),l([c({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],G.prototype,"copyright",void 0),l([c({type:Boolean})],G.prototype,"datesInUnknownTimezone",void 0),l([c({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],G.prototype,"displayField",void 0),l([c({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],G.prototype,"definitionExpression",void 0),l([c({types:ac,readOnly:!0})],G.prototype,"defaultSymbol",void 0),l([c({type:Zn})],G.prototype,"dynamicDataSource",void 0),l([c({readOnly:!0})],G.prototype,"editFieldsInfo",void 0),l([c({type:Boolean})],G.prototype,"editingEnabled",null),l([K(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],G.prototype,"readEditingEnabled",null),l([K("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],G.prototype,"readEditingEnabledFromWebMap",null),l([X(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],G.prototype,"writeEditingEnabled",null),l([X("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],G.prototype,"writeEditingEnabledToWebMap",null),l([c({readOnly:!0})],G.prototype,"editingInfo",void 0),l([K("editingInfo")],G.prototype,"readEditingInfo",null),l([c((()=>{const e=P(I7),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],G.prototype,"elevationInfo",void 0),l([c(K7)],G.prototype,"featureReduction",void 0),l([c({...Xb.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Qb}}}}})],G.prototype,"fields",void 0),l([c(Xb.fieldsIndex)],G.prototype,"fieldsIndex",void 0),l([c({type:$ue,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],G.prototype,"floorInfo",void 0),l([c({type:Cle,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],G.prototype,"formTemplate",void 0),l([c({type:Oe,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],G.prototype,"fullExtent",void 0),l([c()],G.prototype,"gdbVersion",void 0),l([c({readOnly:!0,type:Nue,json:{read:{source:"geometryProperties"}}})],G.prototype,"geometryFieldsInfo",void 0),l([c({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Jb.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Qb,writer(e,t,i){const r=e?Jb.toJSON(e):null;r&&hr(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:Jb.read}}})],G.prototype,"geometryType",void 0),l([c({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],G.prototype,"hasM",void 0),l([c({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],G.prototype,"hasZ",void 0),l([c({readOnly:!0,type:_w})],G.prototype,"heightModelInfo",void 0),l([c({type:Date})],G.prototype,"historicMoment",void 0),l([c(M7)],G.prototype,"id",void 0),l([c({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],G.prototype,"infoFor3D",void 0),l([c({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],G.prototype,"isTable",void 0),l([K("service","isTable",["type","geometryType"]),K("isTable",["layerDefinition.type","layerDefinition.geometryType"])],G.prototype,"readIsTable",null),l([X("web-map","isTable")],G.prototype,"writeIsTable",null),l([c(Tw)],G.prototype,"labelsVisible",void 0),l([c({type:[fm],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:xE},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:xE},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],G.prototype,"labelingInfo",void 0),l([c((()=>{const e=P(Yle);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){hr(r,Uv(t),i)}}},e})())],G.prototype,"opacity",void 0),l([c({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],G.prototype,"layerId",void 0),l([c(C7)],G.prototype,"legendEnabled",void 0),l([c({type:["show","hide"],json:(()=>{const e=P(N7.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],G.prototype,"listMode",void 0),l([c(Kle)],G.prototype,"minScale",void 0),l([K("service","minScale",["minScale","effectiveMinScale"])],G.prototype,"readMinScale",null),l([c(Zle)],G.prototype,"maxScale",void 0),l([K("service","maxScale",["maxScale","effectiveMaxScale"])],G.prototype,"readMaxScale",null),l([c({type:String})],G.prototype,"globalIdField",void 0),l([K("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),K("service","globalIdField",["globalIdField","fields"])],G.prototype,"readGlobalIdFieldFromService",null),l([c({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Qb}}}}})],G.prototype,"objectIdField",void 0),l([K("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),K("service","objectIdField",["objectIdField","fields"])],G.prototype,"readObjectIdFieldFromService",null),l([c({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],G.prototype,"operationalLayerType",void 0),l([c(Xb.outFields)],G.prototype,"outFields",void 0),l([c({readOnly:!0})],G.prototype,"parsedUrl",null),l([c({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],G.prototype,"path",void 0),l([c(Sw)],G.prototype,"popupEnabled",void 0),l([c({type:Ol,json:{name:"popupInfo",write:!0}})],G.prototype,"popupTemplate",void 0),l([c({readOnly:!0})],G.prototype,"defaultPopupTemplate",null),l([c({type:[Due],readOnly:!0})],G.prototype,"relationships",void 0),l([c({types:hm,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:c7,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],G.prototype,"renderer",null),l([K("service","renderer",["drawingInfo.renderer","defaultSymbol"]),K("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],G.prototype,"readRenderer",null),l([c()],G.prototype,"sourceJSON",void 0),l([c({type:Boolean})],G.prototype,"returnM",void 0),l([c({type:Boolean})],G.prototype,"returnZ",void 0),l([c((()=>{const e=P(A7);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],G.prototype,"screenSizePerspectiveEnabled",void 0),l([c({clonable:!1})],G.prototype,"source",null),l([Fe("source")],G.prototype,"castSource",null),l([K("portal-item","source",["featureSet"]),K("web-map","source",["featureSet"])],G.prototype,"readSource",null),l([c({readOnly:!0})],G.prototype,"serviceDefinitionExpression",void 0),l([K("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],G.prototype,"readServiceDefinitionExpression",null),l([c({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],G.prototype,"spatialReference",void 0),l([c({type:Number})],G.prototype,"subtypeCode",void 0),l([c({type:String,json:{origins:{service:{read:!0}}}})],G.prototype,"subtypeField",void 0),l([c({type:[Ew]})],G.prototype,"templates",void 0),l([K("templates",["editFieldsInfo","creatorField","editorField","templates"])],G.prototype,"readTemplates",null),l([c({type:k7})],G.prototype,"timeInfo",void 0),l([c()],G.prototype,"title",void 0),l([K("service","title",["name"]),K("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],G.prototype,"readTitle",null),l([K("web-map","title",["layerDefinition.name","title"])],G.prototype,"readTitleFromWebMap",null),l([c({type:String})],G.prototype,"sublayerTitleMode",void 0),l([c({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],G.prototype,"trackIdField",void 0),l([c({json:{read:!1}})],G.prototype,"type",void 0),l([c({type:String})],G.prototype,"typeIdField",void 0),l([K("service","typeIdField"),K("typeIdField",["layerDefinition.typeIdField"])],G.prototype,"readTypeIdField",null),l([c({type:[C3]})],G.prototype,"types",void 0),l([K("service","types",["types"]),K("types",["layerDefinition.types"])],G.prototype,"readTypes",null),l([c({readOnly:!0,json:{write:!1}})],G.prototype,"serverGens",void 0),l([c({type:he.ofType(Os),readOnly:!0})],G.prototype,"indexes",void 0),l([c(x7)],G.prototype,"url",null),l([X("url")],G.prototype,"writeUrl",null),l([c({readOnly:!0})],G.prototype,"userIsAdmin",void 0),l([c({json:{origins:{service:{read:!0}},read:!1}})],G.prototype,"version",void 0),l([K("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],G.prototype,"readVersion",null),l([c({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],G.prototype,"visible",void 0),l([K("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],G.prototype,"readVisible",null),G=l([S("esri.layers.FeatureLayer")],G);const e_=Op({types:Y9}),Q7=G,Yve=Object.freeze(Object.defineProperty({__proto__:null,default:Q7},Symbol.toStringTag,{value:"Module"})),Jue=["$datastore","$map","$layer","$aggregatedfeatures"],Xue="esri.widgets.Feature.support.arcadeFeatureUtils",Que=W.getLogger(Xue);function ece(e){return typeof e=="string"?rm(Dx(e)):Array.isArray(e)?tce(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?ice(e):e}function tce(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?rm(Dx(t)):t}</li>`).join("")}</ul>`}function ice(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?rm(Dx(i)):i}</td></tr>`}).join("")}</table>`}function rce({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:n,map:o,graphic:s,interceptor:a}){i.forEach(u=>{const d=u.toLowerCase(),h={map:o,spatialReference:n.sr,interceptor:a};if(d==="$map"&&(r.vars[d]=t.convertMapToFeatureSetCollection(h)),d==="$layer"&&(r.vars[d]=t.convertFeatureLayerToFeatureSet({layer:s.sourceLayer,spatialReference:n.sr,interceptor:a})),d==="$datastore"&&(r.vars[d]=t.convertServiceUrlToWorkspace({url:s.sourceLayer.url,spatialReference:n.sr,interceptor:a})),d==="$aggregatedfeatures"){const f=s.layer,{fields:y,objectIdField:m,geometryType:g,spatialReference:v,displayField:w}=f,_=new Q7({fields:y,objectIdField:m,geometryType:g,spatialReference:v,displayField:w,...f.type==="feature"?{templates:f.templates,typeIdField:f.typeIdField,types:f.types}:null,source:e});r.vars[d]=t.convertFeatureLayerToFeatureSet({layer:_,spatialReference:n.sr,interceptor:a})}})}function eF(){return U(()=>import("./arcadeUtils.f209e074.js").then(e=>e.t),[],import.meta.url)}async function nce({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||(t==null?void 0:t.type)!=="2d")return[];const n=await t.whenLayerView(r);if(!n.createQuery||!n.queryFeatures)return[];const o=n.createQuery();o.aggregateIds=[e.getObjectId()];const{features:s}=await n.queryFeatures(o);return s}async function tF({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:n,graphic:o,view:s}){if(!e||!e.expression)return null;const a=t.createSyntaxTree(e.expression),u=Jue.filter(m=>t.hasVariable(a,m)),[d]=await Promise.all([nce({graphic:o,view:s}),t.loadScriptDependencies(a,!0,u)]),h=t.getViewInfo({spatialReference:r}),f=t.createExecContext(o,h);f.interceptor=i,f.useAsync=!0,rce({aggregatedFeatures:d,arcadeUtils:t,featureSetVars:u,context:f,viewInfo:h,map:n,graphic:o,interceptor:i});const y=t.createFunction(a,f);return t.executeAsyncFunction(y,f).catch(m=>Que.error("arcade-execution-error",{error:m,graphic:o,expressionInfo:e}))}async function oce({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:n,view:o}){if(!e||!e.length)return{};const s=await eF(),a={};for(const h of e)a[`expression/${h.name}`]=tF({expressionInfo:h,arcadeUtils:s,interceptor:r,spatialReference:t,map:n,graphic:i,view:o});const u=await ri(a),d={};for(const h in u)d[h]=ece(u[h].value);return d}const sce=1;let Cr=class extends Ll(se){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var r,n;const t=(r=this.contentElement)==null?void 0:r.type;(n=this.contentElementViewModel)==null||n.destroy();const i=t==="fields"?new ew:t==="media"?new ic:t==="text"?new H1:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=Cx(this._compile,sce,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:r,spatialReference:n,map:o,view:s,_abortController:a}=this;if(!(t&&i&&n&&o))return void this._set("contentElement",null);const u=await eF();if(a!==this._abortController)return;const d=await tF({arcadeUtils:u,expressionInfo:t,graphic:i,interceptor:r,map:o,spatialReference:n,view:s});if(!d||d.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const h=await l3(d,a.signal),f=h==null?void 0:h.type,y=f==="media"?wy.fromJSON(h):f==="text"?vp.fromJSON(h):f==="fields"?gp.fromJSON(h):null;this._set("contentElement",y)},this.handles.add([q(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),ze),q(()=>[this.contentElement],()=>this._createVM(),ze)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};l([c()],Cr.prototype,"_abortController",void 0),l([c({type:r9})],Cr.prototype,"expressionInfo",void 0),l([c({type:Pi})],Cr.prototype,"graphic",void 0),l([c({readOnly:!0})],Cr.prototype,"contentElement",void 0),l([c({readOnly:!0})],Cr.prototype,"contentElementViewModel",void 0),l([c()],Cr.prototype,"interceptor",void 0),l([c()],Cr.prototype,"spatialReference",null),l([c({readOnly:!0})],Cr.prototype,"state",null),l([c()],Cr.prototype,"map",null),l([c()],Cr.prototype,"view",void 0),Cr=l([S("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Cr);const I3=Cr,h0={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let Lg=class extends vi{constructor(e,t){super(e,t),this.viewModel=new I3}initialize(){this.own(q(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),ze))}destroy(){this._destroyContentWidget()}renderLoading(){return C("div",{key:"loading-container",class:h0.loadingSpinnerContainer},C("span",{class:this.classes(h0.iconLoading,h0.spinner)}))}render(){var t;const{state:e}=this.viewModel;return C("div",{class:h0.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const r=e?i==="fields"?new B6({viewModel:e}):i==="media"?new Ek({viewModel:e}):i==="text"?new fg({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};l([c({type:I3})],Lg.prototype,"viewModel",void 0),Lg=l([S("esri.widgets.Feature.FeatureExpression")],Lg);const ace=Lg;class lce{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}}var Og;const uce=1,WR="content-view-models",iF="esri.widgets.FeatureViewModel",cce=W.getLogger(iF),qR={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let dt=Og=class extends se{constructor(e){super(e),this._handles=new gi,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=Cx(this._graphicChanged,uce,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...qR},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent},this._handles.add(q(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),ze))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return T(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return Xee(BM(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return A6(this.graphic)}castAbilities(e){return{...qR,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof ic&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof ic&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof ic&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){Ki(i)||(this._error=i,cce.error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new vp({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(WR),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:r,contentElementViewModel:n}=e,o=r==null?void 0:r.type;n&&o&&(o==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,t))),o==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createMediaVMParams(r,t))),o==="text"&&n.set(this._createTextVMParams(r)))}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:n,spatialReference:o,view:s}=this,a=new I3({expressionInfo:i,graphic:r,interceptor:Og.interceptor,map:n,spatialReference:o,view:s});return this.contentViewModels[t]=a,this._handles.add(q(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,t),ze),WR),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:n}=e;return this.contentViewModels[t]=new Ox({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:n}=e;return this.contentViewModels[t]=new H1({graphic:i,creator:r,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:o,_expressionAttributes:s}=this,{attributes:a}=n,u=o.global;return{title:ec({attributes:a,fieldInfoMap:i,globalAttributes:u,expressionAttributes:s,layer:r,text:e}),description:ec({attributes:a,fieldInfoMap:i,globalAttributes:u,expressionAttributes:s,layer:r,text:t})}}_createFieldsVMParams(e,t){var d;const{_effectivePopupTemplate:i,formattedAttributes:r}=this,n={...r.global,...r.content[t]},o=(d=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:d.filter(({fieldName:h})=>C6(h)||Vs(h)||n.hasOwnProperty(h)),s=i==null?void 0:i.expressionInfos,{description:a,title:u}=e;return{attributes:n,expressionInfos:s,fieldInfos:o,...this._compileTitleAndDesc({title:u,description:a})}}_compileFields(e,t){const i=e.clone(),r=new ew(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:n,formattedAttributes:o,_effectivePopupTemplate:s,relatedInfos:a,_sourceLayer:u,_expressionAttributes:d}=this,{attributes:h}=r,{description:f,mediaInfos:y,title:m}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:h,layer:u,fieldInfoMap:n,formattedAttributes:{...o.global,...o.content[t]},expressionAttributes:d,mediaInfos:y,popupTemplate:s,relatedInfos:a,...this._compileTitleAndDesc({title:m,description:f})}}_compileMedia(e,t){const i=e.clone(),r=new ic(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(e&&e.text){const{attributes:o}=t,s=this.formattedAttributes.global;e.text=ec({attributes:o,fieldInfoMap:i,globalAttributes:s,expressionAttributes:n,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new H1(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,n=t==null?void 0:t.editFieldsInfo;return r&&n?Jee(n,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,{attributes:o}=r,s=this.formattedAttributes.global;return ec({attributes:o,fieldInfoMap:t,globalAttributes:s,expressionAttributes:n,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return j1(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return j1(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n,spatialReference:o,map:s,view:a}=this,{content:{value:u},title:{value:d}}=await ri({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!r)return;await tte({graphic:r,popupTemplate:n,layer:i,spatialReference:o},e);const{expressionAttributes:{value:h}}=await ri({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:oce({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:o,graphic:r,map:s,interceptor:Og.interceptor,view:a})});t===this._featureAbortController&&r&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...r.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(u)),this._set("title",this._compileTitle(d)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(u)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:o,_sourceLayer:s,_fieldInfoMap:a,_graphicExpressionAttributes:u}=this;i.content[t]=yb({fieldInfos:r==null?void 0:r.fieldInfos,graphic:n,attributes:{...u,...e.attributes},layer:s,fieldInfoMap:a,relatedInfos:o})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:s,_graphicExpressionAttributes:a}=this;i.content[t]=yb({fieldInfos:e.fieldInfos,graphic:r,attributes:{...a,...e.attributes},layer:o,fieldInfoMap:s,relatedInfos:n})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:s}=this,a=t==null?void 0:t.fieldInfos,u={global:yb({fieldInfos:a,graphic:i,attributes:s,layer:n,fieldInfoMap:o,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((d,h)=>{d.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:d,contentElementIndex:h,formattedAttributes:u}),d.type==="media"&&this._createMediaFormattedAttributes({contentElement:d,contentElementIndex:h,formattedAttributes:u})}),u}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,BM(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const o=T(n.associatedLayer)?await n.associatedLayer.load(i):n;if(!o)return;const s=t.filter(d=>d&&Vs(d.fieldName));if(!s||!s.length)return;t.forEach(d=>this._configureRelatedInfo(d,o));const a=await Xre({relatedInfos:r,layer:o},i);Object.keys(a).forEach(d=>{var y;const h=r.get(d.toString()),f=(y=a[d])==null?void 0:y.value;h&&f&&(h.layerInfo=f.data)});const u=await Qre({graphic:e,relatedInfos:r,layer:o},i);Object.keys(u).forEach(d=>{var h;qre((h=u[d])==null?void 0:h.value,r.get(d.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=pT(e.fieldName);if(!r)return;const{layerId:n,fieldName:o}=r;if(!n)return;const s=i.get(n.toString())||Wre(n,t);s&&(ene({relatedInfo:s,fieldName:o,fieldInfo:e}),this.relatedInfos.set(n,s))}};dt.interceptor=new lce(nte,ote),l([c()],dt.prototype,"_error",void 0),l([c()],dt.prototype,"_featureAbortController",void 0),l([c({readOnly:!0})],dt.prototype,"_effectivePopupTemplate",null),l([c({readOnly:!0})],dt.prototype,"_fieldInfoMap",null),l([c({readOnly:!0})],dt.prototype,"_sourceLayer",null),l([c()],dt.prototype,"abilities",void 0),l([Fe("abilities")],dt.prototype,"castAbilities",null),l([c({readOnly:!0})],dt.prototype,"content",void 0),l([c({readOnly:!0})],dt.prototype,"contentViewModels",void 0),l([c({type:Boolean})],dt.prototype,"defaultPopupTemplateEnabled",void 0),l([c({readOnly:!0})],dt.prototype,"state",null),l([c({readOnly:!0})],dt.prototype,"formattedAttributes",void 0),l([c({type:Pi,value:null})],dt.prototype,"graphic",null),l([c({readOnly:!0})],dt.prototype,"lastEditInfo",void 0),l([c({readOnly:!0})],dt.prototype,"relatedInfos",void 0),l([c()],dt.prototype,"spatialReference",null),l([c({readOnly:!0})],dt.prototype,"title",void 0),l([c()],dt.prototype,"map",null),l([c({readOnly:!0})],dt.prototype,"waitingForContent",null),l([c()],dt.prototype,"view",void 0),dt=Og=l([S(iF)],dt);const M3=dt,rF=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>F6(i)&&!i.destroyed?C("div",{key:i},i.render()):i instanceof HTMLElement?C("div",{key:i,bind:i,afterCreate:this._attachToNode}):Tte(i)?C("div",{key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=l([S("esri.widgets.Feature.ContentMixin")],t),t},si={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},YR={title:!0,content:!0,lastEditedInfo:!0};let ai=class extends rF(vi){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...YR},this.map=null,this.view=null,this.viewModel=new M3}initialize(){this.own(q(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),ze))}loadDependencies(){return U(()=>import("./calcite-notice.4b68c2bf.js"),[],import.meta.url)}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{...YR,...e}}render(){const{state:e}=this.viewModel,t=C("div",{class:si.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return C("div",{class:this.classes(si.base,si.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return C("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?C("div",{key:"error-title",slot:"title"},e.errorMessage):null,C("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return C("div",{key:"loading-container",class:si.loadingSpinnerContainer},C("span",{class:this.classes(si.iconLoading,si.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?C("div",{class:si.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?C(kx,{level:this.headingLevel,class:si.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?C("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:C("div",{key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?C("div",{key:this._buildKey("attachments-element",e),class:this.classes(si.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:C("div",{key:this._buildKey("expression-element",e),class:si.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?C("div",{key:this._buildKey("custom-element",t),class:si.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:C("div",{key:this._buildKey("fields-element",e),class:si.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:C("div",{key:this._buildKey("media-element",e),class:si.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:n}=i,o=i.type==="edit"?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,s=Wn(o,{date:r,user:n});return C("div",{key:"edit-info-element",class:this.classes(si.lastEditedInfo,si.contentElement)},s)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?C("div",{key:this._buildKey("text-element",t),class:this.classes(si.contentElement,si.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((n,o)=>{n.type==="attachments"&&(this._contentWidgets[o]=new yte({displayType:n.displayType,headingLevel:t.title?e+1:e,viewModel:r[o]})),n.type==="fields"&&(this._contentWidgets[o]=new B6({viewModel:r[o]})),n.type==="media"&&(this._contentWidgets[o]=new Ek({viewModel:r[o]})),n.type==="text"&&(this._contentWidgets[o]=new fg({viewModel:r[o]})),n.type==="custom"&&(this._contentWidgets[o]=new fg({viewModel:r[o]})),n.type==="expression"&&(this._contentWidgets[o]=new ace({viewModel:r[o]}))},this);else{const n=r[0];n&&!n.destroyed&&(this._contentWidgets[0]=new fg({viewModel:n}))}this.scheduleRender()}};l([J("viewModel.graphic")],ai.prototype,"graphic",void 0),l([J("viewModel.defaultPopupTemplateEnabled")],ai.prototype,"defaultPopupTemplateEnabled",void 0),l([c()],ai.prototype,"headingLevel",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ai.prototype,"label",void 0),l([c(),pi("esri/widgets/Feature/t9n/Feature")],ai.prototype,"messages",void 0),l([c(),pi("esri/t9n/common")],ai.prototype,"messagesCommon",void 0),l([c(),pi("esri/widgets/support/t9n/uriUtils")],ai.prototype,"messagesURIUtils",void 0),l([J("viewModel.spatialReference")],ai.prototype,"spatialReference",void 0),l([J("viewModel.title")],ai.prototype,"title",void 0),l([c()],ai.prototype,"visibleElements",void 0),l([Fe("visibleElements")],ai.prototype,"castVisibleElements",null),l([J("viewModel.map")],ai.prototype,"map",void 0),l([J("viewModel.view")],ai.prototype,"view",void 0),l([c({type:M3})],ai.prototype,"viewModel",void 0),ai=l([S("esri.widgets.Feature")],ai);const dce=ai;var nF;const kg=Symbol("anchorHandles");let Tu=class extends ra.EventedAccessor{constructor(e){super(e),this[nF]=new gi,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[kg].add([mn(()=>ko(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),q(()=>this.screenLocation,(t,i)=>{T(t)&&T(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[kg]=on(this[kg])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this;return i&&T(e)&&T(t)&&t.ready?t.toScreen(e):null}};nF=kg,l([c()],Tu.prototype,"location",void 0),l([c()],Tu.prototype,"screenLocation",null),l([c()],Tu.prototype,"screenLocationEnabled",void 0),l([c()],Tu.prototype,"view",void 0),Tu=l([S("esri.widgets.support.AnchorElementViewModel")],Tu);const oF=Tu,pce="esri.widgets.CompassViewModel";let Fg=class extends oF{constructor(e){super(e),this.visible=!1}};l([c()],Fg.prototype,"visible",void 0),Fg=l([S(pce)],Fg);const sF=Fg,t_={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let Eu=class extends vi{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new sF,this.visible=!1}initialize(){this.own([q(()=>this.visible,e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r=e&&i,n=!e&&i,o={[t_.spinnerStart]:r,[t_.spinnerFinish]:n},s=this._getPositionStyles();return C("div",{class:this.classes(t_.base,o),styles:s})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=Cv(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(O(t)||O(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};l([J("viewModel.location")],Eu.prototype,"location",void 0),l([J("viewModel.view")],Eu.prototype,"view",void 0),l([c({type:sF})],Eu.prototype,"viewModel",void 0),l([J("viewModel.visible")],Eu.prototype,"visible",void 0),Eu=l([S("esri.widgets.Spinner")],Eu);const hce=Eu;var KR;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(KR||(KR={}));function fce(e){return"r"in e&&"g"in e&&"b"in e}function aF(e){return"h"in e&&"s"in e&&"v"in e}function lF(e){return"l"in e&&"a"in e&&"b"in e}function uF(e){return"l"in e&&"c"in e&&"h"in e}function yce(e){return"x"in e&&"y"in e&&"z"in e}const mce=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],gce=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function cF(e,t){const i=[];let r,n;if(e[0].length!==t.length)throw"dimensions do not match";const o=e.length,s=e[0].length;let a=0;for(r=0;r<o;r++){for(a=0,n=0;n<s;n++)a+=e[r][n]*t[n];i.push(a)}return i}function dF(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=cF(mce,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function N3(e){const t=cF(gce,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function pF(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function hF(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function vce(e){const t=e.l,i=e.a,r=e.b,n=Math.sqrt(i*i+r*r);let o=Math.atan2(r,i);return o=o>0?o:o+2*Math.PI,{l:t,c:n,h:o}}function wce(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function bce(e){return pF(dF(e))}function _ce(e){return N3(hF(e))}function Sce(e){return vce(pF(dF(e)))}function Tce(e){return N3(hF(wce(e)))}function Ece(e){const t=e.r,i=e.g,r=e.b,n=Math.max(t,i,r),o=n-Math.min(t,i,r);let s=n,a=o===0?0:n===t?(i-r)/o%6:n===i?(r-t)/o+2:(t-i)/o+4,u=o===0?0:o/s;return a<0&&(a+=6),a*=60,u*=100,s*=100/255,{h:a,s:u,v:s}}function Ace(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,n=r*i,o=n*(1-Math.abs(t%2-1));let s;switch(Math.floor(t)){case 0:s={r:n,g:o,b:0};break;case 1:s={r:o,g:n,b:0};break;case 2:s={r:0,g:n,b:o};break;case 3:s={r:0,g:o,b:n};break;case 4:s={r:o,g:0,b:n};break;case 5:case 6:s={r:n,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+r-n),s.g=Math.round(s.g+r-n),s.b=Math.round(s.b+r-n),s}function Oy(e){return fce(e)?e:uF(e)?Tce(e):lF(e)?_ce(e):yce(e)?N3(e):aF(e)?Ace(e):e}function Kve(e){return aF(e)?e:Ece(Oy(e))}function ZR(e){return lF(e)?e:bce(Oy(e))}function JR(e){return uF(e)?e:Sce(Oy(e))}function fF(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function xce(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Cce(e,t,i,r,n,o){const s=new Float32Array(6);return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s[4]=n,s[5]=o,s}function Ice(e,t){return new Float32Array(e,t,6)}function yF(e,t,i,r){const n=t[r],o=t[r+1];e[r]=i[0]*n+i[2]*o+i[4],e[r+1]=i[1]*n+i[3]*o+i[5]}function Mce(e,t,i,r=0,n=0,o=2){const s=n||t.length/o;for(let a=r;a<s;a++)yF(e,t,i,a*o)}Object.freeze(Object.defineProperty({__proto__:null,create:fF,clone:xce,fromValues:Cce,createView:Ice,transform:yF,transformMany:Mce},Symbol.toStringTag,{value:"Module"}));function Nce(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Rce(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Pce(e,t,i,r,n,o,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=s,e}function R3(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5];let u=i*o-r*n;return u?(u=1/u,e[0]=o*u,e[1]=-r*u,e[2]=-n*u,e[3]=i*u,e[4]=(n*a-o*s)*u,e[5]=(r*s-i*a)*u,e):null}function $ce(e){return e[0]*e[3]-e[1]*e[2]}function mF(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=i[0],h=i[1],f=i[2],y=i[3],m=i[4],g=i[5];return e[0]=r*d+o*h,e[1]=n*d+s*h,e[2]=r*f+o*y,e[3]=n*f+s*y,e[4]=r*m+o*g+a,e[5]=n*m+s*g+u,e}function Aw(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=Math.sin(i),h=Math.cos(i);return e[0]=r*h+o*d,e[1]=n*h+s*d,e[2]=r*-d+o*h,e[3]=n*-d+s*h,e[4]=a,e[5]=u,e}function P3(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=i[0],h=i[1];return e[0]=r*d,e[1]=n*d,e[2]=o*h,e[3]=s*h,e[4]=a,e[5]=u,e}function ky(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=i[0],h=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=s,e[4]=r*d+o*h+a,e[5]=n*d+s*h+u,e}function gF(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function vF(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function $3(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Dce(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Lce(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function Oce(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function wF(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function kce(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function Fce(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function Bce(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Uce(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=t[0],d=t[1],h=t[2],f=t[3],y=t[4],m=t[5];return Math.abs(i-u)<=be*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-d)<=be*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-h)<=be*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-f)<=be*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-y)<=be*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(a-m)<=be*Math.max(1,Math.abs(a),Math.abs(m))}const Vce=mF,jce=wF;Object.freeze(Object.defineProperty({__proto__:null,copy:Nce,identity:Rce,set:Pce,invert:R3,determinant:$ce,multiply:mF,rotate:Aw,scale:P3,translate:ky,fromRotation:gF,fromScaling:vF,fromTranslation:$3,str:Dce,frob:Lce,add:Oce,subtract:wF,multiplyScalar:kce,multiplyScalarAndAdd:Fce,exactEquals:Bce,equals:Uce,mul:Vce,sub:jce},Symbol.toStringTag,{value:"Module"}));const XR=k("android");k("chrome")||XR&&XR>=4;$S();function bF(e){return e&&"opacity"in e?e.opacity*bF(e.parent):1}async function zce(e,t){var w;if(!e)return;const i=e.sourceLayer,r=(w=T(t)&&t.useSourceLayer?i:e.layer)!=null?w:i,n=bF(r);if(T(e.symbol)&&(!T(t)||t.ignoreGraphicSymbol!==!0)){const _=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,cache:T(t)?t.webStyleCache:null}):e.symbol.clone();return bb(_,null,n),_}const o=T(t)&&t.renderer||r&&"renderer"in r&&r.renderer;let s=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!s)return;if(s=s.type==="web-style"?await s.fetchSymbol({...t,cache:T(t)?t.webStyleCache:null}):s.clone(),!("visualVariables"in o)||!o.visualVariables||!o.visualVariables.length)return bb(s,null,n),s;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(O(t)||O(t.arcade))){const _={...t};_.arcade=await Qs(),t=_}const a=await U(()=>Promise.resolve().then(()=>p3),void 0,import.meta.url),u=[],d=[],h=[],f=[];for(const _ of o.visualVariables)switch(_.type){case"color":u.push(_);break;case"opacity":d.push(_);break;case"rotation":f.push(_);break;case"size":_.target||h.push(_)}const y=!!u.length&&u[u.length-1],m=y?a.getColor(y,e,t):null,g=!!d.length&&d[d.length-1];let v=g?a.getOpacity(g,e,t):null;if(n!=null&&(v=v!=null?v*n:n),bb(s,m,v),h.length){const _=a.getAllSizes(h,e,t);await Aie(s,_)}for(const _ of f)xie(s,a.getRotationAngle(_,e,t),_.axis);return s}class Hce{constructor(t,i){this.owner=i,this.properties={},this.afterDispatchHandle=null;for(const r in t){const n=t[r],o=new W4(n,null,null,2,2);this.properties[r]={pool:o,acquired:[]}}this.afterDispatchHandle=Kj(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const t in this.properties){const i=this.properties[t];for(const r of i.acquired)qC(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this.properties=null,this.owner=null}get(t){const i=this.owner._get(t),r=this.properties[t];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const t in this.properties){const i=this.properties[t];let r=0;for(const n of i.acquired)qC(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}}const Gce=k("mac")?"Meta":"Ctrl",xw={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)xw[e]=String.fromCharCode(e);for(let e=1;e<25;e++)xw[111+e]=`F${e}`;for(let e=65;e<91;e++)xw[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function Wce(e){if(e.key!==void 0)return Bo(e);const t=xw[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function qce(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class Yce{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}}const QR=W.getLogger("esri.views.input.InputHandler");class ni{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?QR.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const o=typeof t=="string"?new Yce(t,n):t,s=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const y=f.indexOf(h);f.splice(y,1),s(),this._manager&&this._manager.updateDependencies()}},u=new Kce(o,r,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),s(),this._manager&&this._manager.updateDependencies())}});let d=this._incoming[o.eventType];return d||(d=[],this._incoming[o.eventType]=d),d.push(u),s(),this._manager&&this._manager.updateDependencies(),u}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new Zce(t,{onEmit:(r,n,o,s)=>{this._manager.emit(r.eventType,n,o,s)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):QR.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const r of i)if(r.match.matches(t)&&(r.callback(t),t.shouldStopPropagation()))break}}}class Kce{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class Zce{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}class Jce extends ni{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{const r=i.data.native.pointerType==="touch";this._setValue(r?"touch":"mouse",i.data.x,i.data.y)})}_setValue(t,i,r){t===this._value&&this._x===i&&this._y===r||(this._value=t,this._x=i,this._y=r,this._onChange(t,i,r))}}const i_=W.getLogger("esri.views.input.InputManager");let Ha=class extends se{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Gce,this.latestPointerType="mouse",this._propertiesPool=new Hce({latestPointerLocation:Qce},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,i=Al.INTERNAL){if(this._nameToGroup[e])return void i_.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void i_.error("Can't register a group of zero handlers");const r={name:e,handlers:t.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let n=r.handlers.length-1;n>=0;n--){const o=r.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(s,a,u,d,h)=>{this._emitInputEvent(o.priorityIndex+1,s,a,u,h,d)},setPointerCapture:(s,a)=>{this._setPointerCapture(r,o,s,a)},setEventCallback:s=>{o.eventCallback=s},setUninstallCallback:s=>{o.uninstallCallback=s},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):i_.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const r=this._handlers[i];r.priorityIndex=i,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let n=r.handler.hasSideEffects;if(!n){for(const o of r.handler.outgoingEventTypes)if(e.has(o)){n=!0;break}}if(n)for(const o of r.handler.incomingEventMatches){e.add(o.eventType);for(const s of o.keyModifiers)qce(s)||t.add(s)}r.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._get("latestPointerType")!==e&&this._set("latestPointerType",e);const r=this._get("latestPointerLocation");if(O(r)||r.x!==t||r.y!==i){const n=this._propertiesPool.get("latestPointerLocation");n.x=t,n.y=i,this._set("latestPointerLocation",n)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const n=t;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const s=new Set;this._activeKeyModifiers.forEach(a=>{s.add(a)}),this._activeKeyModifiers=s,i=!0}},n=(s,a)=>{a&&!this._activeKeyModifiers.has(s)?(r(),this._activeKeyModifiers.add(s)):!a&&this._activeKeyModifiers.has(s)&&(r(),this._activeKeyModifiers.delete(s))};if(e==="key-down"||e==="key-up"){const s=t.key;this._keyModifiers.has(s)&&n(s,e==="key-down")}const o=t.native;n("Alt",!(!o||!o.altKey)),n("Ctrl",!(!o||!o.ctrlKey)),n("Shift",!(!o||!o.shiftKey)),n("Meta",!(!o||!o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Jce((e,t,i)=>this._setLatestPointer(e,t,i)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],Al.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Al.INTERNAL)}_setPointerCapture(e,t,i,r){const n=e.name+"-"+t.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),r?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,n,o){const s=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=n!==void 0&&n,u={event:new Xce(t,i,s,o||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new E1,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:i}=this._currentPropagation.events.pop(),r=t.data&&t.data.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new E1;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const r of t.handler.incomingEventMatches){if(i.eventType!==r.eventType)continue;const n=i.keyModifiers.filter(o=>r.keyModifiers.includes(o));if(n.length===i.keyModifiers.length!=(n.length===r.keyModifiers.length))return i.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let r=0;for(;r<t.length&&this._compareHandlerPriority(i,t[r])>=0;)r++;t.splice(r,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};l([c({readOnly:!0})],Ha.prototype,"hasPendingInputs",null),l([c()],Ha.prototype,"eventSource",void 0),l([c()],Ha.prototype,"recognizers",void 0),l([c({readOnly:!0})],Ha.prototype,"latestPointerType",void 0),l([c({readOnly:!0})],Ha.prototype,"latestPointerLocation",void 0),Ha=l([S("esri.views.input.InputManager")],Ha);class Xce{constructor(t,i,r,n,o){this.type=t,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=o,this._propagationState=al.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=al.STOPPED}shouldStopPropagation(){return(this._propagationState&al.STOPPED)!=0}async(t){this._propagationState|=al.PAUSED;const i=(r,n)=>{this._propagationState&=~al.PAUSED;const o=this._resumeCallback;if(this._resumeCallback=null,o&&o(),n)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&al.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var al;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(al||(al={}));const Al={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class Qce{}function IE(e){return e&&typeof e.highlight=="function"}const Cw={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},nc=new Vp({id:"zoom-to-feature",title:"{messages.zoom}",className:Cw.iconZoom}),eP=new Vp({id:"remove-selected-feature",title:"{messages.remove}",className:Cw.iconTrash}),Ud=new Vp({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Cw.iconZoom}),Vd=new Vp({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Cw.iconBrowseClusteredFeatures}),ede="esri.widgets.Popup.PopupViewModel",rv=W.getLogger(ede),tde=e=>{const{event:t,view:i}=e,{action:r}=t,n=i&&i.popup;if(!r)return Promise.reject(new N("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new N("trigger-action:missing-arguments","view.popup is missing"));const{disabled:o,id:s}=r;if(!s)return Promise.reject(new N("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new N("trigger-action:invalid-action","Action is disabled"));if(s===nc.id)return rde(n.viewModel).catch(R_);if(s===Ud.id)return nde(n.viewModel);if(s===Vd.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,s===eP.id){n.close();const{selectedFeature:a}=n;if(!a)return Promise.reject(new N(`trigger-action:${eP.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:u}=a;return u?u.remove(a):i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function _F(e){const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function Ou(e){var t,i;return(e==null?void 0:e.isAggregate)&&((i=(t=e==null?void 0:e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}function ide(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r=!1;return i.whenGraphicBounds(e,{useViewElevation:!0}).then(n=>{r=!n||!n.boundingBox||n.boundingBox[0]===n.boundingBox[3]&&n.boundingBox[1]===n.boundingBox[4]&&n.boundingBox[2]===n.boundingBox[5]}).catch(()=>{const n=new N("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});rv.error(n)}),r}return!0}async function rde(e){const{location:t,selectedFeature:i,view:r,zoomFactor:n}=e,o=_F(e);if(!o){const d=new N("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:r});throw rv.error(d),d}const s=r.scale/n,a=e.get("selectedFeature.geometry")||t,u=a&&a.type==="point"&&ide(i,r);nc.active=!0,nc.disabled=!0;try{await e.view.goTo({target:o,scale:u?s:void 0})}finally{nc.active=!1,nc.disabled=!1,e.zoomToLocation=null,u&&(e.location=a)}}async function nde(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const a=new N("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw rv.error(a),a}if(!Ou(t)){const a=new N("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw rv.error(a),a}const r=t.sourceLayer,n=await i.whenLayerView(r),o=n.createQuery();o.aggregateIds=[t.getObjectId()],Ud.active=!0,Ud.disabled=!0;const{extent:s}=await n.queryExtent(o);await i.goTo({target:s}),Ud.active=!1,Ud.disabled=!1}async function ode(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,n=await i.whenLayerView(r),o=n.createQuery();o.aggregateIds=[t.getObjectId()];const{extent:s}=await n.queryExtent(o);e.selectedClusterBoundaryFeature.geometry=s,i.graphics.add(e.selectedClusterBoundaryFeature)}async function sde(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,n=await i.whenLayerView(r),o=n.createQuery();o.aggregateIds=[t.getObjectId()],Vd.active=!0,Vd.disabled=!0;const{features:s}=await n.queryFeatures(o);Vd.active=!1,Vd.disabled=!1,i.popup.open({features:[t].concat(s),featureMenuOpen:!0})}function ade(e){const t=e.features.filter(i=>Ou(i));t.length&&(e.features=t)}const D3=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return l([c()],t.prototype,"goToOverride",void 0),l([c()],t.prototype,"view",void 0),t=l([S("esri.widgets.support.GoTo")],t),t},ey=he.ofType({key:"type",defaultKeyValue:"button",base:Hv,typeMap:{button:Vp,toggle:m9}}),lde=()=>[nc.clone()],ude=()=>[Ud.clone(),Vd.clone()],SF="esri.widgets.Popup.PopupViewModel",f0=W.getLogger(SF);let Re=class extends D3(oF){constructor(e){super(e),this._handles=new gi,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new ey,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new Pi({symbol:new na({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([q(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),q(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),q(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),q(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),q(()=>this.location,e=>this._locationChange(e)),q(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),q(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),q(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),q(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>tde({event:e,view:this.view})),mn(()=>!this.waitingForResult,()=>this._waitingForResultChange(),dp),q(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),q(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),mn(()=>!this.visible,()=>this.browseClusterEnabled=!1),q(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new ey;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:n,selectedFeature:o}=this,s=n?i.concat(t):t,a=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(r)||o.popupTemplate),u=a&&a.actions,d=a&&a.overwriteActions?u:u?u.concat(s):s;return d&&d.filter(Boolean).forEach(h=>e.add(h)),e}get defaultActions(){const e=this._get("defaultActions")||new ey;return e.removeAll(),e.addMany(Ou(this.selectedFeature)?ude():lde()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:n}=this,o=r&&t.length;o&&i&&n===-1?this.selectedFeatureIndex=0:o&&n!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=qs(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=n=>{this._pendingPromises.has(t)&&this._updateFeatures(n),this._updatePendingPromises(t)},r=()=>this._updatePendingPromises(t);t.then(i,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=_F(this);if(!t){const i=new N("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return f0.error(i),Promise.reject(i)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e){const r=new N("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return f0.error(r),Promise.reject(r)}return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const n of r)delete t[n];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){ade(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?Ou(t)?(await ode(this),await sde(this)):f0.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):f0.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(nc.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Ou(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:n}=this;if(i===null)return;const o=((i-1)*r+t)%t,s=o+r;n.slice(o,s).forEach((a,u)=>{a&&!a.graphic&&(a.graphic=e[o+u])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:r}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Ou(e)?void 0:(e.symbol=await zce(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=r.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:r}=t,n=Promise.resolve(i),o=r.map(s=>s.promise);this.promises=[n,...o]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(Ou(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),n=[];t.forEach((o,s)=>{var u,d;if(!o)return;let a=null;if(r.some((h,f)=>(h&&h.graphic===o&&(a=h,r.splice(f,1)),!!a)),a)n[s]=a;else{const h=new M3({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(u=this.view)==null?void 0:u.spatialReference,graphic:o===e?o:null,map:(d=this.view)==null?void 0:d.map,view:this.view});n[s]=h}}),r.forEach(o=>o&&!o.destroyed&&o.destroy()),this._set("featureViewModels",n)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const r=this.view.on("click",n=>{n.pointerType==="mouse"&&n.button!==0||this._fetchFeaturesAndOpen(n)},Al.WIDGET);t.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const n=this.fetchFeatures(e,{signal:r,event:t});return n.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),n}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then(n=>{const{clientOnlyGraphics:o,promisesPerLayerView:s,location:a}=n,u=[Promise.resolve(o),...s.map(d=>d.promise)];return r.popup.open({location:a||i,promises:u}),n})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return O(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:i}=e;return(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:t}_getHighlightTarget(e,t){const i=t.type==="imagery"?void 0:"objectIdField"in t&&t.objectIdField,r=e.attributes;return r&&i&&r[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:i,activeFeature:r,visible:n}=this;if(!(r&&i&&t&&n))return;const o=this._getHighlightLayer(r);if(!(o&&o instanceof yp))return;const s=this._getLayerView(i,o);this._highlightActiveFeaturePromise=s;const a=await s;if(!(a&&IE(a)&&this._highlightActiveFeaturePromise===s&&this.activeFeature&&this.highlightEnabled))return;const u=a.highlight(this._getHighlightTarget(r,o));this._handles.add(u,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:n}=this;if(!(t&&r&&i&&n))return;const o=this._getHighlightLayer(t);if(!(o&&o instanceof yp))return;const s=this._getLayerView(r,o);this._highlightSelectedFeaturePromise=s;const a=await s;if(!(a&&IE(a)&&this._highlightSelectedFeaturePromise===s&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u=a.highlight(this._getHighlightTarget(t,o));this._handles.add(u,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(r=>!t.includes(r));this.features=t.concat(i)}};l([c()],Re.prototype,"featurePage",void 0),l([c()],Re.prototype,"isLoadingFeature",null),l([c({type:ey})],Re.prototype,"actions",void 0),l([c({readOnly:!0})],Re.prototype,"active",null),l([c()],Re.prototype,"activeFeature",void 0),l([c({readOnly:!0})],Re.prototype,"allActions",null),l([c({type:Boolean})],Re.prototype,"defaultPopupTemplateEnabled",void 0),l([c()],Re.prototype,"autoCloseEnabled",void 0),l([c()],Re.prototype,"autoOpenEnabled",void 0),l([c()],Re.prototype,"browseClusterEnabled",void 0),l([c()],Re.prototype,"content",void 0),l([c({type:ey,readOnly:!0})],Re.prototype,"defaultActions",null),l([c({readOnly:!0})],Re.prototype,"featureCount",null),l([c()],Re.prototype,"features",null),l([c()],Re.prototype,"featuresPerPage",void 0),l([c()],Re.prototype,"featureViewModelAbilities",void 0),l([c({readOnly:!0})],Re.prototype,"featureViewModels",void 0),l([c()],Re.prototype,"highlightEnabled",void 0),l([c()],Re.prototype,"includeDefaultActions",void 0),l([c({type:le})],Re.prototype,"location",null),l([c({readOnly:!0})],Re.prototype,"pendingPromisesCount",null),l([c({readOnly:!0})],Re.prototype,"selectedClusterBoundaryFeature",void 0),l([c({readOnly:!0})],Re.prototype,"waitingForResult",null),l([c({readOnly:!0})],Re.prototype,"promiseCount",null),l([c()],Re.prototype,"promises",null),l([c({value:null,readOnly:!0})],Re.prototype,"selectedFeature",null),l([c({value:-1})],Re.prototype,"selectedFeatureIndex",null),l([c({readOnly:!0})],Re.prototype,"selectedFeatureViewModel",null),l([c({readOnly:!0})],Re.prototype,"state",null),l([c()],Re.prototype,"title",void 0),l([c()],Re.prototype,"updateLocationEnabled",void 0),l([c()],Re.prototype,"view",void 0),l([c()],Re.prototype,"visible",void 0),l([c()],Re.prototype,"zoomFactor",void 0),l([c()],Re.prototype,"zoomToLocation",void 0),l([c()],Re.prototype,"centerAtLocation",null),Re=l([S(SF)],Re);const TF=Re,tP="selected-index",cde=0,iP="popup-spinner",H={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},rP={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},nP="esri-popup";function cs(e,t){return t===void 0?`${nP}__${e}`:`${nP}__${e}-${t}`}const EF="esri.widgets.Popup",oP=W.getLogger(EF),sP={closeButton:!0,featureNavigation:!0};let de=class extends rF(vi){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new gi,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=Cx(()=>this._displaySpinner(),cde),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new TF,this.visible=null,this.visibleElements={...sP},this._addSelectedFeatureIndexHandle(),this.own([q(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),q(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),q(()=>{var i,r,n,o,s,a;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(o=(n=this.viewModel)==null?void 0:n.view)==null?void 0:o.size,(s=this.viewModel)==null?void 0:s.active,(a=this.viewModel)==null?void 0:a.location,this.alignment]},()=>this.reposition()),q(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),q(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),q(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i,r)),q(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),q(()=>{var i,r,n,o;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(o=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:o.state]},()=>this._setTitleFromFeatureWidget()),q(()=>{var i,r,n,o;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(o=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:o.state]},()=>this._setContentFromFeatureWidget()),mn(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Nl(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),ze),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,i,r,n,o,s;return!!(this.selectedFeatureWidget?((t=(e=this.selectedFeatureWidget)==null?void 0:e.viewModel)==null?void 0:t.waitingForContent)||((r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.state)==="error"||((o=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:o.content):(s=this.viewModel)==null?void 0:s.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||rP}set dockOptions(e){const t={...rP},i=this.get("viewModel.view.breakpoints"),r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const n={...t,...e},o={...t.breakpoint,...r},{breakpoint:s}=n;s===!0?n.breakpoint=o:typeof s=="object"&&(n.breakpoint={...o,...s}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:r}=this.viewModel,n={...t,title:!1};return r?(e?(e.viewModel=r,e.visibleElements=n):this._feature=new dce({headingLevel:i+1,viewModel:r,visibleElements:n}),this._feature):null}castVisibleElements(e){return{...sP,...e}}blur(){const{active:e}=this.viewModel;e||oP.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||oP.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var n,o;this._handles.remove(tP);const t=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:t};((o=(n=this.viewModel)==null?void 0:n.view)==null?void 0:o.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var g,v,w,_;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:i,dividedActions:r,currentAlignment:n,currentDockPosition:o}=this,{active:s}=this.viewModel,{menuActions:a}=r,u=s&&a.length>1&&e,d=s&&t,h=s&&!t,f=(v=(g=this.selectedFeature)==null?void 0:g.layer)==null?void 0:v.title,y=(_=(w=this.selectedFeature)==null?void 0:w.layer)==null?void 0:_.id,m={[H.alignTopCenter]:n==="top-center",[H.alignBottomCenter]:n==="bottom-center",[H.alignTopLeft]:n==="top-left",[H.alignBottomLeft]:n==="bottom-left",[H.alignTopRight]:n==="top-right",[H.alignBottomRight]:n==="bottom-right",[H.isDocked]:d,[H.shadow]:h,[H.isDockedTopLeft]:o==="top-left",[H.isDockedTopCenter]:o==="top-center",[H.isDockedTopRight]:o==="top-right",[H.isDockedBottomLeft]:o==="bottom-left",[H.isDockedBottomCenter]:o==="bottom-center",[H.isDockedBottomRight]:o==="bottom-right",[H.isFeatureMenuOpen]:i,[H.isActionsMenuOpen]:u};return C("div",{class:this.classes(H.base,m),role:"presentation","data-layer-title":f,"data-layer-id":y,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},s?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return C("span",{"aria-hidden":"true",class:this.classes(H.icon,H.iconLoading,H.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?C("div",{key:cs("loading-container"),role:"presentation",class:H.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=gl(this.container),t={[H.iconRightTriangleArrow]:e,[H.paginationPreviousIconRTL]:e,[H.iconLeftTriangleArrow]:!e,[H.paginationPreviousIconLTR]:!e};return C("span",{"aria-hidden":"true",class:this.classes(H.icon,t)})}renderPreviousButton(){const{messages:e}=this;return C("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(H.button,H.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=gl(this.container),t={[H.iconLeftTriangleArrow]:e,[H.paginationNextIconRTL]:e,[H.iconRightTriangleArrow]:!e,[H.paginationNextIconLTR]:!e};return C("span",{"aria-hidden":"true",class:this.classes(H.icon,t)})}renderNextButton(){const{messages:e}=this;return C("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(H.button,H.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:n}=this.viewModel;return C("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(H.button,H.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[H.iconUndock]:e,[H.iconDock]:!e,[H.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[H.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[H.iconDockToTop]:!e&&t==="top-center",[H.iconDockToBottom]:!e&&t==="bottom-center"};return C("span",{"aria-hidden":"true",class:this.classes(i,H.icon)})}renderDockButton(){var n,o,s;const{dockEnabled:e,messages:t}=this,i=(o=(n=this.viewModel)==null?void 0:n.view)==null?void 0:o.widthBreakpoint,r=e?t.undock:t.dock;return i!=="xsmall"&&((s=this.dockOptions)==null?void 0:s.buttonEnabled)?C("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(H.button,H.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:n}=this,o={[H.headerContainerButton]:i},s=C(kx,{level:this.headingLevel,class:H.headerTitle,innerHTML:e}),a=i?C("button",{key:`${e}--collapsible`,id:t,title:r?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(H.headerContainer,o),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},s):C("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(H.headerContainer,o)},s);return e?a:null}renderCloseIcon(){return C("span",{"aria-hidden":"true",class:this.classes(H.icon,H.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?C("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:H.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return C("header",{class:H.header},this.renderTitle(),C("div",{class:H.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:r}=this.viewModel;return t&&!i?C("article",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:H.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:n}=this,o=i?n.close:n.open,{menuActions:s}=r;return s.length?C("div",{key:cs("actions-menu-button"),class:this.classes(H.button,H.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},C("span",{"aria-hidden":"true",class:H.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:n}=r;return n.length&&i?C("ul",{id:e,role:"menu","aria-labelledby":t,key:cs("actions"),class:H.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(o=>this.renderAction({action:o,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?C("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:H.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?C("section",{key:cs("navigation"),class:this.classes(H.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,n=!!i.length,o=!!r.length,s={[H.footerHasPagination]:e,[H.footerHasActions]:n,[H.footerHasActionsMenu]:o};return e||n?C("div",{key:cs("feature-buttons"),class:this.classes(H.footer,s)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=Wn(e.selectedFeatures,{total:t.length});return C("section",{key:cs("menu"),class:H.featureMenu},C("strong",{class:H.featureMenuHeader},r),C("nav",{bind:this,class:H.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Qu},this.renderFeatureMenu(),C("div",{class:H.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?C("div",{class:H.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:C("div",{key:cs("pointer"),class:H.pointer,role:"presentation"},C("div",{class:this.classes(H.pointerDirection,H.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:n,collapsible:o,hasContent:s,contentCollapsed:a,visibleElements:u}=this,{title:d}=this.viewModel,h=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",f=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",y={[H.shadow]:e,[H.isCollapsible]:o,[H.isCollapsed]:a};return C("div",{class:this.classes(H.main,H.widget,y),tabIndex:u.closeButton?null:-1,role:"dialog","aria-labelledby":d?r:"","aria-describedby":s&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?C("div",{key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return C("span",{key:"text",class:H.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[H.iconLoading]:e.active,[H.rotating]:e.active,[H.icon]:!!t,[H.actionImage]:!e.active&&!!i};return t&&(r[t]=!e.active),C("span",{key:"icon","aria-hidden":"true",class:this.classes(H.icon,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),n={[H.action]:t.type!=="toggle",[H.actionToggle]:t.type==="toggle",[H.actionToggleOn]:t.type==="toggle"&&t.value,[H.buttonDisabled]:t.disabled},o=[this.renderActionIcon(t),this.renderActionText(r)],s=i==="menu-item"?C("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(H.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):C("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(H.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return t.visible?s:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:o}=this.viewModel,s=e===o,a={[H.featureMenuSelected]:s},u=s?C("span",{key:cs(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:H.iconCheckMark}):null,d=C("span",{innerHTML:e.title||r.untitled});return C("li",{role:"menuitem",tabIndex:-1,key:cs(`feature-menu-feature-${n}`),class:this.classes(a,H.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},C("span",{class:H.featureMenuTitle},d,u))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?C("ol",{class:H.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:n}=e,o=i==null?void 0:i.attributes,s=n==="zoom-to-feature"?Wn(e.title,{messages:t}):n==="remove-selected-feature"?Wn(e.title,{messages:r}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?Wn(e.title,{messages:t}):e.title;return s&&o?Wn(s,o):s}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:r,image:n}=e,o=n||r?r:H.iconDefaultAction;return o&&i?Wn(o,i):o}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:r}=e;return r&&i?Wn(r,i):r}_createFeatureUpdatedAnimation(){return eQ("enter",H.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(q(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(o=>o.visible),i=this._getInlineActionCount(),r=i===null,n=i===0;return{inlineActions:r?t.slice(0):n?new he:t.slice(0,i),menuActions:r?new he:n?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){Bo(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){Bo(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,i=e.currentTarget["data-feature-index"];t.activeFeature=t.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=Bo(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const n=i.querySelectorAll("li"),o=n.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(r+1+o)%o].focus()):(e.stopPropagation(),n[(r-1+o)%o].focus())}_handleActionMenuItemKeyup(e){const t=Bo(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,o=n.findIndex(u=>u.uid===r);if(!i)return;const s=i.querySelectorAll("li"),a=s.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(o+1+a)%a].focus()):(e.stopPropagation(),s[(o-1+a)%a].focus())}_handleMainKeyup(e){const t=Bo(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await hy(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=q(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,tP)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:n,view:o}=e;if(isNaN(i)||isNaN(t)||!o||!r)return!1;const s=o.padding;return n==="right"&&r.x+i/2>o.width-s.right||n==="left"&&r.x-i/2<s.left||n==="top"&&r.y-t<s.top||n==="bottom"&&r.y+t>o.height-s.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:n}=this,{screenLocation:o,view:s}=n;if(O(o)||!s||!i)return"top-center";if(!this._isScreenLocationWithinView(o,s))return this._get("currentAlignment")||"top-center";function a(I){return parseInt(I.replace(/[^-\d\.]/g,""),10)}const u=r?window.getComputedStyle(r,null):null,d=u?a(u.getPropertyValue("max-height")):0,h=u?a(u.getPropertyValue("height")):0,{height:f,width:y}=i.getBoundingClientRect(),m=y+t,g=Math.max(f,d,h)+t,v=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:o,side:"right",view:s}),w=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:o,side:"left",view:s}),_=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:o,side:"top",view:s}),A=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:o,side:"bottom",view:s});return w?_?"bottom-right":"top-right":v?_?"bottom-left":"top-left":_?A?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return gl(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var s;if(e!=="auto")return e;const t=(s=this.viewModel)==null?void 0:s.view,i=gl(this.container)?"top-left":"top-right";if(!t)return i;const r=t.padding||{left:0,right:0,top:0,bottom:0},n=t.width-r.left-r.right,{breakpoints:o}=t;return o&&n<=o.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&(e.style.top=r.top,e.style.left=r.left,e.style.bottom=r.bottom,e.style.right=r.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:n,_pointerOffsetInPx:o}=this,s=r/2,a=i.height-t,u=i.width-e,{padding:d}=this.view;return n==="bottom-center"?{top:t+o-d.top,left:e-s-d.left}:n==="top-left"?{bottom:a+o-d.bottom,right:u+o-d.right}:n==="bottom-left"?{top:t+o-d.top,right:u+o-d.right}:n==="top-right"?{bottom:a+o-d.bottom,left:e+o-d.left}:n==="bottom-right"?{top:t+o-d.top,left:e+o-d.left}:n==="top-center"?{bottom:a+o-d.bottom,left:e-s-d.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(O(e)||!t)return;const n=this._calculateFullWidth(t),o=this._calculateAlignmentPosition(e.x,e.y,r,n);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,n]=e,[o,s]=t,{width:a,height:u}=i;return r<=a&&o>a||r>a&&o<=a||n<=u&&s>u||n>u&&s<=u}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,n=i.top+i.bottom,o=[],s=[];o[0]=e[0]-r,o[1]=e[1]-n,s[0]=t[0]-r,s[1]=t[1]-n;const{dockOptions:a}=this,u=a.breakpoint;this._dockingThresholdCrossed(o,s,u)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var a,u;const t=e.breakpoint,i=(u=(a=this.viewModel)==null?void 0:a.view)==null?void 0:u.ui;if(!i)return!1;const{width:r,height:n}=i;if(isNaN(r)||isNaN(n))return!1;const o=t.hasOwnProperty("width")&&r<=t.width,s=t.hasOwnProperty("height")&&n<=t.height;return o||s}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?Wn(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,iP),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new hce({view:e}),e.ui.add(this._spinner,{key:iP,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(o=>o.uid===t),n=i.getItemAt(r);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};l([c({readOnly:!0})],de.prototype,"actionsMenuId",null),l([c({readOnly:!0})],de.prototype,"actionsMenuButtonId",null),l([c({readOnly:!0})],de.prototype,"featureMenuId",null),l([c({readOnly:!0})],de.prototype,"titleId",null),l([c({readOnly:!0})],de.prototype,"contentId",null),l([c({readOnly:!0})],de.prototype,"hasContent",null),l([c({readOnly:!0})],de.prototype,"featureNavigationVisible",null),l([c({readOnly:!0})],de.prototype,"collapsible",null),l([c({readOnly:!0})],de.prototype,"featureMenuVisible",null),l([c({readOnly:!0})],de.prototype,"contentCollapsed",null),l([c({readOnly:!0})],de.prototype,"dividedActions",null),l([J("viewModel.actions")],de.prototype,"actions",void 0),l([c()],de.prototype,"actionsMenuOpen",null),l([c()],de.prototype,"alignment",void 0),l([J("viewModel.autoCloseEnabled")],de.prototype,"autoCloseEnabled",void 0),l([J("viewModel.autoOpenEnabled")],de.prototype,"autoOpenEnabled",void 0),l([J("viewModel.defaultPopupTemplateEnabled")],de.prototype,"defaultPopupTemplateEnabled",void 0),l([J("viewModel.content")],de.prototype,"content",void 0),l([c()],de.prototype,"collapsed",void 0),l([c()],de.prototype,"collapseEnabled",void 0),l([c({readOnly:!0})],de.prototype,"currentAlignment",null),l([c({readOnly:!0})],de.prototype,"currentDockPosition",null),l([c()],de.prototype,"dockOptions",null),l([c()],de.prototype,"dockEnabled",void 0),l([J("viewModel.featureCount")],de.prototype,"featureCount",void 0),l([c()],de.prototype,"featureMenuOpen",void 0),l([J("viewModel.features")],de.prototype,"features",void 0),l([J("viewModel.goToOverride")],de.prototype,"goToOverride",void 0),l([c()],de.prototype,"headingLevel",void 0),l([J("viewModel.highlightEnabled")],de.prototype,"highlightEnabled",void 0),l([J("viewModel.location")],de.prototype,"location",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],de.prototype,"label",void 0),l([c()],de.prototype,"maxInlineActions",void 0),l([c(),pi("esri/widgets/Popup/t9n/Popup")],de.prototype,"messages",void 0),l([c(),pi("esri/t9n/common")],de.prototype,"messagesCommon",void 0),l([J("viewModel.promises")],de.prototype,"promises",void 0),l([J("viewModel.selectedFeature")],de.prototype,"selectedFeature",void 0),l([J("viewModel.selectedFeatureIndex")],de.prototype,"selectedFeatureIndex",void 0),l([c({readOnly:!0})],de.prototype,"selectedFeatureWidget",null),l([c()],de.prototype,"spinnerEnabled",void 0),l([J("viewModel.title")],de.prototype,"title",void 0),l([J("viewModel.updateLocationEnabled")],de.prototype,"updateLocationEnabled",void 0),l([J("viewModel.view")],de.prototype,"view",void 0),l([c({type:TF}),L6(["triggerAction","trigger-action"])],de.prototype,"viewModel",void 0),l([J("viewModel.visible")],de.prototype,"visible",void 0),l([c()],de.prototype,"visibleElements",void 0),l([Fe("visibleElements")],de.prototype,"castVisibleElements",null),l([lr()],de.prototype,"_close",null),l([lr()],de.prototype,"_toggleDockEnabled",null),l([lr()],de.prototype,"_toggleFeatureMenu",null),l([lr()],de.prototype,"_toggleActionsMenu",null),l([lr()],de.prototype,"_triggerAction",null),l([lr()],de.prototype,"_selectFeature",null),l([lr()],de.prototype,"_next",null),l([lr()],de.prototype,"_previous",null),de=l([S(EF)],de);const aP=de,r_=[0,0];function dde(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return r_[0]=i.left+t.pageXOffset,r_[1]=i.top+t.pageYOffset,r_}function lP(e){e&&(xO(e),e.parentNode&&e.parentNode.removeChild(e))}function pde(e){const t=document.createElement("div");return e.appendChild(t),t}const xh=16,y0=750,hde=512,fde=2,yde=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:xh,time:y0},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([q(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),q(()=>this.interacting,r=>{const{surface:n}=this;n&&n.setAttribute("data-interacting",r.toString())})])}initialize(){this.handles.add(q(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(i){const r=this._get("container");if(r===i)return;const n="dom-size";if(this.handles.remove(n),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),lP(this.root),this._set("root",null),dM(this.userContent,r),lP(this.userContent),this._set("userContent",null)),i){i.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",dM(i,o),i.appendChild(o),this._set("userContent",o);const s=document.createElement("div");s.className="esri-view-root",i.insertBefore(s,i.firstChild),this._set("root",s);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,s.appendChild(a),this._set("surface",a);const u=new _M;s.appendChild(u.surface),this._set("overlay",u),q(()=>u.needsRender,d=>{d&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=up({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(q(()=>this.size,d=>{const[h,f]=d,y="esri-view-surface--inset-outline";h>=document.body.clientWidth||f>=document.body.clientHeight?a.classList.add(y):a.classList.remove(y)},ze),n),this._set("container",i),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get popup(){return this._get("popup")||new aP({view:this})}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,n){const o=this.position;return i-=o[0],r-=o[1],n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const o=this.position;return i+=o[0],r+=o[1],n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([q(()=>this.root,r=>{i.container=r?pde(r):null},ze),q(()=>this.popup,(r,n)=>{const o="popup",s="manual";n&&i.remove(n,o),r&&(r.view=i.view,i.add(r,{key:o,position:s}))},ze)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=xh,i.time=y0,this.handles.add([(()=>{const r=()=>{i.freq=xh,i.time=y0};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),up({prepare:r=>{const n=this._measure(),o=this._freqInfo;if(o.time+=r.deltaTime,n&&(o.freq=xh,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;const s=this._position();o.freq=s||n?xh:Math.min(y0,o.freq*fde),!n&&o.freq>=hde&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,s=this.height;return r===o&&n===s?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:s,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=dde(i);return(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return l([c({value:null,cast:i=>Tx(i)})],t.prototype,"container",null),l([c({readOnly:!0})],t.prototype,"focused",null),l([c({readOnly:!0})],t.prototype,"height",void 0),l([c({type:aP})],t.prototype,"popup",null),l([c({type:_M})],t.prototype,"overlay",void 0),l([c({readOnly:!0})],t.prototype,"position",void 0),l([c({readOnly:!0})],t.prototype,"resizing",void 0),l([c({readOnly:!0})],t.prototype,"root",void 0),l([c({value:null,readOnly:!0})],t.prototype,"size",null),l([c({readOnly:!0})],t.prototype,"surface",void 0),l([c({readOnly:!0})],t.prototype,"suspended",void 0),l([c()],t.prototype,"ui",void 0),l([c({readOnly:!0})],t.prototype,"userContent",void 0),l([c({readOnly:!0})],t.prototype,"width",void 0),l([c()],t.prototype,"widthBreakpoint",void 0),t=l([S("esri.views.DOMContainer")],t),t},mde=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:n,queryArea:o,layerViewsAndGraphics:s,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,r),u=Promise.resolve(a),d=this._queryLayerPopupFeatures(o,s,r),h=d.map(f=>f.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:$j([u,...h]).then(f=>Array.from(new Set(f.flat()))),promisesPerLayerView:d}}_queryLayerPopupFeatures(i,r,n){return r.map(({layerView:o,graphics:s})=>{const a={clientGraphics:s,event:T(n)?n.event:null,signal:T(n)?n.signal:null,defaultPopupTemplateEnabled:!!T(n)&&!!n.defaultPopupTemplateEnabled},u=o.fetchPopupFeatures(i,a);return{layerView:o,promise:u}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(T(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:n,queryArea:o,location:s}=await this._popupHitTestGraphics(i,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:u,clientOnlyGraphics:d}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:d,layerViewsAndGraphics:u,queryArea:o,location:s}}async _popupHitTestGraphics(i,r){const{results:n,mapPoint:o}=await this.popupHitTest(i),s=n.filter(u=>u.type==="graphic"&&this._isValidPopupGraphic(u.graphic,r)),a=s.length?s[0].mapPoint:null;return{clientGraphics:s.map(u=>u.graphic),queryArea:o,location:o||a}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),T(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return T(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const n=[],o=new Map,s=r.map(a=>{const u=[];return"layer"in a?o.set(a.layer,u):o.set(a.graphics,u),{layerView:a,graphics:u}});for(const a of i){const u=o.get(a.layer)||o.get(a.sourceLayer)||null;u?u.push(a):n.push(a)}return{layerViewsAndGraphics:s,clientOnlyGraphics:n}}};return t=l([S("esri.views.PopupView")],t),t};W.getLogger("esri.core.support.OwningCollection");let ty=class extends Ll(he){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{O(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(he.ofType(this.itemType.Type))(e):new he(e)}};function uP(e,t){return{type:e,cast:_5,set(i){const r=hc(i,this._get(t),e);r.owner=this,this._set(t,r)}}}l([c()],ty.prototype,"owner",null),ty=l([S("esri.core.support.OwningCollection")],ty);const gde=W.getLogger("esri.support.AnalysesCollection");let nv=class extends ty{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{O(t.item)||t.item.parent===this.owner&&(gde.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};nv=l([S("esri.support.AnalysesCollection")],nv);let iy=class extends ty{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};l([wA({Type:Pi,ensureType:Ze(Pi)})],iy.prototype,"itemType",void 0),iy=l([S("esri.support.GraphicsCollection")],iy);let Ga=class extends se{constructor(e){super(e),this.view=null,this.baseLayerViews=new he,this.referenceLayerViews=new he,this._loadingHandle=q(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap},t=>{t&&t.load().catch(()=>{})},ze)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,i;if(this.view&&this.view.suspended)return!1;const e=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};l([c({constructOnly:!0})],Ga.prototype,"view",void 0),l([c({readOnly:!0})],Ga.prototype,"baseLayerViews",void 0),l([c({readOnly:!0})],Ga.prototype,"referenceLayerViews",void 0),l([c({readOnly:!0})],Ga.prototype,"suspended",null),l([c({type:Boolean,readOnly:!0})],Ga.prototype,"updating",null),Ga=l([S("esri.views.BasemapView")],Ga);const vde=W.getLogger("esri.views.LayerViewManager");class wde{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Xs(),this._started=!1,this.done=!1,fn(this._controller.signal,()=>{const n=new N("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var n,o;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let s,a;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)s=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new N("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(i);_t(t),s="default"in h?new h.default({layer:i,view:r}):new h({layer:i,view:r})}const u=()=>{a=Dr(a),s.destroyed||s.destroy(),s.layer=null,s.parent=null,s.view=null,this.done=!0};a=fn(t,u),_t(t);try{await s.when()}catch(h){throw u(),h}if(!((o=(n=this._map)==null?void 0:n.allLayers)==null?void 0:o.includes(i)))return u(),void this._deferred.reject(new N("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=s,i.emit("layerview-create",{view:r,layerView:s}),r.emit("layerview-create",{layer:i,layerView:s}),this.done=!0,this._deferred.resolve(s)}catch(s){i.emit("layerview-create-error",{view:r,error:s}),r.emit("layerview-create-error",{layer:i,error:s}),this.done=!0,this._deferred.reject(new N("layerview:create-error","layerview creation failed",{layer:i,error:s}))}}}let tn=class extends fy{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new Zd,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const t=(i=this.view.map)==null?void 0:i.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(O(this._workPromise)&&(this._workPromise=Xs()),this.handles.remove("reschedule"),this.handles.add(Lp(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var o,s,a;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),O(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const i=new pp({getCollections:()=>this._rootCollectionNames.map(u=>this.get(u)),getChildrenFunction:u=>u&&"layers"in u?u.layers:null});if(!i)return this._workPromise.resolve(),void(this._workPromise=null);for(const u of i)this._createLayerView(u);this._refreshCollections();for(const[u,d]of this._layerLayerViewInfoMap)i.includes(u)||(this._layerLayerViewInfoMap.delete(d.layer),d.destroy());const r=i.filter(u=>u.type==="group").map(u=>u.layers),n=[(o=t==null?void 0:t.ground)==null?void 0:o.layers,(s=t==null?void 0:t.basemap)==null?void 0:s.baseLayers,(a=t==null?void 0:t.basemap)==null?void 0:a.referenceLayers,t==null?void 0:t.layers,...r].filter(u=>!!u);this.handles.add(n.map(u=>this._watchUpdatingTracking.addOnCollectionChange(()=>u,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([Nl(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),q(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),tl)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return T(this._workPromise)||this._watchUpdatingTracking.updating||Mv(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new N("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const n of e){const o=this._layerLayerViewInfoMap.get(n);if(!o||!o.layerView)continue;const s=o.layerView;s.layer=n,s.parent=i,t.getItemAt(r)!==s&&t.splice(r,0,s),n.layers&&this._populateLayerViewsOwners(n.layers,s.layerViews,s),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new wde(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var r,n;i&&(Ki(i)||i.name==="cancelled:layerview-create")||vde.error(`Failed to create layerview for layer title:'${(r=e.title)!=null?r:"no title"}', id:'${(n=e.id)!=null?n:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([c()],tn.prototype,"_workPromise",void 0),l([c({readOnly:!0})],tn.prototype,"_watchUpdatingTracking",void 0),l([c({readOnly:!0})],tn.prototype,"_layersToLayerViews",null),l([c({readOnly:!0})],tn.prototype,"_rootCollectionNames",null),l([c()],tn.prototype,"layerViewImporter",void 0),l([c()],tn.prototype,"supportsGround",void 0),l([c({readOnly:!0})],tn.prototype,"updating",null),l([c({readOnly:!0})],tn.prototype,"updatingRemaining",null),l([c({constructOnly:!0})],tn.prototype,"view",void 0),tn=l([S("esri.views.LayerViewManager")],tn);const bde=tn;let Ir=class extends se{constructor(e){super(e),this.factor=1.5,this.offset=dr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([c({type:Number})],Ir.prototype,"factor",void 0),l([c({nonNullable:!0})],Ir.prototype,"offset",void 0),l([c()],Ir.prototype,"position",void 0),l([c({type:Number,range:{min:0}})],Ir.prototype,"size",void 0),l([c()],Ir.prototype,"maskUrl",void 0),l([c()],Ir.prototype,"maskEnabled",void 0),l([c()],Ir.prototype,"overlayUrl",void 0),l([c()],Ir.prototype,"overlayEnabled",void 0),l([c({readOnly:!0})],Ir.prototype,"version",null),l([c({type:Boolean})],Ir.prototype,"visible",void 0),Ir=l([S("esri.views.Magnifier")],Ir);const AF=Ir;let Bg=class extends se{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return this.running=!0,new Promise((r,n)=>this._tasks.push(new cP(r,n,e,t,i)))}unshift(e,t,i){return this.running=!0,new Promise((r,n)=>this._tasks.unshift(new cP(r,n,e,t,i)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const i=hn(t.signal);if(i&&!t.abortCallback)t.reject(bt());else{const r=i?t.abortCallback(bt()):t.callback(e);ia(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(i){t.reject(i)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=bt();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0,this.running=!1}};l([c()],Bg.prototype,"running",void 0),Bg=l([S("esri.layers.support.PromiseQueue")],Bg);class cP{constructor(t,i,r,n,o){this.resolve=t,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=o}}let Ef=class extends se{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};l([c()],Ef.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),l([c()],Ef.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Ef=l([S("esri.views.support.DebugFlags")],Ef);const _de=new Ef,Sde=W.getLogger("esri.views.support.Scheduler");var Le;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(Le||(Le={}));const Lo=0,dP=new Map([[Le.RESOURCE_CONTROLLER,Lo],[Le.SLIDE,Lo],[Le.STREAM_DATA_LOADER,Lo],[Le.ELEVATION_QUERY,Lo],[Le.TERRAIN_SURFACE,1],[Le.SURFACE_GEOMETRY_UPDATES,1],[Le.GRAPHICS_CORE,2],[Le.I3S_CONTROLLER,2],[Le.POINT_CLOUD_LAYER,2],[Le.FEATURE_TILE_FETCHER,2],[Le.OVERLAY,4],[Le.STAGE,4],[Le.GRAPHICS_DECONFLICTOR,4],[Le.FILTER_VISIBILITY,4],[Le.SCALE_VISIBILITY,4],[Le.FRUSTUM_VISIBILITY,4],[Le.POINT_OF_INTEREST_FREQUENT,6],[Le.POINT_OF_INTEREST_INFREQUENT,30],[Le.LABELER,8],[Le.FEATURE_QUERY_ENGINE,8],[Le.FEATURE_TILE_TREE,16],[Le.FEATURE_TILE_TREE_ACTIVE,Lo],[Le.ELEVATION_ALIGNMENT,12],[Le.TEXT_TEXTURE_ATLAS,12],[Le.CLOUDS_GENERATOR,12],[Le.TEXTURE_UNLOAD,12],[Le.LINE_OF_SIGHT_TOOL,16],[Le.LINE_OF_SIGHT_TOOL_INTERACTIVE,Lo],[Le.SNAPPING,Lo],[Le.SHADOW_ACCUMULATOR,30]]);function pP(e){return dP.has(e)?dP.get(e):typeof e=="number"?e:1}var Nr;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Nr||(Nr={}));const hP=6.5,fP=1,Tde=30,yP=1e3/30,mP=100,gP=.9;var ME,Gl;(function(e){let t=class extends se{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new Pf("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Nr.INTERACTING,this._tasks=new wl,this._runQueue=new wl,this._load=0,this._idleStateCallbacks=new wl,this._idleUpdatesStartFired=!1,this._maxReschedule=m0,this._forceTask=!1,this._debug=!1,this._debugHandle=q(()=>_de.SCHEDULER_LOG_SLOW_TASKS,s=>this._debug=s,ze);for(const s of Object.keys(Le))this.performanceInfo.tasks.set(Le[s],new Pf(Le[s]));let n;const o=this;this._test={get state(){return bv(n,o._state)},set state(s){n=s},FRAME_SAFETY_BUDGET:hP,INTERACTING_BUDGET:yP,IDLE_BUDGET:mP,get availableBudget(){return o._budget.budget},usedBudget:0,getBudget:()=>o._budget,setBudget:s=>o._budget=s,updateTask:s=>this._updateTask(s),getState:s=>this._getState(s),getRuntime:s=>this._getRuntime(s),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),Dr(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=m0,this._schedule(),this.frame()))}))}registerTask(n,o){const s=pP(n),a=new i(this,n,o,s);return this._tasks.push(a),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new Pf(n)),a}registerIdleStateCallbacks(n,o){const s={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(s),this.state===Nr.IDLE&&this._idleUpdatesStartFired&&s.idleBegin();const a=this;return{remove:()=>this._removeIdleStateCallbacks(s),set idleBegin(u){a._idleUpdatesStartFired&&(s.idleEnd(),a._state===Nr.IDLE&&u()),s.idleBegin=u},set idleEnd(u){s.idleEnd=u}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==Nr.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return O(this._test.state)?this._state:this._test.state}updateBudget(n){this._test.usedBudget=0;let o=hP,s=n.frameDuration,a=fP;switch(this.state){case Nr.IDLE:o=0,s=Math.max(mP,n.frameDuration),a=Tde;break;case Nr.INTERACTING:s=Math.max(yP,n.frameDuration);case Nr.ANIMATING:}return s=s-n.elapsedFrameTime-o,this.state!==Nr.IDLE&&s<fP&&!this._forceTask?(this._forceTask=!0,!1):(s=Math.max(s,a),this._budget.reset(s,this.state),this._maxReschedule=m0,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Nr.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case Nr.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n)}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(s=>s.name===n))return Gl.SCHEDULED;let o=Gl.IDLE;return this._tasks.forAll(s=>{s.name===n&&s.needsUpdate&&(s.schedulePriority<=1?o=Gl.READY:o!==Gl.READY&&(o=Gl.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(s=>{s.name===n&&(o+=s.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(s=>{s.needsUpdate&&n.set(s.name,(n.get(s.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((s,a)=>{o+=s>1?` ${s}x ${a}`:` ${a}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,s)=>s.needsUpdate?++o:o,0);this._load=this._load*gP+n*(1-gP)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===Lo&&n.needsUpdate&&!this._runQueue.includes(n)&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(s=>{s.needsUpdate&&s.schedulePriority!==0&&s.basePriority!==Lo&&(n=!0,o=Math.max(o,s.basePriority),s.schedulePriority===1?(s.schedulePriority=0,this._runQueue.push(s)):--s.schedulePriority)}),!n)return this.updating=!1,!1;this._maxReschedule===m0&&(this._maxReschedule=o),--this._maxReschedule}return this.updating=!0,!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),s=this._runQueue.pop();this._budget.resetProgress();try{s.task.runTask(this._budget)}catch(u){Sde.error(`Exception in task "${s.name}"`,u)}s.schedulePriority=s.basePriority;const a=this._budget.now()-o;if(s.runtime+=a,this._frameTaskTimes.set(s.priority,this._frameTaskTimes.get(s.priority)+a),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",s.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(u=>u.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-n)}while(this._schedule());this.updating=this._tasks.some(o=>o.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(Le))this._frameTaskTimes.set(Le[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,s)=>this.performanceInfo.tasks.get(s).record(o)),this.performanceInfo.total.record(n)}get test(){return this._test}};l([c()],t.prototype,"updating",void 0),t=l([S("esri.views.support.Scheduler")],t),e.Scheduler=t;let i=class extends se{constructor(n,o,s,a){super({}),this._scheduler=n,this.name=o,this._basePriority=a,this.runtime=0,this._queue=new Bg,this._handles=new gi,this.schedulePriority=this._basePriority,this.task=T(s)?s:this._queue,this._handles.add(mn(()=>this.task.running,()=>n.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(xF),this._scheduler.removeTask(this),this.schedule=NE.schedule,this.reschedule=NE.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){this.name=n;const o=pP(n);this._basePriority!==Lo&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,s){return this._queue.push(n,o,s)}reschedule(n,o,s){return this._queue.unshift(n,o,s)}processQueue(n){this._queue.runTask(n)}};l([c({constructOnly:!0})],i.prototype,"task",void 0),l([c({readOnly:!0})],i.prototype,"updating",null),i=l([S("esri.views.support.SchedulerTask")],i);class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Nr.IDLE,this._didWork=!1,this._enabled=!0}run(o){return!this.done&&(o()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(o){this._enabled=o}reset(o,s){this._begin=this.now(),this._budget=o,this._state=s,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=r})(ME||(ME={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Gl||(Gl={}));const xF=(()=>{const e=new ME.Budget;return e.enabled=!1,e})();class Ede{remove(){}processQueue(){}schedule(t,i,r){try{if(hn(i)){const n=bt();return r?Promise.resolve(r(n)):Promise.reject(n)}return $_(t(xF))}catch(n){return Promise.reject(n)}}reschedule(t,i,r){return this.schedule(t,i,r)}}const NE=new Ede,m0=Number.MAX_SAFE_INTEGER;let Af=class extends se{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(Le.TEXTURE_UNLOAD))!=null?i:NE}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let n=this._textureRequests.get(r);return n||(n={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(n.texture),this._stage.loadImmediate(n.texture)),this._textureRequests.set(r,n)),n.referenceCount++,{uid:r,texture:n.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return T(t)?`${e}.${t}px`:e}};l([c()],Af.prototype,"_frameTask",void 0),l([c()],Af.prototype,"updating",null),Af=l([S("esri.views.3d.support.TextureCollection")],Af);var vP;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(vP||(vP={}));const CF=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],IF={};function MF(e){return!!IF[e]}function Ade(e){for(const t of e)if(!MF(t))return!1;return!0}CF.forEach(e=>{IF[e]=!0});class xde{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:i,priority:r},n)=>this.inputManager.installHandlers(n,[i],r))}disconnect(){this.inputManager&&this.handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,i,r,n){const o=Array.isArray(t)?t:t.split(",");if(!Ade(o))return o.some(MF)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let s,a;Array.isArray(i)?a=i:(s=i,a=[]),typeof r=="function"?s=r:n=r,n=n!=null?n:Al.DEFAULT;const u=this._createUniqueGroupName(),d=new Cde(this.view,o,a,s);this.handlers.set(u,{handler:d,priority:n});for(const h of o){const f=this.handlerCounts.get(h)||0;this.handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(u,[d],n),{remove:()=>this._removeHandler(u,o)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,i){if(this.handlers.has(t)){this.handlers.delete(t);for(const r of i){const n=this.handlerCounts.get(r);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):n===1?this.handlerCounts.delete(r):this.handlerCounts.set(r,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class Cde extends ni{constructor(t,i,r,n){super(!0),this.view=t;for(const o of i)switch(o){case"click":this.registerIncoming("click",r,s=>n(this._wrapClick(s)));break;case"double-click":this.registerIncoming("double-click",r,s=>n(this._wrapDoubleClick(s)));break;case"immediate-click":this.registerIncoming("immediate-click",r,s=>n(this._wrapImmediateClick(s)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,s=>n(this._wrapImmediateDoubleClick(s)));break;case"hold":this.registerIncoming("hold",r,s=>n(this._wrapHold(s)));break;case"drag":this.registerIncoming("drag",r,s=>{const a=this._wrapDrag(s);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",r,s=>n(this._wrapKeyDown(s)));break;case"key-up":this.registerIncoming("key-up",r,s=>n(this._wrapKeyUp(s)));break;case"pointer-down":this.registerIncoming("pointer-down",r,s=>n(this._wrapPointer(s,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,s=>n(this._wrapPointer(s,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,s=>n(this._wrapPointer(s,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,s=>n(this._wrapPointerDrag(s)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,s=>n(this._wrapMouseWheel(s)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,s=>n(this._wrapPointer(s,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,s=>n(this._wrapPointer(s,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,s=>{n(this._wrapGamepad(s))});break;case"focus":this.registerIncoming("focus",r,s=>{n(this._wrapFocus(s))});break;case"blur":this.registerIncoming("blur",r,s=>{n(this._wrapBlur(s))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a,eventId:u}=t.data,{cancelable:d,timestamp:h}=t;return{type:"click",pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:h,screenPoint:dr(o,s),mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a,eventId:u}=t.data,{cancelable:d,timestamp:h}=t;return{type:"double-click",pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:h,mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a,eventId:u}=t.data,d=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:d,pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:f,mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a,eventId:u}=t.data,d=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:d,pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:f,mapPoint:this._getMapPoint(o,s),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:n,x:o,y:s,native:a}=t.data,{cancelable:u,timestamp:d}=t;return{type:"hold",pointerType:i,button:r,buttons:n,x:o,y:s,native:a,timestamp:d,mapPoint:this._getMapPoint(o,s),cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(dr(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:n}=i.center,{action:o,pointerType:s,button:a}=i;if(o==="start"&&(this.latestDragStart=i),!this.latestDragStart)return;const u=i.pointer.native,d=i.buttons,{cancelable:h,timestamp:f}=t,y={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return o==="end"&&(this.latestDragStart=void 0),{type:"drag",action:o,x:r,y:n,origin:y,pointerType:s,button:a,buttons:d,radius:i.radius,angle:IL(i.angle),native:u,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:n}=t.data,{cancelable:o,timestamp:s}=t;return{type:"key-down",key:i,repeat:r,native:n,timestamp:s,cancelable:o,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:n,timestamp:o}=t;return{type:"key-up",key:i,native:r,timestamp:o,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:s=>t.async(s),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:n,button:o,buttons:s,native:a,eventId:u}=t.data,d=a.pointerId,h=a.pointerType,{cancelable:f,timestamp:y}=t;return{type:i,x:r,y:n,pointerId:d,pointerType:h,button:o,buttons:s,native:a,timestamp:y,eventId:u,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:n,native:o,eventId:s}=t.data.currentEvent,{button:a}=t.data.startEvent,u=t.data.startEvent.native.pointerId,d=t.data.startEvent.native.pointerType,h=t.data.action,f={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:y,timestamp:m}=t;return{type:"pointer-drag",x:i,y:r,pointerId:u,pointerType:d,button:a,buttons:n,action:h,origin:f,native:o,timestamp:m,eventId:s,cancelable:y,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:n}=t,{x:o,y:s,deltaY:a,native:u}=r;return{type:"mouse-wheel",x:o,y:s,deltaY:a,native:u,timestamp:n,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:n}=t.data,{cancelable:o,timestamp:s}=t,{buttons:a,axes:u}=r;return{type:"gamepad",device:n,timestamp:s,action:i,buttons:a,axes:u,cancelable:o,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}}var Fy,wP,bP;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Fy||(Fy={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(wP||(wP={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(bP||(bP={}));const Ide=W.getLogger("esri.views.interactive.interactiveToolUtils");function Mde(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return Ide.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.visible=!1,i.active&&(i.view.activeTool=null),i.destroy()})]}function ov(e){return e.visible&&e.getEditableFlag(Fy.USER)&&e.getEditableFlag(Fy.MANAGER)}function Ro(e){return dr(e.x,e.y)}function NF(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return dr(t.clientX-i.left,t.clientY-i.top)}function _P(e,t){return t instanceof Event?NF(e,t):Ro(t)}function SP(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class Nde{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":TP(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!EP(t))break;const n=Ro(t),o=this._intersect(n,t.pointerType,i.forEachTool);if(O(o))break;const s=this._findToolAndManipulatorByKey(o,i.forEachTool,g0),a=ko(s,d=>d.manipulator),u=ko(s,d=>d.tool);!(T(a)&&T(u)&&a.interactive)||a.grabbable&&a.grabbableForEvent(t)||!a.grabbing||a.dragging||this._ungrabManipulatorBeforeDragging(a,u,t),T(a)&&a.interactive&&a.grabbable&&a.grabbableForEvent(t)&&!a.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:o,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool!==o.tool&&(this._currentlyActiveTool=i.activeTool,this._revertToActiveTool=!0,i.setActiveTool(o.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),r());break}case"pointer-up":this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!EP(t))break;const n=this._grabbedManipulators.get(t.pointerId),o=this._draggedManipulators.get(t.pointerId),s=ko(n||o,({key:h})=>h),a=this._findManipulatorByKey(s,i.forEachTool);if(O(a))break;const u=Ro(t);u.x=yr(u.x,0,i.view.width),u.y=yr(u.y,0,i.view.height);const d=(n||o).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(a.dragging=!0,o?a.events.emit("drag",{action:"update",start:d,screenPoint:u}):a.events.emit("drag",{action:"start",start:d,screenPoint:u,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:s,start:d}));break;case"end":a.dragging=!1,o&&a.events.emit("drag",{action:"end",start:d,screenPoint:u}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const n=Ro(t),o=this._intersect(n,t.pointerType,i.forEachTool),s=this._findToolAndManipulatorByKey(o,i.forEachTool,g0);if(Rde(t)||i.forEachTool(h=>{if((!T(s)||s.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let f=!1;h.manipulators.forEach(({manipulator:y})=>{y.selected&&(y.selected=!1,f=!0)}),f&&h.manipulatorSelectionChanged&&h.manipulatorSelectionChanged()}}),O(s))break;const{manipulator:a,tool:u}=s;if(!a.interactive)break;a.selectable&&u.automaticManipulatorSelection&&(a.selected=!a.selected,u.manipulatorSelectionChanged&&u.manipulatorSelectionChanged());const d=t.native.shiftKey;a.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:d,stopPropagation:r});break}case"click":{const n=Ro(t),o=this._intersect(n,t.pointerType,i.forEachTool),s=this._findManipulatorByKey(o,i.forEachTool);if(O(s)||!s.interactive)break;const a=t.native.shiftKey;s.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{const n=Ro(t),o=this._intersect(n,t.pointerType,i.forEachTool),s=this._findManipulatorByKey(o,i.forEachTool);if(O(s)||!s.interactive)break;const a=t.native.shiftKey;s.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}case"immediate-double-click":{const n=Ro(t),o=this._intersect(n,t.pointerType,i.forEachTool),s=this._findManipulatorByKey(o,i.forEachTool);if(O(s)||!s.interactive)break;const a=t.native.shiftKey;s.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Ro(r)}),this._grabbedManipulators.forEach(({key:n},o)=>{n.tool===i&&i.manipulators.findById(n.manipulatorId)===t&&this._grabbedManipulators.delete(o)})}_handlePointerEnd(t,i){const r=ko(this._grabbedManipulators.get(t.pointerId),({key:o})=>o),n=this._findManipulatorByKey(r,i.forEachTool);T(n)&&!n.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(i.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Ro(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,i){let r=null;return Mv(t,({key:n})=>{const o=this._findManipulatorByKey(n,i);return!!(T(o)&&o.interactive&&"cursor"in o&&o.cursor)&&(r=o.cursor,!0)}),r}_onFocusChange(t){this._updateCursor(t),this._updateFocusedManipulatorTools(t)}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set;this._grabbedManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),this._hoveredManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),t(r=>{r.hasFocusedManipulators=i.has(r)})}clearPointers(t,i,r=!0,n){const o=s=>s.tool===t&&(O(n)||s.manipulatorId===n);this._grabbedManipulators.forEach(({key:s,pointerType:a},u)=>{if(o(s)){this._grabbedManipulators.delete(u);const d=this._findManipulatorByKey(s,i);T(d)&&(d.grabbing=!1,d.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:a}))}}),this._draggedManipulators.forEach(({key:s},a)=>{if(o(s)){this._draggedManipulators.delete(a);const u=this._findManipulatorByKey(s,i);T(u)&&(u.dragging=!1,u.events.emit("drag",{action:"cancel"}))}}),r&&this._hoveredManipulators.forEach(({key:s},a)=>{if(o(s)){this._hoveredManipulators.delete(a);const u=this._findManipulatorByKey(s,i);T(u)&&(u.hovering=!1)}}),this._onFocusChange(i)}_intersect(t,i,r){let n=null;return r(o=>{if(o.manipulators==null||!ov(o))return!1;const s=o.manipulators.intersect(t,i);return!O(s)&&(n={manipulatorId:s.id,tool:o},!0)}),n}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(dr(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!TP(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Ro(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,n){const o=this._intersect(t,r,n);let s=this._findManipulatorByKey(o,n);const a=ko(this._hoveredManipulators.get(i),({key:d})=>d),u=this._findManipulatorByKey(a,n);T(s)&&!s.interactive&&(s=null),u!==s&&(T(u)&&(u.hovering=!1),T(s)?(s.hovering=!0,this._hoveredManipulators.set(i,{key:o})):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_findManipulatorByKey(t,i){return this._findToolAndManipulatorByKey(t,i,g0)?g0.manipulator:null}_findToolAndManipulatorByKey(t,i,r){return O(t)?null:(r.tool=null,r.manipulator=null,i(n=>{if(n!==t.tool||n.manipulators==null||!ov(n))return!1;const o=n.manipulators.findById(t.manipulatorId);return!!T(o)&&(r.manipulator=o,r.tool=n,!0)}),r.manipulator?r:null)}}function TP(e){return e==="mouse"}function EP(e){return e.pointerType!=="mouse"||e.button===0}function Rde(e){return!!e.native.shiftKey}const g0={manipulator:null,tool:null},Pde=W.getLogger("esri.views.ToolViewManager"),AP="attached",n_="tools";let Ms=class extends fy{constructor(e){super(e),this._manipulatorState=new Nde,this.tools=new he,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(CF,e=>{this._handleInputEvent(e)},Al.TOOL),...Mde(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(T(e)&&!this.view.ready)return void Pde.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),T(t)&&t.deactivate(),T(e)&&e.activate(),this._removeIncompleteTools(e);const i=O(this.activeTool);for(const r of this.tools){r.setEditableFlag(Fy.MANAGER,i||r===this.activeTool);const n=ov(r);!i&&n||this._manipulatorState.clearPointers(r,this._forEachTool,!n)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){this.view.type==="3d"?(this._set("textures",new Af(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([q(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),$p(()=>this._set("textures",on(this.textures)))],AP)):this.handles.add(q(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){T(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(AP)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};T(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:r=>{this.activeTool=r},view:this.view}),!t&&T(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(n_),this._forEachTool(e=>{if(e instanceof se){const t=q(()=>[e.cursor,e.visible,e.editable],()=>{ov(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,n_)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:i})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,i)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),n_)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const e=this._manipulatorState.cursor;let t=e;this._forEachTool(i=>!(!T(i.cursor)||!i.visible||!O(e)&&i.preferManipulatorCursor)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(e){this.tools.filter(t=>(O(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};l([c({constructOnly:!0,nonNullable:!0})],Ms.prototype,"view",void 0),l([c({readOnly:!0,nonNullable:!0})],Ms.prototype,"textures",void 0),l([c({value:null})],Ms.prototype,"activeTool",null),l([c({readOnly:!0,type:he})],Ms.prototype,"tools",void 0),l([c({readOnly:!0})],Ms.prototype,"cursor",void 0),l([c({readOnly:!0})],Ms.prototype,"updating",null),Ms=l([S("esri.views.ToolViewManager")],Ms);const $de=Ms;let Td=class extends se{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Dde.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Lde[this.deviceType]}};l([c({nonNullable:!0,readOnly:!0})],Td.prototype,"nativeIndex",void 0),l([c({type:String,readOnly:!0})],Td.prototype,"deviceType",null),l([c({type:Number,readOnly:!0})],Td.prototype,"axisThreshold",null),Td=l([S("esri.views.input.gamepad.GamepadInputDevice")],Td);const Dde=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Lde={standard:.15,spacemouse:.025,unknown:0},L3=Td;let xf=class extends se{constructor(...e){super(...e),this.devices=new he,this.enabledFocusMode="document"}};l([c({type:he.ofType(L3),readOnly:!0})],xf.prototype,"devices",void 0),l([c({type:["document","view","none"]})],xf.prototype,"enabledFocusMode",void 0),xf=l([S("esri.views.input.gamepad.GamepadSettings")],xf);const Ode=xf;let Ug=class extends se{constructor(){super(...arguments),this.gamepad=new Ode}};l([c({readOnly:!0})],Ug.prototype,"gamepad",void 0),Ug=l([S("esri.views.input.Input")],Ug);const kde=Ug;let Wa=class extends se{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([c({type:Boolean,nonNullable:!0})],Wa.prototype,"enabled",void 0),l([c({type:L3})],Wa.prototype,"device",void 0),l([c({type:["pan","zoom"],nonNullable:!0})],Wa.prototype,"mode",void 0),l([c({type:["forward-down","forward-up"],nonNullable:!0})],Wa.prototype,"tiltDirection",void 0),l([c({type:Number,nonNullable:!0})],Wa.prototype,"velocityFactor",void 0),Wa=l([S("esri.views.navigation.gamepad.GamepadSettings")],Wa);const RF=Wa;let Au=class extends se{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new RF,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};l([c({type:Boolean})],Au.prototype,"browserTouchPanEnabled",void 0),l([c({type:RF,nonNullable:!0})],Au.prototype,"gamepad",void 0),l([c({type:Boolean})],Au.prototype,"momentumEnabled",void 0),l([c({type:Boolean})],Au.prototype,"mouseWheelZoomEnabled",void 0),Au=l([S("esri.views.navigation.Navigation")],Au);const PF=Au;var xP;function Fde(e){const t=e.url&&xp(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&T(t)&&t.serverType==="ImageServer")&&$F(e)&&e.heightModelInfo?e.heightModelInfo:Bde(e)?_w.deriveUnitFromSR(Vde,e.spatialReference):null}function $F(e){return"heightModelInfo"in e}function DF(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function Bde(e){return DF(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):LF(e)}function Ude(e){return e.layers!=null||LF(e)||DF(e)||$F(e)}function LF(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(xP||(xP={}));const Vde=new _w({heightModel:"gravity-related-height"});var sv;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(sv||(sv={}));let RE,o_=null;async function jde(e){o_||(o_=U(()=>import("./geometryServiceUtils.551f7b52.js"),[],import.meta.url).then(t=>RE=t)),await o_,_t(e)}async function OF(e,t,i,r){if(!e)return null;const n=e.spatialReference;return Sc()||$l(n,t)?Gp(e,t):RE?RE.projectGeometry(e,t,i,r):(await Promise.race([jde(r),Tc(r)]),OF(e,t,i,r))}let Je=class extends se{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=x_(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return T(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return O(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,r,n,o;const e=(i=this.map)==null?void 0:i.call(this),t=[];return T(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(n=e==null?void 0:e.ground)==null?void 0:n.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var n;if(this.suspended)return(n=this._get("_spatialReferenceTask"))!=null?n:{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const o of e){const s=this._getSupportedSpatialReferences(o);if(s.length>0){const a=this._narrowDownSpatialReferenceCandidates(i,s);T(a)&&(i=a)}if(T(i)&&i.length===1)break}if(t&&(O(i)||i.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(i);return{spatialReference:T(r)?r.spatialReference:null,viewingMode:T(r)?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,r,n,o,s,a,u,d;if(!this.required.tileInfo)return(i=this._get("_tileInfoTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(n=(r=this.map)==null?void 0:r.call(this))==null?void 0:n.basemap,layers:(a=(s=(o=this.map)==null?void 0:o.call(this))==null?void 0:s.basemap)==null?void 0:a.baseLayers},{layers:(d=(u=this.map)==null?void 0:u.call(this))==null?void 0:d.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const h=e[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var i,r,n,o;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))==null?void 0:i.heightModelInfo))return(r=this._get("_heightModelInfoTask"))!=null?r:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const s of e)if(Ude(s)){const a=Fde(s);if(a)return{heightModelInfo:a,vcsWkid:(n=s.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(o=s.spatialReference)==null?void 0:o.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var r,n;if(this.suspended||!this.required.extent)return(r=this._get("_extentCandidatesTask"))!=null?r:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const o of e.layers){const s="fullExtents"in o&&o.fullExtents||(T(o.fullExtent)?[o.fullExtent]:[]),a=this.requiresExtentInSpatialReference?null:s[0],u=(n=s.find(d=>d.spatialReference.equals(this.spatialReference)))!=null?n:a;if(u)return{candidates:[{extent:u,layer:o}],updating:!1};if(this._getSupportedSpatialReferences(o).length>0)for(const d of s)i.push({extent:d,layer:o})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(O(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:T(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(T(this._projectExtentTask.task)&&(this._projectExtentTask.task=x_(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:hA(async n=>{try{const o=await OF(i.extent,r,i.layer.portalItem,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(hn(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(O(e))return t;const i=[],r=(n,o)=>T(n)?T(o)?n===o&&n:n:o;for(const n of e)for(const o of t){if(!n.spatialReference.equals(o.spatialReference))continue;const s=r(n.viewingMode,o.viewingMode);if(s!==!1){i.push({spatialReference:n.spatialReference,viewingMode:s});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return O(e)||e.length<1?T(t)?{spatialReference:t,viewingMode:null}:null:(T(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==sv.Local)&&(e=e.filter(({viewingMode:i})=>i!==sv.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const r of t){const n=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(T(n)){const o=T(n.constraints)?n.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:s,viewingMode:a}of o)(!this.requiresExtentInSpatialReference||O(this.userSpatialReference)||s.equals(this.userSpatialReference))&&i.push({spatialReference:s,viewingMode:a})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load(),"loading"):e.loadStatus:"loaded"}};l([c()],Je.prototype,"required",void 0),l([c({constructOnly:!0})],Je.prototype,"map",void 0),l([c({constructOnly:!0})],Je.prototype,"getSpatialReferenceSupport",void 0),l([c()],Je.prototype,"defaultSpatialReference",void 0),l([c()],Je.prototype,"userSpatialReference",void 0),l([c()],Je.prototype,"sourcePreloadCount",void 0),l([c()],Je.prototype,"priorityCollection",void 0),l([c()],Je.prototype,"requiresExtentInSpatialReference",void 0),l([c()],Je.prototype,"suspended",void 0),l([c({readOnly:!0})],Je.prototype,"ready",null),l([c({readOnly:!0})],Je.prototype,"heightModelInfoReady",null),l([c({readOnly:!0})],Je.prototype,"spatialReference",null),l([c({readOnly:!0})],Je.prototype,"extent",null),l([c({readOnly:!0})],Je.prototype,"heightModelInfo",null),l([c({readOnly:!0})],Je.prototype,"vcsWkid",null),l([c({readOnly:!0})],Je.prototype,"latestVcsWkid",null),l([c({readOnly:!0})],Je.prototype,"viewingMode",null),l([c({readOnly:!0})],Je.prototype,"tileInfo",null),l([c({readOnly:!0})],Je.prototype,"mapCollections",null),l([c({readOnly:!0})],Je.prototype,"_allLayers",null),l([c({readOnly:!0})],Je.prototype,"_spatialReferenceTask",null),l([c({readOnly:!0})],Je.prototype,"_tileInfoTask",null),l([c({readOnly:!0})],Je.prototype,"_heightModelInfoTask",null),l([c({readOnly:!0})],Je.prototype,"_extentCandidatesTask",null),l([c()],Je.prototype,"_extentTask",null),l([c()],Je.prototype,"_projectExtentTask",void 0),Je=l([S("esri.views.support.DefaultsFromMap")],Je);var Vg;const v0=W.getLogger("esri.views.View");let ye=Vg=class extends Ll(ra.EventedMixin(Rv(se))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new pp({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new iy,this.analyses=new nv,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new he,this.magnifier=new AF,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new kde,this.navigation=new PF,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new xde(this),this.persistableViewModels=new he,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(q(()=>this.preconditionsReady,t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,Vg.views.add(this)):(this._currentSpatialReference=null,Vg.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.layerViewManager)==null||i.clear(),(r=this.toolViewManager)==null||r.detach(),T(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(this._startup(),T(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},dp))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,hy(()=>this.ready)))),this.basemapView=new Ga({view:this}),this.layerViewManager=new bde({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new $de({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([q(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),q(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),q(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([q(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(T(e))return;const n=$p(()=>e=x_(e));e=hA(async o=>{try{await Cv(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{e=null}v0.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=on(this.graphics),this.analyses=on(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),on(this.analysisViewManager),this.toolViewManager=on(this.toolViewManager),this.layerViewManager=on(this.layerViewManager),this.basemapView=on(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return v0.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Je({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Ko.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(v0.warn("#map","The provided map is already destroyed",{map:e}),e=null),Ko.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Qi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return T(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(i=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?i:null}importLayerView(e){throw new N("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return T(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&v0.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(mn(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};ye.views=new he,l([c()],ye.prototype,"_userSpatialReference",void 0),l([J("toolViewManager.activeTool")],ye.prototype,"activeTool",void 0),l([c({readOnly:!0})],ye.prototype,"allLayerViews",void 0),l([c()],ye.prototype,"groundView",void 0),l([c()],ye.prototype,"animation",void 0),l([c()],ye.prototype,"basemapView",void 0),l([c({readOnly:!0})],ye.prototype,"_defaultsFromMapSettings",null),l([c()],ye.prototype,"defaultsFromMap",null),l([c()],ye.prototype,"fatalError",void 0),l([c({type:Oe})],ye.prototype,"extent",void 0),l([c(uP(iy,"graphics"))],ye.prototype,"graphics",void 0),l([c(uP(nv,"analyses"))],ye.prototype,"analyses",void 0),l([c({readOnly:!0,type:_w})],ye.prototype,"heightModelInfo",null),l([c({readOnly:!0})],ye.prototype,"interacting",null),l([c({readOnly:!0})],ye.prototype,"navigating",void 0),l([c({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ye.prototype,"preconditionsReady",null),l([c({readOnly:!0})],ye.prototype,"typeSpecificPreconditionsReady",void 0),l([c({type:he,readOnly:!0})],ye.prototype,"layerViews",void 0),l([c({type:AF})],ye.prototype,"magnifier",void 0),l([c({value:null,type:KL})],ye.prototype,"map",null),l([c()],ye.prototype,"padding",void 0),l([c({readOnly:!0})],ye.prototype,"ready",void 0),l([c({type:me})],ye.prototype,"spatialReference",null),l([c()],ye.prototype,"spatialReferenceWarningDelay",void 0),l([c()],ye.prototype,"stationary",null),l([c({readOnly:!0})],ye.prototype,"supportsGround",void 0),l([c({type:rs})],ye.prototype,"timeExtent",void 0),l([J("toolViewManager.tools")],ye.prototype,"tools",void 0),l([c()],ye.prototype,"toolViewManager",void 0),l([c({readOnly:!0})],ye.prototype,"type",void 0),l([c({type:Number})],ye.prototype,"scale",void 0),l([c({readOnly:!0})],ye.prototype,"updating",void 0),l([c({readOnly:!0})],ye.prototype,"initialExtentRequired",void 0),l([c({readOnly:!0})],ye.prototype,"initialExtent",null),l([c()],ye.prototype,"cursor",null),l([c({readOnly:!0})],ye.prototype,"input",void 0),l([c({type:PF,nonNullable:!0})],ye.prototype,"navigation",void 0),l([c()],ye.prototype,"layerViewManager",void 0),l([c()],ye.prototype,"analysisViewManager",void 0),l([c()],ye.prototype,"width",void 0),l([c()],ye.prototype,"height",void 0),l([c({readOnly:!0})],ye.prototype,"resizing",void 0),l([c({value:null,readOnly:!0})],ye.prototype,"size",null),l([c({readOnly:!0})],ye.prototype,"suspended",void 0),l([c({readOnly:!0})],ye.prototype,"viewEvents",void 0),l([c({readOnly:!0})],ye.prototype,"persistableViewModels",void 0),l([c()],ye.prototype,"_isValid",void 0),l([c()],ye.prototype,"_readyCycleForced",void 0),l([c()],ye.prototype,"_currentSpatialReference",void 0),ye=Vg=l([S("esri.views.View")],ye);const zde=ye;let qa=class extends h1{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new N("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=ia(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};l([c({readOnly:!0})],qa.prototype,"done",null),l([c({readOnly:!0,type:String})],qa.prototype,"state",void 0),l([c()],qa.prototype,"target",void 0),qa=l([S("esri.views.ViewAnimation")],qa),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(qa||(qa={}));const PE=qa;function cl(e,t,i,r){const n=3*e,o=3*(i-e)-n,s=1-n-o,a=3*t,u=3*(r-t)-a,d=1-a-u;function h(g){return((s*g+o)*g+n)*g}function f(g){return((d*g+u)*g+a)*g}function y(g){return(3*s*g+2*o)*g+n}function m(g,v){let w,_,A,I,D,M;for(A=g,M=0;M<8;M++){if(I=h(A)-g,Math.abs(I)<v)return A;if(D=y(A),Math.abs(D)<1e-6)break;A-=I/D}if(w=0,_=1,A=g,A<w)return w;if(A>_)return _;for(;w<_;){if(I=h(A),Math.abs(I-g)<v)return A;g>I?w=A:_=A,A=.5*(_-w)+w}return A}return function(g,v=1e-6){return f(m(g,v))}}const Hde=/^cubic-bezier\((.*)\)/,nn={};function Gde(e){let t=nn[e]||null;if(!t){const i=Hde.exec(e);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(t=cl.apply(cl,r))}}return t}nn.ease=cl(.25,.1,.25,1),nn.linear=cl(0,0,1,1),nn.easeIn=nn["ease-in"]=cl(.42,0,1,1),nn.easeOut=nn["ease-out"]=cl(0,0,.58,1),nn.easeInOut=nn["ease-in-out"]=cl(.42,0,.58,1);function xl(){return[1,0,0,1,0,0]}function Wde(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function qde(e,t,i,r,n,o){return[e,t,i,r,n,o]}function Yde(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:xl,clone:Wde,fromValues:qde,createView:Yde},Symbol.toStringTag,{value:"Module"}));function By(e,t){return e[0]=t[0],e[1]=t[1],e}function ti(e,t,i){return e[0]=t,e[1]=i,e}function kF(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Uy(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function FF(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function BF(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function Kde(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Zde(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Jde(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function Xde(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function Qde(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function ym(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function epe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function mm(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function av(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function lv(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function UF(e){const t=e[0],i=e[1];return t*t+i*i}function VF(e,t){return e[0]=-t[0],e[1]=-t[1],e}function tpe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function $E(e,t){const i=t[0],r=t[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function jF(e,t){return e[0]*t[0]+e[1]*t[1]}function zF(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function ipe(e,t,i,r){const n=t[0],o=t[1];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e}function rpe(e,t){t=t||1;const i=2*hl()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function npe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n,e[1]=i[1]*r+i[3]*n,e}function Oo(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}function ope(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[3]*n+i[6],e[1]=i[1]*r+i[4]*n+i[7],e}function spe(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e}function ape(e,t,i,r){const n=t[0]-i[0],o=t[1]-i[1],s=Math.sin(r),a=Math.cos(r);return e[0]=n*a-o*s+i[0],e[1]=n*s+o*a+i[1],e}function lpe(e,t){const i=e[0],r=e[1],n=t[0],o=t[1];let s=i*i+r*r;s>0&&(s=1/Math.sqrt(s));let a=n*n+o*o;a>0&&(a=1/Math.sqrt(a));const u=(i*n+r*o)*s*a;return u>1?0:u<-1?Math.PI:Math.acos(u)}function upe(e){return"vec2("+e[0]+", "+e[1]+")"}function cpe(e,t){return e[0]===t[0]&&e[1]===t[1]}function dpe(e,t){const i=e[0],r=e[1],n=t[0],o=t[1];return Math.abs(i-n)<=be*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=be*Math.max(1,Math.abs(r),Math.abs(o))}function ppe(e,t,i,r,n){let o=t[0]-i[0],s=t[1]-i[1];const a=(r[0]*o+r[1]*s)*(n-1);return o=r[0]*a,s=r[1]*a,e[0]=t[0]+o,e[1]=t[1]+s,e}const hpe=lv,O3=Uy,fpe=FF,ype=BF,mpe=mm,gpe=av,vpe=UF;Object.freeze(Object.defineProperty({__proto__:null,copy:By,set:ti,add:kF,subtract:Uy,multiply:FF,divide:BF,ceil:Kde,floor:Zde,min:Jde,max:Xde,round:Qde,scale:ym,scaleAndAdd:epe,distance:mm,squaredDistance:av,length:lv,squaredLength:UF,negate:VF,inverse:tpe,normalize:$E,dot:jF,cross:zF,lerp:ipe,random:rpe,transformMat2:npe,transformMat2d:Oo,transformMat3:ope,transformMat4:spe,rotate:ape,angle:lpe,str:upe,exactEquals:cpe,equals:dpe,projectAndScale:ppe,len:hpe,sub:O3,mul:fpe,div:ype,dist:mpe,sqrDist:gpe,sqrLen:vpe},Symbol.toStringTag,{value:"Module"}));function It(){return[0,0]}function wpe(e){return[e[0],e[1]]}function gm(e,t){return[e,t]}function bpe(e){const t=It(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function _pe(e,t){return new Float64Array(e,t,2)}function HF(){return It()}function GF(){return gm(1,1)}function WF(){return gm(1,0)}function qF(){return gm(0,1)}const Spe=HF(),Tpe=GF(),Epe=WF(),Ape=qF();Object.freeze(Object.defineProperty({__proto__:null,create:It,clone:wpe,fromValues:gm,fromArray:bpe,createView:_pe,zeros:HF,ones:GF,unitX:WF,unitY:qF,ZEROS:Spe,ONES:Tpe,UNIT_X:Epe,UNIT_Y:Ape},Symbol.toStringTag,{value:"Module"}));const YF=96,KF=39.37,xpe=180/Math.PI;function ZF(e){return e.wkid?e:e.spatialReference||me.WGS84}function k3(e,t){return t.type?ti(e,t.x,t.y):By(e,t)}function JF(e){return Bl(e)}function ry(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*Lpe(e.spatialReference)}async function Cf(e,t,i,r){let n,o;if(!e||Array.isArray(e)&&!e.length)return null;if(he.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(h=>"attributes"in h),u=e.some(h=>!h.geometry);let d=e;if(a&&u&&t&&t.allLayerViews){const h=new Map;for(const g of e){const v=g.layer,w=h.get(v)||[],_=g.attributes[v.objectIdField];_!=null&&w.push(_),h.set(v,w)}const f=[];h.forEach((g,v)=>{const w=t.allLayerViews.find(_=>_.layer.id===v.id);if("queryFeatures"in w){const _=v.createQuery();_.objectIds=g,_.returnGeometry=!0,f.push(w.queryFeatures(_))}});const y=await Promise.all(f),m=[];for(const g of y)if(g&&g.features&&g.features.length)for(const v of g.features)T(v.geometry)&&m.push(v.geometry);d=m}for(const h of d)r=await Cf(h,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new le(e);else if(e instanceof fr)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const a=e.layer,u=t.allLayerViews.find(d=>d.layer.id===a.id);if("queryFeatures"in u){const d=a.createQuery();d.objectIds=[e.attributes[a.objectIdField]],d.returnGeometry=!0;const h=await u.queryFeatures(d);n=T4(h,"features",0,"geometry")}}}if(O(n)||(o=n.type==="point"?new Oe({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!o))return null;Sc()||$l(o.spatialReference,i)||await Tc();const s=Gp(o,i);return s?r=r?r.union(s):s:null}function Cpe(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const n=r.layer;n&&n.minScale&&n.maxScale&&(t=n.minScale<t?n.minScale:t,i=n.maxScale>i?n.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function s_(e,t){return Qi(ZF(e),t)?e:Gp(e,t)}async function Ipe(e,t){if(!e||!t)return new Vo({targetGeometry:new le,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:n,viewpoint:o,size:s}=t,a=[n?s[0]-n.left-n.right:s[0],n?s[1]-n.top-n.bottom:s[1]];let u=null;e instanceof Vo?u=e:e.viewpoint?u=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(u=e.target);let d=null;u&&u.targetGeometry?d=u.targetGeometry:e instanceof Oe?d=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(d=await Cf(e.center,t,i)||await Cf(e.extent,t,i)||await Cf(e.target,t,i)||await Cf(e,t,i)),!d&&o&&o.targetGeometry?d=o.targetGeometry:!d&&t.extent&&(d=t.extent),i||(i=ZF(t.spatialReference||t.extent||d)),Sc()||Qi(d.spatialReference,i)||$l(d,i)||await Tc();const h=s_(d.center?d.center:d,i);let f=null;if(u&&T(u.targetGeometry)&&u.targetGeometry.type==="point")f=u.scale;else if("scale"in e&&e.scale)f=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)f=r.zoomToScale(e.zoom);else if(Array.isArray(d)||d.type==="point"||d.type==="extent"&&d.width===0&&d.height===0){const v=s_(t.extent,i);f=T(v)?ry(v,a):t.extent?ry(t.extent,a):o.scale}else f=ry(s_(d.extent,i),a);const y=Cpe(e);y&&(y.min&&y.min>f?f=y.min:y.max&&y.max<f&&(f=y.max));let m=0;u?m=u.rotation:e.hasOwnProperty("rotation")?m=e.rotation:o&&(m=o.rotation);let g=new Vo({targetGeometry:h,scale:f,rotation:m});return r&&(g=r.fit(g),r.constrainByGeometry(g),r.rotationEnabled||(g.rotation=m)),g}function fo(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Mpe(e,t,i){return i?ti(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):ym(e,t,.5)}const Npe=function(){const e=It();return function(t,i,r){const n=i.targetGeometry;k3(e,n);const o=.5*oh(i);return t.xmin=e[0]-o*r[0],t.ymin=e[1]-o*r[1],t.xmax=e[0]+o*r[0],t.ymax=e[1]+o*r[1],t.spatialReference=n.spatialReference,t}}();function Rpe(e,t,i,r,n){return DE(e,t,i.center),e.scale=ry(i,r),n&&n.constraints&&n.constraints.constrain(e),e}function Ppe(e,t,i,r){return U3(e,t,i,r),R3(e,e)}const XF=function(){const e=It();return function(t,i,r){return O3(t,Ope(t,i),Mpe(e,i,r))}}(),$pe=function(){const e=xl(),t=It();return function(i,r,n,o){const s=oh(r),a=F3(r);return ti(t,s,s),vF(e,t),Aw(e,e,a),ky(e,e,XF(t,n,o)),ky(e,e,[0,o.top-o.bottom]),ti(i,e[4],e[5])}}();function oh(e){return e.scale*Dpe(e.targetGeometry)}function Dpe(e){return T(e)&&Ri(e.spatialReference)?1/(JF(e.spatialReference)*KF*YF):1}function F3(e){return kA(e.rotation)||0}function Lpe(e){return Ri(e)?JF(e)*KF*YF:1}function Ope(e,t){return ym(e,t,.5)}const B3=function(){const e=It(),t=It(),i=It();return function(r,n,o,s,a,u){return VF(e,n),ym(t,o,.5*u),ti(i,1/s*u,-1/s*u),$3(r,t),a&&Aw(r,r,a),P3(r,r,i),ky(r,r,e),r}}(),U3=function(){const e=It();return function(t,i,r,n){const o=oh(i),s=F3(i);return k3(e,i.targetGeometry),B3(t,e,r,o,s,n)}}(),kpe=function(){const e=It();return function(t,i,r,n){const o=oh(i);return k3(e,i.targetGeometry),B3(t,e,r,o,0,n)}}();function Fpe(e){const t=so(e);return t?t.valid[1]-t.valid[0]:0}function Bpe(e,t){return Math.round(Fpe(e)/t)}const Upe=function(){const e=It(),t=It(),i=[0,0,0];return function(r,n,o){Uy(e,r,n),$E(e,e),Uy(t,r,o),$E(t,t),zF(i,e,t);let s=Math.acos(jF(e,t)/(lv(e)*lv(t)))*xpe;return i[2]<0&&(s=-s),isNaN(s)&&(s=0),s}}(),Vpe=function(){const e=It();return function(t,i,r,n){const o=t.targetGeometry;return fo(t,i),$pe(e,i,r,n),o.x+=e[0],o.y+=e[1],t}}(),DE=function(e,t,i){fo(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},jpe=function(){const e=It();return function(t,i,r,n,o){o||(o="center"),O3(e,r,n),ym(e,e,.5);const s=e[0],a=e[1];switch(o){case"center":ti(e,0,0);break;case"left":ti(e,-s,0);break;case"top":ti(e,0,a);break;case"right":ti(e,s,0);break;case"bottom":ti(e,0,-a);break;case"top-left":ti(e,-s,a);break;case"bottom-left":ti(e,-s,-a);break;case"top-right":ti(e,s,a);break;case"bottom-right":ti(e,s,-a)}return Iw(t,i,e),t}}();function Zve(e,t,i){return fo(e,t),e.rotation+=i,e}function zpe(e,t,i){return fo(e,t),e.rotation=i,e}const Hpe=function(){const e=It();return function(t,i,r,n,o){return fo(t,i),isNaN(r)||r===0||(eB(e,n,i,o),t.scale=i.scale*r,tB(e,e,t,o),Iw(t,t,ti(e,e[0]-n[0],n[1]-e[1]))),t}}();function CP(e,t,i){return fo(e,t),e.scale=i,e}const QF=function(){const e=It();return function(t,i,r,n,o,s){return fo(t,i),isNaN(r)||r===0||(eB(e,o,i,s),t.scale=i.scale*r,t.rotation+=n,tB(e,e,t,s),Iw(t,t,ti(e,e[0]-o[0],o[1]-e[1]))),t}}(),Jve=function(){const e=It(),t=It();return function(i,r,n,o,s,a,u){return XF(t,a,u),kF(e,s,t),o?QF(i,r,n,o,e,a):Hpe(i,r,n,e,a)}}(),eB=function(){const e=xl();return function(t,i,r,n){return Oo(t,i,Ppe(e,r,n,1))}}(),tB=function(){const e=xl();return function(t,i,r,n){return Oo(t,i,U3(e,r,n,1))}}(),Iw=function(){const e=It(),t=xl();return function(i,r,n){fo(i,r);const o=oh(r),s=i.targetGeometry;return gF(t,F3(r)),P3(t,t,gm(o,o)),Oo(e,n,t),s.x+=e[0],s.y+=e[1],i}}();class Gpe{constructor(t,i,r,n){const o=t.targetGeometry,s=i.targetGeometry;n?typeof n=="string"&&(n=Gde(n)||nn.ease):n=nn.ease,this.easing=n,this.duration=r,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=s.x,this.tCenterY=s.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let n,o,s,a;i>=1?(n=this.tCenterX,o=this.tCenterY,s=this.tRotation,a=this.tScale):(n=this.sCenterX+r*this.dCenterX,o=this.sCenterY+r*this.dCenterY,s=this.sRotation+r*this.dRotation,a=this.sScale+r*this.dScale),t.targetGeometry.x=n,t.targetGeometry.y=o,t.scale=a,t.rotation=s}}let Ns=class extends se{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=nn.ease,this.view=null,this.viewpoint=null,this.viewpoint=new Vo({targetGeometry:new le,scale:0,rotation:0}),this._updateTask=up({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const r=this.viewpoint;fo(r,t),this.transition=new Gpe(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new PE({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==PE.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,r=i>=1;this.transition.applyRatio(this.viewpoint,i),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};l([c()],Ns.prototype,"animation",void 0),l([c()],Ns.prototype,"duration",void 0),l([c()],Ns.prototype,"transition",void 0),l([c()],Ns.prototype,"easing",void 0),l([c()],Ns.prototype,"view",void 0),l([c()],Ns.prototype,"viewpoint",void 0),Ns=l([S("esri.views.2d.AnimationManager")],Ns);const Wpe=Ns;class qpe{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:n,layerViews:o,state:{id:s}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),o.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),T(n)&&(n.lastUpdateId!==s&&(n.viewChange(),n.lastUpdateId=s),n.updateRequested&&n.processUpdate(this._updateParameters)),T(r)&&(r.lastUpdateId!==s&&(r.viewChange(),r.lastUpdateId=s),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=q(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=up(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function kt(){return Promise.all([U(()=>import("./webglDeps.bee6df27.js"),["webglDeps.bee6df27.js","VertexArrayObject.26df0ff1.js","Texture.844ef494.js","ProgramTemplate.00141baf.js","programUtils.ddd46621.js"],import.meta.url),U(()=>import("./mapViewDeps.598da050.js"),["mapViewDeps.598da050.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","MaterialKey.b7fdbca1.js","Utils.0ab6f103.js","Texture.844ef494.js","utils.a65c5851.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","programUtils.ddd46621.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","_commonjsHelpers.01f5fe30.js","imageutils.40fd005a.js","Matcher.9f7ad188.js","visualVariablesUtils.2d08429a.js","visualVariablesUtils.621fe5a7.js","tileUtils.ea15b639.js","TileClipper.c27e2183.js","devEnvironmentUtils.8c6e6b72.js","CircularArray.9bd71b73.js","requestImageUtils.90fb9d11.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","BaseGraphicContainer.73928a75.js","normalizeUtilsSync.f1c573de.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","FeatureContainer.89a84221.js","TileContainer.a9ce7797.js","schemaUtils.9ce7d0b0.js","createSymbolSchema.9a1cf635.js","MD5.97b39efc.js","util.b474ae16.js","vec3f32.8d37ecf5.js","GraphicContainer.d15dafe6.js"],import.meta.url)])}const Ch=()=>kt().then(()=>U(()=>import("./TileLayerView2D.c27a3833.js"),["TileLayerView2D.c27a3833.js","imageUtils.49377c52.js","BitmapTileContainer.be38dfa8.js","Bitmap.e6830618.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","TileContainer.a9ce7797.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","RefreshableLayerView.c5c83f5d.js","drapedUtils.3ac75dca.js"],import.meta.url)),w0=()=>kt().then(()=>U(()=>import("./FeatureLayerView2D.53eeb304.js"),["FeatureLayerView2D.53eeb304.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","LayerView.4861daef.js","schemaUtils.9ce7d0b0.js","visualVariablesUtils.621fe5a7.js","createSymbolSchema.9a1cf635.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","MD5.97b39efc.js","util.b474ae16.js","floorFilterUtils.69500d62.js","popupUtils.233e3cd7.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),IP={"base-dynamic":()=>kt().then(()=>U(()=>import("./BaseDynamicLayerView2D.6e617fb6.js"),["BaseDynamicLayerView2D.6e617fb6.js","BitmapContainer.fec5db81.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","ExportStrategy.96b25d2c.js","Bitmap.e6830618.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),"base-tile":Ch,"bing-maps":Ch,csv:w0,"geo-rss":()=>kt().then(()=>U(()=>import("./GeoRSSLayerView2D.9f6b710b.js"),["GeoRSSLayerView2D.9f6b710b.js","LayerView.4861daef.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","GraphicContainer.d15dafe6.js","BaseGraphicContainer.73928a75.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","normalizeUtilsSync.f1c573de.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","VertexArrayObject.26df0ff1.js","FeatureContainer.89a84221.js","TileContainer.a9ce7797.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","visualVariablesUtils.2d08429a.js","visualVariablesUtils.621fe5a7.js","Matcher.9f7ad188.js","tileUtils.ea15b639.js","TileClipper.c27e2183.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.9ce7d0b0.js","createSymbolSchema.9a1cf635.js","MD5.97b39efc.js","util.b474ae16.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","vec3f32.8d37ecf5.js"],import.meta.url)),feature:w0,geojson:w0,graphics:()=>kt().then(()=>U(()=>import("./GraphicsLayerView2D.aedb5d2a.js"),["GraphicsLayerView2D.aedb5d2a.js","LayerView.4861daef.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","GraphicContainer.d15dafe6.js","BaseGraphicContainer.73928a75.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","normalizeUtilsSync.f1c573de.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","VertexArrayObject.26df0ff1.js","FeatureContainer.89a84221.js","TileContainer.a9ce7797.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","visualVariablesUtils.2d08429a.js","visualVariablesUtils.621fe5a7.js","Matcher.9f7ad188.js","tileUtils.ea15b639.js","TileClipper.c27e2183.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.9ce7d0b0.js","createSymbolSchema.9a1cf635.js","MD5.97b39efc.js","util.b474ae16.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","vec3f32.8d37ecf5.js"],import.meta.url)),group:()=>kt().then(()=>U(()=>import("./GroupLayerView2D.342412ea.js"),["GroupLayerView2D.342412ea.js","GroupContainer.a733690b.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js"],import.meta.url)),imagery:()=>kt().then(()=>U(()=>import("./ImageryLayerView2D.9de8a077.js"),["ImageryLayerView2D.9de8a077.js","RasterVFDisplayObject.66b7c5c3.js","VertexArrayObject.26df0ff1.js","Texture.844ef494.js","dataUtils.eb6622c5.js","pixelUtils.87d53e33.js","WGLContainer.dbfa59f4.js","utils.a65c5851.js","Utils.0ab6f103.js","MaterialKey.b7fdbca1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","BaseGraphicContainer.73928a75.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","normalizeUtilsSync.f1c573de.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","FeatureContainer.89a84221.js","TileContainer.a9ce7797.js","visualVariablesUtils.2d08429a.js","visualVariablesUtils.621fe5a7.js","Matcher.9f7ad188.js","tileUtils.ea15b639.js","TileClipper.c27e2183.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.9ce7d0b0.js","createSymbolSchema.9a1cf635.js","MD5.97b39efc.js","util.b474ae16.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","vec3f32.8d37ecf5.js","HighlightGraphicContainer.62265d4c.js","BitmapContainer.fec5db81.js","Bitmap.e6830618.js","ExportStrategy.96b25d2c.js","rasterProjectionHelper.4b5b5e3f.js","popupUtils.233e3cd7.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),"imagery-tile":()=>kt().then(()=>U(()=>import("./ImageryTileLayerView2D.6c5f0140.js"),["ImageryTileLayerView2D.6c5f0140.js","RasterVFDisplayObject.66b7c5c3.js","VertexArrayObject.26df0ff1.js","Texture.844ef494.js","dataUtils.eb6622c5.js","pixelUtils.87d53e33.js","WGLContainer.dbfa59f4.js","utils.a65c5851.js","Utils.0ab6f103.js","MaterialKey.b7fdbca1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","TileContainer.a9ce7797.js","RawBlockCache.c41135e7.js","rasterProjectionHelper.4b5b5e3f.js","util.b474ae16.js","popupUtils.233e3cd7.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),kml:()=>kt().then(()=>U(()=>import("./KMLLayerView2D.a13e1a01.js"),["KMLLayerView2D.a13e1a01.js","kmlUtils.e75e655d.js","Bitmap.e6830618.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","BitmapContainer.fec5db81.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","GraphicContainer.d15dafe6.js","BaseGraphicContainer.73928a75.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","normalizeUtilsSync.f1c573de.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","FeatureContainer.89a84221.js","TileContainer.a9ce7797.js","visualVariablesUtils.2d08429a.js","visualVariablesUtils.621fe5a7.js","Matcher.9f7ad188.js","tileUtils.ea15b639.js","TileClipper.c27e2183.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.9ce7d0b0.js","createSymbolSchema.9a1cf635.js","MD5.97b39efc.js","util.b474ae16.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","vec3f32.8d37ecf5.js"],import.meta.url)),"map-image":()=>kt().then(()=>U(()=>import("./MapImageLayerView2D.d3f7701e.js"),["MapImageLayerView2D.d3f7701e.js","BitmapContainer.fec5db81.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","BaseGraphicContainer.73928a75.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","normalizeUtilsSync.f1c573de.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","FeatureContainer.89a84221.js","TileContainer.a9ce7797.js","visualVariablesUtils.2d08429a.js","visualVariablesUtils.621fe5a7.js","Matcher.9f7ad188.js","tileUtils.ea15b639.js","TileClipper.c27e2183.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.9ce7d0b0.js","createSymbolSchema.9a1cf635.js","MD5.97b39efc.js","util.b474ae16.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","vec3f32.8d37ecf5.js","HighlightGraphicContainer.62265d4c.js","ExportStrategy.96b25d2c.js","Bitmap.e6830618.js","ExportImageParameters.8e513fd1.js","floorFilterUtils.69500d62.js","sublayerUtils.41d20817.js","drapedUtils.3ac75dca.js","popupUtils.233e3cd7.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),"map-notes":()=>kt().then(()=>U(()=>import("./MapNotesLayerView2D.8c6f8e94.js"),["MapNotesLayerView2D.8c6f8e94.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","GroupContainer.a733690b.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","GraphicContainer.d15dafe6.js","BaseGraphicContainer.73928a75.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","normalizeUtilsSync.f1c573de.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","FeatureContainer.89a84221.js","TileContainer.a9ce7797.js","visualVariablesUtils.2d08429a.js","visualVariablesUtils.621fe5a7.js","Matcher.9f7ad188.js","tileUtils.ea15b639.js","TileClipper.c27e2183.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.9ce7d0b0.js","createSymbolSchema.9a1cf635.js","MD5.97b39efc.js","util.b474ae16.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","vec3f32.8d37ecf5.js"],import.meta.url)),media:()=>kt().then(()=>U(()=>import("./MediaLayerView2D.b557d9de.js"),["MediaLayerView2D.b557d9de.js","normalizeUtilsSync.f1c573de.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","VertexArrayObject.26df0ff1.js","vec3f32.8d37ecf5.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js"],import.meta.url)),"ogc-feature":()=>kt().then(()=>U(()=>import("./OGCFeatureLayerView2D.6782d7f6.js"),["OGCFeatureLayerView2D.6782d7f6.js","FeatureLayerView2D.53eeb304.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","LayerView.4861daef.js","schemaUtils.9ce7d0b0.js","visualVariablesUtils.621fe5a7.js","createSymbolSchema.9a1cf635.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","MD5.97b39efc.js","util.b474ae16.js","floorFilterUtils.69500d62.js","popupUtils.233e3cd7.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),"open-street-map":Ch,route:()=>kt().then(()=>U(()=>import("./RouteLayerView2D.67c7b3a3.js"),["RouteLayerView2D.67c7b3a3.js","Stop.7a676d17.js","LayerView.4861daef.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","GraphicContainer.d15dafe6.js","BaseGraphicContainer.73928a75.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","normalizeUtilsSync.f1c573de.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","VertexArrayObject.26df0ff1.js","FeatureContainer.89a84221.js","TileContainer.a9ce7797.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","visualVariablesUtils.2d08429a.js","visualVariablesUtils.621fe5a7.js","Matcher.9f7ad188.js","tileUtils.ea15b639.js","TileClipper.c27e2183.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","devEnvironmentUtils.8c6e6b72.js","schemaUtils.9ce7d0b0.js","createSymbolSchema.9a1cf635.js","MD5.97b39efc.js","util.b474ae16.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","vec3f32.8d37ecf5.js"],import.meta.url)),stream:()=>kt().then(()=>U(()=>import("./StreamLayerView2D.87e94054.js"),["StreamLayerView2D.87e94054.js","FeatureLayerView2D.53eeb304.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","LayerView.4861daef.js","schemaUtils.9ce7d0b0.js","visualVariablesUtils.621fe5a7.js","createSymbolSchema.9a1cf635.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","MD5.97b39efc.js","util.b474ae16.js","floorFilterUtils.69500d62.js","popupUtils.233e3cd7.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),"subtype-group":()=>kt().then(()=>U(()=>import("./SubtypeGroupLayerView2D.8ca0b1a4.js"),["SubtypeGroupLayerView2D.8ca0b1a4.js","FeatureLayerView2D.53eeb304.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","LayerView.4861daef.js","schemaUtils.9ce7d0b0.js","visualVariablesUtils.621fe5a7.js","createSymbolSchema.9a1cf635.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","MD5.97b39efc.js","util.b474ae16.js","floorFilterUtils.69500d62.js","popupUtils.233e3cd7.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),tile:Ch,"vector-tile":()=>kt().then(()=>U(()=>import("./VectorTileLayerView2D.9ea53b16.js"),["VectorTileLayerView2D.9ea53b16.js","BidiEngine.ec67919b.js","Texture.844ef494.js","CIMSymbolHelper.84301d85.js","MaterialKey.b7fdbca1.js","Utils.0ab6f103.js","VertexArrayObject.26df0ff1.js","config.40d47db8.js","TileContainer.a9ce7797.js","utils.a65c5851.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","ProgramTemplate.00141baf.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","Bitmap.e6830618.js","BitmapContainer.fec5db81.js"],import.meta.url)),wcs:()=>kt().then(()=>U(()=>import("./ImageryTileLayerView2D.6c5f0140.js"),["ImageryTileLayerView2D.6c5f0140.js","RasterVFDisplayObject.66b7c5c3.js","VertexArrayObject.26df0ff1.js","Texture.844ef494.js","dataUtils.eb6622c5.js","pixelUtils.87d53e33.js","WGLContainer.dbfa59f4.js","utils.a65c5851.js","Utils.0ab6f103.js","MaterialKey.b7fdbca1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","TileContainer.a9ce7797.js","RawBlockCache.c41135e7.js","rasterProjectionHelper.4b5b5e3f.js","util.b474ae16.js","popupUtils.233e3cd7.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),"web-tile":Ch,wfs:w0,wms:()=>kt().then(()=>U(()=>import("./WMSLayerView2D.7603199b.js"),["WMSLayerView2D.7603199b.js","BitmapContainer.fec5db81.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","ExportStrategy.96b25d2c.js","Bitmap.e6830618.js","RefreshableLayerView.c5c83f5d.js","ExportWMSImageParameters.7b04d20f.js"],import.meta.url)),wmts:()=>kt().then(()=>U(()=>import("./WMTSLayerView2D.d9baf708.js"),["WMTSLayerView2D.d9baf708.js","imageUtils.49377c52.js","BitmapTileContainer.be38dfa8.js","Bitmap.e6830618.js","utils.a65c5851.js","Utils.0ab6f103.js","Texture.844ef494.js","MaterialKey.b7fdbca1.js","TileContainer.a9ce7797.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","LayerView.4861daef.js","RefreshableLayerView.c5c83f5d.js"],import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Ype(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new N(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const MP={hasLayerViewModule:e=>T(IP[e.type]),importLayerView:e=>{const t=IP[e.type];if(O(t))throw Ype(e);return t(e)}};function Kpe(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let n=Number.POSITIVE_INFINITY,o=0,s=0;const a=[0,0],u=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const d of u)for(let h=0;h<d.length-1;h++){xq(a,r,d,h);const f=mm(r,a);f<n&&(n=f,o=a[0],s=a[1])}return{coordinate:new le({x:o,y:s,spatialReference:i}),distance:n}}var LE;const Zpe=W.getLogger("esri.views.MapView");let ku=LE=class extends se{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(O(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Gp(this.geometry,this.spatialReference)}catch(e){return Zpe.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(O(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Bv(this.normalizedGeometry,i):K5(this.normalizedGeometry,i))return e;const{coordinate:r}=Kpe(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new LE({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};l([c({constructOnly:!0})],ku.prototype,"geometry",void 0),l([c({readOnly:!0})],ku.prototype,"normalizedGeometry",null),l([c({constructOnly:!0})],ku.prototype,"spatialReference",void 0),ku=LE=l([S("esri.views.2d.constraints.GeometryConstraint")],ku);var OE;let If=OE=class extends se{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new OE({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([c()],If.prototype,"enabled",void 0),l([c()],If.prototype,"rotationEnabled",void 0),If=OE=l([S("esri.views.2d.constraints.RotationConstraint")],If);const iB=If;var kE;let sr=kE=class extends se{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:n,maxZoom:o}=this,s=-1,a=-1,u=!1,d=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!u&&i>0&&i>=h.scale&&(s=h.level,u=!0),!d&&r>0&&r>=h.scale&&(a=e?e.level:-1,d=!0),e=h;n===-1&&(n=i===0?0:s),o===-1&&(o=r===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),o=Math.max(o,0),o=Math.min(o,t.length-1),n>o&&([n,o]=[o,n]),i=t[n].scale,r=t[o].scale,t.splice(0,n),t.splice(o-n+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=e.targetGeometry,o=t&&t.targetGeometry,s=r!==0&&e.scale<r,a=i!==0&&e.scale>i;if(s||a){const u=a?i:r;if(o){const d=(u-t.scale)/(e.scale-t.scale);n.x=o.x+(n.x-o.x)*d,n.y=o.y+(n.y-o.y)*d}e.scale=u}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],r===e)return n+this.effectiveMinZoom+1;if(i>e&&r<e)return n+this.effectiveMinZoom+1-(e-r)/(i-r)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new kE({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};l([c({readOnly:!0})],sr.prototype,"effectiveLODs",void 0),l([c({readOnly:!0})],sr.prototype,"effectiveMinZoom",void 0),l([c({readOnly:!0})],sr.prototype,"effectiveMaxZoom",void 0),l([c({readOnly:!0})],sr.prototype,"effectiveMinScale",void 0),l([c({readOnly:!0})],sr.prototype,"effectiveMaxScale",void 0),l([c()],sr.prototype,"lods",void 0),l([c()],sr.prototype,"minZoom",void 0),l([c()],sr.prototype,"maxZoom",void 0),l([c()],sr.prototype,"minScale",void 0),l([c()],sr.prototype,"maxScale",void 0),l([c()],sr.prototype,"snapToZoom",void 0),sr=kE=l([S("esri.views.2d.constraints.ZoomConstraint")],sr);const rB=sr,Jpe={base:null,key:"type",typeMap:{extent:Oe,polygon:mr}};let xt=class extends se{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((e=this._get("version"))!=null?e:0)+1}get _defaultLODs(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:r.tileInfo,t=(n=this.view)==null?void 0:n.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new ku({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new iB({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,n=this.minScale,o=this.maxScale,s=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===n&&e.maxScale===o&&e.snapToZoom===s?e:new rB({lods:t,minZoom:i,maxZoom:r,minScale:n,maxScale:o,snapToZoom:s})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};l([c({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],xt.prototype,"effectiveLODs",void 0),l([c({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],xt.prototype,"effectiveMinScale",void 0),l([c({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],xt.prototype,"effectiveMaxScale",void 0),l([c({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],xt.prototype,"effectiveMinZoom",void 0),l([c({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],xt.prototype,"effectiveMaxZoom",void 0),l([c({types:Jpe,value:null})],xt.prototype,"geometry",null),l([c({type:[Sx]})],xt.prototype,"lods",void 0),l([c()],xt.prototype,"minScale",void 0),l([c()],xt.prototype,"maxScale",void 0),l([c()],xt.prototype,"minZoom",void 0),l([c()],xt.prototype,"maxZoom",void 0),l([c()],xt.prototype,"rotationEnabled",void 0),l([c()],xt.prototype,"snapToZoom",void 0),l([c()],xt.prototype,"view",void 0),l([c({readOnly:!0})],xt.prototype,"version",null),l([c()],xt.prototype,"_defaultLODs",null),l([c({type:ku})],xt.prototype,"_geometry",null),l([c({type:iB})],xt.prototype,"_rotation",null),l([c({readOnly:!0,type:rB})],xt.prototype,"_zoom",null),xt=l([S("esri.views.2d.MapViewConstraints")],xt);const nB=xt;function Xpe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Qpe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function oB(e,t,i,r,n,o,s,a,u,d){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=s,e[6]=a,e[7]=u,e[8]=d,e}function sB(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ehe(e,t){if(e===t){const i=t[1],r=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function the(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=h*s-a*d,y=-h*o+a*u,m=d*o-s*u;let g=i*f+r*y+n*m;return g?(g=1/g,e[0]=f*g,e[1]=(-h*r+n*d)*g,e[2]=(a*r-n*s)*g,e[3]=y*g,e[4]=(h*i-n*u)*g,e[5]=(-a*i+n*o)*g,e[6]=m*g,e[7]=(-d*i+r*u)*g,e[8]=(s*i-r*o)*g,e):null}function ihe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8];return e[0]=s*h-a*d,e[1]=n*d-r*h,e[2]=r*a-n*s,e[3]=a*u-o*h,e[4]=i*h-n*u,e[5]=n*o-i*a,e[6]=o*d-s*u,e[7]=r*u-i*d,e[8]=i*s-r*o,e}function rhe(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],s=e[5],a=e[6],u=e[7],d=e[8];return t*(d*o-s*u)+i*(-d*n+s*a)+r*(u*n-o*a)}function V3(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],y=i[0],m=i[1],g=i[2],v=i[3],w=i[4],_=i[5],A=i[6],I=i[7],D=i[8];return e[0]=y*r+m*s+g*d,e[1]=y*n+m*a+g*h,e[2]=y*o+m*u+g*f,e[3]=v*r+w*s+_*d,e[4]=v*n+w*a+_*h,e[5]=v*o+w*u+_*f,e[6]=A*r+I*s+D*d,e[7]=A*n+I*a+D*h,e[8]=A*o+I*u+D*f,e}function FE(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],y=i[0],m=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=s,e[4]=a,e[5]=u,e[6]=y*r+m*s+d,e[7]=y*n+m*a+h,e[8]=y*o+m*u+f,e}function aB(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],d=t[6],h=t[7],f=t[8],y=Math.sin(i),m=Math.cos(i);return e[0]=m*r+y*s,e[1]=m*n+y*a,e[2]=m*o+y*u,e[3]=m*s-y*r,e[4]=m*a-y*n,e[5]=m*u-y*o,e[6]=d,e[7]=h,e[8]=f,e}function nhe(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=o*t[6],e[7]=o*t[7],e[8]=o*t[8],e}function ohe(e,t,i){const r=i[0],n=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function she(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function ahe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function lhe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function uhe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function che(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=i+i,a=r+r,u=n+n,d=i*s,h=r*s,f=r*a,y=n*s,m=n*a,g=n*u,v=o*s,w=o*a,_=o*u;return e[0]=1-f-g,e[3]=h-_,e[6]=y+w,e[1]=h+_,e[4]=1-d-g,e[7]=m-v,e[2]=y-w,e[5]=m+v,e[8]=1-d-f,e}function dhe(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],s=t[5],a=t[6],u=t[8],d=t[9],h=t[10],f=h*s-a*d,y=-h*o+a*u,m=d*o-s*u,g=i*f+r*y+n*m;if(!g)return null;const v=1/g;return e[0]=f*v,e[1]=(-h*r+n*d)*v,e[2]=(a*r-n*s)*v,e[3]=y*v,e[4]=(h*i-n*u)*v,e[5]=(-a*i+n*o)*v,e[6]=m*v,e[7]=(-d*i+r*u)*v,e[8]=(s*i-r*o)*v,e}function phe(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],d=t[7],h=t[8],f=t[9],y=t[10],m=t[11],g=t[12],v=t[13],w=t[14],_=t[15],A=i*a-r*s,I=i*u-n*s,D=i*d-o*s,M=r*u-n*a,R=r*d-o*a,B=n*d-o*u,j=h*v-f*g,Y=h*w-y*g,ee=h*_-m*g,re=f*w-y*v,ue=f*_-m*v,ge=y*_-m*w;let ne=A*ge-I*ue+D*re+M*ee-R*Y+B*j;return ne?(ne=1/ne,e[0]=(a*ge-u*ue+d*re)*ne,e[1]=(u*ee-s*ge-d*Y)*ne,e[2]=(s*ue-a*ee+d*j)*ne,e[3]=(n*ue-r*ge-o*re)*ne,e[4]=(i*ge-n*ee+o*Y)*ne,e[5]=(r*ee-i*ue-o*j)*ne,e[6]=(v*B-w*R+_*M)*ne,e[7]=(w*D-g*B-_*I)*ne,e[8]=(g*R-v*D+_*A)*ne,e):null}function hhe(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function fhe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function yhe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function mhe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function lB(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function ghe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function vhe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function whe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function bhe(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6],d=e[7],h=e[8],f=t[0],y=t[1],m=t[2],g=t[3],v=t[4],w=t[5],_=t[6],A=t[7],I=t[8];return Math.abs(i-f)<=be*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-y)<=be*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-m)<=be*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(o-g)<=be*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(s-v)<=be*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(a-w)<=be*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-_)<=be*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(d-A)<=be*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-I)<=be*Math.max(1,Math.abs(h),Math.abs(I))}function _he(e){const t=be,i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6],d=e[7],h=e[8];return Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(r*r+s*s+d*d))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const She=V3,The=lB;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:Xpe,copy:Qpe,set:oB,identity:sB,transpose:ehe,invert:the,adjoint:ihe,determinant:rhe,multiply:V3,translate:FE,rotate:aB,scale:nhe,scaleByVec2:ohe,fromTranslation:she,fromRotation:ahe,fromScaling:lhe,fromMat2d:uhe,fromQuat:che,normalFromMat4Legacy:dhe,normalFromMat4:phe,projection:hhe,str:fhe,frob:yhe,add:mhe,subtract:lB,multiplyScalar:ghe,multiplyScalarAndAdd:vhe,exactEquals:whe,equals:bhe,isOrthoNormal:_he,mul:She,sub:The},Symbol.toStringTag,{value:"Module"}));function jg(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Ehe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ahe(e,t,i,r,n,o,s,a,u){const d=new Float32Array(9);return d[0]=e,d[1]=t,d[2]=i,d[3]=r,d[4]=n,d[5]=o,d[6]=s,d[7]=a,d[8]=u,d}function xhe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:jg,clone:Ehe,fromValues:Ahe,createView:xhe},Symbol.toStringTag,{value:"Module"}));function uB(){return new Float32Array(2)}function Che(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Cp(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function Ihe(e,t){return new Float32Array(e,t,2)}function cB(){return uB()}function dB(){return Cp(1,1)}function pB(){return Cp(1,0)}function hB(){return Cp(0,1)}const Mhe=cB(),Nhe=dB(),Rhe=pB(),Phe=hB();Object.freeze(Object.defineProperty({__proto__:null,create:uB,clone:Che,fromValues:Cp,createView:Ihe,zeros:cB,ones:dB,unitX:pB,unitY:hB,ZEROS:Mhe,ONES:Nhe,UNIT_X:Rhe,UNIT_Y:Phe},Symbol.toStringTag,{value:"Module"}));function $he(e){return e instanceof Float32Array&&e.length>=2}function Dhe(e){return Array.isArray(e)&&e.length>=2}function a_(e){return $he(e)||Dhe(e)}var BE;const ds=[0,0];let Ya=BE=class extends V{constructor(e){super(e),this._viewpoint2D={center:It(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new Oe,this.id=0,this.inverseTransform=xl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=xl(),this.transformNoRotation=xl(),this.displayMat3=jg(),this.displayViewMat3=jg(),this.viewMat3=jg(),this.viewMat2d=fF(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=fo(i,e.viewpoint),this._set("size",By(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new BE({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return a_(t)?Oo(e,t,this.inverseTransform):(ds[0]=t,ds[1]=i,Oo(e,ds,this.inverseTransform))}toScreen(e,t,i){return a_(t)?Oo(e,t,this.transform):(ds[0]=t,ds[1]=i,Oo(e,ds,this.transform))}toScreenNoRotation(e,t,i){return a_(t)?Oo(e,t,this.transformNoRotation):(ds[0]=t,ds[1]=i,Oo(e,ds,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return B3(e,i,n,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),s=new Vo({targetGeometry:new le(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",s),!o||!t||!i)return;this.resolution=oh(s),this.rotation=r,this.scale=i,this.spatialReference=t,By(this.center,e);const a=o[0]!==0?2/o[0]:0,u=o[1]!==0?-2/o[1]:0;oB(this.displayMat3,a,0,0,0,u,0,-1,1,1);const d=sB(this.viewMat3),h=Cp(o[0]/2,o[1]/2),f=Cp(-o[0]/2,-o[1]/2),y=kA(r);FE(d,d,h),aB(d,d,y),FE(d,d,f),V3(this.displayViewMat3,this.displayMat3,d);const m=$3(this.viewMat2d,h);return Aw(m,m,y),ky(m,m,f),Npe(this.extent,s,o),U3(this.transform,s,o,n),R3(this.inverseTransform,this.transform),kpe(this.transformNoRotation,s,o,n),this.worldScreenWidth=Bpe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};l([c({readOnly:!0})],Ya.prototype,"id",void 0),l([c({value:1,json:{write:!0}})],Ya.prototype,"pixelRatio",null),l([c({json:{write:!0}})],Ya.prototype,"size",null),l([c()],Ya.prototype,"spatialReference",void 0),l([c({type:Vo,json:{write:!0}})],Ya.prototype,"viewpoint",null),Ya=BE=l([S("esri.views.2d.ViewState")],Ya);const NP=Ya;var UE,VE;let Fs=UE=class extends se{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new UE({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([c()],Fs.prototype,"left",void 0),l([c()],Fs.prototype,"top",void 0),l([c()],Fs.prototype,"right",void 0),l([c()],Fs.prototype,"bottom",void 0),Fs=UE=l([S("esri.views.2d.PaddedViewState.Padding")],Fs);let Ed=VE=class extends NP{constructor(...e){super(...e),this.paddedViewState=new NP,this._updateContent=(()=>{const t=It();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;ti(t,r.left+r.right,r.top+r.bottom),Uy(t,i,t),By(n.size,t);const o=n.viewpoint;o&&(this.viewpoint=o)}})(),this.own(q(()=>[this.size,this.padding],()=>this._updateContent(),dp)),this.padding=new Fs,this.size=[0,0]}set padding(e){this._set("padding",e||new Fs)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,Vpe(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new VE({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([c()],Ed.prototype,"paddedViewState",void 0),l([c({type:Fs})],Ed.prototype,"padding",null),l([c()],Ed.prototype,"viewpoint",null),Ed=VE=l([S("esri.views.2d.PaddedViewState")],Ed);const Lhe=Ed;class Ohe{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class fB{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new E1(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&T(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const n=new AbortController;let o=null;i&&(o=fn(i,()=>n.abort()));const s=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),d.reject(bt())},a=()=>{u.remove(),T(o)&&o.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},u=dA(n.signal,s),d=Xs();return this._deferreds.set(t,d),this._controllers.set(t,n),d.promise.then(a,a),this._queue.push(t),this._scheduleNext(),d.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Lp(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(O(t))return;let i;const r=new AbortController,n=new Ohe(t,r);this._processingItems.set(t,n);try{i=this.process(t,r.signal)}catch(o){this._processError(n,o)}ia(i)?(n.promise=i,i.then(o=>this._processResult(n,o),o=>this._processError(n,o))):this._processResult(n,i)}get test(){return{update:t=>this.runTask(t)}}}function khe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const l_=new Set,b0=[],zc=new Map,RP=[0,0];let va=class extends se{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new fB({concurrency:e,process:(i,r)=>{const n=this._keyToItem.get(i);return t(n,{signal:r})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(n,n),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(d=>{const h=this._keyToItem.get(d),f=this.tileInfoView.getTileScale(h.key);zc.has(f)||(zc.set(f,[]),i=Math.max(f,i),r=Math.min(f,r)),zc.get(f).push(h.key),l_.add(f)});let n=this.state.scale;zc.has(n)||(khe(b0,l_),b0.sort((d,h)=>d-h),n=b0.reduce((d,h)=>Math.abs(h-n)<Math.abs(d-n)?h:d,b0[0])),n=Math.min(n,i),n=Math.max(n,r);const o=zc.get(n),s=t.getClosestInfoForScale(n),a=s.getColumnForX(this.state.center[0]),u=s.getRowForY(this.state.center[1]);return o.sort((d,h)=>{const f=s.denormalizeCol(d.col,d.world),y=s.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(u-d.row)*(u-d.row))-Math.sqrt((a-y)*(a-y)+(u-h.row)*(u-h.row))}),l_.clear(),zc.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return e.forEach(o=>{const s=this._keyToItem.get(o);t.getTileCoords(RP,s.key);const a=mm(RP,i);a<r&&(r=a,n=s.key)}),n.id}};l([c({constructOnly:!0})],va.prototype,"concurrency",void 0),l([c({constructOnly:!0})],va.prototype,"process",void 0),l([c()],va.prototype,"state",void 0),l([c({constructOnly:!0})],va.prototype,"strategy",void 0),l([c({constructOnly:!0})],va.prototype,"tileInfoView",void 0),l([c({readOnly:!0})],va.prototype,"updating",null),va=l([S("esri.views.2d.tiling.PagedTileQueue")],va);class xi{constructor(t,i,r,n){this.set(t,i,r,n)}static getId(t,i,r,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${n}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,n){this.set(t,i,r,n)}contains(t){const i=t.level-this.level;return this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new xi(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[o,s,a,u]=t.split("/");this.level=parseFloat(o),this.row=parseFloat(s),this.col=parseFloat(a),this.world=parseFloat(u)}else this.level=+t,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new xi(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new xi(t,i,r,n),new xi(t,i,r+1,n),new xi(t,i+1,r,n),new xi(t,i+1,r+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}xi.pool=new uo(xi,null,null,25,50);function wa(e,t){return[e,t]}function Wl(e,t,i){return e[0]=t,e[1]=i,e}function Fhe(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}const Cn=new xi("0/0/0/0");class j3{constructor(t,i,r,n,o,s,a,u,d,h,f,y){this.level=t,this.resolution=i,this.scale=r,this.origin=n,this.first=o,this.last=s,this.size=a,this.norm=u,this.worldStart=d,this.worldEnd=h,this.worldSize=f,this.wrap=y}static create(t,i,r=null){const n=so(t.spatialReference),o=i.origin||wa(t.origin.x,t.origin.y),s=wa(t.size[0]*i.resolution,t.size[1]*i.resolution),a=wa(-1/0,-1/0),u=wa(1/0,1/0),d=wa(1/0,1/0);T(r)&&(Wl(a,Math.max(0,Math.floor((r.xmin-o[0])/s[0])),Math.max(0,Math.floor((o[1]-r.ymax)/s[1]))),Wl(u,Math.max(0,Math.floor((r.xmax-o[0])/s[0])),Math.max(0,Math.floor((o[1]-r.ymin)/s[1]))),Wl(d,u[0]-a[0]+1,u[1]-a[1]+1));const{cols:h,rows:f}=i;let y,m,g,v;return!r&&h&&f&&(Wl(a,h[0],f[0]),Wl(u,h[1],f[1]),Wl(d,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(y=wa(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/t.size[0]),d[1]),m=wa(Math.floor((n.origin[0]-o[0])/s[0]),a[1]),g=wa(y[0]+m[0]-1,u[1]),v=!0):(m=a,g=u,y=d,v=!1),new j3(i.level,i.resolution,i.scale,o,a,u,d,s,m,g,y,v)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){Cn.set(i);const n=r?Cn.col:this.denormalizeCol(Cn.col,Cn.world),o=Cn.row;return Fhe(t,this.getXForColumn(n),this.getYForRow(o+1),this.getXForColumn(n+1),this.getYForRow(o)),t}getTileCoords(t,i,r=!1){Cn.set(i);const n=r?Cn.col:this.denormalizeCol(Cn.col,Cn.world);return Array.isArray(t)?Wl(t,this.getXForColumn(n),this.getYForRow(Cn.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(Cn.row)),t}}class Ip{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:n}=this,{level:o}=n;if(r.length!==0)for(const{row:s,colFrom:a,colTo:u}of r)for(let d=a;d<=u;d++)t.call(i,o,s,n.normalizeCol(d),n.getWorldForColumn(d))}}Ip.pool=new uo(Ip);class u_{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}}const ot=new xi("0/0/0/0");class z3{constructor(t,i,r,n,o,s,a,u){this.x=t,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=o,this.rightAdjust=s,this.leftBound=a,this.rightBound=u}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,n]=t,[o,s]=i,a=o-r,u=s-n,d=u!==0?a/u:0,h=(Math.ceil(n)-n)*d,f=(Math.floor(n)-n)*d;return new z3(r,Math.floor(n),Math.ceil(s),d,a<0?h:f,a<0?f:h,a<0?o:r,a<0?r:o)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const Tr=[[0,0],[0,0],[0,0],[0,0]],Bhe=1e-6;class Uhe{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort((o,s)=>s.scale-o.scale);const n=this._lodInfos=r.map(o=>j3.create(t,o,i));r.forEach((o,s)=>{this._infoByLevel[o.level]=n[s],this._infoByScale[o.scale]=n[s],this.scales[s]=o.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){ot.set(i);const n=this._infoByLevel[ot.level];return n?n.getTileBounds(t,ot,r):t}getTileCoords(t,i,r=!1){ot.set(i);const n=this._infoByLevel[ot.level];return n?n.getTileCoords(t,ot,r):t}getTileCoverage(t,i=192,r="closest"){const n=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=Ip.pool.acquire(n),s=this._wrap;let a,u,d,h=1/0,f=-1/0;const y=o.spans;Tr[0][0]=Tr[0][1]=Tr[1][1]=Tr[3][0]=-i,Tr[1][0]=Tr[2][0]=t.size[0]+i,Tr[2][1]=Tr[3][1]=t.size[1]+i;for(const w of Tr)t.toMap(w,w),w[0]=n.getColumnForX(w[0]),w[1]=n.getRowForY(w[1]);const m=[];let g=3;for(let w=0;w<4;w++){if(Tr[w][1]===Tr[g][1]){g=w;continue}const _=z3.create(Tr[w],Tr[g]);h=Math.min(_.ymin,h),f=Math.max(_.ymax,f),m[_.ymin]===void 0&&(m[_.ymin]=[]),m[_.ymin].push(_),g=w}if(h==null||f==null||f-h>100)return null;let v=[];for(a=h;a<f;){m[a]!=null&&(v=v.concat(m[a])),u=1/0,d=-1/0;for(let w=v.length-1;w>=0;w--){const _=v[w];u=Math.min(u,_.getLeftCol()),d=Math.max(d,_.getRightCol())}if(u=Math.floor(u),d=Math.floor(d),a>=n.first[1]&&a<=n.last[1])if(s)if(n.size[0]<n.worldSize[0]){const w=Math.floor(d/n.worldSize[0]);for(let _=Math.floor(u/n.worldSize[0]);_<=w;_++)y.push(new u_(a,Math.max(n.getFirstColumnForWorld(_),u),Math.min(n.getLastColumnForWorld(_),d)))}else y.push(new u_(a,u,d));else u>n.last[0]||d<n.first[0]||(u=Math.max(u,n.first[0]),d=Math.min(d,n.last[0]),y.push(new u_(a,u,d)));a+=1;for(let w=v.length-1;w>=0;w--){const _=v[w];_.ymax>=a?_.incrRow():v.splice(w,1)}}return o}getTileParentId(t){ot.set(t);const i=this._infoByLevel[ot.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(ot,this._lodInfos[r],ot),ot.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){ot.set(i);const r=this._infoByLevel[ot.level],n=t.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(ot,n,ot);const s=n.denormalizeCol(ot.col,ot.world);for(const a of t.spans)if(a.row===ot.row&&a.colFrom<=s&&a.colTo>=s)return!0}if(n.resolution<r.resolution){const[s,a,u,d]=t.spans.reduce((v,w)=>(v[0]=Math.min(v[0],w.row),v[1]=Math.max(v[1],w.row),v[2]=Math.min(v[2],w.colFrom),v[3]=Math.max(v[3],w.colTo),v),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(ot.col,ot.world),f=n.getColumnForX(r.getXForColumn(h)),y=n.getRowForY(r.getYForRow(ot.row)),m=n.getColumnForX(r.getXForColumn(h+1))-1,g=n.getRowForY(r.getYForRow(ot.row+1))-1;return!(f>d||m<u||y>a||g<s)}const o=n.denormalizeCol(ot.col,ot.world);return t.spans.some(s=>s.row===ot.row&&s.colFrom<=o&&s.colTo>=o)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const n=so(this.tileInfo.spatialReference),o=-r*(n.valid[1]-n.valid[0]);t[0]+=o,t[2]+=o}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+Bhe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,n)=>Math.abs(n-t)<Math.abs(r-t)?n:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const n=this._infoByLevel[r.level];return t.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(t.level=i.level,t.col=Math.floor(r.col*n.resolution/i.resolution+.01),t.row=Math.floor(r.row*n.resolution/i.resolution+.01)),t)}}function Vhe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const c_=new Set,_0=[],Hc=new Map,PP=[0,0];let Rs=class extends se{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new fB({concurrency:e,process:(r,n)=>{const o=this._keyToItem.get(r);return t(o,{signal:n})},peeker:i==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(d=>{const h=this._keyToItem.get(d),f=this.tileInfoView.getTileScale(h.key);Hc.has(f)||(Hc.set(f,[]),i=Math.max(f,i),r=Math.min(f,r)),Hc.get(f).push(h.key),c_.add(f)});let n=this.state.scale;Hc.has(n)||(Vhe(_0,c_),_0.sort((d,h)=>d-h),n=_0.reduce((d,h)=>Math.abs(h-n)<Math.abs(d-n)?h:d,_0[0])),n=Math.min(n,i),n=Math.max(n,r);const o=Hc.get(n),s=t.getClosestInfoForScale(n),a=s.getColumnForX(this.state.center[0]),u=s.getRowForY(this.state.center[1]);return o.sort((d,h)=>{const f=s.denormalizeCol(d.col,d.world),y=s.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(u-d.row)*(u-d.row))-Math.sqrt((a-y)*(a-y)+(u-h.row)*(u-h.row))}),c_.clear(),Hc.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return e.forEach(o=>{const s=this._keyToItem.get(o);t.getTileCoords(PP,s.key);const a=mm(PP,i);a<r&&(r=a,n=s.key)}),n.id}};l([c({constructOnly:!0})],Rs.prototype,"concurrency",void 0),l([c({constructOnly:!0})],Rs.prototype,"process",void 0),l([c()],Rs.prototype,"state",void 0),l([c({constructOnly:!0})],Rs.prototype,"strategy",void 0),l([c({constructOnly:!0})],Rs.prototype,"tileInfoView",void 0),l([c({readOnly:!0})],Rs.prototype,"updating",null),Rs=l([S("esri.views.2d.tiling.TileQueue")],Rs);const Xve=Rs;class jhe{constructor(t,i,r){this.maxSize=t,this.tileInfoView=i,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return null;const r=i.key.level,n=this._tileKeysPerLevel[r];$P(this._tilePerId,t);for(let o=0;o<n.length;o++)if(n[o].id===t){n.splice(o,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(t,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let o=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&o>=0;)o!==t&&(n=this._pruneAroundCenterTile(n,i,r,o)),o--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,t))}_pruneAroundCenterTile(t,i,r,n){const o=this._tileKeysPerLevel[n];if(!o||o.length===0)return t;const{size:s,origin:a}=this.tileInfoView.tileInfo,u=r*s[0],d=r*s[1],h=[0,0],f=[0,0];for(o.sort((y,m)=>(h[0]=a.x+u*(y.col+.5),h[1]=a.y-d*(y.row+.5),f[0]=a.x+u*(m.col+.5),f[1]=a.y-d*(m.row+.5),av(h,i)-av(f,i)));o.length>0;){const y=o.pop();if(this._removeTile(y.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(i),$P(this._tilePerId,t)}}function $P(e,t){e.delete(t)}const ql=new xi(0,0,0,0),Gr=new Map,Gc=[],S0=[];class Qve{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new jhe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,n=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(S0.length=0,Gc.length=0,Gr.clear(),!n)return;const{minScale:o,maxScale:s}=this.tileInfoView.tileInfo,{spans:a,lodInfo:u}=n,{level:d}=u,{scale:h,center:f,resolution:y}=t.state,m=!t.stationary&&h>this._previousScale;if(this._previousScale=h,this.tiles.length=0,!i&&(h>o||h<s))return this.tiles.length=0,Gr.clear(),r.forEach(_=>{this.releaseTile(_)}),r.clear(),S0.length=0,Gc.length=0,Gr.clear(),Ip.pool.release(n),!0;r.forEach(_=>_.visible=!0);let g=0,v=0;if(a.length>0)for(const{row:_,colFrom:A,colTo:I}of a)for(let D=A;D<=I;D++){g++;const M=ql.set(d,_,u.normalizeCol(D),u.getWorldForColumn(D)).id;if(r.has(M)){const R=r.get(M);R.isReady?(Gr.set(M,R),v++):m||this._addParentTile(M,Gr)}else{let R;if(this._tileCache&&this._tileCache.has(M)){if(R=this._tileCache.pop(M),this.tileIndex.set(M,R),R.isReady){Gr.set(M,R),v++;continue}}else R=this.acquireTile(ql),this.tileIndex.set(M,R);m||this._addParentTile(M,Gr)}}const w=v===g;r.forEach((_,A)=>{if(ql.set(A),Gr.has(A))return;const I=this.tileInfoView.intersects(n,ql),D=this.cachePolicy==="purge"?ql.level!==d:ql.level>d;!I||!m&&w?!D&&I||Gc.push(A):_.isReady?D&&this.cachePolicy==="purge"&&this._hasReadyAncestor(ql,d)?Gc.push(A):S0.push(A):D&&Gc.push(A)});for(const _ of S0){const A=r.get(_);A&&A.isReady&&Gr.set(_,A)}for(const _ of Gc){const A=r.get(_);this._tileCache?this._tileCache.add(A):this.releaseTile(A),r.delete(_)}return Gr.forEach(_=>this.tiles.push(_)),r.forEach(_=>{Gr.has(_.key.id)||(_.visible=!1)}),this._tileCache&&this._tileCache.prune(d,f,y),Ip.pool.release(n),Gr.clear(),w}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n&&n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n&&n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(t,i){const r=Pl();this.tileInfoView.getTileBounds(r,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<t.level){const o=Pl();if(this.tileInfoView.getTileBounds(o,n.key,!0),ZY(o,r))return!0}return!1}}function H3(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class DP extends ni{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){H3(t.data,"primary")&&(t.stopPropagation(),i?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class zhe extends ni{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:n,delta:o}=i,{view:s}=this,{mapViewNavigation:a}=s;switch(n){case"begin":{const{scale:u}=s;this._startScale=u,this._currentScale=u,this._previousDelta=o,a.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;const u=1.015**o.y,d=this._startScale*u,h=d/this._currentScale;a.setViewpointImmediate(h),this._currentScale=d;break}case"end":{const{constraints:u}=s,{effectiveLODs:d,snapToZoom:h}=u;if(!h||!d)return void a.end();const f=u.snapScale(this._currentScale),y=(o.y>0?Math.max(f,u.snapToPreviousScale(this._startScale)):Math.min(f,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(y);break}}}}class Mw{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this.currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class Hhe extends ni{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new Mw({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&H3(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Ghe extends ni{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i;const n=this.view.mapViewNavigation;this.dragEventSeparator=new Mw({start:(o,s)=>{n.rotate.begin(this.view,s.data),s.stopPropagation()},update:(o,s)=>{n.rotate.update(this.view,s.data),s.stopPropagation()},end:(o,s)=>{n.rotate.end(),s.stopPropagation()},condition:(o,s)=>o===1&&H3(s.data,this.pointerAction)}),this.registerIncoming("drag",r,o=>this.dragEventSeparator.handle(o))}}function In(e){let t=e*e;return e<0&&(t*=-1),t}function Whe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function qhe(e,t,i){const r=i,n=e.state,o=e.device,s=t.tiltDirection==="forward-down"?1:-1,a=1;return o.deviceType==="standard"?(r.translation[0]=In(n.axes[0]),r.translation[1]=In(n.axes[1]),r.translation[2]=In(n.buttons[7])-In(n.buttons[6]),r.heading=In(n.axes[2]),r.tilt=In(n.axes[3])):o.deviceType==="spacemouse"&&(r.translation[0]=1.2*In(n.axes[0]),r.translation[1]=1.2*In(n.axes[1]),r.translation[2]=2*-In(n.axes[2]),r.heading=1.2*In(n.axes[5]),r.tilt=1.2*In(n.axes[3])),r.tilt*=s,yL(r.translation,r.translation,a),r}function Yhe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class Khe extends ni{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new gi,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([q(()=>{var i;return(i=this.view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this.handle.resume(),this.frameTask||(this.frameTask=up({update:r=>this._frameUpdate(r.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},ze)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,Whe(this.transformation)):(this.currentDevice=t.data.device,qhe(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const i=this.transformation;if(Yhe(i))return;const r=this.view.viewpoint.clone(),n=this.view.navigation.gamepad.velocityFactor,o=Jhe*n*t;Iw(r,r,[i.translation[0]*o,-i.translation[1]*o]);const s=1+i.translation[2]*Xhe*t,a=this.view.constraints.rotationEnabled?-i.heading*Zhe*t:0,u=this.view.size,d=[u[0]/2,u[1]];QF(r,r,s,a,d,u);const h=this.view.constraints.constrain(r,this.view.viewpoint);this.view.viewpoint=h}}const Zhe=.06,Jhe=.7,Xhe=6e-4;class Qhe extends ni{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class efe extends ni{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var jd;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(jd||(jd={}));class tfe extends ni{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=jd.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=jd.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:o}=this.view;let s=null;switch(n){case jd.IN:s=o.zoomIn();break;case jd.OUT:s=o.zoomOut();break;default:return}o.begin(),s.then(()=>o.end()),t.stopPropagation()}}const ife=.6;class rfe extends ni{constructor(t,i){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this.view.mapViewNavigation,{x:r,y:n,deltaY:o}=t.data,s=1/ife**(1/60*o),a=i.zoom(s,[r,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class nfe extends ni{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this.dragEventSeparator=new Mw({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function LP(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>afe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function ofe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function sfe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function afe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class lfe{constructor(t,i){this.element=t,this.input=i,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{const s=o.gamepad,a=s.index,u=this.inputDevices[a];u&&(this._emitGamepadEvent(s,LP(u),!1),this.inputDevices.splice(a,1),this.latestUpdate.splice(a,1),this.input.gamepad.devices.remove(u),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(this._forEachGamepad(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const i=new L3(t);i.deviceType!=="unknown"&&(this.inputDevices[t.index]=i,this.input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=up({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this.element.contains(document.activeElement),r=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(n=>{const o=this.inputDevices[n.index];if(!o)return;const s=this.latestUpdate[n.index],a=LP(o),u=r||sfe(a);s&&(s.timestamp===n.timestamp||!s.active&&u||ofe(s.state,a))||this._emitGamepadEvent(n,a,!u)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const n=i[r];this._validate(n)&&t(n)}}_emitGamepadEvent(t,i,r){const n=this.latestUpdate[t.index],o=n&&n.active;if(!o&&!r)return;const s=!o&&r?"start":o&&r?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this.callback&&this.callback({device:this.inputDevices[t.index],state:i,action:s})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const OP=k("trident"),kP=k("edge"),ufe=k("chrome"),cfe=k("ff"),dfe=k("safari"),Wc={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class Nw{constructor(t,i){this.input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new lfe(t,this.input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(d_[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&d_[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(d_[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Wc.touchNone:Wc.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Wc.touchPan:Wc.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Wc.touchNone),this._element.classList.remove(Wc.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=NF(this._element,t);return Nw.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=Wce(i);r&&t==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:(OP||kP)&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}OP||kP?r*=.7:ufe||dfe?r*=.6:cfe&&(r*=1.375);const n=100,o=Math.abs(r);o>n&&(r=r/o*200/(1+Math.exp(-.02*(o-n))));const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,s)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}Nw.test={disableSubpixelCoordinates:!1};const d_={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class pfe extends ni{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function G3(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function hfe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function ffe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:dr()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[I,D]=e,[M,R]=[D.x-I.x,D.y-I.y];return t.radius=Math.sqrt(M*M+R*R)/2,t.center.x=(I.x+D.x)/2,t.center.y=(I.y+D.y)/2,t}let i=0,r=0;for(let I=0;I<e.length;I++)i+=e[I].x,r+=e[I].y;i/=e.length,r/=e.length;const n=e.map(I=>I.x-i),o=e.map(I=>I.y-r);let s=0,a=0,u=0,d=0,h=0,f=0,y=0;for(let I=0;I<n.length;I++){const D=n[I],M=o[I],R=D*D,B=M*M;s+=R,a+=B,u+=D*M,d+=R*D,h+=B*M,f+=D*B,y+=M*R}const m=.5*(d+f),g=.5*(h+y),v=s*a-u*u,w=(m*a-g*u)/v,_=(s*g-u*m)/v,A=dr(w+i,_+r);return{radius:Math.sqrt(w*w+_*_+(s+a)/e.length),center:A}}const un={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class yfe extends ni{constructor(t=un.maximumDoubleClickDelay,i=un.maximumDoubleClickDistance,r=un.maximumDoubleTouchDelay,n=un.maximumDoubleTouchDistance,o=Gy){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=Dr(t.doubleClickTimeout))}get hasPendingInputs(){return Mv(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_handleImmediateClick(t){const i=t.data,r=this._pointerId(i),n=this._pointerState.get(r);if(n){const o=i.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;G3(n.event.data,i)>o?(this._clearDoubleClickTimeout(r,!0),this._startClick(t)):(this._clearDoubleClickTimeout(r,!1),this._doubleClick.emit(n.event.data,void 0,n.event.modifiers))}else this._startClick(t)}_startClick(t){const i=this._pointerId(t.data),r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(i,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),r)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const i=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(i,!0)}_handleDrag(t){const i=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(i,!0)}_clearDoubleClickTimeout(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimeout.remove(),r.doubleClickTimeout=null,i&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class mfe extends ni{constructor(t=un.maximumDoubleClickDelay,i=un.maximumDoubleClickDistance,r=un.maximumDoubleTouchDelay,n=un.maximumDoubleTouchDistance,o=Gy){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=n,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=dr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Mw({start:(s,a)=>this._dragStart(s,a),update:(s,a)=>this._dragUpdate(a),end:(s,a)=>this._dragEnd(a)}),this.registerIncoming("drag",s=>this._dragEventSeparator.handle(s)),this.registerIncoming("pointer-down",s=>this._handlePointerDown(s)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return Mv(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout.remove(),i.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:n,buttons:o,pointer:s,pointers:a,pointerType:u,timestamp:d}=r;return{action:t,delta:i,button:n,buttons:o,pointer:s,pointers:a,pointerType:u,timestamp:d}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:o}=r;this._dragStartCenter=o;const s=this._createDoubleTapDragData("begin",dr(0,0),r);this._doubleTapDrag.emit(s,void 0,n),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,o=dr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("update",o,i);this._doubleTapDrag.emit(s,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,o=dr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("end",o,i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=this._pointerId(i),n=this._pointerState.get(r),{pointerType:o}=i.native;if(n){const s=o==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(r),G3(n.event.data,i)>s?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:i}=t,{pointerId:r,button:n,pointerType:o}=i;return o==="mouse"?`${r}:${n}`:`${o}`}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,n=this._pointerId(i),o=r==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._clearPointerDown(n),o);this._pointerState.set(n,{event:t,doubleTapTimeout:s}),this.refreshHasPendingInputs()}}class gfe extends ni{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,n){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:i.buttons,timestamp:n,pointers:vfe(this.activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=T0(this.activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(i,n);const o=zg(n,yB(this.activePointerMap));n.initialAngle=o,n.lastAngle=o,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this.activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=T0(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=T0(this.activePointerMap);this.activePointerMap.forEach(r=>{r.initialAngle=zg(r,i)-t,r.lastAngle=zg(r,i)-t})}_emitEvent(t,i,r){const n=T0(this.activePointerMap);this.drag.emit(this._createPayload(t,i,n,r),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this.activePointerMap.get(i)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,n=t.timestamp;switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this.isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(r),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function yB(e){const t=[];return e.forEach(i=>{t.push(dr(i.event.x,i.event.y))}),ffe(t)}function T0(e){const t=yB(e);let i=0;return e.forEach(r=>{let n=zg(r,t),o=n-r.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;n=r.lastAngle+o,r.lastAngle=n,i+=n-r.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function vfe(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function zg(e,t){const i=e.event,r=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,r)}var FP;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(FP||(FP={}));class wfe extends ni{constructor(t=un.maximumDoubleClickDelay,i=un.maximumDoubleClickDistance,r=un.maximumDoubleTouchDelay,n=un.maximumDoubleTouchDistance,o=Gy){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",s=>{this._handlePointerLoss(s,"pointer-up")}),this.registerIncoming("pointer-capture-lost",s=>{this._handlePointerLoss(s,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",s=>{this._handlePointerLoss(s,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=this._pointerId(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerLoss(t,i){const r=t.data,n=this._pointerId(r),o=this._pointerState.get(n);if(o&&i==="pointer-up"&&o.downButton===r.native.button){const s=o.immediateDoubleClick;if(s){s.timeoutHandle.remove();const a=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;G3(s,t.data)>a?this._startImmediateDoubleClick(t,o):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(r))}else this._startImmediateDoubleClick(t,o)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_removeState(t){const i=this._pointerId(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const Ih={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class bfe extends ni{constructor(t=Ih.maximumClickDelay,i=Ih.movementUntilMouseDrag,r=Ih.movementUntilPenDrag,n=Ih.movementUntilTouchDrag,o=Ih.holdDelay,s=Gy){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=r,this.movementUntilTouchDrag=n,this.holdDelay=o,this._clock=s,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const s=this._pointerState.get(r);if(s){if(!s.isDragging){const a=s.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),s.holdEmitted=!0}s.holdTimeout=null}},this.holdDelay));const o={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,o),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,i),void 0,n.modifiers):hfe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),n.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,i)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,n=r.native.pointerId,o=this._pointerState.get(n);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",o,i==="pointer-up"?r:o.previousEvent),void 0,o.modifiers):i==="pointer-up"&&o.downButton===r.native.button&&t.timestamp-o.startTimestamp<=this.maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}}const E0={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Ad=class extends se{constructor(){super(...arguments),this._handles=new gi}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([mn(()=>!e(),()=>this._disconnect()),mn(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new Nw(e,this.view.input),i=[new wfe,new bfe,new yfe,new gfe(this.view.navigation),new mfe],r=new Ha({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new pfe],Al.INTERNAL),r.installHandlers("navigation",[new nfe(this.view),new Khe(this.view),new rfe(this.view),new DP(this.view),new DP(this.view,[E0.counter]),new Hhe(this.view,"primary"),new Qhe(this.view,E0.pan),new tfe(this.view,E0.zoom),new efe(this.view,E0.rotate),new Ghe(this.view,"secondary"),new zhe(this.view,"touch")],Al.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,q(()=>{var n,o;return(o=(n=this.view)==null?void 0:n.navigation)==null?void 0:o.browserTouchPanEnabled},n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},ze)}get test(){return{inputManager:this._inputManager}}};l([c()],Ad.prototype,"view",void 0),l([c()],Ad.prototype,"latestPointerType",null),l([c()],Ad.prototype,"latestPointerLocation",null),Ad=l([S("esri.views.2d.input.MapViewInputManager")],Ad);const _fe=Ad;var BP,UP,VP,mB={exports:{}};BP=mB,UP=function(){function e(n,o,s,a,u){t(n,o,s||0,a||n.length-1,u||r)}function t(n,o,s,a,u){for(;a>s;){if(a-s>600){var d=a-s+1,h=o-s+1,f=Math.log(d),y=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*y*(d-y)/d)*(h-d/2<0?-1:1);t(n,o,Math.max(s,Math.floor(o-h*y/d+m)),Math.min(a,Math.floor(o+(d-h)*y/d+m)),u)}var g=n[o],v=s,w=a;for(i(n,s,o),u(n[a],g)>0&&i(n,s,a);v<w;){for(i(n,v,w),v++,w--;u(n[v],g)<0;)v++;for(;u(n[w],g)>0;)w--}u(n[s],g)===0?i(n,s,w):i(n,++w,a),w<=o&&(s=w+1),o<=w&&(a=w-1)}}function i(n,o,s){var a=n[o];n[o]=n[s],n[s]=a}function r(n,o){return n<o?-1:n>o?1:0}return e},(VP=UP())!==void 0&&(BP.exports=VP);const Sfe=mB.exports;function uv(e,t){if(!(this instanceof uv))return new uv(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function Tfe(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function qc(e,t){Mf(e,0,e.children.length,t,e)}function Mf(e,t,i,r,n){n||(n=xd(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,s=t;s<i;s++)o=e.children[s],Nf(n,e.leaf?r(o):o);return n}function Nf(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function jP(e,t){return e.minX-t.minX}function zP(e,t){return e.minY-t.minY}function p_(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function A0(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Efe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Afe(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function h_(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function x0(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function xd(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function HP(e,t,i,r,n){for(var o,s=[t,i];s.length;)(i=s.pop())-(t=s.pop())<=r||(o=t+Math.ceil((i-t)/r/2)*r,Sfe(e,o,t,i,n),s.push(t,o,o,i))}uv.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!x0(e,t))return i;for(var n,o,s,a,u=[];t;){for(n=0,o=t.children.length;n<o;n++)s=t.children[n],x0(e,a=t.leaf?r(s):s)&&(t.leaf?i.push(s):h_(e,a)?this._all(s,i):u.push(s));t=u.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!x0(e,t))return!1;for(var r,n,o,s,a=[];t;){for(r=0,n=t.children.length;r<n;r++)if(o=t.children[r],x0(e,s=t.leaf?i(o):o)){if(t.leaf||h_(e,s))return!0;a.push(o)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=xd([]),this},remove:function(e,t){if(!e)return this;for(var i,r,n,o,s=this.data,a=this.toBBox(e),u=[],d=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],i=d.pop(),o=!0),s.leaf&&(n=Tfe(e,s.children,t))!==-1)return s.children.splice(n,1),u.push(s),this._condense(u),this;o||s.leaf||!h_(s,a)?r?(i++,s=r.children[i],o=!1):s=null:(u.push(s),d.push(i),i=0,r=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:jP,compareMinY:zP,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var n,o=i-t+1,s=this._maxEntries;if(o<=s)return qc(n=xd(e.slice(t,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(n=xd([])).leaf=!1,n.height=r;var a,u,d,h,f=Math.ceil(o/s),y=f*Math.ceil(Math.sqrt(s));for(HP(e,t,i,y,this.compareMinX),a=t;a<=i;a+=y)for(HP(e,a,d=Math.min(a+y-1,i),f,this.compareMinY),u=a;u<=d;u+=f)h=Math.min(u+f-1,d),n.children.push(this._build(e,u,h,r-1));return qc(n,this.toBBox),n},_chooseSubtree:function(e,t,i,r){for(var n,o,s,a,u,d,h,f;r.push(t),!t.leaf&&r.length-1!==i;){for(h=f=1/0,n=0,o=t.children.length;n<o;n++)u=p_(s=t.children[n]),(d=Efe(e,s)-u)<f?(f=d,h=u<h?u:h,a=s):d===f&&u<h&&(h=u,a=s);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),o=[],s=this._chooseSubtree(n,this.data,t,o);for(s.children.push(e),Nf(s,n);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(n,o,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),s=xd(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,qc(i,this.toBBox),qc(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(e,t){this.data=xd([e,t]),this.data.height=e.height+1,this.data.leaf=!1,qc(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,o,s,a,u,d,h;for(u=d=1/0,r=t;r<=i-t;r++)s=Afe(n=Mf(e,0,r,this.toBBox),o=Mf(e,r,i,this.toBBox)),a=p_(n)+p_(o),s<u?(u=s,h=r,d=a<d?a:d):s===u&&a<d&&(d=a,h=r);return h},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:jP,n=e.leaf?this.compareMinY:zP;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n,o,s=this.toBBox,a=Mf(e,0,t,s),u=Mf(e,i-t,i,s),d=A0(a)+A0(u);for(n=t;n<i-t;n++)o=e.children[n],Nf(a,e.leaf?s(o):o),d+=A0(a);for(n=i-t-1;n>=t;n--)o=e.children[n],Nf(u,e.leaf?s(o):o),d+=A0(u);return d},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Nf(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():qc(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class cv{constructor(t,i){this.key=new xi(0,0,0,0),this.bounds=Pl(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return Oe.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=ji.acquire();for(let r=0;r<t.length;r++)i[r]=new cv(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return ok.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Yl={added:[],removed:[]},f_=new Set,xfe=new xi(0,0,0,0);class Cfe extends ra{constructor(t){super(),this._tiles=new Map,this._index=uv(9,k("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const n=new cv(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of t.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:o}=n;if(r.length>0)for(const{row:s,colFrom:a,colTo:u}of r)for(let d=a;d<=u;d++){const h=xfe.set(o,s,n.normalizeCol(d),n.getWorldForColumn(d)).id;if(f_.add(h),!this.has(h)){const f=new cv(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),Yl.added.push(f)}}for(let s=this.tiles.length-1;s>=0;s--){const a=this.tiles[s];f_.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(s,1),this._index.remove(a),Yl.removed.push(a))}(Yl.added.length||Yl.removed.length)&&this.emit("update",Yl),Ip.pool.release(i),f_.clear(),Yl.added.length=0,Yl.removed.length=0}}let Ife=0,Ka=class extends se{constructor(){super(...arguments),this.color=new ie([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return Ife++}};l([c({readOnly:!0})],Ka.prototype,"version",null),l([c({type:ie})],Ka.prototype,"color",void 0),l([c({type:ie})],Ka.prototype,"haloColor",void 0),l([c()],Ka.prototype,"haloOpacity",void 0),l([c()],Ka.prototype,"fillOpacity",void 0),Ka=l([S("esri.views.2d.support.HighlightOptions")],Ka);const gB=Ka,Mfe=e=>e.includes("Brush");class vB{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),Mfe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function Nfe(e,t,i,r,n,o,s,a){let u;e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?u=[e.width,e.height]:e.width==null&&e.height!=null?u=[e.height,e.height]:e.width!=null&&e.height==null?u=[e.width,e.width]:e.width==null&&e.height==null&&(u=null);const d=i[0]-(r.left+r.right),h=i[1]-(r.top+r.bottom);let f,y,m=e.area||{x:0,y:0,width:d,height:h};if(u){const g=d/h,v=u[0]/u[1];if(v>g){const w=m.width/v;m={x:m.x,y:Math.round(m.y+(m.height-w)/2),width:m.width,height:Math.round(w)}}else{const w=m.height*v;m={x:Math.round(m.x+(m.width-w)/2),y:m.y,width:Math.round(w),height:m.height}}}else u=[m.width,m.height];return u[0]>m.width?(f=Math.min(u[0]/m.width,t),y=u[0]/m.width/f):(f=1,y=u[0]/m.width),{resolutionScale:f,cropArea:{x:Math.round((m.x+r.left)*f),y:Math.round((m.y+r.top)*f),width:Math.round(m.width*f),height:Math.round(m.height*f)},outputScale:y,format:n,quality:o,children:s,rotation:a}}function Rfe(e,t,i){const{ctx:r,canvas:n}=wB(e,i),o=r.getImageData(0,0,e.width,e.height),s=Dfe(n,t);return bB(n),{dataUrl:s,data:o}}function Pfe(e,t){const{ctx:i,canvas:r}=wB(e,t),n=i.getImageData(0,0,e.width,e.height);return bB(r),n}function wB(e,t){const i=$fe();t.premultipliedAlpha&&Ufe(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d");return r.putImageData(e,0,0),t.flipY&&Bfe(r),{ctx:r,canvas:i}}function bB(e){e.width=0,e.height=0}function $fe(){return O(y_)&&(y_=document.createElement("canvas")),y_}let y_=null;function Dfe(e,t){const i=Vfe[t.format],r=t.quality/100;return e.toDataURL(i,r)}function Lfe(e,t){const i=Ffe(e),r=zfe[i];return{format:i,quality:yr(t!=null?t:r,0,100)}}function Ofe(e,t){return t/Math.max(e[0],e[1])}function ewe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(dv)try{return new ImageData(e,t)}catch{dv=!1}return _B(e,t,i)}function twe(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(dv)try{return new ImageData(e,t,i)}catch{dv=!1}const n=_B(t,i,r);return n.data.set(e,0),n}function iwe(e,t,i,r=0,n=0,o=e.width-r,s=e.height-n,a=!1){const{data:u}=e,{width:d,height:h,data:f}=t,y=o/d,m=s/h,g=Math.ceil(y/2),v=Math.ceil(m/2),w=e.width;for(let _=0;_<h;_++)for(let A=0;A<d;A++){const I=4*(A+(a?h-_-1:_)*d);let D=0,M=0,R=0,B=0,j=0,Y=0;const ee=(_+.5)*m;for(let re=Math.floor(_*m);re<(_+1)*m;re++){const ue=Math.abs(ee-(re+.5))/v,ge=(A+.5)*y,ne=ue*ue;for(let Tt=Math.floor(A*y);Tt<(A+1)*y;Tt++){const br=Math.abs(ge-(Tt+.5))/g,lt=Math.sqrt(ne+br*br);if(lt>=1)continue;let _r=2*lt*lt*lt-3*lt*lt+1;const _n=4*(r+Tt+(n+re)*w);Y+=_r*u[_n+3],M+=_r,!i&&u[_n+3]<255&&(_r=_r*u[_n+3]/255),R+=_r*u[_n],B+=_r*u[_n+1],j+=_r*u[_n+2],D+=_r}}f[I]=R/D,f[I+1]=B/D,f[I+2]=j/D,f[I+3]=Y/M}return t}function _B(e,t,i){return i||(i=kfe()),i.getContext("2d").createImageData(e,t)}let Mh=null,dv=!0;function kfe(){return Mh||(Mh=document.createElement("canvas"),Mh.width=1,Mh.height=1),Mh}function Ffe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return jfe}}function Bfe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function Ufe(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const n=t[r+3];if(n!==255&&n>0){const o=255/n;t[r+0]=t[r+0]*o,t[r+1]=t[r+1]*o,t[r+2]=t[r+2]*o}}}const Vfe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},GP=98,jfe="png",zfe={png:100,jpg:GP,jpeg:GP};var $t;function rwe(e,t,i={}){const r=SB(e);for(;r.length>1;){const n=pv(t,r.shift(),i);if(T(n))return n}return Hfe(t,r.shift(),i)}function SB(e){const t=k("esri-force-webgl");if(t===$t.WEBGL1||t===$t.WEBGL2)return[t];switch(e){case"2d":return k("mac")&&k("chrome")?[$t.WEBGL1,$t.WEBGL2]:[$t.WEBGL2,$t.WEBGL1];case"3d":return[$t.WEBGL2,$t.WEBGL1]}}function Hfe(e,t,i={}){if(!window.WebGLRenderingContext)return WP(e,Gfe),null;const r=pv(e,t,i);return O(r)&&WP(e,Wfe),r}function pv(e,t,i={}){const r=t===$t.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const o of r){try{n=e.getContext(o,i)}catch{}if(n)break}return n}function WP(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})($t||($t={}));const Gfe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',Wfe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let m_,g_;function jE(e){const t=SB(e);for(;t.length>1;){const i=qP(t.shift());if(i.available)return i}return qP(t.shift())}function qP(e){switch(e){case $t.WEBGL1:return qfe();case $t.WEBGL2:return Yfe()}}function qfe(){return m_||(m_=Jfe()),m_}function Yfe(){return g_||(g_=Xfe()),g_}class TB{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class Kfe extends TB{constructor(){super(...arguments),this.type=$t.WEBGL1}}class Zfe extends TB{constructor(){super(...arguments),this.type=$t.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function EB(e,t){var o;if(e===$t.WEBGL1&&typeof WebGLRenderingContext===void 0||e===$t.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const i=document.createElement("canvas");if(!i)return null;let r=pv(i,e,{failIfMajorPerformanceCaveat:!0});if(O(r)&&(r=pv(i,e),T(r)&&(t.majorPerformanceCaveat=!0)),O(r))return r;if(e===$t.WEBGL1){const s=(o=r.getParameter(r.VERSION))==null?void 0:o.match(/^WebGL\s+([\d.]*)/);if(s){const a=parseFloat(s[1]);t.available=a>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),r}function Jfe(){const e=new Kfe,t=EB($t.WEBGL1,e);return O(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function Xfe(){const e=new Zfe,t=EB($t.WEBGL2,e);return O(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function Qfe(e){const t=jE(e);if(!t.available)return new N("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new N("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new N("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new N("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===$t.WEBGL1){if(!t.supportsElementIndexUint)return new N("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new N("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new N("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function eye(e){return e&&"nodeType"in e}function tye(e){return e&&typeof e.render=="function"}const YP={component:"esri-component"};let xu=class extends se{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(YP.component),t&&t.classList.remove(YP.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||eye(e)?(this._set("widget",null),Tx(e)):(tye(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};l([c({dependsOn:[]})],xu.prototype,"id",null),l([c()],xu.prototype,"node",null),l([Fe("node")],xu.prototype,"castNode",null),l([c({readOnly:!0})],xu.prototype,"widget",void 0),xu=l([S("esri.views.ui.Component")],xu);const Hg=xu,iye={left:0,top:0,bottom:0,right:0},AB={bottom:30,top:15,right:15,left:15},v_="manual",$i={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function rye(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function w_(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function b_(e,{top:t,bottom:i,left:r,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=n}let Ps=class extends ra.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new gi,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&b_(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&b_(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([q(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,ze),q(()=>this.padding,this._applyUIPadding,ze)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add($i.ui),_te(e),this._attachContainers(e)),t&&(t.classList.remove($i.ui),b_(t,{top:"",bottom:"",left:"",right:""}),xO(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...AB,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const n=w_(e);n&&({index:i,position:t,component:e,key:r}=n),t&&typeof t=="object"&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const n=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||v_)===v_?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains($i.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(o=>this.move(o,t)),!e)return;let i;const r=w_(e)||w_(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof Hg||(e=new Hg({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof Hg?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||iye}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add($i.innerContainer),e.classList.add($i.cornerContainer);const t=document.createElement("div");t.classList.add($i.innerContainer),t.classList.add($i.manualContainer);const i=document.createElement("div");i.classList.add($i.topLeft),i.classList.add($i.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add($i.topRight),r.classList.add($i.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add($i.bottomLeft),n.classList.add($i.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add($i.bottomRight),o.classList.add($i.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;const s=gl();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":n,"bottom-right":o,"top-leading":s?r:i,"top-trailing":s?i:r,"bottom-leading":s?o:n,"bottom-trailing":s?n:o},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||v_,r=e.index,n=this._positionNameToContainerLookup[i],o=r>-1;if(rye(t.widget)&&t.widget.startup(),!o)return void n.appendChild(t.node);const s=Array.prototype.slice.call(n.children);if(r===0)return void(n.firstChild?cM(t.node,n.firstChild):n.appendChild(t.node));r>=s.length?n.appendChild(t.node):cM(t.node,s[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(r=>(t=r===e,t&&(i=r),t)),i}_findById(e){let t,i=null;return this._components.some(r=>(t=r.id===e,t&&(i=r),t)),i}_findByNode(e){let t,i=null;return this._components.some(r=>(t=r.node===e,t&&(i=r),t)),i}};l([c()],Ps.prototype,"container",null),l([c()],Ps.prototype,"height",null),l([c({value:AB})],Ps.prototype,"padding",null),l([Fe("padding")],Ps.prototype,"castPadding",null),l([c()],Ps.prototype,"view",void 0),l([c()],Ps.prototype,"width",null),Ps=l([S("esri.views.ui.UI")],Ps);const nye=Ps;function KP(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function oye(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function C0(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function sye(e){return e.type==="bing-maps"}const ba=[];let Cd=class extends fy{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new he,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>q(()=>{var n;return[r.suspended,(n=r.layer)==null?void 0:n.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([Nl(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),mn(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");ba.length=0,e?(e.forEach(t=>{var n;if(t.suspended||!((n=t.layer)!=null&&n.attributionVisible))return;const i=t.layer;if(KP(i,"user"))return void C0(ba,t,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(t)){const o=this._fetchedAttributionData.get(t);return void(o?C0(ba,t,this._getDynamicAttribution(o,this.view,i)):KP(i)&&C0(ba,t,i.copyright))}return void this._fetchAttributionData(t)}const r=i.get("portalItem.accessInformation");C0(ba,t,r||i.copyright)}),oye(this.items,ba)&&(this.items.removeAll(),this.items.addMany(ba)),ba.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await Pv(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,sye(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let n=0;n<i.length;n++){const o=i[n],s=o.coverageAreas;if(!s)return;for(const a of s){const u=a.bbox,d=a.zoomMin-(t&&a.zoomMin?1:0),h=a.zoomMax-(t&&a.zoomMax?1:0),f={xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:me.WGS84},y={extent:qs(f),attribution:o.attribution||"",score:a.score!=null?a.score:100,id:n};for(let m=d;m<=h;m++)r[m]=r[m]||[],r[m].push(y)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:n}=t;let o=i.tileInfo.scaleToZoom(n);if(o=Math.min(e.maxKey,Math.round(o)),!r||o==null||o<=-1)return"";const s=e[o],a=Fv(r.center.clone().normalize(),t.spatialReference),u={};return s?s.filter(d=>{const h=!u[d.id]&&a&&Bv(d.extent,a);return h&&(u[d.id]=!0),h}).sort((d,h)=>h.score-d.score||d.objectId-h.objectId).map(d=>d.attribution).join(", "):""}};l([c({readOnly:!0,type:he})],Cd.prototype,"items",void 0),l([c({readOnly:!0})],Cd.prototype,"state",null),l([c()],Cd.prototype,"view",void 0),Cd=l([S("esri.widgets.Attribution.AttributionViewModel")],Cd);const xB=Cd,_a={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let ki=class extends vi{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=_a.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new xB}initialize(){this.own(Nl(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[_a.open]:this._isOpen};return C("div",{bind:this,class:this.classes(_a.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return C("div",{class:_a.poweredBy},"Powered by"," ",C("a",{class:_a.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:r}=this,n={[_a.sourcesOpen]:e,[_a.interactive]:t};return C("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(_a.sources,n),innerHTML:r,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:n}=e,o=n>r,s=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,s&&(t=!0),this._isOpen){const a=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([c()],ki.prototype,"_isOpen",void 0),l([c()],ki.prototype,"_isInteractive",null),l([c()],ki.prototype,"_attributionTextOverflowed",void 0),l([c()],ki.prototype,"_prevSourceNodeHeight",void 0),l([c({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ki.prototype,"attributionText",null),l([c()],ki.prototype,"iconClass",void 0),l([c()],ki.prototype,"itemDelimiter",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ki.prototype,"label",void 0),l([c(),pi("esri/widgets/Attribution/t9n/Attribution")],ki.prototype,"messages",void 0),l([J("viewModel.view")],ki.prototype,"view",void 0),l([c({type:xB})],ki.prototype,"viewModel",void 0),l([lr()],ki.prototype,"_toggleState",null),ki=l([S("esri.widgets.Attribution")],ki);const aye=ki,lye="esri.widgets.CompassViewModel";let Cu=class extends D3(se){constructor(e){super(e),this._handles=new gi,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(q(()=>this.view,this._updateRotationWatcher,ze))}destroy(){this._handles=Dr(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?q(()=>e==null?void 0:e.rotation,this._updateForRotation,ze):q(()=>e==null?void 0:e.camera,this._updateForCamera,ze))}};l([c({readOnly:!0})],Cu.prototype,"canShowNorth",null),l([c()],Cu.prototype,"orientation",void 0),l([c({readOnly:!0})],Cu.prototype,"state",null),l([c()],Cu.prototype,"view",void 0),Cu=l([S(lye)],Cu);const CB=Cu,Sa={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Po=class extends vi{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=Sa.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new CB}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",r=(t==="rotation"?"rotation":"compass")=="compass",n=i?-1:0,o={[Sa.disabled]:i,[Sa.interactive]:!i},s={[Sa.northIcon]:r,[Sa.rotationIcon]:!r},{messages:a}=this;return C("div",{bind:this,class:this.classes(Sa.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":a.reset,title:a.reset},C("span",{"aria-hidden":"true",class:this.classes(Sa.icon,s),styles:this._toRotationTransform(e)}),C("span",{class:Sa.text},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};l([J("viewModel.goToOverride")],Po.prototype,"goToOverride",void 0),l([c()],Po.prototype,"iconClass",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Po.prototype,"label",void 0),l([c(),pi("esri/widgets/Compass/t9n/Compass")],Po.prototype,"messages",void 0),l([J("viewModel.view")],Po.prototype,"view",void 0),l([c({type:CB})],Po.prototype,"viewModel",void 0),l([lr()],Po.prototype,"_reset",null),Po=l([S("esri.widgets.Compass")],Po);const uye=Po;let Id=class extends se{constructor(e){super(e),this._handles=new gi,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(mn(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};l([c({readOnly:!0})],Id.prototype,"state",null),l([c()],Id.prototype,"navigationMode",void 0),l([c()],Id.prototype,"view",void 0),Id=l([S("esri.widgets.NavigationToggleViewModel")],Id);const IB=Id,Wr={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let $o=class extends vi{constructor(e,t){super(e,t),this.iconClass=Wr.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new IB}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[Wr.disabled]:e,[Wr.isLayoutHorizontal]:this.layout==="horizontal"},r={[Wr.activeButton]:t},n={[Wr.activeButton]:!t},o=e?-1:0,s=this.messages.toggle;return C("div",{bind:this,class:this.classes(Wr.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":s,title:s},C("div",{class:this.classes(Wr.button,Wr.panButton,r)},C("span",{class:Wr.panIcon})),C("div",{class:this.classes(Wr.button,Wr.rotateButton,n)},C("span",{class:Wr.rotationIcon})))}_toggle(){this.toggle()}};l([c()],$o.prototype,"iconClass",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],$o.prototype,"label",void 0),l([c({value:"vertical"})],$o.prototype,"layout",null),l([c(),pi("esri/widgets/NavigationToggle/t9n/NavigationToggle")],$o.prototype,"messages",void 0),l([J("viewModel.view")],$o.prototype,"view",void 0),l([c({type:IB})],$o.prototype,"viewModel",void 0),l([lr()],$o.prototype,"_toggle",null),$o=l([S("esri.widgets.NavigationToggle")],$o);const cye=$o,Nh={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Za=class extends vi{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[Nh.disabled]:!this.enabled,[Nh.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return C("div",{bind:this,class:this.classes(Nh.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},C("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Nh.icon,i)}),C("span",{class:Nh.iconText},this.title))}_triggerAction(){this.action.call(this)}};l([c()],Za.prototype,"action",void 0),l([c()],Za.prototype,"enabled",void 0),l([c()],Za.prototype,"iconClass",void 0),l([c()],Za.prototype,"title",void 0),l([lr()],Za.prototype,"_triggerAction",null),Za=l([S("esri.widgets.IconButton")],Za);const ZP=Za;let Md=class extends se{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};l([c({readOnly:!0})],Md.prototype,"canZoomIn",null),l([c({readOnly:!0})],Md.prototype,"canZoomOut",null),l([c()],Md.prototype,"view",void 0),Md=l([S("esri.widgets.Zoom.ZoomConditions2D")],Md);const dye=Md;let Nd=class extends se{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};l([c({readOnly:!0})],Nd.prototype,"canZoomIn",null),l([c({readOnly:!0})],Nd.prototype,"canZoomOut",null),l([c()],Nd.prototype,"view",void 0),Nd=l([S("esri.widgets.Zoom.ZoomConditions3D")],Nd);const pye=Nd;let Ja=class extends se{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new dye({view:e}):e.type==="3d"&&(this._zoomConditions=new pye({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():P_(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():P_(e.goTo({zoomFactor:.5}))}};l([c()],Ja.prototype,"_zoomConditions",void 0),l([c({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Ja.prototype,"canZoomIn",void 0),l([c({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Ja.prototype,"canZoomOut",void 0),l([c({readOnly:!0})],Ja.prototype,"state",null),l([c()],Ja.prototype,"view",null),Ja=l([S("esri.widgets.Zoom.ZoomViewModel")],Ja);const MB=Ja,Rh={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let $s=class extends vi{constructor(e,t){super(e,t),this.iconClass=Rh.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new MB}initialize(){this._zoomInButton=new ZP({action:this.zoomIn.bind(this),iconClass:Rh.zoomInIcon}),this._zoomOutButton=new ZP({action:this.zoomOut.bind(this),iconClass:Rh.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[Rh.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,C("div",{class:this.classes(Rh.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};l([c()],$s.prototype,"iconClass",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],$s.prototype,"label",void 0),l([c({value:"vertical"})],$s.prototype,"layout",null),l([c(),pi("esri/widgets/Zoom/t9n/Zoom")],$s.prototype,"messages",void 0),l([J("viewModel.view")],$s.prototype,"view",void 0),l([c({type:MB})],$s.prototype,"viewModel",void 0),$s=l([S("esri.widgets.Zoom")],$s);const NB=$s,RB="esri.views.ui.DefaultUI";function hye(e){return e&&e.view!==void 0}W.getLogger(RB);let Gg=class extends nye{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([q(()=>this.components,this._componentsWatcher.bind(this),ze),q(()=>this.view,this._updateViewAwareWidgets.bind(this),ze)])}_add(e,t,i,r){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,r)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),r=i&&i.widget;hye(r)&&(r.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new Hg({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new aye({view:this.view})}_createCompass(){return new uye({view:this.view})}_createNavigationToggle(){return new cye({view:this.view})}_createZoom(){return new NB({view:this.view})}};l([c()],Gg.prototype,"components",void 0),Gg=l([S(RB)],Gg);const fye=Gg;let Wg=class extends fye{constructor(e){super(e),this.components=["attribution","zoom"]}};l([c()],Wg.prototype,"components",void 0),Wg=l([S("esri.views.ui.2d.DefaultUI2D")],Wg);const PB=Wg;var zE;let qg=zE=class extends V{constructor(e){super(e),this.color=new ie([0,0,0,1])}clone(){return new zE(P({color:this.color}))}};l([c({type:ie,json:{write:!0}})],qg.prototype,"color",void 0),qg=zE=l([S("esri.webmap.background.ColorBackground")],qg);const yye=qg,ps=W.getLogger("esri.views.MapView");let $B,DB,LB,OB,kB,FB;async function mye(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,Stage:o}]=await Promise.all([U(()=>import("./webglDeps.bee6df27.js"),["webglDeps.bee6df27.js","VertexArrayObject.26df0ff1.js","Texture.844ef494.js","ProgramTemplate.00141baf.js","programUtils.ddd46621.js"],import.meta.url),U(()=>import("./mapViewDeps.598da050.js"),["mapViewDeps.598da050.js","CIMSymbolHelper.84301d85.js","BidiEngine.ec67919b.js","MaterialKey.b7fdbca1.js","Utils.0ab6f103.js","Texture.844ef494.js","utils.a65c5851.js","WGLContainer.dbfa59f4.js","pixelUtils.87d53e33.js","VertexArrayObject.26df0ff1.js","ProgramTemplate.00141baf.js","config.40d47db8.js","GeometryUtils.8166011b.js","earcut.d30cbec0.js","programUtils.ddd46621.js","ExpandedCIM.d134bf8e.js","quantizationUtils.37e0ea7c.js","_commonjsHelpers.01f5fe30.js","imageutils.40fd005a.js","Matcher.9f7ad188.js","visualVariablesUtils.2d08429a.js","visualVariablesUtils.621fe5a7.js","tileUtils.ea15b639.js","TileClipper.c27e2183.js","devEnvironmentUtils.8c6e6b72.js","CircularArray.9bd71b73.js","requestImageUtils.90fb9d11.js","ComputedAttributeStorage.1cc95f6f.js","centroid.4f125de8.js","BaseGraphicContainer.73928a75.js","normalizeUtilsSync.f1c573de.js","projectionSupport.2b6172e4.js","json.d1a0fa35.js","FeatureContainer.89a84221.js","TileContainer.a9ce7797.js","schemaUtils.9ce7d0b0.js","createSymbolSchema.9a1cf635.js","MD5.97b39efc.js","util.b474ae16.js","vec3f32.8d37ecf5.js","GraphicContainer.d15dafe6.js"],import.meta.url)]);DB=e,LB=t,OB=i,kB=r,FB=n,$B=o}const JP=160;function gye(e){return e&&e.declaredClass==="esri.Viewpoint"}let we=class extends qJ(yde(mde(zde))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new pp({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new qpe(this),this._pePromise=null,this.floors=new he,this.highlightOptions=new gB,this.inputManager=new _fe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new vB,this.type="2d",this.ui=new PB,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new nB,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([q(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(JP)},dp),this.on("resize",t=>this._resizeHandler(t)),q(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),dZ()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Cfe(this.featuresTilingScheme)}get initialExtentRequired(){var s;const{scale:e,constraints:t,center:i,viewpoint:r,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((s=this.map.initialViewProperties)==null?void 0:s.viewpoint))&&!n&&(t!=null&&t.effectiveLODs||(o=-1),(!i||e===0&&o===-1)&&(!r||!T(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Sc()||(this._pePromise||(this._pePromise=Tc().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!$l(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new le({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void ps.error(new N("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;DE(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(q(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},dp),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void ps.error(new N("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void ps.error(new N("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;Rpe(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;zpe(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;CP(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new N("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):O(e.targetGeometry)&&(i=new N("mapview:invalid-viewpoint","geometry not defined"))}catch(n){i=new N("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(i)return void ps.error(i);this._scaleBeforeChangingSpatialReference=null;const r=new Vo({targetGeometry:new le,scale:0,rotation:0});fo(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;CP(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),hy(()=>this.ready,t).then(()=>{const i={animate:!0,...t},r=Ipe(e,this);return this.animation.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});ps.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=SP(e)?_P(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,n=!1,o=null,s=null;t!=null&&t.include?QP(t.include,XP(this,h=>r.add(h),h=>{o||(o=new Set),o.add(h)},h=>r.add(h),()=>n=!0)):(n=!0,r=new Set(this.allLayerViews)),t!=null&&t.exclude&&QP(t.exclude,XP(this,h=>r.delete(h),h=>{s||(s=new Set),s.add(h)}));const a=this.allLayerViews.filter(h=>!h.suspended&&r.has(h)).reverse(),u=this.toMap(i);let d=[...n?this.graphicsView.hitTest(u).map(h=>({type:"graphic",graphic:h,layer:null,mapPoint:u})):[],...await Promise.all(a.map(h=>h.hitTest(u,i)).toArray())].filter(T).flat().filter(T);return o&&(d=d.filter(h=>!("graphic"in h)||!h.graphic||o.has(HE(h.graphic)))),s&&(d=d.filter(h=>!("graphic"in h)||!h.graphic||s.has(HE(h.graphic)))),{screenPoint:i,results:d}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return Rfe(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return Pfe(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,Ofe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(o=>{const s=this.allLayerViews.find(a=>a.layer.id===o.id);s&&"container"in s&&s.container&&i.push(s.container)})):i=this._stage.children;const{format:r,quality:n}=Lfe(e.format,e.quality);return Nfe(e,t,this.size,this.padding,r,n,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=SP(e)?_P(this,e):e,i=[0,0],[r,n]=this.state.toMap(i,[t.x,t.y]),o=this.spatialReference;return new le({x:r,y:n,spatialReference:o})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),dr(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return MP.hasLayerViewModule(e)}importLayerView(e){return MP.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(ps.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=Qfe(this.type);return k("safari")&&k("safari")<9&&(e=new N("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:k("safari")})),T(e)?(ps.warn("#validate()",e.message),Promise.reject(e)):mye()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new PE),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,n=i.then(()=>{r()&&(this.animation=null)}).catch(s=>{throw r()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),s}),o=new Promise(s=>s(n));return t.when().catch(()=>{r()&&o.cancel&&o.cancel()}),o}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,n=e.then(o=>{if(_t(t),i!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=o,r.finish()});return this._cancellableGoTo(i,r,n)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<JP&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var w,_,A,I;const{constraints:e,initialExtent:t,map:i,padding:r,size:n}=this;if(!e)return null;const o=i&&"initialViewProperties"in i&&i.initialViewProperties,s={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?s.zoom!==-1&&(s.scale=e.zoomToScale(s.zoom)):s.zoom=-1;let a=null,u=null,d=0;const h=s.viewpoint&&s.viewpoint.rotation,f=s.viewpoint&&s.viewpoint.targetGeometry;T(f)&&(f.type==="extent"?a=f:f.type==="point"&&(u=f,d=s.viewpoint.scale));const y=s.extent||a||((_=(w=o==null?void 0:o.viewpoint)==null?void 0:w.targetGeometry)==null?void 0:_.extent)||t,m=s.center||u||(y==null?void 0:y.center),g=s.scale||d||((A=o==null?void 0:o.viewpoint)==null?void 0:A.scale)||y&&ry(y,[n[0]-r.left-r.right,n[1]-r.top-r.bottom]),v=s.rotation||h||((I=o==null?void 0:o.viewpoint)==null?void 0:I.rotation)||0;return m&&g?new Vo({targetGeometry:m,scale:g,rotation:v}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation,n=e.then(o=>{if(_t(t),i!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");return r.update(o),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,n)}_project(e,t){var n;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||((n=i.spatialReference)==null?void 0:n.imageCoordinateSystem)||Qi(t,i.spatialReference))return e;const r=Gp(i,t);if(!r)throw new N("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return gye(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],jpe(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var a,u;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(d){ps.warn(new Zi("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:d})),e.targetGeometry=((a=this.defaultsFromMap.extent)==null?void 0:a.center)||new le({x:0,y:0,spatialReference:this.spatialReference})}(u=this.constraints)==null||u.fit(e),this._set("state",new Lhe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new $B(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new FB,this._magnifierView.magnifier=this.magnifier;const r=new OB({view:this});this._set("labelManager",r);const n=new Wpe({view:this});this._set("animationManager",n);const o=new kB({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",d=>this.fatalError=d.error),q(()=>this.stationary,d=>i.stationary=d,tl),q(()=>this.background,d=>{i.background=d,this._magnifierView.background=d},tl),q(()=>this.magnifier,d=>this._magnifierView.magnifier=d,tl),q(()=>this.renderingOptions,d=>i.renderingOptions=d,tl),q(()=>this.highlightOptions,d=>i.highlightOptions=d,tl),q(()=>this.state.id,()=>i.state=this.state,tl)],"map-view"),this._updateStageChildren();const s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach(d=>d(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:n}=this.state.paddedViewState,o=new le({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",r),this._set("scale",n),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Uhe(Us.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new DB({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new LB(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const a of this.allLayerViews)a.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(O(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}const i=t.clone(),[r,n]=t.center;let o=null;try{o=this._project(new le({x:r,y:n,spatialReference:t.spatialReference}),e)}catch(a){Sc()||ps.warn(new Zi("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o.toJSON(),spatialReference:e,error:a}))}o||(o=new le({x:0,y:0,spatialReference:e}));const s=DE(new Vo({targetGeometry:new le,scale:0,rotation:0}),t.viewpoint,o);i.viewpoint=s;try{const u=[t.size[0]/2,t.size[1]/2],d=[u[0]+20,u[1]],h=t.toMap([0,0],d),{x:f,y}=this._project(new le({x:h[0],y:h[1],spatialReference:t.spatialReference}),e);h[0]=f,h[1]=y,i.toScreen(h,h);const m=Upe(u,h,d),g=Math.hypot(h[0]-u[0],h[1]-u[1])/20;!Number.isFinite(g)||Math.abs(g)>4?(s.rotation=0,s.targetGeometry=new le({x:0,y:0,spatialReference:e})):(s.scale*=g,s.scale>k("mapview-srswitch-adjust-rotation-scale-threshold")?s.rotation=0:s.rotation+=Number.isFinite(m)?m:0)}catch{}this._get("constraints").constrain(s,null),this._get("state").viewpoint=s,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const a of this.allLayerViews)a.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};we.type="2d",l([c({readOnly:!0})],we.prototype,"animationManager",void 0),l([c({constructOnly:!0})],we.prototype,"deactivatedWebGLExtensions",void 0),l([c({constructOnly:!0})],we.prototype,"debugWebGLExtensions",void 0),l([c({readOnly:!0})],we.prototype,"featuresTilingScheme",void 0),l([c({readOnly:!0})],we.prototype,"fullOpacity",void 0),l([c({readOnly:!0})],we.prototype,"graphicsTileStore",null),l([c()],we.prototype,"graphicsView",void 0),l([c({readOnly:!0})],we.prototype,"state",void 0),l([c()],we.prototype,"initialExtentRequired",null),l([c()],we.prototype,"labelManager",void 0),l([c({readOnly:!0})],we.prototype,"resourceManager",null),l([c({readOnly:!0})],we.prototype,"textureManager",null),l([c({readOnly:!0})],we.prototype,"mapViewNavigation",void 0),l([c({constructOnly:!0})],we.prototype,"renderCanvas",void 0),l([c()],we.prototype,"renderingOptions",void 0),l([c({readOnly:!0})],we.prototype,"rendering",void 0),l([c({constructOnly:!0})],we.prototype,"supersampleScreenshotsEnabled",void 0),l([c({readOnly:!0})],we.prototype,"supportsGround",void 0),l([c()],we.prototype,"_stationaryTimer",void 0),l([c()],we.prototype,"_defaultsFromMapSettings",null),l([c()],we.prototype,"_pePromise",void 0),l([c({readOnly:!0})],we.prototype,"typeSpecificPreconditionsReady",null),l([c()],we.prototype,"animation",null),l([c({type:yye})],we.prototype,"background",null),l([c({value:null,type:le,dependsOn:["state.id","ready"]})],we.prototype,"center",null),l([c({type:nB})],we.prototype,"constraints",null),l([c({value:null,type:Oe,dependsOn:["state.id","ready"]})],we.prototype,"extent",null),l([c()],we.prototype,"floors",void 0),l([c({type:gB})],we.prototype,"highlightOptions",void 0),l([c({readOnly:!0})],we.prototype,"inputManager",void 0),l([c()],we.prototype,"map",void 0),l([c({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],we.prototype,"padding",null),l([c()],we.prototype,"resizeAlign",void 0),l([c({readOnly:!0,dependsOn:["state.id"]})],we.prototype,"resolution",null),l([c({value:0,type:Number,dependsOn:["state.id","ready"]})],we.prototype,"rotation",null),l([c({value:0,type:Number,dependsOn:["state.id","ready"]})],we.prototype,"scale",null),l([c({constructOnly:!0})],we.prototype,"spatialReferenceLocked",void 0),l([c()],we.prototype,"stationary",null),l([c({type:vB,readOnly:!0})],we.prototype,"timeline",void 0),l([c({readOnly:!0})],we.prototype,"type",void 0),l([c({readOnly:!0})],we.prototype,"updating",null),l([c({value:null,type:Vo,dependsOn:["state.id","ready"]})],we.prototype,"viewpoint",null),l([c({value:-1,dependsOn:["state.id","ready"]})],we.prototype,"zoom",null),l([c({type:Boolean})],we.prototype,"navigating",null),l([c({type:PB})],we.prototype,"ui",void 0),we=l([S("esri.views.MapView")],we);const vye=we;function HE(e){var i,r,n,o;const t=e.getObjectId();return t?`${(o=(n=(i=e.layer)==null?void 0:i.uid)!=null?n:(r=e.sourceLayer)==null?void 0:r.uid)!=null?o:"MapView"}/${t}`:`"MapView/${e.uid}`}function XP(e,t,i,r,n){return o=>{if(o instanceof Pi){if(o.layer===e)n==null||n();else{const s=e.allLayerViews.find(a=>a.layer===o.layer);s&&(r==null||r(s))}i(HE(o))}else{const s=e.allLayerViews.find(a=>a.layer===o);s&&t(s)}}}function QP(e,t){if(e)if(A_(e))for(const i of e)if(A_(i))for(const r of i)t(r);else t(i);else t(e)}let Nt=class extends Vv(V){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};l([c()],Nt.prototype,"autoNavigate",void 0),l([c()],Nt.prototype,"filter",void 0),l([c()],Nt.prototype,"getResults",void 0),l([c()],Nt.prototype,"getSuggestions",void 0),l([c()],Nt.prototype,"maxResults",void 0),l([c()],Nt.prototype,"maxSuggestions",void 0),l([c()],Nt.prototype,"minSuggestCharacters",void 0),l([c()],Nt.prototype,"outFields",void 0),l([c()],Nt.prototype,"placeholder",void 0),l([c()],Nt.prototype,"popupEnabled",void 0),l([c()],Nt.prototype,"popupTemplate",void 0),l([c()],Nt.prototype,"prefix",void 0),l([c()],Nt.prototype,"resultGraphicEnabled",void 0),l([c()],Nt.prototype,"resultSymbol",void 0),l([c()],Nt.prototype,"suggestionsEnabled",void 0),l([c()],Nt.prototype,"suffix",void 0),l([c()],Nt.prototype,"withinViewEnabled",void 0),l([c()],Nt.prototype,"zoomScale",void 0),Nt=l([S("esri.widgets.Search.SearchSource")],Nt);const W3=Nt,BB=96;function nwe(e,t){const i=t||e.extent,r=e.width,n=Bl(i&&i.spatialReference);return i&&r?i.width/r*n*iO*BB:0}function wye(e,t){return e/(Bl(t)*iO*BB)}function bye(e,t){const i=e.extent,r=e.width,n=wye(t,i.spatialReference);return i.clone().expand(n*r/i.width)}const e$=W.getLogger("esri.widgets.Search.support.geometryUtils");function _ye(e,t){var r,n;if(!t)return e$.error("missing-parameter: view is missing."),Promise.reject(new N("searchgeometryutils:missing-parameter","view is missing."));if(!e)return e$.error("missing-parameter: point is missing."),Promise.reject(new N("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||t.type==="2d")return Promise.resolve(e);const i=(r=t==null?void 0:t.map)==null?void 0:r.ground;return i&&i.layers.length?i.queryElevation(e,{cache:(n=t.basemapTerrain)==null?void 0:n.elevationQueryCache}).then(o=>o.geometry):Promise.resolve(e)}function t$(e){if(O(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function q3(e,t,i){return O(e)?null:e.type==="extent"?e:e.type==="multipoint"||e.type==="polygon"||e.type==="polyline"?e.extent:e.type==="point"?UB(e,t,i):void 0}function GE(e,t,i){return O(e)||O(t)?null:UB(e.center,t,i)}function UB(e,t,i){const r=e.hasZ?e.z:void 0;return t&&t.map?(i?bye(t,i):t.extent).clone().centerAt(e).set({zmax:r,zmin:r}):new Oe({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:r,zmax:r})}const Sye=/https?:\/\/services.*\.arcgis\.com/i,Tye=/(?:\{([^}]+)\})/g,np=W.getLogger("esri.widgets.Search.support.layerSearchUtils");function Eye(e,t){const{exactMatch:i=!1,location:r,maxResults:n,spatialReference:o,source:s,sourceIndex:a,suggestResult:u,view:d}=e,{layer:h,filter:f,zoomScale:y}=s,m=d&&d.scale,g=VB(s,d),v=t&&t.signal;return zB(h).then(()=>{const w=h.popupTemplate;return w?w.getRequiredFields(h.fieldsIndex):null}).then(w=>{var re,ue,ge;const{objectIdField:_,returnZ:A}=h,I=GB(s);if(!Y3(h,I))throw np.error("invalid-field: displayField is invalid."),new N("getResults():invalid-field","displayField is invalid.");const D=w&&w.length?w:[I],M=s.outFields||D,R=jB(M);if(M.includes(_)||R||M.push(_),(re=h.floorInfo)!=null&&re.floorField&&M.push(h.floorInfo.floorField),!(R||hv(h,M)))throw np.error("invalid-field: outField is invalid."),new N("getResults():invalid-field","outField is invalid.");const B=h.createQuery(),{orderByFields:j}=s;if(j&&(B.orderByFields=j),o){B.outSpatialReference=o;const ne=1/Bl(o);ne&&(B.maxAllowableOffset=ne)}const Y=h.geometryType==="mesh"||h.geometryType==="multipatch",ee=((ge=(ue=h.capabilities)==null?void 0:ue.data)==null?void 0:ge.supportsZ)&&!Y;if(B.returnZ=ee&&A!==!1,B.returnGeometry=!0,B.multipatchOption=Y?"xyFootprint":null,M&&(B.outFields=M),r)B.geometry=r;else if(u.key)B.objectIds=[u.key];else{const ne=s.searchFields||[I];if(!hv(h,ne))throw np.error("invalid-field: search field is invalid."),new N("getResults():invalid-field","search field is invalid.");if(HB(h)&&(B.num=n),g&&(B.geometry=g),!u.text.trim())return[];const{prefix:Tt="",suffix:br=""}=s,lt=qB({searchTerm:WB(`${Tt}${u.text}${br}`),layer:h,searchFields:ne,filter:f,exactMatch:i,type:"search"});if(!lt)return[];B.where=lt}return h.queryFeatures(B,{signal:v}).then(ne=>Oye(ne,d,s,a,I,m,y))})}function Aye(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:o,maxSuggestions:s,sourceIndex:a,exactMatch:u}=e,{layer:d,filter:h}=i,f=t&&t.signal,y=VB(i,n);return zB(d).then(()=>{if(!HB(d))return[];const m=GB(i),g=i.searchFields||[m],v=[];i.suggestionTemplate?i.suggestionTemplate.replace(Tye,(Y,ee)=>(v.push(ee),Y)):v.push(m);const w=jB(v);v.includes(d.objectIdField)||w||v.push(d.objectIdField);const _=Y3(d,m),A=w||hv(d,v),I=hv(d,g);if(!_)throw np.error("invalid-field: displayField is invalid."),new N("getSuggestions():invalid-field","displayField is invalid.");if(!A)throw np.error("invalid-field: outField is invalid."),new N("getSuggestions():invalid-field","outField is invalid.");if(!I)throw np.error("invalid-field: search field is invalid."),new N("getSuggestions():invalid-field","search field is invalid.");const D=d.createQuery(),{orderByFields:M}=i;if(M&&(D.orderByFields=M),D.outSpatialReference=r,D.returnGeometry=!1,D.num=s,D.outFields=v,y&&(D.geometry=y),!o.trim())return[];const{prefix:R="",suffix:B=""}=i,j=qB({searchTerm:WB(`${R}${o}${B}`),layer:d,searchFields:g,filter:h,exactMatch:u,type:"suggest"});return j?(D.where=j,d.queryFeatures(D,{signal:f}).then(Y=>Dye(Y,i,a,m))):[]})}function VB(e,t){const{filter:i,withinViewEnabled:r}=e,n=t&&t.extent;return i&&i.geometry||(r&&n?n:void 0)}function jB(e){return e&&e.includes("*")}async function zB(e){e&&await e.load()}function HB(e){var t,i,r;return(r=(i=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:i.supportsPagination)!=null?r:!1}function xye(e){var t,i,r,n;return(n=(r=(i=(t=e==null?void 0:e.fieldsIndex)==null?void 0:t.fields)==null?void 0:i.find(o=>o.type==="string"))==null?void 0:r.name)!=null?n:""}function GB(e){return e.displayField||e.layer.displayField||xye(e.layer)}function hv(e,t){return!(!e||!t)&&t.every(i=>Y3(e,i))}function Y3(e,t){return!!e.getField(t)}function Cye(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function Iye(e,t,i){let r=null;const{codedValues:n}=e;return n&&n.some(o=>{const s=o.name,a=i?s:s.toLowerCase();return(i?t:t.toLowerCase())===a&&(r=o.code.toString(),!0)}),r}function WB(e){return e.replace(/\'/g,"''")}function I0(e,t){const i=t&&t.where;return i?`(${e}) AND (${i})`:e}function Mye({currentTerm:e,field:t,filter:i,exactMatch:r,url:n,type:o}){const s=t.type,a=t.name;if(s==="string"||s==="date"||s==="global-id"){const u=Sye.test(n),d=u&&Cye(e)?"N":"";if(r&&o==="search")return I0(`${a} = ${d}'${e}'`,i);const h=u?a:`UPPER(${a})`,f=u?e:e.toUpperCase();return I0(`${h} LIKE ${d}${r?`'${f}%'`:`'%${f}%'`}`,i)}if(s==="oid"||s==="small-integer"||s==="integer"||s==="single"||s==="double"){const u=Number(e);return isNaN(u)?null:I0(`${a} = ${u}`,i)}return I0(`${a} = ${e}`,i)}function Nye(e,t){return e?` OR (${t})`:`(${t})`}function qB({searchTerm:e,layer:t,searchFields:i,filter:r,exactMatch:n,type:o}){const{definitionExpression:s,url:a}=t;let u="";return e&&i&&i.forEach(d=>{const h=t.getField(d),f=typeof t.getFieldDomain=="function"&&t.getFieldDomain(d),y=(f&&f.type==="coded-value"?Iye(f,e,n):null)||e||null;if(y!==null){const m=Mye({currentTerm:y,field:h,filter:r,exactMatch:n,url:a,type:o});m&&(u+=Nye(u,m))}}),s?`(${s}) AND (${u})`:u}function Rye(e,t){let i=null;const{codedValues:r}=e;return r&&r.length&&r.some(n=>n.code===t&&(i=n.name,!0)),i}function Pye(e,t){return e[Object.keys(e).find(i=>i.toLowerCase()===t.toLowerCase())]}function YB(e,t,i){const r=e.sourceLayer,{attributes:n}=e,o=typeof r.getFieldDomain=="function"&&r.getFieldDomain(i);if(t)return Wn(t,n);if(i&&n){const s=r.getField(i),a=Pye(n,i);return a==null?"":o&&o.type==="coded-value"?Rye(o,a):(s==null?void 0:s.type)==="date"?Jo(new Date(a)):typeof a=="number"?a.toString():typeof a!="string"?"":a.trim()}return""}function $ye(e,t,i,r){const n=e.sourceLayer,{attributes:o}=e,{objectIdField:s}=n,a=o[s];return{text:YB(e,t.suggestionTemplate,r),key:a,sourceIndex:i}}function Dye(e,t,i,r){return e.features.map(n=>$ye(n,t,i,r))}function Lye(e,t,i,r,n,o,s){const a=e.clone(),u=e.sourceLayer,d=u&&u.objectIdField,h=d&&e.attributes[d],f=YB(e,i.searchTemplate,n),y=q3(a.geometry,t,o),m=typeof s=="number"?GE(P(y),t,s):y,g=e.clone();return T(m)&&(g.geometry=mr.fromExtent(m)),{extent:m,target:g,feature:a,key:h,name:f,sourceIndex:r}}function Oye(e,t,i,r,n,o,s){return e.features.map(a=>Lye(a,t,i,r,n,o,s))}var WE;let Gn=WE=class extends W3{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,i)=>Eye({source:this,...t},i),this.getSuggestions=(t,i)=>Aye({source:this,...t},i)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()||""}set name(e){e!==void 0?this._override("name",e):this._clearOverride("name")}clone(){return new WE({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?P(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?P(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return(t=(e=this.layer.fieldsIndex.fields.find(i=>i.type==="string"))==null?void 0:e.name)!=null?t:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(i=>{const r=e.getField(i);return r&&r.alias||i}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};l([c({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Gn.prototype,"displayField",void 0),l([c({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Gn.prototype,"exactMatch",void 0),l([c({value:null})],Gn.prototype,"layer",null),l([c()],Gn.prototype,"name",null),l([c({type:[String],json:{write:!0}})],Gn.prototype,"orderByFields",void 0),l([c()],Gn.prototype,"searchFields",void 0),l([c()],Gn.prototype,"searchTemplate",void 0),l([c()],Gn.prototype,"suggestionTemplate",void 0),Gn=WE=l([S("esri.widgets.Search.LayerSearchSource")],Gn);const Rd=Gn;function kye(e){return e&&typeof e.x=="number"&&typeof e.y=="number"}function Fye(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let Xa=class extends V{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};l([c({type:String,json:{write:!0}})],Xa.prototype,"address",void 0),l([c({type:Object,json:{write:!0}})],Xa.prototype,"attributes",void 0),l([c({type:Oe,json:{write:!0}})],Xa.prototype,"extent",void 0),l([c({type:le,json:{write:!0}})],Xa.prototype,"location",void 0),l([c({type:Number,json:{write:!0}})],Xa.prototype,"score",void 0),Xa=l([S("esri.rest.support.AddressCandidate")],Xa);const KB=Xa,K3={type:String,json:{read:{source:"token"},write:{target:"token"}}};let li=class extends V{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};l([c({type:Object,json:{write:!0}})],li.prototype,"address",void 0),l([c(K3)],li.prototype,"apiKey",void 0),l([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],li.prototype,"categories",void 0),l([c({type:String,json:{write:!0}})],li.prototype,"countryCode",void 0),l([c({type:Boolean,json:{write:!0}})],li.prototype,"forStorage",void 0),l([c({type:le,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],li.prototype,"location",void 0),l([c({type:String,json:{write:!0}})],li.prototype,"locationType",void 0),l([c({type:String,json:{write:!0}})],li.prototype,"magicKey",void 0),l([c({type:Number,json:{write:!0}})],li.prototype,"maxLocations",void 0),l([c({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],li.prototype,"outFields",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],li.prototype,"outSpatialReference",void 0),l([c({type:Oe,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=i}}}})],li.prototype,"searchExtent",void 0),li=l([S("esri.rest.support.AddressToLocationsParameters")],li),li.from=Ze(li);const ZB=li;async function Bye(e,t,i){t=ZB.from(t);const r=sm(e),{address:n,...o}=t.toJSON(),s={...n,...o,f:"json"},a=cw({...r.query,...s}),u=uw(a,i),d=`${r.path}/findAddressCandidates`;return Be(d,u).then(Uye)}function Uye({data:e}){if(!e)return[];const{candidates:t,spatialReference:i}=e;return t?t.map(r=>{if(!r)return;const{extent:n,location:o}=r,s=!n||Fye(n);return kye(o)&&s?(n&&(n.spatialReference=i),o.spatialReference=i,KB.fromJSON(r)):void 0}):[]}let Ds=class extends V{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};l([c(K3)],Ds.prototype,"apiKey",void 0),l([c({type:le,json:{write:{writer:(e,t)=>{const i=e?e.clone().normalize():null,r=i!==void 0;t.location=r?i:null}}}})],Ds.prototype,"location",void 0),l([c({type:String,json:{write:!0}})],Ds.prototype,"locationType",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ds.prototype,"outSpatialReference",void 0),Ds=l([S("esri.rest.support.LocationToAddressParameters")],Ds),Ds.from=Ze(Ds);const JB=Ds;async function Vye(e,t,i){t=JB.from(t);const r=sm(e),n={...t.toJSON(),f:"json"},o=cw({...r.query,...n}),s=uw(o,i),a=`${r.path}/reverseGeocode`;return Be(a,s).then(jye)}function jye({data:e}){if(!e)return;const{address:t,location:i}=e,r=t&&t.Match_addr||"";return KB.fromJSON({address:r,attributes:t||{},location:i,score:100})}let Pd=class extends V{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};l([c({type:Boolean,json:{write:!0}})],Pd.prototype,"isCollection",void 0),l([c({type:String,json:{write:!0}})],Pd.prototype,"magicKey",void 0),l([c({type:String,json:{write:!0}})],Pd.prototype,"text",void 0),Pd=l([S("esri.rest.support.SuggestionCandidate")],Pd);const zye=Pd;let Mr=class extends V{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};l([c(K3)],Mr.prototype,"apiKey",void 0),l([c({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],Mr.prototype,"categories",void 0),l([c({type:String,json:{write:!0}})],Mr.prototype,"countryCode",void 0),l([c({type:le,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],Mr.prototype,"location",void 0),l([c({type:Number,json:{write:!0}})],Mr.prototype,"maxSuggestions",void 0),l([c({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Mr.prototype,"outSpatialReference",void 0),l([c({type:Oe,json:{write:{writer:(e,t)=>{const i=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(i)}}}})],Mr.prototype,"searchExtent",void 0),l([c({type:String,json:{write:!0}})],Mr.prototype,"text",void 0),Mr=l([S("esri.rest.support.SuggestLocationsParameters")],Mr),Mr.from=Ze(Mr);const XB=Mr;async function Hye(e,t,i){const r=sm(e),n={...(t=XB.from(t)).toJSON(),f:"json"},o=cw({...r.query,...n}),s=uw(o,i),a=`${r.path}/suggest`;return Be(a,s).then(Gye)}function Gye(e){const{data:t}=e;if(!t)return[];const{suggestions:i}=t;return i?i.map(r=>new zye(r)):[]}const Wye="Single Line Input",qye=3e5;function Yye(e,t){return e.location?Qye(e,t):eme(e,t)}function QB(e,t){if(t.localSearchDisabled)return null;const i=e==null?void 0:e.scale;return typeof i=="number"&&i<=qye?e.get("extent.center"):null}function Kye(e,t){const{source:i,spatialReference:r,view:n,suggestTerm:o,maxSuggestions:s,sourceIndex:a}=e,u=new XB,{apiKey:d,url:h}=i,f=eU(i,n),y=t&&t.signal;if(!h)return Promise.resolve(null);d&&(u.apiKey=d),i.categories&&(u.categories=i.categories),r&&(u.outSpatialReference=r);const m=QB(n,i);if(m&&(u.location=m),!o.trim())return Promise.resolve(null);const{prefix:g="",suffix:v=""}=i,w=`${g}${o}${v}`;return u.text=w,f&&(u.searchExtent=f),u.maxSuggestions=s,i.countryCode&&(u.countryCode=i.countryCode),Hye(h,u,{signal:y}).then(_=>ime(_,a))}function Zye(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function Jye(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function i$(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const Xye="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function Qye(e,t){const{source:i,spatialReference:r,location:n,sourceIndex:o,view:s}=e,{apiKey:a,url:u,zoomScale:d,defaultZoomScale:h}=i,f=s&&s.scale,y=t&&t.signal,m=new JB;return m.location=n,a&&(m.apiKey=a),r&&(m.outSpatialReference=r),Vye(u,m,{signal:y}).then(g=>tU([g],{sourceIndex:o,scale:f,view:s,zoomScale:d,defaultZoomScale:h})).catch(()=>[])}function eU(e,t){const{filter:i,withinViewEnabled:r}=e,n=t&&t.scale,o=t&&t.extent,s=i&&i.geometry;return q3(s,t,n)||(r&&o?o:void 0)}function eme(e,t){const{source:i,suggestResult:r,spatialReference:n,view:o,maxResults:s,sourceIndex:a}=e,u=i&&i.zoomScale,d=i&&i.defaultZoomScale;if(!r.text.trim())return Promise.resolve(null);const h=!r.key&&i.prefix?i.prefix:"",f=!r.key&&i.suffix?i.suffix:"",y=`${h}${r.text}${f}`,m=new ZB,{apiKey:g,url:v}=i,w=o&&o.scale,_=eU(i,o),A=t&&t.signal;if(g&&(m.apiKey=g),!v)return Promise.resolve(null);i.categories&&(m.categories=i.categories),i.locationType&&(m.locationType=i.locationType),n&&(m.outSpatialReference=n);const I=QB(o,i);I&&(m.location=I),m.maxLocations=s,_&&(m.searchExtent=_),i.countryCode&&(m.countryCode=i.countryCode);const{key:D}=r,M=`${D}`;return D&&(m.magicKey=M),m.address={},m.address[i.singleLineFieldName||Wye]=y,i.outFields&&(m.outFields=i.outFields),Bye(v,m,{signal:A}).then(R=>tU(R,{key:M,scale:w,sourceIndex:a,view:o,zoomScale:u,defaultZoomScale:d}))}function tme(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function ime(e,t){return e.map(i=>tme(i,t))}function rme(e,t){const{key:i,scale:r,sourceIndex:n,view:o,zoomScale:s,defaultZoomScale:a}=t,{attributes:u,extent:d,location:h,address:f}=e,y=new Pi({geometry:h,attributes:u}),m=d||h,g=q3(m,o,r),v=typeof s=="number"?GE(g,o,s):typeof a=="number"&&m.type==="point"?GE(g,o,a):g,w=h?`${h.x},${h.y}`:"",_=f||w,A=y.clone();return T(v)&&(A.geometry=mr.fromExtent(v)),{extent:v,feature:y,target:A,key:i,name:_,sourceIndex:n}}function tU(e,t){return e.filter(Boolean).map(i=>rme(i,t))}var qE;const nme="esri.widgets.Search.LocatorSearchSource";let Ei=qE=class extends W3{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,i)=>Yye({source:this,...t},i),this.getSuggestions=(t,i)=>Kye({source:this,...t},i)}clone(){return new qE({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?P(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?P(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};l([c()],Ei.prototype,"apiKey",void 0),l([c()],Ei.prototype,"categories",void 0),l([c()],Ei.prototype,"countryCode",void 0),l([c({json:{write:!0}})],Ei.prototype,"defaultZoomScale",void 0),l([c()],Ei.prototype,"localSearchDisabled",void 0),l([c()],Ei.prototype,"locationType",void 0),l([c({json:{write:!0}})],Ei.prototype,"name",void 0),l([c({json:{write:!0}})],Ei.prototype,"placeholder",void 0),l([c()],Ei.prototype,"searchTemplate",void 0),l([c({json:{write:!0}})],Ei.prototype,"singleLineFieldName",void 0),l([c({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Ei.prototype,"suggestionsEnabled",void 0),l([c({json:{write:!0}})],Ei.prototype,"url",void 0),l([c({json:{write:!0}})],Ei.prototype,"zoomScale",void 0),Ei=qE=l([S(nme)],Ei);const iU=Ei;new Se({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new Se({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let Kl=class extends V{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};l([c({type:String,json:{write:!0}})],Kl.prototype,"deviationUnit",void 0),l([c({json:{read:{reader:e=>e?e.map(t=>Ji(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],Kl.prototype,"geometries",void 0),l([c({type:Number,json:{write:!0}})],Kl.prototype,"maxDeviation",void 0),Kl=l([S("esri.rest.support.GeneralizeParameters")],Kl),Kl.from=Ze(Kl);new Se({preserveShape:"preserve-shape"});let Ta=class extends V{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};l([c({type:String,json:{write:!0}})],Ta.prototype,"calculationType",void 0),l([c({type:Boolean,json:{write:!0}})],Ta.prototype,"geodesic",void 0),l([c({json:{write:!0}})],Ta.prototype,"lengthUnit",void 0),l([c({type:[Hi],json:{read:{reader:e=>e?e.map(t=>Ji(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],Ta.prototype,"polylines",void 0),Ta=l([S("esri.rest.support.LengthsParameters")],Ta),Ta.from=Ze(Ta);new Se({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new Se({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let hs=class extends V{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};l([c({type:Number,json:{write:!0}})],hs.prototype,"bevelRatio",void 0),l([c({json:{read:{reader:e=>e?e.map(t=>Ji(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(i=>i.toJSON())}}}})],hs.prototype,"geometries",void 0),l([c({type:Number,json:{write:!0}})],hs.prototype,"offsetDistance",void 0),l([c({type:String,json:{write:!0}})],hs.prototype,"offsetHow",void 0),l([c({type:String,json:{write:!0}})],hs.prototype,"offsetUnit",void 0),hs=l([S("esri.rest.support.OffsetParameters")],hs),hs.from=Ze(hs);function ome(e,t,i){const r=qL(t);return e.map(n=>{const o=r.fromJSON(n);return o.spatialReference=i,o})}let Iu=class extends V{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(r=>r.toJSON()),t=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:Up(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};l([c()],Iu.prototype,"geometries",void 0),l([c({json:{read:{source:"outSR"}}})],Iu.prototype,"outSpatialReference",void 0),l([c()],Iu.prototype,"transformation",void 0),l([c()],Iu.prototype,"transformForward",void 0),Iu=l([S("esri.rest.support.ProjectParameters")],Iu);const rU=Iu,sme=Ze(rU);async function ame(e,t,i){t=sme(t);const r=sm(e),n={...r.query,f:"json",...t.toJSON()},o=t.outSpatialReference,s=Up(t.geometries[0]),a=uw(n,i);return Be(r.path+"/project",a).then(({data:{geometries:u}})=>ome(u,s,o))}new Se({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Ea=class extends V{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};l([c({json:{read:{reader:e=>e?e.map(t=>Ji(t)):null},write:{writer:(e,t)=>{t.geometries1=e.map(i=>i.toJSON())}}}})],Ea.prototype,"geometries1",void 0),l([c({json:{read:{reader:e=>e?e.map(t=>Ji(t)):null},write:{writer:(e,t)=>{t.geometries2=e.map(i=>i.toJSON())}}}})],Ea.prototype,"geometries2",void 0),l([c({type:String,json:{write:!0}})],Ea.prototype,"relation",void 0),l([c({type:String,json:{write:!0}})],Ea.prototype,"relationParameter",void 0),Ea=l([S("esri.rest.support.RelationParameters")],Ea),Ea.from=Ze(Ea);new Se({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let Zl=class extends V{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};l([c({type:String,json:{write:!0}})],Zl.prototype,"extendHow",void 0),l([c({type:[Hi],json:{read:{reader:e=>e?e.map(t=>Ji(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],Zl.prototype,"polylines",void 0),l([c({json:{read:{reader:e=>e?Ji(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],Zl.prototype,"trimExtendTo",void 0),Zl=l([S("esri.rest.support.TrimExtendParameters")],Zl),Zl.from=Ze(Zl);const nU=W.getLogger("esri.widgets.support.geolocationUtils"),lme={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function ume(){const e=k("esri-geolocation");return e||nU.warn("geolocation-unsupported","Geolocation unsupported."),e}function cme(){const e=window.isSecureContext;return e||nU.warn("insecure-context","Geolocation requires a secure origin."),e}function r$(){return ume()&&cme()}function dme(e){return e||(e=lme),new Promise((i,r)=>{setTimeout(()=>r(new N("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,e)})}function pme(e,t){const{position:i,view:r}=e;return yme(fme(hme(i)),r,t)}function hme(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:i,timestamp:e.timestamp}}function fme(e){const t=e&&e.coords;return t?new le({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function yme(e,t,i){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(qs(e)):mme(i).then(n=>{if(!n)throw new N("geometry-service:missing-url","Geometry service URL is missing");const o=new rU({geometries:[e],outSpatialReference:r});return ame(n,o,i).then(s=>s[0])})}function mme(e){if(Ne.geometryServiceUrl)return Promise.resolve(Ne.geometryServiceUrl);const t=Kt.getDefault();return t.load(e).catch(()=>{}).then(()=>t.get("helperServices.geometry.url"))}function wi(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const gme=()=>DA("esri/widgets/Search/t9n/Search"),oU="esri.widgets.Search.SearchViewModel",Mn=W.getLogger(oU),n$="highlight",Yg=he.ofType({key:e=>e.layer?"layer":"locator",base:W3,typeMap:{layer:Rd,locator:iU}}),o$=me.WGS84,vme="esri/images/search/search-symbol-32.png",wme=/<(?:.|\s)*?>/g,$d=-1;let Ae=class extends D3(ra.EventedMixin(se)){constructor(e){super(e),this._handles=new gi,this._gotoController=null,this._searching=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new Yg,this.defaultSymbols={point:new Qy({url:Ue(vme),size:24,width:24,height:24}),polyline:new Ur({color:[130,130,130,1],width:2}),polygon:new na({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=Kt.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new Yg,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const t=await gme();this.messages=t,this.defaultPopupTemplate=new Ol({title:t.searchResult,content:"{Match_addr}"})};e(),this._handles.add([q(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),ze),eL(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:$d}set activeSourceIndex(e){e!==void 0?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:i}=this,r=typeof i=="function"?i.call(null,{sources:e,defaultSources:t}):i?t.concat(e):e,n=this._get("allSources")||new Yg;return n.removeAll(),n.addMany(r.filter(Boolean)),n}get defaultSymbol(){return N_(Mn,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(e){N_(Mn,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",e)}get locationEnabled(){return this._get("locationEnabled")||r$()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const t=r$();if(e&&!t){const i=new N("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Mn.error(i)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:i}=this;if(t===$d)return i;const r=e.getItemAt(t);return r?r.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const i=this._createSuggestionForSearch(e),r=this.when().then(()=>this._getResultsFromSources(i,t).then(n=>{var u;if((u=t==null?void 0:t.signal)!=null&&u.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:i.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(o,n,i);const s=this._getFirstResult(o.results),a=(i.location&&s?s.name:i.text).replace(wme,"");return this._set("searchTerm",a),(i.key&&typeof i.sourceIndex=="number"||i.location)&&this._set("selectedSuggestion",i),this._set("results",o.results),this._set("resultCount",o.results.reduce((d,h)=>d+h.results.length,0)),this.emit("search-complete",o),this._selectFirstResult(s).then(()=>o)})).then(n=>(this._clearSearching(),n),n=>{throw this._clearSearching(),n});return this._searching=r,r}searchNearby(e){if(!this.locationEnabled){const i=new N("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Mn.error(i),Promise.reject(i)}const t=dme().then(i=>pme({position:i,view:this.view},e)).then(i=>this.search(i,e));return this._searching=t,t.catch(()=>{}).then(()=>this._clearSearching()),t}select(e){if(this.clearGraphics(),!e){const _=new N("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return Mn.error(_),Promise.reject(_)}const{view:t}=this,i=wi(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),r=this.allSources.getItemAt(i);if(!r){const _=new N("select:missing-source","Cannot select without a source.",{source:r});return Mn.error(_),Promise.reject(_)}const n=r instanceof Rd?this._getLayerSourcePopupTemplate(r):r.popupTemplate,o=r.resultSymbol||this._getDefaultSymbol(e),s=wi(r,"resultGraphicEnabled")?r.resultGraphicEnabled:this.resultGraphicEnabled,a=wi(r,"autoNavigate")?r.autoNavigate:this.autoNavigate,u=wi(r,"popupEnabled")?r.popupEnabled:this.popupEnabled,d=u?n||this.popupTemplate||this.defaultPopupTemplate:null,{feature:h}=e;if(!h){const _=new N("select:missing-feature","Cannot select without a feature.",{feature:h});return Mn.error(_),Promise.reject(_)}const{attributes:f,geometry:y,layer:m,sourceLayer:g}=h,v=t$(y),w={layerViewQuery:this._getLayerView(h),elevationQuery:t&&T(v)?_ye(v,t).catch(()=>v):Promise.resolve(v)};return ri(w).then(_=>{const A=_.layerViewQuery.value,I=_.elevationQuery.value;o instanceof $c&&(o.text=e.name);const D=t&&a?e.target||e.extent:null;return(T(D)?this._goToSearchResult(D):Promise.resolve()).then(()=>{var j;const M=A?h:new Pi({geometry:y,symbol:o,attributes:f,layer:m,sourceLayer:g,popupTemplate:d}),R=u&&((j=this.view)==null?void 0:j.popup),B=R&&M.getEffectivePopupTemplate(R.defaultPopupTemplateEnabled);return B&&t.popup.open({features:[M],location:I}),A&&IE(A)&&!B&&this._highlightFeature({graphic:M,layerView:A}),!A&&s&&t&&t.graphics.push(M),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",M),this.emit("select-result",{result:e,source:r,sourceIndex:i}),e})})}suggest(e,t,i){const r=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:r}),this._suggestTimer(t,i).then(()=>this._suggestImmediate(r,i).then(n=>(this._set("suggestions",n.results),this._set("suggestionCount",n.results.reduce((o,s)=>o+s.results.length,0)),this.emit("suggest-complete",n),n)))}async when(){await hy(()=>!this.updating)}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const i=this._updatingPromise=ri([e==null?void 0:e.load(),t==null?void 0:t.when()]);if(this.destroyed||(await i,i!==this._updatingPromise))return}await hy(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var t,i;const e=(i=(t=this.portal)==null?void 0:t.helperServices)==null?void 0:i.geocode;return e?e.map(r=>{if(r.placefinding===!1)return;const n=Ne.apiKey&&i$(r.url)?{url:Xye}:null,o=iU.fromJSON({...r,...n}),s=o.url;if(i$(s)||Jye(s)||Zye(s)){const a=o.outFields||["Addr_type","Match_addr","StAddr","City"],u=o.placeholder||this.messages.placeholder,d=typeof o.defaultZoomScale=="number"?o.defaultZoomScale:2500;o.set({singleLineFieldName:"SingleLine",outFields:a,placeholder:u,defaultZoomScale:d})}return o.singleLineFieldName?o:void 0}).filter(Boolean):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,t){var r;const i=(r=this.view)==null?void 0:r.map;return e.map(n=>{const o=i.findLayerById(n.id);if(!o)return;const s=this._getLayerJSON(n),a=Rd.fromJSON(s);return a.placeholder=t,this._getLayer(o,s).then(u=>{a.layer=u}),a}).filter(Boolean).toArray()}_getTableSources(e,t){var r;const i=(r=this.view)==null?void 0:r.map;return e.map(n=>{const o=i.findTableById(n.id);if(!o)return;const s=this._getLayerJSON(n),a=Rd.fromJSON(s);return a.placeholder=t,this._getLayer(o,s).then(u=>{a.layer=u}),a}).filter(Boolean).toArray()}_convertApplicationProperties(){var s,a,u;const e=(s=this.view)==null?void 0:s.map,t=(u=(a=e==null?void 0:e.applicationProperties)==null?void 0:a.viewing)==null?void 0:u.search;if(!t)return[];const{enabled:i,hintText:r,layers:n,tables:o}=t;return i?[...this._getLayerSources(n,r),...this._getTableSources(o,r)]:[]}async _getSubLayer(e,t){if(await e.load(),!e.allSublayers)throw new Error;const i=e.allSublayers.find(n=>n.id===t.subLayer);if(!i)throw new Error;const r=await i.createFeatureLayer();return this._createdFeatureLayers.push(r),r}async _getBuildingSubLayer(e,t){await e.load();const i=e.allSublayers.find(r=>r.id===t.subLayer);if((i==null?void 0:i.type)!=="building-component")throw new Error;if(await i.load(),i.associatedLayer==null)throw new Error;return await i.associatedLayer.load(),i}_getLayer(e,t){return e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature"?Promise.resolve(e):e.type==="map-image"?this._getSubLayer(e,t).catch(()=>{const i=new N("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Mn.error(i),null}):e.type==="building-scene"?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;this._destroyFeatureLayers(),e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var r;const e=(r=this.view)==null?void 0:r.popup,{resultGraphic:t}=this;if(!e||!t)return;const{selectedFeature:i}=e;i&&i===t&&e.close()}_suggestTimer(e,t){const i=e!=null?e:this.suggestionDelay;return Cv(i,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof Pi?t$(e.geometry):e instanceof le?e:Array.isArray(e)&&e.length===2?new le({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&wi(e,"key")&&wi(e,"text")&&wi(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),i=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:r,selectedResult:n}=this,o=!e&&r&&n,s=o&&r.key===n.key&&r.sourceIndex===n.sourceIndex,a=o&&r.location;return s||a?r:{location:t,text:t?"":i,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some(i=>{const{results:r}=i,n=r[0],o=!!n;return o&&(t=n),o}),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then(()=>this._getSuggestionsFromSources(e,t)).then(i=>{var n;if((n=t==null?void 0:t.signal)!=null&&n.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,i),r})}_formatSourceResponse(e,t,i){const r=t&&t.value||[],n=t&&t.error,o=this.allSources.getItemAt(i);if(n){const s={sourceIndex:i,source:o,error:n};e.errors.push(s),Mn.error(n),e.numErrors++}else{const s={sourceIndex:i,source:o,results:r};e.results.push(s),e.numResults+=r.length}}_formatResponse(e,t,i){if(t)if(e.activeSourceIndex===$d){const r=i&&wi(i,"sourceIndex")&&i.sourceIndex!==-1?i.sourceIndex:void 0;t.forEach((n,o)=>{const s=r!==void 0?r:o;this._formatSourceResponse(e,n,s)})}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:i}=this,r=!e.location&&wi(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,n=[];if(!i.length){const o=new N("search:no-sources-defined","At least one source is required.",{allSources:i});return Mn.error(o),Promise.reject(o)}return r===$d?i.forEach((o,s)=>{n.push(this._getResultsFromSource(e,s,t))}):n.push(this._getResultsFromSource(e,r,t)),ri(n)}_getSuggestionsFromSources(e,t){const{allSources:i,activeSourceIndex:r}=this,n=[];if(!i.length){const o=new N("suggest:no-sources-defined","At least one source is required.",{allSources:i});return Mn.error(o),Promise.reject(o)}return r===$d?i.forEach((o,s)=>{n.push(this._getSuggestionsFromSource(e,s,t))}):n.push(this._getSuggestionsFromSource(e,r,t)),ri(n)}_getResultsFromSource(e,t,i){var d;const r=this.allSources.getItemAt(t),{location:n=null}=e,o=((d=this.view)==null?void 0:d.spatialReference)||o$,s=wi(r,"maxResults")?r.maxResults:this.maxResults,a=!!(r instanceof Rd&&wi(r,"exactMatch"))&&r.exactMatch,{view:u}=this;return r.getResults({view:u,sourceIndex:t,location:n,suggestResult:e,spatialReference:o,exactMatch:a,maxResults:s},i)}_getSuggestionsFromSource(e,t,i){var a;const r=this.allSources.getItemAt(t),n=wi(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,o=e.length,s=wi(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(n&&e.trim()&&o>=s){const u=((a=this.view)==null?void 0:a.spatialReference)||o$,d=wi(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:h}=this,f=!!(r instanceof Rd&&wi(r,"exactMatch"))&&r.exactMatch;return r.getSuggestions({view:h,sourceIndex:t,suggestTerm:e,spatialReference:u,maxSuggestions:d,exactMatch:f},i)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return wi(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let i=null;return t.some(r=>r.results.some(n=>n===e&&(i=r.sourceIndex,!0))),i}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{animate:t,signal:i.signal}};await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var n;const{defaultSymbols:t}=this,i=(n=e.feature)==null?void 0:n.geometry;if(O(i))return null;const r=this._get("defaultSymbol");if(r&&(i.type==="point"||i.type==="multipoint"))return r;switch(i.type){case"point":case"multipoint":return t.point;case"polyline":return t.polyline;case"extent":case"polygon":return t.polygon;default:return null}}_removeHighlight(){this._handles.remove(n$)}async _getLayerView(e){const{view:t}=this;if(!e||!t||e.layer.type==="building-component"||e.layer.type==="subtype-sublayer")return null;const{layer:i}=e;return await t.when(),t.whenLayerView(i)}_highlightFeature(e){const{graphic:t,layerView:i}=e,{attributes:r,layer:n}=t,{objectIdField:o}=n,s=r&&r[o],a=i.highlight(s||t);this._handles.add(a,n$)}_setResultFloor(e){var n,o,s;const{view:t}=this,i=(n=e.feature)==null?void 0:n.attributes,r=(o=e.feature)==null?void 0:o.sourceLayer;if(r&&"floorInfo"in r&&((s=r==null?void 0:r.floorInfo)==null?void 0:s.floorField)&&i){const a=i[r.floorInfo.floorField];t.emit("select-result-floor",a)}}};Ae.ALL_INDEX=$d,l([c()],Ae.prototype,"_searching",void 0),l([c()],Ae.prototype,"_updatingPromise",void 0),l([c({readOnly:!0,value:null})],Ae.prototype,"activeSource",null),l([c()],Ae.prototype,"activeSourceIndex",null),l([c()],Ae.prototype,"allPlaceholder",null),l([c({readOnly:!0})],Ae.prototype,"allSources",null),l([c()],Ae.prototype,"autoNavigate",void 0),l([c()],Ae.prototype,"autoSelect",void 0),l([c()],Ae.prototype,"defaultPopupTemplate",void 0),l([c({readOnly:!0})],Ae.prototype,"defaultSources",void 0),l([c()],Ae.prototype,"defaultSymbol",null),l([c()],Ae.prototype,"defaultSymbols",void 0),l([c()],Ae.prototype,"includeDefaultSources",void 0),l([c()],Ae.prototype,"locationEnabled",null),l([c()],Ae.prototype,"maxInputLength",void 0),l([c()],Ae.prototype,"maxResults",void 0),l([c()],Ae.prototype,"maxSuggestions",void 0),l([c()],Ae.prototype,"messages",void 0),l([c()],Ae.prototype,"minSuggestCharacters",void 0),l([c({readOnly:!0})],Ae.prototype,"placeholder",null),l([c()],Ae.prototype,"popupEnabled",void 0),l([c({type:Ol})],Ae.prototype,"popupTemplate",void 0),l([c({type:Kt})],Ae.prototype,"portal",void 0),l([c()],Ae.prototype,"resultCount",void 0),l([c()],Ae.prototype,"resultGraphicEnabled",void 0),l([c({readOnly:!0})],Ae.prototype,"resultGraphic",void 0),l([c({readOnly:!0})],Ae.prototype,"results",void 0),l([c({readOnly:!0})],Ae.prototype,"selectedSuggestion",void 0),l([c()],Ae.prototype,"searchAllEnabled",void 0),l([c({readOnly:!0})],Ae.prototype,"selectedResult",void 0),l([c()],Ae.prototype,"searchTerm",null),l([c({type:Yg})],Ae.prototype,"sources",void 0),l([c({readOnly:!0})],Ae.prototype,"state",null),l([c()],Ae.prototype,"suggestionDelay",void 0),l([c()],Ae.prototype,"suggestionCount",void 0),l([c({readOnly:!0})],Ae.prototype,"suggestions",void 0),l([c()],Ae.prototype,"suggestionsEnabled",void 0),l([c({readOnly:!0})],Ae.prototype,"updating",null),l([c()],Ae.prototype,"view",void 0),l([c()],Ae.prototype,"clear",null),Ae=l([S(oU)],Ae);const zd=Ae,fs={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};let Qa=class extends vi{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[fs.showMoreResults]:this.showMoreResultsOpen};return C("div",{class:fs.base},C("div",{key:"esri-search-renderer__container",class:this.classes(fs.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return C("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var i;const e=(i=this.viewModel)==null?void 0:i.selectedResult,t=e&&e.name||"";return C("div",{key:"esri-search-renderer__result-name",class:fs.moreResultsItem},t)}renderMoreResultsLists(){var r;const e=(r=this.viewModel)==null?void 0:r.results,{resultCount:t}=this.viewModel;if(t<2)return null;const i=e.map(n=>this.renderMoreResultsList(n));return C("div",{key:"esri-search-renderer__more-results-container",class:fs.moreResultsList},i)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:C("div",{key:"esri-search-renderer__more-results-button",class:fs.moreResultsItem},C("a",{class:fs.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return C("div",{key:`esri-search-result-renderer__header-${t}`,class:fs.moreResultsListHeader},e)}renderMoreResultsList(e){var h,f;const{results:t}=e,i=t.length,r=!!i,n=(h=this.viewModel)==null?void 0:h.selectedResult,o=i===1&&t[0]===n,s=this._getSourceName(e.source,e.sourceIndex),a=((f=this.viewModel)==null?void 0:f.results.length)>1&&!o?this.renderMoreResultsHeader(s,e.sourceIndex):null,u=r&&t.map((y,m)=>this.renderMoreResultsListItem(y,m)),d=r&&!o?C("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},u):null;return r?C("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},a,d):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?C("li",{key:`esri-search-result-renderer__list-item-${t}`},C("a",{class:fs.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===zd.ALL_INDEX?this.messages.all:e.name}};l([c(),pi("esri/widgets/Search/t9n/Search")],Qa.prototype,"messages",void 0),l([c()],Qa.prototype,"showMoreResultsOpen",void 0),l([c()],Qa.prototype,"viewModel",void 0),l([lr()],Qa.prototype,"_showMoreResultsClick",null),l([lr()],Qa.prototype,"_selectResultClick",null),Qa=l([S("esri.widgets.Search.SearchResultRenderer")],Qa);const bme=Qa,ce={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},_me=/<[a-z/][\s\S]*>/i;let Ce=class extends vi{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new gi,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new bme,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=ce.widgetIcon,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new zd,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=i=>{var n;const r=i.relatedTarget;r&&((n=this._container)==null?void 0:n.contains(r))||this._clearActiveMenu()},this.own([q(()=>this.searchTerm,i=>{(i&&this.activeMenu==="warning"||!i&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),Nl(()=>{var i;return(i=this.viewModel)==null?void 0:i.allSources},"change",()=>this._watchSourceChanges()),q(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),ze),q(()=>{var i;return(i=this.viewModel)==null?void 0:i.defaultPopupTemplate},i=>{i&&(i.content=this._renderSearchResultsContent.bind(this))},ze)])}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:i}=t;return this._searchController=t,this.viewModel.search(e,{signal:i}).catch(r=>{if(this._searchController===t)return this._clearActiveMenu(),this._searchController=null,r}).then(r=>{if(this._searchController===t)return this.activeMenu=r.numResults?"none":"warning",this._searchController=null,r})}suggest(e){this._cancelSuggest();const t=new AbortController,{signal:i}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:i}).then(r=>{if(this._suggestController===t)return this._suggestController=null,r.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),r}).catch(()=>{if(this._suggestController===t)return this._suggestController=null,null})}render(){const{state:e}=this.viewModel,t={[ce.disabled]:e==="disabled",[ce.esriWidgetDisabled]:this.disabled};return C("div",{class:this.classes(ce.base,t)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e,disabled:t}=this;return C("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:t,class:this.classes(ce.submitButton,ce.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},C("span",{"aria-hidden":"true",class:ce.searchIcon}))}renderWarningMenu(){return C("div",{key:"esri-search__error-menu",class:this.classes(ce.menu,ce.warningMenu)},C("div",{class:ce.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:i,sourceMenuButtonId:r,disabled:n}=this,{activeSourceIndex:o,allSources:s}=this.viewModel;return s.length>1?C("button",{id:r,key:"esri-search__source-menu-button",bind:this,disabled:n,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(t==="source").toString(),"aria-controls":i,class:this.classes(ce.sourcesButton,ce.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:Qu,"data-node-ref":"_sourceMenuButtonNode",type:"button"},C("span",{"aria-hidden":"true",class:ce.dropdownIcon}),C("span",{"aria-hidden":"true",class:ce.dropupIcon}),C("span",{class:ce.sourceName},this._getSourceName(o))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:i,activeMenu:r,sourceMenuId:n,sourceMenuButtonId:o}=this,s=r==="source"&&i>-1?this._buildId("source-item",i):null;return e.length>1?C("ul",{"aria-activedescendant":s,"aria-labelledby":o,id:n,role:"menu",bind:this,afterCreate:Qu,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:ce.menuList,tabIndex:-1},t?this.renderSource(zd.ALL_INDEX):null,e.map((a,u)=>this.renderSource(u)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?C("div",{key:"esri-search__source-menu",class:this.classes(ce.menu,ce.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t,disabled:i}=this;return C("div",{class:ce.loader,key:"base-loader",tabIndex:i?-1:null},C("span",{"aria-hidden":"true",class:ce.loaderAnimation}),C("span",{class:ce.fallbackText},e.searchButtonTitle),C("span",{class:ce.loaderText},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:i}=this,r={[ce.hasMultipleSources]:e.length>1,[ce.isLoading]:t==="loading",[ce.isSearching]:t==="searching",[ce.showWarning]:i==="warning",[ce.showSources]:i==="source",[ce.showSuggestions]:i==="suggestion"};return C("div",{tabIndex:-1,afterCreate:n=>{this._container=n,n.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:n=>{n.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(r,ce.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?C("button",{bind:this,disabled:this.disabled,class:this.classes(ce.clearButton,ce.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},C("span",{"aria-hidden":"true",class:ce.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:i}=this,r=t&&!i,n=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return r?C("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(ce.menuList,ce.suggestionList,ce.suggestionListCurrentLocation)},C("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(ce.menuItem,n?ce.menuItemFocus:null)},C("span",{"aria-hidden":"true",class:ce.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:i,messages:r,suggestionsMenuId:n,inputId:o,_activeMenuItemIndex:s,disabled:a}=this,{maxInputLength:u,placeholder:d,searchTerm:h,suggestionCount:f}=this.viewModel,y=!(!(t&&!i)&&!f),m=e==="suggestion"&&s>-1?this._buildId("suggestion-item",s):null;return C("input",{"aria-activedescendant":m,"aria-autocomplete":"list","aria-expanded":(y&&e==="suggestion").toString(),"aria-controls":y?n:null,"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,bind:this,disabled:a,placeholder:d,maxlength:u,autocomplete:"off",type:"text",class:this.classes(ce.esriInput,ce.input),value:h,id:o,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:Qu,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:h?"":d})}renderForm(){return C("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:ce.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,i=e.results.length,r=e.results;return i?C("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(ce.menuList,ce.suggestionList)},r.map(n=>this.renderSuggestion(n,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(t=>[this.renderSuggestionHeader(t),this.renderSuggestList(t)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:i,inputId:r}=this,{suggestionCount:n}=this.viewModel,o=t&&!e||n;return this._menuItemCount=0,o?C("div",{id:i,key:"esri-search__suggestions-menu",class:this.classes(ce.menu,ce.suggestionsMenu),role:"listbox","aria-labelledby":r,bind:this,afterCreate:Qu,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return C("div",{key:"esri-search__input-container",class:ce.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:i}=this.viewModel,{sourceIndex:r}=e,n=e.results.length,o=t.length>1&&i===zd.ALL_INDEX;return n&&o?C("div",{key:`esri-search__suggestion-header-${r}`,class:ce.menuHeader},this._getSourceName(r)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:i,messages:r}=this,{searchTerm:n}=this.viewModel;if(n){const{text:o}=e,s=o||r.untitledResult,a=_me.test(s),u=[];if(a)u.push(C("div",{innerHTML:s}));else{const h=this._splitResult(s,n),f=n.toLowerCase();h.forEach((y,m)=>{y&&y.length&&(y.toLowerCase()===f?u.push(C("strong",{key:m},y)):u.push(y))})}const d=this.activeMenu==="suggestion"&&i===t;return C("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(ce.menuItem,d?ce.menuItemFocus:null)},u)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:i}=this.viewModel,r={[ce.menuItemActive]:e===t,[ce.menuItemFocus]:this.activeMenu==="source"&&e===(i?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},n=i?e+1:e;return C("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",n),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(ce.source,ce.menuItem,r)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,i=e?Wn(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return C("div",{key:"esri-search__no_results"},C("div",{class:ce.warningMenuHeader},t.noResults),C("div",{class:ce.warningMenuText},i))}renderEmptySearchWarning(){const{messages:e}=this;return C("div",{key:"esri-search__empty-search"},C("span",{"aria-hidden":"true",class:ce.noticeIcon}),C("span",{class:ce.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return C("div",{key:"esri-search__locate-error"},C("span",{"aria-hidden":"true",class:ce.noticeIcon}),C("span",{class:ce.noValueText},e.locateError))}renderWarning(){var r;const{displayedSearchTerm:e,_locateFailed:t}=this,{viewModel:i}=this;return t?this.renderLocateWarning():((r=i.selectedSuggestion)==null?void 0:r.location)||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${t===void 0?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,i="sources";e.remove(i),t.forEach(r=>e.add(q(()=>r.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var t;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((t=this._sourceListNode)==null||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).then(i=>{this.activeMenu=i.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var i;if(!e)return;const t=e["data-source-index"];this.viewModel.activeSourceIndex=t,this._clearActiveMenu(),(i=this._sourceMenuButtonNode)==null||i.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var n;const t=Bo(e);if(e.ctrlKey||e.metaKey||t==="Copy"||t==="ArrowLeft"||t==="ArrowRight"||t==="Shift")return;if(t==="Tab"||t==="Escape"||e.shiftKey&&t==="Tab")return this._cancelSuggest(),void(t==="Escape"&&this._clearActiveMenu());const i=t==="Home"||t==="End"||t==="ArrowUp"||t==="ArrowDown";if(t==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const r=(n=this._suggestionListNode)==null?void 0:n.getElementsByTagName("li");if(r!=null&&r.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),i)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(t,r,this._suggestionListNode);const o=r[this._activeMenuItemIndex];if(t==="Enter"&&o){const s=o["data-suggestion"];return void(s?(this._focus(),this.search(s)):o["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,t,i){const r=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=t.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&nQ(t[this._activeMenuItemIndex],i)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=Bo(e);if(qO(t)){e.preventDefault();const i=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(i)}else t!=="ArrowUp"&&t!=="ArrowDown"&&t!=="End"&&t!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var n,o;const t=Bo(e),i=t==="ArrowUp"||t==="ArrowDown"||t==="End"||t==="Home";if(i&&e.preventDefault(),t==="Escape")return this._clearActiveMenu(),void((n=this._sourceMenuButtonNode)==null?void 0:n.focus());const r=(o=this._sourceListNode)==null?void 0:o.getElementsByTagName("li");return r&&r.length!==0&&i?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(t,r,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:t}=this,i=this.viewModel,{allSources:r}=i,n=r.getItemAt(e);return e===zd.ALL_INDEX?t.all:n&&n.name||t.untitledSource}_splitResult(e,t){const i=aA(t);return e.replace(new RegExp(`(^|)(${i})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};l([c()],Ce.prototype,"_activeMenuItemIndex",void 0),l([c()],Ce.prototype,"displayedSearchTerm",null),l([c({readOnly:!0})],Ce.prototype,"inputId",null),l([c({readOnly:!0})],Ce.prototype,"suggestionsMenuId",null),l([c({readOnly:!0})],Ce.prototype,"sourceMenuId",null),l([c({readOnly:!0})],Ce.prototype,"sourceMenuButtonId",null),l([c()],Ce.prototype,"activeMenu",void 0),l([J("viewModel.activeSource")],Ce.prototype,"activeSource",void 0),l([J("viewModel.activeSourceIndex")],Ce.prototype,"activeSourceIndex",void 0),l([J("viewModel.allPlaceholder")],Ce.prototype,"allPlaceholder",void 0),l([J("viewModel.allSources")],Ce.prototype,"allSources",void 0),l([J("viewModel.autoNavigate")],Ce.prototype,"autoNavigate",void 0),l([J("viewModel.autoSelect")],Ce.prototype,"autoSelect",void 0),l([J("viewModel.defaultSources")],Ce.prototype,"defaultSources",void 0),l([c()],Ce.prototype,"disabled",void 0),l([J("viewModel.goToOverride")],Ce.prototype,"goToOverride",void 0),l([c()],Ce.prototype,"iconClass",void 0),l([J("viewModel.includeDefaultSources")],Ce.prototype,"includeDefaultSources",void 0),l([c({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ce.prototype,"label",void 0),l([J("viewModel.locationEnabled")],Ce.prototype,"locationEnabled",void 0),l([J("viewModel.maxResults")],Ce.prototype,"maxResults",void 0),l([J("viewModel.maxSuggestions")],Ce.prototype,"maxSuggestions",void 0),l([c(),pi("esri/widgets/Search/t9n/Search")],Ce.prototype,"messages",void 0),l([c(),pi("esri/t9n/common")],Ce.prototype,"messagesCommon",void 0),l([J("viewModel.minSuggestCharacters")],Ce.prototype,"minSuggestCharacters",void 0),l([J("viewModel.popupEnabled")],Ce.prototype,"popupEnabled",void 0),l([J("viewModel.popupTemplate")],Ce.prototype,"popupTemplate",void 0),l([J("viewModel.portal")],Ce.prototype,"portal",void 0),l([J("viewModel.resultGraphic")],Ce.prototype,"resultGraphic",void 0),l([J("viewModel.resultGraphicEnabled")],Ce.prototype,"resultGraphicEnabled",void 0),l([J("viewModel.results")],Ce.prototype,"results",void 0),l([J("viewModel.searchAllEnabled")],Ce.prototype,"searchAllEnabled",void 0),l([J("viewModel.searchTerm")],Ce.prototype,"searchTerm",void 0),l([J("viewModel.selectedResult")],Ce.prototype,"selectedResult",void 0),l([J("viewModel.sources")],Ce.prototype,"sources",void 0),l([J("viewModel.suggestions")],Ce.prototype,"suggestions",void 0),l([J("viewModel.suggestionsEnabled")],Ce.prototype,"suggestionsEnabled",void 0),l([J("viewModel.view")],Ce.prototype,"view",void 0),l([L6(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),c({type:zd})],Ce.prototype,"viewModel",void 0),l([J("viewModel.clear")],Ce.prototype,"clear",null),Ce=l([S("esri.widgets.Search")],Ce);const Sme=Ce,Tme={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};function owe(e){return{renderer:{type:"simple",symbol:e==="esriGeometryPoint"||e==="esriGeometryMultipoint"?z7:e==="esriGeometryPolyline"?H7:G7}}}const Eme=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let Ame=1;function swe(e,t){if(k("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let i=`this.${t} = null;`;for(const n in e)i+=`this${Eme.test(n)?`.${n}`:`["${n}"]`} = ${JSON.stringify(e[n])};`;const r=new Function(`
      return class AttributesClass$${Ame++} {
        constructor() {
          ${i};
        }
      }
    `)();return()=>new r}catch{return()=>({[t]:null,...e})}}function awe(e={}){return[{name:"New Feature",description:"",prototype:{attributes:P(e)}}]}function xme(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:Tme,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}const s$=W.getLogger("esri.layers.graphics.sources.GeoJSONSource");let Mu=class extends Ko{constructor(){super(...arguments),this.type="geojson",this.refresh=pA(async e=>{await this.load();const{extent:t,timeExtent:i}=await this._connection.invoke("refresh",e);return this.sourceJSON.extent=t,i&&(this.sourceJSON.timeInfo.timeExtent=[i.start,i.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(e){const t=T(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t)).then(i=>am.fromJSON(i))}queryFeaturesJSON(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t))}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:Oe.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}_applyEdits(e){if(!this._connection)throw new N("geojson-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField,i=[],r=[],n=[];if(e.addFeatures)for(const o of e.addFeatures)i.push(this._serializeFeature(o));if(e.deleteFeatures)for(const o of e.deleteFeatures)"objectId"in o&&o.objectId!=null?r.push(o.objectId):"attributes"in o&&o.attributes[t]!=null&&r.push(o.attributes[t]);if(e.updateFeatures)for(const o of e.updateFeatures)n.push(this._serializeFeature(o));return this._connection.invoke("applyEdits",{adds:i,updates:n,deletes:r}).then(({extent:o,timeExtent:s,featureEditResults:a})=>(this.sourceJSON.extent=o,s&&(this.sourceJSON.timeInfo.timeExtent=[s.start,s.end]),this._createEditsResult(a)))}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new N("geojson-layer-source:edit-failure",t.description,{code:t.code}):null}}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e);return i?{geometry:i.toJSON(),attributes:t}:{attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return O(t)?null:t.type==="mesh"||t.type==="extent"?mr.fromExtent(t.extent):t}async _startWorker(e){this._connection=await Q9("GeoJSONSourceWorker",{strategy:k("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,hasZ:r,geometryType:n,objectIdField:o,url:s,timeInfo:a,customParameters:u}=this.layer,d=this.layer.originOf("spatialReference")==="defaults",h={url:s,customParameters:u,fields:t&&t.map(y=>y.toJSON()),geometryType:HA.toJSON(n),hasZ:r,objectIdField:o,timeInfo:a?a.toJSON():null,spatialReference:d?null:i&&i.toJSON()},f=await this._connection.invoke("load",h,{signal:e});for(const y of f.warnings)s$.warn(y.message,{layer:this.layer,warning:y});f.featureErrors.length&&s$.warn(`Encountered ${f.featureErrors.length} validation errors while loading features`,f.featureErrors),this.sourceJSON=f.layerDefinition,this.capabilities=xme(this.sourceJSON.hasZ,!0)}};l([c()],Mu.prototype,"capabilities",void 0),l([c()],Mu.prototype,"type",void 0),l([c({constructOnly:!0})],Mu.prototype,"layer",void 0),l([c()],Mu.prototype,"sourceJSON",void 0),Mu=l([S("esri.layers.graphics.sources.GeoJSONSource")],Mu);const Cme=Z7();let Pe=class extends P7(_3(E7(b3(F7(T3(O7(S3(bw(yp))))))))){constructor(e){super(e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new Mu({layer:this}),this.spatialReference=me.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson",this.typeIdField=null,this.types=null}destroy(){var e;(e=this.source)==null||e.destroy()}load(e){return this.addResolvingPromise(this.source.load(e).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),_1(this.renderer,this.fieldsIndex),YA(this.timeInfo,this.fieldsIndex)})),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&this.geometryType==null}get parsedUrl(){return this.url?rt(this.url):null}set renderer(e){_1(e,this.fieldsIndex),this._set("renderer",e)}set url(e){if(!e)return void this._set("url",e);const t=rt(e);this._set("url",t.path),t.query&&(this.customParameters={...this.customParameters,...t.query})}async applyEdits(e,t){const i=await U(()=>import("./editingSupport.d094fbda.js"),[],import.meta.url);await this.load();const r=await i.applyEdits(this,this.source,e,t);return this.read({extent:this.source.sourceJSON.extent,timeInfo:this.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),r}on(e,t){return super.on(e,t)}createPopupTemplate(e){return J7(this,e)}createQuery(){const e=new zi,t=this.get("capabilities.data");e.returnGeometry=!0,t&&t.supportsZ&&(e.returnZ=!0),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:i,timeExtent:r}=this;return e.timeExtent=i!=null&&r!=null?r.offset(-i.value,i.unit):r||null,e}getFieldDomain(e,t){let i,r=!1;const n=t&&t.feature,o=n&&n.attributes,s=this.typeIdField&&o&&o[this.typeIdField];return s!=null&&this.types&&(r=this.types.some(a=>a.id==s&&(i=a.domains&&a.domains[e],i&&i.type==="inherited"&&(i=this._getLayerDomain(e)),!0))),r||i||(i=this._getLayerDomain(e)),i}getField(e){return this.fieldsIndex.get(e)}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(zi.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>this.source.queryObjectIds(zi.from(e)||this.createQuery(),t))}queryFeatureCount(e,t){return this.load().then(()=>this.source.queryFeatureCount(zi.from(e)||this.createQuery(),t))}queryExtent(e,t){return this.load().then(()=>this.source.queryExtent(zi.from(e)||this.createQuery(),t))}async hasDataChanged(){try{const{dataChanged:e,updates:t}=await this.source.refresh(this.customParameters);return T(t)&&this.read(t,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}_getLayerDomain(e){if(!this.fields)return null;let t=null;return this.fields.some(i=>(i.name===e&&(t=i.domain),!!t)),t}};l([c({readOnly:!0,json:{read:!1,write:!1}})],Pe.prototype,"capabilities",null),l([c({type:String})],Pe.prototype,"copyright",void 0),l([c({readOnly:!0})],Pe.prototype,"createQueryVersion",null),l([c({readOnly:!0})],Pe.prototype,"defaultPopupTemplate",null),l([c({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Pe.prototype,"definitionExpression",void 0),l([c({type:String})],Pe.prototype,"displayField",void 0),l([c({type:Boolean})],Pe.prototype,"editingEnabled",void 0),l([c(I7)],Pe.prototype,"elevationInfo",void 0),l([c(K7)],Pe.prototype,"featureReduction",void 0),l([c({type:[om],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],Pe.prototype,"fields",void 0),l([c(Cme.fieldsIndex)],Pe.prototype,"fieldsIndex",void 0),l([c({type:Oe,json:{name:"extent"}})],Pe.prototype,"fullExtent",void 0),l([c({type:["point","polygon","polyline","multipoint"],json:{read:{reader:HA.read}}})],Pe.prototype,"geometryType",void 0),l([c({type:Boolean})],Pe.prototype,"hasZ",void 0),l([c(M7)],Pe.prototype,"id",void 0),l([c({type:Boolean,readOnly:!0})],Pe.prototype,"isTable",null),l([c(Tw)],Pe.prototype,"labelsVisible",void 0),l([c({type:[fm],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:xE},write:!0}})],Pe.prototype,"labelingInfo",void 0),l([c(C7)],Pe.prototype,"legendEnabled",void 0),l([c({type:["show","hide"]})],Pe.prototype,"listMode",void 0),l([c({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],Pe.prototype,"objectIdField",void 0),l([c(Xf)],Pe.prototype,"opacity",void 0),l([c({type:["GeoJSON"]})],Pe.prototype,"operationalLayerType",void 0),l([c({readOnly:!0})],Pe.prototype,"parsedUrl",null),l([c(Sw)],Pe.prototype,"popupEnabled",void 0),l([c({type:Ol,json:{name:"popupInfo",write:!0}})],Pe.prototype,"popupTemplate",void 0),l([c({types:hm,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:c7}}}})],Pe.prototype,"renderer",null),l([c(A7)],Pe.prototype,"screenSizePerspectiveEnabled",void 0),l([c({readOnly:!0})],Pe.prototype,"source",void 0),l([c({type:me})],Pe.prototype,"spatialReference",void 0),l([c({type:[Ew]})],Pe.prototype,"templates",void 0),l([c()],Pe.prototype,"title",void 0),l([c({json:{read:!1},readOnly:!0})],Pe.prototype,"type",void 0),l([c({type:String,readOnly:!0})],Pe.prototype,"typeIdField",void 0),l([c({type:[C3]})],Pe.prototype,"types",void 0),l([c(x7)],Pe.prototype,"url",null),Pe=l([S("esri.layers.GeoJSONLayer")],Pe);const YE=Pe,lwe=Object.freeze(Object.defineProperty({__proto__:null,default:YE},Symbol.toStringTag,{value:"Module"})),Ime={type:Us,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:sU}}}}};function sU(e,t,i,r){if(!e)return null;const{minScale:n,maxScale:o,minLOD:s,maxLOD:a}=t;if(s!=null&&a!=null)return r&&r.ignoreMinMaxLOD?Us.fromJSON(e):Us.fromJSON({...e,lods:e.lods.filter(({level:u})=>u!=null&&u>=s&&u<=a)});if(n!==0&&o!==0){const u=f=>Math.round(1e4*f)/1e4,d=n?u(n):1/0,h=o?u(o):-1/0;return Us.fromJSON({...e,lods:e.lods.filter(f=>{const y=u(f.scale);return y<=d&&y>=h})})}return Us.fromJSON(e)}class op{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(t,i){if(this._allAvailability!=="unknown")return this._allAvailability;const r=(t-this.location.top)*this.location.width+(i-this.location.left),n=r%8,o=r>>3,s=this._tileAvailabilityBitSet;return o<0||o>s.length?"unknown":s[o]&1<<n?"available":"unavailable"}_updateFromData(t){const i=this.location.width,r=this.location.height;let n=!0,o=!0;const s=Math.ceil(i*r/8),a=new Uint8Array(s);let u=0;for(let d=0;d<t.length;d++){const h=d%8;t[d]?(o=!1,a[u]|=1<<h):n=!1,h===7&&++u}o?this._allAvailability="unavailable":n?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(t,i){const r=t.service.request||Be,{row:n,col:o,width:s,height:a}=t,u={query:{f:"json"}};return i=i?{...u,...i}:u,r(Mme(t),i).then(d=>d.data).catch(d=>{if(d&&d.details&&d.details.httpStatus===422)return{location:{top:n,left:o,width:s,height:a},valid:!0,data:GV(s*a,0)};throw d}).then(d=>{if(d.location&&(d.location.top!==n||d.location.left!==o||d.location.width!==s||d.location.height!==a))throw new N("tilemap:location-mismatch","Tilemap response for different location than requested",{response:d,definition:{top:n,left:o,width:s,height:a}});return op.fromJSON(d)})}static fromJSON(t){op._validateJSON(t);const i=new op;return i.location=Object.freeze(P(t.location)),i._updateFromData(t.data),Object.freeze(i)}static _validateJSON(t){if(!t||!t.location)throw new N("tilemap:missing-location","Location missing from tilemap response");if(t.valid===!1)throw new N("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new N("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new N("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new N("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function a$(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function Mme(e){let t;if(e.service.type==="vector-tile")t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const i=e.service.query;return i&&(t=`${t}?${i}`),t}var Fu;const Nme=W.getLogger("esri.layers.support.TilemapCache");let rn=Fu=class extends Ll(se){constructor(e){super(e),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*xy.MEGABYTES,this.request=Be,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new Q8(this.cacheByteSize),this.own([q(()=>{const{layer:e}=this;return[e==null?void 0:e.parsedUrl,e==null?void 0:e.tileServers,e==null?void 0:e.apiKey,e==null?void 0:e.customParameters]},()=>this._initializeTilemapDefinition()),q(()=>{var e,t;return(t=(e=this.layer)==null?void 0:e.tileInfo)==null?void 0:t.lods},e=>this._initializeAvailableLevels(e),tl)]),this._initializeTilemapDefinition()}castLevels(e){return e<=2?(Nme.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,r){if(!this._availableLevels[e])return Promise.reject(new N("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,t,i,n);if(o)return Promise.resolve(o);const s=r&&r.signal;return r={...r,signal:null},new Promise((a,u)=>{fn(s,()=>u(bt()));const d=a$(n);let h=this._pendingTilemapRequests[d];if(!h){h=op.fromDefinition(n,r).then(y=>(this._tilemapCache.put(d,y,y.byteSize),y));const f=()=>delete this._pendingTilemapRequests[d];this._pendingTilemapRequests[d]=h,h.then(f,f)}h.then(a,u)})}getAvailability(e,t,i){if(!this._availableLevels[e])return"unavailable";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):"unknown"}fetchAvailability(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch(n=>n).then(n=>{if(n instanceof op){const o=n.getAvailability(t,i);if(o==="unavailable")throw new N("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i});return o}if(Ki(n))throw n;return"unknown"}):Promise.reject(new N("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,r,n){r.level=e,r.row=t,r.col=i;const o=this.layer.tileInfo;o.updateTileInfo(r);const s=this.fetchAvailability(e,t,i,n).catch(a=>{if(Ki(a))throw a;if(o.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw a});return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,n,s),s}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,n,o){if(!this._prefetchingEnabled)return;const s=`prefetch-${e}`;if(this.handles.has(s))return;const a=new AbortController;o.then(()=>a.abort(),()=>a.abort());let u=!1;const d={remove(){u||(u=!0,a.abort())}};if(this.handles.add(d,s),await Uj(10,a.signal).catch(()=>{}),u||(u=!0,this.handles.remove(s)),hn(a))return;const h={id:e,level:t,row:i,col:r},f={...n,signal:a.signal},y=this.layer.tileInfo;for(let m=0;Fu._prefetches.length<Fu._maxPrefetch&&y.upsampleTile(h);++m){const g=this.fetchAvailability(h.level,h.row,h.col,f);Fu._prefetches.push(g);const v=()=>{Fu._prefetches.removeUnordered(g)};g.then(v,v)}}_initializeTilemapDefinition(){var r;if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:fc({...e.query,...i,token:t!=null?t:(r=e.query)==null?void 0:r.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const n=a$(r);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(t=>this._availableLevels[t.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};rn._maxPrefetch=4,rn._prefetches=new wl({initialSize:Fu._maxPrefetch}),l([c({constructOnly:!0,type:Number})],rn.prototype,"levels",void 0),l([Fe("levels")],rn.prototype,"castLevels",null),l([c({readOnly:!0,type:Number})],rn.prototype,"size",null),l([c({constructOnly:!0,type:Number})],rn.prototype,"cacheByteSize",void 0),l([c({constructOnly:!0})],rn.prototype,"layer",void 0),l([c({constructOnly:!0})],rn.prototype,"request",void 0),rn=Fu=l([S("esri.layers.support.TilemapCache")],rn);const Rme=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}readMaxScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(i,r){return r.capabilities&&r.capabilities.includes("Tilemap")?new rn({layer:this}):null}};return l([c({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),l([c()],t.prototype,"minScale",void 0),l([K("service","minScale")],t.prototype,"readMinScale",null),l([c()],t.prototype,"maxScale",void 0),l([K("service","maxScale")],t.prototype,"readMaxScale",null),l([c({type:me})],t.prototype,"spatialReference",void 0),l([c({readOnly:!0})],t.prototype,"supportsBlankTile",null),l([c(Ime)],t.prototype,"tileInfo",void 0),l([c()],t.prototype,"tilemapCache",void 0),l([K("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),l([c()],t.prototype,"version",void 0),t=l([S("esri.layers.mixins.ArcGISCachedService")],t),t};let M0=null;function Pme(e){if(M0)return M0;const t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return M0=new Promise(i=>{const r=new Image;r.onload=()=>{r.onload=r.onerror=null,i(r.width>0&&r.height>0)},r.onerror=()=>{r.onload=r.onerror=null,i(!1)},r.src="data:image/webp;base64,"+t[e]}),M0}const $me=W.getLogger("esri.layers.support.SpriteSource"),Dme=1.15;class l${constructor(t,i,r,n){this.baseURL=t,this.devicePixelRatio=i,this.maxTextureSize=r,this._spriteImageFormat=n,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}get spriteNames(){const t=[];for(const i in this._spritesData)t.push(i);return t.sort(),t}getSpriteInfo(t){return this._spritesData[t]}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}_loadSprites(t){this._isRetina=this.devicePixelRatio>Dme;const i=rt(this.baseURL),r=i.query?"?"+fc(i.query):"",n=this._isRetina?"@2x":"",o=`${i.path}${n}.${this._spriteImageFormat}${r}`,s=`${i.path}${n}.json${r}`;return Promise.all([Be(s,t),Be(o,{responseType:"image",...t})]).then(([a,u])=>{const d=Object.keys(a.data);if(!d||d.length===0||d.length===1&&d[0]==="_ssl"||!u||!u.data)return this._spritesData=this.image=null,this.width=this.height=0,null;this._spritesData=a.data;const h=u.data,f=Math.max(this.maxTextureSize,4096);if(h.width>f||h.height>f){const _=`Sprite resource for style ${i.path} is bigger than the maximum allowed of ${f} pixels}`;throw $me.error(_),new N("SpriteSource",_)}this.width=h.width,this.height=h.height;const y=document.createElement("canvas"),m=y.getContext("2d");y.width=h.width,y.height=h.height,m.drawImage(h,0,0,h.width,h.height);const g=m.getImageData(0,0,h.width,h.height),v=new Uint8Array(g.data);let w;for(let _=0;_<v.length;_+=4)w=v[_+3]/255,v[_]=v[_]*w,v[_+1]=v[_+1]*w,v[_+2]=v[_+2]*w;this.image=v})}}class Lme{constructor(t){this.url=t}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=Be(this.url).then(t=>t.data.index)),this._tileIndexPromise}async dataKey(t,i){const r=await this.fetchTileIndex();return _t(i),this._getIndexedDataKey(r,t)}_getIndexedDataKey(t,i){const r=[i];if(i.level<0||i.row<0||i.col<0||i.row>>i.level>0||i.col>>i.level>0)return null;let n=i;for(;n.level!==0;)n=new xi(n.level-1,n.row>>1,n.col>>1,n.world),r.push(n);let o,s,a=t,u=r.pop();if(a===1)return u;for(;r.length;)if(o=r.pop(),s=(1&o.col)+((1&o.row)<<1),a){if(a[s]===0){u=null;break}if(a[s]===1){u=o;break}u=o,a=a[s]}return u}}class Ome{constructor(t,i){this._tilemap=t,this._tileIndexUrl=i}async fetchTileIndex(t){return this._tileIndexPromise||(this._tileIndexPromise=Be(this._tileIndexUrl,{query:{...t==null?void 0:t.query}}).then(i=>i.data.index)),this._tileIndexPromise}dataKey(t,i){const{level:r,row:n,col:o}=t,s=new xi(t);return this._tilemap.fetchAvailabilityUpsample(r,n,o,s,i).then(()=>(s.world=t.world,s)).catch(a=>{if(Ki(a))throw a;return null})}}const N0=new Map;function kme(e,t,i,r,n){return Fme(e.replace(/\{z\}/gi,t.toString()).replace(/\{y\}/gi,i.toString()).replace(/\{x\}/gi,r.toString()),n)}function Fme(e,t){const i=N0.get(e);if(i)return i.then(n=>P(n));const r=Be(e,{responseType:"array-buffer",...t}).then(({data:n})=>(N0.delete(e),n)).catch(n=>{throw N0.delete(e),n});return N0.set(e,r),r}class Bme{constructor(t,i,r){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.name=t,this.sourceUrl=i;const n=rt(this.sourceUrl),o=P(r),s=o.tiles;if(n)for(let y=0;y<s.length;y++){const m=rt(s[y]);m&&(Gi(m.path)||(m.path=Zo(n.path,m.path)),s[y]=Gs(m.path,{...n.query,...m.query}))}this.tileServers=s;const a=r.capabilities&&r.capabilities.split(",").map(y=>y.toLowerCase().trim()),u=(r==null?void 0:r.exportTilesAllowed)===!0,d=(a==null?void 0:a.includes("tilemap"))===!0,h=u&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:u,supportsTileMap:d},exportTiles:u?{maxExportTilesCount:+h}:null},this.tileInfo=sU(o.tileInfo,o,null,{ignoreMinMaxLOD:!0});const f=r.tileMap?Gs(Zo(n.path,r.tileMap),n.query):null;d?(this.type="vector-tile",this.tilemap=new Ome(new rn({layer:{parsedUrl:n,tileInfo:this.tileInfo,type:"vector-tile",tileServers:this.tileServers}}),f)):f&&(this.tilemap=new Lme(f)),this.fullExtent=Oe.fromJSON(r.fullExtent)}destroy(){}async getRefKey(t,i){var r,n;return(n=(r=this.tilemap)==null?void 0:r.dataKey(t,i))!=null?n:t}requestTile(t,i,r,n){const o=this.tileServers[i%this.tileServers.length];return kme(o,t,i,r,n)}isCompatibleWith(t){const i=this.tileInfo,r=t.tileInfo;if(!i.spatialReference.equals(r.spatialReference)||!i.origin.equals(r.origin)||Math.round(i.dpi)!==Math.round(r.dpi))return!1;const n=i.lods,o=r.lods,s=Math.min(n.length,o.length);for(let a=0;a<s;a++){const u=n[a],d=o[a];if(u.level!==d.level||Math.round(u.scale)!==Math.round(d.scale))return!1}return!0}}const __=Ne.defaults&&Ne.defaults.io.corsEnabledServers;async function Ume(e,t){const i={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[r,n]=typeof e=="string"?[e,null]:[null,e.jsonUrl];await oc(i,"esri",e,n,t);const o={layerDefinition:i.validatedSource,url:r,serviceUrl:i.sourceUrl,style:i.style,styleUrl:i.styleUrl,spriteUrl:i.style.sprite&&Ic(i.styleBase,i.style.sprite),spriteFormat:i.spriteFormat,glyphsUrl:i.style.glyphs&&Ic(i.styleBase,i.style.glyphs),sourceNameToSource:i.sourceNameToSource,primarySourceName:i.primarySourceName};return Cc(o.spriteUrl),Cc(o.glyphsUrl),o}function Cc(e){if(!e)return;const t=dn(e);__&&!__.includes(t)&&__.push(t)}function Ic(...e){let t;for(let i=0;i<e.length;++i)yn(e[i])?t&&(t=t.split("://")[0]+":"+e[i].trim()):t=Gi(e[i])?e[i]:Zo(t,e[i]);return Lv(t)}async function oc(e,t,i,r,n){let o,s,a;if(_t(n),typeof i=="string"){const d=Lr(i);Cc(d),a=await Be(d,{...n,responseType:"json",query:{f:"json",...n==null?void 0:n.query}}),a.ssl&&(o&&(o=o.replace(/^http:/i,"https:")),s&&(s=s.replace(/^http:/i,"https:"))),o=d,s=d}else a={data:i},o=i.jsonUrl||null,s=r;const u=a.data;if(aU(u))return e.styleUrl=o||null,jme(e,u,s,n);if(Vme(u))return e.sourceUrl?u$(e,u,s,!1,t,n):(e.sourceUrl=o||null,u$(e,u,s,!0,t,n));throw new Error("You must specify the URL or the JSON for a service or for a style.")}function aU(e){return!!e.sources}function Vme(e){return!aU(e)}async function jme(e,t,i,r){const n=i?F5(i):R5();e.styleBase=n,e.style=t,e.styleUrl&&Cc(e.styleUrl),t["sprite-format"]&&t["sprite-format"].toLowerCase()==="webp"&&(e.spriteFormat="webp");const o=[];if(t.sources&&t.sources.esri){const s=t.sources.esri;s.url?await oc(e,"esri",Ic(n,s.url),void 0,r):o.push(oc(e,"esri",s,n,r))}for(const s of Object.keys(t.sources))s!=="esri"&&t.sources[s].type==="vector"&&(t.sources[s].url?o.push(oc(e,s,Ic(n,t.sources[s].url),void 0,r)):t.sources[s].tiles&&o.push(oc(e,s,t.sources[s],n,r)));await Promise.all(o)}async function u$(e,t,i,r,n,o){const s=i?Lv(i)+"/":R5(),a=zme(t,s),u=new Bme(n,Gs(s,o==null?void 0:o.query),a);if(!r&&e.primarySourceName in e.sourceNameToSource){const d=e.sourceNameToSource[e.primarySourceName];if(!d.isCompatibleWith(u))return;u.fullExtent!=null&&(d.fullExtent!=null?d.fullExtent.union(u.fullExtent):d.fullExtent=u.fullExtent.clone()),d.tileInfo.lods.length<u.tileInfo.lods.length&&(d.tileInfo=u.tileInfo)}if(r?(e.sourceBase=s,e.source=t,e.validatedSource=a,e.primarySourceName=n,e.sourceUrl&&Cc(e.sourceUrl)):Cc(s),e.sourceNameToSource[n]=u,!e.style){if(t.defaultStyles==null)throw new Error;return typeof t.defaultStyles=="string"?oc(e,"",Ic(s,t.defaultStyles,"root.json"),void 0,o):oc(e,"",t.defaultStyles,Ic(s,"root.json"),o)}}function zme(e,t){if(e.hasOwnProperty("tileInfo"))return e;const i={xmin:-20037507067161843e-9,ymin:-20037507067161843e-9,xmax:20037507067161843e-9,ymax:20037507067161843e-9,spatialReference:{wkid:102100}},r=512;let n=78271.51696400007,o=2958287637957775e-7;const s=[],a=e.hasOwnProperty("minzoom")?+e.minzoom:0,u=e.hasOwnProperty("maxzoom")?+e.maxzoom:22;for(let d=0;d<=u;d++)d>=a&&s.push({level:d,scale:o,resolution:n}),n/=2,o/=2;for(const d of e.tiles)Cc(Ic(t,d));return{capabilities:"TilesOnly",initialExtent:i,fullExtent:i,minScale:0,maxScale:0,tiles:e.tiles,tileInfo:{rows:r,cols:r,dpi:96,format:"pbf",origin:{x:-20037508342787e-6,y:20037508342787e-6},lods:s,spatialReference:{wkid:102100}}}}function Hme(e){return{origin:"portal-item",url:rt(e.itemUrl),portal:e.portal||Kt.getDefault(),portalItem:e,readResourcePaths:[]}}function uwe(e){return{origin:"portal-item",messages:[],writtenProperties:[],url:e.itemUrl?rt(e.itemUrl):null,portal:e.portal||Kt.getDefault(),portalItem:e}}const Gme=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Wme={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function qme(e){const t=e==null?void 0:e.match(Gme);if(!t)return null;const[,i,r,n]=t;if(!i)return null;let o=null,s=null,a=null;const{devext:u,qaext:d,www:h}=Wme;if(r)if(o=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:s,portalHostname:a}=u);break;case"qa":({customBaseUrl:s,portalHostname:a}=d);break;default:return null}else({customBaseUrl:s,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:s,portalHostname:a}=u);break;case"qaext":({customBaseUrl:s,portalHostname:a}=d);break;case"www":({customBaseUrl:s,portalHostname:a}=h);break;default:return null}return{customBaseUrl:s,isPortal:!1,portalHostname:a,urlKey:o}}const R0=1e-6;function Yme(e,t){if(e===t)return!0;if(!e&&t!=null||e!=null&&!t||!e.spatialReference.equals(t.spatialReference)||e.dpi!==t.dpi)return!1;const i=e.origin,r=t.origin;if(Math.abs(i.x-r.x)>=R0||Math.abs(i.y-r.y)>=R0)return!1;let n,o;e.lods[0].scale>t.lods[0].scale?(n=e,o=t):(o=e,n=t);for(let s=n.lods[0].scale;s>=o.lods[o.lods.length-1].scale-R0;s/=2)if(Math.abs(s-o.lods[0].scale)<R0)return!0;return!1}function Kme(e,t){if(e===t)return e;if(!e&&t!=null)return t;if(e!=null&&!t)return e;const i=e.size[0],r=e.format,n=e.dpi,o={x:e.origin.x,y:e.origin.y},s=e.spatialReference.toJSON(),a=e.lods[0].scale>t.lods[0].scale?e.lods[0]:t.lods[0],u=e.lods[e.lods.length-1].scale<=t.lods[t.lods.length-1].scale?e.lods[e.lods.length-1]:t.lods[t.lods.length-1],d=a.scale,h=a.resolution,f=u.scale,y=[];let m=d,g=h,v=0;for(;m>f;)y.push({level:v,resolution:g,scale:m}),v++,m/=2,g/=2;return new Us({size:[i,i],dpi:n,format:r||"pbf",origin:o,lods:y,spatialReference:s})}var sp,KE,c$,d$,p$,h$,f$,y$,m$,g$,v$,w$,b$,_$,S$,T$,E$,A$,x$,C$,I$,M$,N$,R$,P$,$$,D$,L$,O$,k$,F$,B$,U$,V$,j$,z$,H$,G$,W$,q$,Y$,K$,Z$,J$,X$,Q$,eD,tD,iD,rD,nD,oD,sD,aD,lD,uD,cD,dD,pD,hD,fD;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(sp||(sp={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(KE||(KE={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(c$||(c$={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(d$||(d$={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(p$||(p$={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(h$||(h$={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(f$||(f$={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(y$||(y$={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(m$||(m$={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(g$||(g$={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(v$||(v$={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(w$||(w$={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(b$||(b$={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(_$||(_$={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(S$||(S$={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(T$||(T$={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(E$||(E$={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(A$||(A$={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(x$||(x$={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(C$||(C$={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(I$||(I$={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(M$||(M$={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(N$||(N$={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(R$||(R$={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(P$||(P$={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}($$||($$={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(D$||(D$={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(L$||(L$={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(O$||(O$={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(k$||(k$={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(F$||(F$={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(B$||(B$={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(U$||(U$={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(V$||(V$={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(j$||(j$={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(z$||(z$={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(H$||(H$={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(G$||(G$={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(W$||(W$={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(q$||(q$={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(Y$||(Y$={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(K$||(K$={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(Z$||(Z$={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(J$||(J$={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(X$||(X$={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(Q$||(Q$={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(eD||(eD={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(tD||(tD={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(iD||(iD={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(rD||(rD={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(nD||(nD={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(oD||(oD={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(sD||(sD={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(aD||(aD={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(lD||(lD={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(uD||(uD={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(cD||(cD={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(dD||(dD={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(pD||(pD={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(hD||(hD={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(fD||(fD={}));var Ct,Bu,ZE,jo,JE,fv,XE,Uu,QE;(function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.FILL=1]="FILL",e[e.LINE=2]="LINE",e[e.SYMBOL=3]="SYMBOL",e[e.CIRCLE=4]="CIRCLE"})(Ct||(Ct={})),function(e){e[e.VISIBLE=0]="VISIBLE",e[e.NONE=1]="NONE"}(Bu||(Bu={})),function(e){e[e.POINT=0]="POINT",e[e.LINE=1]="LINE",e[e.LINE_CENTER=2]="LINE_CENTER"}(ZE||(ZE={})),function(e){e[e.MAP=0]="MAP",e[e.VIEWPORT=1]="VIEWPORT",e[e.AUTO=2]="AUTO"}(jo||(jo={})),function(e){e[e.AUTO=0]="AUTO",e[e.LEFT=1]="LEFT",e[e.CENTER=2]="CENTER",e[e.RIGHT=3]="RIGHT"}(JE||(JE={})),function(e){e[e.CENTER=0]="CENTER",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.TOP=3]="TOP",e[e.BOTTOM=4]="BOTTOM",e[e.TOP_LEFT=5]="TOP_LEFT",e[e.TOP_RIGHT=6]="TOP_RIGHT",e[e.BOTTOM_LEFT=7]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(fv||(fv={})),function(e){e[e.NONE=0]="NONE",e[e.UPPERCASE=1]="UPPERCASE",e[e.LOWERCASE=2]="LOWERCASE"}(XE||(XE={})),function(e){e[e.MAP=0]="MAP",e[e.VIEWPORT=1]="VIEWPORT"}(Uu||(Uu={})),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(QE||(QE={}));class Pt{}Pt.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Bu.VISIBLE}},Pt.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Bu.VISIBLE}},Pt.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Bu.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:sp.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:KE.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},Pt.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Bu.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:ZE.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:fv.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:jo.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:fv.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:JE.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:jo.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:XE.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[QE.HORIZONTAL]}},Pt.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:Bu.VISIBLE}},Pt.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},Pt.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:Uu.MAP}},Pt.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:Uu.MAP},"line-width":{type:"number",minimum:0,default:1}},Pt.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:Uu.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:Uu.MAP}},Pt.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},Pt.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:Uu.MAP}};var yD,mD,gD,ea,vD;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.FILL_VERTEX=1]="FILL_VERTEX",e[e.FILL_DD_VERTEX=2]="FILL_DD_VERTEX",e[e.FILL_INDEX=3]="FILL_INDEX",e[e.OUTLINE_VERTEX=4]="OUTLINE_VERTEX",e[e.OUTLINE_DD_VERTEX=5]="OUTLINE_DD_VERTEX",e[e.OUTLINE_INDEX=6]="OUTLINE_INDEX",e[e.LINE_VERTEX=7]="LINE_VERTEX",e[e.LINE_DD_VERTEX=8]="LINE_DD_VERTEX",e[e.LINE_INDEX=9]="LINE_INDEX",e[e.ICON_VERTEX=10]="ICON_VERTEX",e[e.ICON_DD_VERTEX=11]="ICON_DD_VERTEX",e[e.ICON_INDEX=12]="ICON_INDEX",e[e.TEXT_VERTEX=13]="TEXT_VERTEX",e[e.TEXT_DD_VERTEX=14]="TEXT_DD_VERTEX",e[e.TEXT_INDEX=15]="TEXT_INDEX",e[e.CIRCLE_VERTEX=16]="CIRCLE_VERTEX",e[e.CIRCLE_INDEX=17]="CIRCLE_INDEX"})(yD||(yD={})),function(e){e[e.FILL=1]="FILL",e[e.LINE=2]="LINE",e[e.SYMBOL=3]="SYMBOL",e[e.CIRCLE=4]="CIRCLE"}(mD||(mD={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.OPAQUE=1]="OPAQUE",e[e.TRANSLUCENT=2]="TRANSLUCENT",e[e.SYMBOLS=3]="SYMBOLS",e[e.HITTEST=4]="HITTEST"}(gD||(gD={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.FILL=1]="FILL",e[e.OUTLINE=2]="OUTLINE",e[e.LINE=3]="LINE",e[e.ICON=4]="ICON",e[e.CIRCLE=5]="CIRCLE",e[e.TEXT=6]="TEXT",e[e.TILEINFO=7]="TILEINFO"}(ea||(ea={})),function(e){e[e.PAINTER_CHANGED=0]="PAINTER_CHANGED",e[e.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",e[e.LAYER_CHANGED=2]="LAYER_CHANGED",e[e.LAYER_REMOVED=3]="LAYER_REMOVED",e[e.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(vD||(vD={}));class Zme{constructor(t){this._array=[],t<=0&&console.error("strideInBytes must be positive!"),this._stride=t}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(t,i){return 65535&t|i<<16}static i8888to32(t,i,r,n){return 255&t|(255&i)<<8|(255&r)<<16|n<<24}static i8816to32(t,i,r){return 255&t|(255&i)<<8|r<<16}}var oe,Vu;(function(e){e[e.R8_SIGNED=0]="R8_SIGNED",e[e.R8_UNSIGNED=1]="R8_UNSIGNED",e[e.R16_SIGNED=2]="R16_SIGNED",e[e.R16_UNSIGNED=3]="R16_UNSIGNED",e[e.R8G8_SIGNED=4]="R8G8_SIGNED",e[e.R8G8_UNSIGNED=5]="R8G8_UNSIGNED",e[e.R16G16_SIGNED=6]="R16G16_SIGNED",e[e.R16G16_UNSIGNED=7]="R16G16_UNSIGNED",e[e.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED",e[e.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED",e[e.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR",e[e.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY",e[e.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(oe||(oe={})),function(e){e[e.UNIFORM=0]="UNIFORM",e[e.DATA_DRIVEN=1]="DATA_DRIVEN",e[e.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN",e[e.UNUSED=3]="UNUSED"}(Vu||(Vu={}));var wD,bD,_D,SD,TD,ED,AD,Me,xD,CD,ID,MD,ND,RD,PD,$D,DD,LD,OD,kD,FD,BD;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(wD||(wD={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(bD||(bD={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(_D||(_D={})),function(e){e[e.ADD=32774]="ADD",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(SD||(SD={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"}(TD||(TD={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(ED||(ED={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(AD||(AD={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT"}(Me||(Me={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(xD||(xD={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(CD||(CD={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(ID||(ID={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(MD||(MD={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(ND||(ND={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(RD||(RD={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(PD||(PD={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}($D||($D={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(DD||(DD={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(LD||(LD={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(OD||(OD={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(kD||(kD={})),function(e){e[e.TEXTURE=0]="TEXTURE",e[e.RENDER_BUFFER=1]="RENDER_BUFFER",e[e.CUBEMAP=2]="CUBEMAP"}(FD||(FD={})),function(e){e[e.NONE=0]="NONE",e[e.DEPTH_RENDER_BUFFER=1]="DEPTH_RENDER_BUFFER",e[e.STENCIL_RENDER_BUFFER=2]="STENCIL_RENDER_BUFFER",e[e.DEPTH_STENCIL_RENDER_BUFFER=3]="DEPTH_STENCIL_RENDER_BUFFER",e[e.DEPTH_STENCIL_TEXTURE=4]="DEPTH_STENCIL_TEXTURE"}(BD||(BD={}));const cwe=33984;var UD,VD;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.Sync=7]="Sync",e[e.COUNT=8]="COUNT"})(UD||(UD={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(VD||(VD={}));const dwe=33306;var jD,zD,HD,GD,WD,qD,YD;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(jD||(jD={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(zD||(zD={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(HD||(HD={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(GD||(GD={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(WD||(WD={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(qD||(qD={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(YD||(YD={}));class di{constructor(t,i,r,n,o,s=!1,a=0){this.name=t,this.count=i,this.type=r,this.offset=n,this.stride=o,this.normalized=s,this.divisor=a}}class po{constructor(t){this._locations=new Map,this._key=t}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return this._locations.size===0&&this._buildAttributesInfo(),this._locations}getLayoutInfo(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(t,i,r,n,o){const s=this.getUniforms();for(const a of s){const{name:u,type:d,getValue:h}=a,f=h(r,i,n,o);if(f!==null)switch(d){case"float":t.setUniform1f(u,f);break;case"vec2":t.setUniform2fv(u,f);break;case"vec4":t.setUniform4fv(u,f)}}}encodeAttributes(t,i,r,n){var h;const o=this.attributesInfo(),s=this.getEncodingInfos(),a=[];let u=0,d=0;for(const f of Object.keys(s)){const y=s[f],{type:m,precisionFactor:g,isLayout:v}=o[f],w=v?r.getLayoutProperty(f):r.getPaintProperty(f),_=(h=w.interpolator)==null?void 0:h.getInterpolationRange(i);let A=0;for(const I of y){const{offset:D,bufferElementsToAdd:M}=I;if(M>0){for(let B=0;B<M;B++)a.push(0);u+=d,d=I.bufferElementsToAdd}const R=n!=null?n:w.getValue(_?_[A]:i,t);switch(m){case oe.R8_SIGNED:case oe.R8_UNSIGNED:a[u]|=this._encodeByte(R*(g||1),8*D);break;case oe.R16_SIGNED:case oe.R16_UNSIGNED:a[u]|=this._encodeShort(R*(g||1),8*D);break;case oe.R8G8_SIGNED:case oe.R8G8_UNSIGNED:a[u]|=this._encodeByte(R*(g||1),8*D),a[u]|=this._encodeByte(R*(g||1),8*D+8);break;case oe.R16G16_SIGNED:case oe.R16G16_UNSIGNED:a[u]|=this._encodeShort(R*(g||1),8*D),a[u]|=this._encodeShort(R*(g||1),8*D+16);break;case oe.R8G8B8A8_SIGNED:case oe.R8G8B8A8_UNSIGNED:a[u]|=this._encodeByte(R*(g||1),8*D),a[u]|=this._encodeByte(R*(g||1),8*D+8),a[u]|=this._encodeByte(R*(g||1),8*D+16),a[u]|=this._encodeByte(R*(g||1),8*D+24);break;case oe.R8G8B8A8_COLOR:a[u]=this._encodeColor(R);break;case oe.R16G16B16A16_DASHARRAY:case oe.R16G16B16A16_PATTERN:this._encodePattern(u,a,R);break;default:throw new Error("Unsupported encoding type")}A++}}return a}getAtributeState(t){let i=0;const r=3+2*t;return i|=this._bit(r),i|=this._bit(r+1)<<1,i}_buildAttributesInfo(){const t=[],i={},r={};let n=-1;const o=this.attributesInfo(),s=this.attributes();let a=-1;for(const f of s){a++;const y=this.getAtributeState(a);if(y===Vu.UNIFORM||y===Vu.UNUSED)continue;const m=o[f],g=[];i[f]=g;const v=m.type;for(let w=0;w<y;w++){const{dataType:_,bytesPerElement:A,count:I,normalized:D}=po._encodingInfo[v],M=A*I,R=`${_}-${D===!0}`;let B=r[R],j=0;if(!B||B.count+I>4)n++,B={dataIndex:n,count:0,offset:0},I!==4&&(r[R]=B),t.push({location:-1,name:"a_data_"+n,count:I,type:_,normalized:D}),j=Math.ceil(Math.max(M/4,1));else{const Y=t[B.dataIndex];Y.count+=I,j=Math.ceil(Math.max(Y.count*A/4,1))-Math.ceil(Math.max(B.offset/4,1))}g.push({dataIndex:B.dataIndex,offset:B.offset,bufferElementsToAdd:j}),B.offset+=M,B.count+=I}}for(const f of t)switch(f.type){case Me.BYTE:case Me.UNSIGNED_BYTE:f.count=4;break;case Me.SHORT:case Me.UNSIGNED_SHORT:f.count+=f.count%2}this._buildVertexBufferLayout(t);let u=0;const d=this._layoutInfo.geometry;for(const f of d)this._locations.set(f.name,u++);const h=this._layoutInfo.opacity;if(h)for(const f of h)this._locations.set(f.name,u++);this._buildShaderInfo(t,i),this._propertyEncodingInfo=i}_buildVertexBufferLayout(t){const i={},r=this.geometryInfo();let n=r[0].stride;if(t.length===0)i.geometry=r;else{const o=[];let s=n;for(const a of t)n+=KD(a.type)*a.count;for(const a of r)o.push(new di(a.name,a.count,a.type,a.offset,n,a.normalized));for(const a of t)o.push(new di(a.name,a.count,a.type,s,n,a.normalized)),s+=KD(a.type)*a.count;i.geometry=o}this.opacityInfo()&&(i.opacity=this.opacityInfo()),this._layoutInfo=i,this._stride=n}_buildShaderInfo(t,i){let r=`
`,n=`
`;const o=[];for(const d of t)r+=`attribute ${this._getType(d.count)} ${d.name};
`;const s=this.attributes(),a=this.attributesInfo();let u=-1;for(const d of s){u++;const{name:h,type:f,precisionFactor:y,isLayout:m}=a[d],g=y&&y!==1?" * "+1/y:"",{bytesPerElement:v,count:w}=po._encodingInfo[f],_=A=>`a_data_${A.dataIndex}${Jme(w,A.offset,v)}`;switch(this.getAtributeState(u)){case Vu.UNIFORM:{const A=this._getType(w),I=`u_${h}`;o.push({name:I,type:A,getValue:(D,M,R,B)=>{const j=m?D.getLayoutValue(d,M):D.getPaintValue(d,M);if(f===oe.R16G16B16A16_DASHARRAY){const Y=D.getDashKey(j,D.getLayoutValue("line-cap",M)),ee=B.getMosaicItemPosition(Y,!1);if(O(ee))return null;const{tl:re,br:ue}=ee;return[re[0],ue[1],ue[0],re[1]]}if(f===oe.R16G16B16A16_PATTERN){const Y=B.getMosaicItemPosition(j,!d.includes("line-"));if(O(Y))return null;const{tl:ee,br:re}=Y;return[ee[0],re[1],re[0],ee[1]]}if(f===oe.R8G8B8A8_COLOR){const Y=j[3];return[Y*j[0],Y*j[1],Y*j[2],Y]}return j}}),r+=`uniform ${A} ${I};
`,n+=`${A} ${h} = ${I};
`}break;case Vu.DATA_DRIVEN:{const A=_(i[d][0]);n+=`${this._getType(w)} ${h} = ${A}${g};
`}break;case Vu.INTERPOLATED_DATA_DRIVEN:{const A=`u_t_${h}`;o.push({name:A,type:"float",getValue:(M,R,B,j)=>(m?M.getLayoutProperty(d):M.getPaintProperty(d)).interpolator.interpolationUniformValue(B,R)}),r+=`uniform float ${A};
`;const I=_(i[d][0]),D=_(i[d][1]);n+=`${this._getType(w)} ${h} = mix(${I}${g}, ${D}${g}, ${A});
`}}}this._shaderHeader=r,this._shaderMain=n,this._uniforms=o}_bit(t){return(this._key&1<<t)>>t}_getType(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}_encodeColor(t){const i=255*t[3];return Zme.i8888to32(t[0]*i,t[1]*i,t[2]*i,i)}_encodePattern(t,i,r){if(!r||!r.rect)return;const n=2,o=r.rect,s=r.width,a=r.height;i[t]=this._encodeShort(o.x+n,0),i[t]|=this._encodeShort(o.y+n+a,16),i[t+1]=this._encodeShort(o.x+n+s,0),i[t+1]|=this._encodeShort(o.y+n,16)}_encodeByte(t,i){return(255&t)<<i}_encodeShort(t,i){return(65535&t)<<i}}po._encodingInfo={[oe.R8_SIGNED]:{dataType:Me.BYTE,bytesPerElement:1,count:1,normalized:!1},[oe.R8_UNSIGNED]:{dataType:Me.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[oe.R16_SIGNED]:{dataType:Me.SHORT,bytesPerElement:2,count:1,normalized:!1},[oe.R16_UNSIGNED]:{dataType:Me.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[oe.R8G8_SIGNED]:{dataType:Me.BYTE,bytesPerElement:1,count:2,normalized:!1},[oe.R8G8_UNSIGNED]:{dataType:Me.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[oe.R16G16_SIGNED]:{dataType:Me.SHORT,bytesPerElement:2,count:2,normalized:!1},[oe.R16G16_UNSIGNED]:{dataType:Me.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[oe.R8G8B8A8_SIGNED]:{dataType:Me.BYTE,bytesPerElement:1,count:4,normalized:!1},[oe.R8G8B8A8_UNSIGNED]:{dataType:Me.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[oe.R8G8B8A8_COLOR]:{dataType:Me.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[oe.R16G16B16A16_DASHARRAY]:{dataType:Me.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[oe.R16G16B16A16_PATTERN]:{dataType:Me.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const KD=e=>{switch(e){case Me.FLOAT:case Me.INT:case Me.UNSIGNED_INT:return 4;case Me.SHORT:case Me.UNSIGNED_SHORT:return 2;case Me.BYTE:case Me.UNSIGNED_BYTE:return 1}},Jme=(e,t,i)=>{const r=t/i;if(e===1)switch(r){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(e===2)switch(r){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(e===3)switch(r){case 0:return".xyz";case 1:return".yzw"}return""};class zo extends po{constructor(t){super(t)}geometryInfo(){return zo.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return zo.ATTRIBUTES}attributesInfo(){return zo.ATTRIBUTES_INFO}}zo.ATTRIBUTES=[],zo.GEOMETRY_LAYOUT=[new di("a_pos",2,Me.BYTE,0,2)],zo.ATTRIBUTES_INFO={};class Ho extends po{constructor(t){super(t)}geometryInfo(){return Ho.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return Ho.ATTRIBUTES}attributesInfo(){return Ho.ATTRIBUTES_INFO}}Ho.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],Ho.GEOMETRY_LAYOUT=[new di("a_pos",2,Me.SHORT,0,4)],Ho.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:oe.R8_UNSIGNED},"circle-color":{name:"color",type:oe.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:oe.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:oe.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:oe.R8_UNSIGNED,precisionFactor:32}};class Go extends po{constructor(t){super(t)}geometryInfo(){return Go.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return Go.ATTRIBUTES}attributesInfo(){return Go.ATTRIBUTES_INFO}}Go.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],Go.GEOMETRY_LAYOUT=[new di("a_pos",2,Me.SHORT,0,4)],Go.ATTRIBUTES_INFO={"fill-color":{name:"color",type:oe.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:oe.R16G16B16A16_PATTERN,isOptional:!0}};class Ii extends po{constructor(t,i){super(t),this.usefillColor=i}geometryInfo(){return Ii.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this.usefillColor?Ii.ATTRIBUTES_FILL:Ii.ATTRIBUTES_OUTLINE}attributesInfo(){return this.usefillColor?Ii.ATTRIBUTES_INFO_FILL:Ii.ATTRIBUTES_INFO_OUTLINE}}Ii.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],Ii.ATTRIBUTES_FILL=["fill-color","fill-opacity"],Ii.GEOMETRY_LAYOUT=[new di("a_pos",2,Me.SHORT,0,8),new di("a_offset",2,Me.BYTE,4,8),new di("a_xnormal",2,Me.BYTE,6,8)],Ii.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:oe.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100}},Ii.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:oe.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100}};class Wo extends po{constructor(t){super(t)}geometryInfo(){return Wo.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return Wo.ATTRIBUTES}attributesInfo(){return Wo.ATTRIBUTES_INFO}}Wo.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],Wo.GEOMETRY_LAYOUT=[new di("a_pos",2,Me.SHORT,0,16),new di("a_extrude_offset",4,Me.BYTE,4,16),new di("a_dir_normal",4,Me.BYTE,8,16),new di("a_accumulatedDistance",2,Me.UNSIGNED_SHORT,12,16)],Wo.ATTRIBUTES_INFO={"line-width":{name:"width",type:oe.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:oe.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:oe.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:oe.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:oe.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:oe.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:oe.R16G16B16A16_DASHARRAY,isOptional:!0}};const lU=[new di("a_pos",2,Me.SHORT,0,16),new di("a_vertexOffset",2,Me.SHORT,4,16),new di("a_texAngleRange",4,Me.UNSIGNED_BYTE,8,16),new di("a_levelInfo",4,Me.UNSIGNED_BYTE,12,16)],uU=[new di("a_opacityInfo",1,Me.UNSIGNED_BYTE,0,1)];class Cl extends po{constructor(t){super(t)}geometryInfo(){return lU}opacityInfo(){return uU}attributes(){return Cl.ATTRIBUTES}attributesInfo(){return Cl.ATTRIBUTES_INFO}}Cl.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],Cl.ATTRIBUTES_INFO={"icon-color":{name:"color",type:oe.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:oe.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:oe.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:oe.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:oe.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class Il extends po{constructor(t){super(t)}geometryInfo(){return lU}opacityInfo(){return uU}attributes(){return Il.ATTRIBUTES}attributesInfo(){return Il.ATTRIBUTES_INFO}}Il.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],Il.ATTRIBUTES_INFO={"text-color":{name:"color",type:oe.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:oe.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:oe.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:oe.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:oe.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:oe.R8_UNSIGNED,isLayout:!0}};const pwe=Number.POSITIVE_INFINITY,Z3=Math.PI,hwe=2*Z3,Xme=128/Z3,fwe=Z3/180,Qme=1/Math.LN2;function e0e(e,t){return(e%=t)>=0?e:e+t}function ywe(e){return e0e(e*Xme,256)}function mwe(e){return Math.log(e)*Qme}function Fi(e,t,i){return e*(1-i)+t*i}const cU={kind:"null"},wt={kind:"number"},Br={kind:"string"},yi={kind:"boolean"},ta={kind:"color"},Rw={kind:"object"},Ks={kind:"value"};function vm(e,t){return{kind:"array",itemType:e,n:t}}const t0e=[cU,wt,Br,yi,ta,Rw,vm(Ks)];function Mp(e){if(e.kind==="array"){const t=Mp(e.itemType);return typeof e.n=="number"?`array<${t}, ${e.n}>`:e.itemType.kind==="value"?"array":`array<${t}>`}return e.kind}function Pw(e){if(e===null)return cU;if(typeof e=="string")return Br;if(typeof e=="boolean")return yi;if(typeof e=="number")return wt;if(e instanceof ie)return ta;if(Array.isArray(e)){let t;for(const i of e){const r=Pw(i);if(t){if(t!==r){t=Ks;break}}else t=r}return vm(t||Ks,e.length)}return typeof e=="object"?Rw:Ks}function eA(e,t){if(t.kind==="array")return e.kind==="array"&&(e.n===0&&e.itemType.kind==="value"||eA(e.itemType,t.itemType))&&(typeof t.n!="number"||t.n===e.n);if(t.kind==="value"){for(const i of t0e)if(eA(e,i))return!0}return t.kind===e.kind}function tA(e){if(e===null)return"";const t=typeof e;return t==="string"?e:t==="number"||t==="boolean"?String(e):e instanceof ie?e.toString():JSON.stringify(e)}class Kg{constructor(t,i){this.x=t,this.y=i}clone(){return new Kg(this.x,this.y)}equals(t,i){return t===this.x&&i===this.y}isEqual(t){return t.x===this.x&&t.y===this.y}setCoords(t,i){this.x=t,this.y=i}normalize(){const t=this.x,i=this.y,r=Math.sqrt(t*t+i*i);this.x/=r,this.y/=r}rightPerpendicular(){const t=this.x;this.x=this.y,this.y=-t}move(t,i){this.x+=t,this.y+=i}assign(t){this.x=t.x,this.y=t.y}assignAdd(t,i){this.x=t.x+i.x,this.y=t.y+i.y}assignSub(t,i){this.x=t.x-i.x,this.y=t.y-i.y}rotate(t,i){const r=this.x,n=this.y;this.x=r*t-n*i,this.y=r*i+n*t}scale(t){this.x*=t,this.y*=t}length(){const t=this.x,i=this.y;return Math.sqrt(t*t+i*i)}static distance(t,i){const r=i.x-t.x,n=i.y-t.y;return Math.sqrt(r*r+n*n)}static add(t,i){return new Kg(t.x+i.x,t.y+i.y)}static sub(t,i){return new Kg(t.x-i.x,t.y-i.y)}}var ny;(function(e){e[e.Unknown=0]="Unknown",e[e.Point=1]="Point",e[e.LineString=2]="LineString",e[e.Polygon=3]="Polygon"})(ny||(ny={}));class i0e{constructor(t){this.parent=t,this.vars={}}add(t,i){this.vars[t]=i}get(t){return this.vars[t]?this.vars[t]:this.parent?this.parent.get(t):null}}class J3{constructor(){this.type=Ks}static parse(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new J3}evaluate(t,i){return t==null?void 0:t.id}}class X3{constructor(){this.type=Br}static parse(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new X3}evaluate(t,i){if(!t)return null;switch(t.type){case ny.Point:return"Point";case ny.LineString:return"LineString";case ny.Polygon:return"Polygon";default:return null}}}class Q3{constructor(){this.type=Rw}static parse(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new Q3}evaluate(t,i){return t==null?void 0:t.values}}class $w{constructor(){this.type=wt}static parse(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new $w}evaluate(t,i){return i}}class gr{constructor(t,i,r){this.lhs=t,this.rhs=i,this.compare=r,this.type=yi}static parse(t,i,r){if(t.length!==3&&t.length!==4)throw new Error(`"${t[0]}" expects 2 or 3 arguments`);if(t.length===4)throw new Error(`"${t[0]}" collator not supported`);return new gr(_e(t[1],i),_e(t[2],i),r)}evaluate(t,i){return this.compare(this.lhs.evaluate(t,i),this.rhs.evaluate(t,i))}}class r0e extends gr{static parse(t,i){return gr.parse(t,i,(r,n)=>r===n)}}class n0e extends gr{static parse(t,i){return gr.parse(t,i,(r,n)=>r!==n)}}class o0e extends gr{static parse(t,i){return gr.parse(t,i,(r,n)=>r<n)}}class s0e extends gr{static parse(t,i){return gr.parse(t,i,(r,n)=>r<=n)}}class a0e extends gr{static parse(t,i){return gr.parse(t,i,(r,n)=>r>n)}}class l0e extends gr{static parse(t,i){return gr.parse(t,i,(r,n)=>r>=n)}}class eC{constructor(t){this.arg=t,this.type=yi}static parse(t,i){if(t.length!==2)throw new Error('"!" expects 1 argument');return new eC(_e(t[1],i))}evaluate(t,i){return!this.arg.evaluate(t,i)}}class tC{constructor(t){this.args=t,this.type=yi}static parse(t,i){const r=[];for(let n=1;n<t.length;n++)r.push(_e(t[n],i));return new tC(r)}evaluate(t,i){for(const r of this.args)if(!r.evaluate(t,i))return!1;return!0}}class iC{constructor(t){this.args=t,this.type=yi}static parse(t,i){const r=[];for(let n=1;n<t.length;n++)r.push(_e(t[n],i));return new iC(r)}evaluate(t,i){for(const r of this.args)if(r.evaluate(t,i))return!0;return!1}}class rC{constructor(t){this.args=t,this.type=yi}static parse(t,i){const r=[];for(let n=1;n<t.length;n++)r.push(_e(t[n],i));return new rC(r)}evaluate(t,i){for(const r of this.args)if(r.evaluate(t,i))return!1;return!0}}class nC{constructor(t,i,r){this.type=t,this.args=i,this.fallback=r}static parse(t,i,r){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');let n;const o=[];for(let a=1;a<t.length-1;a+=2){const u=_e(t[a],i),d=_e(t[a+1],i,r);n||(n=d.type),o.push({condition:u,output:d})}const s=_e(t[t.length-1],i,r);return n||(n=s.type),new nC(n,o,s)}evaluate(t,i){for(const r of this.args)if(r.condition.evaluate(t,i))return r.output.evaluate(t,i);return this.fallback.evaluate(t,i)}}class oC{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');let r;const n=[];for(let o=1;o<t.length;o++){const s=_e(t[o],i);r||(r=s.type),n.push(s)}return new oC(r,n)}evaluate(t,i){for(const r of this.args){const n=r.evaluate(t,i);if(n!==null)return n}return null}}class sC{constructor(t,i,r,n,o){this.type=t,this.input=i,this.labels=r,this.outputs=n,this.fallback=o}static parse(t,i){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');let r;const n=_e(t[1],i),o=[],s={};let a;for(let u=2;u<t.length-1;u+=2){let d=t[u];Array.isArray(d)||(d=[d]);for(const f of d){const y=typeof f;if(y!=="string"&&y!=="number")throw new Error('"match" requires string or number literal as labels');if(a){if(y!==a)throw new Error('"match" requires labels to have the same type')}else a=y;s[f]=o.length}const h=_e(t[u+1],i);r||(r=h.type),o.push(h)}return new sC(r,n,s,o,_e(t[t.length-1],i))}evaluate(t,i){const r=this.input.evaluate(t,i);return(this.outputs[this.labels[r]]||this.fallback).evaluate(t,i)}}class Qn{constructor(t,i,r,n,o){this.operator=t,this.type=i,this.interpolation=r,this.input=n,this.stops=o}static parse(t,i,r){const n=t[0];if(t.length<5)throw new Error(`"${n}" expects at least 4 arguments`);const o=t[1];if(!Array.isArray(o)||o.length===0)throw new Error(`"${o}" is not a valid interpolation`);switch(o[0]){case"linear":if(o.length!==1)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(o.length!==2||typeof o[1]!="number")throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(o.length!==5)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(let d=1;d<5;d++){const h=o[d];if(typeof h!="number"||h<0||h>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error(`"${t[0]}" unknown interpolation type "${o[0]}"`)}if(t.length%2!=1)throw new Error(`"${n}" expects an even number of arguments`);const s=_e(t[2],i,wt);let a;n==="interpolate-hcl"||n==="interpolate-lab"?a=ta:r&&r.kind!=="value"&&(a=r);const u=[];for(let d=3;d<t.length;d+=2){const h=t[d];if(typeof h!="number")throw new Error(`"${n}" requires stop inputs as literal numbers`);if(u.length&&u[u.length-1][0]>=h)throw new Error(`"${n}" requires strictly ascending stop inputs`);const f=_e(t[d+1],i,a);a||(a=f.type),u.push([h,f])}if(a&&a!==ta&&a!==wt&&(a.kind!=="array"||a.itemType!==wt))throw new Error(`"${n}" cannot interpolate type ${Mp(a)}`);return new Qn(n,a,o,s,u)}evaluate(t,i){const r=this.stops;if(r.length===1)return r[0][1].evaluate(t,i);const n=this.input.evaluate(t,i);if(n<=r[0][0])return r[0][1].evaluate(t,i);if(n>=r[r.length-1][0])return r[r.length-1][1].evaluate(t,i);let o=0;for(;++o<r.length&&!(n<r[o][0]););const s=r[o-1][0],a=r[o][0],u=Qn.interpolationRatio(this.interpolation,n,s,a),d=r[o-1][1].evaluate(t,i),h=r[o][1].evaluate(t,i);if(this.operator==="interpolate"){if(this.type.kind==="array"&&Array.isArray(d)&&Array.isArray(h))return d.map((f,y)=>Fi(f,h[y],u));if(this.type.kind==="color"&&d instanceof ie&&h instanceof ie){const f=new ie(d),y=new ie(h);return new ie([Fi(f.r,y.r,u),Fi(f.g,y.g,u),Fi(f.b,y.b,u),Fi(f.a,y.a,u)])}if(this.type.kind==="number"&&typeof d=="number"&&typeof h=="number")return Fi(d,h,u);throw new Error(`"${this.operator}" cannot interpolate type ${Mp(this.type)}`)}if(this.operator==="interpolate-hcl"){const f=JR(d),y=JR(h),m=y.h-f.h,g=Oy({h:f.h+u*(m>180||m<-180?m-360*Math.round(m/360):m),c:Fi(f.c,y.c,u),l:Fi(f.l,y.l,u)});return new ie({a:Fi(d.a,h.a,u),...g})}if(this.operator==="interpolate-lab"){const f=ZR(d),y=ZR(h),m=Oy({l:Fi(f.l,y.l,u),a:Fi(f.a,y.a,u),b:Fi(f.b,y.b,u)});return new ie({a:Fi(d.a,h.a,u),...m})}throw new Error(`Unexpected operator "${this.operator}"`)}interpolationUniformValue(t,i){const r=this.stops;if(r.length===1||t>=r[r.length-1][0])return 0;let n=0;for(;++n<r.length&&!(t<r[n][0]););const o=r[n-1][0],s=r[n][0];return Qn.interpolationRatio(this.interpolation,i,o,s)}getInterpolationRange(t){const i=this.stops;if(i.length===1){const o=i[0][0];return[o,o]}const r=i[i.length-1][0];if(t>=r)return[r,r];let n=0;for(;++n<i.length&&!(t<i[n][0]););return[i[n-1][0],i[n][0]]}static interpolationRatio(t,i,r,n){let o=0;return t[0]==="linear"?o=Qn._exponentialInterpolationRatio(i,1,r,n):t[0]==="exponential"?o=Qn._exponentialInterpolationRatio(i,t[1],r,n):t[0]==="cubic-bezier"&&(o=cl(t[1],t[2],t[3],t[4])(Qn._exponentialInterpolationRatio(i,1,r,n),1e-5)),o<0?o=0:o>1&&(o=1),o}static _exponentialInterpolationRatio(t,i,r,n){const o=n-r;if(o===0)return 0;const s=t-r;return i===1?s/o:(i**s-1)/(i**o-1)}}class aC{constructor(t,i,r){this.type=t,this.input=i,this.stops=r}static parse(t,i){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');const r=_e(t[1],i,wt);let n;const o=[];o.push([-1/0,_e(t[2],i)]);for(let s=3;s<t.length;s+=2){const a=t[s];if(typeof a!="number")throw new Error('"step" requires stop inputs as literal numbers');if(o.length&&o[o.length-1][0]>=a)throw new Error('"step" requires strictly ascending stop inputs');const u=_e(t[s+1],i);n||(n=u.type),o.push([a,u])}return new aC(n,r,o)}evaluate(t,i){const r=this.stops;if(r.length===1)return r[0][1].evaluate(t,i);const n=this.input.evaluate(t,i);let o=0;for(;++o<r.length&&!(n<r[o][0]););return this.stops[o-1][1].evaluate(t,i)}}class lC{constructor(t,i){this.type=t,this.output=i}static parse(t,i,r){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');const n=new i0e(i);for(let s=1;s<t.length-1;s+=2){const a=t[s];if(typeof a!="string")throw new Error(`"let" requires a string to define variable names - found ${a}`);n.add(a,_e(t[s+1],i))}const o=_e(t[t.length-1],n,r);return new lC(o.type,o)}evaluate(t,i){return this.output.evaluate(t,i)}}class uC{constructor(t,i){this.type=t,this.output=i}static parse(t,i,r){if(t.length!==2||typeof t[1]!="string")throw new Error('"var" requires just one literal string argument');const n=i.get(t[1]);if(!n)throw new Error(`${t[1]} must be defined before being used in a "var" expression`);return new uC(r||Ks,n)}evaluate(t,i){return this.output.evaluate(t,i)}}class cC{constructor(t,i,r){this.type=t,this.index=i,this.array=r}static parse(t,i){if(t.length!==3)throw new Error('"at" expects 2 arguments');const r=_e(t[1],i,wt),n=_e(t[2],i);return new cC(n.type.itemType,r,n)}evaluate(t,i){const r=this.index.evaluate(t,i),n=this.array.evaluate(t,i);if(r<0||r>=n.length)throw new Error('"at" index out of bounds');if(r!==Math.floor(r))throw new Error('"at" index must be an integer');return n[r]}}class yv{constructor(t,i){this.key=t,this.obj=i,this.type=Ks}static parse(t,i){let r,n;switch(t.length){case 2:return r=_e(t[1],i),new yv(r);case 3:return r=_e(t[1],i),n=_e(t[2],i),new yv(r,n);default:throw new Error('"get" expects 1 or 2 arguments')}}evaluate(t,i){const r=this.key.evaluate(t,i);return this.obj?this.obj.evaluate(t,i)[r]:t==null?void 0:t.values[r]}}class mv{constructor(t,i){this.key=t,this.obj=i,this.type=yi}static parse(t,i){let r,n;switch(t.length){case 2:return r=_e(t[1],i),new mv(r);case 3:return r=_e(t[1],i),n=_e(t[2],i),new mv(r,n);default:throw new Error('"has" expects 1 or 2 arguments')}}evaluate(t,i){const r=this.key.evaluate(t,i);return this.obj?r in this.obj.evaluate(t,i):!!(t!=null&&t.values[r])}}class dC{constructor(t,i){this.key=t,this.vals=i,this.type=yi}static parse(t,i){if(t.length!==3)throw new Error('"in" expects 2 arguments');return new dC(_e(t[1],i),_e(t[2],i))}evaluate(t,i){const r=this.key.evaluate(t,i);return this.vals.evaluate(t,i).includes(r)}}class gv{constructor(t,i,r){this.item=t,this.array=i,this.from=r,this.type=wt}static parse(t,i){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');const r=_e(t[1],i),n=_e(t[2],i);if(t.length===4){const o=_e(t[3],i,wt);return new gv(r,n,o)}return new gv(r,n)}evaluate(t,i){const r=this.item.evaluate(t,i),n=this.array.evaluate(t,i);if(this.from){const o=this.from.evaluate(t,i);if(o!==Math.floor(o))throw new Error('"index-of" index must be an integer');return n.indexOf(r,o)}return n.indexOf(r)}}class pC{constructor(t){this.arg=t,this.type=wt}static parse(t,i){if(t.length!==2)throw new Error('"length" expects 2 arguments');const r=_e(t[1],i);return new pC(r)}evaluate(t,i){const r=this.arg.evaluate(t,i);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Error('"length" expects string or array')}}class vv{constructor(t,i,r,n){this.type=t,this.array=i,this.from=r,this.to=n}static parse(t,i){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');const r=_e(t[1],i),n=_e(t[2],i,wt);if(n.type!==wt)throw new Error('"slice" index must return a number');if(t.length===4){const o=_e(t[3],i,wt);if(o.type!==wt)throw new Error('"slice" index must return a number');return new vv(r.type,r,n,o)}return new vv(r.type,r,n)}evaluate(t,i){const r=this.array.evaluate(t,i);if(!Array.isArray(r)&&typeof r!="string")throw new Error('"slice" input must be an array or a string');const n=this.from.evaluate(t,i);if(n<0||n>=r.length)throw new Error('"slice" index out of bounds');if(n!==Math.floor(n))throw new Error('"slice" index must be an integer');if(this.to){const o=this.to.evaluate(t,i);if(o<0||o>=r.length)throw new Error('"slice" index out of bounds');if(o!==Math.floor(o))throw new Error('"slice" index must be an integer');return r.slice(n,o)}return r.slice(n)}}class hC{constructor(){this.type=yi}static parse(t){if(t.length!==1)throw new Error('"has-id" expects no arguments');return new hC}evaluate(t,i){return t&&t.id!==void 0}}class Yi{constructor(t,i){this.args=t,this.calculate=i,this.type=wt}static parse(t,i,r){const n=t.slice(1).map(o=>_e(o,i));return new Yi(n,r)}evaluate(t,i){let r;return this.args&&(r=this.args.map(n=>n.evaluate(t,i))),this.calculate(r)}}class u0e extends Yi{static parse(t,i){switch(t.length){case 2:return Yi.parse(t,i,r=>-r[0]);case 3:return Yi.parse(t,i,r=>r[0]-r[1]);default:throw new Error('"-" expects 1 or 2 arguments')}}}class c0e extends Yi{static parse(t,i){return Yi.parse(t,i,r=>{let n=1;for(const o of r)n*=o;return n})}}class d0e extends Yi{static parse(t,i){if(t.length===3)return Yi.parse(t,i,r=>r[0]/r[1]);throw new Error('"/" expects 2 arguments')}}class p0e extends Yi{static parse(t,i){if(t.length===3)return Yi.parse(t,i,r=>r[0]%r[1]);throw new Error('"%" expects 2 arguments')}}class h0e extends Yi{static parse(t,i){if(t.length===3)return Yi.parse(t,i,r=>r[0]**r[1]);throw new Error('"^" expects 1 or 2 arguments')}}class f0e extends Yi{static parse(t,i){return Yi.parse(t,i,r=>{let n=0;for(const o of r)n+=o;return n})}}class gt{constructor(t,i){this.args=t,this.calculate=i,this.type=wt}static parse(t,i){const r=t.slice(1).map(n=>_e(n,i));return new gt(r,gt.ops[t[0]])}evaluate(t,i){let r;return this.args&&(r=this.args.map(n=>n.evaluate(t,i))),this.calculate(r)}}gt.ops={abs:e=>Math.abs(e[0]),acos:e=>Math.acos(e[0]),asin:e=>Math.asin(e[0]),atan:e=>Math.atan(e[0]),ceil:e=>Math.ceil(e[0]),cos:e=>Math.cos(e[0]),e:()=>Math.E,floor:e=>Math.floor(e[0]),ln:e=>Math.log(e[0]),ln2:()=>Math.LN2,log10:e=>Math.log(e[0])/Math.LN10,log2:e=>Math.log(e[0])/Math.LN2,max:e=>Math.max(...e),min:e=>Math.min(...e),pi:()=>Math.PI,round:e=>Math.round(e[0]),sin:e=>Math.sin(e[0]),sqrt:e=>Math.sqrt(e[0]),tan:e=>Math.tan(e[0])};class fC{constructor(t){this.args=t,this.type=Br}static parse(t,i){return new fC(t.slice(1).map(r=>_e(r,i)))}evaluate(t,i){return this.args.map(r=>r.evaluate(t,i)).join("")}}class Np{constructor(t,i){this.arg=t,this.calculate=i,this.type=Br}static parse(t,i){if(t.length!==2)throw new Error(`${t[0]} expects 1 argument`);const r=_e(t[1],i);return new Np(r,Np.ops[t[0]])}evaluate(t,i){return this.calculate(this.arg.evaluate(t,i))}}Np.ops={downcase:e=>e.toLowerCase(),upcase:e=>e.toUpperCase()};class yC{constructor(t){this.args=t,this.type=ta}static parse(t,i){if(t.length!==4)throw new Error('"rgb" expects 3 arguments');const r=t.slice(1).map(n=>_e(n,i));return new yC(r)}evaluate(t,i){const r=this._validate(this.args[0].evaluate(t,i)),n=this._validate(this.args[1].evaluate(t,i)),o=this._validate(this.args[2].evaluate(t,i));return new ie({r,g:n,b:o})}_validate(t){if(typeof t!="number"||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}}class mC{constructor(t){this.args=t,this.type=ta}static parse(t,i){if(t.length!==5)throw new Error('"rgba" expects 4 arguments');const r=t.slice(1).map(n=>_e(n,i));return new mC(r)}evaluate(t,i){const r=this._validate(this.args[0].evaluate(t,i)),n=this._validate(this.args[1].evaluate(t,i)),o=this._validate(this.args[2].evaluate(t,i)),s=this._validateAlpha(this.args[3].evaluate(t,i));return new ie({r,g:n,b:o,a:s})}_validate(t){if(typeof t!="number"||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}_validateAlpha(t){if(typeof t!="number"||t<0||t>1)throw new Error(`${t}: invalid alpha color component`);return t}}class gC{constructor(t){this.color=t,this.type=vm(wt,4)}static parse(t,i){if(t.length!==2)throw new Error('"to-rgba" expects 1 argument');const r=_e(t[1],i);return new gC(r)}evaluate(t,i){return new ie(this.color.evaluate(t,i)).toRgba()}}class ju{constructor(t,i){this.type=t,this.args=i}static parse(t,i){const r=t[0];if(t.length<2)throw new Error(`${r} expects at least one argument`);let n,o=1;if(r==="array"){if(t.length>2){switch(t[1]){case"string":n=Br;break;case"number":n=wt;break;case"boolean":n=yi;break;default:throw new Error('"array" type argument must be string, number or boolean')}o++}else n=Ks;let a;if(t.length>3){if(a=t[2],a!==null&&(typeof a!="number"||a<0||a!==Math.floor(a)))throw new Error('"array" length argument must be a positive integer literal');o++}n=vm(n,a)}else switch(r){case"string":n=Br;break;case"number":n=wt;break;case"boolean":n=yi;break;case"object":n=Rw}const s=[];for(;o<t.length;o++){const a=_e(t[o],i);s.push(a)}return new ju(n,s)}evaluate(t,i){let r;for(const n of this.args){const o=n.evaluate(t,i);if(r=Pw(o),eA(r,this.type))return o}throw new Error(`Expected ${Mp(this.type)} but got ${Mp(r)}`)}}class cn{constructor(t,i){this.type=t,this.args=i}static parse(t,i){const r=t[0],n=cn.types[r];if(n===yi||n===Br){if(t.length!==2)throw new Error(`${r} expects one argument`)}else if(t.length<2)throw new Error(`${r} expects at least one argument`);const o=[];for(let s=1;s<t.length;s++){const a=_e(t[s],i);o.push(a)}return new cn(n,o)}evaluate(t,i){if(this.type===yi)return Boolean(this.args[0].evaluate(t,i));if(this.type===Br)return tA(this.args[0].evaluate(t,i));if(this.type===wt){for(const r of this.args){const n=Number(r.evaluate(t,i));if(!isNaN(n))return n}return null}if(this.type===ta){for(const r of this.args)try{const n=cn.toColor(r.evaluate(t,i));if(n instanceof ie)return n}catch{}return null}}static toBoolean(t){return Boolean(t)}static toString(t){return tA(t)}static toNumber(t){const i=Number(t);if(isNaN(i))throw new Error(`"${t}" is not a number`);return i}static toColor(t){if(t instanceof ie)return t;if(typeof t=="string"){const i=ie.fromString(t);if(i)return i;throw new Error(`"${t}" is not a color`)}if(Array.isArray(t))return ie.fromArray(t);throw new Error(`"${t}" is not a color`)}}cn.types={"to-boolean":yi,"to-color":ta,"to-number":wt,"to-string":Br};class vC{constructor(t){this.val=t,this.type=Pw(t)}static parse(t){if(t.length!==2)throw new Error('"literal" expects 1 argument');return new vC(t[1])}evaluate(t,i){return this.val}}class wC{constructor(t){this.arg=t,this.type=Br}static parse(t,i){if(t.length!==2)throw new Error('"typeof" expects 1 argument');return new wC(_e(t[1],i))}evaluate(t,i){return Mp(Pw(this.arg.evaluate(t,i)))}}function _e(e,t,i){const r=typeof e;if(r==="string"||r==="boolean"||r==="number"||e===null){if(i)switch(i.kind){case"string":r!=="string"&&(e=cn.toString(e));break;case"number":r!=="number"&&(e=cn.toNumber(e));break;case"color":e=cn.toColor(e)}e=["literal",e]}if(!Array.isArray(e)||e.length===0)throw new Error("Expression must be a non empty array");const n=e[0];if(typeof n!="string")throw new Error("First element of expression must be a string");const o=dU[n];if(o===void 0)throw new Error(`Invalid expression operator "${n}"`);if(!o)throw new Error(`Unimplemented expression operator "${n}"`);return o.parse(e,t,i)}const dU={array:ju,boolean:ju,collator:null,format:null,image:null,literal:vC,number:ju,"number-format":null,object:ju,string:ju,"to-boolean":cn,"to-color":cn,"to-number":cn,"to-string":cn,typeof:wC,accumulated:null,"feature-state":null,"geometry-type":X3,id:J3,"line-progress":null,properties:Q3,at:cC,get:yv,has:mv,in:dC,"index-of":gv,length:pC,slice:vv,"!":eC,"!=":n0e,"<":o0e,"<=":s0e,"==":r0e,">":a0e,">=":l0e,all:tC,any:iC,case:nC,coalesce:oC,match:sC,within:null,interpolate:Qn,"interpolate-hcl":Qn,"interpolate-lab":Qn,step:aC,let:lC,var:uC,concat:fC,downcase:Np,"is-supported-script":null,"resolved-locale":null,upcase:Np,rgb:yC,rgba:mC,"to-rgba":gC,"-":u0e,"*":c0e,"/":d0e,"%":p0e,"^":h0e,"+":f0e,abs:gt,acos:gt,asin:gt,atan:gt,ceil:gt,cos:gt,e:gt,floor:gt,ln:gt,ln2:gt,log10:gt,log2:gt,max:gt,min:gt,pi:gt,round:gt,sin:gt,sqrt:gt,tan:gt,zoom:$w,"heatmap-density":null,"has-id":hC,none:rC};class ar{constructor(t){this._expression=t}filter(t,i){if(!this._expression)return!0;try{return this._expression.evaluate(t,i)}catch(r){return console.log(r.message),!0}}static createFilter(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{const i=_e(t,null,yi);return new ar(i)}catch(i){return console.log(i.message),null}}static isLegacyFilter(t){if(!Array.isArray(t)||t.length===0)return!0;switch(t[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return t.length===3&&typeof t[1]=="string"&&!Array.isArray(t[2]);case"in":return t.length>=3&&typeof t[1]=="string"&&!Array.isArray(t[2]);case"!in":case"none":case"!has":return!0;case"any":case"all":for(let i=1;i<t.length;i++)if(this.isLegacyFilter(t[i]))return!0;return!1;case"has":return t.length===2&&(t[1]==="$id"||t[1]==="$type");default:return!1}}static convertLegacyFilter(t){if(!Array.isArray(t)||t.length===0)return!0;const i=t[0];if(t.length===1)return i!=="any";switch(i){case"==":return ar.convertComparison("==",t[1],t[2]);case"!=":return ar.negate(ar.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return ar.convertComparison(i,t[1],t[2]);case"in":return ar.convertIn(t[1],t.slice(2));case"!in":return ar.negate(ar.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return ar.convertCombining(i,t.slice(1));case"has":return ar.convertHas(t[1]);case"!has":return ar.negate(ar.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}static convertComparison(t,i,r){switch(i){case"$type":return[t,["geometry-type"],r];case"$id":return[t,["id"],r];default:return[t,["get",i],r]}}static convertIn(t,i){switch(t){case"$type":return["in",["geometry-type"],["literal",i]];case"$id":return["in",["id"],["literal",i]];default:return["in",["get",t],["literal",i]]}}static convertHas(t){switch(t){case"$type":return!0;case"$id":return["has-id"];default:return["has",t]}}static convertCombining(t,i){return[t].concat(i.map(this.convertLegacyFilter))}static negate(t){return["!",t]}}class wv{constructor(t,i){let r;switch(this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":r=!0;break;case"array":r=t.value==="number";break;default:r=!1}if(i==null&&(i=t.default),Array.isArray(i)&&i.length>0&&dU[i[0]]){const o={number:wt,color:ta,string:Br,boolean:yi,enum:Br};try{const s=t.type==="array"?vm(o[t.value]||Ks,t.length):o[t.type],a=_e(i,null,s);this.getValue=this._buildExpression(a,t),this.isDataDriven=!0,a instanceof Qn&&a.input instanceof $w&&(this.interpolator=a)}catch(s){console.log(s.message),this.getValue=this._buildSimple(t.default)}return}r&&i.type==="interval"&&(r=!1);const n=i&&i.stops&&i.stops.length>0;if(n)for(const o of i.stops)o[1]=this._validate(o[1],t);if(this.isDataDriven=!!i&&!!i.property,this.isDataDriven)if(i.default!==void 0&&(i.default=this._validate(i.default,t)),n)switch(i.type){case"identity":this.getValue=this._buildIdentity(i,t);break;case"categorical":this.getValue=this._buildCategorical(i,t);break;default:this.getValue=r?this._buildInterpolate(i,t):this._buildInterval(i,t)}else this.getValue=this._buildIdentity(i,t);else n?this.getValue=r?this._buildZoomInterpolate(i):this._buildZoomInterval(i):(i=this._validate(i,t),this.getValue=this._buildSimple(i))}_validate(t,i){if(i.type==="number"){if(t<i.minimum)return i.minimum;if(t>i.maximum)return i.maximum}else i.type==="color"?t=wv._parseColor(t):i.type==="enum"?typeof t=="string"&&(t=i.values.indexOf(t)):i.type==="array"&&i.value==="enum"?t=t.map(r=>typeof r=="string"?i.values.indexOf(r):r):i.type==="string"&&(t=tA(t));return t}_buildSimple(t){return()=>t}_buildExpression(t,i){return(r,n)=>{try{const o=t.evaluate(n,r);return o===void 0?i.default:this._validate(o,i)}catch(o){return console.log(o.message),i.default}}}_buildIdentity(t,i){return(r,n)=>{let o;return n&&(o=n.values[t.property]),o!==void 0&&(o=this._validate(o,i)),o!=null?o:t.default!==void 0?t.default:i.default}}_buildCategorical(t,i){return(r,n)=>{let o;return n&&(o=n.values[t.property]),o=this._categorical(o,t.stops),o!==void 0?o:t.default!==void 0?t.default:i.default}}_buildInterval(t,i){return(r,n)=>{let o;return n&&(o=n.values[t.property]),typeof o=="number"?this._interval(o,t.stops):t.default!==void 0?t.default:i.default}}_buildInterpolate(t,i){return(r,n)=>{let o;return n&&(o=n.values[t.property]),typeof o=="number"?this._interpolate(o,t.stops,t.base||1):t.default!==void 0?t.default:i.default}}_buildZoomInterpolate(t){return i=>this._interpolate(i,t.stops,t.base||1)}_buildZoomInterval(t){return i=>this._interval(i,t.stops)}_categorical(t,i){const r=i.length;for(let n=0;n<r;n++)if(i[n][0]===t)return i[n][1]}_interval(t,i){const r=i.length;let n=0;for(let o=0;o<r&&i[o][0]<=t;o++)n=o;return i[n][1]}_interpolate(t,i,r){let n,o;const s=i.length;for(let a=0;a<s;a++){const u=i[a];if(!(u[0]<=t)){o=u;break}n=u}if(n&&o){const a=o[0]-n[0],u=t-n[0],d=r===1?u/a:(r**u-1)/(r**a-1);if(Array.isArray(n[1])){const h=n[1],f=o[1],y=[];for(let m=0;m<h.length;m++)y.push(Fi(h[m],f[m],d));return y}return Fi(n[1],o[1],d)}return n?n[1]:o?o[1]:void 0}static _isEmpty(t){for(const i in t)if(t.hasOwnProperty(i))return!1;return!0}static _parseColor(t){return Array.isArray(t)?t:(typeof t=="string"&&(t=new ie(t)),t instanceof ie&&!this._isEmpty(t)?ie.toUnitRGBA(t):void 0)}}const gwe=1e-30,vwe=4294967295,wwe=512,bwe=8,_we=10,Swe=29,Twe=24,Ewe=8,Awe={metrics:{width:15,height:17,left:0,top:-7,advance:14}},xwe=0,Cwe=0,Iwe=0,Mwe=1,Nwe=2,Rwe=3,Pwe=4,$we=5,Dwe=6,Lwe=12,Owe=5,kwe=6,Fwe=5,Bwe=6,Uwe=0,Vwe=1,jwe=2,zwe=3,Hwe=4,Gwe=2,Wwe=1,qwe=2,Ywe=4,y0e=1.05,Kwe=3,Zwe=5,Jwe=6,Xwe=1.15,Qwe=2,ebe=8,tbe=500,ibe=10,rbe=1024,nbe=2,obe=0,sbe=1,abe=4,lbe=8,ube=16,cbe=4,dbe=1,pbe=4;class wm{constructor(t,i,r,n){switch(this.type=t,this.typeName=i.type,this.id=i.id,this.source=i.source,this.sourceLayer=i["source-layer"],this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,this.filter=i.filter,this.layout=i.layout,this.paint=i.paint,this.z=r,this.uid=n,t){case Ct.BACKGROUND:this._layoutDefinition=Pt.backgroundLayoutDefinition,this._paintDefinition=Pt.backgroundPaintDefinition;break;case Ct.FILL:this._layoutDefinition=Pt.fillLayoutDefinition,this._paintDefinition=Pt.fillPaintDefinition;break;case Ct.LINE:this._layoutDefinition=Pt.lineLayoutDefinition,this._paintDefinition=Pt.linePaintDefinition;break;case Ct.SYMBOL:this._layoutDefinition=Pt.symbolLayoutDefinition,this._paintDefinition=Pt.symbolPaintDefinition;break;case Ct.CIRCLE:this._layoutDefinition=Pt.circleLayoutDefinition,this._paintDefinition=Pt.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return this._featureFilter!==void 0?this._featureFilter:this._featureFilter=ar.createFilter(this.filter)}getLayoutProperty(t){return this._layoutProperties[t]}getPaintProperty(t){return this._paintProperties[t]}getLayoutValue(t,i,r){let n;const o=this._layoutProperties[t];return o&&(n=o.getValue(i,r)),n===void 0&&(n=this._layoutDefinition[t].default),n}getPaintValue(t,i,r){let n;const o=this._paintProperties[t];return o&&(n=o.getValue(i,r)),n===void 0&&(n=this._paintDefinition[t].default),n}isPainterDataDriven(){const t=this._paintProperties;if(t){for(const i in t)if(t[i].isDataDriven)return!0}return!1}_parseLayout(t){const i={};for(const r in t){const n=this._layoutDefinition[r];n&&(i[r]=new wv(n,t[r]))}return i}_parsePaint(t){const i={};for(const r in t){const n=this._paintDefinition[r];n&&(i[r]=new wv(n,t[r]))}return i}computeAttributesKey(t,i,r,n){let o=0,s=0;for(const a of i){let u=3;if(!a||a!==n){const d=r[a],{isLayout:h,isOptional:f}=d,y=h?this.getLayoutProperty(a):this.getPaintProperty(a);u=y!=null&&y.interpolator?2:y!=null&&y.isDataDriven?1:f&&!y?3:0}s|=u<<o,o+=2}return s<<3|t}}class ZD extends wm{constructor(t,i,r,n){super(t,i,r,n),this.backgroundMaterial=new zo(this.computeAttributesKey(ea.BACKGROUND,zo.ATTRIBUTES,zo.ATTRIBUTES_INFO))}}class JD extends wm{constructor(t,i,r,n){super(t,i,r,n);const o=this.getPaintProperty("fill-color"),s=this.getPaintProperty("fill-opacity"),a=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=o==null?void 0:o.isDataDriven,this.hasDataDrivenOpacity=s==null?void 0:s.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||(a==null?void 0:a.isDataDriven);const u=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!u,this.hasDataDrivenOutlineColor=u==null?void 0:u.isDataDriven,this.hasDataDrivenOutline=u?u.isDataDriven:!!o&&o.isDataDriven,this.hasDataDrivenOutline=(u?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new Go(this.computeAttributesKey(ea.FILL,Go.ATTRIBUTES,Go.ATTRIBUTES_INFO)),this.outlineMaterial=new Ii(this.computeAttributesKey(ea.OUTLINE,this.outlineUsesFillColor?Ii.ATTRIBUTES_FILL:Ii.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?Ii.ATTRIBUTES_INFO_FILL:Ii.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}}class XD extends wm{constructor(t,i,r,n){var s,a,u,d,h,f,y,m,g;super(t,i,r,n);const o=this.getPaintProperty("line-pattern");if(this.lineMaterial=new Wo(this.computeAttributesKey(ea.LINE,Wo.ATTRIBUTES,Wo.ATTRIBUTES_INFO,o?"line-dasharray":"")),this.hasDataDrivenLine=((s=this.getPaintProperty("line-blur"))==null?void 0:s.isDataDriven)||((a=this.getPaintProperty("line-color"))==null?void 0:a.isDataDriven)||((u=this.getPaintProperty("line-gap-width"))==null?void 0:u.isDataDriven)||((d=this.getPaintProperty("line-offset"))==null?void 0:d.isDataDriven)||((h=this.getPaintProperty("line-opacity"))==null?void 0:h.isDataDriven)||((f=this.getPaintProperty("line-pattern"))==null?void 0:f.isDataDriven)||((y=this.getPaintProperty("line-dasharray"))==null?void 0:y.isDataDriven)||((m=this.getLayoutProperty("line-cap"))==null?void 0:m.isDataDriven)||((g=this.getPaintProperty("line-width"))==null?void 0:g.isDataDriven),this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const v=this.getPaintProperty("line-width");if(!v||typeof v=="number"&&.5*v<y0e){const w=this.getPaintProperty("line-offset");(!w||typeof w=="number"&&w===0)&&(this.canUseThinTessellation=!0)}}}getDashKey(t,i){let r;switch(i){case sp.BUTT:r="Butt";break;case sp.ROUND:r="Round";break;case sp.SQUARE:r="Square";break;default:r="Butt"}return`dasharray-[${t.toString()}]-${r}`}}class QD extends wm{constructor(t,i,r,n){var o,s,a,u,d,h,f,y,m,g,v,w;super(t,i,r,n),this.iconMaterial=new Cl(this.computeAttributesKey(ea.ICON,Cl.ATTRIBUTES,Cl.ATTRIBUTES_INFO)),this.textMaterial=new Il(this.computeAttributesKey(ea.TEXT,Il.ATTRIBUTES,Il.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=((o=this.getPaintProperty("icon-color"))==null?void 0:o.isDataDriven)||((s=this.getPaintProperty("icon-halo-blur"))==null?void 0:s.isDataDriven)||((a=this.getPaintProperty("icon-halo-color"))==null?void 0:a.isDataDriven)||((u=this.getPaintProperty("icon-halo-width"))==null?void 0:u.isDataDriven)||((d=this.getPaintProperty("icon-opacity"))==null?void 0:d.isDataDriven)||((h=this.getLayoutProperty("icon-size"))==null?void 0:h.isDataDriven),this.hasDataDrivenText=((f=this.getPaintProperty("text-color"))==null?void 0:f.isDataDriven)||((y=this.getPaintProperty("text-halo-blur"))==null?void 0:y.isDataDriven)||((m=this.getPaintProperty("text-halo-color"))==null?void 0:m.isDataDriven)||((g=this.getPaintProperty("text-halo-width"))==null?void 0:g.isDataDriven)||((v=this.getPaintProperty("text-opacity"))==null?void 0:v.isDataDriven)||((w=this.getLayoutProperty("text-size"))==null?void 0:w.isDataDriven)}}class e4 extends wm{constructor(t,i,r,n){super(t,i,r,n),this.circleMaterial=new Ho(this.computeAttributesKey(ea.CIRCLE,Ho.ATTRIBUTES,Ho.ATTRIBUTES_INFO))}}class hbe{constructor(t,i,r){let n;this.allowOverlap=t.getLayoutValue("icon-allow-overlap",i),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",i),this.keepUpright=t.getLayoutValue("icon-keep-upright",i),this.optional=t.getLayoutValue("icon-optional",i),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",i),this.rotationAlignment===jo.AUTO&&(this.rotationAlignment=r?jo.MAP:jo.VIEWPORT),n=t.getLayoutProperty("icon-anchor"),n!=null&&n.isDataDriven?this._anchorProp=n:this.anchor=t.getLayoutValue("icon-anchor",i),n=t.getLayoutProperty("icon-offset"),n!=null&&n.isDataDriven?this._offsetProp=n:this.offset=t.getLayoutValue("icon-offset",i),n=t.getLayoutProperty("icon-padding"),n!=null&&n.isDataDriven?this._paddingProp=n:this.padding=t.getLayoutValue("icon-padding",i),n=t.getLayoutProperty("icon-rotate"),n!=null&&n.isDataDriven?this._rotateProp=n:this.rotate=t.getLayoutValue("icon-rotate",i),n=t.getLayoutProperty("icon-size"),n!=null&&n.isDataDriven?this._sizeProp=n:this.size=t.getLayoutValue("icon-size",i)}update(t,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,i))}}class fbe{constructor(t,i,r){let n;this.allowOverlap=t.getLayoutValue("text-allow-overlap",i),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",i),this.keepUpright=t.getLayoutValue("text-keep-upright",i),this.optional=t.getLayoutValue("text-optional",i),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",i),this.rotationAlignment===jo.AUTO&&(this.rotationAlignment=r?jo.MAP:jo.VIEWPORT),n=t.getLayoutProperty("text-anchor"),n!=null&&n.isDataDriven?this._anchorProp=n:this.anchor=t.getLayoutValue("text-anchor",i),n=t.getLayoutProperty("text-justify"),n!=null&&n.isDataDriven?this._justifyProp=n:this.justify=t.getLayoutValue("text-justify",i),n=t.getLayoutProperty("text-letter-spacing"),n!=null&&n.isDataDriven?this._letterSpacingProp=n:this.letterSpacing=t.getLayoutValue("text-letter-spacing",i),n=t.getLayoutProperty("text-line-height"),n!=null&&n.isDataDriven?this._lineHeightProp=n:this.lineHeight=t.getLayoutValue("text-line-height",i),n=t.getLayoutProperty("text-max-angle"),n!=null&&n.isDataDriven?this._maxAngleProp=n:this.maxAngle=t.getLayoutValue("text-max-angle",i),n=t.getLayoutProperty("text-max-width"),n!=null&&n.isDataDriven?this._maxWidthProp=n:this.maxWidth=t.getLayoutValue("text-max-width",i),n=t.getLayoutProperty("text-offset"),n!=null&&n.isDataDriven?this._offsetProp=n:this.offset=t.getLayoutValue("text-offset",i),n=t.getLayoutProperty("text-padding"),n!=null&&n.isDataDriven?this._paddingProp=n:this.padding=t.getLayoutValue("text-padding",i),n=t.getLayoutProperty("text-rotate"),n!=null&&n.isDataDriven?this._rotateProp=n:this.rotate=t.getLayoutValue("text-rotate",i),n=t.getLayoutProperty("text-size"),n!=null&&n.isDataDriven?this._sizeProp=n:this.size=t.getLayoutValue("text-size",i),n=t.getLayoutProperty("text-writing-mode"),n!=null&&n.isDataDriven?this._writingModeProp=n:this.writingMode=t.getLayoutValue("text-writing-mode",i)}update(t,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,i)),this._justifyProp&&(this.justify=this._justifyProp.getValue(t,i)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(t,i)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(t,i)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(t,i)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(t,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,i)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(t,i))}}class Hd{constructor(t){if(this._style=t,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,t.layers||(t.layers=[]),this.version=parseFloat(t.version),this.layers=t.layers.map((i,r,n)=>this._create(i,r,n)).filter(i=>!!i),this.layers){let i;for(let r=0;r<this.layers.length;r++)i=this.layers[r],this._layerByName[i.id]=i,this._uidToLayer.set(i.uid,i),i.type===Ct.BACKGROUND&&this.backgroundBucketIds.push(i.id)}this._identifyRefLayers()}isPainterDataDriven(t){const i=this._layerByName[t];return!!i&&i.isPainterDataDriven()}getStyleLayerId(t){return t>=this.layers.length?null:this.layers[t].id}getStyleLayerByUID(t){var i;return(i=this._uidToLayer.get(t))!=null?i:null}getStyleLayerIndex(t){const i=this._layerByName[t];return i?this.layers.indexOf(i):-1}setStyleLayer(t,i){if(!t||!t.id)return;const r=this._style;i!=null&&i>=this.layers.length&&(i=this.layers.length-1);let n,o=!0;const s=this._layerByName[t.id];if(s){const a=this.layers.indexOf(s);i||(i=a),i===a?(o=!1,n=Hd._recreateLayer(t,s),this.layers[i]=n,r.layers[i]=t):(this.layers.splice(a,1),r.layers.splice(a,1),n=this._create(t,i,this.layers),this.layers.splice(i,0,n),r.layers.splice(i,0,t))}else n=this._create(t,i,this.layers),!i||i>=this.layers.length?(this.layers.push(n),r.layers.push(t)):(this.layers.splice(i,0,n),r.layers.splice(i,0,t));this._layerByName[t.id]=n,this._uidToLayer.set(n.uid,n),o&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(t){const i=this._layerByName[t];return i?{type:i.typeName,id:i.id,source:i.source,"source-layer":i.sourceLayer,minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:i.layout,paint:i.paint}:null}deleteStyleLayer(t){const i=this._layerByName[t];if(i){delete this._layerByName[t],this._uidToLayer.delete(i.uid);const r=this.layers.indexOf(i);this.layers.splice(r,1),this._style.layers.splice(r,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(t){return this._layerByName[t]}getLayoutProperties(t){const i=this._layerByName[t];return i?i.layout:null}getPaintProperties(t){const i=this._layerByName[t];return i?i.paint:null}setPaintProperties(t,i){const r=this._layerByName[t];if(!r)return;const n={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:i},o=Hd._recreateLayer(n,r),s=this.layers.indexOf(r);this.layers[s]=o,this._style.layers[s].paint=i,this._layerByName[r.id]=o,this._uidToLayer.set(r.uid,o)}setLayoutProperties(t,i){const r=this._layerByName[t];if(!r)return;const n={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:i,paint:r.paint},o=Hd._recreateLayer(n,r),s=this.layers.indexOf(r);this.layers[s]=o,this._style.layers[s].layout=i,this._layerByName[r.id]=o,this._uidToLayer.set(r.uid,o)}setStyleLayerVisibility(t,i){const r=this._layerByName[t];if(!r)return;const n=r.layout||{};n.visibility=i;const o={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:n,paint:r.paint},s=Hd._recreateLayer(o,r),a=this.layers.indexOf(r);this.layers[a]=s,this._style.layers[a].layout=n,this._layerByName[r.id]=s,this._uidToLayer.set(r.uid,s)}getStyleLayerVisibility(t){var r,n;const i=this._layerByName[t];return i?(n=(r=i.layout)==null?void 0:r.visibility)!=null?n:"visible":"none"}_recomputeZValues(){const t=this.layers,i=1/(t.length+1);for(let r=0;r<t.length;r++)t[r].z=1-(1+r)*i}_identifyRefLayers(){const t=[],i=[];let r=0;for(const n of this.layers){const o=n.layout;if(n.type===Ct.FILL){const s=n;let a=n.source+"|"+n.sourceLayer;a+="|"+(o==null?void 0:o.visibility),a+="|"+n.minzoom,a+="|"+n.maxzoom,a+="|"+JSON.stringify(n.filter),(s.hasDataDrivenFill||s.hasDataDrivenOutline)&&(a+="|"+r),t.push({key:a,layer:n})}else if(n.type===Ct.LINE){const s=n;let a=n.source+"|"+n.sourceLayer;a+="|"+(o==null?void 0:o.visibility),a+="|"+n.minzoom,a+="|"+n.maxzoom,a+="|"+JSON.stringify(n.filter),a+="|"+(o!==void 0?o["line-cap"]:""),a+="|"+(o!==void 0?o["line-join"]:""),s.hasDataDrivenLine&&(a+="|"+r),i.push({key:a,layer:n})}++r}this._assignRefLayers(t),this._assignRefLayers(i)}_assignRefLayers(t){let i,r;t.sort((o,s)=>o.key<s.key?-1:o.key>s.key?1:0);const n=t.length;for(let o=0;o<n;o++){const s=t[o];if(s.key===i)s.layer.refLayerId=r;else if(i=s.key,r=s.layer.id,s.layer.type===Ct.FILL){if(!s.layer.getPaintProperty("fill-outline-color"))for(let a=o+1;a<n;a++){const u=t[a];if(u.key!==i)break;if(u.layer.getPaintProperty("fill-outline-color")){t[o]=u,t[a]=s,r=u.layer.id;break}}}else if(s.layer.type===Ct.LINE){let a=s.layer;for(let u=o+1;u<n;u++){const d=t[u];if(d.key!==i)break;const h=d.layer;(a.canUseThinTessellation&&!h.canUseThinTessellation||!a.canUseThinTessellation&&(h.getPaintProperty("line-pattern")||h.getPaintProperty("line-dasharray")))&&(a=h,t[o]=d,t[u]=s,r=d.layer.id)}}}}_create(t,i,r){const n=1-(1+i)*(1/(r.length+1)),o=this._runningId++;switch(t.type){case"background":return new ZD(Ct.BACKGROUND,t,n,o);case"fill":return new JD(Ct.FILL,t,n,o);case"line":return new XD(Ct.LINE,t,n,o);case"symbol":return new QD(Ct.SYMBOL,t,n,o);case"raster":console.warn(`Unsupported vector tile raster layer ${t.id}`);case"circle":return new e4(Ct.CIRCLE,t,n,o)}}static _recreateLayer(t,i){switch(t.type){case"background":return new ZD(Ct.BACKGROUND,t,i.z,i.uid);case"fill":return new JD(Ct.FILL,t,i.z,i.uid);case"line":return new XD(Ct.LINE,t,i.z,i.uid);case"symbol":return new QD(Ct.SYMBOL,t,i.z,i.uid);case"raster":console.warn(`Unsupported vector tile raster layer ${t.id}`);case"circle":return new e4(Ct.CIRCLE,t,i.z,i.uid)}}}let et=class extends b3(T3(Rme(T7(S3($7(_3(v7(bw(yp))))))))){constructor(...e){super(...e),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.symbolCollisionBoxesVisible=!1,this.path=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}destroy(){if(this.sourceNameToSource)for(const e of Object.values(this.sourceNameToSource))e==null||e.destroy();this._spriteSourceMap.clear()}async prefetchResources(e){await this.loadSpriteSource(globalThis.devicePixelRatio||1,e)}load(e){const t=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},e).catch(bl).then(async()=>{if(!this.portalItem||!this.portalItem.id)return;const i=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await Be(i,{...e,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:i},Hme(this.portalItem))}).catch(bl).then(()=>this._loadStyle(e));return this.addResolvingPromise(t),Promise.resolve(this)}get attributionDataUrl(){const e=this.currentStyleInfo,t=e&&e.serviceUrl&&rt(e.serviceUrl);if(!t)return null;const i=this._getDefaultAttribution(t.path);return i?Gs(i,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const e=this.primarySource;return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){var e;return((e=this.primarySource)==null?void 0:e.fullExtent)||null}get parsedUrl(){return this.serviceUrl?rt(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(e,t){e&&yn(e)&&(e=`https:${e}`);const i=qme(e);t.styleUrl=ax(e,i)}get tileInfo(){var i;const e=[];for(const r in this.sourceNameToSource)e.push(this.sourceNameToSource[r]);let t=((i=this.primarySource)==null?void 0:i.tileInfo)||new Us;if(e.length>1)for(let r=0;r<e.length;r++)Yme(t,e[r].tileInfo)&&(t=Kme(t,e[r].tileInfo));return t}readVersion(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)}async loadSpriteSource(e=1,t){var i;if(!this._spriteSourceMap.has(e)){const r=jE("2d").maxTextureSize,n=(i=this.currentStyleInfo)!=null&&i.spriteUrl?Gs(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,o=new l$(n,e,r,this.currentStyleInfo.spriteFormat);await o.load(t),this._spriteSourceMap.set(e,o)}return this._spriteSourceMap.get(e)}async setSpriteSource(e,t="png",i=1,r){const n=jE("2d").maxTextureSize,o=e?Gs(e,{...this.customParameters,token:this.apiKey}):null;if(!o)return null;const s=new l$(o,i,n,t);try{return await s.load(r),this._spriteSourceMap.clear(),this._spriteSourceMap.set(i,s),this.currentStyleInfo.spriteUrl=o,this.emit("spriteSource-change",{spriteSource:s}),s}catch(a){bl(a)}return null}async loadStyle(e,t){var r;const i=e||this.style||this.url;return this._loadingTask&&typeof i=="string"&&this.url===i||((r=this._loadingTask)==null||r.abort(),this._loadingTask=hA(n=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(i,{signal:n})),t)),this._loadingTask.promise}getStyleLayerId(e){return this.styleRepository.getStyleLayerId(e)}getStyleLayerIndex(e){return this.styleRepository.getStyleLayerIndex(e)}getPaintProperties(e){return P(this.styleRepository.getPaintProperties(e))}setPaintProperties(e,t){const i=this.styleRepository.isPainterDataDriven(e);this.styleRepository.setPaintProperties(e,t);const r=this.styleRepository.isPainterDataDriven(e);this.emit("paint-change",{layer:e,paint:t,isDataDriven:i||r})}getStyleLayer(e){return P(this.styleRepository.getStyleLayer(e))}setStyleLayer(e,t){this.styleRepository.setStyleLayer(e,t),this.emit("style-layer-change",{layer:e,index:t})}deleteStyleLayer(e){this.styleRepository.deleteStyleLayer(e),this.emit("delete-style-layer",{layer:e})}getLayoutProperties(e){return P(this.styleRepository.getLayoutProperties(e))}setLayoutProperties(e,t){this.styleRepository.setLayoutProperties(e,t),this.emit("layout-change",{layer:e,layout:t})}setStyleLayerVisibility(e,t){this.styleRepository.setStyleLayerVisibility(e,t),this.emit("style-layer-visibility-change",{layer:e,visibility:t})}getStyleLayerVisibility(e){return this.styleRepository.getStyleLayerVisibility(e)}write(e,t){return(t==null?void 0:t.origin)&&!this.styleUrl?(t.messages&&t.messages.push(new N("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(e,t)}getTileUrl(e,t,i){return null}async _getSourceAndStyle(e,t){if(!e)throw new Error("invalid style!");const i=await Ume(e,{...t,query:{...this.customParameters,token:this.apiKey}});i.spriteFormat==="webp"&&(await Pme("lossy")||(i.spriteFormat="png")),this._set("currentStyleInfo",{...i}),typeof e=="string"?(this.url=e,this.style=null):(this.url=null,this.style=e),this._set("sourceNameToSource",i.sourceNameToSource),this._set("primarySource",i.sourceNameToSource[i.primarySourceName]),this._set("styleRepository",new Hd(i.style)),this.read(i.layerDefinition,{origin:"service"}),this.emit("load-style")}_getDefaultAttribution(e){const t=e.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),i=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!t)return;const r=t[2]&&t[2].toLowerCase();if(!r)return;const n=t[1]||"";for(const o of i)if(o.toLowerCase().includes(r))return Lr(`//static.arcgis.com/attribution/Vector${n}/${o}`)}async _loadStyle(e){var t,i;return(i=(t=this._loadingTask)==null?void 0:t.promise)!=null?i:this.loadStyle(null,e)}};l([c({readOnly:!0})],et.prototype,"attributionDataUrl",null),l([c({type:["show","hide"]})],et.prototype,"listMode",void 0),l([c({json:{read:!0,write:!0}})],et.prototype,"blendMode",void 0),l([c({readOnly:!0,json:{read:!1}})],et.prototype,"capabilities",null),l([c({readOnly:!0})],et.prototype,"currentStyleInfo",void 0),l([c({json:{read:!1},readOnly:!0,type:Oe})],et.prototype,"fullExtent",null),l([c()],et.prototype,"style",void 0),l([c({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],et.prototype,"isReference",void 0),l([c({type:["VectorTileLayer"]})],et.prototype,"operationalLayerType",void 0),l([c({readOnly:!0})],et.prototype,"parsedUrl",null),l([c({readOnly:!0})],et.prototype,"serviceUrl",null),l([c({type:me,readOnly:!0})],et.prototype,"spatialReference",null),l([c({readOnly:!0})],et.prototype,"styleRepository",void 0),l([c({readOnly:!0})],et.prototype,"sourceNameToSource",void 0),l([c({readOnly:!0})],et.prototype,"primarySource",void 0),l([c({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],et.prototype,"styleUrl",null),l([X(["portal-item","web-document"],"styleUrl")],et.prototype,"writeStyleUrl",null),l([c({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:Us})],et.prototype,"tileInfo",null),l([c({json:{read:!1},readOnly:!0,value:"vector-tile"})],et.prototype,"type",void 0),l([c({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],et.prototype,"url",void 0),l([c({readOnly:!0})],et.prototype,"version",void 0),l([K("version",["version","currentVersion"])],et.prototype,"readVersion",null),l([c({type:Boolean})],et.prototype,"symbolCollisionBoxesVisible",void 0),l([c({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],et.prototype,"path",void 0),et=l([S("esri.layers.VectorTileLayer")],et);const Zg=et,ybe=Object.freeze(Object.defineProperty({__proto__:null,default:Zg},Symbol.toStringTag,{value:"Module"})),m0e=8,g0e="https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf",v0e={esri:{type:"vector",maxzoom:16,url:"https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer",attribution:"Esri, HERE, Garmin, FAO, NOAA, USGS, \xA9 OpenStreetMap contributors, and the GIS User Community",copyrightText:"Esri, HERE, Garmin, FAO, NOAA, USGS, \xA9 OpenStreetMap contributors, and the GIS User Community"}},w0e=[{id:"background",type:"background",paint:{"background-color":"#cfd3d4"},layout:{}},{id:"Land",type:"fill",source:"esri","source-layer":"Land",filter:["in","_symbol",0,1],minzoom:0,layout:{},paint:{"fill-color":{stops:[[0,"#f4f4f4"],[7,"#efefef"]]}}},{id:"Urban area",type:"fill",source:"esri","source-layer":"Urban area",minzoom:5,maxzoom:15,layout:{},paint:{"fill-color":{stops:[[5,"#e5e8e7"],[10,"#ECEDEC"]]}}},{id:"Openspace or forest",type:"fill",source:"esri","source-layer":"Openspace or forest",minzoom:12,layout:{},paint:{"fill-color":{stops:[[6,"#ECEEEA"],[11,"#e4e8e4"]]},"fill-outline-color":"#E7EAE6"}},{id:"Admin0 forest or park",type:"fill",source:"esri","source-layer":"Admin0 forest or park",minzoom:7,layout:{},paint:{"fill-color":{stops:[[6,"#ECEEEA"],[11,"#e4e8e4"]]},"fill-outline-color":"#E7EAE6"}},{id:"Admin1 forest or park",type:"fill",source:"esri","source-layer":"Admin1 forest or park",minzoom:8,layout:{},paint:{"fill-color":{stops:[[6,"#ECEEEA"],[11,"#e4e8e4"]]},"fill-outline-color":"#E7EAE6"}},{id:"Zoo",type:"fill",source:"esri","source-layer":"Zoo",minzoom:12,layout:{},paint:{"fill-color":"#e4e8e4"}},{id:"Airport/Airport property",type:"fill",source:"esri","source-layer":"Airport",filter:["==","_symbol",1],minzoom:9,layout:{},paint:{"fill-color":{stops:[[11,"#edede9"],[15,"#efefef"]]}}},{id:"Airport/Airport runway",type:"fill",source:"esri","source-layer":"Airport",filter:["==","_symbol",0],minzoom:11,layout:{},paint:{"fill-color":"#e1e2dd"}},{id:"Pedestrian",type:"fill",source:"esri","source-layer":"Pedestrian",minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1"}},{id:"Park or farming",type:"fill",source:"esri","source-layer":"Park or farming",minzoom:12,layout:{},paint:{"fill-color":"#e4e8e4"}},{id:"Beach",type:"fill",source:"esri","source-layer":"Beach",minzoom:13,layout:{},paint:{"fill-pattern":"Special area of interest/Sand"}},{id:"Special area of interest/Garden path",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",12],minzoom:14,layout:{visibility:"none"},paint:{"fill-color":"#f7f7f7","fill-outline-color":"#EBE8E8"}},{id:"Special area of interest/Parking",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",15],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1"}},{id:"Special area of interest/Green openspace",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",11],minzoom:14,layout:{},paint:{"fill-color":"#e5eae5"}},{id:"Special area of interest/Grass",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",8],minzoom:14,layout:{},paint:{"fill-color":"#e6eae6"}},{id:"Special area of interest/Baseball field or other grounds",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",1],minzoom:14,layout:{},paint:{"fill-color":"#E2E5E2"}},{id:"Special area of interest/Groundcover",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",13],minzoom:14,layout:{},paint:{"fill-pattern":"Special area of interest/Groundcover","fill-opacity":.5}},{id:"Special area of interest/Field or court exterior",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",5],minzoom:14,layout:{},paint:{"fill-color":"#ECEEEC"}},{id:"Special area of interest/Football field or court",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",4],minzoom:14,layout:{},paint:{"fill-color":"#E2E5E2","fill-outline-color":"#efefef"}},{id:"Special area of interest/Hardcourt",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",10],minzoom:14,layout:{},paint:{"fill-color":"#d3d3d3","fill-outline-color":"#efefef"}},{id:"Special area of interest/Mulch or dirt",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",14],minzoom:14,layout:{},paint:{"fill-color":"#eaeaea"}},{id:"Special area of interest/Athletic track",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",0],minzoom:14,layout:{},paint:{"fill-color":"#e2e2e2","fill-outline-color":"#f2f2f2"}},{id:"Special area of interest/Sand",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",6],minzoom:14,layout:{},paint:{"fill-pattern":"Special area of interest/Sand"}},{id:"Special area of interest/Rock or gravel",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",16],minzoom:14,layout:{},paint:{"fill-pattern":"Special area of interest/Rock or gravel"}},{id:"Special area of interest/Water",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",7],minzoom:15,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water line small scale",type:"line",source:"esri","source-layer":"Water line small scale",minzoom:1,maxzoom:5,layout:{"line-join":"round",visibility:"none"},paint:{"line-color":"#d6dadb","line-width":.5}},{id:"Water line medium scale",type:"line",source:"esri","source-layer":"Water line medium scale",minzoom:6,maxzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#d6dadb","line-width":{base:1.2,stops:[[5,.5],[7,.7]]}}},{id:"Water line large scale",type:"line",source:"esri","source-layer":"Water line large scale",minzoom:7,maxzoom:11,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[7,.7],[11,.8]]}}},{id:"Water line/Waterfall",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",5],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#cfd3d4","line-width":.8,"line-dasharray":[5,5]}},{id:"Water line/Dam or weir",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",2],minzoom:11,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#c3c3c3","line-width":{base:1.2,stops:[[11,.7],[14,.7],[17,2]]}}},{id:"Water line/Levee/1",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",3],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[11,.7],[14,.7],[17,2]]}}},{id:"Water line/Levee/0",type:"symbol",source:"esri","source-layer":"Water line",filter:["==","_symbol",3],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"icon-image":"Water line/Levee/0","symbol-spacing":15,"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-padding":1},paint:{}},{id:"Water line/Canal or ditch",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",1],minzoom:11,layout:{"line-cap":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[11,.8],[14,.8],[17,2]]}}},{id:"Water line/Stream or river intermittent",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",4],minzoom:11,layout:{},paint:{"line-color":"#cfd3d4","line-dasharray":[7,3],"line-width":{base:1.2,stops:[[11,.8],[14,.8],[17,2]]}}},{id:"Water line/Stream or river",type:"line",source:"esri","source-layer":"Water line",filter:["==","_symbol",0],minzoom:11,layout:{"line-cap":"round"},paint:{"line-color":"#cfd3d4","line-width":{base:1.2,stops:[[11,.8],[14,.8],[17,2]]}}},{id:"Marine area/bathymetry depth 1",type:"fill",source:"esri","source-layer":"Marine area",minzoom:4,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area small scale",type:"fill",source:"esri","source-layer":"Water area small scale",minzoom:1,maxzoom:5,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area medium scale/Lake intermittent",type:"fill",source:"esri","source-layer":"Water area medium scale",filter:["==","_symbol",1],minzoom:5,maxzoom:7,layout:{},paint:{"fill-pattern":"Water area/Lake or river intermittent"}},{id:"Water area medium scale/Lake or river",type:"fill",source:"esri","source-layer":"Water area medium scale",filter:["==","_symbol",0],minzoom:5,maxzoom:7,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area large scale/Lake intermittent",type:"fill",source:"esri","source-layer":"Water area large scale",filter:["==","_symbol",1],minzoom:7,maxzoom:11,layout:{},paint:{"fill-pattern":"Water area/Lake or river intermittent"}},{id:"Water area large scale/Lake or river",type:"fill",source:"esri","source-layer":"Water area large scale",filter:["==","_symbol",0],minzoom:7,maxzoom:11,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area/Lake, river or bay",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",7],minzoom:11,layout:{},paint:{"fill-color":"#cfd3d4"}},{id:"Water area/Lake or river intermittent",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",6],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Lake or river intermittent"}},{id:"Water area/Inundated area",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",4],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Inundated area"}},{id:"Water area/Swamp or marsh",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",3],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Swamp or marsh"}},{id:"Water area/Playa",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",1],minzoom:11,layout:{},paint:{"fill-pattern":"Water area/Playa"}},{id:"Water area/Dam or weir",type:"fill",source:"esri","source-layer":"Water area",filter:["==","_symbol",5],minzoom:11,layout:{},paint:{"fill-color":"#DFE1E2","fill-outline-color":"#efefef"}},{id:"Special area of interest/Bike, walk or pedestrian",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",2],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1"}},{id:"Railroad/2",type:"line",source:"esri","source-layer":"Railroad",minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#EFEFEF","line-width":{base:1.2,stops:[[12,1.5],[14,2.5],[17,3]]}}},{id:"Railroad/1",type:"line",source:"esri","source-layer":"Railroad",minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#dcddda","line-width":{base:1.2,stops:[[12,.5],[14,1],[17,1.5]]}}},{id:"Ferry/Rail ferry/2",type:"line",source:"esri","source-layer":"Ferry",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#EFEFEF","line-width":{base:1.2,stops:[[12,1.5],[14,2.5],[17,3]]}}},{id:"Ferry/Rail ferry/1",type:"line",source:"esri","source-layer":"Ferry",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#dcddda","line-width":{base:1.2,stops:[[12,.5],[14,1],[17,1.5]]}}},{id:"Special area of interest line/Dock or pier",type:"line",source:"esri","source-layer":"Special area of interest line",filter:["==","_symbol",0],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#efefef","line-width":{base:1.2,stops:[[15,.7],[17,1.2]]}}},{id:"Special area of interest line/Sports field",type:"line",source:"esri","source-layer":"Special area of interest line",filter:["==","_symbol",6],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#efefef","line-width":{base:1.2,stops:[[15,.7],[17,1.2]]}}},{id:"Building/Shadow",type:"fill",source:"esri","source-layer":"Building",minzoom:16,layout:{},paint:{"fill-color":"#dcddde","fill-translate":{stops:[[15,[0,0]],[18,[2,2]]]},"fill-translate-anchor":"viewport"}},{id:"Building",type:"fill",source:"esri","source-layer":"Building",minzoom:15,layout:{},paint:{"fill-color":"#DFE1E2","fill-outline-color":"#efefef"}},{id:"Special area of interest line/Parking lot",type:"line",source:"esri","source-layer":"Special area of interest line",filter:["==","_symbol",5],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[15,.7],[17,1.2]]}}},{id:"Trail or path/1",type:"line",source:"esri","source-layer":"Trail or path",minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[14,1.5],[16,3.3],[18,4]]}}},{id:"Road/4WD/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-dasharray":[2,1],"line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road/Service/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road/Local/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.4,stops:[[11,1.5],[14,4],[16,6],[18,17.3]]}}},{id:"Road/Pedestrian/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[14,1.5],[16,3.3],[18,4]]}}},{id:"Road/Minor, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[11,1],[14,4],[16,9.6],[18,17.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Minor/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[11,2.6],[14,5.6],[16,9.6],[18,17.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Major, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road/Major/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road/Freeway Motorway, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1,stops:[[9,.3],[14,8.3],[16,12.3],[18,26]]}}},{id:"Road/Highway/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[8,.3],[14,8.3],[16,12.3],[18,26]]}}},{id:"Road/Freeway Motorway/1",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-width":{base:1.2,stops:[[5,.3],[14,8.3],[16,12.3],[18,26]]}}},{id:"Trail or path/0",type:"line",source:"esri","source-layer":"Trail or path",minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-dasharray":[3,1.5],"line-width":{base:1.2,stops:[[14,1.3],[16,2],[18,2.3]]}}},{id:"Road/Pedestrian/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-dasharray":[3,1.5],"line-width":{base:1.2,stops:[[14,1.3],[16,2],[18,2.3]]}}},{id:"Road/4WD/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road/Service/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road/Local/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{stops:[[12,"#FAFAFA"],[13,"#ffffff"]]},"line-width":{base:1.4,stops:[[11,1.1],[14,2],[16,4],[18,15.3]]}}},{id:"Road/Minor, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,.75],[14,2],[16,7.65],[18,15.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Minor/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:10,layout:{visibility:"visible","line-miter-limit":2,"line-round-limit":1.05,"line-cap":"round","line-join":"round"},paint:{"line-opacity":1,"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[11,1.3],[14,3.65],[16,7.65],[18,15.3]]},"line-gap-width":0,"line-blur":0,"line-translate-anchor":"map","line-offset":0,"line-translate":[0,0]}},{id:"Road/Major, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ffffff","line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road/Major/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFFFFF","line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road/Freeway Motorway, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffffff","line-width":{base:1.2,stops:[[9,.3],[14,6.3],[16,10.3],[18,24]]}}},{id:"Road/Highway/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-width":{base:1.2,stops:[[8,.3],[14,6.3],[16,10.3],[18,24]]}}},{id:"Road/Freeway Motorway/0",type:"line",source:"esri","source-layer":"Road",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:6,layout:{"line-join":"round"},paint:{"line-color":{stops:[[6,"#FAFAFA"],[7,"#ffffff"]]},"line-width":{base:1.2,stops:[[5,.3],[14,6.3],[16,10.3],[18,24]]}}},{id:"Road tunnel/4WD/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-dasharray":[2,1],"line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road tunnel/Service/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[11,1.5],[14,3.3],[18,8.3]]}}},{id:"Road tunnel/Local/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.4,stops:[[11,1.5],[14,4],[16,6],[18,17.3]]}}},{id:"Road tunnel/Pedestrian/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[14,1.5],[16,3.3],[18,4]]}}},{id:"Road tunnel/Minor, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[11,1],[14,4],[16,9.65],[18,17.3]]}}},{id:"Road tunnel/Minor/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[11,2.6],[14,5.65],[16,9.65],[18,17.3]]}}},{id:"Road tunnel/Major, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road tunnel/Major/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1,stops:[[9,1.5],[14,7.3],[16,10.3],[18,18]]}}},{id:"Road tunnel/Freeway Motorway, ramp or traffic circle/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.3],[14,8.3],[16,14.3],[18,28]]}}},{id:"Road tunnel/Highway/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[8,.3],[14,8.3],[16,14.3],[18,28]]}}},{id:"Road tunnel/Freeway Motorway/1",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#E3E5E2","line-opacity":.5,"line-width":{base:1.2,stops:[[5,.3],[14,8.3],[16,14.3],[18,28]]}}},{id:"Road tunnel/Pedestrian/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",9],["!in","Viz",3]],minzoom:15,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-dasharray":[3,1.5],"line-width":{base:1.2,stops:[[14,1.3],[16,2],[18,2.3]]}}},{id:"Road tunnel/4WD/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",10],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road tunnel/Service/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:13,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,.75],[14,1.3],[18,6.3]]}}},{id:"Road tunnel/Local/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",7],["!in","Viz",3]],minzoom:12,layout:{"line-join":"round"},paint:{"line-color":{stops:[[12,"#FAFAFA"],[13,"#ffffff"]]},"line-opacity":.5,"line-width":{base:1.4,stops:[[11,1.1],[14,2],[16,4],[18,15.3]]}}},{id:"Road tunnel/Minor, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",6],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,.75],[14,2],[16,7.65],[18,15.3]]}}},{id:"Road tunnel/Minor/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:11,layout:{"line-join":"round"},paint:{"line-color":"#FFFFFF","line-opacity":.5,"line-width":{base:1.2,stops:[[11,1.3],[14,3.65],[16,7.65],[18,15.3]]}}},{id:"Road tunnel/Major, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road tunnel/Major/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.75],[14,5.3],[16,8.3],[18,16]]}}},{id:"Road tunnel/Freeway Motorway, ramp or traffic circle/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:7,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[9,.3],[14,6.3],[16,12.3],[18,26]]}}},{id:"Road tunnel/Highway/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:8,layout:{"line-join":"round"},paint:{"line-color":"#ffffff","line-opacity":.5,"line-width":{base:1.2,stops:[[8,.3],[14,6.3],[16,12.3],[18,26]]}}},{id:"Road tunnel/Freeway Motorway/0",type:"line",source:"esri","source-layer":"Road tunnel",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:6,layout:{"line-join":"round"},paint:{"line-color":{stops:[[6,"#FAFAFA"],[7,"#ffffff"]]},"line-opacity":.5,"line-width":{base:1.2,stops:[[5,.3],[14,6.3],[16,12.3],[18,26]]}}},{id:"Special area of interest/Gutter",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",9],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1","fill-outline-color":"#efefef"}},{id:"Special area of interest/Curb",type:"fill",source:"esri","source-layer":"Special area of interest",filter:["==","_symbol",3],minzoom:14,layout:{},paint:{"fill-color":"#f2f2f1","fill-outline-color":"#ebebeb"}},{id:"Boundary line/Disputed admin2/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#dddedb","line-opacity":.95,"line-width":{base:1,stops:[[4,.65],[14,7],[17,7]]}}},{id:"Boundary line/Disputed admin2/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",8],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":{stops:[[1,"#FAFAFA"],[3,"#ffffff"]]},"line-width":{base:1.2,stops:[[1,.65],[14,1.3],[17,2.65]]},"line-dasharray":[7,5]}},{id:"Boundary line/Disputed admin1/1",type:"line",source:"esri","source-layer":"Boundary line",minzoom:4,filter:["all",["==","_symbol",7],["!in","Viz",3]],layout:{"line-join":"round"},paint:{"line-color":"#dddedb","line-opacity":.95,"line-width":{base:1,stops:[[4,.65],[14,7]]}}},{id:"Boundary line/Disputed admin0/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",6],["!in","Viz",3],["!in","DisputeID",8,16,90,96,0]],minzoom:1,layout:{"line-join":"round"},paint:{"line-color":"#dddedb","line-opacity":.95,"line-width":{base:1,stops:[[1,.65],[14,9.3]]}}},{id:"Boundary line/Disputed admin1/0",type:"line",source:"esri","source-layer":"Boundary line",minzoom:4,filter:["all",["==","_symbol",7],["!in","Viz",3]],layout:{"line-join":"round"},paint:{"line-color":{stops:[[1,"#FAFAFA"],[3,"#ffffff"]]},"line-width":{base:1.2,stops:[[1,.65],[14,1.3],[17,2.65]]},"line-dasharray":[7,5]}},{id:"Boundary line/Disputed admin0/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",6],["!in","Viz",3],["!in","DisputeID",8,16,90,96,0]],minzoom:1,layout:{"line-join":"round"},paint:{"line-color":{stops:[[1,"#FAFAFA"],[3,"#ffffff"]]},"line-width":{base:1.2,stops:[[1,.65],[14,1.3],[17,2.65]]},"line-dasharray":[7,5]}},{id:"Boundary line/Admin2/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:10,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#dfe0dd","line-opacity":.6,"line-width":{base:1.2,stops:[[8,1.3],[14,2.65]]}}},{id:"Boundary line/Admin1/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:4,layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":"#dfe0dd","line-width":{base:1,stops:[[4,.65],[14,7]]}}},{id:"Boundary line/Admin0/1",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:1,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#dddedb","line-width":{base:1,stops:[[1,.65],[14,9.3]]}}},{id:"Boundary line/Admin5",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",5],["!in","Viz",3]],minzoom:16,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[5,3]}},{id:"Boundary line/Admin4",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",4],["!in","Viz",3]],minzoom:16,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[5,3]}},{id:"Boundary line/Admin3",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",3],["!in","Viz",3]],minzoom:16,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[5,3]}},{id:"Boundary line/Admin2/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",2],["!in","Viz",3]],minzoom:9,layout:{"line-join":"round"},paint:{"line-color":"#b9b9b9","line-dasharray":[6,4],"line-width":{base:1.2,stops:[[8,.5],[14,1]]}}},{id:"Boundary line/Admin1/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",1],["!in","Viz",3]],minzoom:7,layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":{stops:[[7,"#c8c8c8"],[12,"#b9b9b9"]]},"line-dasharray":[7,5.3],"line-width":{base:1,stops:[[7,.3],[14,1.3]]}}},{id:"Boundary line/Admin0/0",type:"line",source:"esri","source-layer":"Boundary line",filter:["all",["==","_symbol",0],["!in","Viz",3]],minzoom:5,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{stops:[[5,"#cccccc"],[7,"#9C9C9C"]]},"line-dasharray":[7,5.3],"line-width":{base:1.2,stops:[[5,.7],[14,1.3]]}}},{id:"Water point/Sea or ocean",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",0],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,15.5]]},"text-letter-spacing":.3,"text-line-height":1.6,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water point/Island",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",7],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water point/Dam or weir",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",5],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":.7,"text-halo-blur":1}},{id:"Water point/Playa",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",6],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":.7,"text-halo-blur":1}},{id:"Water point/Canal or ditch",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",4],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water point/Stream or river",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",3],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water point/Lake or reservoir",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",2],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water point/Bay or inlet",type:"symbol",source:"esri","source-layer":"Water point",filter:["==","_label_class",1],minzoom:9,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[9,8.5],[15,10]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water line/label/Default",type:"symbol",source:"esri","source-layer":"Water line/label",minzoom:11,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"],"text-size":9,"text-letter-spacing":.07,"text-max-width":6,"text-max-angle":18,"text-field":"{_name_global}","text-padding":1,"text-offset":[0,-.5],"symbol-spacing":800},paint:{"text-color":"#A0A6A8","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Marine park/label/Default",type:"symbol",source:"esri","source-layer":"Marine park/label",minzoom:16,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91"}},{id:"Water area/label/Dam or weir",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",8],minzoom:11,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Water area/label/Playa",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",9],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Water area/label/Canal or ditch",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",2],minzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.13,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":5},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Small river",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",7],minzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.13,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":8},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Large river",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",4],minzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":10,"text-letter-spacing":.13,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":8},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Small lake or reservoir",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",6],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Large lake or reservoir",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",3],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":10,"text-letter-spacing":.13,"text-line-height":1.15,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Bay or inlet",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",1],minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":11,"text-letter-spacing":.13,"text-line-height":1.15,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area/label/Small island",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",0],minzoom:11,layout:{"text-size":9.5,"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"]},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water area/label/Large island",type:"symbol",source:"esri","source-layer":"Water area/label",filter:["==","_label_class",5],minzoom:11,layout:{"text-size":10,"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0,"text-font":["Ubuntu Italic"]},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Water area large scale/label/River",type:"symbol",source:"esri","source-layer":"Water area large scale/label",filter:["==","_label_class",1],minzoom:7,maxzoom:11,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-font":["Ubuntu Italic"],"text-size":9,"text-letter-spacing":.1,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-max-width":4},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area large scale/label/Lake or lake intermittent",type:"symbol",source:"esri","source-layer":"Water area large scale/label",filter:["==","_label_class",0],minzoom:7,maxzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":9.5,"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area medium scale/label/Default",type:"symbol",source:"esri","source-layer":"Water area medium scale/label",minzoom:5,maxzoom:7,layout:{"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-letter-spacing":.08,"text-font":["Ubuntu Italic"],"text-size":9},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Water area small scale/label/Default",type:"symbol",source:"esri","source-layer":"Water area small scale/label",minzoom:1,maxzoom:5,layout:{"text-font":["Ubuntu Italic"],"text-size":9,"text-letter-spacing":.08,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Marine area/label/Default",type:"symbol",source:"esri","source-layer":"Marine area/label",minzoom:11,layout:{"text-font":["Ubuntu Italic"],"text-size":10,"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Marine waterbody/label/small",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",4],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.12,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,9],[6,11]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/medium",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",3],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.15,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,9],[6,11]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/large",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",2],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.18,"text-line-height":1.5,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,9],[6,12]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/x large",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",1],minzoom:3,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.2,"text-line-height":1.5,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,10],[6,13]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Marine waterbody/label/2x large",type:"symbol",source:"esri","source-layer":"Marine waterbody/label",filter:["==","_label_class",0],minzoom:2,maxzoom:10,layout:{"text-font":["Ubuntu Italic"],"text-letter-spacing":.3,"text-line-height":1.6,"text-max-width":4,"text-field":"{_name}","text-padding":15,"symbol-avoid-edges":!0,"text-size":{stops:[[1,11],[4,14]]}},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#e0e4e5","text-halo-width":.5}},{id:"Ferry/label/Rail ferry",type:"symbol",source:"esri","source-layer":"Ferry/label",filter:["all",["==","_label_class",1],["!in","Viz",3]],minzoom:16,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.6],"symbol-spacing":1e3},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1}},{id:"Railroad/label/Default",type:"symbol",source:"esri","source-layer":"Railroad/label",minzoom:16,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.6],"symbol-spacing":1e3},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1}},{id:"Road tunnel/label/Pedestrian",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",6],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.3,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Local, service, 4WD",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",5],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Minor",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",4],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Major, alt name",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",3],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Major",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",2],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Highway",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",7],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Freeway Motorway, alt name",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",1],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Road tunnel/label/Freeway Motorway",type:"symbol",source:"esri","source-layer":"Road tunnel/label",filter:["all",["==","_label_class",0],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Building/label/Default",type:"symbol",source:"esri","source-layer":"Building/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":.7,"text-halo-blur":1}},{id:"Trail or path/label/Default",type:"symbol",source:"esri","source-layer":"Trail or path/label",minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.3,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Pedestrian",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",6],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.3,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Local",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",5],["!in","Viz",3]],minzoom:15,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":5},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Minor",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",4],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Major, alt name",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",3],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Major",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",2],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Highway",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",75],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":10},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Freeway Motorway, alt name",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",1],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Freeway Motorway",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["==","_label_class",0],["!in","Viz",3]],minzoom:13,layout:{"symbol-placement":"line","symbol-avoid-edges":!0,"symbol-spacing":400,"text-font":["Ubuntu Regular"],"text-size":10.5,"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}"},paint:{"text-color":"#666666","text-halo-color":"#ffffff","text-halo-width":1}},{id:"Road/label/Rectangle white black (Alt)",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["in","_label_class",8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-spacing":800,"text-max-angle":25,"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-max-width":6,"text-field":"{_name}","icon-image":"Road/Rectangle white black (Alt)/{_len}","icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport","text-offset":[0,.2],"text-padding":30},paint:{"text-color":"#666666"}},{id:"Road/label/Rectangle white black",type:"symbol",source:"esri","source-layer":"Road/label",filter:["all",["in","_label_class",7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73],["!in","Viz",3]],minzoom:14,layout:{"symbol-placement":"line","symbol-spacing":800,"text-max-angle":25,"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":8.5,"text-max-width":6,"text-field":"{_name}","icon-image":"Road/Rectangle white black/{_len}","icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport","text-offset":[0,.2],"text-padding":30},paint:{"text-color":"#666666"}},{id:"Cemetery/label/Default",type:"symbol",source:"esri","source-layer":"Cemetery/label",minzoom:16,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Freight/label/Default",type:"symbol",source:"esri","source-layer":"Freight/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Water and wastewater/label/Default",type:"symbol",source:"esri","source-layer":"Water and wastewater/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Port/label/Default",type:"symbol",source:"esri","source-layer":"Port/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Industry/label/Default",type:"symbol",source:"esri","source-layer":"Industry/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Government/label/Default",type:"symbol",source:"esri","source-layer":"Government/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Finance/label/Default",type:"symbol",source:"esri","source-layer":"Finance/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Emergency/label/Default",type:"symbol",source:"esri","source-layer":"Emergency/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Indigenous/label/Default",type:"symbol",source:"esri","source-layer":"Indigenous/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Military/label/Default",type:"symbol",source:"esri","source-layer":"Military/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Transportation/label/Default",type:"symbol",source:"esri","source-layer":"Transportation/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Pedestrian/label/Default",type:"symbol",source:"esri","source-layer":"Pedestrian/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Beach/label/Default",type:"symbol",source:"esri","source-layer":"Beach/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Golf course/label/Default",type:"symbol",source:"esri","source-layer":"Golf course/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Zoo/label/Default",type:"symbol",source:"esri","source-layer":"Zoo/label",minzoom:15,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Retail/label/Default",type:"symbol",source:"esri","source-layer":"Retail/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Landmark/label/Default",type:"symbol",source:"esri","source-layer":"Landmark/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Openspace or forest/label/Default",type:"symbol",source:"esri","source-layer":"Openspace or forest/label",minzoom:14,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Park or farming/label/Default",type:"symbol",source:"esri","source-layer":"Park or farming/label",minzoom:14,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Point of interest/Park",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_label_class",1],minzoom:14,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#939d8c","text-halo-width":1,"text-halo-color":"#EBEDEB","text-halo-blur":1}},{id:"Education/label/Default",type:"symbol",source:"esri","source-layer":"Education/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Medical/label/Default",type:"symbol",source:"esri","source-layer":"Medical/label",minzoom:17,layout:{"text-font":["Ubuntu Regular"],"text-size":9.5,"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 forest or park/label/Default",type:"symbol",source:"esri","source-layer":"Admin1 forest or park/label",minzoom:9,layout:{"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[12,9.5]]},"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 forest or park/label/Default",type:"symbol",source:"esri","source-layer":"Admin0 forest or park/label",minzoom:9,layout:{"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[12,9.5]]},"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":25,"symbol-avoid-edges":!0},paint:{"text-color":"#939d8c","text-halo-color":"#EBEDEB","text-halo-width":1,"text-halo-blur":1}},{id:"Airport/label/Airport property",type:"symbol",source:"esri","source-layer":"Airport/label",minzoom:9,layout:{"text-font":["Ubuntu Regular"],"text-size":{stops:[[9,8.5],[12,9.5]]},"text-letter-spacing":.05,"text-max-width":6,"text-field":"{_name_global}","text-padding":15,"symbol-avoid-edges":!0},paint:{"text-color":"#808080","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin2 area/label/small",type:"symbol",source:"esri","source-layer":"Admin2 area/label",filter:["==","_label_class",1],minzoom:9,maxzoom:11,layout:{"text-letter-spacing":.2,"text-font":["Ubuntu Regular"],"text-size":9,"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase"},paint:{"text-color":"#b1b2ad","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin2 area/label/large",type:"symbol",source:"esri","source-layer":"Admin2 area/label",filter:["==","_label_class",0],minzoom:9,maxzoom:11,layout:{"text-letter-spacing":.2,"text-font":["Ubuntu Regular"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase"},paint:{"text-color":"#b1b2ad","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/x small",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",5],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,9],[5,9],[6,9.5],[9,10]]},"text-letter-spacing":{stops:[[4,.1],[8,.18]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/small",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",4],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,9],[5,9],[6,9.5],[9,11.5]]},"text-letter-spacing":{stops:[[4,.1],[8,.18]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/medium",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",3],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,10],[5,10],[6,10.5],[9,12]]},"text-letter-spacing":{stops:[[4,.1],[8,.18]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/large",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",2],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,10],[5,10.5],[6,11],[9,15]]},"text-letter-spacing":{stops:[[4,.1],[8,.2]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/x large",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",1],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,10.5],[5,11],[6,11.5],[9,17]]},"text-letter-spacing":{stops:[[4,.13],[8,.3]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin1 area/label/2x large",type:"symbol",source:"esri","source-layer":"Admin1 area/label",filter:["==","_label_class",0],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-transform":"uppercase","text-size":{stops:[[4,11],[5,11.5],[6,12],[9,17.5]]},"text-letter-spacing":{stops:[[4,.13],[8,.4]]}},paint:{"text-color":"#b4b4b4","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Point of interest/General",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_label_class",0],minzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9,"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#808080","text-halo-width":1,"text-halo-color":"#efefef","text-halo-blur":1}},{id:"Point of interest/Bus station",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_symbol",2],minzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9,"text-letter-spacing":.04,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.9]},paint:{"text-color":"#808080","text-halo-width":1,"text-halo-color":"#efefef","text-halo-blur":1}},{id:"Point of interest/Rail station",type:"symbol",source:"esri","source-layer":"Point of interest",filter:["==","_symbol",3],minzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-size":9,"text-letter-spacing":.04,"text-max-width":6,"text-field":"{_name_global}","text-padding":5,"text-offset":[0,-.9]},paint:{"text-color":"#808080","text-halo-width":1,"text-halo-color":"#efefef","text-halo-blur":1}},{id:"Neighborhood",type:"symbol",source:"esri","source-layer":"Neighborhood",minzoom:15,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":{stops:[[10,10],[16,13]]},"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/town small",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",5],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":{stops:[[10,10],[16,13]]},"text-letter-spacing":.08,"text-max-width":6,"text-field":"{_name_global}","text-padding":15},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/town large",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",4],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":{stops:[[10,10],[16,15]]},"text-letter-spacing":.09,"text-max-width":6,"text-field":"{_name_global}","text-padding":1},paint:{"text-halo-color":"#efefef","text-color":"#353635","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/small",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",3],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,11],[16,16]]}},paint:{"text-halo-color":"#efefef","text-color":"#353635","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/medium",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",2],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,11],[16,18.5]]}},paint:{"text-halo-color":"#efefef","text-color":"#353635","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/large",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",1],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,14],[16,22]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City large scale/x large",type:"symbol",source:"esri","source-layer":"City large scale",filter:["==","_label_class",0],minzoom:10,maxzoom:17,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-letter-spacing":.1,"text-max-width":6,"text-field":"{_name_global}","text-padding":1,"text-size":{stops:[[10,15],[16,25]]},visibility:"none"},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town small non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",17],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town large non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",15],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/small non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",12],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/medium non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",9],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"text-letter-spacing":.05,"text-size":10},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",18],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town large other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",14],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/small other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",11],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-size":10,"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/medium other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",8],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Light"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":10},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/x small",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",5],minzoom:5,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[5,.13],[8,.5]]},"text-size":{stops:[[5,10],[10,12.5]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/small",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",4],minzoom:4,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[4,.13],[8,.5]]},"text-size":{stops:[[4,10],[10,12.5]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/medium",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",3],minzoom:2,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[2,.13],[8,.5]]},"text-size":{stops:[[2,8],[4,10],[10,16]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/large",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",2],minzoom:2,maxzoom:10,layout:{"text-font":["Ubuntu Bold"],"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-letter-spacing":{stops:[[2,.13],[8,.5]]},"text-size":{stops:[[2,9],[4,10],[6,16]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/x large",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",1],minzoom:2,maxzoom:8,layout:{"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-font":["Ubuntu Bold"],"text-line-height":1.5,"text-letter-spacing":{stops:[[2,.15],[6,.5]]},"text-size":{stops:[[2,9],[4,10],[6,16]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town small admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",16],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/town large admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",13],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/small admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",10],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/medium admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",7],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,10.5],[8,13]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/large other capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",5],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,11],[8,14]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large admin2 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",2],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/large non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",6],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,11],[8,14]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/large admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",4],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,10],[6,11],[8,14]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large non capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",3],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large admin1 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",1],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"City small scale/x large admin0 capital",type:"symbol",source:"esri","source-layer":"City small scale",filter:["==","_symbol",0],minzoom:2,maxzoom:10,layout:{"symbol-avoid-edges":!0,"text-font":["Ubuntu Regular"],"text-max-width":6,"text-field":"{_name}","text-letter-spacing":.05,"text-padding":1,"text-size":{stops:[[3,11],[6,12],[8,15]]}},paint:{"text-color":"#353635","text-halo-color":"#efefef","text-halo-width":1,"text-halo-blur":1}},{id:"Admin0 point/2x large",type:"symbol",source:"esri","source-layer":"Admin0 point",filter:["==","_label_class",0],minzoom:2,maxzoom:6,layout:{"text-max-width":6,"text-field":"{_name}","text-padding":1,"symbol-avoid-edges":!0,"text-font":["Ubuntu Bold"],"text-line-height":1.7,"text-letter-spacing":{stops:[[2,.3],[5,.5]]},"text-size":{stops:[[2,12],[4,15.5],[5,18]]},"text-transform":"uppercase"},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}},{id:"Disputed label point/Island",type:"symbol",source:"esri","source-layer":"Disputed label point",filter:["all",["==","_label_class",1],["in","DisputeID",0]],minzoom:6,layout:{"icon-image":"Disputed label point","icon-allow-overlap":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[6,7],[15,10]]},"text-letter-spacing":.13,"text-max-width":4,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#808080","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":1}},{id:"Disputed label point/Waterbody",type:"symbol",source:"esri","source-layer":"Disputed label point",filter:["all",["==","_label_class",0],["in","DisputeID",1006]],minzoom:2,maxzoom:10,layout:{"icon-image":"Disputed label point","icon-allow-overlap":!0,"text-font":["Ubuntu Italic"],"text-size":{stops:[[2,8],[6,9.3]]},"text-letter-spacing":.1,"text-max-width":4,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#888f91","text-halo-blur":1,"text-halo-color":"#efefef","text-halo-width":.5}},{id:"Disputed label point/Admin0",type:"symbol",source:"esri","source-layer":"Disputed label point",filter:["all",["==","_label_class",2],["in","DisputeID",1021]],minzoom:2,layout:{"icon-image":"Disputed label point","icon-allow-overlap":!0,"text-font":["Ubuntu Bold"],"text-size":{stops:[[2,8],[4,10],[10,16]]},"text-transform":"uppercase","text-letter-spacing":{stops:[[2,.13],[8,.5]]},"text-max-width":6,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#aaafac","text-halo-color":"#F7F7F7","text-halo-width":1,"text-halo-blur":1}}],b0e={arcgisStyleUrl:"https://www.arcgis.com/sharing/rest/content/items/96ed54f1daf24a6992b7e7317bebd744/resources/styles/root.json",arcgisOriginalItemTitle:"Light Gray Canvas (for Developers)",arcgisQuickEditorWarning:!0},_0e={version:m0e,glyphs:g0e,sources:v0e,layers:w0e,metadata:b0e},S0e=8,T0e="https://tiles.arcgis.com/tiles/at3rDjch5X7i9Bag/arcgis/rest/services/Moderate_SLR_eraseOB_VTile2/VectorTileServer/resources/sprites/sprite",E0e="https://tiles.arcgis.com/tiles/at3rDjch5X7i9Bag/arcgis/rest/services/Moderate_SLR_eraseOB_VTile2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf",A0e={stormwater:{type:"vector",bounds:[-180,-85.0511,180,85.0511],minzoom:0,maxzoom:20,scheme:"xyz",url:"https://tiles.arcgis.com/tiles/at3rDjch5X7i9Bag/arcgis/rest/services/Moderate_SLR_eraseOB_VTile2/VectorTileServer/"},sandy:{type:"vector",bounds:[-74.2556,40.4961,-73.725,40.9155],minzoom:0,maxzoom:23,scheme:"xyz",url:"https://vectortileservices6.arcgis.com/QBTLpj07hLeyQqJB/arcgis/rest/services/Sandy_Inundation_Zone_/VectorTileServer"}},x0e=[{id:"Area not included in analysis:1",type:"fill",source:"stormwater","source-layer":"Area not included in analysis:1",layout:{},paint:{"fill-color":"rgba(189, 189, 189, 0.7)"}},{id:"Area under analysis",type:"fill",source:"stormwater","source-layer":"Area under analysis",layout:{},paint:{"fill-color":"rgba(189, 189, 189, 0.7)"}},{id:"Area not included in analysis:2",type:"fill",source:"stormwater","source-layer":"Area not included in analysis:2",layout:{},paint:{"fill-color":"rgba(189, 189, 189, 0.7)"}},{id:"National Wetlands Inventory/1",type:"fill",source:"stormwater","source-layer":"National Wetlands Inventory",layout:{},paint:{"fill-color":"rgba(189, 189, 189, 0.7)"}},{id:"Sandy Inundation Zone",type:"fill",source:"sandy","source-layer":"NYC_large_polygon_split_up(1)",layout:{},paint:{"fill-color":"rgba(76,129,205,0.75)","fill-outline-color":"rgba(0,0,0,0.2)"}},{id:"Nuisance Flooding (greater or equal to 4 in and less than 1ft)/1",type:"fill",source:"stormwater","source-layer":"Nuisance Flooding (greater or equal to 4 in and less than 1ft)",layout:{},paint:{"fill-color":"#73B2FF"}},{id:"Deep and Contiguous Flooding (1ft and greater)/1",type:"fill",source:"stormwater","source-layer":"Deep and Contiguous Flooding (1ft and greater)",layout:{},paint:{"fill-color":"#005CE6"}},{id:"Future High Tides 2050",type:"fill",source:"stormwater","source-layer":"Future High Tides 2050 ",layout:{},paint:{"fill-color":"#FFAA00"}}],C0e={version:S0e,sprite:T0e,glyphs:E0e,sources:A0e,layers:x0e},I0e=8,M0e="https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf",N0e={subway:{type:"vector",url:"https://vectortileservices6.arcgis.com/QBTLpj07hLeyQqJB/arcgis/rest/services/NYC_Subway_Station_Points/VectorTileServer"}},R0e=[{id:"NYC_Subway_Station_Points",type:"circle",source:"subway","source-layer":"main.subway_stations2",minzoom:8,paint:{"circle-color":"rgba(255, 255, 255, 1)","circle-opacity":{stops:[[11,0],[12,1]]},"circle-stroke-opacity":{stops:[[11,0],[12,1]]},"circle-radius":{stops:[[10,2],[14,5]]},"circle-stroke-width":1,"circle-pitch-scale":"map"}},{id:"subway_stations_labels",minzoom:13,source:"subway","source-layer":"main.subway_stations2",type:"symbol",layout:{"text-field":"{_name}","symbol-placement":"point","symbol-spacing":250,"symbol-avoid-edges":!1,"text-size":14,"text-anchor":"center","text-font":["Ubuntu Italic"]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1,"text-translate":[1,20],"text-opacity":{stops:[[12,0],[15,1]]}}}],P0e={version:I0e,glyphs:M0e,sources:N0e,layers:R0e},$0e="FeatureCollection",D0e="ida",L0e={type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},O0e=[{type:"Feature",properties:{"Unique Key":51718789,"Created Date":"09/01/2021 06:35:00 PM","Closed Date":"09/01/2021 08:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10027,"Incident Address":"11 WEST  129 STREET","Street Name":"WEST  129 STREET","Cross Street 1":"5 AVE","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 08:30:00 PM","Community Board":"10 MANHATTAN",BBL:1017270028,Borough:"MANHATTAN","X Coordinate (State Plane)":1000434,"Y Coordinate (State Plane)":234185,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80944473216209,Longitude:-73.9415372004145,Location:"(40.80944473216209, -73.9415372004145)"},geometry:{type:"Point",coordinates:[-73.9415372004145,40.80944473216209]}},{type:"Feature",properties:{"Unique Key":51728874,"Created Date":"09/01/2021 08:08:00 PM","Closed Date":"09/01/2021 08:55:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10034,"Incident Address":"557 ISHAM STREET","Street Name":"ISHAM STREET","Cross Street 1":"VERMILYEA AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 08:55:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1006574,"Y Coordinate (State Plane)":255307,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.86740508013353,Longitude:-73.91928687783799,Location:"(40.86740508013353, -73.91928687783799)"},geometry:{type:"Point",coordinates:[-73.91928687783799,40.86740508013353]}},{type:"Feature",properties:{"Unique Key":51722197,"Created Date":"09/01/2021 08:54:00 PM","Closed Date":"09/04/2021 11:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Other Sewer Problem (Use Comments) (SZZ)","Location Type":null,"Incident Zip":10036,"Incident Address":"663 9 AVENUE","Street Name":"9 AVENUE","Cross Street 1":"W 45 ST","Cross Street 2":"W 46 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and resolved the issue.","Resolution Action Updated Date":"09/04/2021 11:45:00 AM","Community Board":"04 MANHATTAN",BBL:1010550036,Borough:"MANHATTAN","X Coordinate (State Plane)":986788,"Y Coordinate (State Plane)":216493,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.760899370879606,Longitude:-73.99083845589195,Location:"(40.760899370879606, -73.99083845589195)"},geometry:{type:"Point",coordinates:[-73.99083845589195,40.760899370879606]}},{type:"Feature",properties:{"Unique Key":51728984,"Created Date":"09/01/2021 08:54:00 PM","Closed Date":"09/05/2021 04:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10025,"Incident Address":"255 WEST   93 STREET","Street Name":"WEST   93 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"WEST END AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/05/2021 04:40:00 PM","Community Board":"07 MANHATTAN",BBL:1012410108,Borough:"MANHATTAN","X Coordinate (State Plane)":991496,"Y Coordinate (State Plane)":228190,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.793001949931174,Longitude:-73.97383114235681,Location:"(40.793001949931174, -73.97383114235681)"},geometry:{type:"Point",coordinates:[-73.97383114235681,40.793001949931174]}},{type:"Feature",properties:{"Unique Key":51723871,"Created Date":"09/01/2021 09:02:00 PM","Closed Date":"09/01/2021 09:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10128,"Incident Address":"1120 PARK AVENUE","Street Name":"PARK AVENUE","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 09:45:00 PM","Community Board":"08 MANHATTAN",BBL:1015020033,Borough:"MANHATTAN","X Coordinate (State Plane)":996515,"Y Coordinate (State Plane)":224549,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78300284092864,Longitude:-73.95571172396143,Location:"(40.78300284092864, -73.95571172396143)"},geometry:{type:"Point",coordinates:[-73.95571172396143,40.78300284092864]}},{type:"Feature",properties:{"Unique Key":51715388,"Created Date":"09/01/2021 09:11:00 PM","Closed Date":"09/01/2021 09:11:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10019,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"11 AVENUE","Intersection Street 2":"WEST 59 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 09:55:00 AM","Community Board":"04 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":986894,"Y Coordinate (State Plane)":220396,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77161206451384,Longitude:-73.99045428715185,Location:"(40.77161206451384, -73.99045428715185)"},geometry:{type:"Point",coordinates:[-73.99045428715185,40.77161206451384]}},{type:"Feature",properties:{"Unique Key":51722195,"Created Date":"09/01/2021 09:15:00 PM","Closed Date":"09/01/2021 09:16:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Other Sewer Problem (Use Comments) (SZZ)","Location Type":null,"Incident Zip":10009,"Incident Address":"5 AVENUE A","Street Name":"AVENUE A","Cross Street 1":"E 1 ST","Cross Street 2":"E 2 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and resolved the issue.","Resolution Action Updated Date":"09/01/2021 09:16:00 PM","Community Board":"03 MANHATTAN",BBL:1004290042,Borough:"MANHATTAN","X Coordinate (State Plane)":988095,"Y Coordinate (State Plane)":202505,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72250532442226,Longitude:-73.98612850928905,Location:"(40.72250532442226, -73.98612850928905)"},geometry:{type:"Point",coordinates:[-73.98612850928905,40.72250532442226]}},{type:"Feature",properties:{"Unique Key":51724889,"Created Date":"09/01/2021 09:18:00 PM","Closed Date":"09/01/2021 09:35:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10009,"Incident Address":"9 AVENUE A","Street Name":"AVENUE A","Cross Street 1":"E 1 ST","Cross Street 2":"E 2 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/01/2021 09:35:00 PM","Community Board":"03 MANHATTAN",BBL:1004290040,Borough:"MANHATTAN","X Coordinate (State Plane)":988111,"Y Coordinate (State Plane)":202534,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.722584915439576,Longitude:-73.98607076993538,Location:"(40.722584915439576, -73.98607076993538)"},geometry:{type:"Point",coordinates:[-73.98607076993538,40.722584915439576]}},{type:"Feature",properties:{"Unique Key":51717574,"Created Date":"09/01/2021 09:24:00 PM","Closed Date":"09/05/2021 12:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Other Sewer Problem (Use Comments) (SZZ)","Location Type":null,"Incident Zip":10029,"Incident Address":"2165 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 111 ST","Cross Street 2":"E 112 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and resolved the issue.","Resolution Action Updated Date":"09/05/2021 12:50:00 PM","Community Board":"11 MANHATTAN",BBL:1016830030,Borough:"MANHATTAN","X Coordinate (State Plane)":1001601,"Y Coordinate (State Plane)":228333,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79338038300756,Longitude:-73.93733667375174,Location:"(40.79338038300756, -73.93733667375174)"},geometry:{type:"Point",coordinates:[-73.93733667375174,40.79338038300756]}},{type:"Feature",properties:{"Unique Key":51728845,"Created Date":"09/01/2021 09:27:00 PM","Closed Date":"09/03/2021 10:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10075,"Incident Address":"20 EAST   80 STREET","Street Name":"EAST   80 STREET","Cross Street 1":"5 AVE","Cross Street 2":"MADISON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 10:45:00 AM","Community Board":"08 MANHATTAN",BBL:1014910060,Borough:"MANHATTAN","X Coordinate (State Plane)":994685,"Y Coordinate (State Plane)":222465,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77728516288154,Longitude:-73.962322994457,Location:"(40.77728516288154, -73.962322994457)"},geometry:{type:"Point",coordinates:[-73.962322994457,40.77728516288154]}},{type:"Feature",properties:{"Unique Key":51712916,"Created Date":"09/01/2021 09:36:00 PM","Closed Date":"09/05/2021 09:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10065,"Incident Address":"44 EAST   68 STREET","Street Name":"EAST   68 STREET","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/05/2021 09:30:00 AM","Community Board":"08 MANHATTAN",BBL:1013820043,Borough:"MANHATTAN","X Coordinate (State Plane)":993427,"Y Coordinate (State Plane)":219457,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.769030386183736,Longitude:-73.96686928409133,Location:"(40.769030386183736, -73.96686928409133)"},geometry:{type:"Point",coordinates:[-73.96686928409133,40.769030386183736]}},{type:"Feature",properties:{"Unique Key":51726569,"Created Date":"09/01/2021 09:41:00 PM","Closed Date":"09/01/2021 09:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10011,"Incident Address":"429 WEST   24 STREET","Street Name":"WEST   24 STREET","Cross Street 1":"9 AVE","Cross Street 2":"10 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/01/2021 09:50:00 PM","Community Board":"04 MANHATTAN",BBL:1007220020,Borough:"MANHATTAN","X Coordinate (State Plane)":983741,"Y Coordinate (State Plane)":211639,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74757672344629,Longitude:-74.0018369950305,Location:"(40.74757672344629, -74.0018369950305)"},geometry:{type:"Point",coordinates:[-74.0018369950305,40.74757672344629]}},{type:"Feature",properties:{"Unique Key":51722823,"Created Date":"09/01/2021 09:41:00 PM","Closed Date":"09/02/2021 08:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10013,"Incident Address":"17 THOMPSON STREET","Street Name":"THOMPSON STREET","Cross Street 1":"BEND","Cross Street 2":"GRAND ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:10:00 AM","Community Board":"02 MANHATTAN",BBL:1002270055,Borough:"MANHATTAN","X Coordinate (State Plane)":982976,"Y Coordinate (State Plane)":202527,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7225664529733,Longitude:-74.00459617563315,Location:"(40.7225664529733, -74.00459617563315)"},geometry:{type:"Point",coordinates:[-74.00459617563315,40.7225664529733]}},{type:"Feature",properties:{"Unique Key":51717735,"Created Date":"09/01/2021 09:45:00 PM","Closed Date":"09/02/2021 01:05:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10019,"Incident Address":"641 WEST   51 STREET","Street Name":"WEST   51 STREET","Cross Street 1":"11 AVE","Cross Street 2":"12 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:05:00 AM","Community Board":"04 MANHATTAN",BBL:1010990010,Borough:"MANHATTAN","X Coordinate (State Plane)":985618,"Y Coordinate (State Plane)":218672,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76688042241679,Longitude:-73.99506141928606,Location:"(40.76688042241679, -73.99506141928606)"},geometry:{type:"Point",coordinates:[-73.99506141928606,40.76688042241679]}},{type:"Feature",properties:{"Unique Key":51713336,"Created Date":"09/01/2021 09:48:00 PM","Closed Date":"09/02/2021 01:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10065,"Incident Address":"342 EAST   67 STREET","Street Name":"EAST   67 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:00:00 AM","Community Board":"08 MANHATTAN",BBL:1014410031,Borough:"MANHATTAN","X Coordinate (State Plane)":995433,"Y Coordinate (State Plane)":218047,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76515799198971,Longitude:-73.9596295893541,Location:"(40.76515799198971, -73.9596295893541)"},geometry:{type:"Point",coordinates:[-73.9596295893541,40.76515799198971]}},{type:"Feature",properties:{"Unique Key":51712536,"Created Date":"09/01/2021 09:49:00 PM","Closed Date":"09/01/2021 10:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10010,"Incident Address":"1107 BROADWAY","Street Name":"BROADWAY","Cross Street 1":"BEND","Cross Street 2":"W 25 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The status of this Service Request is currently not available online. Please call 311 for further assistance. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/01/2021 10:40:00 PM","Community Board":"05 MANHATTAN",BBL:1008267501,Borough:"MANHATTAN","X Coordinate (State Plane)":987239,"Y Coordinate (State Plane)":209878,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.742742728974946,Longitude:-73.98921339926879,Location:"(40.742742728974946, -73.98921339926879)"},geometry:{type:"Point",coordinates:[-73.98921339926879,40.742742728974946]}},{type:"Feature",properties:{"Unique Key":51727252,"Created Date":"09/01/2021 09:50:00 PM","Closed Date":"09/05/2021 06:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"362 WEST  121 STREET","Street Name":"WEST  121 STREET","Cross Street 1":"MANHATTAN AVE","Cross Street 2":"MORNINGSIDE AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 06:20:00 PM","Community Board":"10 MANHATTAN",BBL:1019470060,Borough:"MANHATTAN","X Coordinate (State Plane)":996658,"Y Coordinate (State Plane)":233838,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.808498423505284,Longitude:-73.95517819566254,Location:"(40.808498423505284, -73.95517819566254)"},geometry:{type:"Point",coordinates:[-73.95517819566254,40.808498423505284]}},{type:"Feature",properties:{"Unique Key":51729745,"Created Date":"09/01/2021 09:54:00 PM","Closed Date":"09/02/2021 08:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10075,"Incident Address":"2 EAST END AVENUE","Street Name":"EAST END AVENUE","Cross Street 1":"E 79 ST","Cross Street 2":"E 80 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:30:00 AM","Community Board":"08 MANHATTAN",BBL:1015760023,Borough:"MANHATTAN","X Coordinate (State Plane)":998651,"Y Coordinate (State Plane)":219995,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77050008929813,Longitude:-73.94800850105914,Location:"(40.77050008929813, -73.94800850105914)"},geometry:{type:"Point",coordinates:[-73.94800850105914,40.77050008929813]}},{type:"Feature",properties:{"Unique Key":51728980,"Created Date":"09/01/2021 09:54:00 PM","Closed Date":"09/02/2021 02:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"347 EAST  104 STREET","Street Name":"EAST  104 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:45:00 AM","Community Board":"11 MANHATTAN",BBL:1016760022,Borough:"MANHATTAN","X Coordinate (State Plane)":1000240,"Y Coordinate (State Plane)":226679,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78884316674628,Longitude:-73.94225587634332,Location:"(40.78884316674628, -73.94225587634332)"},geometry:{type:"Point",coordinates:[-73.94225587634332,40.78884316674628]}},{type:"Feature",properties:{"Unique Key":51713321,"Created Date":"09/01/2021 09:55:00 PM","Closed Date":"09/02/2021 02:15:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10025,"Incident Address":"255 WEST   93 STREET","Street Name":"WEST   93 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"WEST END AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:15:00 AM","Community Board":"07 MANHATTAN",BBL:1012410108,Borough:"MANHATTAN","X Coordinate (State Plane)":991496,"Y Coordinate (State Plane)":228190,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.793001949931174,Longitude:-73.97383114235681,Location:"(40.793001949931174, -73.97383114235681)"},geometry:{type:"Point",coordinates:[-73.97383114235681,40.793001949931174]}},{type:"Feature",properties:{"Unique Key":51720064,"Created Date":"09/01/2021 09:59:00 PM","Closed Date":"09/04/2021 09:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10014,"Incident Address":"68 JANE STREET","Street Name":"JANE STREET","Cross Street 1":"GREENWICH ST","Cross Street 2":"WASHINGTON ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 09:55:00 AM","Community Board":"02 MANHATTAN",BBL:1006410052,Borough:"MANHATTAN","X Coordinate (State Plane)":982387,"Y Coordinate (State Plane)":208198,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73813185551251,Longitude:-74.00672266526844,Location:"(40.73813185551251, -74.00672266526844)"},geometry:{type:"Point",coordinates:[-74.00672266526844,40.73813185551251]}},{type:"Feature",properties:{"Unique Key":51715790,"Created Date":"09/01/2021 10:02:00 PM","Closed Date":"09/02/2021 02:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10128,"Incident Address":"1724 2 AVENUE","Street Name":"2 AVENUE","Cross Street 1":"E 89 ST","Cross Street 2":"E 90 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:00:00 AM","Community Board":"08 MANHATTAN",BBL:1015527501,Borough:"MANHATTAN","X Coordinate (State Plane)":998076,"Y Coordinate (State Plane)":223511,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.780151502574405,Longitude:-73.95007717156378,Location:"(40.780151502574405, -73.95007717156378)"},geometry:{type:"Point",coordinates:[-73.95007717156378,40.780151502574405]}},{type:"Feature",properties:{"Unique Key":51726619,"Created Date":"09/01/2021 10:02:00 PM","Closed Date":"09/02/2021 12:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10019,"Incident Address":"363 WEST   51 STREET","Street Name":"WEST   51 STREET","Cross Street 1":"8 AVE","Cross Street 2":"9 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 12:35:00 AM","Community Board":"04 MANHATTAN",BBL:1010420005,Borough:"MANHATTAN","X Coordinate (State Plane)":987642,"Y Coordinate (State Plane)":217554,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76381125651034,Longitude:-73.98775519452555,Location:"(40.76381125651034, -73.98775519452555)"},geometry:{type:"Point",coordinates:[-73.98775519452555,40.76381125651034]}},{type:"Feature",properties:{"Unique Key":51717914,"Created Date":"09/01/2021 10:06:00 PM","Closed Date":"09/05/2021 05:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"210 WEST  138 STREET","Street Name":"WEST  138 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 05:20:00 PM","Community Board":"10 MANHATTAN",BBL:1020230140,Borough:"MANHATTAN","X Coordinate (State Plane)":1000028,"Y Coordinate (State Plane)":237123,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.817509455144986,Longitude:-73.94299692089366,Location:"(40.817509455144986, -73.94299692089366)"},geometry:{type:"Point",coordinates:[-73.94299692089366,40.817509455144986]}},{type:"Feature",properties:{"Unique Key":51719482,"Created Date":"09/01/2021 10:06:00 PM","Closed Date":"09/01/2021 10:35:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10013,"Incident Address":"4 CENTRE MARKET PLACE","Street Name":"CENTRE MARKET PLACE","Cross Street 1":"BAXTER ST","Cross Street 2":"BROOME ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 10:35:00 PM","Community Board":"02 MANHATTAN",BBL:1004710004,Borough:"MANHATTAN","X Coordinate (State Plane)":984838,"Y Coordinate (State Plane)":201535,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71984372456594,Longitude:-73.9978787748311,Location:"(40.71984372456594, -73.9978787748311)"},geometry:{type:"Point",coordinates:[-73.9978787748311,40.71984372456594]}},{type:"Feature",properties:{"Unique Key":51718250,"Created Date":"09/01/2021 10:11:00 PM","Closed Date":"09/05/2021 06:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"537 WEST  217 STREET","Street Name":"WEST  217 STREET","Cross Street 1":"PARK TER E","Cross Street 2":"PARK TER W","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 06:00:00 PM","Community Board":"12 MANHATTAN",BBL:1022430300,Borough:"MANHATTAN","X Coordinate (State Plane)":1007411,"Y Coordinate (State Plane)":256717,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.87127294149584,Longitude:-73.91625580623466,Location:"(40.87127294149584, -73.91625580623466)"},geometry:{type:"Point",coordinates:[-73.91625580623466,40.87127294149584]}},{type:"Feature",properties:{"Unique Key":51726864,"Created Date":"09/01/2021 10:11:00 PM","Closed Date":"09/05/2021 04:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"152 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"ACADEMY ST","Cross Street 2":"W 204 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/05/2021 04:45:00 PM","Community Board":"12 MANHATTAN",BBL:1022250038,Borough:"MANHATTAN","X Coordinate (State Plane)":1005496,"Y Coordinate (State Plane)":254294,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.86462736420933,Longitude:-73.92318763020528,Location:"(40.86462736420933, -73.92318763020528)"},geometry:{type:"Point",coordinates:[-73.92318763020528,40.86462736420933]}},{type:"Feature",properties:{"Unique Key":51716015,"Created Date":"09/01/2021 10:12:00 PM","Closed Date":"09/02/2021 01:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10014,"Incident Address":"180 CHRISTOPHER STREET","Street Name":"CHRISTOPHER STREET","Cross Street 1":"WASHINGTON ST","Cross Street 2":"WEEHAWKEN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:00:00 AM","Community Board":"02 MANHATTAN",BBL:1006040003,Borough:"MANHATTAN","X Coordinate (State Plane)":981500,"Y Coordinate (State Plane)":206122,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73243351620026,Longitude:-74.00992257034451,Location:"(40.73243351620026, -74.00992257034451)"},geometry:{type:"Point",coordinates:[-74.00992257034451,40.73243351620026]}},{type:"Feature",properties:{"Unique Key":51718316,"Created Date":"09/01/2021 10:15:00 PM","Closed Date":"09/02/2021 01:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10023,"Incident Address":"55 WEST   69 STREET","Street Name":"WEST   69 STREET","Cross Street 1":"CENTRAL PARK W","Cross Street 2":"COLUMBUS AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:40:00 AM","Community Board":"07 MANHATTAN",BBL:1011220007,Borough:"MANHATTAN","X Coordinate (State Plane)":989926,"Y Coordinate (State Plane)":221702,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.775195265693874,Longitude:-73.97950666341458,Location:"(40.775195265693874, -73.97950666341458)"},geometry:{type:"Point",coordinates:[-73.97950666341458,40.775195265693874]}},{type:"Feature",properties:{"Unique Key":51720241,"Created Date":"09/01/2021 10:15:00 PM","Closed Date":"09/02/2021 12:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10065,"Incident Address":"333 EAST   66 STREET","Street Name":"EAST   66 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 12:30:00 AM","Community Board":"08 MANHATTAN",BBL:1014410017,Borough:"MANHATTAN","X Coordinate (State Plane)":995262,"Y Coordinate (State Plane)":217850,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76461749257886,Longitude:-73.9602472186511,Location:"(40.76461749257886, -73.9602472186511)"},geometry:{type:"Point",coordinates:[-73.9602472186511,40.76461749257886]}},{type:"Feature",properties:{"Unique Key":51714811,"Created Date":"09/01/2021 10:18:00 PM","Closed Date":"09/01/2021 10:25:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10033,"Incident Address":"554 WEST  181 STREET","Street Name":"WEST  181 STREET","Cross Street 1":"AUDUBON AVE","Cross Street 2":"ST NICHOLAS AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 10:25:00 PM","Community Board":"12 MANHATTAN",BBL:1021530068,Borough:"MANHATTAN","X Coordinate (State Plane)":1002821,"Y Coordinate (State Plane)":248581,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.84895292564862,Longitude:-73.93287459602605,Location:"(40.84895292564862, -73.93287459602605)"},geometry:{type:"Point",coordinates:[-73.93287459602605,40.84895292564862]}},{type:"Feature",properties:{"Unique Key":51713862,"Created Date":"09/01/2021 10:18:00 PM","Closed Date":"09/02/2021 11:23:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"347 EAST  104 STREET","Street Name":"EAST  104 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has determined that this issue was previously reported by another customer The original complaint is being addressed. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 11:23:00 PM","Community Board":"11 MANHATTAN",BBL:1016760022,Borough:"MANHATTAN","X Coordinate (State Plane)":1000240,"Y Coordinate (State Plane)":226679,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78884316674628,Longitude:-73.94225587634332,Location:"(40.78884316674628, -73.94225587634332)"},geometry:{type:"Point",coordinates:[-73.94225587634332,40.78884316674628]}},{type:"Feature",properties:{"Unique Key":51729796,"Created Date":"09/01/2021 10:18:00 PM","Closed Date":"09/02/2021 11:23:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10014,"Incident Address":"180 CHRISTOPHER STREET","Street Name":"CHRISTOPHER STREET","Cross Street 1":"WASHINGTON ST","Cross Street 2":"WEEHAWKEN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has determined that this issue was previously reported by another customer The original complaint is being addressed. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 11:23:00 PM","Community Board":"02 MANHATTAN",BBL:1006040003,Borough:"MANHATTAN","X Coordinate (State Plane)":981500,"Y Coordinate (State Plane)":206122,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73243351620026,Longitude:-74.00992257034451,Location:"(40.73243351620026, -74.00992257034451)"},geometry:{type:"Point",coordinates:[-74.00992257034451,40.73243351620026]}},{type:"Feature",properties:{"Unique Key":51716344,"Created Date":"09/01/2021 10:23:00 PM","Closed Date":"09/02/2021 08:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10009,"Incident Address":"158 EAST    7 STREET","Street Name":"EAST    7 STREET","Cross Street 1":"AVENUE A","Cross Street 2":"AVENUE B","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:50:00 AM","Community Board":"03 MANHATTAN",BBL:1004020023,Borough:"MANHATTAN","X Coordinate (State Plane)":989143,"Y Coordinate (State Plane)":203612,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7255432534672,Longitude:-73.98234686650702,Location:"(40.7255432534672, -73.98234686650702)"},geometry:{type:"Point",coordinates:[-73.98234686650702,40.7255432534672]}},{type:"Feature",properties:{"Unique Key":51720330,"Created Date":"09/01/2021 10:24:00 PM","Closed Date":"09/02/2021 03:05:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"65 EAST  112 STREET","Street Name":"EAST  112 STREET","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 03:05:00 AM","Community Board":"11 MANHATTAN",BBL:1016200023,Borough:"MANHATTAN","X Coordinate (State Plane)":999309,"Y Coordinate (State Plane)":229648,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79699390401083,Longitude:-73.94561130581198,Location:"(40.79699390401083, -73.94561130581198)"},geometry:{type:"Point",coordinates:[-73.94561130581198,40.79699390401083]}},{type:"Feature",properties:{"Unique Key":51728422,"Created Date":"09/01/2021 10:31:00 PM","Closed Date":"09/01/2021 10:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10029,"Incident Address":"88 EAST  111 STREET","Street Name":"EAST  111 STREET","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/01/2021 10:45:00 PM","Community Board":"11 MANHATTAN",BBL:1016160039,Borough:"MANHATTAN","X Coordinate (State Plane)":999217,"Y Coordinate (State Plane)":229384,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79626945215548,Longitude:-73.94594417115646,Location:"(40.79626945215548, -73.94594417115646)"},geometry:{type:"Point",coordinates:[-73.94594417115646,40.79626945215548]}},{type:"Feature",properties:{"Unique Key":51723058,"Created Date":"09/01/2021 10:44:00 PM","Closed Date":"09/02/2021 09:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10025,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"AMSTERDAM AVENUE","Intersection Street 2":"WEST 107 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 09:30:00 AM","Community Board":"07 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":993881,"Y Coordinate (State Plane)":231145,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.801110343737164,Longitude:-73.96521350110491,Location:"(40.801110343737164, -73.96521350110491)"},geometry:{type:"Point",coordinates:[-73.96521350110491,40.801110343737164]}},{type:"Feature",properties:{"Unique Key":51724379,"Created Date":"09/01/2021 10:48:00 PM","Closed Date":"09/02/2021 10:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10027,"Incident Address":"17 WEST  123 STREET","Street Name":"WEST  123 STREET","Cross Street 1":"MT MORRIS PARK W","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 10:30:00 AM","Community Board":"10 MANHATTAN",BBL:1017210044,Borough:"MANHATTAN","X Coordinate (State Plane)":999417,"Y Coordinate (State Plane)":232913,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80595524891542,Longitude:-73.94521386633252,Location:"(40.80595524891542, -73.94521386633252)"},geometry:{type:"Point",coordinates:[-73.94521386633252,40.80595524891542]}},{type:"Feature",properties:{"Unique Key":51713028,"Created Date":"09/01/2021 10:48:00 PM","Closed Date":"09/04/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10029,"Incident Address":"172 EAST  108 STREET","Street Name":"EAST  108 STREET","Cross Street 1":"LEXINGTON AVE","Cross Street 2":"3 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 01:30:00 PM","Community Board":"11 MANHATTAN",BBL:1016350044,Borough:"MANHATTAN","X Coordinate (State Plane)":999620,"Y Coordinate (State Plane)":228262,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79318917480376,Longitude:-73.94449123736395,Location:"(40.79318917480376, -73.94449123736395)"},geometry:{type:"Point",coordinates:[-73.94449123736395,40.79318917480376]}},{type:"Feature",properties:{"Unique Key":51714222,"Created Date":"09/01/2021 10:49:00 PM","Closed Date":"09/02/2021 09:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10007,"Incident Address":"275 GREENWICH STREET","Street Name":"GREENWICH STREET","Cross Street 1":"MURRAY ST","Cross Street 2":"WARREN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 09:50:00 AM","Community Board":"01 MANHATTAN",BBL:1001327501,Borough:"MANHATTAN","X Coordinate (State Plane)":981134,"Y Coordinate (State Plane)":199851,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71522101949389,Longitude:-74.01124027078625,Location:"(40.71522101949389, -74.01124027078625)"},geometry:{type:"Point",coordinates:[-74.01124027078625,40.71522101949389]}},{type:"Feature",properties:{"Unique Key":51715838,"Created Date":"09/01/2021 10:51:00 PM","Closed Date":"09/02/2021 02:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10128,"Incident Address":"305 EAST   95 STREET","Street Name":"EAST   95 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 02:20:00 AM","Community Board":"08 MANHATTAN",BBL:1015580005,Borough:"MANHATTAN","X Coordinate (State Plane)":998885,"Y Coordinate (State Plane)":224694,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78339722067606,Longitude:-73.947153463463,Location:"(40.78339722067606, -73.947153463463)"},geometry:{type:"Point",coordinates:[-73.947153463463,40.78339722067606]}},{type:"Feature",properties:{"Unique Key":51716277,"Created Date":"09/01/2021 11:07:00 PM","Closed Date":"09/02/2021 10:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10019,"Incident Address":"714 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 49 ST","Cross Street 2":"W 50 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 10:10:00 AM","Community Board":"04 MANHATTAN",BBL:1010590001,Borough:"MANHATTAN","X Coordinate (State Plane)":986443,"Y Coordinate (State Plane)":217716,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76425628344515,Longitude:-73.99208342046582,Location:"(40.76425628344515, -73.99208342046582)"},geometry:{type:"Point",coordinates:[-73.99208342046582,40.76425628344515]}},{type:"Feature",properties:{"Unique Key":51715949,"Created Date":"09/01/2021 11:07:00 PM","Closed Date":"09/03/2021 11:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"236 WEST  138 STREET","Street Name":"WEST  138 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 11:30:00 AM","Community Board":"10 MANHATTAN",BBL:1020230053,Borough:"MANHATTAN","X Coordinate (State Plane)":999744,"Y Coordinate (State Plane)":237281,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81794362336055,Longitude:-73.94402259680882,Location:"(40.81794362336055, -73.94402259680882)"},geometry:{type:"Point",coordinates:[-73.94402259680882,40.81794362336055]}},{type:"Feature",properties:{"Unique Key":51713386,"Created Date":"09/01/2021 11:15:00 PM","Closed Date":"09/03/2021 02:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"23 EAST  109 STREET","Street Name":"EAST  109 STREET","Cross Street 1":"5 AVE","Cross Street 2":"MADISON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 02:30:00 PM","Community Board":"11 MANHATTAN",BBL:1016150014,Borough:"MANHATTAN","X Coordinate (State Plane)":998487,"Y Coordinate (State Plane)":229196,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79575464954403,Longitude:-73.9485810864412,Location:"(40.79575464954403, -73.9485810864412)"},geometry:{type:"Point",coordinates:[-73.9485810864412,40.79575464954403]}},{type:"Feature",properties:{"Unique Key":51718502,"Created Date":"09/01/2021 11:17:00 PM","Closed Date":"09/02/2021 10:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10013,"Incident Address":"26 THOMPSON STREET","Street Name":"THOMPSON STREET","Cross Street 1":"GRAND ST","Cross Street 2":"WATTS ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 10:30:00 AM","Community Board":"02 MANHATTAN",BBL:1004760054,Borough:"MANHATTAN","X Coordinate (State Plane)":983067,"Y Coordinate (State Plane)":202654,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.722915049889664,Longitude:-74.0042678996973,Location:"(40.722915049889664, -74.0042678996973)"},geometry:{type:"Point",coordinates:[-74.0042678996973,40.722915049889664]}},{type:"Feature",properties:{"Unique Key":51713383,"Created Date":"09/01/2021 11:21:00 PM","Closed Date":"09/03/2021 09:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10031,"Incident Address":"551 WEST  149 STREET","Street Name":"WEST  149 STREET","Cross Street 1":"AMSTERDAM AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:45:00 AM","Community Board":"09 MANHATTAN",BBL:1020810010,Borough:"MANHATTAN","X Coordinate (State Plane)":998881,"Y Coordinate (State Plane)":241079,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8283695267462,Longitude:-73.94713219888115,Location:"(40.8283695267462, -73.94713219888115)"},geometry:{type:"Point",coordinates:[-73.94713219888115,40.8283695267462]}},{type:"Feature",properties:{"Unique Key":51721620,"Created Date":"09/01/2021 11:29:00 PM","Closed Date":"09/03/2021 01:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10034,"Incident Address":"132 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"DYCKMAN ST","Cross Street 2":"ACADEMY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:35:00 AM","Community Board":"12 MANHATTAN",BBL:1022240031,Borough:"MANHATTAN","X Coordinate (State Plane)":1005174,"Y Coordinate (State Plane)":254136,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.864194471327956,Longitude:-73.92435227538378,Location:"(40.864194471327956, -73.92435227538378)"},geometry:{type:"Point",coordinates:[-73.92435227538378,40.864194471327956]}},{type:"Feature",properties:{"Unique Key":51713050,"Created Date":"09/01/2021 11:30:00 PM","Closed Date":"09/02/2021 04:15:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10030,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"FREDERICK DOUGLAS BOULEVARD","Intersection Street 2":"WEST 145 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 04:15:00 AM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1000326,"Y Coordinate (State Plane)":239064,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.822836414306245,Longitude:-73.94191565088148,Location:"(40.822836414306245, -73.94191565088148)"},geometry:{type:"Point",coordinates:[-73.94191565088148,40.822836414306245]}},{type:"Feature",properties:{"Unique Key":51722530,"Created Date":"09/01/2021 11:34:00 PM","Closed Date":"09/03/2021 03:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"132 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"DYCKMAN ST","Cross Street 2":"ACADEMY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 03:30:00 PM","Community Board":"12 MANHATTAN",BBL:1022240031,Borough:"MANHATTAN","X Coordinate (State Plane)":1005174,"Y Coordinate (State Plane)":254136,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.864194471327956,Longitude:-73.92435227538378,Location:"(40.864194471327956, -73.92435227538378)"},geometry:{type:"Point",coordinates:[-73.92435227538378,40.864194471327956]}},{type:"Feature",properties:{"Unique Key":51728851,"Created Date":"09/01/2021 11:35:00 PM","Closed Date":"09/02/2021 05:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10009,"Incident Address":"368 EAST   10 STREET","Street Name":"EAST   10 STREET","Cross Street 1":"AVENUE B","Cross Street 2":"AVENUE C","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:15:00 PM","Community Board":"03 MANHATTAN",BBL:1003920017,Borough:"MANHATTAN","X Coordinate (State Plane)":990147,"Y Coordinate (State Plane)":203911,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72636332342909,Longitude:-73.97872433894062,Location:"(40.72636332342909, -73.97872433894062)"},geometry:{type:"Point",coordinates:[-73.97872433894062,40.72636332342909]}},{type:"Feature",properties:{"Unique Key":51728630,"Created Date":"09/01/2021 11:35:00 PM","Closed Date":"09/04/2021 09:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10034,"Incident Address":"132 SHERMAN AVENUE","Street Name":"SHERMAN AVENUE","Cross Street 1":"DYCKMAN ST","Cross Street 2":"ACADEMY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 09:10:00 AM","Community Board":"12 MANHATTAN",BBL:1022240031,Borough:"MANHATTAN","X Coordinate (State Plane)":1005174,"Y Coordinate (State Plane)":254136,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.864194471327956,Longitude:-73.92435227538378,Location:"(40.864194471327956, -73.92435227538378)"},geometry:{type:"Point",coordinates:[-73.92435227538378,40.864194471327956]}},{type:"Feature",properties:{"Unique Key":51721821,"Created Date":"09/01/2021 11:39:00 PM","Closed Date":"09/03/2021 03:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10039,"Incident Address":"210 WEST  150 STREET","Street Name":"WEST  150 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 03:00:00 AM","Community Board":"10 MANHATTAN",BBL:1020350001,Borough:"MANHATTAN","X Coordinate (State Plane)":1001574,"Y Coordinate (State Plane)":239877,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8250655085719,Longitude:-73.9374043925822,Location:"(40.8250655085719, -73.9374043925822)"},geometry:{type:"Point",coordinates:[-73.9374043925822,40.8250655085719]}},{type:"Feature",properties:{"Unique Key":51713303,"Created Date":"09/01/2021 11:42:00 PM","Closed Date":"09/03/2021 12:25:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10001,"Incident Address":"427 WEST   26 STREET","Street Name":"WEST   26 STREET","Cross Street 1":"9 AVE","Cross Street 2":"10 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 12:25:00 PM","Community Board":"04 MANHATTAN",BBL:1007240015,Borough:"MANHATTAN","X Coordinate (State Plane)":983840,"Y Coordinate (State Plane)":212178,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.749056147946476,Longitude:-74.00147973416202,Location:"(40.749056147946476, -74.00147973416202)"},geometry:{type:"Point",coordinates:[-74.00147973416202,40.749056147946476]}},{type:"Feature",properties:{"Unique Key":51723331,"Created Date":"09/01/2021 11:43:00 PM","Closed Date":"09/03/2021 03:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10021,"Incident Address":"321 EAST   69 STREET","Street Name":"EAST   69 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 03:40:00 AM","Community Board":"08 MANHATTAN",BBL:1014440013,Borough:"MANHATTAN","X Coordinate (State Plane)":995721,"Y Coordinate (State Plane)":218491,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.766376288022975,Longitude:-73.9585891574314,Location:"(40.766376288022975, -73.9585891574314)"},geometry:{type:"Point",coordinates:[-73.9585891574314,40.766376288022975]}},{type:"Feature",properties:{"Unique Key":51729222,"Created Date":"09/01/2021 11:45:00 PM","Closed Date":"09/03/2021 12:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10027,"Incident Address":"316 WEST  121 STREET","Street Name":"WEST  121 STREET","Cross Street 1":"8 AVE","Cross Street 2":"MANHATTAN AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection inspected your complaint and cleaned the catch basin or inlet. If the condition returns, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:15:00 PM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":997015,"Y Coordinate (State Plane)":233641,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.807957204492084,Longitude:-73.95388896829371,Location:"(40.807957204492084, -73.95388896829371)"},geometry:{type:"Point",coordinates:[-73.95388896829371,40.807957204492084]}},{type:"Feature",properties:{"Unique Key":51727346,"Created Date":"09/01/2021 11:53:00 PM","Closed Date":"09/03/2021 10:15:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10031,"Incident Address":"611 WEST  148 STREET","Street Name":"WEST  148 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"RIVERSIDE DR","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:15:00 AM","Community Board":"09 MANHATTAN",BBL:1020950023,Borough:"MANHATTAN","X Coordinate (State Plane)":998139,"Y Coordinate (State Plane)":241193,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.82868362208559,Longitude:-73.94981311246337,Location:"(40.82868362208559, -73.94981311246337)"},geometry:{type:"Point",coordinates:[-73.94981311246337,40.82868362208559]}},{type:"Feature",properties:{"Unique Key":51719915,"Created Date":"09/01/2021 11:54:00 PM","Closed Date":"09/03/2021 11:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10027,"Incident Address":"15 WEST  123 STREET","Street Name":"WEST  123 STREET","Cross Street 1":"MT MORRIS PARK W","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection inspected your complaint and cleaned the catch basin or inlet. If the condition returns, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:40:00 AM","Community Board":"10 MANHATTAN",BBL:1017210045,Borough:"MANHATTAN","X Coordinate (State Plane)":999429,"Y Coordinate (State Plane)":232906,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80593601524096,Longitude:-73.9451705358527,Location:"(40.80593601524096, -73.9451705358527)"},geometry:{type:"Point",coordinates:[-73.9451705358527,40.80593601524096]}},{type:"Feature",properties:{"Unique Key":51716520,"Created Date":"09/02/2021 12:02:00 AM","Closed Date":"09/03/2021 10:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10031,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"RIVERSIDE DRIVE","Intersection Street 2":"WEST 150 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 10:50:00 AM","Community Board":"09 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":998173,"Y Coordinate (State Plane)":241761,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.830242565707835,Longitude:-73.94968907717427,Location:"(40.830242565707835, -73.94968907717427)"},geometry:{type:"Point",coordinates:[-73.94968907717427,40.830242565707835]}},{type:"Feature",properties:{"Unique Key":51715442,"Created Date":"09/02/2021 12:05:00 AM","Closed Date":"09/03/2021 11:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10019,"Incident Address":"714 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 49 ST","Cross Street 2":"W 50 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:10:00 AM","Community Board":"04 MANHATTAN",BBL:1010590001,Borough:"MANHATTAN","X Coordinate (State Plane)":986443,"Y Coordinate (State Plane)":217716,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76425628344515,Longitude:-73.99208342046582,Location:"(40.76425628344515, -73.99208342046582)"},geometry:{type:"Point",coordinates:[-73.99208342046582,40.76425628344515]}},{type:"Feature",properties:{"Unique Key":51720213,"Created Date":"09/02/2021 12:06:00 AM","Closed Date":"09/04/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10014,"Incident Address":"31 CORNELIA STREET","Street Name":"CORNELIA STREET","Cross Street 1":"W 4 ST","Cross Street 2":"BLEECKER ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/04/2021 01:30:00 PM","Community Board":"02 MANHATTAN",BBL:1005900047,Borough:"MANHATTAN","X Coordinate (State Plane)":983580,"Y Coordinate (State Plane)":205721,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73133327170276,Longitude:-74.0024174590359,Location:"(40.73133327170276, -74.0024174590359)"},geometry:{type:"Point",coordinates:[-74.0024174590359,40.73133327170276]}},{type:"Feature",properties:{"Unique Key":51727333,"Created Date":"09/02/2021 12:14:00 AM","Closed Date":"09/03/2021 11:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10039,"Incident Address":"255 WEST  148 STREET","Street Name":"WEST  148 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:10:00 AM","Community Board":"10 MANHATTAN",BBL:1020347501,Borough:"MANHATTAN","X Coordinate (State Plane)":1001071,"Y Coordinate (State Plane)":239571,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8242265979182,Longitude:-73.93922261412608,Location:"(40.8242265979182, -73.93922261412608)"},geometry:{type:"Point",coordinates:[-73.93922261412608,40.8242265979182]}},{type:"Feature",properties:{"Unique Key":51724821,"Created Date":"09/02/2021 12:14:00 AM","Closed Date":"09/03/2021 10:25:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"304 WEST  140 STREET","Street Name":"WEST  140 STREET","Cross Street 1":"FREDERICK DOUGLASS BLVD","Cross Street 2":"EDGECOMBE AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:25:00 AM","Community Board":"10 MANHATTAN",BBL:1020420020,Borough:"MANHATTAN","X Coordinate (State Plane)":999589,"Y Coordinate (State Plane)":237961,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81981030212251,Longitude:-73.94458103319248,Location:"(40.81981030212251, -73.94458103319248)"},geometry:{type:"Point",coordinates:[-73.94458103319248,40.81981030212251]}},{type:"Feature",properties:{"Unique Key":51715604,"Created Date":"09/02/2021 12:17:00 AM","Closed Date":"09/03/2021 10:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10037,"Incident Address":"2301 5 AVENUE","Street Name":"5 AVENUE","Cross Street 1":"HARLEM RIVER DRV NB EN E 139 ST","Cross Street 2":"W 141 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:45:00 AM","Community Board":"11 MANHATTAN",BBL:1017640001,Borough:"MANHATTAN","X Coordinate (State Plane)":1002072,"Y Coordinate (State Plane)":236393,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.815501923082124,Longitude:-73.93561425716618,Location:"(40.815501923082124, -73.93561425716618)"},geometry:{type:"Point",coordinates:[-73.93561425716618,40.815501923082124]}},{type:"Feature",properties:{"Unique Key":51726831,"Created Date":"09/02/2021 12:45:00 AM","Closed Date":"09/03/2021 05:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10013,"Incident Address":"137 WEST BROADWAY","Street Name":"WEST BROADWAY","Cross Street 1":"DUANE ST","Cross Street 2":"THOMAS ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 05:40:00 PM","Community Board":"01 MANHATTAN",BBL:1001470013,Borough:"MANHATTAN","X Coordinate (State Plane)":981978,"Y Coordinate (State Plane)":200428,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71680500334347,Longitude:-74.00819592493981,Location:"(40.71680500334347, -74.00819592493981)"},geometry:{type:"Point",coordinates:[-74.00819592493981,40.71680500334347]}},{type:"Feature",properties:{"Unique Key":51719800,"Created Date":"09/02/2021 12:45:00 AM","Closed Date":"09/02/2021 01:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10014,"Incident Address":"561 WEST STREET","Street Name":"WEST STREET","Cross Street 1":"GANSEVOORT ST","Cross Street 2":"LITTLE WEST 12 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 01:15:00 PM","Community Board":"02 MANHATTAN",BBL:1006440001,Borough:"MANHATTAN","X Coordinate (State Plane)":981694,"Y Coordinate (State Plane)":208934,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.740151819776095,Longitude:-74.00922364647828,Location:"(40.740151819776095, -74.00922364647828)"},geometry:{type:"Point",coordinates:[-74.00922364647828,40.740151819776095]}},{type:"Feature",properties:{"Unique Key":51713592,"Created Date":"09/02/2021 01:16:00 AM","Closed Date":"09/03/2021 09:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10031,"Incident Address":"511 WEST  152 STREET","Street Name":"WEST  152 STREET","Cross Street 1":"AMSTERDAM AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:30:00 AM","Community Board":"09 MANHATTAN",BBL:1020840124,Borough:"MANHATTAN","X Coordinate (State Plane)":999459,"Y Coordinate (State Plane)":241651,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.829938526400326,Longitude:-73.94504235172789,Location:"(40.829938526400326, -73.94504235172789)"},geometry:{type:"Point",coordinates:[-73.94504235172789,40.829938526400326]}},{type:"Feature",properties:{"Unique Key":51713564,"Created Date":"09/02/2021 03:52:00 AM","Closed Date":"09/03/2021 09:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"319 EAST  105 STREET","Street Name":"EAST  105 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:10:00 AM","Community Board":"11 MANHATTAN",BBL:1016777503,Borough:"MANHATTAN","X Coordinate (State Plane)":1000352,"Y Coordinate (State Plane)":226920,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78950444356466,Longitude:-73.94185083707163,Location:"(40.78950444356466, -73.94185083707163)"},geometry:{type:"Point",coordinates:[-73.94185083707163,40.78950444356466]}},{type:"Feature",properties:{"Unique Key":51719673,"Created Date":"09/02/2021 04:51:00 AM","Closed Date":"09/04/2021 11:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10009,"Incident Address":"24 AVENUE D","Street Name":"AVENUE D","Cross Street 1":"E 3 ST","Cross Street 2":"E 4 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/04/2021 11:40:00 AM","Community Board":"03 MANHATTAN",BBL:1003560001,Borough:"MANHATTAN","X Coordinate (State Plane)":990311,"Y Coordinate (State Plane)":201880,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72078860967276,Longitude:-73.97813447592229,Location:"(40.72078860967276, -73.97813447592229)"},geometry:{type:"Point",coordinates:[-73.97813447592229,40.72078860967276]}},{type:"Feature",properties:{"Unique Key":51727464,"Created Date":"09/02/2021 05:04:00 AM","Closed Date":"09/03/2021 11:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10018,"Incident Address":"465 12 AVENUE","Street Name":"12 AVENUE","Cross Street 1":"W 40 ST","Cross Street 2":"W 41 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:30:00 AM","Community Board":"04 MANHATTAN",BBL:1011070005,Borough:"MANHATTAN","X Coordinate (State Plane)":983670,"Y Coordinate (State Plane)":216500,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76091892934369,Longitude:-74.00209365529308,Location:"(40.76091892934369, -74.00209365529308)"},geometry:{type:"Point",coordinates:[-74.00209365529308,40.76091892934369]}},{type:"Feature",properties:{"Unique Key":51727072,"Created Date":"09/02/2021 05:52:00 AM","Closed Date":"12/24/2021 02:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10027,"Incident Address":"WEST  124 STREET","Street Name":"WEST  124 STREET","Cross Street 1":"FREDERICK DOUGLASS BOULEVARD","Cross Street 2":"MANHATTAN AVENUE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"BLOCKFACE",City:"MANHATTAN",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and has performed repair work.","Resolution Action Updated Date":"12/24/2021 02:20:00 PM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":997434,"Y Coordinate (State Plane)":234309,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80979006390317,Longitude:-73.95237410222053,Location:"(40.80979006390317, -73.95237410222053)"},geometry:{type:"Point",coordinates:[-73.95237410222053,40.80979006390317]}},{type:"Feature",properties:{"Unique Key":51713685,"Created Date":"09/02/2021 06:31:00 AM","Closed Date":"09/02/2021 08:25:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10039,"Incident Address":"2987 8 AVENUE","Street Name":"8 AVENUE","Cross Street 1":"HARLEM RIVER DRIVE SERVICE RD W","Cross Street 2":"HARLEM RIVER DRIVE SERVICE RD W","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Surcharge conditions have been confirmed due to rain intensity or volume.","Resolution Action Updated Date":"09/02/2021 08:25:00 AM","Community Board":"10 MANHATTAN",BBL:1021060050,Borough:"MANHATTAN","X Coordinate (State Plane)":1001924,"Y Coordinate (State Plane)":241941,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.830729904331186,Longitude:-73.93613432501654,Location:"(40.830729904331186, -73.93613432501654)"},geometry:{type:"Point",coordinates:[-73.93613432501654,40.830729904331186]}},{type:"Feature",properties:{"Unique Key":51713670,"Created Date":"09/02/2021 06:37:00 AM","Closed Date":"09/03/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"1425 AMSTERDAM AVENUE","Street Name":"AMSTERDAM AVENUE","Cross Street 1":"W 130 ST","Cross Street 2":"W 131 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:30:00 PM","Community Board":"09 MANHATTAN",BBL:1019700002,Borough:"MANHATTAN","X Coordinate (State Plane)":996868,"Y Coordinate (State Plane)":236535,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.815900639148985,Longitude:-73.95441453630735,Location:"(40.815900639148985, -73.95441453630735)"},geometry:{type:"Point",coordinates:[-73.95441453630735,40.815900639148985]}},{type:"Feature",properties:{"Unique Key":51714435,"Created Date":"09/02/2021 07:15:00 AM","Closed Date":"09/03/2021 04:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10023,"Incident Address":"114 WEST   74 STREET","Street Name":"WEST   74 STREET","Cross Street 1":"COLUMBUS AVE","Cross Street 2":"AMSTERDAM AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 04:20:00 AM","Community Board":"07 MANHATTAN",BBL:1011450138,Borough:"MANHATTAN","X Coordinate (State Plane)":990226,"Y Coordinate (State Plane)":223077,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77896908082277,Longitude:-73.97842228324052,Location:"(40.77896908082277, -73.97842228324052)"},geometry:{type:"Point",coordinates:[-73.97842228324052,40.77896908082277]}},{type:"Feature",properties:{"Unique Key":51722884,"Created Date":"09/02/2021 08:03:00 AM","Closed Date":"09/03/2021 11:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10037,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"EAST 138 STREET","Intersection Street 2":"MADISON AVENUE","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 11:50:00 AM","Community Board":"11 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1002289,"Y Coordinate (State Plane)":235866,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8140550153757,Longitude:-73.93483171548912,Location:"(40.8140550153757, -73.93483171548912)"},geometry:{type:"Point",coordinates:[-73.93483171548912,40.8140550153757]}},{type:"Feature",properties:{"Unique Key":51729156,"Created Date":"09/02/2021 08:20:00 AM","Closed Date":"09/03/2021 10:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10030,"Incident Address":"297 WEST  137 STREET","Street Name":"WEST  137 STREET","Cross Street 1":"NEW YORK RENS CT","Cross Street 2":"8 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/03/2021 10:10:00 AM","Community Board":"10 MANHATTAN",BBL:1020237503,Borough:"MANHATTAN","X Coordinate (State Plane)":999435,"Y Coordinate (State Plane)":237161,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81761479370668,Longitude:-73.94513923679516,Location:"(40.81761479370668, -73.94513923679516)"},geometry:{type:"Point",coordinates:[-73.94513923679516,40.81761479370668]}},{type:"Feature",properties:{"Unique Key":51715157,"Created Date":"09/02/2021 08:34:00 AM","Closed Date":"09/03/2021 11:05:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10027,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"8 AVENUE","Intersection Street 2":"WEST 131 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/03/2021 11:05:00 AM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":998528,"Y Coordinate (State Plane)":235821,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81393838213159,Longitude:-73.9484189199214,Location:"(40.81393838213159, -73.9484189199214)"},geometry:{type:"Point",coordinates:[-73.9484189199214,40.81393838213159]}},{type:"Feature",properties:{"Unique Key":51722376,"Created Date":"09/02/2021 08:34:00 AM","Closed Date":"09/03/2021 12:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"227 WEST  137 STREET","Street Name":"WEST  137 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 12:30:00 PM","Community Board":"10 MANHATTAN",BBL:1020230118,Borough:"MANHATTAN","X Coordinate (State Plane)":999818,"Y Coordinate (State Plane)":236949,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81703224667031,Longitude:-73.94375601658022,Location:"(40.81703224667031, -73.94375601658022)"},geometry:{type:"Point",coordinates:[-73.94375601658022,40.81703224667031]}},{type:"Feature",properties:{"Unique Key":51718481,"Created Date":"09/02/2021 08:46:00 AM","Closed Date":"09/03/2021 12:10:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10013,"Incident Address":"340 WEST BROADWAY","Street Name":"WEST BROADWAY","Cross Street 1":"GRAND ST","Cross Street 2":"BROOME ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:10:00 PM","Community Board":"02 MANHATTAN",BBL:1004760081,Borough:"MANHATTAN","X Coordinate (State Plane)":983246,"Y Coordinate (State Plane)":202529,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72257197725354,Longitude:-74.00362210417377,Location:"(40.72257197725354, -74.00362210417377)"},geometry:{type:"Point",coordinates:[-74.00362210417377,40.72257197725354]}},{type:"Feature",properties:{"Unique Key":51722899,"Created Date":"09/02/2021 09:07:00 AM","Closed Date":"09/02/2021 12:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10035,"Incident Address":"2262 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 116 ST","Cross Street 2":"E 117 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 12:00:00 PM","Community Board":"11 MANHATTAN",BBL:1017100102,Borough:"MANHATTAN","X Coordinate (State Plane)":1002181,"Y Coordinate (State Plane)":229369,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.796222763838294,Longitude:-73.93523923204485,Location:"(40.796222763838294, -73.93523923204485)"},geometry:{type:"Point",coordinates:[-73.93523923204485,40.796222763838294]}},{type:"Feature",properties:{"Unique Key":51727462,"Created Date":"09/02/2021 09:07:00 AM","Closed Date":"09/03/2021 12:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10034,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"NAGLE AVENUE","Intersection Street 2":"ACADEMY STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:30:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1005689,"Y Coordinate (State Plane)":253487,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.862411927499416,Longitude:-73.92249244372366,Location:"(40.862411927499416, -73.92249244372366)"},geometry:{type:"Point",coordinates:[-73.92249244372366,40.862411927499416]}},{type:"Feature",properties:{"Unique Key":51724999,"Created Date":"09/02/2021 09:30:00 AM","Closed Date":"09/02/2021 01:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"201 LENOX AVENUE","Street Name":"LENOX AVENUE","Cross Street 1":"W 120 ST","Cross Street 2":"W 121 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and found there was no sewer back up in the city system at the time of the inspection.","Resolution Action Updated Date":"09/02/2021 01:40:00 PM","Community Board":"10 MANHATTAN",BBL:1019050029,Borough:"MANHATTAN","X Coordinate (State Plane)":998715,"Y Coordinate (State Plane)":232450,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.804685618836274,Longitude:-73.94775062288356,Location:"(40.804685618836274, -73.94775062288356)"},geometry:{type:"Point",coordinates:[-73.94775062288356,40.804685618836274]}},{type:"Feature",properties:{"Unique Key":51724312,"Created Date":"09/02/2021 09:36:00 AM","Closed Date":"09/04/2021 03:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10034,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"ACADEMY STREET","Intersection Street 2":"10 AVENUE","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 03:00:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1005957,"Y Coordinate (State Plane)":252940,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.860909923099676,Longitude:-73.92152532619549,Location:"(40.860909923099676, -73.92152532619549)"},geometry:{type:"Point",coordinates:[-73.92152532619549,40.860909923099676]}},{type:"Feature",properties:{"Unique Key":51726481,"Created Date":"09/02/2021 09:36:00 AM","Closed Date":"09/04/2021 11:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10002,"Incident Address":"442 EAST HOUSTON STREET","Street Name":"EAST HOUSTON STREET","Cross Street 1":"LILLIAN WALD DR","Cross Street 2":"BARUCH DR","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 11:00:00 AM","Community Board":"03 MANHATTAN",BBL:1003560100,Borough:"MANHATTAN","X Coordinate (State Plane)":990375,"Y Coordinate (State Plane)":201446,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71959734020397,Longitude:-73.97790398594327,Location:"(40.71959734020397, -73.97790398594327)"},geometry:{type:"Point",coordinates:[-73.97790398594327,40.71959734020397]}},{type:"Feature",properties:{"Unique Key":51716469,"Created Date":"09/02/2021 09:40:00 AM","Closed Date":"09/03/2021 12:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10034,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"ACADEMY STREET","Intersection Street 2":"10 AVENUE","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:50:00 PM","Community Board":"12 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":1005957,"Y Coordinate (State Plane)":252940,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.860909923099676,Longitude:-73.92152532619549,Location:"(40.860909923099676, -73.92152532619549)"},geometry:{type:"Point",coordinates:[-73.92152532619549,40.860909923099676]}},{type:"Feature",properties:{"Unique Key":51718202,"Created Date":"09/02/2021 09:41:00 AM","Closed Date":"09/03/2021 12:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10001,"Incident Address":"313 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 28 ST","Cross Street 2":"W 29 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 12:00:00 PM","Community Board":"04 MANHATTAN",BBL:1007000029,Borough:"MANHATTAN","X Coordinate (State Plane)":983744,"Y Coordinate (State Plane)":212859,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.75092531614621,Longitude:-74.00182625974348,Location:"(40.75092531614621, -74.00182625974348)"},geometry:{type:"Point",coordinates:[-74.00182625974348,40.75092531614621]}},{type:"Feature",properties:{"Unique Key":51718333,"Created Date":"09/02/2021 09:52:00 AM","Closed Date":"09/03/2021 08:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10035,"Incident Address":"408 EAST  120 STREET","Street Name":"EAST  120 STREET","Cross Street 1":"1 AVE","Cross Street 2":"PLEASANT AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 08:30:00 AM","Community Board":"11 MANHATTAN",BBL:1018070044,Borough:"MANHATTAN","X Coordinate (State Plane)":1002770,"Y Coordinate (State Plane)":230164,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79840360723411,Longitude:-73.93310976954378,Location:"(40.79840360723411, -73.93310976954378)"},geometry:{type:"Point",coordinates:[-73.93310976954378,40.79840360723411]}},{type:"Feature",properties:{"Unique Key":51720568,"Created Date":"09/02/2021 09:53:00 AM","Closed Date":"09/02/2021 06:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10010,"Incident Address":"321 EAST   22 STREET","Street Name":"EAST   22 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 06:15:00 PM","Community Board":"06 MANHATTAN",BBL:1009280009,Borough:"MANHATTAN","X Coordinate (State Plane)":989603,"Y Coordinate (State Plane)":207762,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73693371969191,Longitude:-73.98068396117158,Location:"(40.73693371969191, -73.98068396117158)"},geometry:{type:"Point",coordinates:[-73.98068396117158,40.73693371969191]}},{type:"Feature",properties:{"Unique Key":51722637,"Created Date":"09/02/2021 09:59:00 AM","Closed Date":"09/04/2021 01:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10026,"Incident Address":"70 WEST  119 STREET","Street Name":"WEST  119 STREET","Cross Street 1":"5 AVE","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/04/2021 01:00:00 PM","Community Board":"10 MANHATTAN",BBL:1017170063,Borough:"MANHATTAN","X Coordinate (State Plane)":998901,"Y Coordinate (State Plane)":231998,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.80344469681812,Longitude:-73.94707975429094,Location:"(40.80344469681812, -73.94707975429094)"},geometry:{type:"Point",coordinates:[-73.94707975429094,40.80344469681812]}},{type:"Feature",properties:{"Unique Key":51715341,"Created Date":"09/02/2021 10:00:00 AM","Closed Date":"09/03/2021 12:55:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10065,"Incident Address":"416 EAST   65 STREET","Street Name":"EAST   65 STREET","Cross Street 1":"1 AVE","Cross Street 2":"YORK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 12:55:00 PM","Community Board":"08 MANHATTAN",BBL:1014590030,Borough:"MANHATTAN","X Coordinate (State Plane)":995790,"Y Coordinate (State Plane)":217253,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76297820824683,Longitude:-73.95834218965943,Location:"(40.76297820824683, -73.95834218965943)"},geometry:{type:"Point",coordinates:[-73.95834218965943,40.76297820824683]}},{type:"Feature",properties:{"Unique Key":51726617,"Created Date":"09/02/2021 10:02:00 AM","Closed Date":"09/02/2021 10:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10032,"Incident Address":"625 WEST  164 STREET","Street Name":"WEST  164 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"FT WASHINGTON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 10:50:00 AM","Community Board":"12 MANHATTAN",BBL:1021370152,Borough:"MANHATTAN","X Coordinate (State Plane)":1000210,"Y Coordinate (State Plane)":244845,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.83870380788671,Longitude:-73.94232101803048,Location:"(40.83870380788671, -73.94232101803048)"},geometry:{type:"Point",coordinates:[-73.94232101803048,40.83870380788671]}},{type:"Feature",properties:{"Unique Key":51729397,"Created Date":"09/02/2021 10:06:00 AM","Closed Date":"09/03/2021 01:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10027,"Incident Address":"120 WEST  127 STREET","Street Name":"WEST  127 STREET","Cross Street 1":"LENOX AVE","Cross Street 2":"ADAM CLAYTON POWELL JR BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:15:00 PM","Community Board":"10 MANHATTAN",BBL:1019110042,Borough:"MANHATTAN","X Coordinate (State Plane)":999366,"Y Coordinate (State Plane)":234177,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.809424666237135,Longitude:-73.94539524198386,Location:"(40.809424666237135, -73.94539524198386)"},geometry:{type:"Point",coordinates:[-73.94539524198386,40.809424666237135]}},{type:"Feature",properties:{"Unique Key":51719930,"Created Date":"09/02/2021 10:06:00 AM","Closed Date":"09/02/2021 10:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"198 NAGLE AVENUE","Street Name":"NAGLE AVENUE","Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 10:20:00 AM","Community Board":"12 MANHATTAN",BBL:1022170039,Borough:"MANHATTAN","X Coordinate (State Plane)":1005433,"Y Coordinate (State Plane)":253367,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.862083181837846,Longitude:-73.92341832905083,Location:"(40.862083181837846, -73.92341832905083)"},geometry:{type:"Point",coordinates:[-73.92341832905083,40.862083181837846]}},{type:"Feature",properties:{"Unique Key":51722163,"Created Date":"09/02/2021 10:14:00 AM","Closed Date":"09/03/2021 09:25:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10031,"Incident Address":"558 WEST  149 STREET","Street Name":"WEST  149 STREET","Cross Street 1":"AMSTERDAM AVE","Cross Street 2":"BROADWAY","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 09:25:00 AM","Community Board":"09 MANHATTAN",BBL:1020800054,Borough:"MANHATTAN","X Coordinate (State Plane)":998834,"Y Coordinate (State Plane)":241098,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.82842175403897,Longitude:-73.94730198780587,Location:"(40.82842175403897, -73.94730198780587)"},geometry:{type:"Point",coordinates:[-73.94730198780587,40.82842175403897]}},{type:"Feature",properties:{"Unique Key":51722363,"Created Date":"09/02/2021 10:14:00 AM","Closed Date":"09/02/2021 06:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10010,"Incident Address":"121 EAST   24 STREET","Street Name":"EAST   24 STREET","Cross Street 1":"PARK AVE S","Cross Street 2":"LEXINGTON AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 06:45:00 PM","Community Board":"05 MANHATTAN",BBL:1008800014,Borough:"MANHATTAN","X Coordinate (State Plane)":988436,"Y Coordinate (State Plane)":209042,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74044763163026,Longitude:-73.98489422703423,Location:"(40.74044763163026, -73.98489422703423)"},geometry:{type:"Point",coordinates:[-73.98489422703423,40.74044763163026]}},{type:"Feature",properties:{"Unique Key":51722292,"Created Date":"09/02/2021 10:15:00 AM","Closed Date":"09/03/2021 11:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10023,"Incident Address":"55 WEST END AVENUE","Street Name":"WEST END AVENUE","Cross Street 1":"W 62 ST","Cross Street 2":"THELONIOUS MONK CIR","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 11:00:00 AM","Community Board":"07 MANHATTAN",BBL:1011710063,Borough:"MANHATTAN","X Coordinate (State Plane)":987385,"Y Coordinate (State Plane)":221287,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.77405746597447,Longitude:-73.9886811994225,Location:"(40.77405746597447, -73.9886811994225)"},geometry:{type:"Point",coordinates:[-73.9886811994225,40.77405746597447]}},{type:"Feature",properties:{"Unique Key":51713652,"Created Date":"09/02/2021 10:32:00 AM","Closed Date":"09/02/2021 05:05:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10009,"Incident Address":"111 EAST    7 STREET","Street Name":"EAST    7 STREET","Cross Street 1":"1 AVE","Cross Street 2":"AVENUE A","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:05:00 PM","Community Board":"03 MANHATTAN",BBL:1004350045,Borough:"MANHATTAN","X Coordinate (State Plane)":988474,"Y Coordinate (State Plane)":203988,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72657562678744,Longitude:-73.98476027163207,Location:"(40.72657562678744, -73.98476027163207)"},geometry:{type:"Point",coordinates:[-73.98476027163207,40.72657562678744]}},{type:"Feature",properties:{"Unique Key":51720132,"Created Date":"09/02/2021 10:33:00 AM","Closed Date":"09/03/2021 01:15:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10065,"Incident Address":"429 EAST   64 STREET","Street Name":"EAST   64 STREET","Cross Street 1":"1 AVE","Cross Street 2":"YORK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:15:00 PM","Community Board":"08 MANHATTAN",BBL:1014590022,Borough:"MANHATTAN","X Coordinate (State Plane)":995716,"Y Coordinate (State Plane)":217003,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.762292118946036,Longitude:-73.95860974584663,Location:"(40.762292118946036, -73.95860974584663)"},geometry:{type:"Point",coordinates:[-73.95860974584663,40.762292118946036]}},{type:"Feature",properties:{"Unique Key":51713711,"Created Date":"09/02/2021 10:38:00 AM","Closed Date":"09/03/2021 12:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"273 WEST  136 STREET","Street Name":"WEST  136 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Surcharge conditions have been confirmed due to rain intensity or volume.","Resolution Action Updated Date":"09/03/2021 12:45:00 PM","Community Board":"10 MANHATTAN",BBL:1019427501,Borough:"MANHATTAN","X Coordinate (State Plane)":999440,"Y Coordinate (State Plane)":236861,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8167913694731,Longitude:-73.94512185168155,Location:"(40.8167913694731, -73.94512185168155)"},geometry:{type:"Point",coordinates:[-73.94512185168155,40.8167913694731]}},{type:"Feature",properties:{"Unique Key":51723062,"Created Date":"09/02/2021 10:45:00 AM","Closed Date":"09/03/2021 08:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10035,"Incident Address":"2385 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 120 ST","Cross Street 2":"PALADINO AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 08:50:00 AM","Community Board":"11 MANHATTAN",BBL:1017970001,Borough:"MANHATTAN","X Coordinate (State Plane)":1002927,"Y Coordinate (State Plane)":230726,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.799945813070316,Longitude:-73.93254115658634,Location:"(40.799945813070316, -73.93254115658634)"},geometry:{type:"Point",coordinates:[-73.93254115658634,40.799945813070316]}},{type:"Feature",properties:{"Unique Key":51718705,"Created Date":"09/02/2021 10:53:00 AM","Closed Date":"09/03/2021 01:10:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10009,"Incident Address":"532 EAST   12 STREET","Street Name":"EAST   12 STREET","Cross Street 1":"AVENUE A","Cross Street 2":"AVENUE B","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:10:00 PM","Community Board":"03 MANHATTAN",BBL:1004050024,Borough:"MANHATTAN","X Coordinate (State Plane)":989669,"Y Coordinate (State Plane)":204765,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7287076510075,Longitude:-73.98044821721834,Location:"(40.7287076510075, -73.98044821721834)"},geometry:{type:"Point",coordinates:[-73.98044821721834,40.7287076510075]}},{type:"Feature",properties:{"Unique Key":51716384,"Created Date":"09/02/2021 10:57:00 AM","Closed Date":"09/03/2021 01:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10048,"Incident Address":"138 WEST STREET","Street Name":"WEST STREET","Cross Street 1":"LIBERTY ST","Cross Street 2":"VESEY ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:30:00 PM","Community Board":"01 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":980412,"Y Coordinate (State Plane)":199294,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.71369190380233,Longitude:-74.01384440617939,Location:"(40.71369190380233, -74.01384440617939)"},geometry:{type:"Point",coordinates:[-74.01384440617939,40.71369190380233]}},{type:"Feature",properties:{"Unique Key":51727094,"Created Date":"09/02/2021 11:09:00 AM","Closed Date":"09/03/2021 09:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"2201 1 AVENUE","Street Name":"1 AVENUE","Cross Street 1":"E 112 ST","Cross Street 2":"E 114 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:55:00 AM","Community Board":"11 MANHATTAN",BBL:1016840001,Borough:"MANHATTAN","X Coordinate (State Plane)":1001762,"Y Coordinate (State Plane)":228623,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79417603681146,Longitude:-73.93675446451017,Location:"(40.79417603681146, -73.93675446451017)"},geometry:{type:"Point",coordinates:[-73.93675446451017,40.79417603681146]}},{type:"Feature",properties:{"Unique Key":51720225,"Created Date":"09/02/2021 11:11:00 AM","Closed Date":"09/02/2021 05:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10003,"Incident Address":"328 EAST   19 STREET","Street Name":"EAST   19 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:50:00 PM","Community Board":"06 MANHATTAN",BBL:1009240050,Borough:"MANHATTAN","X Coordinate (State Plane)":989350,"Y Coordinate (State Plane)":207043,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73496039174205,Longitude:-73.98159744432803,Location:"(40.73496039174205, -73.98159744432803)"},geometry:{type:"Point",coordinates:[-73.98159744432803,40.73496039174205]}},{type:"Feature",properties:{"Unique Key":51712590,"Created Date":"09/02/2021 11:12:00 AM","Closed Date":"09/02/2021 05:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10128,"Incident Address":"210 EAST   95 STREET","Street Name":"EAST   95 STREET","Cross Street 1":"3 AVE","Cross Street 2":"2 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 05:40:00 PM","Community Board":"08 MANHATTAN",BBL:1015400042,Borough:"MANHATTAN","X Coordinate (State Plane)":998383,"Y Coordinate (State Plane)":224966,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.7841446051619,Longitude:-73.94896559743964,Location:"(40.7841446051619, -73.94896559743964)"},geometry:{type:"Point",coordinates:[-73.94896559743964,40.7841446051619]}},{type:"Feature",properties:{"Unique Key":51715909,"Created Date":"09/02/2021 11:33:00 AM","Closed Date":"09/03/2021 12:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10011,"Incident Address":"243 WEST   24 STREET","Street Name":"WEST   24 STREET","Cross Street 1":"7 AVE","Cross Street 2":"8 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 12:45:00 PM","Community Board":"04 MANHATTAN",BBL:1007740014,Borough:"MANHATTAN","X Coordinate (State Plane)":985229,"Y Coordinate (State Plane)":210816,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74531775541729,Longitude:-73.99646688181572,Location:"(40.74531775541729, -73.99646688181572)"},geometry:{type:"Point",coordinates:[-73.99646688181572,40.74531775541729]}},{type:"Feature",properties:{"Unique Key":51718342,"Created Date":"09/02/2021 11:40:00 AM","Closed Date":"09/03/2021 11:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10017,"Incident Address":"424 MADISON AVENUE","Street Name":"MADISON AVENUE","Cross Street 1":"E 48 ST","Cross Street 2":"E 49 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 11:35:00 AM","Community Board":"05 MANHATTAN",BBL:1012840056,Borough:"MANHATTAN","X Coordinate (State Plane)":990828,"Y Coordinate (State Plane)":215059,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.75696132515915,Longitude:-73.97625647167831,Location:"(40.75696132515915, -73.97625647167831)"},geometry:{type:"Point",coordinates:[-73.97625647167831,40.75696132515915]}},{type:"Feature",properties:{"Unique Key":51720822,"Created Date":"09/02/2021 11:40:00 AM","Closed Date":"09/02/2021 11:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10040,"Incident Address":"112 NAGLE AVENUE","Street Name":"NAGLE AVENUE","Cross Street 1":"SICKLES ST","Cross Street 2":"ARDEN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 11:55:00 AM","Community Board":"12 MANHATTAN",BBL:1021740088,Borough:"MANHATTAN","X Coordinate (State Plane)":1004472,"Y Coordinate (State Plane)":252906,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.860820129878626,Longitude:-73.9268939658624,Location:"(40.860820129878626, -73.9268939658624)"},geometry:{type:"Point",coordinates:[-73.9268939658624,40.860820129878626]}},{type:"Feature",properties:{"Unique Key":51725504,"Created Date":"09/02/2021 11:43:00 AM","Closed Date":"09/03/2021 05:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Other Water Problem (Use Comments) (WZZ)","Location Type":null,"Incident Zip":10003,"Incident Address":"246 EAST   15 STREET","Street Name":"EAST   15 STREET","Cross Street 1":"RUTHERFORD PL","Cross Street 2":"2 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The status of this Service Request is currently not available online. Please call 311 for further assistance. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 05:40:00 PM","Community Board":"06 MANHATTAN",BBL:1008960026,Borough:"MANHATTAN","X Coordinate (State Plane)":988401,"Y Coordinate (State Plane)":206427,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73327011970919,Longitude:-73.9850221430027,Location:"(40.73327011970919, -73.9850221430027)"},geometry:{type:"Point",coordinates:[-73.9850221430027,40.73327011970919]}},{type:"Feature",properties:{"Unique Key":51713821,"Created Date":"09/02/2021 11:47:00 AM","Closed Date":"09/03/2021 09:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10029,"Incident Address":"241 EAST  115 STREET","Street Name":"EAST  115 STREET","Cross Street 1":"3 AVE","Cross Street 2":"2 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:35:00 AM","Community Board":"11 MANHATTAN",BBL:1016650022,Borough:"MANHATTAN","X Coordinate (State Plane)":1001150,"Y Coordinate (State Plane)":229507,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.796603568220654,Longitude:-73.93896251029072,Location:"(40.796603568220654, -73.93896251029072)"},geometry:{type:"Point",coordinates:[-73.93896251029072,40.796603568220654]}},{type:"Feature",properties:{"Unique Key":51727673,"Created Date":"09/02/2021 12:00:00 PM","Closed Date":"09/03/2021 01:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10003,"Incident Address":"313 EAST   14 STREET","Street Name":"EAST   14 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:40:00 AM","Community Board":"06 MANHATTAN",BBL:1009210009,Borough:"MANHATTAN","X Coordinate (State Plane)":988589,"Y Coordinate (State Plane)":206004,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.73210899839949,Longitude:-73.98434406429587,Location:"(40.73210899839949, -73.98434406429587)"},geometry:{type:"Point",coordinates:[-73.98434406429587,40.73210899839949]}},{type:"Feature",properties:{"Unique Key":51716085,"Created Date":"09/02/2021 12:56:00 PM","Closed Date":"09/03/2021 11:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10022,"Incident Address":"168 EAST   57 STREET","Street Name":"EAST   57 STREET","Cross Street 1":"LEXINGTON AVE","Cross Street 2":"3 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 11:10:00 AM","Community Board":"06 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":993026,"Y Coordinate (State Plane)":216377,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.760576989314245,Longitude:-73.96832099151027,Location:"(40.760576989314245, -73.96832099151027)"},geometry:{type:"Point",coordinates:[-73.96832099151027,40.760576989314245]}},{type:"Feature",properties:{"Unique Key":51720304,"Created Date":"09/02/2021 01:03:00 PM","Closed Date":"09/03/2021 02:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10024,"Incident Address":"122 WEST   90 STREET","Street Name":"WEST   90 STREET","Cross Street 1":"COLUMBUS AVE","Cross Street 2":"AMSTERDAM AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 02:00:00 PM","Community Board":"07 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":992152,"Y Coordinate (State Plane)":226925,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.789529303513305,Longitude:-73.97146349326695,Location:"(40.789529303513305, -73.97146349326695)"},geometry:{type:"Point",coordinates:[-73.97146349326695,40.789529303513305]}},{type:"Feature",properties:{"Unique Key":51718779,"Created Date":"09/02/2021 01:06:00 PM","Closed Date":"09/03/2021 05:10:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10022,"Incident Address":"320 PARK AVENUE","Street Name":"PARK AVENUE","Cross Street 1":"E 50 ST","Cross Street 2":"E 51 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 05:10:00 AM","Community Board":"05 MANHATTAN",BBL:1012860035,Borough:"MANHATTAN","X Coordinate (State Plane)":991509,"Y Coordinate (State Plane)":215237,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.75744935684442,Longitude:-73.97379818556702,Location:"(40.75744935684442, -73.97379818556702)"},geometry:{type:"Point",coordinates:[-73.97379818556702,40.75744935684442]}},{type:"Feature",properties:{"Unique Key":51725222,"Created Date":"09/02/2021 01:37:00 PM","Closed Date":"09/03/2021 11:35:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10018,"Incident Address":"335 WEST   38 STREET","Street Name":"WEST   38 STREET","Cross Street 1":"8 AVE","Cross Street 2":"9 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 11:35:00 AM","Community Board":"04 MANHATTAN",BBL:1007620014,Borough:"MANHATTAN","X Coordinate (State Plane)":986261,"Y Coordinate (State Plane)":214412,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.755187693204796,Longitude:-73.99274141630195,Location:"(40.755187693204796, -73.99274141630195)"},geometry:{type:"Point",coordinates:[-73.99274141630195,40.755187693204796]}},{type:"Feature",properties:{"Unique Key":51719919,"Created Date":"09/02/2021 01:44:00 PM","Closed Date":"09/03/2021 10:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10030,"Incident Address":"138 WEST  135 STREET","Street Name":"WEST  135 STREET","Cross Street 1":"BASIL A PATERSON WAY","Cross Street 2":"7 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection inspected your complaint and cleaned the catch basin or inlet. If the condition returns, please call 311 (or 212-639-9675 if calling from a non-New York City area code) to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 10:45:00 AM","Community Board":"10 MANHATTAN",BBL:1019190006,Borough:"MANHATTAN","X Coordinate (State Plane)":1000199,"Y Coordinate (State Plane)":236115,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8147424710932,Longitude:-73.94238152419612,Location:"(40.8147424710932, -73.94238152419612)"},geometry:{type:"Point",coordinates:[-73.94238152419612,40.8147424710932]}},{type:"Feature",properties:{"Unique Key":51720504,"Created Date":"09/02/2021 01:49:00 PM","Closed Date":"09/03/2021 10:20:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10128,"Incident Address":"327 EAST   93 STREET","Street Name":"EAST   93 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 10:20:00 AM","Community Board":"08 MANHATTAN",BBL:1015560016,Borough:"MANHATTAN","X Coordinate (State Plane)":998817,"Y Coordinate (State Plane)":224134,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78186028203478,Longitude:-73.94740022356223,Location:"(40.78186028203478, -73.94740022356223)"},geometry:{type:"Point",coordinates:[-73.94740022356223,40.78186028203478]}},{type:"Feature",properties:{"Unique Key":51718520,"Created Date":"09/02/2021 01:58:00 PM","Closed Date":"09/03/2021 01:05:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10014,"Incident Address":"51 10 AVENUE","Street Name":"10 AVENUE","Cross Street 1":"W 13 ST","Cross Street 2":"W 14 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/03/2021 01:05:00 PM","Community Board":"02 MANHATTAN",BBL:1006540031,Borough:"MANHATTAN","X Coordinate (State Plane)":981948,"Y Coordinate (State Plane)":209619,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.74203204407016,Longitude:-74.00830729006049,Location:"(40.74203204407016, -74.00830729006049)"},geometry:{type:"Point",coordinates:[-74.00830729006049,40.74203204407016]}},{type:"Feature",properties:{"Unique Key":51718515,"Created Date":"09/02/2021 02:35:00 PM","Closed Date":"09/03/2021 04:40:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10038,"Incident Address":"10 CATHERINE SLIP","Street Name":"CATHERINE SLIP","Cross Street 1":"CATHERINE ST","Cross Street 2":"UNNAMED ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 04:40:00 PM","Community Board":"03 MANHATTAN",BBL:1001110100,Borough:"MANHATTAN","X Coordinate (State Plane)":985241,"Y Coordinate (State Plane)":197900,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.709866482366486,Longitude:-73.99642547704416,Location:"(40.709866482366486, -73.99642547704416)"},geometry:{type:"Point",coordinates:[-73.99642547704416,40.709866482366486]}},{type:"Feature",properties:{"Unique Key":51720245,"Created Date":"09/02/2021 02:51:00 PM","Closed Date":"09/03/2021 09:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10030,"Incident Address":null,"Street Name":null,"Cross Street 1":null,"Cross Street 2":null,"Intersection Street 1":"8 AVENUE","Intersection Street 2":"WEST 141 STREET","Address Type":"INTERSECTION",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 09:45:00 AM","Community Board":"10 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":999812,"Y Coordinate (State Plane)":238138,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.820295727069976,Longitude:-73.94377493616386,Location:"(40.820295727069976, -73.94377493616386)"},geometry:{type:"Point",coordinates:[-73.94377493616386,40.820295727069976]}},{type:"Feature",properties:{"Unique Key":51729997,"Created Date":"09/02/2021 03:03:00 PM","Closed Date":"09/03/2021 09:50:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10030,"Incident Address":"66 EDGECOMBE AVENUE","Street Name":"EDGECOMBE AVENUE","Cross Street 1":"W 137 ST","Cross Street 2":"W 138 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 09:50:00 AM","Community Board":"10 MANHATTAN",BBL:1020410130,Borough:"MANHATTAN","X Coordinate (State Plane)":999019,"Y Coordinate (State Plane)":237603,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8188286645206,Longitude:-73.94664119933147,Location:"(40.8188286645206, -73.94664119933147)"},geometry:{type:"Point",coordinates:[-73.94664119933147,40.8188286645206]}},{type:"Feature",properties:{"Unique Key":51715489,"Created Date":"09/02/2021 03:07:00 PM","Closed Date":"09/02/2021 06:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10023,"Incident Address":"1855 BROADWAY","Street Name":"BROADWAY","Cross Street 1":"W 60 ST","Cross Street 2":"W 61 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and referred it to another agency or utility for further action.","Resolution Action Updated Date":"09/02/2021 06:20:00 PM","Community Board":"07 MANHATTAN",BBL:1011130047,Borough:"MANHATTAN","X Coordinate (State Plane)":989202,"Y Coordinate (State Plane)":219632,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76951409202482,Longitude:-73.98212220834499,Location:"(40.76951409202482, -73.98212220834499)"},geometry:{type:"Point",coordinates:[-73.98212220834499,40.76951409202482]}},{type:"Feature",properties:{"Unique Key":51718720,"Created Date":"09/02/2021 03:11:00 PM","Closed Date":"09/03/2021 01:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Street Flooding (SJ)","Location Type":null,"Incident Zip":10007,"Incident Address":"187 BROADWAY","Street Name":"BROADWAY","Cross Street 1":"CORTLANDT ST","Cross Street 2":"JOHN ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/03/2021 01:50:00 PM","Community Board":"01 MANHATTAN",BBL:1000630015,Borough:"MANHATTAN","X Coordinate (State Plane)":981573,"Y Coordinate (State Plane)":198025,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.710209228233666,Longitude:-74.00965595072891,Location:"(40.710209228233666, -74.00965595072891)"},geometry:{type:"Point",coordinates:[-74.00965595072891,40.710209228233666]}},{type:"Feature",properties:{"Unique Key":51724327,"Created Date":"09/02/2021 03:12:00 PM","Closed Date":"09/04/2021 08:55:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10034,"Incident Address":"600 WEST  218 STREET","Street Name":"WEST  218 STREET","Cross Street 1":"SEAMAN AVE","Cross Street 2":"INDIAN RD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/04/2021 08:55:00 AM","Community Board":"12 MANHATTAN",BBL:1022500058,Borough:"MANHATTAN","X Coordinate (State Plane)":1006878,"Y Coordinate (State Plane)":257309,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.87289918174896,Longitude:-73.91818099611028,Location:"(40.87289918174896, -73.91818099611028)"},geometry:{type:"Point",coordinates:[-73.91818099611028,40.87289918174896]}},{type:"Feature",properties:{"Unique Key":51714059,"Created Date":"09/02/2021 03:43:00 PM","Closed Date":"09/02/2021 05:20:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10039,"Incident Address":"210 WEST  146 STREET","Street Name":"WEST  146 STREET","Cross Street 1":"ADAM CLAYTON POWELL JR BLVD","Cross Street 2":"FREDERICK DOUGLASS BLVD","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 05:20:00 PM","Community Board":"10 MANHATTAN",BBL:1020310038,Borough:"MANHATTAN","X Coordinate (State Plane)":1001053,"Y Coordinate (State Plane)":238977,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.82259627095684,Longitude:-73.93928913892134,Location:"(40.82259627095684, -73.93928913892134)"},geometry:{type:"Point",coordinates:[-73.93928913892134,40.82259627095684]}},{type:"Feature",properties:{"Unique Key":51719758,"Created Date":"09/02/2021 04:21:00 PM","Closed Date":"09/03/2021 08:45:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10035,"Incident Address":"319 EAST  119 STREET","Street Name":"EAST  119 STREET","Cross Street 1":"2 AVE","Cross Street 2":"1 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and found that debris was obstructing the catch basin.","Resolution Action Updated Date":"09/03/2021 08:45:00 AM","Community Board":"11 MANHATTAN",BBL:1017960111,Borough:"MANHATTAN","X Coordinate (State Plane)":1002107,"Y Coordinate (State Plane)":230228,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79858063446484,Longitude:-73.93550421093074,Location:"(40.79858063446484, -73.93550421093074)"},geometry:{type:"Point",coordinates:[-73.93550421093074,40.79858063446484]}},{type:"Feature",properties:{"Unique Key":51718424,"Created Date":"09/02/2021 04:31:00 PM","Closed Date":"09/02/2021 06:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10030,"Incident Address":"106 EDGECOMBE AVENUE","Street Name":"EDGECOMBE AVENUE","Cross Street 1":"W 139 ST","Cross Street 2":"W 140 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 06:50:00 PM","Community Board":"10 MANHATTAN",BBL:1020427504,Borough:"MANHATTAN","X Coordinate (State Plane)":999235,"Y Coordinate (State Plane)":237992,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.8198959959834,Longitude:-73.94585994624946,Location:"(40.8198959959834, -73.94585994624946)"},geometry:{type:"Point",coordinates:[-73.94585994624946,40.8198959959834]}},{type:"Feature",properties:{"Unique Key":51725096,"Created Date":"09/02/2021 04:31:00 PM","Closed Date":"09/02/2021 07:30:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10025,"Incident Address":"86 WEST  100 STREET","Street Name":"WEST  100 STREET","Cross Street 1":"MANHATTAN AVE","Cross Street 2":"COLUMBUS AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Upon investigation, there was no indication of a city sewer issue and there is a suspected sewer backup due to an internal plumbing issue.","Resolution Action Updated Date":"09/02/2021 07:30:00 PM","Community Board":"07 MANHATTAN",BBL:null,Borough:"MANHATTAN","X Coordinate (State Plane)":993875,"Y Coordinate (State Plane)":229010,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.79525035702049,Longitude:-73.96523823287524,Location:"(40.79525035702049, -73.96523823287524)"},geometry:{type:"Point",coordinates:[-73.96523823287524,40.79525035702049]}},{type:"Feature",properties:{"Unique Key":51727148,"Created Date":"09/02/2021 05:29:00 PM","Closed Date":"09/03/2021 12:00:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10037,"Incident Address":"59 WEST  137 STREET","Street Name":"WEST  137 STREET","Cross Street 1":"5 AVE","Cross Street 2":"LENOX AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint. Surcharge conditions have been confirmed due to rain intensity or volume.","Resolution Action Updated Date":"09/03/2021 12:00:00 PM","Community Board":"10 MANHATTAN",BBL:1017350010,Borough:"MANHATTAN","X Coordinate (State Plane)":1001285,"Y Coordinate (State Plane)":236137,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.81480082752887,Longitude:-73.93845810985339,Location:"(40.81480082752887, -73.93845810985339)"},geometry:{type:"Point",coordinates:[-73.93845810985339,40.81480082752887]}},{type:"Feature",properties:{"Unique Key":51713916,"Created Date":"09/02/2021 05:34:00 PM","Closed Date":"09/02/2021 05:45:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Sewer Backup (Use Comments) (SA)","Location Type":null,"Incident Zip":10034,"Incident Address":"565 ACADEMY STREET","Street Name":"ACADEMY STREET","Cross Street 1":"NAGLE AVE","Cross Street 2":"POST AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection resolved this complaint by speaking to the complainant on the phone.","Resolution Action Updated Date":"09/02/2021 05:45:00 PM","Community Board":"12 MANHATTAN",BBL:1022180054,Borough:"MANHATTAN","X Coordinate (State Plane)":1005548,"Y Coordinate (State Plane)":253782,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.863221954379064,Longitude:-73.92300125763721,Location:"(40.863221954379064, -73.92300125763721)"},geometry:{type:"Point",coordinates:[-73.92300125763721,40.863221954379064]}},{type:"Feature",properties:{"Unique Key":51726549,"Created Date":"09/02/2021 07:26:00 PM","Closed Date":"09/02/2021 08:35:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Overflow (Use Comments) (SA1)","Location Type":null,"Incident Zip":10038,"Incident Address":"25 FULTON STREET","Street Name":"FULTON STREET","Cross Street 1":"FRONT ST","Cross Street 2":"WATER ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 08:35:00 PM","Community Board":"01 MANHATTAN",BBL:1000960005,Borough:"MANHATTAN","X Coordinate (State Plane)":983174,"Y Coordinate (State Plane)":196928,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.70719856251937,Longitude:-74.00388096141931,Location:"(40.70719856251937, -74.00388096141931)"},geometry:{type:"Point",coordinates:[-74.00388096141931,40.70719856251937]}},{type:"Feature",properties:{"Unique Key":51720210,"Created Date":"09/02/2021 07:29:00 PM","Closed Date":"09/05/2021 10:30:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Catch Basin Clogged/Flooding (Use Comments) (SC)","Location Type":null,"Incident Zip":10128,"Incident Address":"1120 PARK AVENUE","Street Name":"PARK AVENUE","Cross Street 1":"MADISON AVE","Cross Street 2":"PARK AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/05/2021 10:30:00 AM","Community Board":"08 MANHATTAN",BBL:1015020033,Borough:"MANHATTAN","X Coordinate (State Plane)":996515,"Y Coordinate (State Plane)":224549,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.78300284092864,Longitude:-73.95571172396143,Location:"(40.78300284092864, -73.95571172396143)"},geometry:{type:"Point",coordinates:[-73.95571172396143,40.78300284092864]}},{type:"Feature",properties:{"Unique Key":51729256,"Created Date":"09/02/2021 08:19:00 PM","Closed Date":"09/05/2021 10:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Culvert Blocked/Needs Cleaning (SE)","Location Type":null,"Incident Zip":10028,"Incident Address":"509 EAST   81 STREET","Street Name":"EAST   81 STREET","Cross Street 1":"YORK AVE","Cross Street 2":"EAST END AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/05/2021 10:00:00 AM","Community Board":"08 MANHATTAN",BBL:1015780006,Borough:"MANHATTAN","X Coordinate (State Plane)":998381,"Y Coordinate (State Plane)":220727,"Open Data Channel Type":"PHONE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.772509673647185,Longitude:-73.94898173458112,Location:"(40.772509673647185, -73.94898173458112)"},geometry:{type:"Point",coordinates:[-73.94898173458112,40.772509673647185]}},{type:"Feature",properties:{"Unique Key":51717698,"Created Date":"09/02/2021 08:57:00 PM","Closed Date":"07/12/2022 11:40:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10075,"Incident Address":"555 EAST   78 STREET","Street Name":"EAST   78 STREET","Cross Street 1":"E 78 STREET PEDESTRIAN OVPS","Cross Street 2":"FDR DRIVE SB ENTRANCE E 78 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection has investigated this complaint and has performed repair work.","Resolution Action Updated Date":"07/12/2022 11:40:00 AM","Community Board":"08 MANHATTAN",BBL:1014900122,Borough:"MANHATTAN","X Coordinate (State Plane)":998363,"Y Coordinate (State Plane)":219784,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.76992141383538,Longitude:-73.94904870168055,Location:"(40.76992141383538, -73.94904870168055)"},geometry:{type:"Point",coordinates:[-73.94904870168055,40.76992141383538]}},{type:"Feature",properties:{"Unique Key":51721623,"Created Date":"09/02/2021 09:34:00 PM","Closed Date":"09/02/2021 09:50:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Excessive Water In Basement (WEFB)","Location Type":null,"Incident Zip":10036,"Incident Address":"535 WEST   43 STREET","Street Name":"WEST   43 STREET","Cross Street 1":"AMTRAK-NORTHEAST LINE","Cross Street 2":"11 AVE","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environment Protection inspected your complaint but could not find the problem you reported. If the condition persists, please call 311 (or 212-639-9675 if calling from a non-New York City area code) with more detailed information to submit a new complaint.","Resolution Action Updated Date":"09/02/2021 09:50:00 PM","Community Board":"04 MANHATTAN",BBL:1010720050,Borough:"MANHATTAN","X Coordinate (State Plane)":985225,"Y Coordinate (State Plane)":216509,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.760943597297086,Longitude:-73.99648049195326,Location:"(40.760943597297086, -73.99648049195326)"},geometry:{type:"Point",coordinates:[-73.99648049195326,40.760943597297086]}},{type:"Feature",properties:{"Unique Key":51716596,"Created Date":"09/02/2021 10:19:00 PM","Closed Date":"09/03/2021 01:00:00 AM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Water System",Descriptor:"Leak (Use Comments) (WA2)","Location Type":null,"Incident Zip":10009,"Incident Address":"102 AVENUE C","Street Name":"AVENUE C","Cross Street 1":"E 6 ST","Cross Street 2":"E 7 ST","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"Please call 311 for further information. If you are outside of New York City, please call (212) NEW-YORK (212-639-9675).","Resolution Action Updated Date":"09/03/2021 01:00:00 AM","Community Board":"03 MANHATTAN",BBL:1003760007,Borough:"MANHATTAN","X Coordinate (State Plane)":990087,"Y Coordinate (State Plane)":203032,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.72395072171022,Longitude:-73.97894157404646,Location:"(40.72395072171022, -73.97894157404646)"},geometry:{type:"Point",coordinates:[-73.97894157404646,40.72395072171022]}},{type:"Feature",properties:{"Unique Key":51715615,"Created Date":"09/02/2021 10:43:00 PM","Closed Date":"09/02/2021 11:05:00 PM",Agency:"DEP","Agency Name":"Department of Environmental Protection","Complaint Type":"Sewer",Descriptor:"Manhole Cover Missing (Emergency) (SA3)","Location Type":null,"Incident Zip":10033,"Incident Address":"718 WEST  178 STREET","Street Name":"WEST  178 STREET","Cross Street 1":"BROADWAY","Cross Street 2":"CBE NB EXIT 1 A UPPERDECK","Intersection Street 1":null,"Intersection Street 2":null,"Address Type":"ADDRESS",City:"NEW YORK",Landmark:null,"Facility Type":null,Status:"Closed","Due Date":null,"Resolution Description":"The Department of Environmental Protection investigated this complaint and referred it to another agency or utility for further action.","Resolution Action Updated Date":"09/02/2021 11:05:00 PM","Community Board":"12 MANHATTAN",BBL:1021760011,Borough:"MANHATTAN","X Coordinate (State Plane)":1001276,"Y Coordinate (State Plane)":248425,"Open Data Channel Type":"ONLINE","Park Facility Name":"Unspecified","Park Borough":"MANHATTAN","Vehicle Type":null,"Taxi Company Borough":null,"Taxi Pick Up Location":null,"Bridge Highway Name":null,"Bridge Highway Direction":null,"Road Ramp":null,"Bridge Highway Segment":null,Latitude:40.848527866176525,Longitude:-73.93845943637704,Location:"(40.848527866176525, -73.93845943637704)"},geometry:{type:"Point",coordinates:[-73.93845943637704,40.848527866176525]}}],k0e={type:$0e,name:D0e,crs:L0e,features:O0e},F0e=""+new URL("ida_311_heatmap.8f0465e0.png",import.meta.url).href,B0e=""+new URL("mod_stormwater.df1cfcc4.png",import.meta.url).href,U0e=""+new URL("sandy_inundation.0ba60b31.png",import.meta.url).href;let t4=null,Yc=null,i4=null,P0=null,$0=null;async function V0e(e){}function j0e(e){V0e(),t4=new Zg({style:_0e}),Yc=new Zg({style:C0e}),i4=new Zg({style:P0e});const t=new Blob([JSON.stringify(k0e)],{type:"application/json"});P0=new YE({url:URL.createObjectURL(t),renderer:{type:"heatmap",colorStops:[{color:"rgba(241,238,246, 0)",ratio:0},{color:"rgba(251,106,74, 0.4)",ratio:.1},{color:"rgba(222,45,38, 0.5)",ratio:.3},{color:"rgba(165,15,21, 0.7)",ratio:.6}],maxDensity:.01,minDensity:0},title:"Hurricane Ida - 311 DEP Flooding Related Requests",minScale:3e5,maxScale:9e3}),$0=new YE({url:URL.createObjectURL(t),popupTemplate:{title:"{Complaint Type} {Descriptor}",content:"Created {Created Date} at {Incident Address}. Resoluted with {Resolution Description}",fieldInfos:[{fieldName:"Created Date",format:{dateFormat:"short-date-short-time"}}]},renderer:{type:"simple",symbol:{type:"simple-marker",color:"rgba(255,0,0, 0.8)",size:13,outline:{color:"white"}}},title:"Hurricane Ida - 311 DEP Flooding Related Requests",minScale:9e3,maxScale:0}),e.add(i4),e.add(t4),e.add(Yc),e.add(P0),e.add($0);const i=["Area not included in analysis:1","Area under analysis","Area not included in analysis:2","National Wetlands Inventory/1","Nuisance Flooding (greater or equal to 4 in and less than 1ft)/1","Deep and Contiguous Flooding (1ft and greater)/1","Future High Tides 2050"];return[{name:"Moderate Stormwater Flood with 2050 Sea Levels",description:"Heavy rain events that overwhelm our stormwater management system.",legendElements:['<div><span class="fill" style="background-color: #73B2FF;"></span>Nuisance Flooding (greater or equal to 4 in and less than 1ft)</div>','<div><span class="fill" style="background-color: #005CE6;"></span>Deep and Contiguous Flooding (1ft and greater)</div>','<div><span class="fill" style="background-color: rgba(255, 167, 29,1);"></span>Future High Tides in 2050</div>','<div><span class="fill" style="background-color: #CCCCCC;"></span>Area not included in analysis or National Wetlands Inventory</div>'],visible:!0,src:B0e,on:r=>{i.forEach(n=>{Yc.setStyleLayerVisibility(n,"visible")})},off:r=>{i.forEach(n=>{Yc.setStyleLayerVisibility(n,"none")})}},{name:"311 DEP Flood Service Requests (Hur. Ida: Sept 1-2 2021)",description:"Complaints of Sewer Backup, Catch Basin Clogged/Flooding, and Basement Flooding. These show us issues that happen in buildings and sidewalks that the stormwater layer can miss. Zoom in to view more details.",legendElements:['<div><span class="circle" style="background-color: rgba(255,0,0,0.8);outline: 1px solid rgba(200,200,200,0.7);"></span>311 DEP Flood Service Requests</div>'],visible:!0,src:F0e,on:r=>{P0.visible=!0,$0.visible=!0},off:r=>{P0.visible=!1,$0.visible=!1}},{name:"Sandy Inundation Zone",legendElements:['<div><span class="fill" style="background-color: #446589;"></span>Inundation Zone - Areas that were flooded as a result of Hurricane Sandy.</div>'],visible:!0,src:U0e,on:r=>{Yc.setStyleLayerVisibility("Sandy Inundation Zone","visible")},off:r=>{Yc.setStyleLayerVisibility("Sandy Inundation Zone","none")}}]}const Kc=[];function pU(e,t=Mi){let i;const r=new Set;function n(a){if(Mc(e,a)&&(e=a,i)){const u=!Kc.length;for(const d of r)d[1](),Kc.push(d,e);if(u){for(let d=0;d<Kc.length;d+=2)Kc[d][0](Kc[d+1]);Kc.length=0}}}function o(a){n(a(e))}function s(a,u=Mi){const d=[a,u];return r.add(d),r.size===1&&(i=t(n)||Mi),a(e),()=>{r.delete(d),r.size===0&&(i(),i=null)}}return{set:n,update:o,subscribe:s}}const hU=pU(),Vy=pU([]);function z0e(e){let t,i,r;return{c(){t=no("div"),pt(t,"id","map"),pt(t,"class","flex-1 h-full")},m(n,o){ho(n,t,o),i||(r=SV(e[0].call(null,t)),i=!0)},p:Mi,i:Mi,o:Mi,d(n){n&&vn(t),i=!1,r()}}}function H0e(e){function t(i){const r=new KL,n=new vye({map:r,container:i,center:[-73.98255,40.75925],zoom:12});n.ui.components=["attribution"];const o=new Sme({view:n});n.ui.add(o,"top-right");const s=new NB({view:n});return n.ui.add(s,"bottom-right"),Vy.set(j0e(r)),hU.set(r),n.when(()=>{console.log("Map is loaded")}),{destroy:()=>{r.destroy()}}}return[t]}class G0e extends Pp{constructor(t){super(),Rp(this,t,H0e,z0e,Mc,{})}}function W0e(e){let t,i;return{c(){t=S_("svg"),i=S_("path"),pt(i,"fill-rule","evenodd"),pt(i,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"),pt(i,"clip-rule","evenodd"),pt(t,"xmlns","http://www.w3.org/2000/svg"),pt(t,"class","h-5 w-5"),pt(t,"viewBox","0 0 20 20"),pt(t,"fill","currentColor")},m(r,n){ho(r,t,n),eo(t,i)},p:Mi,i:Mi,o:Mi,d(r){r&&vn(t)}}}class q0e extends Pp{constructor(t){super(),Rp(this,t,null,W0e,Mc,{})}}function r4(e){let t,i,r,n;return i=new q0e({}),{c(){t=no("div"),sy(i.$$.fragment),pt(t,"class","absolute bottom-0 right-0"),pt(t,"title",r=e[0].description)},m(o,s){ho(o,t,s),ap(i,t,null),n=!0},p(o,s){(!n||s&1&&r!==(r=o[0].description))&&pt(t,"title",r)},i(o){n||(oo(i.$$.fragment,o),n=!0)},o(o){Zs(i.$$.fragment,o),n=!1},d(o){o&&vn(t),lp(i)}}}function Y0e(e){let t,i,r,n,o,s,a=e[0].name+"",u,d,h,f,y,m,g=e[0].description&&r4(e);return{c(){t=no("button"),i=no("img"),o=oy(),s=no("div"),u=iA(a),d=oy(),g&&g.c(),NC(i.src,r=e[0].src)||pt(i,"src",r),pt(i,"alt",n=e[0].name+" Thumbnail for Toggle"),pt(t,"class",h="w-32 min-h-24 bg-white pointer-events-auto drop-shadow-md cursor-pointer text-center "+(e[0].visible?"outline outline-2 outline-blue-500":"")+" flex flex-col items-center p-2 mb-3 text-xs hover:bg-slate-100 focus:bg-slate-100")},m(v,w){ho(v,t,w),eo(t,i),eo(t,o),eo(t,s),eo(s,u),eo(t,d),g&&g.m(t,null),f=!0,y||(m=EV(t,"click",e[1]),y=!0)},p(v,[w]){(!f||w&1&&!NC(i.src,r=v[0].src))&&pt(i,"src",r),(!f||w&1&&n!==(n=v[0].name+" Thumbnail for Toggle"))&&pt(i,"alt",n),(!f||w&1)&&a!==(a=v[0].name+"")&&xV(u,a),v[0].description?g?(g.p(v,w),w&1&&oo(g,1)):(g=r4(v),g.c(),oo(g,1),g.m(t,null)):g&&(_4(),Zs(g,1,1,()=>{g=null}),S4()),(!f||w&1&&h!==(h="w-32 min-h-24 bg-white pointer-events-auto drop-shadow-md cursor-pointer text-center "+(v[0].visible?"outline outline-2 outline-blue-500":"")+" flex flex-col items-center p-2 mb-3 text-xs hover:bg-slate-100 focus:bg-slate-100"))&&pt(t,"class",h)},i(v){f||(oo(g),f=!0)},o(v){Zs(g),f=!1},d(v){v&&vn(t),g&&g.d(),y=!1,m()}}}function K0e(e,t,i){let r,n;Jg(e,Vy,a=>i(2,r=a)),Jg(e,hU,a=>i(3,n=a));let{layer:o={name:"Layer Name",description:"Layer Description",visible:!0,src:"http://graphics8.nytimes.com/newsgraphics/2012/1120-sandy/_assets/city_thumb.png",on:a=>{},off:a=>{}}}=t;function s(){o.visible?o.off(n):o.on(n),i(0,o.visible=!o.visible,o),Vy.set(r)}return e.$$set=a=>{"layer"in a&&i(0,o=a.layer)},[o,s]}class Z0e extends Pp{constructor(t){super(),Rp(this,t,K0e,Y0e,Mc,{layer:0})}}function n4(e,t,i){const r=e.slice();return r[2]=t[i],r}function o4(e){let t,i,r,n=e[0],o=[];for(let s=0;s<n.length;s+=1)o[s]=s4(n4(e,n,s));return{c(){t=no("div"),i=no("h3"),i.textContent="Legend",r=oy();for(let s=0;s<o.length;s+=1)o[s].c();pt(i,"class","text-lg font-medium mb-2"),pt(t,"id","legend"),pt(t,"class","w-52 bg-white p-2 drop-shadow-sm flex flex-col h-fit leading-5")},m(s,a){ho(s,t,a),eo(t,i),eo(t,r);for(let u=0;u<o.length;u+=1)o[u].m(t,null)},p(s,a){if(a&1){n=s[0];let u;for(u=0;u<n.length;u+=1){const d=n4(s,n,u);o[u]?o[u].p(d,a):(o[u]=s4(d),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=n.length}},d(s){s&&vn(t),TV(o,s)}}}function s4(e){let t,i=e[2]+"",r;return{c(){t=new CV(!1),r=rA(),t.a=r},m(n,o){t.m(i,n,o),ho(n,r,o)},p(n,o){o&1&&i!==(i=n[2]+"")&&t.p(i)},d(n){n&&vn(r),n&&t.d()}}}function J0e(e){let t,i=e[0].length&&o4(e);return{c(){i&&i.c(),t=rA()},m(r,n){i&&i.m(r,n),ho(r,t,n)},p(r,[n]){r[0].length?i?i.p(r,n):(i=o4(r),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Mi,o:Mi,d(r){i&&i.d(r),r&&vn(t)}}}function X0e(e,t,i){let r,n;return Jg(e,Vy,o=>i(1,n=o)),e.$$.update=()=>{e.$$.dirty&2&&i(0,r=n.filter(({visible:o})=>o).reduce((o,s)=>s.legendElements?[...o,...s.legendElements]:o,[])),e.$$.dirty&1&&console.log(r)},[r,n]}class Q0e extends Pp{constructor(t){super(),Rp(this,t,X0e,J0e,Mc,{})}}function a4(e,t,i){const r=e.slice();return r[1]=t[i],r}function l4(e,t){let i,r,n;return r=new Z0e({props:{layer:t[1]}}),{key:e,first:null,c(){i=rA(),sy(r.$$.fragment),this.first=i},m(o,s){ho(o,i,s),ap(r,o,s),n=!0},p(o,s){t=o;const a={};s&1&&(a.layer=t[1]),r.$set(a)},i(o){n||(oo(r.$$.fragment,o),n=!0)},o(o){Zs(r.$$.fragment,o),n=!1},d(o){o&&vn(i),lp(r,o)}}}function ege(e){let t,i,r=[],n=new Map,o,s,a,u=e[0];const d=h=>h[1].name;for(let h=0;h<u.length;h+=1){let f=a4(e,u,h),y=d(f);n.set(y,r[h]=l4(y,f))}return s=new Q0e({}),{c(){t=no("div"),i=no("div");for(let h=0;h<r.length;h+=1)r[h].c();o=oy(),sy(s.$$.fragment),pt(i,"class","mr-4"),pt(t,"class","absolute top-3 left-3 z-10 flex flex-row")},m(h,f){ho(h,t,f),eo(t,i);for(let y=0;y<r.length;y+=1)r[y].m(i,null);eo(t,o),ap(s,t,null),a=!0},p(h,[f]){f&1&&(u=h[0],_4(),r=PV(r,f,d,1,h,u,n,i,RV,l4,null,a4),S4())},i(h){if(!a){for(let f=0;f<u.length;f+=1)oo(r[f]);oo(s.$$.fragment,h),a=!0}},o(h){for(let f=0;f<r.length;f+=1)Zs(r[f]);Zs(s.$$.fragment,h),a=!1},d(h){h&&vn(t);for(let f=0;f<r.length;f+=1)r[f].d();lp(s)}}}function tge(e,t,i){let r;return Jg(e,Vy,n=>i(0,r=n)),[r]}class ige extends Pp{constructor(t){super(),Rp(this,t,tge,ege,Mc,{})}}function rge(e){let t,i,r,n,o;return i=new ige({}),n=new G0e({}),{c(){t=no("main"),sy(i.$$.fragment),r=oy(),sy(n.$$.fragment),pt(t,"class","flex flex-col md:flex-row h-full absolute bottom-0 left-0 right-0")},m(s,a){ho(s,t,a),ap(i,t,null),eo(t,r),ap(n,t,null),o=!0},p:Mi,i(s){o||(oo(i.$$.fragment,s),oo(n.$$.fragment,s),o=!0)},o(s){Zs(i.$$.fragment,s),Zs(n.$$.fragment,s),o=!1},d(s){s&&vn(t),lp(i),lp(n)}}}class nge extends Pp{constructor(t){super(),Rp(this,t,null,rge,Mc,{})}}new nge({target:document.getElementById("app")});export{jg as $,TD as A,DD as B,Me as C,MD as D,bD as E,LD as F,$D as G,OD as H,Sge as I,Ki as J,_t as K,ID as L,ND as M,fB as N,Ne as O,RD as P,ti as Q,_D as R,Cwe as S,ea as T,PD as U,BD as V,xwe as W,w9 as X,FD as Y,uB as Z,ts as _,tj as a,By as a$,CD as a0,xD as a1,dL as a2,she as a3,nhe as a4,aB as a5,FE as a6,gm as a7,kA as a8,Vwe as a9,yr as aA,Yt as aB,V8 as aC,qwe as aD,Ywe as aE,Ll as aF,Cx as aG,l as aH,c as aI,S as aJ,se as aK,Al as aL,dr as aM,FA as aN,yL as aO,Vo as aP,le as aQ,mn as aR,Iw as aS,p1e as aT,XF as aU,kF as aV,QF as aW,It as aX,Mpe as aY,Zve as aZ,Upe as a_,Mwe as aa,Nwe as ab,kwe as ac,Owe as ad,di as ae,Kwe as af,jwe as ag,ra as ah,SD as ai,ED as aj,AD as ak,Fp as al,wD as am,cwe as an,ko as ao,bv as ap,qD as aq,WD as ar,Cv as as,vB as at,up as au,Av as av,q as aw,ze as ax,iwe as ay,ewe as az,gge as b,z$ as b$,Jve as b0,U as b1,gi as b2,hA as b3,Nge as b4,so as b5,Pl as b6,mr as b7,Up as b8,nve as b9,Gve as bA,sB as bB,V3 as bC,Cp as bD,P as bE,P$ as bF,C$ as bG,I$ as bH,H$ as bI,M$ as bJ,L$ as bK,X$ as bL,p$ as bM,Q$ as bN,Jn as bO,eD as bP,tD as bQ,fF as bR,gF as bS,mF as bT,Mce as bU,Oo as bV,ky as bW,Aw as bX,f1e as bY,Twe as bZ,Swe as b_,sc as ba,Iq as bb,qA as bc,vk as bd,dve as be,pN as bf,mk as bg,GA as bh,b1e as bi,qi as bj,uv as bk,J1e as bl,_1e as bm,h1e as bn,Zge as bo,Vv as bp,jE as bq,YY as br,KY as bs,me as bt,bl as bu,WL as bv,qge as bw,WA as bx,Wve as by,qve as bz,O as c,cle as c$,q$ as c0,uo as c1,T$ as c2,f$ as c3,y$ as c4,m$ as c5,O$ as c6,uD as c7,pD as c8,E$ as c9,U0 as cA,eM as cB,ebe as cC,xi as cD,tbe as cE,wwe as cF,yve as cG,sve as cH,je as cI,c$ as cJ,ibe as cK,Ewe as cL,$3 as cM,sbe as cN,obe as cO,nbe as cP,abe as cQ,lbe as cR,vwe as cS,ny as cT,y0e as cU,dbe as cV,cbe as cW,ube as cX,pbe as cY,ule as cZ,Fve as c_,cD as ca,Xo as cb,pwe as cc,g1e as cd,Uge as ce,rbe as cf,ie as cg,V6 as ch,jte as ci,zte as cj,Dj as ck,bwe as cl,Rve as cm,_we as cn,sp as co,KE as cp,mc as cq,Ym as cr,Z6 as cs,Yge as ct,tc as cu,Dd as cv,Lf as cw,F1e as cx,Ri as cy,Qi as cz,dwe as d,Se as d$,Ove as d0,Kt as d1,rt as d2,jp as d3,kve as d4,bue as d5,_ue as d6,Sue as d7,hn as d8,Q8 as d9,ohe as dA,Iwe as dB,Rwe as dC,Pwe as dD,$we as dE,Dwe as dF,Fwe as dG,Bwe as dH,Zwe as dI,Xwe as dJ,Uu as dK,jo as dL,ZE as dM,Jwe as dN,Ore as dO,_k as dP,oB as dQ,Lwe as dR,$h as dS,Uwe as dT,Hwe as dU,Bl as dV,E1 as dW,Ue as dX,Kg as dY,lA as dZ,Yy as d_,e1e as da,Awe as db,X as dc,Y8 as dd,Bd as de,uae as df,yle as dg,kre as dh,Ji as di,Sk as dj,lve as dk,ove as dl,Qie as dm,fve as dn,hN as dp,Gwe as dq,nle as dr,Wwe as ds,zwe as dt,gwe as du,dge as dv,pge as dw,Iue as dx,Spe as dy,zD as dz,kD as e,Sc as e$,Nc as e0,O5 as e1,Fe as e2,V as e3,ri as e4,Oue as e5,g1 as e6,he as e7,Hme as e8,kh as e9,zve as eA,ZL as eB,t1e as eC,N_ as eD,zi as eE,Qs as eF,a1e as eG,i1e as eH,n1e as eI,r1e as eJ,o1e as eK,yy as eL,pn as eM,yY as eN,pA as eO,am as eP,hy as eQ,s1e as eR,Us as eS,Ol as eT,Bve as eU,y3 as eV,_5 as eW,dp as eX,fy as eY,iy as eZ,pq as e_,Gp as ea,m1e as eb,w1e as ec,Fv as ed,y1e as ee,Pj as ef,Pv as eg,Bp as eh,Hi as ei,ZY as ej,Oe as ek,Uhe as el,Xve as em,Qve as en,fr as eo,hc as ep,tl as eq,Nl as er,Rv as es,Pi as et,h1 as eu,P_ as ev,Q9 as ew,Ip as ex,Vle as ey,Ule as ez,VD as f,$H as f$,Tc as f0,$l as f1,TS as f2,at as f3,SS as f4,AS as f5,R1 as f6,_J as f7,Fpe as f8,G5 as f9,wr as fA,ac as fB,pe as fC,mD as fD,Ehe as fE,Bu as fF,Ct as fG,Hd as fH,vD as fI,rle as fJ,$p as fK,qV as fL,Rme as fM,T7 as fN,S3 as fO,$7 as fP,bw as fQ,cge as fR,_w as fS,x7 as fT,yp as fU,Zo as fV,T4 as fW,Rge as fX,xp as fY,Lle as fZ,Mge as f_,P5 as fa,sm as fb,fc,vt as fd,Gs as fe,rx as ff,LI as fg,Jge as fh,E1e as fi,R1e as fj,nwe as fk,Rc as fl,rs as fm,yA as fn,K as fo,II as fp,X6 as fq,cw as fr,uw as fs,wye as ft,De as fu,k1e as fv,Z5 as fw,r5 as fx,pp as fy,mi as fz,uge as g,dO as g$,Dve as g0,Jae as g1,vr as g2,iae as g3,rae as g4,mse as g5,rY as g6,swe as g7,es as g8,DH as g9,wk as gA,hk as gB,wl as gC,fge as gD,Sfe as gE,aA as gF,oW as gG,n2 as gH,vge as gI,wge as gJ,r2 as gK,wL as gL,jge as gM,RW as gN,mW as gO,pL as gP,mL as gQ,Fge as gR,UW as gS,IL as gT,FZ as gU,DZ as gV,PZ as gW,MZ as gX,_W as gY,L1e as gZ,V1e as g_,owe as ga,S1e as gb,N1e as gc,pve as gd,z6 as ge,Tme as gf,Z1e as gg,Dr as gh,on as gi,tK as gj,xF as gk,E4 as gl,x4 as gm,pie as gn,l1e as go,HL as gp,Xge as gq,Kge as gr,fG as gs,_G as gt,Bv as gu,Oge as gv,TZ as gw,j5 as gx,hve as gy,ive as gz,yge as h,WK as h$,tm as h0,uJ as h1,MW as h2,lJ as h3,YG as h4,Xpe as h5,ehe as h6,SW as h7,Lge as h8,Pge as h9,uve as hA,rk as hB,xy as hC,wre as hD,Y1e as hE,K1e as hF,v1e as hG,Xs as hH,Zd as hI,k7 as hJ,Fie as hK,awe as hL,rve as hM,ZA as hN,c1e as hO,d1e as hP,u1e as hQ,zge as hR,wO as hS,om as hT,Wge as hU,$f as hV,mre as hW,cre as hX,tN as hY,nk as hZ,cve as h_,Ov as ha,kv as hb,phe as hc,_he as hd,$Z as he,bp as hf,Xr as hg,be as hh,BW as hi,VW as hj,qW as hk,XW as hl,CL as hm,AL as hn,xL as ho,JW as hp,rq as hq,nq as hr,kW as hs,hl as ht,Ege as hu,oA as hv,S7 as hw,bre as hx,gre as hy,Q1e as hz,QV as i,I4 as i$,Lve as i0,$j as i1,Eb as i2,Ab as i3,UV as i4,nt as i5,X1e as i6,hge as i7,Cfe as i8,ave as i9,oge as iA,vH as iB,cy as iC,CA as iD,sge as iE,HA as iF,fwe as iG,Z3 as iH,fv as iI,e0e as iJ,ywe as iK,hwe as iL,Zme as iM,ji as iN,XE as iO,hbe as iP,fbe as iQ,QE as iR,JE as iS,mwe as iT,Fi as iU,pi as iV,vi as iW,C as iX,Wn as iY,Qu as iZ,F6 as i_,dw as ia,bge as ib,TW as ic,Qe as id,rp as ie,Mte as ig,ml as ih,Kve as ii,ZR as ij,JR as ik,Oy as il,gL as im,gW as io,hW as ip,vL as iq,ww as ir,rh as is,BZ as it,Hge as iu,r1 as iv,_pe as iw,ZG as ix,Uae as iy,YV as iz,k as j,Ose as j$,Yd as j0,Cge as j1,Lr as j2,$v as j3,Dp as j4,to as j5,$ge as j6,F5 as j7,Mve as j8,wp as j9,Pse as jA,Ise as jB,Cse as jC,xc as jD,$r as jE,N8 as jF,ia as jG,lne as jH,_se as jI,Ese as jJ,K1 as jK,M8 as jL,Or as jM,Fse as jN,$se as jO,J_ as jP,Oc as jQ,UA as jR,Use as jS,Vse as jT,jse as jU,s3 as jV,Hse as jW,zse as jX,Gse as jY,Ry as jZ,gse as j_,Vf as ja,aS as jb,q1e as jc,H1e as jd,G1e as je,j1e as jf,n6 as jg,OQ as jh,W1e as ji,z1e as jj,rU as jk,ame as jl,Ui as jm,Vi as jn,ui as jo,ns as jp,wg as jq,Py as jr,l3 as js,Z1 as jt,mt as ju,Bse as jv,Tl as jw,Ai as jx,kse as jy,gn as jz,N as k,sx as k$,Dse as k0,Mse as k1,eae as k2,Jse as k3,Zse as k4,Ave as k5,Xse as k6,Qse as k7,Nse as k8,Rse as k9,LA as kA,mge as kB,Q7 as kC,kge as kD,b3 as kE,T3 as kF,O7 as kG,jve as kH,gR as kI,J7 as kJ,qle as kK,c7 as kL,Sw as kM,Z7 as kN,Zi as kO,eH as kP,b9 as kQ,mQ as kR,v7 as kS,I5 as kT,Hve as kU,I7 as kV,M7 as kW,Ole as kX,w3 as kY,Fle as kZ,Ble as k_,Lse as ka,Yse as kb,Zx as kc,Ive as kd,Tse as ke,Sse as kf,Ase as kg,xse as kh,x1e as ki,P1e as kj,$1e as kk,Age as kl,Dge as km,Iee as kn,Q6 as ko,FS as kp,uT as kq,iT as kr,Km as ks,Zn as kt,Cre as ku,Ko as kv,Mle as kw,hr as kx,vre as ky,uwe as kz,Bge as l,uP as l$,_c as l0,xme as l1,qq as l2,Gq as l3,bq as l4,vI as l5,Ni as l6,dy as l7,C7 as l8,Ur as l9,sU as lA,rn as lB,B1e as lC,qy as lD,u5 as lE,Sv as lF,Jy as lG,by as lH,pl as lI,Gi as lJ,fK as lK,Dv as lL,D1e as lM,Ze as lN,_ge as lO,VV as lP,FI as lQ,nx as lR,A1e as lS,T1e as lT,fA as lU,cd as lV,$ue as lW,fm as lX,hm as lY,C3 as lZ,e1 as l_,Qy as la,Fl as lb,na as lc,J as ld,Xf as le,$_ as lf,Tb as lg,pz as lh,sn as li,F7 as lj,_3 as lk,Lue as ll,ih as lm,L8 as ln,B8 as lo,Aie as lp,Sae as lq,xie as lr,G8 as ls,X8 as lt,Q1 as lu,m3 as lv,Tge as lw,D8 as lx,ev as ly,kle as lz,age as m,Vge as m$,$c as m0,E7 as m1,P7 as m2,_1 as m3,YA as m4,K7 as m5,xE as m6,Tw as m7,A7 as m8,Sx as m9,Jo as mA,Rl as mB,U7 as mC,QA as mD,Eve as mE,ZN as mF,mve as mG,KN as mH,qse as mI,Tve as mJ,Cve as mK,sk as mL,xve as mM,vve as mN,gve as mO,wve as mP,bve as mQ,Sve as mR,bse as mS,XN as mT,_ve as mU,Wse as mV,gw as mW,P8 as mX,$8 as mY,ZV as mZ,BH as m_,yn as ma,qo as mb,f9 as mc,Lv as md,K3 as me,lge as mf,d7 as mg,El as mh,LR as mi,py as mj,Zle as mk,Kle as ml,Op as mm,Y9 as mn,Uve as mo,Lp as mp,Yle as mq,Vve as mr,Wz as ms,WC as mt,b as mu,O1e as mv,$ve as mw,Pve as mx,x3 as my,Qge as mz,rwe as n,C1e as n0,I1e as n1,cJ as n2,JG as n3,tw as n4,sv as n5,KG as n6,M1e as n7,fL as n8,xge as n9,UZ as na,twe as nb,U1e as nc,AA as nd,cL as ne,Ige as nf,Gge as ng,eG as nh,eve as ni,tve as nj,Nve as nk,Yve as nl,lwe as nm,ybe as nn,$t as o,R_ as p,Be as q,T as r,W as s,UD as t,jD as u,uc as v,fn as w,bt as x,Qwe as y,v$ as z};
